var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),BaseEuiLayer=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.horizontalCenter=0,t}return __extends(t,e),t}(eui.Group);__reflect(BaseEuiLayer.prototype,"BaseEuiLayer");var BaseSpriteLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchEnabled=!1,t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(BaseSpriteLayer.prototype,"BaseSpriteLayer");var BaseView=function(e){function t(){var t=e.call(this)||this;t.mIsAutoSkin=!0,t.m_IsOpen=!1,t.m_EventList=[],t.eventList=[],t.m_RefSkinName=null;var i=Util.GetClass(t).NAME;return i&&(t.name=i),t}return __extends(t,e),t.RedPointCheck=function(){return!1},t.prototype.$setParent=function(t){var i=this.$parent,o=e.prototype.$setParent.call(this,t);if(o){if(i){var n=Util.GetParentByType(t,BaseEuiView);n&&n.UnRefBaseView&&n.UnRefBaseView(this)}if(t){var n=Util.GetParentByType(t,BaseEuiView);n&&n.RefBaseView&&n.RefBaseView(this)}}return o},t.prototype._AddClick=function(e,t){this._AddEvent(egret.TouchEvent.TOUCH_TAP,e,t)},t.prototype._AddItemClick=function(e,t){this._AddEvent(eui.ItemTapEvent.ITEM_TAP,e,t)},t.prototype._AddChange=function(e,t){this._AddEvent(egret.TouchEvent.CHANGE,e,t)},t.prototype._AddEvent=function(e,t,i){if(null==t)return void console.log("没有给定目标控件",this.__class__);for(var o=this.m_EventList,n=0;n<o.length;++n)if(o[n].addObject==t)return;var a=new EventListenerData(t,e,i,this,!1,0);o.push(a)},t.prototype.destoryView=function(){this.OnDestroy(),TimerManager.ins().removeAll(this);for(var e=this.m_EventList,t=0,i=e.length;i>t;t++)e[t].clean();this.m_EventList=[],this.UnrefSkin()},t.prototype.OnDestroy=function(){},t.prototype.AddTimer=function(e,t,i){TimerManager.ins().doTimer(e,t,i,this)},t.prototype.AddLoopTimer=function(e,t){t.call(this),TimerManager.ins().doTimer(1e3,0,t,this)},t.prototype.RemoveTimer=function(e){TimerManager.ins().remove(e,this)},t.prototype.observe=function(e,t){MessageCenter.ins().addListener(e,t,this)},t.prototype.removeObserve=function(){MessageCenter.ins().removeAll(this)},t.prototype.AddClick=function(e,t){this.AddEvent(egret.TouchEvent.TOUCH_TAP,t,this,e)},t.prototype.AddItemClick=function(e,t){this.AddEvent(eui.ItemTapEvent.ITEM_TAP,t,this,e)},t.prototype.AddChange=function(e,t){this.AddEvent(egret.TouchEvent.CHANGE,t,this,e)},t.prototype.AddEvent=function(e,t,i,o,n){if(void 0===o&&(o=null),void 0===n&&(n=!1),null==o)return void console.log("没有给定目标控件",this.__class__);for(var a=0,r=this.eventList;a<r.length;++a)if(r[a].addObject==o)return;var s=new EventListenerData(o,e,t,i,n,0);s?this.eventList.push(s):console.log("绑定侦听事件失败")},t.prototype.removeEvents=function(){for(var e=this.eventList,t=0,i=e.length;i>t;t++)e[t].clean();this.eventList=[]},t.prototype.DoOpen=function(e){void 0===e&&(e=null),this.m_IsOpen||(this.m_IsOpen=!0,this.OnOpen.apply(this,e||t.EMPTY)),this.OnResume.apply(this,e||t.EMPTY)},t.prototype.DoClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.m_IsOpen){this.m_IsOpen=!1,this.OnClose.apply(this,e);for(var i=0;i<this.numChildren;i++){var o=this.getChildAt(i);egret.is(o,"BaseView")&&o.DoClose(e)}this.removeEvents(),this.removeObserve(),TimerManager.ins().removeAll(this)}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnClose=function(){},t.prototype.$parseSkinName=function(){e.prototype.$parseSkinName.call(this);var t=this.skinName;this.m_RefSkinName!=t&&(this.UnrefSkin(),this.m_RefSkinName=t,this.RefSkin())},t.prototype.RefSkin=function(){this.m_RefSkinName&&ResMgr.RefSkin(this.m_RefSkinName)},t.prototype.UnrefSkin=function(){this.m_RefSkinName&&(ResMgr.UnrefSkin(this.m_RefSkinName),this.m_RefSkinName=null)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.mIsAutoSkin&&this.UnrefSkin()},t.prototype.CheckUnrefSkin=function(){!this.$stage&&this.mIsAutoSkin&&this.UnrefSkin()},t.EMPTY=[],t}(eui.Component);__reflect(BaseView.prototype,"BaseView");var BaseClass=function(){function e(){Util.GetClass(this)._instance=this}return e.ins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this;if(!i._instance){var o=e.length;0==o?i._instance=new i:1==o?i._instance=new i(e[0]):2==o?i._instance=new i(e[0],e[1]):3==o?i._instance=new i(e[0],e[1],e[2]):4==o?i._instance=new i(e[0],e[1],e[2],e[3]):5==o&&(i._instance=new i(e[0],e[1],e[2],e[3],e[4]))}return i._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var Raid=function(){function e(){this.mIsExit=!1,this.mMySide=0,this.mEntityList={},this.m_DeltaTime=0}return e.prototype.UpdateSetting=function(e){for(var t in this.mEntityList){var i=this.mEntityList[t];if(!i)return;i.UpdateSetting(e)}},e.prototype.GetSpeed=function(){return 1},e.prototype.Init=function(){},e.prototype.OnMapClick=function(e,t){},e.prototype.DoUpdate=function(e){if(this.IsBackground()){if(this.m_DeltaTime+=e,this.m_DeltaTime<250)return;e=this.m_DeltaTime,this.m_DeltaTime=0}else this.m_DeltaTime&&(e=this.m_DeltaTime+e,this.m_DeltaTime=0);this.Update(e)},e.prototype.Update=function(e){},e.prototype.OnEnter=function(){this.m_DeltaTime=0},e.prototype.OnExit=function(){},e.prototype.OnBackground=function(){},e.prototype.OnForeground=function(){},e.prototype.IsBackground=function(){return!1},e.prototype.RemoveAllEntity=function(){for(var e in this.mEntityList){var t=this.mEntityList[e];t.Dispose(),ObjectPool.push(t)}this.mEntityList={}},e.prototype.RemoveEntity=function(e){var t=this.mEntityList[e];return t?(t.Dispose(),ObjectPool.push(t),delete this.mEntityList[e],!0):!1},e.prototype.CalcEntityTeam=function(e){if(e.masterHandle){if(e.masterHandle==GameGlobal.actorModel.actorID)return Team.My;if(SubRoles.ins().GetRoleData()&&e.masterHandle==SubRoles.ins().GetRoleData().handle)return Team.My}return 0!=e.side&&0!=this.mMySide&&e.side==this.mMySide?Team.My:e.type==EntityType.Monster?Team.Monster:Team.WillEntity},e.prototype.AddEntity=function(e){var t=ObjectPool.pop("MapEntity");return t.Init(this,e),this.mEntityList[t.GetHandle()]=t,t},e.prototype.GetEntityNameStyle=function(e){return e.GetName()},e.prototype.GetEntityNameStyleSvr=function(e){return GameString.GetSerAndName(e.serverId,e.GetName())},e.prototype.GetEntity=function(e){return this.mEntityList[e]},e.prototype.CreateEntity=function(e){return null},e.prototype.DoExitFb=function(){return!1},e.prototype.getMainRole=function(){var e=SubRoles.ins().GetRoleData();return e?this.mEntityList[SubRoles.ins().GetRoleData().handle]:null},e.prototype.getNoDieRole=function(){return this.getMainRole()},e.prototype.GetLookAtRole=function(){var e=this.getNoDieRole();return e?e:null},e.prototype.FinishBattle=function(){},e.prototype.GetTurnId=function(){return 1},e}();__reflect(Raid.prototype,"Raid");var LayerManager=function(){function e(){}return e.Init=function(){if(!this.m_Init){this.m_Init=!0;var t=GameGlobal.StageUtils.GetStage(),i=GameGlobal.StageUtils.GetUIStage();t.addChildAt(e.Game_Main,0),i.addChild(e.UI_GAME_MAP).name="UI_GAME_MAP",i.addChild(e.UI_BATTLE).name="UI_BATTLE",i.addChild(ViewManagerImpl.GetComBg()),i.addChild(e.UI_Main).name="UI_Main",i.addChild(e.UI_USER_INFO).name="UI_USER_INFO",i.addChild(e.UI_Main_2).name="UI_Main_2",i.addChild(e.UI_FullScreen_Popup).name="UI_FullScreen_Popup",i.addChild(e.UI_Popup).name="UI_Popup",i.addChild(e.UI_Message).name="UI_Message",i.addChild(e.UI_Tips).name="UI_Tips",this._SetType1(this.UI_Main),this._SetType1(this.UI_Main_2),this._SetType1(this.UI_Popup),this._SetType2(this.UI_FullScreen_Popup),this._SetType2(this.UI_GAME_MAP),this._SetType2(this.UI_BATTLE),this._SetType2(this.UI_USER_INFO),this._SetType2(this.UI_Message),this._SetType2(this.UI_Tips)}},e._SetType1=function(e){e.touchEnabled=!1,e.horizontalCenter=0,e.verticalCenter=0,e.width=StageUtils.WIDTH,e.height=StageUtils.HEIGHT,e.__TOP_LAYER__=!0},e._SetType2=function(e){e.touchEnabled=!1,e.horizontalCenter=0,e.percentWidth=100,e.percentHeight=100,e.__TOP_LAYER__=!0},e.IsShowGameMain=function(){return e.Game_Main.$stage?!0:!1},e.HasMainPanel=function(){return e.UI_Main.numChildren>0},e.Game_Main=new BaseSpriteLayer,e.UI_GAME_MAP=new BaseEuiLayer,e.UI_BATTLE=new BaseEuiLayer,e.UI_USER_INFO=new BaseEuiLayer,e.UI_Main=new BaseEuiLayer,e.UI_Main_2=new BaseEuiLayer,e.UI_Popup=new BaseEuiLayer,e.UI_FullScreen_Popup=new BaseEuiLayer,e.UI_Message=new BaseEuiLayer,e.UI_Tips=new BaseEuiLayer,e.m_Init=!1,e}();__reflect(LayerManager.prototype,"LayerManager");var BaseEuiView=function(e){function t(){var t=e.call(this)||this;return t.mIsAutoSkin=!1,t._resources=null,t._isInit=!1,t.mRefBaseView={},t._resources=null,t._isInit=!1,t.SetFullType(),t}return __extends(t,e),t.prototype.SetFullType=function(){this.percentHeight=100,this.percentWidth=100},t.prototype.isInit=function(){return this._isInit},t.prototype.isShow=function(){return ViewManager.ins().isShow(this)},t.prototype.DoClose=function(){this.mCommonWindowBg&&this.mCommonWindowBg.OnRemoved(),this.mDialog&&this.mDialog.OnRemoved(),e.prototype.DoClose.call(this)},t.prototype.DoInit=function(){this._isInit=!0,this.initUI()},t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.destoryView=function(){if(!this.mRemoveNotDestroyView&&(e.prototype.destoryView.call(this),ViewManager.ins().destroy(this.hashCode),this.mCommonWindowBg&&this.mCommonWindowBg.OnDestroy(),this.mRefBaseView)){for(var t in this.mRefBaseView){var i=this.mRefBaseView[t];i&&i.destoryView()}this.mRefBaseView=null}},t.prototype.loadResource=function(e,t){this._resources&&this._resources.length>0?ResourceUtils.ins().loadResource(this._resources,[],function(){e(),t()},null,this):(e(),t())},t.prototype.setVisible=function(e){this.visible=e},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.prototype.GetLayerLevel=function(){return null},t.prototype.SetTableIndex=function(e){var t=this.mCommonWindowBg;t&&t.SetTabIndex(e)},t.prototype.getSubViewByIndex=function(e){var t=this.mCommonWindowBg;return t?t.GetViewStackElementByIndex(e):null},t.prototype.CloseSelf=function(){ViewManager.ins().close(this)},t.prototype.RefBaseView=function(e){egret.is(e,"BaseView")&&(this.mRefBaseView||(this.mRefBaseView={}),e.mIsAutoSkin=null,this.mRefBaseView[e.hashCode]=e)},t.prototype.UnRefBaseView=function(e){egret.is(e,"BaseView")&&this.mRefBaseView&&(e.mIsAutoSkin=!0,delete this.mRefBaseView[e.hashCode],e.CheckUnrefSkin())},t.prototype.OnFullScreenResize=function(){if(this.width=GameGlobal.StageUtils.GetWidth(),this.height=GameGlobal.StageUtils.GetHeight(),this.parent){var e=StageUtils.WIDTH,t=StageUtils.HEIGHT;this.x=e-this.width>>1,this.y=t-this.height>>1}else this.x=0,this.y=0},t.LAYER_LEVEL=null,t.VIEW_LAYER_LEVEL=null,t}(BaseView);__reflect(BaseEuiView.prototype,"BaseEuiView");var BaseSystem=function(e){function t(){var t=e.call(this)||this;return t.m_Init=!1,GameGlobal.AllModule.push(t),t}return __extends(t,e),t.prototype.InitConfig=function(){this.m_Init||(this.m_Init=!0,this.Init())},t.prototype.Init=function(){},t.prototype.regNetMsg=function(e,t){Sproto.SprotoReceiver.AddHandler(e,t,this)},t.prototype.RegNetMsgs=function(e,t){Sproto.SprotoReceiver.AddHandlers(e,t,this)},t.prototype.Rpc=function(e,t,i,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),GameSocket.ins().Rpc(e,t,i,this)},t.prototype.OnDayTimer=function(){},t.prototype.OnSocketClose=function(){},t}(BaseClass);__reflect(BaseSystem.prototype,"BaseSystem");var IRedPoint=function(){function e(){this.m_Value=0,this.m_Check=0,this.m_CheckList={},RedPointMgr.Add(this),this.m_CheckList=this.GetCheckFuncList(),this.m_CheckList||console.error("not check list => ",this)}return e.prototype.GetType=function(){return egret.getQualifiedClassName(this)},e.prototype.IsRedPoint=function(){return this.m_Value>0},e.prototype.IsRedPointWithout=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this.m_Value;if(i>0){for(var o=0,n=e;o<n.length;o++){var a=n[o];i=BitUtil.Set(i,a,!1)}return i>0}return!1},e.prototype.Get=function(e){if(BitUtil.Has(this.m_Check,e))return BitUtil.Has(this.m_Value,e);var t=this.m_CheckList[e];if(!t)return!1;var i=t.call(this)?!0:!1,o=BitUtil.Has(this.m_Value,e);return this.m_Value=BitUtil.Set(this.m_Value,e,i),this.m_Check=BitUtil.Set(this.m_Check,e,!0),i!=o&&this.OnChange(e),i},e.prototype.ClearFlag=function(e){this.m_Check=BitUtil.Set(this.m_Check,e,!1)},e.prototype.Init=function(){return!0},e.prototype.CheckAll=function(){for(var e in this.m_CheckList)this.Get(Number(e))},e.prototype.OnChange=function(e){},e.prototype.OnMessage=function(e){return this.m_Check=0,!0},e}();__reflect(IRedPoint.prototype,"IRedPoint");var ItemType;!function(e){e[e.EQUIP=0]="EQUIP",e[e.MATERIAL=1]="MATERIAL",e[e.RIDE=2]="RIDE",e[e.WING=3]="WING",e[e.XIAN_FZ=4]="XIAN_FZ",e[e.XIAN_XW=5]="XIAN_XW",e[e.PET_TL=6]="PET_TL",e[e.PET_SH=7]="PET_SH",e[e.TIANXIAN=8]="TIANXIAN",e[e.SHENGB=9]="SHENGB",e[e.TIANNV=10]="TIANNV",e[e.XIANQ=11]="XIANQ",e[e.HUA=12]="HUA",e[e.LINGQI=13]="LINGQI",e[e.DESTINY=14]="DESTINY"}(ItemType||(ItemType={}));var ItemConst=function(){function e(){}return e.OPEN_EQUIPS_TIPS=(_a={},_a[ItemType.EQUIP]=!0,_a[ItemType.RIDE]=!0,_a[ItemType.WING]=!0,_a[ItemType.XIAN_FZ]=!0,_a[ItemType.XIAN_XW]=!0,_a[ItemType.PET_TL]=!0,_a[ItemType.PET_SH]=!0,_a[ItemType.TIANXIAN]=!0,_a[ItemType.SHENGB]=!0,_a[ItemType.TIANNV]=!0,_a[ItemType.XIANQ]=!0,_a[ItemType.HUA]=!0,_a[ItemType.LINGQI]=!0,_a),e.ITEM_SHOW_RANK_TYPE=(_b={},_b[ItemType.RIDE]=!0,_b[ItemType.WING]=!0,_b[ItemType.XIAN_FZ]=!0,_b[ItemType.XIAN_XW]=!0,_b[ItemType.PET_TL]=!0,_b[ItemType.PET_SH]=!0,_b[ItemType.TIANXIAN]=!0,_b[ItemType.SHENGB]=!0,_b[ItemType.HUA]=!0,_b[ItemType.LINGQI]=!0,_b),e.TYPE_NAME=(_c={},_c[ItemType.RIDE]="坐骑",_c[ItemType.WING]="翅膀",_c[ItemType.XIAN_FZ]="法阵",_c[ItemType.XIAN_XW]="仙位",_c[ItemType.PET_TL]="通灵",_c[ItemType.PET_SH]="兽魂",_c[ItemType.TIANXIAN]="守护",_c[ItemType.SHENGB]="神兵",_c[ItemType.TIANNV]="玄女",_c[ItemType.HUA]="花辇",_c[ItemType.LINGQI]="灵气",_c),e}();__reflect(ItemConst.prototype,"ItemConst");var ItemUseType;!function(e){e[e.TYPE00=0]="TYPE00",e[e.TYPE01=1]="TYPE01",e[e.TYPE02=2]="TYPE02",e[e.TYPE03=3]="TYPE03",e[e.TYPE04=4]="TYPE04"}(ItemUseType||(ItemUseType={}));var _a,_b,_c,ActivityBaseData=function(){function e(){}return e.prototype.UpdateBase=function(e){this.startTime=e.startTime,this.endTime=e.endTime,this.openState=e.openState,this.id=e.id,this.type=e.type},e.prototype.update=function(e){},e.prototype.hasReward=function(){if(!this.isOpenActivity())return!1;var e,t=this.GetConfig(),i=t.length;for(e=0;i>e;e++)if(this.canGetRecordByIndex(e+1))return!0;return!1},e.prototype.AllGotten=function(){var e=this.record;if(!e)return!1;for(var t=this.GetConfig(),i=t.length,o=0;i>o;o++)if(4!=e[o])return!1;return!0},e.prototype.GetRecordByIndex=function(e){return this.record instanceof Array?4==this.record[e-1]:(this.record&1<<e)>0},e.prototype.canGetRecordByIndex=function(e){return this.isOpenActivity()&&this.record instanceof Array?3!=this.record[e-1]?!1:!this.GetRecordByIndex(e):!1},e.prototype.isOpenActivity=function(){return this.isOpenTime()},e.prototype.init=function(){},e.prototype.getRemindTimeString=function(){var t=this,i=Math.floor(t.startTime-GameServer.serverTime),o=Math.max(Math.floor(t.endTime-GameServer.serverTime),0);return i>=0?"活动未开启":0>=o?"活动已结束":1e3*o<DateUtils.MS_PER_DAY?"倒计时：|C:"+Color.GetStr(Color.l_green_1)+"&T:"+DateUtils.format_1(1e3*o)+"|":"倒计时：|C:"+Color.GetStr(Color.l_green_1)+"&T:"+e.GetTimeStr(o)+"|"},e.GetTimeStr=function(e){var t=Math.floor(e/86400),i=Math.floor(e%86400/3600),o=Math.floor(e%3600/60);return t+"天"+i+"小时"+o+"分"},e.prototype.isOpenTime=function(){return 0==this.endTime?!0:this.startTime<GameServer.serverTime&&this.endTime+this.delayCloseActivityTime()>GameServer.serverTime},e.prototype.GetSurplusTimeStr=function(){return"剩余时间："+this.getRemindTimeString()},e.prototype.GetConfig=function(){return GameGlobal.Config["ActivityType"+this.type+"Config"][this.id]},e.prototype.delayCloseActivityTime=function(){var e=GameGlobal.Config.ActivityConfig[this.id];return e&&e.closetime?3600*e.closetime:0},e}();__reflect(ActivityBaseData.prototype,"ActivityBaseData",["IActivityBaseData"]);var MovieBaseObject=function(e){function t(){var t=e.call(this)||this;return t._mcFactory=new egret.MovieClipDataFactory,t.m_State=!1,t.touchEnabled=!1,t.addEventListener(egret.Event.COMPLETE,t._PlayComp,t),t}return __extends(t,e),t.prototype.SetFrameRate=function(e){this.m_FrameRateMul=e},t.prototype.$hitTest=function(t,i){return this.touchEnabled?e.prototype.$hitTest.call(this,t,i):null},t.prototype.GetLoadUrl=function(){return this.m_Url},t.prototype.GetImgUrl=function(){return(this.m_Url||"")+".png"},t.prototype.GetJsonUrl=function(){return(this.m_Url||"")+".json"},t.prototype._SetUrl=function(e){this.m_Url=e},t.prototype.PlayFrame=function(e){this._frameName!=e&&(this._frameName=e,this.m_State&&this._Play(1))},t.prototype.Play=function(e,t,i,o,n,a,r){if(void 0===o&&(o=!0),void 0===r&&(r=null),t)this._frameName=t;else{var s=-1;e&&(s=e.lastIndexOf("/")),-1!=s?this._frameName=e.substring(s+1):this._frameName=e}if(this._playCount=i||-1,this._autoPlay=o,e==this.m_Url)return void(this.m_State&&(r?this._Play(r):this.dispatchEventWith(egret.Event.CHANGE)));if(this.ClearCache(),this.m_Url=e,!StringUtils.IsNullOrEmpty(e)){this.Ref(),this.m_CompFunc=n,this._compFuncTagret=a;var l=this._Load(this.GetImgUrl(),RES.ResourceItem.TYPE_IMAGE),c=this._Load(this.GetJsonUrl(),RES.ResourceItem.TYPE_JSON);l&&c&&this._OnCreateBody(c,l)}},t.prototype.LoadByUrl=function(e,t,i,o,n){void 0===i&&(i=!0),this.Play(e,null,t,i,o,n)},t.prototype._Load=function(e,t){var i=this._GetRes(e,t);return i?i:(RES.getResByUrl(e,this._CreateBodyByUrl,this,t),null)},t.prototype._GetRes=function(e,t){var i=RES.getAnalyzer(t);return i.getRes(e)},t.prototype.ClearCache=function(){this.Unref(),this.visible=!1,this.stop(),this.m_State=!1,this.m_CompFunc=null,this._compFuncTagret=null,this._mcFactory.mcDataSet=null,this._mcFactory.texture=null,this._mcFactory.clearCache()},t.prototype.Unref=function(){this.m_Url=null},t.prototype.Ref=function(){},t.prototype._CreateBodyByUrl=function(e,t){t&&this.GetJsonUrl()!=t&&this.GetImgUrl()!=t||this._OnCreateBody(this._GetRes(this.GetJsonUrl(),RES.ResourceItem.TYPE_JSON),this._GetRes(this.GetImgUrl(),RES.ResourceItem.TYPE_IMAGE))},t.prototype._OnCreateBody=function(e,t){if(e&&t){if(this.visible=!0,e&&e.scale){var i=100/e.scale;this.scaleY=i,this.scaleX<0?this.scaleX=-i:this.scaleX=i}this._mcFactory.mcDataSet=e,this._mcFactory.texture=t,this.m_State=!0,this._Play(1)}},t.prototype._Play=function(e){this.movieClipData=this._mcFactory.generateMovieClipData(this._frameName),this.movieClipData&&(this.m_FrameRateMul&&this.m_FrameRateMul>1&&(this.frameRate=this.movieClipData.frameRate*this.m_FrameRateMul),this._autoPlay&&(2==e?this.play(this._playCount):this.gotoAndPlay(1,this._playCount)),this.dispatchEventWith(egret.Event.CHANGE))},t.prototype._PlayComp=function(){var e=this.m_CompFunc,t=this._compFuncTagret;!this.mNotRemove&&this.parent&&this.parent.removeChild(this),e&&(t?e.call(t,this):e(),t=null)},t.prototype.DoDispose=function(){this.ClearCache()},t}(egret.MovieClip);__reflect(MovieBaseObject.prototype,"MovieBaseObject");var MapRaid=function(e){function t(){var t=e.call(this)||this;return t.mMapId=0,t.mObjects={},t.cTeam={},t}return __extends(t,e),t.prototype.GetSceneId=function(){return 0},t.prototype.IsBackground=function(){return GameGlobal.RaidMgr.mShowType!=RaidMgr.TYPE_NORMAL},t.prototype.OnMapClick=function(e,t){return this.MoveOrder(MoveTeam.NONE_ORDER,e,t)},t.prototype.GetMyTeam=function(){return this.cTeam[GameGlobal.actorModel.actorID]},t.prototype.MoveOrder=function(e,t,i,o){void 0===o&&(o=0);var n=this.GetMyTeam();return n?(n.MoveTo(e,t,i,o,this.IsBackground()),!0):(console.log("队长才能移动"),!1)},t.prototype.Create=function(e){if(this.mEntityList[e.handle])return console.warn("重复添加对象 handle => "+e.handle),null;switch(e.team=this.CalcEntityTeam(e),e.type){case EntityType.Role:var t=e;if(e.team==Team.My){var i=GameGlobal.SubRoles.GetRoleData();i?e=i.MergeData(t):console.error("my team not my role => ")}break;case EntityType.Monster:break;case EntityType.Pet:}var o=this.AddEntity(e),n=e.team==Team.WillEntity&&FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER);return n||this.AddToMap(o),o.SetPos(e.x||0,e.y||0),o},t.prototype.AddToMap=function(e){if(e.GetTeam()==Team.WillEntity){var i=0;for(var o in this.mEntityList){var n=this.mEntityList[o];n.GetTeam()==Team.WillEntity&&++i}if(i>t.MAX_ENTITY_COUNT)return;i>t.MAX_SHOW_COUNT&&e.m_Model&&e.m_Model.SetMaxCountState(!0)}this.GetMapEntityView().AddEntity(e)},t.prototype.AddTeam=function(e,t){for(var i=1;i<t.length;i++)t[i].x=t[i-1].x-50,t[i].y=t[i-1].y;for(var o=[],n=0,a=t;n<a.length;n++){var r=a[n],s=this.Create(r);s&&o.push(s)}o.length&&this.CreateTeamData(e,o)},t.prototype.AddEntityToTeamByHandle=function(e,t){var i=this.cTeam[e];i&&this.AddEntityToTeam(i,t)},t.prototype.AddEntityToTeam=function(e,t){var i=this.Create(t);i&&e.AddEntity(i)},t.prototype.CreateTeam=function(){return new MoveTeam},t.prototype.CreateEntity=function(e){return this.Create(e)},t.prototype.Update=function(e){for(var t in this.cTeam)this.cTeam[t].Update(e);this.IsBackground()||GameMap.GetMap().LookAt(this.GetLookAtRole())},t.prototype.Init=function(){GameMap.UpdateScene()},t.prototype.OnForeground=function(){GameMap.UpdateScene(),GameMap.GetMap().LookAt(this.GetLookAtRole())},t.prototype.OnEnter=function(){GameGlobal.RaidMgr.UpdateBGM(),this.GetMapEntityView().AddEntityLayer(),GameMap.GetMap().LookAt(this.GetLookAtRole())},t.prototype.OnExit=function(){this.GetMapEntityView().RemoveEntityLayer()},t.prototype.GetMapEntityView=function(){return GameMap.GetMap().mMapEntityView},t.prototype.Clear=function(){this.GetMapEntityView().RemoveDropLayer(),this.RemoveAllEntity(),this.cTeam={},this.mObjects={},GameGlobal.MessageCenter.removeAll(this),TimerManager.ins().removeAll(this)},t.prototype.DismissTeam=function(e){var t=this.cTeam[e];t?(t.Clear(),delete this.cTeam[e]):console.warn("解散不存在的队伍 => "+e)},t.prototype.CreateTeamData=function(e,t){var i=this.CreateTeam();i.mMasterHandle=e,i.Init(t),this.cTeam[e]=i},t.prototype.CreateMonster=function(e,t,i){var o=GameGlobal.Config.MonstersConfig[e];if(!o)return void console.warn("not monster id => "+e);var n=MonstersConfig.CreateModel(o);n.x=t,n.y=i;var a=this.Create(n);return a?(a.UpdateAction(EntityClipType.STAND,!1),a):(console.warn("create monster failure => "+e),null)},t.prototype.CreateImage=function(e,t,i,o){void 0===o&&(o=!0);var n=new eui.Image;return n.source=e,n.touchEnabled=o,this.CreateObject(n,t,i)},t.prototype.CreateObject=function(e,t,i){var o=e,n=MonstersConfig.GetHandle();return o.name=n+"",o.x=t,o.y=i,o.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=GameGlobal.RaidMgr.GetCurMapRaid();e.OnEntityClick(Number(this.name))},o),this.mObjects[n]=o,this.GetMapEntityView().AddDrop(o),n},t.prototype.RemoveEntity=function(t){var i=e.prototype.RemoveEntity.call(this,t);if(!i){var o=this.mObjects[t];o&&(o.Dispose&&o.Dispose(),DisplayUtils.removeFromParent(o),delete this.mObjects[t])}return i},t.prototype.UpdatePlayerStatus=function(e,t){var i=this.mEntityList[e];i&&i.ChageStatus(t)},t.prototype.SetSelectEntity=function(e){},t.prototype.ClearSelectEntity=function(e){},t.prototype.OnMoveLeval=function(e,t,i,o){},t.prototype.OnPreEntityClick=function(e){return!0},t.prototype.OnEntityClick=function(e){},t.prototype.OnLeave=function(){},t.prototype.IsShowOther=function(e){for(var t in this.mEntityList){var i=this.mEntityList[t];i&&i.GetInfo().team==Team.WillEntity&&(i.parent?DisplayUtils.removeFromParent(i):this.AddToMap(i))}},t.prototype.ShapeShift=function(e,t){if(this.mEntityList[e]){var i=this.mEntityList[e].m_Model;i&&i.SetReplaceBody(t)}},t.prototype.replyShapeShift=function(e){if(this.mEntityList[e]){var t=this.mEntityList[e].m_Model;if(t){this.mEntityList[e].m_Info.GetBodyId();t.SetReplaceBody(null)}}},t.prototype.UpdateRole=function(){var e=SubRoles.ins().GetRoleData().handle,t=this.mEntityList[e];t&&t.UpdateInfo()},t.prototype.UpdateOtherRole=function(e){var t=this.mEntityList[e.id];if(t&&e.player){var i=t.GetInfo();if(i&&i.type==EntityType.Role)if(i.handle!=GameGlobal.actorModel.actorID){var o=e.player.shows||[];i.mBodyId=o[RoleShowDataType.ROLE_SKIN]||0,i.mRideId=o[RoleShowDataType.ROLE_RIDE]||0,i.mWingId=o[RoleShowDataType.ROLE_WING]||0,i.mTianxianId=o[RoleShowDataType.ROLE_TIANXIAN]||0,i.mSwordId=o[RoleShowDataType.ROLE_SWORD]||0,i.mTitle=o[RoleShowDataType.ROLE_TITLE]||0,t.UpdateInfo()}else if(this.mFbType==UserFb.FB_TYPE_CLOUD_NINE){var n=e.player.shows||[];i.mTitle=n[RoleShowDataType.ROLE_TITLE]||0,t.UpdateInfo()}}},t.MAX_SHOW_COUNT=12,t.MAX_ENTITY_COUNT=25,t}(Raid);__reflect(MapRaid.prototype,"MapRaid");var RuleIconBase=function(){function e(e){this.effX=34,this.effY=31,this.layerCount=0,this.tar=e,this.m_Parent=this.tar.parent,e.__c_index__=this.layerCount=this.m_Parent.getChildIndex(this.tar),this.time_txt=e.getChildByName("time_txt"),this.iconDisplay=this.tar.iconDisplay}return e.prototype.setTime=function(e){this._endTime=e,this._endTime-GameServer.serverTimeMilli>0?(TimerManager.ins().isExists(this.updateTime,this)||TimerManager.ins().doTimer(1e3,0,this.updateTime,this),this.updateTime(),this.time_txt&&(this.time_txt.visible=!0)):(TimerManager.ins().remove(this.updateTime,this),this.time_txt&&(this.time_txt.visible=!1))},e.prototype.updateTime=function(){if(this._endTime-GameServer.serverTimeMilli<=0)return TimerManager.ins().remove(this.updateTime,this),void(this.time_txt&&(this.time_txt.visible=!1));var e=this._endTime-GameServer.serverTimeMilli,t=DateUtils.format_16(e);this.time_txt&&(this.time_txt.text=t)},e.prototype.DoShow=function(){if(!this.tar.parent&&this.m_Parent){for(var e=null,t=0;t<this.m_Parent.numChildren;++t){var i=this.m_Parent.getChildAt(t).__c_index__||0;if(this.layerCount<i){e=t;break}}null!=e?this.m_Parent.addChildAt(this.tar,e):this.m_Parent.addChild(this.tar),this.tar.visible=!0,this.tar.includeInLayout=!0}},e.prototype.DoHide=function(){DisplayUtils.removeFromParent(this.tar),this.tar.visible=!1,this.tar.includeInLayout=!1},e.prototype.checkShowIcon=function(){return!0},e.prototype.checkShowRedPoint=function(){return null},e.prototype.getEffName=function(e){return null},e.prototype.tapExecute=function(e){},e.prototype.update=function(){var e,t,i,o=this.tar,n=this.checkShowIcon();n?(this.DoShow(),o.redPoint&&(i=this.checkShowRedPoint(),UIHelper.ShowRedPoint(o,i)),e=this.getEffName(i),e?(this.ruleEff||(t=new MovieClip,t.loadUrl(ResDataPath.GetUIEffePath2(e),!0,-1),this.ruleEff=t),this.ruleEff.parent?this.ruleEff.play(-1):(this.ruleEff.x=this.effX,this.ruleEff.y=this.effY,o.addChild(this.ruleEff))):this.ruleEff&&DisplayUtils.removeFromParent(this.ruleEff)):this.DoHide()},e.prototype.addEvent=function(){if(this.updateMessage)for(var e=0,t=this.updateMessage;e<t.length;e++){var i=t[e];GameGlobal.MessageCenter.addListener(i,this.update,this)}},e.prototype.removeEvent=function(){GameGlobal.MessageCenter.removeAll(this)},e.prototype.DefEffe=function(e){return this.firstTap||e?"ui_yhy002":void 0},e.POS1_X=44,e.POS1_Y=44,e}();__reflect(RuleIconBase.prototype,"RuleIconBase");var ResultBasePanel=function(e){function t(){var t=e.call(this)||this;return t.m_BtnStr="",t.m_EndTime=5,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.AddClick(this.closeBtn,this.OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_EndTime=5,this.updateCloseBtnLabel(),TimerManager.ins().doTimer(1e3,6,this.updateCloseBtnLabel,this)},t.prototype.SetCloseFunc=function(e){this.closeFunc=e},t.prototype.SetBtnLabel=function(e){this.m_BtnStr=e},t.prototype.SetTitleLabel=function(e){this.titleLabel&&(this.titleLabel.text=e)},t.prototype.OnClose=function(){TimerManager.ins().remove(this.updateCloseBtnLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},t.prototype.updateCloseBtnLabel=function(){this.m_EndTime--,this.m_EndTime<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.m_BtnStr+"("+this.m_EndTime+"s)"},t.prototype.OnClick=function(e){switch(e.target){case this.closeBtn:this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ResultBasePanel.prototype,"ResultBasePanel");var TeamBaseModel=function(e){function t(t){var i=e.call(this)||this;return i.m_Team={},i.mTeamList={},i.mRaidType=t,i.mTeamInfo=new MyTeamInfo,TeamBaseModelMsg.Add(i),i}return __extends(t,e),t.prototype._NotifyTeamListData=function(){this.m_Team=null,GameGlobal.MessageCenter.dispatch(MessageDef.TEAM_UPDATE_MAP_LIST)},t.prototype._ChageTeam=function(e){var t=this.mTeamList[e.level];t||(t=this.mTeamList[e.level]=[]);var i=e.members||[];i.sort(function(t,i){return t.dbid==e.leaderid?-1:i.dbid==e.leaderid?1:-1});for(var o=!1,n=0,a=t;n<a.length;n++){var r=a[n];if(r.leaderid==e.leaderid){r.count=i.length,r.members=i,r.needpower=e.needpower,o=!0;break}}if(!o&&i.length){var s=new Sproto.team_data;s.leaderid=e.leaderid,s.members=i,s.needpower=e.needpower,s.count=i.length,t.push(s)}for(var l=0,c=i;l<c.length;l++){var u=c[l];if(u.dbid==GameGlobal.actorModel.actorID){GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_MYINFO);break}}GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_LIST),this._NotifyTeamListData()},t.prototype._RemoveSelfFromTeam=function(e,t){var i=GameGlobal.actorModel.actorID;if(this.mTeamList[e])for(var o=0,n=this.mTeamList[e];o<n.length;o++){var a=n[o];if(t==a.leaderid){for(var r=0,s=0,l=a.members;s<l.length;s++){var c=l[s];if(c.dbid==i){a.members.splice(r,1);break}++r}break}}},t.prototype._DoTeamInfo=function(e){var t=this.mTeamInfo;e?t.parser(e):(this._RemoveSelfFromTeam(t.level,t.leaderid),t.Clear()),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_MYINFO),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_LIST),this._NotifyTeamListData()},t.prototype._DoTeamList=function(e){var t=e.teamlist;if(t){for(var i=function(e){var t=e.members||[];t.sort(function(t,i){return t.dbid==e.leaderid?-1:i.dbid==e.leaderid?1:-1})},o=0,n=t;o<n.length;o++){var a=n[o];i(a)}this.mTeamList[e.level]=e.teamlist,GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_LIST),this._NotifyTeamListData()}},t.prototype.SendGetMyTeamInfos=function(){var e=new Sproto.cs_team_info_request;this.Rpc(C2sProtocol.cs_team_info,e)},t.prototype.SendGetTeamCondition=function(e,t){var i=new Sproto.cs_team_condition_request;i.level=e,i.needpower=t,i.raidtype=this.mRaidType,this.Rpc(C2sProtocol.cs_team_condition,i)},t.prototype.SendGetTeamList=function(e){var t=new Sproto.cs_team_list_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_list,t)},t.prototype.SendCreateTeam=function(e){if(this.InnerCheckEnter(e)){var t=new Sproto.cs_team_create_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_create,t,this._DoCreate,this)}},t.prototype._DoCreate=function(e){},t.prototype.SendQuickJoin=function(e){if(this.InnerCheckEnter(e)){var t=new Sproto.cs_team_quick_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_quick,t,this._DoQuickJoin,this)}},t.prototype._DoQuickJoin=function(e){},t.prototype.SendJoin=function(e,t){if(UserFb.CheckFighting()&&this.InnerCheckEnter(e)){var i=new Sproto.cs_team_join_request;
i.raidtype=this.mRaidType,i.level=e,i.leaderid=t,this.Rpc(C2sProtocol.cs_team_join,i,this._DoJoin,this)}},t.prototype._DoJoin=function(e){!e.ret},t.prototype.SendLeave=function(e){var t=new Sproto.cs_team_leave_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_leave,t,this._DoLeave,this)},t.prototype._DoLeave=function(e){var t=this.mTeamInfo;this._RemoveSelfFromTeam(t.level,t.leaderid),this.mTeamInfo.Clear(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_MYINFO),GameGlobal.MessageCenter.dispatch(MessageDef.TEAM_UPDATE_LEAVE),this._NotifyTeamListData()},t.prototype.SendKick=function(e,t){var i=new Sproto.cs_team_kick_request;i.raidtype=this.mRaidType,i.level=e,i.memberid=t,this.Rpc(C2sProtocol.cs_team_kick,i,this._DoKick,this)},t.prototype._DoKick=function(){},t.prototype.SendFight=function(e){this.mSelectKey=e;var t=new Sproto.cs_team_fight_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_fight,t,this._DoFight,this)},t.prototype._DoFight=function(){},t.prototype.SendCallRobot=function(e){var t=new Sproto.cs_team_call_robot_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_call_robot,t,this._DoFight,this)},t.prototype.InnerCheckEnter=function(e){return UserWarn.CheckBagCapacity()?this.CheckEnter(e):!1},t.prototype.GetConfigData=function(e){return e?(this.mConfigData.Init(e),this.mConfigData):null},t.prototype.CheckEnter=function(e){return!1},t.prototype.GetConfig=function(){return[]},t.prototype.GetCount=function(){return 0},t.prototype.GetAllTeam=function(){if(!this.m_Team){this.m_Team={};for(var e in this.mTeamList)for(var t=this.mTeamList[Number(e)],i=0;i<t.length;i++){for(var o=t[i].members,n=[],a=0,r=o;a<r.length;a++){var s=r[a];n.push(s.dbid)}this.m_Team[t[i].leaderid]=n}}return this.m_Team},t}(BaseSystem);__reflect(TeamBaseModel.prototype,"TeamBaseModel");var TeamBaseModelMsg=function(){function e(){this.mShowTeamType=(e={},e[UserFb.FB_TYPE_CROSSTEAMFB]=!0,e[UserFb.FB_TYPE_GUILDFB]=!0,e[UserFb.FB_TYPE_LIFE_DEATH_PLUNDER]=!0,e),this.mTeamList={},Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_team_info,this._DoTeamInfo,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_team_list,this._DoTeamList,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_team_one,this._ChageTeam,this);var e}return e.Add=function(t){this.mIns||(this.mIns=new e),this.mIns.mTeamList[t.mRaidType]=t},e.HasTeam=function(){var t=e.mIns;for(var i in t.mShowTeamType)if(t.mTeamList[i]&&t.mTeamList[i].mTeamInfo.HasTeam())return Number(i);return 0},e.GoHasTeamPanel=function(){var e=this.HasTeam();e&&(e==UserFb.FB_TYPE_CROSSTEAMFB?ViewManager.ins().open(CrossMainPanel):e==UserFb.FB_TYPE_GUILDFB?ViewManager.ins().open(GangMainWin,1):e==UserFb.FB_TYPE_LIFE_DEATH_PLUNDER?ViewManager.ins().open(TsumKoBasePanel):console.error("not fbId = > "+e))},e.Exit=function(){if(this.mIns){var e=this.mIns.mTeamList;for(var t in e){var i=e[t];i.mTeamInfo.HasTeam()&&i.SendLeave(i.mTeamInfo.level)}}},e.prototype._ChageTeam=function(e){var t=this.mTeamList[e.raidtype];t&&t._ChageTeam(e)},e.prototype._DoTeamInfo=function(e){if(e.raidtype){var t=this.mTeamList[e.raidtype];t&&t._DoTeamInfo(e)}else{for(var i in this.mTeamList)this.mTeamList[i]._DoTeamInfo(null);GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_MAIN_INFO)}this.mShowTeamType[e.raidtype]&&GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_TEAM_MAIN_INFO)},e.prototype._DoTeamList=function(e){var t=this.mTeamList[e.raidtype];t&&t._DoTeamList(e)},e}();__reflect(TeamBaseModelMsg.prototype,"TeamBaseModelMsg");var IAIUnitArgs=function(){function e(){}return e.prototype.SetAnimName=function(e){},e.prototype.SetMovePos=function(e,t){},e.prototype.SetTurnData=function(e){},e.prototype.Protect=function(e,t){},e.prototype.Clear=function(){},e}();__reflect(IAIUnitArgs.prototype,"IAIUnitArgs");var AIUnitArgs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.SetAnimName=function(e){this.mAnim=e},t.prototype.SetMovePos=function(e,t){this.mEndX=e,this.mEndY=t},t.prototype.SetTurnData=function(e){this.mTurnData=e},t.prototype.Protect=function(e,t){this.mBlockSrc=e,this.mBeBlockSrc=t},t.prototype.Clear=function(){this.mAnim=null,this.mEndX=null,this.mEndY=null},t}(IAIUnitArgs);__reflect(AIUnitArgs.prototype,"AIUnitArgs");var BUnitAction=function(){function e(){this.actions=null}return e.prototype.HasDead=function(){if(this.actions)for(var e=0,t=this.actions;e<t.length;e++){var i=t[e];if(i.mType==BattleTurnDataParse.TYPE_DEAD)return!0}return!1},e.prototype.Init=function(e){this.mContext=e},e.prototype.OnUpdate=function(e){return AIUnitReturn.NEXT},e.prototype.OnEnter=function(){},e.prototype.OnExit=function(){},e.prototype.Execute=function(e){this.mContext=e,this.DoExecute()},e.prototype.DoExecute=function(){},e}();__reflect(BUnitAction.prototype,"BUnitAction");var EntityData=function(){function e(){this.skillsData=[],this.attributeData=[],this.sex=0,this.job=1,this.masterHandle=0,this.posIndex=0,this.side=0,this.x=0,this.y=0,this.scale=1,this.flyLevel=0}return e.prototype.IsSide=function(){return 2==this.side},e.prototype.parserBase=function(e){if(this.serverId=0,this.scale=AppearanceConfig.GetScale(e.monid),this.type=e.type,this.handle=e.handler,this.configID=e.monid,this.attributeData=e.attrs||[],this.masterHandle=e.ownerid,this.skillsData=e.skills||[],e.shows){var t=e.shows;this.entityName=t.name,this.serverId=t.serverid||0,this.guildName=t.guildname||"",this.guildID=t.guildid||0,this.entityPingJi=t.pingji||0}else this.entityName=""},e.prototype.parserAtt=function(e){this.attributeData=e},e.prototype.getAtt=function(e){return this.attributeData[e]||0},e.prototype.GetAttr=function(e){return this.attributeData[e]||0},e.prototype.GetFeisAttrs=function(){var e=GameGlobal.Config.roleFlyupFlyupproConfig[this.flyLevel];if(e){var t=[];return AttributeData.AttrAddition(t,e.attrpower)}},e.prototype.setAtt=function(e,t){e==AttributeType.atHp&&0>t&&(t=0),this.attributeData[e]=t},e.prototype.GetName=function(){var e=GlobalConfig.ins().MonstersConfig[this.configID];return e&&e[GameGlobal.Config.MonstersConfig_keys.warname]?e[GameGlobal.Config.MonstersConfig_keys.name]:""},e.prototype.setPos=function(e,t){this.x=e,this.y=t},e.prototype.GetHeadImgName=function(){return""},e.prototype.GetHeadImgName2=function(){return""},e.prototype.GetSkillIDs=function(){return this.skillsData&&this.skillsData.length?this.skillsData:e.default_skill_ids},e.prototype.GetTitle=function(){return null},e.prototype.GetWeaponId=function(){return null},e.prototype.GetWingId=function(){return null},e.prototype.GetRideId=function(){return null},e.prototype.GetBodyId=function(){var e=GlobalConfig.ins().MonstersConfig[this.configID];if(e)return e[GameGlobal.Config.MonstersConfig_keys.avatar]||0;var t=UserFb.MonDict[this.configID];if(t)return Number(t.avatar);var i=GameGlobal.RaidModel.mChapterData;if(i&&i.mondata){var o=i.mondata[this.configID];if(o)return o.avatar||0}return 0},e.prototype.GetBodyResPath=function(){return AppearanceConfig.GetAppe(this.GetBodyId())},e.prototype.HasPlot=function(){var e=GlobalConfig.ins().MonstersConfig[this.configID];if(e)return e[GameGlobal.Config.MonstersConfig_keys.talk];var t=UserFb.MonDict[this.configID];return t?t.talk:null},e.default_skill_ids=[14001],e}();__reflect(EntityData.prototype,"EntityData",["IBattleModel"]);var BattleEntity=function(e){function t(){var i=e.call(this)||this;return i.mPosY=t.POS,i.mIsMaxCountState=!1,i.mBody=new BattleMvData(i),i.m_Scale=1,i.m_Dir=3,i.touchEnabled=!1,i.touchChildren=!1,i.m_Container=new egret.DisplayObjectContainer,i.addChildAt(i.m_Container,CharMcOrder.CONTAINER_TYPE),i.mBody.SetParent(i.m_Container,0),i.mBody.Create(),i.m_Container.addChild(i.mBody.mv),i.mBody.mv.addEventListener(egret.Event.CHANGE,i._BodyLoaded,i),i}return __extends(t,e),t.prototype.SetMaxCountState=function(e){this.mIsMaxCountState!=e&&(this.mIsMaxCountState=e,e?this.m_Container.parent&&DisplayUtils.removeFromParent(this.m_Container):this.m_Container.parent||this.addChildAt(this.m_Container,CharMcOrder.CONTAINER_TYPE),this.DoMaxCountState())},t.prototype.DoMaxCountState=function(){},t.prototype.UpdateSetting=function(e){},t.prototype.GetClipType=function(){return this.m_AnimState},t.prototype.SetMvState=function(e,t){e&&e.SetShowState(t)},t.prototype.SetModelShow=function(e){this.SetMvState(this.mBody,e)},t.prototype.GetDir=function(){return this.m_Dir},t.prototype.IsReplaceShow=function(e){},t.prototype.Init=function(e){this.alpha=1,this.mPosY=t.POS,this.touchEnabled=!1,this.touchChildren=!1,this.mIsMaxCountState=!1,this.m_Scale=e.scale||1,this.m_Container.scaleX=this.m_Container.scaleY=this.m_Scale,this.addChildAt(this.m_Container,CharMcOrder.CONTAINER_TYPE),this.m_Dir=e.dir||3,this.m_AnimState=null,this.mBody.Init(),this.UpdateInfo(e)},t.prototype.Dispose=function(){this.m_Call&&(TimerManager.ins().remove(this._PlayClip2,this),this.m_Call=!1),this.mBody.ClearCache(),this._title&&(this._title.source="",DisplayUtils.removeFromParent(this._title)),this.mBodyImage&&(this.mBodyImage.source="",DisplayUtils.removeFromParent(this.mBodyImage))},t.prototype.SetDir=function(e){this.m_Dir!=e&&(this.m_Dir=e,this.PlayClip())},t.prototype.SetReplaceBody=function(e){this.mBody.replaceName!=e&&(this.mBody.replaceName=e,this.IsReplaceShow(null!=e),this.PlayClip())},t.prototype.UpdateAction=function(e,t){this.m_AnimState!=e&&(this.m_PlayOnce=t,this.m_AnimState=e,this.PlayClip())},t.prototype.ReplayAction=function(e,t){this.m_PlayOnce=t,this.m_AnimState=e,this.PlayClip()},t.prototype.UpdateInfo=function(e){this.mBody.name=e.GetBodyResPath(),this.UpdateTitle(e),this.PlayClip()},t.prototype.PlayClip=function(){!this.m_Call&&this.$stage&&(this.m_Call=!0,TimerManager.ins().doNext(this._PlayClip2,this))},t.prototype._PlayClip2=function(){this.m_Call=!1,null!=this.m_AnimState&&(this.mIsMaxCountState?(null==this.mBodyImage&&(this.mBodyImage=new eui.Image,this.mBodyImage.x=-25,this.mBodyImage.y=-100),this.mBodyImage.parent||(this.mBodyImage.source="shadow",this.addChildAt(this.mBodyImage,CharMcOrder.CONTAINER_TYPE))):this.LoadMcAnim(this.mBody.mv,this.mBody.GetName(),this.GetDir(),this.mBody.GetClipName(),this.GetPlayCount(),!0))},t.prototype.GetPlayCount=function(){return this.m_PlayOnce?1:-1},t.prototype._BodyLoaded=function(){},t.prototype.LoadMc=function(e,t,i,o){void 0===i&&(i=1),void 0===o&&(o=!1),this.LoadMcAnim(e,t,this.m_Dir,this.m_AnimState,i,o)},t.prototype.LoadMcAnim=function(e,t,i,o,n,a){if(void 0===n&&(n=1),void 0===a&&(a=!1),e&&(null!=i&&(i>4?(this.m_Container.scaleX=-1*this.m_Scale,i=8-i):this.m_Container.scaleX=this.m_Scale),e.parent&&this.$stage)){var r=null,s="",l=null;if(null!=i){if(null==o)return;i=2>=i?1:3,r=EntityClipTypeToName[o],s=i+r[0],l=r[1]}var c=1;if(egret.is(this.parent,"MapEntity")){var u=this.parent;c=u.mRaid?u.mRaid.GetSpeed():1}e.SetFrameRate(c),e.LoadByUrl(ResDataPath.ROOT_MOVIE+t,s,l,this.GetPlayCount(),a)}},t.prototype.UpdateTitle=function(e){if(e&&!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_CH)){var t=e.GetTitle();if(this._title&&(this._title.source=""),t>0){var i=GlobalConfig.ins().TitleConf[t],o=i?i.icon:"";null==this._title&&(this._title=new eui.Image,this._title.addEventListener(egret.Event.COMPLETE,this._CompleteTitle,this)),this.addChildAt(this._title,CharMcOrder.TITLE_TYPE),this._title.source=o}}},t.prototype._CompleteTitle=function(){if(this._title.parent){var e=this._title.texture;e&&e.textureWidth&&e.textureHeight&&(this._title.x=-(e.textureWidth>>1),this._title.y=-e.textureHeight+this.GetTopPos())}},t.prototype.GetTopPos=function(){return this.mPosY},t.prototype.ClearTitle=function(){this._title&&(this._title.source="")},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.PlayClip()},t.POS=-125,t}(egret.DisplayObjectContainer);__reflect(BattleEntity.prototype,"BattleEntity");var CharMcOrder=function(){function e(){}return e.SHOWDOW=0,e.HORSE=1,e.BODY=2,e.WEAPON=3,e.WING=4,e.FOUR=5,e.HORSE_HEAD=6,e.RING=7,e.FIR=8,e.FORMATION=9,e.OTHER_TYPE=0,e.CONTAINER_TYPE=1,e.TITLE_TYPE=2,e}();__reflect(CharMcOrder.prototype,"CharMcOrder");var RoleTemplatePanel=function(e){function t(){var t=e.call(this)||this;return t.mHasDress=!1,t.mShowLevel=0,t.m_SkillIconList=[],t.mEquipItems=[],t.mSkillItems=[],t.mPlayEff={},t.skinName="RoleTemplateSkin",t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnAuto.label="停止":t.btnAuto.label="自动进阶"},200),t.mRoleSendCheckData=new RoleSendCheckData(function(e){t.mModel&&t.mModel.SendBoost(e)},function(){var e=t.mModel,i=t.mModel.LvproConfig[e.mLevel];if(!i)return[null];var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t.title1Label.text=t.name+"技能",t.title2Label.text=t.name+"装备",t.lbFull.text=t.name+"已满阶",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnPrev,this._OnClick),this._AddClick(this.btnNext,this._OnClick),this._AddClick(this.btnHuanHua,this._OnClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.btnAuto,this._OnClick),this._AddClick(this.btnAttrDrug,this._OnClick),this._AddClick(this.btnUpLevel,this._OnClick),this._AddClick(this.powerLabel,this._OnClick),this._AddClick(this.btnSkin,this._OnClick),this._AddClick(this.onekeyEquip,this._OnClick),this._AddClick(this.btn_juexing,this._OnClick);for(var e=0;4>e;e++){var t=this["skill"+e];t&&(t.touchEnabled=!0,t.touchChildren=!1,this.mSkillItems[e]=t,t.name=e+"",this._AddClick(t,this._OnSkillClick))}for(var e=0;4>e;e++){var t=this["equip"+e];t&&(t.touchEnabled=!0,t.touchChildren=!1,this.mEquipItems[e]=t,t.name=e+"",this._AddClick(t,this._OnEquipClick))}this.btnSkin.visible=this.mHasDress,this.SetEquipIconList(this.mModel.mEquipIcon),this.btnUpLevel.visible=this.mModel.IsShowShootUpDrugID();for(var i=this.mModel.BaseConfig.skilllist,o=this.mModel.SkillConfig,n=[],a=0,r=i;a<r.length;a++){var s=r[a];n.push(o[s][0].skillitem)}this.SetSkillIconList(n)},t.prototype.SetSkillIconList=function(e){this.m_SkillIconList=e;for(var t=0;t<e.length;t++){var i=this.mSkillItems[t];if(i){i.item.setItemImg(e[t]);var o=this.mModel.IsOpen(t);i.item.setItemImgGray(o?!1:!0);var n=this.mModel.mSkills[t];i.item.setCount(n>0?n.toString():"")}}},t.prototype.SetEquipIconList=function(e){for(var t=0;t<e.length;t++){var i=this.mEquipItems[t];if(i){i.item.setItemImg(ResDataPath.GetItemFullPath(e[t])),i.item.setCount("");var o=this.mModel.mEquip[t].configID,n=GameGlobal.Config.ItemConfig[o],a=n?n.quality:0;i.item.setItemBg(ResDataPath.GetItemQualityName(a))}}},t.prototype.OnOpen=function(){this.mShowLevel=this.mModel.mLevel,this.UpdateModel(Math.max(this.mShowLevel,1)),this.UpdateContent(),this.UpdateRedPoint(),this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.observe(this.mModel.mMsgDefUpdateExp,this.UpdateExp),this.observe(this.mModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(this.mModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(this.mModel.GetItemRankItemUpdateMsg(),this.UpdateItemContent),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),ActivityKaiFuModel.setJiJieOpenViewData(this.m_activityJiJieId),this.jijie_link.visible=-1!=GameGlobal.ActivityKaiFuModel.GetAdvancedTypeArr().indexOf(this.m_activityJiJieId),this.jijie_link.visible&&(this.jijie_link.text="进阶狂欢",this.AddClick(this.jijie_link,this.openActivityJiJieView),this.updateJiJieBtnPng())},t.prototype.updateJiJieBtnPng=function(){UIHelper.ShowRedPoint(this.jijie_link,GameGlobal.ActivityKaiFuModel.RedPointAdvancedUpLevelByType(this.m_activityJiJieId))},t.prototype.openActivityJiJieView=function(){KaiFuActivityWin.Show(ActivityKaiFuFuncType.ACT_99990_JiJie,!1)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype._OnClick=function(e){var t=this;switch(e.currentTarget){case this.btnPrev:this.UpdateModel(this.mShowLevel-1);break;case this.btnNext:this.UpdateModel(this.mShowLevel+1);break;case this.btnHuanHua:this.mModel.SendDress(this.mModel.BaseConfig.pictureid[this.mShowLevel-1]);break;case this.btnCulture:this.SendUp();break;case this.btnAuto:this.mRoleAutoSendData.Toggle();break;case this.btnAttrDrug:ViewManager.ins().open(RoleTemplateDrugPanel,this.mModel);break;case this.btnUpLevel:UserBag.CheckEnough(this.mModel.GetShootUpDrugID(),1)&&WarnWin.show("6阶或以下使用直升丹可以直升1阶，6阶以上使用可以获得200进阶值，建议6阶时使用",function(){t.mModel.SendShootUpDrug(t.mModel.GetShootUpDrugID())},this,null,null,"normal",{btnName:"使用"});break;case this.powerLabel:ViewManager.ins().open(RoleTemplateAttrPanel,this.mModel,this.name,this.mModel.GetLevelSkin(this.mShowLevel));break;case this.btnSkin:ViewManager.ins().open(RoleRideDressPanel,this.mModel);break;case this.onekeyEquip:for(var i=0;i<UserRide.EQUIP_COUNT;i++){var o=this.mModelRedPoint.IsRedEquip(i);o&&this.mModel.SendEquip(o)}break;case this.btn_juexing:ViewManager.ins().open(RoleTemplateRewardPanel,this.mModel.mTemplateType)}},t.prototype.SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype._OnSkillClick=function(e){var t=parseInt(e.currentTarget.name);ViewManager.ins().open(RoleTemplateSkillPanel,this.mModel,t,this.m_SkillIconList)},t.prototype._OnEquipClick=function(e){var t=parseInt(e.currentTarget.name),i=this.mModel.mEquip[t];i.configID&&ViewManager.ins().open(EquipDetailedWin,i.configID,i,!0)},t.prototype.UpdateExp=function(e){e?(this.UpdateModel(this.mShowLevel+1),this.mRoleAutoSendData.Stop(),ViewManager.ins().open(GainNewImagePanel,this.mModel)):this.mRoleAutoSendData.Continue()},t.prototype.UpdateContent=function(){var e=this.mModel;this.powerLabel.text=e.GetDescPower();for(var t=0;t<this.mSkillItems.length;t++){var i=this.mSkillItems[t],o=this.mModel.IsOpen(t);i.item.setItemImgGray(o?!1:!0);var n=this.mModel.mSkills[t];o?i.item.setCount(n>0?n.toString():""):i.item.count.text=this.mModel.GetOpenLevel(t)+"阶开启"}for(var t=0;t<this.mEquipItems.length;t++){if(e.mEquip[t].configID){var a=this.mEquipItems[t].item.data,r=this.mEquipItems[t].item.data=e.mEquip[t];r&&a!=r&&this.mPlayEff[t]&&UIHelper.PlayUpEff(this.mEquipItems[t],.8)}this.mPlayEff[t]=!0}if(!e.mLevel)return void(this.currentState="none");this.mModel.mLevel>=this.mModel.mMaxLevel?this.currentState="full":this.currentState="normal",this.UpdateModel(this.mShowLevel);var s=this.mModel.LvproConfig[e.mLevel];s&&(this.bar.maximum=s.proexp,this.bar.value=e.mUpNum*s.exp,this.UpdateItemContent())},t.prototype.UpdateItemContent=function(){var e=this.mModel.LvproConfig[this.mModel.mLevel];e&&this.consumeLabel.Set(e.cost)},t.prototype.UpdateRedPoint=function(){for(var e=!1,t=0;t<UserRide.EQUIP_COUNT;t++){var i=this.mEquipItems[t],o=this.mModelRedPoint.IsRedEquip(t)?!0:!1;i.item.IsShowRedPoint(o),o&&(e=o)}this.onekeyEquip.visible=e,this.btnSkin.visible&&UIHelper.ShowRedPoint(this.btnSkin,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_SKIN)),UIHelper.ShowRedPoint(this.btnAttrDrug,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_ATTR_ITEM));for(var t=0;t<this.mSkillItems.length;t++){var i=this.mSkillItems[t];i.item.IsShowRedPoint(this.mModelRedPoint.IsRedSkill(t))}UIHelper.ShowRedPoint(this.btn_juexing,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_REWARD)),UIHelper.ShowRedPoint(this.btnAuto,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_RANK)),UIHelper.ShowRedPoint(this.btnCulture,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_RANK)),this.btnUpLevel.visible&&UIHelper.ShowRedPoint(this.btnUpLevel,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_UP_LEVEL_ITEM))},t.prototype.UpdateModel=function(e){var t=this.mModel;this.mShowLevel=e,this.btnPrev.enabled=e>1,this.btnNext.enabled=e<this.mModel.mLevel+1&&e<t.mMaxLevel,this.btnNextIcon.visible=e>=this.mModel.mLevel,this.imgHuanHua.visible=!1,this.btnHuanHua.visible=!1,this.addPowerGroup.visible=!1;var i=this.mModel.ProgressConfig[e];i&&i.name?(this.lbName.text=i.name,this.nameBg.visible=!0):(this.lbName.text="",this.nameBg.visible=!1),this.lbLev.text=e+"\n阶";var o=t.BaseConfig.pictureid[e-1];this.SetMainShow(o),this.SetExtraShow(o),o==t.mDressId?this.imgHuanHua.visible=!0:e<=t.mLevel?this.btnHuanHua.visible=!0:(this.addPowerGroup.visible=!0,this.lbAlert.textFlow=TextFlowMaker.generateTextFlow("可提升战力|C:0x63ff57&T:"+t.GetNextAddPower(e)+"|"))},t.prototype.SetMainShow=function(e){var t=this.mModel;if(t.SkinConfig[e]){if(t.mTemplateType==UserTemplate.TYPE_RIDE)return void this.ridePanel.SetBodyId(t.SkinConfig[e].pid);if(t.mTemplateType!=UserTemplate.TYPE_XIANLV_XW){if(t.mTemplateType==UserTemplate.TYPE_HAVING_LINGQ){var i=GameGlobal.HavingModel;return void this.showPanel.SetBodyId(i.GetAppaId())}if(t.mTemplateType!=UserTemplate.TYPE_PET_SHOUH){if(t.mTemplateType==UserTemplate.TYPE_WING){var o=SubRoles.ins().GetRoleData();return this.roleShowPanel.SetAll(o),this.roleShowPanel.SetTianx(null),this.roleShowPanel.SetTitle(null),void this.roleShowPanel.SetWing(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid))}if(t.mTemplateType==UserTemplate.TYPE_TIANX){var o=SubRoles.ins().GetRoleData();return this.roleShowPanel.SetAll(o),void this.roleShowPanel.SetTitle(null)}if(t.mTemplateType==UserTemplate.TYPE_SHENGB){var o=SubRoles.ins().GetRoleData();return this.roleShowPanel.SetAll(o),this.roleShowPanel.SetTianx(null),this.roleShowPanel.SetTitle(null),void this.roleShowPanel.SetWeapon(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid,o.job,o.sex,!1,!0))}this.showPanel.SetBodyId(t.SkinConfig[e].pid)}else{var n=GameGlobal.PetModel,a=n.GetShowId();if(0!=a){var r=n.GetPetInfo(a);this.showPanel.SetBody(r.GetSkin())}}}else{var s=GameGlobal.XianlvModel,l=s.getBattledXianlv();if(0!=l){var c=s.GetXianlvInfo(l);this.showPanel.SetBody(c.GetSkin())}}}},t.prototype.SetExtraShow=function(e){var t=this.mModel;if(t.mTemplateType!=UserTemplate.TYPE_XIANLV_FZ){if(t.mTemplateType==UserTemplate.TYPE_XIANLV_XW||t.mTemplateType==UserTemplate.TYPE_HAVING_LINGQ){var i=AppearanceConfig.GetUIAppe(t.SkinConfig[e].pid);return void(this.imgXianw.source=i.substring(i.lastIndexOf("/")+1))}if(t.mTemplateType!=UserTemplate.TYPE_PET_TONGL){if(t.mTemplateType==UserTemplate.TYPE_PET_SHOUH){var i=AppearanceConfig.GetUIAppe(t.SkinConfig[e].pid),o=void 0;return this.petSoul.numChildren>0?o=this.petSoul.getChildAt(0):(o=new MovieClip,this.petSoul.addChild(o)),void o.loadUrl(ResDataPath.GetMoviePath(i),!0)}if(t.mTemplateType==UserTemplate.TYPE_TIANX)return void this.roleShowPanel.SetTianx(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid));if(t.mTemplateType==UserTemplate.TYPE_HAVING_HUAN){var n=GameGlobal.HavingModel;return void this.extraPanel.SetBody(AppearanceConfig.GetUIPath(n.SkinConfig[n.mDressId].pid))}}else{var a=GameGlobal.PetModel,r=a.GetShowId();if(0!=r){var s=a.GetPetInfo(r);this.extraPanel.SetBody(s.GetSkin())}}}else{var l=GameGlobal.XianlvModel,c=l.getBattledXianlv();if(0!=c){var u=l.GetXianlvInfo(c);this.extraPanel.SetBody(u.GetSkin())}}},t}(BaseView);__reflect(RoleTemplatePanel.prototype,"RoleTemplatePanel",["ICommonWindowTitle"]);var GameGlobalConfigDef=function(){function e(){}return e}();__reflect(GameGlobalConfigDef.prototype,"GameGlobalConfigDef");var EquipPos;!function(e){e[e.WEAPON=0]="WEAPON",e[e.HEAD=1]="HEAD",e[e.NECKLACE=2]="NECKLACE",e[e.CLOTHES=3]="CLOTHES",e[e.SHOULDER=4]="SHOULDER",e[e.BELT=5]="BELT",e[e.CUFF=6]="CUFF",e[e.RING=7]="RING",e[e.PANTS=8]="PANTS",e[e.SHOE=9]="SHOE",e[e.MAX=10]="MAX"}(EquipPos||(EquipPos={}));var EquipType;!function(e){e[e.WEAPON=0]="WEAPON",e[e.HEAD=1]="HEAD",e[e.NECKLACE=2]="NECKLACE",e[e.CLOTHES=3]="CLOTHES",e[e.SHOULDER=4]="SHOULDER",e[e.BELT=5]="BELT",e[e.CUFF=6]="CUFF",e[e.RING=7]="RING",e[e.PANTS=8]="PANTS",e[e.SHOE=9]="SHOE",e[e.MAX=10]="MAX"}(EquipType||(EquipType={}));var HeroEquipPos;!function(e){e[e.WEAPON=1]="WEAPON",e[e.CLOTHES=2]="CLOTHES",e[e.CUISH=3]="CUISH",e[e.SHOE=4]="SHOE"}(HeroEquipPos||(HeroEquipPos={}));var Sproto;!function(e){var t=function(){function t(){this.Protocol=new e.ProtocolFunctionDictionary}return t.prototype.GetProtocol=function(){return this.Protocol},t}();e.ProtocolBase=t,__reflect(t.prototype,"Sproto.ProtocolBase")}(Sproto||(Sproto={}));var ItemBase=function(e){function t(){var t=e.call(this)||this;return t._count=1,t.touchEnabled=!1,t.touchChildren=!0,t.init(),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.count&&(this.count.scaleX=1/this.scaleX,this.count.scaleY=1/this.scaleY)},t.prototype.GetLTLabel=function(){if(!this.m_LTLabel){var e=this.m_LTLabel=new eui.Label;e.size=18,e.textColor=16773150,e.left=e.top=12,e.stroke=2,e.strokeColor=Color.Black,e.scaleX=1/this.scaleX,e.scaleY=1/this.scaleY}return this.m_LTLabel.parent||this.addChild(this.m_LTLabel),this.m_LTLabel},t.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},t.prototype.setItemCount=function(e){this.count.visible=e},t.prototype.setItemImg=function(e){this.itemIcon.setItemImg(e)},t.prototype.setItemImgGray=function(e){this.itemIcon.setGray(e)},t.prototype.setItemBg=function(e){this.itemIcon.setItemBg(e)},t.prototype.setDataByConfig=function(e){this.itemIcon.setData(e);var i="";if(this.itemConfig=e,e.type==ItemType.EQUIP)i=e.level+"级",this.nameTxt.textColor=6827776;else if(ItemConst.ITEM_SHOW_RANK_TYPE[e.type]){i=e.level+"阶",this.nameTxt.textColor=6827776;var o=i;this.data.att&&this.data.att.length?(o+=StringUtils.addColor("+"+this.data.att.length,13793025),this.GetLTLabel().textFlow=TextFlowMaker.generateTextFlow(o)):this.GetLTLabel().text=o}else i=e.name;i&&(this.nameTxt.text=i),0!=e.type&&(this.nameTxt.textColor=t.QUALITY_COLOR[e.quality]),void 0!=this.num&&this.setCount(this.num+"")},t.prototype.dataChanged=function(){if(this.clear(),isNaN(this.data))if(egret.is(this.data,"ItemBaseData")){var e=this.data;this.UpdateItemData(e.itemConfig)}else{var e=this.data;if(0==e.type){this.itemIcon.setItemImg(RewardData.getCurrencyRes(e.id)),e.id==MoneyConst.yuanbao&&this.itemIcon.setItemBg(ResDataPath.GetItemQualityName(4)),this.nameTxt.text=RewardData.getCurrencyName(e.id),this.nameTxt.textColor=11168305;var t=e.count;void 0!=t&&t>1?this.setCount(t+""):this.setCount("")}else 1==e.type&&this.UpdateItemData(GlobalConfig.ins().ItemConfig[e.id])}else{var i=this.data;this.itemConfig=GlobalConfig.ins().ItemConfig[i],this.setDataByConfig(this.itemConfig)}this._UpdateRedPoint()},t.prototype.UpdateItemData=function(e){if(this.itemConfig=e,this.itemConfig){this.setDataByConfig(this.itemConfig);var t=this.data?this.data.count:0;t&&t>1?this.setCount(this.data.count+""):this.setCount(""),this.data.lCorner&&this.itemIcon.SetCornerImg(this.data.lCorner),null!=this.data.corner&&this.itemIcon.SetCornerType(this.data.corner)}},t.prototype.setItemAward=function(e,t,i){var o={};o.type=e,o.id=t,o.count=i,this.data=o},t.prototype.showCostNums=function(){if(this.data&&this.data.id&&this.data.count){var e=GameGlobal.UserBag.GetCount(this.data.id);this.count.text=e+"/"+this.data.count,e>=this.data.count?this.count.textColor=Color.Green:this.count.textColor=Color.Red}},t.prototype.setItemData=function(e){e&&"object"==typeof e&&(this.data=e,this.dataChanged())},t.prototype._UpdateRedPoint=function(){this.redPoint.visible=this.data.canbeUsed},t.prototype.IsShowRedPoint=function(e){this.redPoint.visible=e},t.prototype.clear=function(){this.m_LTLabel&&this.m_LTLabel.parent&&this.m_LTLabel.parent.removeChild(this.m_LTLabel),this.itemConfig=null,null!=this.itemIcon.setData?this.itemIcon.setData(null):console.log("itemicon setdata data error"),this.count.text="",this.nameTxt.text="",this.nameTxt.textColor=16777215},t.prototype.destruct=function(){this.mCallback=null,this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onClick,this)},t.prototype.onClick=function(){return this.mCallback?void this.mCallback(this):void this.showDetail()},t.prototype.showDetail=function(){var e=this.itemConfig;if(void 0!=e&&e&&void 0!=e.type)ItemConst.OPEN_EQUIPS_TIPS[this.itemConfig.type]?this.openEquipsTips():this.openItemTips(this.itemConfig.id,this.getCount());else if(this.data){var i=this.data.id,o=this.data.count||0;t.MONEYCONST_TO_ITEMCOFIG||(t.MONEYCONST_TO_ITEMCOFIG=(r={},r[MoneyConst.exp]=2000036,r[MoneyConst.gold]=2000034,r[MoneyConst.yuanbao]=2000033,r[MoneyConst.byb]=2000032,r));var n=t.MONEYCONST_TO_ITEMCOFIG[i];if(n){var a=GameGlobal.Config.ItemConfig[n];a&&this.openItemTips(a.id,o)}}var r},t.prototype.setCount=function(e){if(this._count=Math.max(Number(e),1),e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+"万"}this.count.text=e},t.prototype.getCount=function(){return this._count},t.prototype.openEquipsTips=function(){ViewManager.ins().open(EquipDetailedWin,this.itemConfig.id,this.data)},t.prototype.openItemTips=function(e,t){var i=GameGlobal.Config.ItemConfig[e];return i.pid&&i.pid>700002?void ViewManager.ins().open(TianshenDetailWin,i,t):i.pid&&i.pid>61e4?void ViewManager.ins().open(XianJunDetailWin,i,t):void ViewManager.ins().open(ItemDetailedWin,0,e,t)},t.prototype.isShowName=function(e){this.nameTxt&&(this.nameTxt.visible=e)},t.prototype.getText=function(){return this.nameTxt.text},t.prototype.getTextColor=function(){return this.nameTxt.textColor},t.prototype.setnameTxtVisible=function(e){void 0===e&&(e=!1),this.nameTxt.visible=e},t.GetColorByQuality=function(e){var t=this.QUALITY_COLOR[e];return t||this.QUALITY_COLOR[0]},t.MONEYCONST_TO_ITEMCOFIG=null,t.QUALITY_TIP_COLOR=[16642514,5172339,4184049,13987323,16739328,16728385,15715323],t.QUALITY_COLOR=[6827776,104196,6390771,12845309,13793025,14352384,14352384],t.SKILL_NAME_COLOR=["0xff0000","0xff6e00","0xaa00e9","0x0095ff","0x27a02a","0xfdf1d2","0x00fc06"],t.QUALITY_NAME_STR=["白色","绿色","蓝色","紫色","橙色","红色","黄色"],t}(eui.ItemRenderer);__reflect(ItemBase.prototype,"ItemBase");var ItemBaseNotName=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.nameTxt.visible=!1},t}(ItemBase);__reflect(ItemBaseNotName.prototype,"ItemBaseNotName");var ItemBaseShowCount=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.data.count&&this.setCount(this.data.count)},t}(ItemBase);__reflect(ItemBaseShowCount.prototype,"ItemBaseShowCount");var ItemBaseShowCountNoName=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.nameTxt.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.data.count&&this.setCount(this.data.count)},t}(ItemBase);__reflect(ItemBaseShowCountNoName.prototype,"ItemBaseShowCountNoName");var ItemBaseCost=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.showCostNums()},t}(ItemBase);__reflect(ItemBaseCost.prototype,"ItemBaseCost");var ItemRightCorner=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.showCostNums()},t}(ItemBase);__reflect(ItemRightCorner.prototype,"ItemRightCorner");var ITEM_QUALITY;!function(e){e[e.WHITE_QUALITY=0]="WHITE_QUALITY",e[e.GREEN_QUALITY=1]="GREEN_QUALITY",e[e.BLUE_QUALITY=2]="BLUE_QUALITY",e[e.VIOLET_QUALITY=3]="VIOLET_QUALITY",e[e.ORANGE_QUALITY=4]="ORANGE_QUALITY",e[e.RED_QUALITY=5]="RED_QUALITY"}(ITEM_QUALITY||(ITEM_QUALITY={}));var Sproto;!function(e){e.ALL_DICT={};var t=function(){function t(){}return t.GetSerialize=function(i,o){var n=t.mSerialize.pop();return null==n&&(n=new e.SprotoTypeSerialize),n.Open(i,o),n},t.CloseSerialize=function(e){var i=e.Close();return t.mSerialize.push(e),i},t.GetDeserialize=function(i,o,n){var a=t.mDeserialize.pop();
return null==a&&(a=new e.SprotoTypeDeserialize),a.Init(i,o,n),a},t.CloseDeserialize=function(e){e.Clear(),t.mDeserialize.push(e)},t.Init=function(){t.m_ParserPack=new e.SprotoPack,t.m_Pkg=new e.Spackage},t.Dispatch=function(i){var o=t.m_ParserPack,n=o.Unpack(i),a=t.GetDeserialize(n,0,n.length),r=t.m_Pkg;r.type=void 0,r.session=void 0,e._decode_Spackage(a,r);var s=a.Size();if(r.type){var l=e.SprotoReceiver.HandlerType(r.type,r.session,n,s);if(null!=l)return e.SprotoSender.SendData(l,r.session,r.type)}else e.SprotoSender.HandlerSession(r.session,n,s);return t.CloseDeserialize(a),null},t.mSerialize=[],t.mDeserialize=[],t}();e.SprotoCore=t,__reflect(t.prototype,"Sproto.SprotoCore")}(Sproto||(Sproto={}));var ActivityType2Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.buyData=[];for(var t=e.buyData.length,i=0;t>i;i++)this.buyData.push(e.buyData[i])},t.prototype.hasReward=function(){return!1},t}(ActivityBaseData);__reflect(ActivityType2Data.prototype,"ActivityType2Data");var GangMineMyTeamPanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.GangMineTeamModel,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GangMineMyTeamPanelSkin",this.CommonDialog.title="组队成员"},t.prototype.initData=function(){this.list.itemRenderer=GangMineTeamRoleItem,this.list.dataProvider=null,this.tpower.restrict="0-9",this.tpower.maxChars=9},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.CommonDialog.OnAdded(this),this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.UpdateTeamInfo),this.AddClick(this.setUpBtn,this.onClickHandler),this.AddClick(this.zaomuBtn,this.onClickHandler),this.AddClick(this.exitBtn,this.onClickHandler),this.UpdateTeamInfo()},t.prototype.UpdateTeamInfo=function(){if(!this.model.mTeamInfo.HasTeam())return void this.CloseSelf();for(var e=[],t=0,i=0,o=this.model.mTeamInfo.members;i<o.length;i++){o[i];e.push({guardInfo:null,mInfo:this.model.mTeamInfo,mIndex:t++})}this.list.dataProvider=new eui.ArrayCollection(e),this.tpower.text=this.model.mTeamInfo.needpower+""},t.prototype.onClickHandler=function(e){switch(e.target){case this.exitBtn:this.OnClickExit();break;case this.zaomuBtn:this.OnClickZaomu();break;case this.setUpBtn:this.model.mTeamInfo.IsMyTeam()?this.OnClickSetup():(this.tpower.text=this.model.mTeamInfo.needpower+"",GameGlobal.UserTips.showTips("您不是队长没有权限操作"))}},t.prototype.OnClickExit=function(){this.CloseSelf(),this.model.SendLeave(1)},t.prototype.OnClickZaomu=function(){this.model.mTeamInfo.IsMyTeam()||GameGlobal.UserTips.showTips("您不是队长没有权限操作")},t.prototype.OnClickSetup=function(){this.model.SendGetTeamCondition(1,parseInt(this.tpower.text))},t.prototype.OnClose=function(){this.removeObserve(),this.removeEvents(),this.CommonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangMineMyTeamPanel.prototype,"GangMineMyTeamPanel");var GangMineTeamPanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.GangMineTeamModel,t.mMyTeamPanel=GangMineMyTeamPanel,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GangMineTeamPanelSkin",this.commonWindowBg.SetTitle("组队")},t.prototype.initData=function(){this.list.itemRenderer=GangMineTeamItem,this.list.dataProvider=null},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddClick(this.createBtn,this.onClickHandler),this.observe(MessageDef.UPDATE_TEAM_LIST,this.updateContent),this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.showMyTeamPanel),this.model.SendGetTeamList(1)},t.prototype.showMyTeamPanel=function(){this.CloseSelf(),ViewManager.ins().open(this.mMyTeamPanel)},t.prototype.updateContent=function(){this.list.dataProvider=new eui.ArrayCollection(this.model.mTeamList[1])},t.prototype.onClickHandler=function(e){this.model.SendCreateTeam(1)},t.prototype.OnClose=function(){this.removeObserve(),this.removeEvents(),this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangMineTeamPanel.prototype,"GangMineTeamPanel");var GangMineTeamItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMineTeamItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.joinBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)},t.prototype.onClickHandler=function(e){if(this.needPower>GameGlobal.actorModel.power)return void GameGlobal.UserTips.showTips("战力不足，不能加入");if(this.memberLen>=3)return void GameGlobal.UserTips.showTips("队伍满员，不能加入");var t=Util.GetParentByType(this,GangMineTeamPanel);t?t.model.SendJoin(1,this.leaderId):console.error("not parent !!!")},t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.leaderId=e.leaderid,this.needPower=e.needpower,this.tname.text=this.getLeaderName(e.members),this.tpower.text="需战力"+CommonUtils.overLength(e.needpower,!0),this.memberLen=e.members.length,this.tnum.text="("+this.memberLen+"/3)",this.showMembers(e.members)}},t.prototype.showMembers=function(e){var t,i,o=0,n=3;for(o;n>o;o++)i=this["role"+o],t=e[o],i.updateContent(t,this.leaderId)},t.prototype.getLeaderName=function(e){var t=0,i=e.length;for(t;i>t;t++)if(this.leaderId==e[t].dbid)return e[t].name;return""},t}(eui.ItemRenderer);__reflect(GangMineTeamItem.prototype,"GangMineTeamItem");var GangMineTeamRoleItem2=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMineTeamRoleItem2Skin",t}return __extends(t,e),t.prototype.updateContent=function(e,t){e?(this.currentState=e.dbid==t?"state1":"state2",this.iconImg.source=ResDataPath.GetHeadImgName(e.job,e.sex),this.tname.text=e.name,this.tserviceID.text="",this.tlevel.text="Lv."+e.level):this.currentState="state3"},t}(eui.Component);__reflect(GangMineTeamRoleItem2.prototype,"GangMineTeamRoleItem2");var KaiFuJiJiePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuJiJieSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuJiJieAwardItem},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateContent),this.AddClick(this.getwayLabel,this._OnClick),this.AddTimer(1e3,0,this.updateTime),this.UpdateContent(),this.updateTime()},t.prototype.updateTime=function(){var e=KaiFuJiJieRankPanel.GetUpdateTime(this.jijieType);this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动倒计时：|C:0x2dff42&T:"+e+"|")},t.prototype.getReward=function(){var e=this.jijieType,t=GameGlobal.Config.ProgressCrazyRewardConfig,i=[],o=t[e];for(var n in o)if(o.hasOwnProperty(n)){var a=o[n],r={};r.type=e,r.cfg=a,r.weight=a.index;var s=GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(e)>=a.value;if(s){var l=GameGlobal.ActivityKaiFuModel.advancedInfo.GetAdvancedReward(e,a.index);l?r.weight+=1e3:r.weight-=1e3}i.push(r)}return i},t.prototype.OnClose=function(){TimerManager.ins().removeAll(this)},t.prototype.UpdateContent=function(){if(this.visible){var e=this.jijieType,t=this.getReward();SortTools.sortMap(t,"weight"),this.list.dataProvider=new eui.ArrayCollection(t);var i="|C:0x2dff42&T:"+GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(e)+" 阶|";this.lv_txt.textFlow=TextFlowMaker.generateTextFlow("当前"+ActivityConst.JiJieTypeName(e)+"阶数："+i)}},t.prototype._OnClick=function(e){e.currentTarget==this.getwayLabel&&GameGlobal.ActivityKaiFuModel.OpenAdvancedPanel(this.jijieType)},t}(BaseView);__reflect(KaiFuJiJiePanel.prototype,"KaiFuJiJiePanel");var KaiFuJiJieAwardItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){GameGlobal.ActivityKaiFuModel.Send_advanced_lv_reward(this.data.cfg.type,this.data.cfg.index)},t.prototype.dataChanged=function(){var e=this.data.type;if(null!=e){var t=this.data.cfg,i=this.data.weight;this.btn.visible=100>i,this.btn.enabled=i>0&&100>i?!1:!0,UIHelper.ShowRedPoint(this.btn,0>i),this.getted_img.visible=!this.btn.visible,this.list.dataProvider=new eui.ArrayCollection(t.reward),this.tipsTxt.text=ActivityConst.JiJieTypeName(e)+"达到"+t.value+"阶"}},t}(eui.ItemRenderer);__reflect(KaiFuJiJieAwardItem.prototype,"KaiFuJiJieAwardItem");var KaiFuTargetBasePanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuTargetBaseAwardItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.getwayLabel&&this.AddClick(this.getwayLabel,this._OnClick),this.UpdateContent(),this.AddLoopTimer(1e3,this.updateTime)},t.prototype.updateTime=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);e?this.time_txt.textFlow=TextFlowMaker.generateTextFlow(e.getRemindTimeString()):this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动未开启")},t.prototype.getReward=function(){var e,t=[],i=ActivityConst.GetConfigByActityType(this.activityType)[this._activityId],o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),n=i.length;for(e=0;n>e;e++){var a=i[e];if(a.Id==this._activityId){var r={};if(r.cfg=a,r.actType=this.activityType,r.weight=a.index,o){var s=o.canGetRecordByIndex(a.index),l=o.GetRecordByIndex(a.index);s?l?r.weight+=1e3:r.weight-=1e3:l&&(r.weight+=1e3)}t.push(r)}}return t},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible&&this._activityId){var e=this.getReward();SortTools.sortMap(e,"weight"),this.list.dataProvider?this.list.dataProvider.replaceAll(e):this.list.dataProvider=new eui.ArrayCollection(e)}},t.prototype._OnClick=function(e){},t}(BaseView);__reflect(KaiFuTargetBasePanel.prototype,"KaiFuTargetBasePanel");var KaiFuTargetBaseAwardItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseShowCountNoName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){var t=this.data.cfg;"领 取"==this.btn.label?GameGlobal.ActivityKaiFuModel.sendReward(t.Id,t.index):t.gainway&&GameGlobal.ViewManager.Guide(t.gainway[0][1][0])},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg),t=this.data.weight,i=this.data.actType,o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(e.Id);this.btn.visible=100>t,this.btn.label=t>0&&100>t?e.gainway?"前 往":"未达成":"领 取",UIHelper.ShowRedPoint(this.btn,0>t),this.getted_img.visible=!this.btn.visible,this.list.dataProvider=new eui.ArrayCollection(e.rewards);var n="";switch(i){case ActivityKaiFuFuncType.ACT_3_RechargeContinue:n="连接充值"+e.rechargeday+"天（"+(o?o.day:0)+"/"+e.rechargeday+"）";break;case ActivityKaiFuFuncType.ACT_20_RechargeGroupon:n="战力达到 "+CommonUtils.overLength(e.value);break;case ActivityKaiFuFuncType.ACT_1_Upgrade:n="角色达到 "+e.value+"级";break;case ActivityKaiFuFuncType.ACT_21_OutdrawDiscountShop:n="今日充值人数达"+e.type+"人",1==e.value?n+="且个人充值任意金额":e.value>1&&(n+="且个人充值金额达"+e.value+"元")}this.tipsTxt.textFlow=TextFlowMaker.generateTextFlow(n)},t}(eui.ItemRenderer);__reflect(KaiFuTargetBaseAwardItem.prototype,"KaiFuTargetBaseAwardItem");var UserTemplate=function(e){function t(t){var i=e.call(this)||this;return i.mReward=0,i.mLevel=0,i.mUpNum=0,i.mDrugNum=0,i.mSkills=[],i.mEquip=[],i.mEquipIcon=[],i.mDressId=0,i.mDressList=[],i.mMaxLevel=10,i.mRideSkills=[],i.LOCK_SKILLS=[],i.mTemplateType=t,GameGlobal.SubRoles.mTemplate[t]=i,i}return __extends(t,e),t.GetTemplateTypeByItemType=function(e){if(!t.ITEMTYPE_TO_TEMPTYPE){var i=t.ITEMTYPE_TO_TEMPTYPE={};for(var o in t.TEMPTYPE_TO_ITEMTYPE)i[t.TEMPTYPE_TO_ITEMTYPE[o]]=o}return t.ITEMTYPE_TO_TEMPTYPE[e]},t.prototype.IsShowShootUpDrugID=function(){var e=GameServer.serverOpenDay;return 8>=e},t.prototype.GetShootUpDrugID=function(){var e=GameGlobal.Config.AdvanceItemConfig,t=0;for(var i in e)if(e[i].type==this.mTemplateType){t=e[i].item;break}return t},t.prototype.GetRankUpdateMsg=function(){return MessageDef.USER_TEMPLATE_RANK_UP_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetRankRewardUpdateMsg=function(){return MessageDef.USER_TEMPLATE_RANK_REWARD_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemEquipUpdateMsg=function(){return MessageDef.USER_TEMPLATE_EQUIP_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemSkillUpdateMsg=function(){return MessageDef.USER_TEMPLATE_SKILL_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemSkinUpdateMsg=function(){return MessageDef.USER_TEMPLATE_SKIN_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemAttrItemUpdateMsg=function(){return MessageDef.USER_TEMPLATE_ATTR_ITEM_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetUpLevelItemUpdateMsg=function(){return MessageDef.USER_TEMPLATE_UP_LEVEL_ITEM_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemRankItemUpdateMsg=function(){return MessageDef.USER_TEMPLATE_RANK_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemEquipRpUpdateMsg=function(){return MessageDef.RP_USER_TEMPLATE_EQUIP_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetItemRpUpdateMsg=function(){return MessageDef.RP_USER_TEMPLATE_UPDATE_+t.TEMPTYPE_TO_ITEMTYPE[this.mTemplateType]},t.prototype.GetTemplateType=function(){return this.mTemplateType},t.prototype.Init=function(){this.LOCK_SKILLS=[];for(var e in this.BaseConfig.openskilllv)this.LOCK_SKILLS.push(parseInt(e));this.LOCK_SKILLS.sort(function(e,t){return e-t}),this.mRideSkills=this.BaseConfig.skilllist;for(var t in this.mRideSkills)this.mSkills.push(0);for(var i=this.BaseConfig.equip,o=0;4>o;o++)this.mEquip.push(new ItemBaseData),this.mEquipIcon.push(i?i[o]||"":"");if(this.SkillConfig){var n=this.GetItemSkillUpdateMsg();for(var e in this.SkillConfig){var a=this.SkillConfig[e];GameGlobal.UserBag.AddListenerItem(a[1].cost.id,n)}}if(this.SkinConfig){var r=this.GetItemSkinUpdateMsg();for(var e in this.SkinConfig){var a=this.SkinConfig[e],s=a.itemid;s&&GameGlobal.UserBag.AddListenerItem(s.id,r)}}for(var e in this.LvproConfig){GameGlobal.UserBag.AddListenerItem(this.LvproConfig[e].cost[1].id,this.GetItemRankItemUpdateMsg());break}GameGlobal.UserBag.AddListenerItem(this.BaseConfig.attreitemid,this.GetItemAttrItemUpdateMsg()),this.mMaxLevel=CommonUtils.getObjectLength(this.AttrsConfig);var l=this.GetShootUpDrugID();l&&GameGlobal.UserBag.AddListenerItem(l,this.GetUpLevelItemUpdateMsg())},t.prototype.IsOpen=function(e){var t=this.GetOpenLevel(e);return this.mLevel>=t},t.prototype.GetOpenLevel=function(e){return this.LOCK_SKILLS[e]},t.prototype.OnActive=function(){},t.prototype._DoInitData=function(e){this.mLevel=e.lv,this.mUpNum=e.upNum,this.mDressId=e.useClothes,this.mDressList=e.clothesList||[],this.mTmpDressList=null,this.mSkills=e.skillList,this.mDrugNum=e.drugNum||0,this.mReward=e.reward||0,this.UpdateDress();for(var t=0;t<e.equipList.length;t++){var i=e.equipList[t];i.id&&this.mEquip[t].ParserByEquipData(i)}GameGlobal.MessageCenter.dispatch(this.mMsgDefInit),GameGlobal.MessageCenter.dispatch(this.mMsgDefUpdate),this.OnActive()},t.prototype._DoUpdateData=function(e){if(null!=e.reward&&(this.mReward=e.reward||0,GameGlobal.MessageCenter.dispatch(this.GetRankRewardUpdateMsg()),GameGlobal.MessageCenter.dispatch(MessageDef.USER_TEMPLATE_RANK_REWARD_UPDATE_ALL___)),e.lv&&(this.mLevel=e.lv,GameGlobal.MessageCenter.dispatch(this.GetRankUpdateMsg()),GameGlobal.MessageCenter.dispatch(this.mMsgDefUpdateExp,!0)),null!=e.upNum&&(this.mUpNum=e.upNum,GameGlobal.MessageCenter.dispatch(this.mMsgDefUpdateExp,!1)),e.drugNum&&(this.mDrugNum=e.drugNum,GameGlobal.MessageCenter.dispatch(this.mMsgDefUpdateDrug)),e.clothesList&&(this.mDressList=e.clothesList||[],this.mTmpDressList=null),e.useClothes&&(this.mDressId=e.useClothes,this.UpdateDress()),e.skillList&&(this.mSkills=e.skillList),e.equipList){for(var t=!1,i=0;i<e.equipList.length;i++){var o=e.equipList[i];o.id&&(this.mEquip[i].ParserByEquipData(o),t=!0)}t&&GameGlobal.MessageCenter.dispatch(this.mMsgDefUpdateEquip)}GameGlobal.MessageCenter.dispatch(this.mMsgDefUpdate)},t.prototype.UpdateDress=function(){var e=SubRoles.ins().GetRoleData();e&&e.UpdateTemplateData(this.mTemplateType,this.mDressId,this.mDressList)},t.prototype.SendBoost=function(e){var t=new Sproto.cs_template_up_level_request;t.autoBuy=e,t.templateType=this.mTemplateType,this.Rpc(C2sProtocol.cs_template_up_level,t)},t.prototype.SendUpSkill=function(e){var t=new Sproto.cs_template_up_skill_request;t.skillNo=e+1,t.templateType=this.mTemplateType,this.Rpc(C2sProtocol.cs_template_up_skill,t)},t.prototype.SendDress=function(e){var t=new Sproto.cs_template_clothes_request;t.clothesNo=e,t.templateType=this.mTemplateType,this.Rpc(C2sProtocol.cs_template_clothes,t)},t.prototype.SendEquip=function(e){var t=new Sproto.cs_template_equip_request;t.itemNo=e,t.templateType=this.mTemplateType,this.Rpc(C2sProtocol.cs_template_equip,t)},t.prototype.SendGetReward=function(e){var t=new Sproto.cs_template_reward_request;t.templateType=this.mTemplateType,t.no=e,this.Rpc(C2sProtocol.cs_template_reward,t)},t.prototype.SendActiveDress=function(e){var t=new Sproto.cs_template_buy_clothes_request;t.templateType=this.mTemplateType,t.clothesNo=e,this.Rpc(C2sProtocol.cs_template_buy_clothes,t)},t.prototype.SendDrug=function(e){var t=new Sproto.cs_template_drug_request;t.drugNum=e,t.templateType=this.mTemplateType,this.Rpc(C2sProtocol.cs_template_drug,t)},t.prototype.SendShootUpDrug=function(e){var t=new Sproto.cs_template_up_stage_request;t.drugId=e,this.Rpc(C2sProtocol.cs_template_up_stage,t)},t.prototype.GetNextAddPower=function(e){return ItemConfig.CalcAttrScoreValue(this.GetAttrByLv(this.mLevel+1))-ItemConfig.CalcAttrScoreValue(this.GetCurAttr())},t.prototype.GetAppaId=function(){if(this.SkinConfig){var e=this.SkinConfig[this.mDressId];if(e)return e.pid}else console.error("not GetAppaId skinconfig => "+egret.getQualifiedClassName(this));return 0},t.GetAppaId=function(e,t){if(e){var i=e[t];if(i)return i.pid||0}return 0},t.prototype.GetPower=function(){var e=0;return e+=ItemConfig.CalcAttrScoreValue(this.GetCurAttr()),e+=ItemConfig.CalcAttrScoreValue(this.GetCurEquipAttr())},t.prototype.GetDescPower=function(){var e=this.GetCurAttr(),t=this.GetCurEquipAttr(),i=this.GetCurDressAttr(),o=this.GetCurDrugAttr(),n=this.GetCurSkillAttr(),a=0;return a+=ItemConfig.CalcAttrScoreValue(e),a+=ItemConfig.CalcAttrScoreValue(t),a+=ItemConfig.CalcAttrScoreValue(i),a+=ItemConfig.CalcAttrScoreValue(o),a+=ItemConfig.CalcAttrScoreValue(n)},t.prototype.GetCurAttr=function(){return this.GetAttrByLv(this.mLevel)},t.prototype.GetAttrByLv=function(e){var t=this.ProgressConfig[e];if(!t)return[];var i=this.AttrsConfig[this.mLevel];if(!i)return[];var o=i.attrpower,n=[],a=t.attrpower;for(var r in a){var s=a[r];for(var l in o)if(o[l].type==s.type){n.push({type:s.type,value:s.value+o[l].value*this.mUpNum});break}}return n},t.prototype.GetCurEquipAttr=function(){for(var e={},t=0,i=this.mEquip;t<i.length;t++){var o=i[t];o.configID&&(AttributeData.AttrAddTo(e,GameGlobal.Config.EquipConfig[o.configID].attrs),AttributeData.AttrAddTo(e,o.att))}var n=[];for(var a in e)n.push({type:a,value:e[a]});return n.length?n:[{type:AttributeType.atMaxHp,value:0},{type:AttributeType.atAttack,value:0},{type:AttributeType.atDef,value:0}]},t.prototype.GetCurDressAttr=function(){for(var e={},t=0,i=this.GetDressDict().mList;t<i.length;t++){var o=i[t];AttributeData.AttrAddTo(e,this.SkinConfig[o].attrpower)}var n=[];for(var a in e)n.push({type:a,value:e[a]});if(!n.length){var r=this.SkinConfig[1e3];if(r){for(var s=CommonUtils.copyDataHandler(r.attrpower),l=0,c=s;l<c.length;l++){var u=c[l];u.value=0}return s}}return n},t.prototype.GetCurSkillAttr=function(){this.SkillConfig;var e=0,t=[];if(!this.BaseConfig.skilllist)return null;for(var i=0,o=this.BaseConfig.skilllist;i<o.length;i++){var n=o[i],a=this.SkillConfig[n];if(a&&this.mSkills[e]){var r=a[this.mSkills[e]-1];r&&(t=AttributeData.AttrAddition(t,r.attrpower))}++e}return t.length?t:[{type:AttributeType.atMaxHp,value:0},{type:AttributeType.atAttack,value:0},{type:AttributeType.atDef,value:0}]},t.prototype.GetCurDrugAttr=function(){var e=CommonUtils.copyDataHandler(this.BaseConfig.attredata),t=this.mDrugNum;for(var i in e)e[i].value*=t;return e},t.prototype.GetSkinConfig=function(){var e=this.SkinConfig,t=[];for(var i in e)parseInt(i)>=1e3&&t.push(e[i]);return t.sort(function(e,t){return e.skinid-t.skinid}),t},t.prototype.GetDressPower=function(){for(var e=0,t=0,i=this.GetDressDict().mList;t<i.length;t++){var o=i[t];e+=ItemConfig.CalcAttrScoreValue(this.SkinConfig[o].attrpower)}return e},t.prototype.GetActiveDressCount=function(){return this.GetDressDict().mList.length},t.prototype.GetLevelSkin=function(e){var t=this.BaseConfig.pictureid?this.BaseConfig.pictureid[e-1]:1,i=this.SkinConfig[t];return i?i.pid:0},t.prototype.HasDress=function(e){return this.GetDressDict().mDict[e]?!0:!1},t.prototype.GetDressDict=function(){if(!this.mTmpDressList){for(var e=[],t={},i=0,o=this.mDressList;i<o.length;i++){var n=o[i];n>=1e3&&(e.push(n),t[n]=!0)}e.sort(function(e,t){return e-t}),this.mTmpDressList={mList:e,mDict:t}}return this.mTmpDressList},t.prototype.GetRewardState=function(e){var t=GameGlobal.Config.ProgressRewardConfig[this.mTemplateType];if(!t)return RewardState.NotReached;var i=t[e];return i&&this.mLevel>=i.progress?BitUtil.Has(this.mReward,i.id)?RewardState.Gotten:RewardState.CanGet:RewardState.NotReached},t.EQUIP_COUNT=4,t.TYPE_RIDE=1,t.TYPE_WING=2,t.TYPE_TIANX=3,t.TYPE_SHENGB=4,t.TYPE_PET_SHOUH=5,t.TYPE_PET_TONGL=6,t.TYPE_XIANLV_XW=7,t.TYPE_XIANLV_FZ=8,t.TYPE_HAVING_HAVING=9,t.TYPE_HAVING_LINGQ=10,t.TYPE_HAVING_HUAN=11,t.TYPE_LINGTONG=12,t.TYPE_ROLEFLY=13,t.TYPE_DRESS_FATION=100,t.TYPE_TITLE=101,t.TEMPTYPE_TO_ITEMTYPE=(_a={},_a[t.TYPE_RIDE]=ItemType.RIDE,_a[t.TYPE_WING]=ItemType.WING,_a[t.TYPE_TIANX]=ItemType.TIANXIAN,_a[t.TYPE_SHENGB]=ItemType.SHENGB,_a[t.TYPE_PET_SHOUH]=ItemType.PET_SH,_a[t.TYPE_PET_TONGL]=ItemType.PET_TL,_a[t.TYPE_XIANLV_XW]=ItemType.XIAN_XW,_a[t.TYPE_XIANLV_FZ]=ItemType.XIAN_FZ,_a[t.TYPE_HAVING_LINGQ]=ItemType.LINGQI,_a[t.TYPE_HAVING_HUAN]=ItemType.HUA,_a[t.TYPE_HAVING_HAVING]=ItemType.TIANNV,_a),t.ITEMTYPE_TO_TEMPTYPE=null,t}(BaseSystem);__reflect(UserTemplate.prototype,"UserTemplate");var _a,UserTemplateRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mEquip=[],i.mSkill=[],i.mSkin={},i.mModel=t,i}return __extends(t,e),t.prototype.IsRedPoint=function(){return this.mModel.BaseConfig&&this.mModel.BaseConfig.open&&!Deblocking.IsDeblocking(this.mModel.BaseConfig.open)?!1:e.prototype.IsRedPoint.call(this)},t.prototype.OnChange=function(e){e==t.INDEX_EQUIP?GameGlobal.MessageCenter.dispatch(this.mModel.GetItemEquipRpUpdateMsg()):GameGlobal.MessageCenter.dispatch(this.mModel.GetItemRpUpdateMsg())},t.prototype.Get=function(t){return this.mModel.mLevel?e.prototype.Get.call(this,t):!1},t.prototype.OnMessage=function(i){if(!this.mModel.mLevel)return!1;var o=!1;return(i==this.mModel.GetItemEquipUpdateMsg()||i==this.mModel.GetRankUpdateMsg())&&(this.ClearFlag(t.INDEX_EQUIP),o=!0),i==this.mModel.GetItemSkillUpdateMsg()&&(this.ClearFlag(t.INDEX_SKILL),o=!0),i==this.mModel.GetItemSkinUpdateMsg()&&(this.ClearFlag(t.INDEX_SKIN),o=!0),i==this.mModel.GetItemAttrItemUpdateMsg()&&(this.ClearFlag(t.INDEX_ATTR_ITEM),o=!0),(i==this.mModel.GetRankRewardUpdateMsg()||i==this.mModel.GetRankUpdateMsg())&&(this.ClearFlag(t.INDEX_REWARD),o=!0),i==this.mModel.GetItemRankItemUpdateMsg()&&(this.ClearFlag(t.INDEX_RANK),o=!0),o||e.prototype.OnMessage.call(this,i),!0},t.prototype.GetMessageDef=function(){var e=[this.mModel.GetItemEquipUpdateMsg(),this.mModel.GetItemSkillUpdateMsg(),this.mModel.GetItemSkinUpdateMsg(),this.mModel.GetItemAttrItemUpdateMsg(),this.mModel.GetItemRankItemUpdateMsg(),this.mModel.GetRankRewardUpdateMsg(),this.mModel.GetRankUpdateMsg(),this.mModel.GetUpLevelItemUpdateMsg(),this.mModel.mMsgDefInit,this.mModel.mMsgDefUpdateEquip];return e},t.prototype.GetCheckFuncList=function(){var e=(i={},i[t.INDEX_EQUIP]=this.GetIndexEquip,i[t.INDEX_RANK]=this.GetIndexRank,i[t.INDEX_SKILL]=this.GetIndexSkill,i[t.INDEX_REWARD]=this.GetIndexReward,i[t.INDEX_SKIN]=this.GetIndexSkin,i[t.INDEX_ATTR_ITEM]=this.GetIndexAttrItem,i[t.INDEX_UP_LEVEL_ITEM]=this.GetIndexUpLevelItem,i);return e;var i},t.prototype.GetIndexEquip=function(){this.DoUpdateEquip();for(var e=0,t=this.mEquip;e<t.length;e++){var i=t[e];if(i)return!0}return!1},t.prototype.GetIndexRank=function(){if(this.mModel.mLevel<this.mModel.mMaxLevel){var e=this.mModel.LvproConfig[this.mModel.mLevel];if(e){for(var t=1,i=!0,o=0,n=e.cost;o<n.length;o++){var a=n[o];if(!Checker.Data({type:a.type,id:a.id,count:a.count*t},!1)){i=!1;break}}if(i)return!0}}return!1},t.prototype.GetIndexSkill=function(){var e=this.mModel.BaseConfig.skilllist;if(e&&this.mModel.mSkills){this.mSkill=[];for(var t=0;4>t;t++){var i=!1;if(this.mModel.IsOpen(t)){var o=e[t],n=this.mModel.mSkills[t];n&&this.mModel.SkillConfig[o][n]&&Checker.Data(this.mModel.SkillConfig[o][n-1].cost,!1)&&(i=!0)}this.mSkill[t]=i}for(var a=0,r=this.mSkill;a<r.length;a++){var s=r[a];if(s)return!0}return!1}},t.prototype.GetIndexReward=function(){var e=GameGlobal.Config.ProgressRewardConfig[this.mModel.mTemplateType];if(!e)return!1;for(var t in e)if(this.mModel.GetRewardState(Number(t))==RewardState.CanGet)return!0;return!1},t.prototype.GetIndexSkin=function(){this.mSkin={};var e=this.mModel.SkinConfig;if(e){var t=this.mModel.GetDressDict().mDict;for(var i in e){var o=Number(i);o>=1e3&&!t[o]&&Checker.Data(e[i].itemid,!1)&&(this.mSkin[o]=!0)}}for(var i in this.mSkin)return!0;return!1},t.prototype.GetIndexAttrItem=function(){return this.mModel.BaseConfig.attreitemid?GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid)>0:!1},t.prototype.GetIndexUpLevelItem=function(){var e=GameServer.serverOpenDay;return 8>=e&&this.mModel.mLevel<this.mModel.mMaxLevel?GameGlobal.UserBag.GetCount(this.mModel.GetShootUpDrugID())>0:!1},t.prototype.GetCanEquipList=function(){var e=this.mModel.mLevel,t=UserBag.ins().getBagEquipByType(this.mEquipType);if(!t)return{};for(var i={},o=0;o<t.length;o++){var n=t[o];if(!(e<n.itemConfig.level)){var a=n.itemConfig.subType,r=i[a];r||(r=i[a]=[]),r.push(n)}}return i},t.prototype.DoUpdateEquip=function(){if(this.mEquipType){var e=this.GetCanEquipList();if(e){for(var t=[],i=function(e){return t.indexOf(e)>=0?!1:!0},o=this.mModel.mEquip,n=o.length,a=0;n>a;a++){var r=o[a];if(0==r.handle){var s=e[a];if(s)for(var l=0,c=s;l<c.length;l++){var u=c[l];i(u)&&(t[a]=UserEquip.contrastEquip(u,t[a]))}}}for(var a=0;n>a;a++){var r=o[a];if(0!=r.handle){var s=e[a];if(s)for(var p=0,h=s;p<h.length;p++){var u=h[p];i(u)&&(t[a]=UserEquip.contrastEquip(t[a]?t[a]:r,u))}}}for(var d=this.mEquip,a=0,_=UserTemplate.EQUIP_COUNT;_>a;a++){var r=o[a];d[a]=t[a]&&r.handle!=t[a].handle?t[a].handle:0}}}},t.prototype.IsRedEquip=function(e){return this.mEquip[e]},t.prototype.IsRedSkill=function(e){return this.mSkill[e]?!0:!1},t.prototype.IsRedSkin=function(e){return this.mSkin[e]?!0:!1},t.INDEX_EQUIP=0,t.INDEX_RANK=1,t.INDEX_SKILL=2,t.INDEX_REWARD=3,t.INDEX_SKIN=4,t.INDEX_ATTR_ITEM=5,t.INDEX_UP_LEVEL_ITEM=6,t}(IRedPoint);__reflect(UserTemplateRedPoint.prototype,"UserTemplateRedPoint");var RoleRidePanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=1,t.mHasDress=!0,t.mModel=GameGlobal.UserRide,t.mModelRedPoint=GameGlobal.UserRide.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.ride,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.btnCulture,e[2]=this.btnAuto,e;var e},t.RedPointCheck=function(){return GameGlobal.UserRide.mRedPoint.IsRedPoint()},t.NAME="坐骑",t}(RoleTemplatePanel);__reflect(RoleRidePanel.prototype,"RoleRidePanel");var RoleTemplateAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="RoleRideAttrSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0],this.commonDialog.OnAdded(this),this.commonDialog.title=e[1];var i=e[2],o=e[3];if(o)this.currentState="active",this.levelAttr.textFlow=AttributeData.GetAttrTabString(o),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(o);else{var n=this.mModel.GetCurAttr();this.changeLaber(n);var a=this.mModel.GetCurEquipAttr();a&&a.length?this.equipAttr.textFlow=AttributeData.GetAttrTabString(a):UIHelper.SetVisible(this.equipAttr.parent,!1),this.equipAttr.textFlow=AttributeData.GetAttrTabString(a);var r=this.UpdateSkinLabel(),s=this.mModel.GetCurDrugAttr();this.drugAttr.textFlow=AttributeData.GetAttrTabString(s);var l=this.UpdateSkillLabel(),c=0;c+=ItemConfig.CalcAttrScoreValue(n),c+=ItemConfig.CalcAttrScoreValue(a),c+=ItemConfig.CalcAttrScoreValue(r),c+=ItemConfig.CalcAttrScoreValue(s),c+=ItemConfig.CalcAttrScoreValue(l),this.powerLabel.text=c}this.ShowModel(i)},t.prototype.changeLaber=function(e){var t=[],i=0;i=GameGlobal.UserTitle.GetAddAttrRate(this.mModel.mTemplateType);for(var o=0;o<e.length;o++){var n=0;void 0!=e[o].value&&(n=e[o].value),t.push({type:e[o].type,value:Math.floor(n+n*i)})}this.levelAttr.textFlow=AttributeData.GetAttrTabString(t)},t.prototype.UpdateSkillLabel=function(){var e=this.mModel.GetCurSkillAttr();return e&&e.length?this.skillAttr.textFlow=AttributeData.GetAttrTabString(e):UIHelper.SetVisible(this.skillAttr.parent,!1),e},t.prototype.UpdateSkinLabel=function(){var e=this.mModel.GetCurDressAttr();return e&&e.length?this.skinAttr.textFlow=AttributeData.GetAttrTabString(e):UIHelper.SetVisible(this.skinAttr.parent,!1),e},t.prototype.ShowModel=function(e){this.mModel.mTemplateType==UserTemplate.TYPE_RIDE?this.ridePanel.SetBodyId(e):this.showPanel.SetBody(AppearanceConfig.GetUIPath(e))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RoleTemplateAttrPanel.prototype,"RoleTemplateAttrPanel");var DeviceUtils=function(){function e(){}return Object.defineProperty(e,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsFirefoxBrowse",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isLocation",{get:function(){return location.href.indexOf("192.168.201")>=0||location.href.indexOf("127.0.0.1")>=0||location.href.indexOf("localhost")>=0||location.href.indexOf("cq.api.com")>=0},enumerable:!0,configurable:!0}),e
}();__reflect(DeviceUtils.prototype,"DeviceUtils");var AuctionBasePanel=function(e){function t(){var t=e.call(this)||this;return t.quality=0,t.curPage=1,t.skinName="AuctionPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){UIHelper.SetLinkStyleLabel(this.recordTxt,"成交记录"),this.auctionList.itemRenderer=AuctionItem,this.dataProvider=new eui.ArrayCollection([]),this.auctionList.dataProvider=this.dataProvider,this.qualityGroup.visible=!1,this.pageBtn.setPage(1),this.recoverTouchPos()},t.prototype.OnOpen=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.AddClick(this.helpBtn,this.onClick),this.AddClick(this.selectGroup,this.onClick),this.AddClick(this.qualityGroup,this.onClick),this.AddClick(this.recordTxt,this.onClick),this.AddClick(this.ratioTxt,this.onClick),this.scroller.addEventListener(egret.Event.CHANGE,this.OnRefresh,this),this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.pageChangeFun),this.observe(MessageDef.AUCTION_LIST_UPDATE,this.updateQuality),GameGlobal.AuctionModel.sendAuctionList(t.aucType)},t.prototype.pageChangeFun=function(e){this.curPage=e,this.SetPos((e-1)*(this.scroller.height-20))},t.prototype.SetPos=function(e){var t=this.scroller.$Scroller[9];t.maxScrollPos=this.auctionList.contentHeight,t.throwTo(e)},t.prototype.recoverTouchPos=function(){var e=this.scroller.$Scroller[9];e.maxScrollPos=this.auctionList.contentHeight,e.currentScrollPos=0},t.prototype.OnRefresh=function(){var e=this.auctionList.scrollV;this.pageBtn.setPage(Math.ceil(1+e/this.scroller.height))},t.prototype.onClick=function(e){switch(e.target){case this.quality0Txt:case this.quality2Txt:case this.quality3Txt:case this.quality4Txt:case this.quality5Txt:case this.quality6Txt:this.qualityGroup.visible=!1,this.quality=parseInt(e.target.name),this.updateQuality()}switch(e.currentTarget){case this.selectGroup:this.qualityGroup.visible=!this.qualityGroup.visible;break;case this.qualityGroup:this.qualityGroup.visible=!1;break;case this.recordTxt:ViewManager.ins().open(AuctionRecordPanel,t.aucType);break;case this.helpBtn:ViewManager.ins().open(ActivityDescPanel,29,"拍卖说明");break;case this.ratioTxt:GameGlobal.AuctionModel.showRatioPanel()}},t.prototype.updateQuality=function(){this.ratioTxt.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>我的拍卖额度：'+GameGlobal.AuctionModel.getRemainRatio()+"</u></a>"),this.selectTxt.text=this["quality"+this.quality+"Txt"].text,this.selectTxt.textColor=this["quality"+this.quality+"Txt"].textColor;var e=GameGlobal.AuctionModel.auctionLists[t.aucType],i=[];e&&(i=e.slice());var o=0==this.quality?i:[];if(0!=this.quality)if(6==this.quality)for(var n=0;n<i.length;n++)i[n].offername==GameGlobal.actorModel.name&&o.push(i[n]);else for(var n=0;n<i.length;n++){var a=GameGlobal.Config.ItemConfig[i[n].itemid];a&&a.quality==this.quality&&o.push(i[n])}var r=o.length;this.tipTxt.visible=0==r,this.conGroup.visible=r>0;var s=Math.ceil(r/4)>>0;this.pageBtn.setMax(s),this.curPage>s&&this.pageChangeFun(s),this.dataProvider.replaceAll(o),this.auctionList.dataProvider=this.dataProvider,r>0&&!TimerManager.ins().isExists(this.updateTime,this)&&this.AddTimer(1e3,0,this.updateTime)},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i,o=0,n=this.auctionList.numChildren;for(o=0;n>o;o++)i=this.auctionList.getChildAt(o),i.updateTime()},t.prototype.UpdateContent=function(){},t.prototype.OnClose=function(){TimerManager.ins().remove(this.updateTime,this)},t.aucType=0,t}(BaseView);__reflect(AuctionBasePanel.prototype,"AuctionBasePanel",["ICommonWindowTitle"]);var AuctionItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._price=0,t._offerprice=0,t._count=1,t.isMySelf=!1,t.isPost=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.selfImg.visible=!1,this.linkTxt.visible=!1,UIHelper.SetLinkStyleLabel(this.linkTxt,"可激活"),this.priceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.offerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.linkTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){var t=this;if(e.target==this.priceBtn){if(GameGlobal.AuctionModel.getRemainRatio()-this._price<=0)return void GameGlobal.AuctionModel.showAlert();WarnWin.show("是否花费 "+this._price+"元宝 立即拍下物品",function(){GameGlobal.AuctionModel.sendAuctionBuy(t.data.id,AuctionBasePanel.aucType)},this)}else if(e.target==this.offerBtn){if(this.isMySelf)return void GameGlobal.UserTips.showTips("您已出价，不需要重复出价");if(GameGlobal.AuctionModel.getRemainRatio()-this._offerprice<=0)return void GameGlobal.AuctionModel.showAlert();WarnWin.show("是否花费 "+this._offerprice+"元宝 参与竞价",function(){GameGlobal.AuctionModel.sendAuctionOffer(t.data.id,AuctionBasePanel.aucType)},this)}},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){this.isPost=!1;var t=this.data;this.selfImg.visible=GameGlobal.actorModel.name==t.playername,this.itemIcon.num=t.count,this.itemIcon.data=t.itemid,this._count=t.count,this.isMySelf=GameGlobal.actorModel.name==t.offername,this.playNameTxt.text=this.isMySelf?"我的竞价":t.offername;var i=t.HasOffer();this.priceicon.type=MoneyConst.yuanbao,this.priceicon.price=t.price*this._count,this.priceicon0.type=t.numerictype,this.priceicon0.price=t.dealprice*this._count,this._price=t.dealprice*this._count,this.priceicon1.type=t.numerictype,i?this._offerprice=(t.addprice+t.price)*this._count:this._offerprice=t.price*this._count,this.priceicon1.price=this._offerprice,this.descTxt.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.AuctionModel.getDescByStatus(t.status)),this.updateTime()}},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameServer.serverTime-this.data.createtime;this.timeTxt.textFlow=TextFlowMaker.generateTextFlow(this.getTimeByStatus(this.data.status,i))},t.prototype.getTimeByStatus=function(e,t){var i="已结束",o=0,n=Color.Blue;switch(e){case 1:o=GameGlobal.AuctionModel.getBaseConfig().showtime,n=Color.Blue;break;case 2:o=GameGlobal.AuctionModel.getBaseConfig().showtime+GameGlobal.AuctionModel.getBaseConfig().auctiontime,n=104196;break;case 3:o=GameGlobal.AuctionModel.getBaseConfig().showtime+GameGlobal.AuctionModel.getBaseConfig().auctiontime+GameGlobal.AuctionModel.getBaseConfig().robtime,n=Color.Red}return 3>=e&&(i="|C:"+n+"&T:"+DateUtils.format_1(1e3*(o-t))+"后结束|",0>=o-t&&(this.isPost||(GameGlobal.AuctionModel.sendAuctionUpdate(this.data.id,AuctionBasePanel.aucType),this.isPost=!0))),i},t}(eui.ItemRenderer);__reflect(AuctionItem.prototype,"AuctionItem");var ItemBaseData=function(){function e(){this.score=-1,this.handle=0,this.att=[]}return e.prototype.parser=function(e){if(null!=e){this.handle=e.handle,this.UpdateConfigId(e.id),this.count=e.count,this.att=[];for(var t=0,i=e.attrs;t<i.length;t++){var o=i[t],n=new AttributeData;n.parser(o),this.att.push(n)}}},e.prototype.ParserByEquipData=function(e){if(this.UpdateConfigId(e.id),this.configID?(this.handle=1,this.count=1):(this.handle=0,this.count=0),e.attrs){this.att=[];for(var t=0,i=e.attrs;t<i.length;t++){var o=i[t],n=new AttributeData;n.parser(o),this.att.push(n)}}},e.prototype.UpdateConfigId=function(e){this.score=-1,this.configID=e||0,e&&(this.itemConfig=GlobalConfig.ins().ItemConfig[e])},e.getStringByList=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=": ");for(var o="",n=0;n<e.length;n++)if(o+=e[n]+i,n<e.length-1)for(var a=0;t>a;a++)o+="\n";return o},e.getStringByNextList=function(e,t){for(var i="",o=0;o<e.length;o++)i+=e[o],t[o]&&(i+=t[o]),o<e.length-1&&(i+="\n");return i},e.prototype.GetScore=function(){return this.score<0&&(this.score=ItemConfig.calculateBagItemScore(this)),this.score},e.IsNotTimeLimitUse=function(e){if(e.useType==ItemUseType.TYPE01&&null!=e.useArg&&null!=e.useArg.timelimit)try{var t=DateUtils.StrToDate(e.useArg.timelimit);if(t&&.001*t.getTime()>=GameServer.serverTime)return!1}catch(i){}return!0},e}();__reflect(ItemBaseData.prototype,"ItemBaseData");var IBossInfo=function(){function e(){}return e.prototype.GetConfig=function(){},e}();__reflect(IBossInfo.prototype,"IBossInfo");var FieldBossInfo=function(){function e(){this.ownerId=0,this.status=3}return Object.defineProperty(e.prototype,"isDie",{get:function(){return this.status==FieldBossState.DEAD},enumerable:!0,configurable:!0}),e.prototype.IsClose=function(){return this.status==FieldBossState.CLOSE},e.prototype.GetConfig=function(){return GameGlobal.Config.FieldBossConfig[this.id]},e.prototype.GetState=function(){return GameGlobal.BossModel.IsChallengeTime()?this.status==FieldBossState.DEAD?FieldBossState.DEAD:FieldBossState.OPEN:FieldBossState.CLOSE},e.prototype.parser=function(e){this.id==e.id&&(this.hp=e.hp,this.status=e.status,this.ownerId=e.ownerId,this.ownerName=e.ownerName,this.ownerHeadId=parseInt(e.ownerJob+""+e.ownerSex),this.leftTime=e.time)},Object.defineProperty(e.prototype,"Weight",{get:function(){return GameGlobal.actorModel.level<this.level?1e4*this.id:this.status==FieldBossState.DEAD?1e3*this.id:this.id},enumerable:!0,configurable:!0}),e}();__reflect(FieldBossInfo.prototype,"FieldBossInfo");var FieldBossState;!function(e){e[e.OPEN=1]="OPEN",e[e.RUN=2]="RUN",e[e.DEAD=3]="DEAD",e[e.CLOSE=4]="CLOSE"}(FieldBossState||(FieldBossState={}));var ChatDataBase=function(){function e(){}return e.prototype.IsTipType=function(){return!0},e}();__reflect(ChatDataBase.prototype,"ChatDataBase");var DailyChargeIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.RECHARGE_DAILY_UPDATE,MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE,MessageDef.RECHARGE_UPDATE],i.firstTap=!0,i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=Deblocking.Check(DeblockingType.TYPE_126,!0)&&t.showIcon();return e||ViewManager.ins().isShow(DailyFirstChargeWin)&&ViewManager.ins().close(DailyFirstChargeWin),e},t.showIcon=function(){if(GameGlobal.RechargeModel.choicerechare>=0)return!1;var e=GameGlobal.RechargeModel.dailyId,t=GameGlobal.Config.DailyrechargeConfig[e];if(t){var i=0,o=GameGlobal.RechargeModel.dailyReward;for(var n in t){if(!BitUtil.Has(o,i))return!0;i++}}return!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.RechargeModel.dailyId,t=GameGlobal.Config.DailyrechargeConfig[e];if(t){var i=0,o=GameGlobal.RechargeModel.dailyRechare,n=GameGlobal.RechargeModel.dailyReward;for(var a in t){if(o>=t[a].recharge&&!BitUtil.Has(n,i))return!0;i++}}return!1},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(DailyFirstChargeWin)},t}(RuleIconBase);__reflect(DailyChargeIconRule.prototype,"DailyChargeIconRule");var FightPetFBIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataByType(ActivityKaiFuFuncType.ACT_22_OrangePetTarget);if(null==e)return!1;if(e.AllGotten())return!1;var t=e.id,i=GameGlobal.Config.ActivitySumBtnConfig;i[t]&&i[t].icon&&(this.iconDisplay.source=i[t].icon+"_zc");var o=Deblocking.Check(DeblockingType.TYPE_98,!0)&&e&&e.isOpenActivity();return o?this.setTime(1e3*e.endTime):this.setTime(0),o},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataByType(ActivityKaiFuFuncType.ACT_22_OrangePetTarget);return null==e?!1:e&&e.hasReward()?!0:t.mIsFirst?!0:!1},t.prototype.tapExecute=function(){t.mIsFirst=!1,t.Open()},t.Open=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataByType(ActivityKaiFuFuncType.ACT_22_OrangePetTarget);null!=e&&KaiFuActivityWin.Show(e.id)},t.mIsFirst=!0,t}(RuleIconBase);__reflect(FightPetFBIconRule.prototype,"FightPetFBIconRule");var FuliIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.RP_SIGN_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_125,!0)},t.prototype.checkShowRedPoint=function(){return GameGlobal.FuliModel.IsRedPoint()},t.prototype.tapExecute=function(){ViewManager.ins().open(FuliWin)},t}(RuleIconBase);__reflect(FuliIconRule.prototype,"FuliIconRule");var GodLotteryIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_117,!0)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(GodLotteryWin)},t}(RuleIconBase);__reflect(GodLotteryIconRule.prototype,"GodLotteryIconRule");var GodPetAwardIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.GODPETACTIVE_UPDATE_INFO],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return this.setTime(GameGlobal.GodPetActiveModel.GetEndtime()),Deblocking.Check(DeblockingType.TYPE_123,!0)&&GameGlobal.GodPetActiveModel.IsOpenActive()},t.prototype.checkShowRedPoint=function(){return GameGlobal.GodPetActiveModel.mRedPoint},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(GodPetActiveAwardWin)},t}(RuleIconBase);__reflect(GodPetAwardIconRule.prototype,"GodPetAwardIconRule");var GodPetLotteryIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.GODPETACTIVE_LOTTERY_NOTICE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_122,!0)&&GameGlobal.GodPetActiveModel.IsGodPetLotteryOpen()},t.prototype.checkShowRedPoint=function(){return GameGlobal.GodPetActiveModel.CanLottery()},t.prototype.tapExecute=function(){ViewManager.ins().open(GodPetActiveLotteryWin)},t}(RuleIconBase);__reflect(GodPetLotteryIconRule.prototype,"GodPetLotteryIconRule");var GrowUpIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.isFirstCharge=!1,i.firstTap=!0,i.updateMessage=[MessageDef.RECHARGE_FIRST_UPDATE,MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!Deblocking.Check(DeblockingType.TYPE_106,!0))return!1;this.isFirstCharge=!1;var e=GameGlobal.Config.FirstRechargeConfig;for(var t in e)if(!GameGlobal.RechargeModel.GetFirstRewardState(e[t].id)){this.isFirstCharge=!0;break}var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(11);return i&&i.isOpenActivity()?(0==i.status?this.setTime(1e3*i.endTime):this.setTime(0),!0):i&&i.canReward()?!0:!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.checkShowRedPoint=function(){return GameGlobal.GrowUpModel.checkGrowUpRedPoint()},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(GrowUpWin,this.isFirstCharge?1:0)},t}(RuleIconBase);__reflect(GrowUpIconRule.prototype,"GrowUpIconRule");var InvestmentIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.isFirstCharge=!1,i.firstTap=!0,i.updateMessage=[MessageDef.RECHARGE_FIRST_UPDATE,MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!Deblocking.Check(DeblockingType.TYPE_107,!0))return!1;this.isFirstCharge=!1;var e=GameGlobal.Config.FirstRechargeConfig;for(var t in e)if(!GameGlobal.RechargeModel.GetFirstRewardState(e[t].id)){this.isFirstCharge=!0;break}var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(12);return i&&i.isOpenActivity()?(0==i.status?this.setTime(1e3*i.endTime):this.setTime(0),!0):i&&i.canReward()?!0:!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(GrowUpWin,this.isFirstCharge?2:1)},t}(RuleIconBase);__reflect(InvestmentIconRule.prototype,"InvestmentIconRule");var JingCaiIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return GameGlobal.ActivityKaiFuModel.jingCaiIconRedPoin()},t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_133,!0)&&0!=GameGlobal.ActivityKaiFuModel.jingCai_huoDong().length?!0:!1},t.prototype.tapExecute=function(){ViewManager.ins().open(JingCaiActivityWin)},t}(RuleIconBase);__reflect(JingCaiIconRule.prototype,"JingCaiIconRule");var BaseScene=function(){function e(){}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){ViewManager.ins().closeAll()},e}();__reflect(BaseScene.prototype,"BaseScene");var RebateIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=[],t=GameGlobal.Config.ActivitySumBtnConfig;for(var i in t)if(5==t[Number(i)].openId){e.push(Number(i));var o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(Number(i));o&&o.openState&&(this.id=Number(i))}var n=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.id),a=Deblocking.Check(DeblockingType.TYPE_132,!0)&&n&&n.isOpenActivity();return a?this.setTime(1e3*n.endTime):this.setTime(0),a},t.prototype.checkShowRedPoint=function(){return RechargeRebatePanel.CheckRedPoint(this.id)},t.prototype.tapExecute=function(){ViewManager.ins().open(RechargeRebateMainPanel)},t}(RuleIconBase);__reflect(RebateIconRule.prototype,"RebateIconRule");var SevenDayIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_ADVANCED_INFO,MessageDef.ACTIVITY_UPDATE,MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_DABIAO_UPDATE,MessageDef.ACTIVITY_RACE_HISTORY,MessageDef.ACTIVITY_IS_GET_AWARDS],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=Deblocking.Check(DeblockingType.TYPE_103,!0)&&GameGlobal.ActivityKaiFuModel.hasActivityQiTian();return e},t.prototype.checkShowRedPoint=function(){return GameGlobal.ActivityKaiFuModel.RedPointQiTian()},t.prototype.tapExecute=function(){KaiFuActivityWin.Show()},t}(RuleIconBase);__reflect(SevenDayIconRule.prototype,"SevenDayIconRule");var ShootUpIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=t.CheckShow();return e?this.setTime(GameServer.dayEndTime):this.setTime(0),e},t.CheckShow=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(10);if(e){var t=e.GetConfig()[e.runday-1];return t&&e&&e.isOpenActivity()&&!e.GetRecordByIndex()&&Deblocking.Check(DeblockingType.TYPE_105,!0)?!0:!1}},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(10);return e&&e.isOpenActivity()?e.hasReward():!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(ShootUpPanel)},t.Open=function(){return t.CheckShow()?void ViewManager.ins().open(ShootUpPanel):void UserTips.InfoTip("活动已经关闭")},t}(RuleIconBase);__reflect(ShootUpIconRule.prototype,"ShootUpIconRule");var TreasureIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.LUCK_RECORD],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_111,!0)?!0:!1},t.prototype.checkShowRedPoint=function(){return t.mIsFirst||GameGlobal.TreasureHuntModel.IsFree()?!0:!1},t.prototype.tapExecute=function(){t.mIsFirst=!1,ViewManager.ins().open(TreasureHuntMainPanel)},t.prototype.getEffName=function(e){return this.DefEffe(1)},t.mIsFirst=!0,t}(RuleIconBase);__reflect(TreasureIconRule.prototype,"TreasureIconRule");var XuannvBefallIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.updateMessage=[MessageDef.UPDATA_VIP_AWARDS],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return t.CheckShow()},t.CheckShow=function(){return Deblocking.Check(212,!0)&&!BitUtil.Has(UserVip.ins().state,GameGlobal.Config.GuideBaseConfig.viplv)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(HavingShow)},t.AutoCheckShow=function(){if(!GameServer.ETNER_GAME_TIME)return!1;if(FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SHOW_XUANNV))return!1;if(!t.CheckShow())return!1;var e=GameGlobal.RechargeModel.rechargeNum;return e>0&&200>e&&GameGlobal.RechargeModel.firsttime&&GameServer.serverTime-GameServer.ETNER_GAME_TIME>600&&GameServer.serverTime-GameGlobal.RechargeModel.firsttime>1800?!0:!1},t.AutoShow=function(){this.AutoCheckShow()&&ViewManager.ins().open(HavingShow)},t}(RuleIconBase);__reflect(XuannvBefallIconRule.prototype,"XuannvBefallIconRule");var XuannvBefallIconRule2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return DiscountRule.CheckShow()?!1:e.prototype.checkShowIcon.call(this)},t}(XuannvBefallIconRule);__reflect(XuannvBefallIconRule2.prototype,"XuannvBefallIconRule2");var RechargeRebatePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="RechargeRebateSkin",t}return __extends(t,e),t.CheckRedPoint=function(e){return e?GameGlobal.ActivityKaiFuModel.GetActivityDataById(e).isRedPoint():!1},t.prototype.childrenCreated=function(){this.list.itemRenderer=RebateItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.avtiviteId=e[0];var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.avtiviteId);this.countDownTxt.text="剩余时间:"+ActivityBaseData.GetTimeStr(i.endTime-GameServer.serverTime),this.observe(MessageDef.ACTIVITY_UPDATE,this.updateContent),GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.avtiviteId).redPoint=!1,this.updateContent()},t.prototype.updateContent=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.avtiviteId),t=CommonUtils.GetArray(GameGlobal.Config.ActivityType27Config[this.avtiviteId],"money"),i=function(t){for(var i=0,o=e.cloutArr;i<o.length;i++){var n=o[i];if(n.no==t.orderid&&n.num>=t.frequency)return t.money+1e5}return t.money};t.sort(function(e,t){return i(e)-i(t)}),this.list.dataProvider=new eui.ArrayCollection(t)},t}(BaseView);__reflect(RechargeRebatePanel.prototype,"RechargeRebatePanel");var RebateItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RechargeRebateItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.rechargeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},t.prototype.dataChanged=function(){this.item.data=this.data.money3[0],this.percentTxt.textFlow=TextFlowMaker.generateTextFlow(this.data.percentage),this.tipsTxt.text="单笔充值："+this.data.money+"元",this.updateCount()},t.prototype.updateCount=function(){for(var e=0,t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.data.Id),i=(GameGlobal.Config.ActivityType27Config[this.data.Id],0),o=t.cloutArr;i<o.length;i++){var n=o[i];n.no==this.data.orderid&&(e=n.num)}e>=this.data.frequency?(this.countTxt.textColor=Color.Red,this.countTxt.text="今日限购次数已满",this.rechargeBtn.filters=Color.GetFilter(),this.rechargeBtn.touchEnabled=!1):(this.countTxt.text="每天限购"+e+"/"+this.data.frequency+"次",this.countTxt.textColor=Color.l_green_1,this.rechargeBtn.touchEnabled=!0,this.rechargeBtn.filters=null)},t.prototype.tap=function(){GameGlobal.RechargeModel.sendRecharge(this.data.orderid)},t}(eui.ItemRenderer);__reflect(RebateItem.prototype,"RebateItem");var DailyResRetrievePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="DailyResRetrieveSkin",t.mType=DailyConst.TASK_RETRIEVE_COST_BINDGOD,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ResRetrieveItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.DAILY_RETRIEVELIST_UPDATE,this.UpdateContent)},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){GameGlobal.DailyModel.RecordResRetrieveFlag(this.mType,!0),GameGlobal.DailyModel.mResRetrieveType=this.mType;var e=GameGlobal.DailyModel.GetRetrieveResListByType(GameGlobal.DailyModel.mResRetrieveType);this.list.dataProvider=new eui.ArrayCollection(e)},t.NAME="绑元找回",t}(BaseView);__reflect(DailyResRetrievePanel.prototype,"DailyResRetrievePanel",["ICommonWindowTitle"]);var ResRetrieveItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnRetrieve.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnRetrieveBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.Config.DailyProgressConfig[e.mTaskId];this.labText.text=t.name+"（可找回"+e.mCount+"次）";var i=DailyConst.GetRetrieveConfig(e.mTaskId,GameGlobal.DailyModel.mResRetrieveType,DailyConst.TASK_RETRIEVE_TYPE_RES);this.priceIcon.type=i.cost[0].id,this.priceIcon.price=i.cost[0].count;for(var o=1,n=0,a=i.res;n<a.length;n++){var r=a[n],s="item"+o;this[s]&&(this[s].visible=!0,this[s].setItemAward(r.type,r.id,r.count)),o++}},t.prototype._OnRetrieveBtnClick=function(){ViewManager.ins().open(DailyRetrievePopWin,this.data,GameGlobal.DailyModel.mResRetrieveType,DailyConst.TASK_RETRIEVE_TYPE_RES)},t}(eui.ItemRenderer);__reflect(ResRetrieveItem.prototype,"ResRetrieveItem");var ForgePanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.lv=0,t.mLevelList=[],t.mIsUpdate=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.equipComp.consumeLabel.mIsImg=!0,UIHelper.SetLinkStyleLabel(this.equipComp.getwayLabel)},t.prototype.UpdateContent=function(){this.UpdateConsumeLabel(),this.UpdateMasterValue()},t.prototype.OnOpen=function(){var e=GameGlobal.SubRoles.GetRoleData();if(e){this.UpdateAllItem(),this.mSelectIndex=e.getMinEquipIndexByType(this.mForgeType),this.UpdateSel(this.mSelectIndex),this.UpdateContent();var t=this.GetConsumeValue(),i="";if(t){var o=GameGlobal.Config.ItemConfig[t.id];o&&(i="获取"+o.name)}UIHelper.SetLinkStyleLabel(this.equipComp.getwayLabel,i)}},t.prototype.OnClose=function(){this._StopUpgradeAnim()},t.prototype.UpdateConsumeLabel=function(){var e=this.equipComp.consumeLabel,t=this.GetConsumeValue();t&&(e.consumeItemId=t.id,0==t.type?(e.overLengthFlag=!0,e.curValue=GameGlobal.actorModel.gold,e.consumeValue=t.count):(e.overLengthFlag=!1,e.curValue=GameGlobal.UserBag.GetCount(t.id),e.consumeValue=t.count))},t.prototype.UpdateMasterValue=function(){this.equipComp.powerLabel.text=GameGlobal.SubRoles.GetRoleData().getForgeTotalPower(this.mForgeType),ForgeViewHelper.UpdateMasterBtn(this.mForgeType,this.equipComp.masterBtn)},t.prototype.UpdateSelAnim=function(){var e=GameGlobal.SubRoles.GetRoleData(),t=(this.mSelectIndex+1)%EquipPos.MAX,i=e.getEquipByIndex(t),o=this.GetForgeValue(i);this.mSelectIndex=t,o==this.mLevelList[t]&&this._StopUpgradeAnim(),this.UpdateSel(this.mSelectIndex)},t.prototype.UpdateForge=function(){var e=GameGlobal.SubRoles.GetRoleData(),t=this.GetForgeValue(e.getEquipByIndex(this.mSelectIndex));t!=this.mLevelList[this.mSelectIndex]&&(this.UpdateSel(this.mSelectIndex),this._PlayUpgradeAnim())},t.prototype.UpdateAllItem=function(){var e=GameGlobal.SubRoles.GetRoleData();if(e)for(var t=0;t<this.equipComp.itemGroup.numChildren;t++){var i=e.getEquipByIndex(t);if(i){var o=this.equipComp.itemGroup.getChildAt(t),n=this.GetForgeValue(i);this.mLevelList[t]=n,o.starLevel.text="+"+n}}},t.prototype.UpdateSel=function(e){for(var t=GameGlobal.SubRoles.GetRoleData(),i=0;i<this.equipComp.itemGroup.numChildren;i++)this.equipComp.itemGroup.getChildAt(i).selectImg.visible=e==i;var o=t.getEquipByIndex(e),n=this.GetForgeValue(o);if(this.mLevelList[e]!=n){var a=this.equipComp.itemGroup.getChildAt(e);a.eff=new MovieClip,a.eff.loadUrl(ResDataPath.GetUIEffePath2("ui_eff_qh_001"),!0,1),a.eff.x=a.width>>1,a.eff.y=a.height>>1,a.addChild(a.eff)}this.mLevelList[e]=n,this.equipComp.itemGroup.getChildAt(e).starLevel.text="+"+n,this.lv=n,this.config=GameGlobal.ForgeModel.GetForgeConfigByPos(e,n,this.mForgeType),this.nextConfig=GameGlobal.ForgeModel.GetForgeConfigByPos(e,n+1,this.mForgeType);var r=this.nextConfig?!1:!0;this.equipComp.upGroup.visible=!r,this.equipComp.fullLabel.visible=r,this.SetAttrData(this.config,this.nextConfig)},t.prototype.SetAttrData=function(e,t){},t.prototype.GetForgeValue=function(e){return 0},t.prototype.CheckUpgrade=function(){var e=this.GetConsumeValue();return e?0==e.type?Checker.Money(e.id,e.count):GameGlobal.UserBag.GetCount(e.id)>=e.count?!0:!1:!1},t.prototype.SendUpgrade=function(){this.mIsUpdate||GameGlobal.ForgeModel.SendUpGrade(this.mForgeType)},t.prototype._PlayUpgradeAnim=function(){this.mIsUpdate||(this.mIsUpdate=!0,this.AddTimer(100,0,this.UpdateSelAnim))},t.prototype._StopUpgradeAnim=function(){this.mIsUpdate&&(this.mIsUpdate=!1,TimerManager.ins().remove(this.UpdateSelAnim,this),this.UpdateContent())},t.prototype.GetConsumeValue=function(){var e=GameGlobal.SubRoles.GetRoleData(),t=e.GetMinEquipIndexAndLevel(this.mForgeType),i=(t[0],t[1]),o=GameGlobal.ForgeModel.GetConfigCostData(this.mForgeType,i+1);return o?o.cost:null},t}(BaseView);__reflect(ForgePanel.prototype,"ForgePanel",["ICommonWindowTitle"]);var FuliActivationCodePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliActivationCodeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tab=GameGlobal.Config.WelfareBaseConfig,this._AddClick(this.receiveBtn,this._OnClick),this._AddClick(this.inputText,this._OnClick),this.observe(MessageDef.FULI_GET_REDEEMCODE,this.msgPrompt)},t.prototype.OnOpen=function(){},t.prototype.UpdateContent=function(){},t.prototype.msgPrompt=function(e){if(void 0!=e.ret&&null!=e.ret){var t="";switch(e.ret){case 0:this.inputText&&(this.inputText.text="",t="激活码礼包兑换成功，请去邮箱查看领取！");break;case-1:t="不存在激活码";break;case 1:t="不存在激活码";break;case 2:t="不存在的礼包";break;case 3:t="激活码已使用";break;case 4:t="已兑换相同礼包";break;case 5:t="验证失败";break;case 6:t="激活码已过期";break;default:t=e.ret+""}UserTips.ins().showTips(t)}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.receiveBtn:var t=this.inputText.text;""!=t&&GameGlobal.FuliModel.SendRedeemCode(t);break;case this.inputText:}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FuliActivationCodePanel.prototype,"FuliActivationCodePanel");var FuliForeverCardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliForeverCardSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnBuy,this._OnClick),this.observe(MessageDef.FULI_GET_GIFT_SUCCEED,this.UpdateContent)},t.prototype.OnOpen=function(){this.labDesc1.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.Config.WelfareBaseConfig.tips12),this.labDesc2.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.Config.WelfareBaseConfig.tips13),this.labUpDesc1.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.Config.WelfareBaseConfig.tips14),this.labUpDesc2.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.Config.WelfareBaseConfig.tips15),this.labBagDesc1.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.Config.WelfareBaseConfig.tips16),this.UpdateContent()},t.prototype.UpdateContent=function(){this.btnBuy.visible=!GameGlobal.FuliModel.FuliData.foreverFlag,this.labTip.visible=!this.btnBuy.visible},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnBuy:RechargeWin.OpenMonthCard()}},t.prototype.OnClose=function(){},t}(BaseEuiView);__reflect(FuliForeverCardPanel.prototype,"FuliForeverCardPanel");var FuliGiveGoldMainPanel=function(e){function t(){var t=e.call(this)||this;return t.labArr=[],t.skinName="FuliGiveGoldMainSkin",t}return __extends(t,e),t.CheckRedPoint=function(){return GameGlobal.FuliModel.mRedPoint.GoldShowRedPoint()},t.prototype.childrenCreated=function(){this.tab=GameGlobal.Config.PresentGoldConfig,this.observe(MessageDef.FULI_GIVEGOLD_INFO,this.UpdateItemList)
},t.prototype.OnOpen=function(){this.itemList.itemRenderer=GiveGoldListItem,this.UpdateItemList()},t.prototype.UpdateItemList=function(){var e=CommonUtils.GetArray(this.tab,"id"),t=function(e){var t=e.id;return GameGlobal.FuliModel.isReceiveGold(t)?t+1e5:t};e.sort(function(e,i){return t(e)-t(i)}),this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemList.dataProvider=new eui.ArrayCollection(e)},t.prototype._OnClick=function(e){e.currentTarget},t.prototype.OnClose=function(){this.removeObserve()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FuliGiveGoldMainPanel.prototype,"FuliGiveGoldMainPanel");var GiveGoldListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.receiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.msg=GameGlobal.FuliModel.FuliData},t.prototype.dataChanged=function(){var e=this.msg.addDayCount,t=this.data;this.addDayLaberl.text="累计登陆"+t.days+"天",this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemList.dataProvider=new eui.ArrayCollection(t.item),this.dayLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0xFE0203>"+e+"天/</a>"+t.days+"天"),t.id,e>=t.days?(this.dayLabel.visible=!1,1==GameGlobal.FuliModel.isReceiveGold(t.id)?(this.receiveBtn.visible=!1,this.itemGetImg.visible=!0):(this.receiveBtn.visible=!0,this.itemGetImg.visible=!1)):(this.dayLabel.visible=!0,this.receiveBtn.visible=!1,this.itemGetImg.visible=!1)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.receiveBtn:this.receiveBtn.visible=!1,this.itemGetImg.visible=!0,GameGlobal.FuliModel.GiveGold(this.data.id)}},t}(eui.ItemRenderer);__reflect(GiveGoldListItem.prototype,"GiveGoldListItem");var FuliGoldTreePanel=function(e){function t(){var t=e.call(this)||this;return t.keyMax=0,t.boxIndex=1,t.str="",t.isShowVIPLabel=!0,t.scale=0,t.needCount=0,t.skinName="FuliGoldTreeSkin",t}return __extends(t,e),t.CheckRedPoint=function(){return GameGlobal.FuliModel.mRedPoint.IsGoldTree()||GameGlobal.FuliModel.mRedPoint.IsGodTreeBox()},t.prototype.childrenCreated=function(){this._AddClick(this.goBtn,this._OnClick),this._AddClick(this.boxImg,this._OnClick),this.tab_CashCowLimitConfig=GameGlobal.Config.CashCowLimitConfig,this.tab_CashCowBasicConfig=GameGlobal.Config.CashCowBasicConfig,this.tab_CashCowAmplitudeConfig=GameGlobal.Config.CashCowAmplitudeConfig,this.tab_CashCowBoxConfig=GameGlobal.Config.CashCowBoxConfig;for(var e in this.tab_CashCowLimitConfig)0!=Number(e)&&this.keyMax++},t.prototype.OnOpen=function(){this.observe(MessageDef.FULI_GOLDTREE_INFO,this.update),this.observe(MessageDef.VIP_LEVEL_CHANGE,this.update),this.vipLabel(),this.showNendMoney(),this.UpdateImgShow(),this.showBox(),this.updateLabel()},t.prototype.vipLabel=function(){this.vipLv=UserVip.ins().lv;var e=this.vipLv+1;if(e>=this.keyMax)return e=this.keyMax,this.vipCountLabel.visible=!1,void(this.isShowVIPLabel=!1);var t=this.tab_CashCowLimitConfig[e].maxTime-this.tab_CashCowLimitConfig[this.vipLv].maxTime;e==this.vipLv&&(this.vipCountLabel.visible=!1),void 0==this.tab_CashCowLimitConfig[e]&&(e=UserVip.ins().lv),this.vipCountLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>vip"+e+"可额外再摇</a><a color=0x00AD00>"+t+"次</a>"),this.str="<a color=0x6E330B>提升至vip"+e+",可额外再摇</a><a color=0x00AD00>"+t+"次</a>"},t.prototype.update=function(){this.UpdateImgShow(),this.showNendMoney(),this.vipLabel(),this.showBox(),this.updateLabel()},t.prototype.UpdateImgShow=function(){var e=this;this.ImgBg.visible=!0,2==GameGlobal.FuliModel.FuliData.odds?(this.imgSource(this.describeImg2,this.describeImg3,this.describeImg0,this.describeImg1,"2beibaoji","tudigong"),this.playerLogoImg.source="ui_fldt_tudigong"):4==GameGlobal.FuliModel.FuliData.odds?(this.imgSource(this.describeImg2,this.describeImg3,this.describeImg0,this.describeImg1,"4beibaoji","xingyunshen"),this.playerLogoImg.source="ui_fldt_xingyunshen"):8==GameGlobal.FuliModel.FuliData.odds?(this.imgSource(this.describeImg2,this.describeImg3,this.describeImg0,this.describeImg1,"8beibaoji","fushen"),this.playerLogoImg.source="ui_fldt_fushen"):10==GameGlobal.FuliModel.FuliData.odds?(this.imgSource(this.describeImg2,this.describeImg3,this.describeImg0,this.describeImg1,"10beibaoji","caishen"),this.playerLogoImg.source="ui_fldt_caishen"):this.imgNotShow(),""!=this.playerLogoImg.source&&(this.goBtn.enabled=!1,this.nowPlayerEff(),this.playerLogoImg.scaleY=this.playerLogoImg.scaleX=0,egret.Tween.get(this.playerLogoImg).to({scaleY:1.1,scaleX:1.1},700).to({scaleY:.9,scaleX:.9},200).wait(1500).call(function(){e.imgNotShow(1),e.goBtn.enabled=!0,void 0!=e.eff&&(e.playerEffGroup.removeChild(e.eff),e.eff=null)},this))},t.prototype.nowPlayerEff=function(){this.eff||(this.eff=new MovieClip,this.eff.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_hyui_001"),!0,0),this.eff.x=this.playerLogoImg.x-25,this.eff.y=this.playerLogoImg.y-80,this.eff.scaleX=1,this.eff.scaleY=1,this.playerEffGroup.addChild(this.eff),this.playerEffGroup.setChildIndex(this.eff,0))},t.prototype.showEff=function(){this.scale+=.1,this.playerLogoImg.scaleY=this.playerLogoImg.scaleX=this.scale,this.scale>=1&&(this.scale=0,this.goBtn.visible=!0)},t.prototype.imgNotShow=function(e){void 0==e?(this.describeImg0.source="",this.describeImg1.source="",this.describeImg2.source="",this.describeImg3.source="",this.playerLogoImg.source="",this.ImgBg.visible=!1):(this.describeImg2.source="",this.describeImg3.source="",this.playerLogoImg.source="",this.ImgBg.visible=!0)},t.prototype.imgSource=function(e,t,i,o,n,a){e.source="ui_fldt_bm_"+a+"01",t.source="ui_fldt_bm_"+n,i.source="ui_fldt_bm_"+a+"01",o.source="ui_fldt_bm_"+n},t.prototype.showNendMoney=function(){this.shake=GameGlobal.FuliModel.FuliData.shake+1;var e=this.tab_CashCowBasicConfig[this.shake].yuanbao;if(0==e)this.consumeLabel.visible=!1,this.freeLabel.visible=!0;else{this.freeLabel.visible=!1,this.consumeLabel.visible=!0;var t={};t.type=0,t.id=2,t.count=e;var i=[];i.push(t),this.consumeLabel.Set(i)}},t.prototype.updateLabel=function(){this.countLabel.visible=!0,this.label2.visible=!0,this.ReceiveLabel.visible=!0,this.vipMax=this.tab_CashCowLimitConfig[this.vipLv].maxTime;var e=GameGlobal.FuliModel.FuliData.shake;this.nowCountLabel.text="今日次数:"+e+"/"+this.vipMax;var i=GameGlobal.FuliModel.FuliData.amplitude,o=CommonUtils.overLength(Math.floor(this.tab_CashCowBasicConfig[this.shake].gold*i/100)),n="",a=GameGlobal.FuliModel.FuliData.odds;a&&t.ODDS[a]&&(n=" * "+a+" "),this.acquisitionLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>立即获得</a> <a color=0xFFeb04>"+o+n+"</a> <a color=0x6E330B>银两</a>");var r=GameGlobal.FuliModel.FuliData.level+1,s=this.tab_CashCowAmplitudeConfig[r].needExp,l=this.tab_CashCowBoxConfig[this.boxIndex+1].time;this.needCount=l-e,this.countLabel.text=this.needCount+"次",this.needCount<=0?(this.countLabel.visible=!1,this.label2.visible=!1,UIHelper.ShowRedPoint(this.boxImg,!0)):UIHelper.ShowRedPoint(this.boxImg,!1);var c=GameGlobal.FuliModel.FuliData.drawBin.length;4==GameGlobal.FuliModel.FuliData.drawBin[c-1]&&(this.ReceiveLabel.visible=!1,UIHelper.ShowRedPoint(this.boxImg,!1)),this.surplusCountLabel.text=GameGlobal.FuliModel.FuliData.exp+"/"+s,this.addLabel.text="加成"+i+"%"},t.prototype.showBox=function(){this.boxIndex=0;for(var e=GameGlobal.FuliModel.FuliData.drawBin,t=!1,i=0;i<e.length;i++){if(2==e[i]||3==e[i]){this.boxIndex=i,t=!1;break}t=!0}1==t&&(this.boxIndex=e.length-1)},t.prototype.Play=function(){var e=new GoldFlyEff;e.mGap=50,e.mCount=16,e.mMax=16,e.mSource="ui_bm_qianb2";var t=egret.$TempPoint;DisplayUtils.GetGlobalPos(this.effGroup,t);var i=new egret.Point;i.x=100,i.y=0;var o=ViewManager.ins().getView(MainTopPanel);o&&DisplayUtils.GetGlobalPos(o.god,i),e.Play(new egret.Rectangle(t.x,t.y,this.effGroup.width,this.effGroup.height),i.x,i.y)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.goBtn:if(GameGlobal.FuliModel.FuliData.shake<this.vipMax){var t=this.tab_CashCowBasicConfig[this.shake].yuanbao;Checker.Money(2,t,!0)&&(this.Play(),GameGlobal.FuliModel.playGold())}else 1==this.isShowVIPLabel&&ViewManager.ins().open(FuliGoldTreeVipPanel,this.str);break;case this.boxImg:3==GameGlobal.FuliModel.FuliData.drawBin[this.boxIndex]?GameGlobal.FuliModel.playGoldBox(this.boxIndex+1):ViewManager.ins().open(FuliGoldTreeItemPanel,this.boxIndex,this.needCount)}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t.ODDS=(_a={},_a[2]=!0,_a[4]=!0,_a[8]=!0,_a[10]=!0,_a),t}(BaseEuiView);__reflect(FuliGoldTreePanel.prototype,"FuliGoldTreePanel");var _a,FuliLvGiftBagPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliLvGiftBagSkin",t.list.itemRenderer=FuliliLvGiftBagItem,t}return __extends(t,e),t.CheckRedPoint=function(){return GameGlobal.FuliModel.mRedPoint.lvShowRedPoint()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.FULI_GET_GIFT_SUCCEED,this.UpdateContent),this.observe(MessageDef.LEVEL_CHANGE,this.UpdateList),this.UpdateContent();for(var i=GameGlobal.Config.LvRewardConfig,o=0,n=i;o<n.length;o++){var a=n[o];if(GameGlobal.actorModel.level<a.level){this.giftLv=a.level;break}}},t.prototype.UpdateContent=function(){var e=[],t=[];for(var i in GameGlobal.Config.LvRewardConfig){var o={};o=GameGlobal.Config.LvRewardConfig[i],o.tips=GameGlobal.Config.LvRewardConfig[i].level+"级礼包",BitUtil.Has(GameGlobal.FuliModel.FuliData.lvMark,o.id)?e.push(o):t.push(o)}SortTools.sortMap(e,"level",!1),SortTools.sortMap(t,"level"),this.list.dataProvider=new eui.ArrayCollection(t.concat(e)),this.UpdateList()},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t}(BaseView);__reflect(FuliLvGiftBagPanel.prototype,"FuliLvGiftBagPanel");var FuliliLvGiftBagItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliSignBoardItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){this.tipsTxt.text=this.data.tips,this.list.dataProvider=new eui.ArrayCollection(this.data.reward),this.getGiftSucceed()},t.prototype.getGiftSucceed=function(){this.currentState=GameGlobal.actorModel.level>=this.data.level?(GameGlobal.FuliModel.FuliData.lvMark&1<<this.data.id)<1?"normal":"get":"maylv",this.maylvTxt.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.actorModel.level+"级 / |C: "+Color.l_brown_2+"&T:"+this.data.level+"级")},t.prototype.onClick=function(){GameGlobal.FuliModel.sendLvGiftBag(this.data.id)},t}(eui.ItemRenderer);__reflect(FuliliLvGiftBagItem.prototype,"FuliliLvGiftBagItem");var FuliMonthlyCardPanel=function(e){function t(){var t=e.call(this)||this;return t.labArr=[],t.comArr=[],t.skinName="FuliMonthlyCardSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tab=GameGlobal.Config.WelfareBaseConfig,this.labArr=[this.lab0,this.lab1,this.lab2,this.lab3,this.lab4,this.lab5,this.lab6],this.comArr=[this.l0,this.l1,this.l2,this.l3],this.observe(MessageDef.FULI_MONTH_WEEK_CHANGE,this.updateBtnTOLabel),this.observe(MessageDef.FULI_MONTH_WEEK_CHANGE,this.updateListShow),this._AddClick(this.buyBtn,this._OnClick),this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=0;7>e;e++){var t=this.tab["tips0"+(e+1)];this.labArr[e].textFlow=TextFlowMaker.generateTextFlow(t)}var i=GameGlobal.FuliModel.FuliData.month;void 0!=i&&null!=i&&(this.dayLabel.textFlow=(new egret.HtmlTextParser).parser("剩余有效期<a color=0x019704>"+i+"天</a>"),0==i?(this.buyBtn.visible=!0,this.dayLabel.visible=!1):(this.buyBtn.visible=!1,this.dayLabel.visible=!0)),this.updateListShow()},t.prototype.updateListShow=function(){var e=GameGlobal.FuliModel.FuliData.firstMonth,t=GameGlobal.Config.CardConfig[1].firstreward;0!=e&&void 0!=t?(this.comArr[3].visible=!1,this.comArr[0].y=-21,this.comArr[1].y=164,this.comArr[2].y=349):(this.comArr[3].visible=!0,this.itemList.dataProvider=new eui.ArrayCollection(t),this.comArr[3].y=-21,this.comArr[0].y=164,this.comArr[1].y=349,this.comArr[2].y=534)},t.prototype.updateBtnTOLabel=function(){var e=GameGlobal.FuliModel.FuliData.month;e>0&&(this.buyBtn.visible=!1,this.dayLabel.visible=!0,this.dayLabel.textFlow=(new egret.HtmlTextParser).parser("剩余有效期<a color=0x019704>"+e+"天</a>"))},t.prototype.UpdateContent=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.buyBtn:RechargeWin.OpenMonthCard()}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FuliMonthlyCardPanel.prototype,"FuliMonthlyCardPanel");var FuliNoticePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliLvNoticeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GlobalConfig.ins().NoticeConfig[1].notice||"";this.lbNotice.textFlow=TextFlowMaker.generateTextFlow(e)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FuliNoticePanel.prototype,"FuliNoticePanel");var FuliPracticePanel=function(e){function t(){var t=e.call(this)||this;return t.myScore=0,t.lv=0,t.distanceLv=0,t.tabID=1,t.showType=2,t.index=1,t.isOwn=!1,t.skinName="FuliPracticeSkin",t}return __extends(t,e),t.CheckRedPoint=function(){return Deblocking.Check(GameGlobal.Config.WelfareBaseConfig.opentype,!0)?GameGlobal.FuliModel.mRedPoint.PracticeShowRedPoint():!1},t.prototype.childrenCreated=function(){this.welfareBaseConfigTab=GameGlobal.Config.WelfareBaseConfig,this.welfareConfigTab=GameGlobal.Config.WelfareConfig,this.data=GameGlobal.FuliModel.FuliData,this.lv=GameGlobal.actorModel.level,this.distanceLv=this.data.avgLv-this.lv,this.distanceLv<=3?this.showType=1:this.showType=2;for(var e in this.welfareConfigTab){var t=this.welfareConfigTab[e].level;if(2==t.length){if(this.lv>=t[0]&&this.lv<=t[1]){this.tabID=Number(e);break}}else this.tabID=Number(e)}this._AddClick(this.questionBtn,this._OnClick),this._AddClick(this.receiveBtn,this._OnClick),this._AddClick(this.gotoLab,this._OnClick),this._AddClick(this.boxImg0,this._OnClick),this._AddClick(this.boxImg1,this._OnClick),this._AddClick(this.boxImg2,this._OnClick)},t.prototype.OnOpen=function(){this.observe(MessageDef.FULI_GET_RECEIVEITEMSIGN,this.updateItemSign);var e=GameGlobal.DailyModel.baseInfo;this.myScore=e.mCurActive,this.score.text=this.myScore.toString(),this.worldClassLab.text=this.data.avgLv.toString(),this.progressBar.value=this.myScore;var t=this.welfareBaseConfigTab.score;this.progressBar.maximum=t[t.length-1],this.itemGetImg.visible=!1,1==this.showType?this.item.setItemData(this.welfareConfigTab[this.tabID].goldreward[0]):this.item.setItemData(this.welfareConfigTab[this.tabID].expreward[0]),this.myScore<t[0]&&(this.index=1);for(var i=0;i<t.length;i++)this["gainedImg"+i].visible=!1,1==GameGlobal.FuliModel.isReceive(i+1)&&(this["gainedImg"+i].visible=!0),this.myScore>=t[i]&&(0==GameGlobal.FuliModel.isReceive(i+1)?this.index=i+1:i>0&&(0==GameGlobal.FuliModel.isReceive(i)?this.index=i:this.index=i+1));this.isItemGetImg(this.index),this.isShowSelectBoxImg(this.index),this.showTop1Panel(),this.isOwnTF(this.welfareBaseConfigTab.score[0])},t.prototype.showTop1Panel=function(){for(var e=0;e<this.data.rankData.length;e++){var t=16734464;0==e&&(t=16734464),1==e&&(t=11479991),2==e&&(t=5926631),4>e+1&&(RoleComponent.setlv(this["top"+(e+1)+"Panel"],this.data.rankData[e].level,t),this["top"+(e+1)+"Panel"].setName(this.data.rankData[e].name,t),RoleComponent.SetShowImage(this["top"+(e+1)+"Panel"],this.data.rankData[e].job,this.data.rankData[e].sex,this.data.rankData[e].shows))}},t.prototype.updateItemSign=function(e){if(e.ret&&GameGlobal.FuliModel.isReceive(this.index)){var t=this.index-1;this["gainedImg"+t].visible=!0,this.itemGetImg.visible=!0}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.receiveBtn:0==this.isOwn?UserTips.ins().showTips("活跃度不足"):GameGlobal.FuliModel.ReceiveItem(this.index);break;case this.questionBtn:ViewManager.ins().open(ActivityDescPanel,this.welfareBaseConfigTab.welfarehelpinfo);break;case this.gotoLab:ViewManager.ins().close(t),ViewManager.ins().open(DailyMainWin);break;case this.boxImg0:this.isOwnTF(this.welfareBaseConfigTab.score[0]),this.index=1,this.isItemGetImg(this.index),this.isShowSelectBoxImg(this.index);break;case this.boxImg1:this.isOwnTF(this.welfareBaseConfigTab.score[1]),this.index=2,this.isItemGetImg(this.index),this.isShowSelectBoxImg(this.index);break;case this.boxImg2:this.isOwnTF(this.welfareBaseConfigTab.score[2]),this.index=3,this.isItemGetImg(this.index),this.isShowSelectBoxImg(this.index)}},t.prototype.isOwnTF=function(e){return this.myScore=GameGlobal.DailyModel.baseInfo.mCurActive,this.myScore>=e?this.isOwn=!0:this.isOwn=!1,this.isOwn},t.prototype.isItemGetImg=function(e){1==GameGlobal.FuliModel.isReceive(e)?this.itemGetImg.visible=!0:this.itemGetImg.visible=!1},t.prototype.isShowSelectBoxImg=function(e){this.selectBoxImg0.visible=!1,this.selectBoxImg1.visible=!1,this.selectBoxImg2.visible=!1;var t=e-1;this["selectBoxImg"+t].visible=!0},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FuliPracticePanel.prototype,"FuliPracticePanel");var RoleComponent=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShowPanelSkin",t}return __extends(t,e),t.prototype.setName=function(e,t){this.nameTxt.text=e,this.nameTxt.textColor=t},t.setlv=function(e,t,i){void 0!=e&&(e.lvTxt.text="Lv."+t,e.lvTxt.textColor=i)},t.SetShowImage=function(e,t,i,o){var n=new Sproto.sc_show_other_player_request;n.job=t,n.sex=i,n.shows=o,void 0!=e&&(e.roleShowPanel.mScale=1,e.roleShowPanel.SetShowImage(n),e.roleShowPanel.SetTianx(""),e.roleShowPanel.scaleX=e.roleShowPanel.scaleY=.8)},t}(eui.Component);__reflect(RoleComponent.prototype,"RoleComponent");var FuliSignBoardPnael=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliSignBoardSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=FuliSignBoardItem,this.dataPrvidre=new eui.ArrayCollection;var e=GameGlobal.FuliModel.FuliData.dailyId,t={};t.type=1,t.tips="每日登录可领取",t.item=GameGlobal.Config.SignInConfig[e].dailyreward,this.dataPrvidre.addItem(t),t={},t.type=2,t.tips="vip"+GameGlobal.Config.WelfareBaseConfig.viplv+"可领取",t.item=GameGlobal.Config.SignInConfig[e].vipreward,this.dataPrvidre.addItem(t),t={},t.type=3,t.tips="充值任意金额可领取",t.item=GameGlobal.Config.SignInConfig[e].rechargereward,this.dataPrvidre.addItem(t)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.btn,this.onClick),this.observe(MessageDef.FULI_GET_GIFT_SUCCEED,this.getGiftSucceed),this.UpdateContent()},t.prototype.UpdateContent=function(){this.list.dataProvider=this.dataPrvidre,this.signDayTxt.textFlow=TextFlowMaker.generateTextFlow("累计登录|C:"+Color.Green+"&T:"+GameGlobal.FuliModel.FuliData.accDay+"|C:"+Color.White+"&T:天"),this.awardTxt.textFlow=TextFlowMaker.generateTextFlow("累计登录|C:"+Color.Green+"&T:"+GameGlobal.FuliModel.FuliData.accDay+"|C:"+Color.White+"&T:天奖励"),CommonUtils.addLableStrokeColor(this.awardTxt,Color.Black,1),CommonUtils.addLableStrokeColor(this.signDayTxt,Color.Black,1),this.getGiftSucceed()},t.prototype.onClick=function(){GameGlobal.FuliModel.sendSignIn(4)},t.prototype.getGiftSucceed=function(){var e=GameGlobal.Config.AccSignInConfig,t=GameGlobal.FuliModel.FuliData.accDay,i=30;for(var o in e)i=e[o].day;this.btn.touchEnabled=(8&GameGlobal.FuliModel.FuliData.rewardMark)<1,this.awardIcon.data=e[t>i?i:t].reward[0],this.btn.touchEnabled||(this.awardIcon.data=e[t>=i?i:t+1].reward[0],this.awardTxt.textFlow=TextFlowMaker.generateTextFlow("累计登录|C:"+Color.Green+"&T:"+GameGlobal.FuliModel.FuliData.nextGiftDay+"|C:"+Color.White+"&T:天奖励")),this.btn.filters=(8&GameGlobal.FuliModel.FuliData.rewardMark)<1?null:Color.GetFilter(),UIHelper.ListRefresh(this.list)},t.CheckRedPoint=function(){return GameGlobal.FuliModel.mRedPoint.signShowRedPoint()},t}(BaseView);__reflect(FuliSignBoardPnael.prototype,"FuliSignBoardPnael");var FuliSignBoardItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliSignBoardItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){this.tipsTxt.text=this.data.tips,this.list.dataProvider=new eui.ArrayCollection(this.data.item),this.getGiftSucceed()},t.prototype.getGiftSucceed=function(){this.btn.touchEnabled=(GameGlobal.FuliModel.FuliData.rewardMark&1<<this.data.type-1)<1,this.currentState=(GameGlobal.FuliModel.FuliData.rewardMark&1<<this.data.type-1)<1?"normal":"get"},t.prototype.onClick=function(){GameGlobal.FuliModel.sendSignIn(this.data.type)},t}(eui.ItemRenderer);__reflect(FuliSignBoardItem.prototype,"FuliSignBoardItem");var GameMapPanel=function(e){function t(){var t=e.call(this)||this;return t.m_ChildView={},t.leaveDlgStr="是要退出副本？",t.m_IsUpdate=!1,t.m_LastTime=0,t.skinName="GameMapSkin",t.m_Pos=t.returnBtn.y,t._AddClick(t.helpBtn,t._OnHelpClick),t}return __extends(t,e),t.prototype.SetHelpId=function(e){return this.mHelpId=e,e?void(this.helpBtn.visible=!0):void(this.helpBtn.visible=!1)},t.prototype.OnOpen=function(){this.returnBtn.y=this.m_Pos,this.AddClick(this.returnBtn,this._OnClick),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdateChatPos),this._UpdateChatPos()},t.prototype.OnClose=function(){this.ClearSelect(),this.StopUpdate(),this.mRaid=null;for(var e in this.m_ChildView){var t=this.m_ChildView[e];DisplayUtils.removeFromParent(t),t.DoClose()}this.m_ChildView={}},t.prototype.ShowRebornView=function(e,t,i){if(this.mRebornView)return void this.mRebornView.SetData(e,t,i);var o=this.getChildIndex(this.group);this.mRebornView=new CommonFuHuoWin,this.addChildAt(this.mRebornView,o),this.mRebornView.SetData(e,t,i)},t.prototype.RemoveRebornView=function(){this.mRebornView&&(DisplayUtils.removeFromParent(this.mRebornView),this.mRebornView=null)},t.prototype.SetReturnBtn=function(e){this.returnBtn.y=e},t.prototype._UpdateChatPos=function(){this.globalToLocal(0,MiniChatPanel.POS,egret.$TempPoint),this.group.y=egret.$TempPoint.y},t.prototype.AddChildBaseView=function(e){e&&(this.m_ChildView[e.hashCode]=e,this.addChildAt(e,0),e.percentWidth=100,e.percentHeight=100,e.DoOpen(null))},t.prototype._OnHelpClick=function(){this.mHelpId&&ViewManager.ins().open(ActivityDescPanel,this.mHelpId)},t.prototype._OnClick=function(){this.OnClickExitRaid()},t.prototype.setOnLeaveDlgStr=function(e){this.leaveDlgStr=e},t.prototype.OnClickExitRaid=function(){WarnWin.show(this.leaveDlgStr,function(){GameGlobal.CommonRaidModel.MapLeave()},this)},t.prototype.showReturnBtn=function(e){this.group.visible=e},t.prototype.SetSelect=function(e){return e?(this.m_SelectView||(this.m_SelectView=new GameMapEntitySelectView,this.m_SelectView.addEventListener("ATK",this._OnAtk,this),this.m_SelectView.addEventListener("CANCEL",this._OnCancel,this)),this.addChildAt(this.m_SelectView,0),this.m_SelectView.mHandle=e,void this.StartUpdate()):void this.ClearSelect()},t.prototype.ClearSelectEntity=function(e){this.m_SelectView&&this.m_SelectView.mHandle==e&&this.ClearSelect()},t.prototype.ClearSelect=function(){this.m_SelectView&&(DisplayUtils.removeFromParent(this.m_SelectView),this.m_SelectView.mHandle=0)},t.prototype._OnAtk=function(){if(this.m_SelectView){var e=this.m_SelectView.mHandle;e&&this.mRaid&&(this.mRaid.OnEntityClick(e),this.ClearSelect())}},t.prototype._OnCancel=function(){this.ClearSelect()},t.prototype.StartUpdate=function(){this.m_IsUpdate||(this.m_IsUpdate=!0,this.m_LastTime=egret.getTimer(),egret.startTick(this.Update,this))},t.prototype.StopUpdate=function(){return this.m_IsUpdate?(this.m_IsUpdate=!1,void egret.stopTick(this.Update,this)):!1},t.prototype.Update=function(e){if(this.mRaid){if(this.m_SelectView&&this.m_SelectView.mHandle){var t=this.mRaid.GetEntity(this.m_SelectView.mHandle);if(t){var i=DisplayUtils.ConvertPos(t,this);this.m_SelectView.x=i.x,this.m_SelectView.y=i.y}else this.ClearSelect(),this.StopUpdate()}else this.StopUpdate();return!1}},t.LAYER_LEVEL=LayerManager.UI_GAME_MAP,t}(BaseEuiView);__reflect(GameMapPanel.prototype,"GameMapPanel");var GameMapEntitySelectView=function(e){function t(){var t=e.call(this)||this;return t.Init(),t}return __extends(t,e),t.prototype.Init=function(){this.atk=new eui.Image,this.atk.source="ui_hddt_bt_tiaozhan",this.atk.x=-100,this.atk.y=-50,this.quXiao=new eui.Image,this.quXiao.source="ui_hddt_bt_quxiao",this.quXiao.x=0,this.quXiao.y=-50,this.addChild(this.atk),this.addChild(this.quXiao),this.atk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.quXiao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.atk:this.dispatchEventWith("ATK");break;case this.quXiao:this.dispatchEventWith("CANCEL")}},t}(egret.DisplayObjectContainer);__reflect(GameMapEntitySelectView.prototype,"GameMapEntitySelectView");var PetXilianPanel=function(e){function t(){var t=e.call(this)||this;t.mItemLeft=[],t.mItemRight=[],t.skinName="PetXilianSkillSkin",t.commonWindowBg.SetTitle("技能洗练"),t._AddClick(t.btn01,t._OnClick),t._AddClick(t.btn02,t._OnClick),t._AddClick(t.btnchage,t._OnClick),t._AddClick(t.btnInfo,t._OnClick);for(var i=0;i<t.group01.numChildren;i++){var o=t.group01.getChildAt(i);t.SetBg(o,i),t.mItemLeft.push(o),o.lockImg.name=i+"",t._AddClick(o.lockImg,t._OnLockClick),o.skillGroup.name=i.toString(),t._AddClick(o.skillGroup,t._OnSkillIconClick)}for(var i=0;i<t.group02.numChildren;i++){var o=t.group02.getChildAt(i);t.SetBg(o,i),t.mItemRight.push(o),o.skillGroup.name=i.toString(),t._AddClick(o.skillGroup,t._OnRightSkillIconClick)}return t.consume01.mIsImg=!0,t.consume02.mIsImg=!0,t}return __extends(t,e),t.prototype.SetBg=function(e,t){e.bgImg.source=t%2==0?"ui_bm_xilianbg01":"ui_bm_xilianbg02"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mPetId=e[0],this.commonWindowBg.OnAdded(this);for(var i=this.GetBuffSkill(),o=i.length,n=0;o>n;n++){var a=this.mItemLeft[n];a.skillGroup.visible=!0,a.lockGroup.visible=!1;var r=this.mItemRight[n];r.skillGroup.visible=!0,r.lockGroup.visible=!1}for(var n=o;n<this.mItemLeft.length;n++){var a=this.mItemLeft[n];a.lockImg.visible=!1,a.skillGroup.visible=!1,a.lockGroup.visible=!0,a.skillName.text="",a.skillDesc.text="未开放";var r=this.mItemRight[n];r.lockImg.visible=!1,r.skillGroup.visible=!1,r.lockGroup.visible=!0,r.skillName.text="",r.skillDesc.text="未开放"}this.GetMsgDef(),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.GetMsgDef=function(){this.observe(MessageDef.PET_UPATE_INFO,this.UpdateContent)},t.prototype.GetBuffSkill=function(){var e=GameGlobal.PetModel.GetPetInfo(this.mPetId),t=e.mBuffSkill;return t},t.prototype.GetXilianSkill=function(e){var t=GameGlobal.PetModel.GetPetInfo(this.mPetId);return t.mXilianSkill[e]},t.prototype.SendSkillXilian=function(){GameGlobal.PetModel.SendSetXilian(this.mPetId)},t.prototype.SendSendXilian=function(e,t){GameGlobal.PetModel.SendXilian(this.mPetId,e,t,this.checkBox.selected)},t.prototype.GetBaseConfig=function(){return GameGlobal.Config.petbaseConfig},t.prototype.UpdateContent=function(){for(var e=this.GetBuffSkill(),t=e.length,i=0;t>i;i++){var o=this.mItemLeft[i],n=e[i];this.SetData(o,n)}for(var i=0;t>i;i++){var a=this.mItemRight[i],r=this.GetXilianSkill(i);r?this.SetData(a,r):(a.skillImg.source="",a.skillImg.source="ui_cw_bm_cheng",a.skillName.text="",a.skillDesc.text="未洗练")}var s=this.GetBaseConfig(),l=s.freshitemid[0];this.consume01.consumeItemId=l.itemId,this.consume01.curValue=GameGlobal.UserBag.GetCount(l.itemId),this.consume01.consumeValue=1;var c=s.freshitemid[1];this.consume02.consumeItemId=c.itemId,this.consume02.curValue=GameGlobal.UserBag.GetCount(c.itemId),this.consume02.consumeValue=1},t.GetSkillNameColor=function(e){for(var t="",i=0,o=e.length;o>i;i++){var n=e.charAt(i);t+="|C:"+ItemBase.SKILL_NAME_COLOR[i%ItemBase.SKILL_NAME_COLOR.length]+"&T:"+n}return TextFlowMaker.generateTextFlow(t)},t.prototype.SetData=function(e,i){var o=PetConst.GetPassSkillQuality(i);e.qImg.source=PetConst.QUALITY_SKILL_BG[o],e.skillImg.source=PetConst.GetPassSkillIcon(i);var n=PetConst.GetPassSkillName(i);6==o?e.skillName.textFlow=t.GetSkillNameColor(n):(e.skillName.text=n,e.skillName.textColor=ItemBase.GetColorByQuality(o)),e.skillDesc.text=PetConst.GetPassSkillDesc(i)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btn01:this.SendXilian(0);break;case this.btn02:this.SendXilian(1);break;case this.btnchage:this.SendSkillXilian();break;case this.btnInfo:ViewManager.ins().open(ActivityDescPanel,46)}},t.prototype.SendXilian=function(e){for(var t=this.GetBaseConfig(),i=t.freshitemid[e],o=i.itemId,n=1,a=[],r=0;r<this.mItemLeft.length;r++)this.mItemLeft[r].lock&&a.push(r);var s=0;if(!a.length||(s=this.GetBaseConfig().freshMoney[a.length-1],Checker.Money(MoneyConst.yuanbao,s))){var l=GameGlobal.actorModel.yb-s;Checker.CheckItem(o,n,this.checkBox.selected,l,ShopController.EN_SHOP_YUANBAO)&&this.SendSendXilian(a,e)}},t.prototype._OnLockClick=function(e){var i=parseInt(e.currentTarget.name),o=this.mItemLeft[i];return this._IsLastOne()&&!o.lock?void UserTips.ins().showTips("技能不可全部锁定"):(o.lock=!o.lock,o.lockImg.source=o.lock?t.LOCK_IMG:t.UNLOCK_IMG,void this._UpdateLock())},t.prototype._OnSkillIconClick=function(e){var t=parseInt(e.currentTarget.name),i=this.GetBuffSkill(),o=i[t];o&&ViewManager.ins().open(PetSkillTipPanel,2,o)},t.prototype._OnRightSkillIconClick=function(e){var t=parseInt(e.currentTarget.name),i=this.GetXilianSkill(t);i&&ViewManager.ins().open(PetSkillTipPanel,2,i)},t.prototype._UpdateLock=function(){for(var e=0,t=0;t<this.mItemRight.length;t++){var i=this.mItemRight[t],o=this.mItemLeft[t];o.lock&&++e,i.lockImg.source=o.lockImg.source}this.curSelCount.text=e+"个";var n=0;0!=e&&(n=this.GetBaseConfig().freshMoney[e-1]),this.needYbLabel.text=n+"元宝"},t.prototype._IsLastOne=function(){for(var e=0,t=0;t<this.mItemLeft.length;t++){var i=this.mItemLeft[t];i.lock&&++e}var o=this.GetBuffSkill();return o.length==e+1},t.LAYER_LEVEL=LayerManager.UI_Main,t.LOCK_IMG="ui_bt_suo",t.UNLOCK_IMG="ui_bt_weisuo",t}(BaseEuiView);__reflect(PetXilianPanel.prototype,"PetXilianPanel");var DiscountRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.effX=i.tar.width>>1,i.effY=i.tar.height>>1,i.updateMessage=[MessageDef.RECHARGE_UPDATE],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return GameGlobal.RechargeModel.choicerechare>0},t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_129,!0)&&GameGlobal.RechargeModel.choicerechare>=0},t.CheckShow=function(){return GameGlobal.RechargeModel.choicerechare>=0},t.prototype.tapExecute=function(){ViewManager.ins().open(RechargeAwardPanel)},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.Open=function(){GameGlobal.RechargeModel.choicerechare>=0?ViewManager.ins().open(RechargeAwardPanel):UserTips.InfoTip("已经购买")},t}(RuleIconBase);__reflect(DiscountRule.prototype,"DiscountRule");var MovieObject=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Clear=function(){this.m_CacheUrl=null},t.prototype.ClearCache=function(){this.$bitmapData=null,this.movieClipData=null,e.prototype.ClearCache.call(this)},t.prototype._SetUrl=function(t){e.prototype._SetUrl.call(this,t),this.m_CacheUrl=t},t.prototype.Unref=function(){StringUtils.IsNullOrEmpty(this.GetLoadUrl())||ResMgr.Unref(this.GetImgUrl()),this._SetUrl(null)},t.prototype.Ref=function(){StringUtils.IsNullOrEmpty(this.GetLoadUrl())||ResMgr.Ref(this.GetImgUrl())
},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.m_CacheUrl&&(this.LoadByUrl(this.m_CacheUrl),null==this.m_CacheUrl)},t.prototype.$onRemoveFromStage=function(){if(e.prototype.$onRemoveFromStage.call(this),this.GetLoadUrl())if(-1==this._playCount){var t=this.GetLoadUrl();this.ClearCache(),this.m_CacheUrl=t}else this.ClearCache()},t}(MovieBaseObject);__reflect(MovieObject.prototype,"MovieObject");var ItemRenderer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),GameGlobal.MessageCenter.removeAll(this),TimerManager.ins().removeAll(this)},t}(eui.ItemRenderer);__reflect(ItemRenderer.prototype,"ItemRenderer");var ResultFailPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.skinName="ResultFailSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.SetBtnLabel("退出"),this.SetTitleLabel("我要变强"),this.SetCloseFunc(t[1]);for(var o=0;4>o;o++)this._AddClick(this["img"+o],this.click);this._AddClick(this.helpBtn,this.click),this._AddClick(this.gifBtn,this.click);var n=t[2]||0;2==n?(this.titleImg.source="ui_js_bm_tiaozhanjieshu",this.gpGuanqia.visible=!1):this.titleImg.source="ui_bm_shibai",this.gpGuanqia.visible=BattleMap.mFbType==UserFb.FB_TYPE_GUANQIABOSS,e.prototype.OnOpen.call(this),this.showGif()},t.prototype.click=function(e){switch(e.target){case this.img0:ViewManager.ins().open(GrowUpWin),this.CloseSelf();break;case this.img1:ViewManager.ins().open(PetMainPanel),this.CloseSelf();break;case this.img2:ViewManager.ins().open(ForgeWin),this.CloseSelf();break;case this.img3:ViewManager.ins().open(RoleSkilSetLayer),this.CloseSelf();break;case this.helpBtn:this.help();break;case this.gifBtn:if(0==this.index)return;var t=GameGlobal.Config.RecmdGiftConfig[this.index];ViewManager.ins().Guide(t.taget),this.CloseSelf()}},t.prototype.showGif=function(){return this.gpGuanqia.visible?void(this.gifBtn.visible=!1):this.selectShouCong()?(this.index=1,void this.showBnt()):this.selectXuanNv()?this.selectGif()?(this.index=3,void this.showBnt()):void this.showBnt():(this.index=2,void this.showBnt())},t.prototype.showBnt=function(){if(0==this.index)return void(this.gifBtn.visible=!1);var e=GameGlobal.Config.RecmdGiftConfig[this.index];this.gifBtn.icon=e.icon},t.prototype.selectShouCong=function(){var e=!1,t=GameGlobal.Config.FirstRechargeConfig;for(var i in t)if(!GameGlobal.RechargeModel.GetFirstRewardState(t[i].id)){e=!0;break}return e},t.prototype.selectXuanNv=function(){return Deblocking.Check(DeblockingType.TYPE_19,!0)},t.prototype.selectGif=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(9);if(e){var t=e.GetConfig();if(!t[e.reachday])return!1;if(e.runday<=e.reachday)return!1;if(e.isOpenActivity()&&Deblocking.Check(DeblockingType.TYPE_104,!0))return!0}return!1},t.prototype.help=function(){Deblocking.Check(DeblockingType.TYPE_49)&&Deblocking.Check(DeblockingType.TYPE_115)&&GameGlobal.Chat.chatShareInfo(20,null)},t}(ResultBasePanel);__reflect(ResultFailPanel.prototype,"ResultFailPanel");var ShopBaseData=function(){function e(){}return e}();__reflect(ShopBaseData.prototype,"ShopBaseData");var ShopNormalData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyTime=0,t.shopType=0,t}return __extends(t,e),t.prototype.initLocalData=function(e,t){this.index=e.index||0,this.type=e.type||0,this.unlocktype=e.unlocktype||{},this.mark=e.mark||0,this.id=e.id||0,this.count=e.count||0,this.daycount=e.daycount||0,this.currency=e.currency||{},this.shopType=t||0},t}(ShopBaseData);__reflect(ShopNormalData.prototype,"ShopNormalData");var ShopXianDaoLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t}return __extends(t,e),t.prototype.OnOpen=function(){this.goPrice.visible=!1,this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setMoney),this.observe(MessageDef.POWER_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_XIANDU)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop),this.setValue()},t.prototype.setValue=function(){this.setAccountText()},t.prototype.setAccountText=function(e){void 0===e&&(e=0);var t="",i=e+"";"string"==typeof this.tShopData.instructions&&(t=this.tShopData.instructions.replace("%s",i)),this.account.text=t},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){this.setData(),this.tShopData.moneytype&&(this.priceIcon.setType(this.tShopData.moneytype),this.priceIcon.price=CommonUtils.overLength(ShopController.ins().getBuyItemNums(this.tShopData.moneytype)))},t.NAME="仙道商店",t}(BaseView);__reflect(ShopXianDaoLayer.prototype,"ShopXianDaoLayer",["ICommonWindowTitle"]);var CrossTeamBaseModel=function(e){function t(t){var i=e.call(this,t)||this;return i.index=-1,i}return __extends(t,e),t.prototype.IsFirst=function(e){return!0},t.prototype.IsNotEnter=function(e){return""},t}(TeamBaseModel);__reflect(CrossTeamBaseModel.prototype,"CrossTeamBaseModel");var TabView=function(e){function t(){var t=e.call(this)||this;return t.childrenDatas=[],t.childrenList=[],t.proposedSelectedIndex=eui.ListBase.NO_PROPOSED_SELECTION,t._selectedIndex=-1,t}return __extends(t,e),t.CreateTabViewData=function(e,t,i){void 0===i&&(i=!1);var o;if(o="string"==typeof e?{className:e,name:"",notShow:i}:{className:egret.getQualifiedClassName(e),name:e.NAME||"",notShow:i},t)for(var n in t)o[n]=t[n];return o},Object.defineProperty(t.prototype,"layout",{get:function(){return this.$layout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=eui.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(e){e=0|+e,this.setSelectedIndex(e)},enumerable:!0,configurable:!0}),t.prototype.setSelectedIndex=function(e){e!=this.selectedIndex&&this.childrenList.length&&(this.NewChild(e),this.proposedSelectedIndex=e,this.invalidateProperties(),eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},t.prototype.commitProperties=function(){e.prototype.commitProperties.call(this),this.proposedSelectedIndex!=eui.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=eui.ListBase.NO_PROPOSED_SELECTION)},t.prototype.commitSelection=function(e){e>=0&&e<this.childrenList.length?(this._selectedIndex!=e&&this.ShowOrHide(this._selectedIndex,!1),this._selectedIndex=e,this.ShowOrHide(e,!0)):this._selectedIndex=-1,this.invalidateSize(),this.invalidateDisplayList()},t.prototype.NewChild=function(e){var t=this.childrenList[e];if(t&&!t.obj){var i=egret.getDefinitionByName(t.className),o=t.obj=new i;t.className=null;for(var n=Object.keys(t),a=0,r=n;a<r.length;a++){var s=r[a],l=t[s];l&&("id"==s?this[l]=o:-1==s.indexOf("$")&&(o[s]=l))}this.addChild(o),o.visible=!1}return t&&t.obj?!0:!1},t.prototype.Replace=function(e){this.RemoveAll(),this.childrenList[0]=t.CreateTabViewData(e),this.selectedIndex=0},t.prototype.RemoveAll=function(){this._selectedIndex=-1,this.proposedSelectedIndex=eui.ListBase.NO_PROPOSED_SELECTION,this.removeChildren();for(var e=0,t=this.childrenList;e<t.length;e++){var i=t[e],o=i.id;o&&(this[o]=null)}this.childrenList=[]},t.prototype.ShowOrHide=function(e,t){var i=this.childrenList[e];if(i&&i.obj){var o=i.obj;return egret.is(o,"eui.UIComponent")&&(o.includeInLayout=t),o.visible=t,o}},t.prototype._UpdateList=function(){this.childrenList=[];for(var e=0,t=this.childrenDatas;e<t.length;e++){var i=t[e];this.childrenList.push(i)}},t.prototype.UpdateTabShowState=function(e,t){var i=this.childrenDatas[e];i&&(i.notShow=!t),this._UpdateList()},Object.defineProperty(t.prototype,"length",{get:function(){return this.childrenList.length},enumerable:!0,configurable:!0}),t.prototype.getItemAt=function(e){var t=this.childrenList[e];return t},t.prototype.getItemIndex=function(e){for(var t=this.childrenList,i=t.length,o=0;i>o;o++)if(t[o].name==e)return o;return-1},t.prototype.getElementAt=function(e){var t=this.childrenList[e];return t?t.obj:null},t.prototype.GetElementCls=function(e){var t=this.childrenList[e];if(t){if(t.obj)return Util.GetClass(t.obj);if(t.className)return egret.getDefinitionByName(t.className)}return null},Object.defineProperty(t.prototype,"tabChildren",{set:function(e){this.childrenDatas=e,this._UpdateList()},enumerable:!0,configurable:!0}),t.COPY={name:1,skinName:1},t}(eui.Group);__reflect(TabView.prototype,"TabView",["eui.ICollection","egret.IEventDispatcher"]),eui.registerBindable(TabView.prototype,"selectedIndex"),eui.registerProperty(TabView,"tabChildren","Array",!0);var TeamBaseMemberView=function(e){function t(){var t=e.call(this)||this;return t.mNotAutoJoint=!1,t.mTime=new TeamTime(10,50),t.m_PreRepTime=0,t}return __extends(t,e),t.prototype.SetTime=function(e,t){this.mTime=new TeamTime(e,t),this.mTime.Reset()},t.prototype.childrenCreated=function(){this.count_label&&(this.count_label.text=""),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.btnAuto,this._OnClick),this._AddChange(this.checkBox0,this._OnClick),this._AddChange(this.checkBox1,this._OnClick),this.myTeamList.itemRenderer=TeamMemberItem,this.myTeamList.dataProvider=new eui.ArrayCollection,this.teamList.itemRenderer=TeamDataItem,this.teamList.dataProvider=new eui.ArrayCollection},t.prototype.OnOpen=function(){this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.UpdateContent),this.observe(MessageDef.UPDATE_TEAM_LIST,this.UpdateContent),this.mModel.SendGetMyTeamInfos(),this.AddLoopTimer(1e3,this.UpdateTime),this.mNotAutoJoint?(this.checkBox1.selected=!1,this.checkBox1.visible=!1):(this.checkBox1.selected=!0,this.checkBox1.visible=!0)},t.prototype.OnResume=function(){this.mTime&&this.mTime.Reset()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCulture:if(!UserFb.CheckActMap())return;this.mModel.mTeamInfo.HasTeam()?this.mModel.SendLeave(this.mModel.mTeamInfo.level):this.mModel.SendCreateTeam(this.m_ConfigKey);break;case this.btnAuto:if(!UserFb.CheckActMap())return;var t=this.mModel;t.mTeamInfo.HasTeam()?t.mTeamInfo.IsMyTeam()&&this.SendBattle():this.SendJoin();break;case this.checkBox0:this.checkBox0.selected||(this.mTime.ResetType(0),this.UpdateTime());break;case this.checkBox1:this.checkBox1.selected||(this.mTime.ResetType(1),this.UpdateTime())}},t.prototype.SetCountLabel=function(e){this.count_label&&(this.count_label.text=e)},t.prototype.UpdateKey=function(e){this.m_ConfigKey=e,this.mModel.SendGetTeamList(this.m_ConfigKey),this.UpdateContent()},t.prototype.UpdateContent=function(){this.noneLabel.visible=!1,this.myTeamList.visible=!1,this.teamList.visible=!1;var e=this.mModel;if(e.mTeamInfo.HasTeam()){this.myTeamList.visible=!0;for(var t=[],i=0,o=0,n=e.mTeamInfo.members;o<n.length;o++){var a=n[o];t.push({mModel:e,mInfo:e.mTeamInfo,mIndex:i++})}this.myTeamList.dataProvider=new eui.ArrayCollection(t),GameGlobal.UserFb.mAuto=!1,GameGlobal.UserFb.sendSetAuto()}else if(egret.getTimer()-this.m_PreRepTime>4e3&&(this.m_PreRepTime=egret.getTimer(),this.mModel.SendGetTeamList(this.m_ConfigKey)),this.m_ConfigKey){var r=e.mTeamList[this.m_ConfigKey];if(r&&r.length){this.teamList.visible=!0;for(var t=[],i=0;3>i;i++){var a=r[i];if(!a)break;t.push({mModel:e,mInfo:a,config:this.m_ConfigKey})}this.teamList.dataProvider=new eui.ArrayCollection(t)}else this.noneLabel.visible=!0}this.UpdateBtnState()},t.prototype.UpdateBtnState=function(){var e=this.mModel;e.mTeamInfo.HasTeam()?(this.btnCulture.label=t.LABEL.EXIT_ROOM,e.mTeamInfo.IsMyTeam()?(this.btnAuto.visible=!0,this.btnAuto.label=t.LABEL.START_CHALLENGE,this.checkBox0.visible||(this.checkBox0.selected=!0,this.checkBox1.selected=!0,this.mTime.Reset()),this.checkBox0.visible=!0,this.checkBox1.visible=!0):(this.btnAuto.visible=!1,this.checkBox0.visible=!1,this.checkBox1.visible=!1)):(this.btnCulture.label=t.LABEL.CREATE_ROOM,this.checkBox0.visible=!1,this.btnAuto.visible=!0,this.mNotAutoJoint?this.checkBox1.visible=!1:this.checkBox1.visible=!0,this.btnAuto.label=t.LABEL.QUICK_JOIN),this.UpdateTime()},t.prototype.UpdateTime=function(){if(UserFb.CheckActMap(!1)){var e=this.mModel;if(e.mTeamInfo.HasTeam()){if(e.mTeamInfo.IsMyTeam()){var i=e.mTeamInfo.IsFull();i&&this.checkBox0.selected?(this.mTime.UpdateFull()&&(this.SendBattle(),this.checkBox0.selected=!1),this.checkBox0.label=this.mTime.mFull+t.LABEL.FULL_OPEN2):this.checkBox0.label=t.LABEL.FULL_OPEN1,this.checkBox1.selected&&this.mTime.UpdateOpen()&&(this.SendBattle(),this.checkBox1.selected=!1),this.checkBox1.label=this.mTime.mAutoOpen+t.LABEL.FULL_OPEN2}}else this.checkBox1.visible&&this.checkBox1.selected&&this.mTime.UpdateJoin()&&(this.SendJoin(),this.checkBox1.selected=!1),this.checkBox1.label=this.mTime.mJoin+t.LABEL.FULL_OPEN3}},t.prototype.SendJoin=function(){this.m_ConfigKey&&this.mModel.SendQuickJoin(this.m_ConfigKey)},t.prototype.SendBattle=function(){this.mModel.SendFight(this.mModel.mTeamInfo.level)},t.LABEL={CREATE_ROOM:"创建房间",EXIT_ROOM:"退出房间",START_CHALLENGE:"开始挑战",QUICK_JOIN:"快速加入",FULL_OPEN1:"满员自动开启副本",FULL_OPEN2:"秒自动开启副本",FULL_OPEN3:"秒自动加入队伍"},t}(BaseView);__reflect(TeamBaseMemberView.prototype,"TeamBaseMemberView");var TeamTime=function(){function e(e,t){this.mFull=0,this.mAutoOpen=0,this.mJoin=0,this.mGapTime=0,this.mJoinTime=e,this.mOpenTime=t}return e.prototype.GetGapTime=function(){return this.mGapTime?egret.getTimer()-this.mGapTime>=500?(this.mGapTime=egret.getTimer(),1):0:(this.mGapTime=egret.getTimer(),1)},e.prototype.UpdateFull=function(){return this.mFull-=this.GetGapTime(),this.mFull<=0?(this.mFull=5,!0):!1},e.prototype.UpdateJoin=function(){return this.mJoin-=this.GetGapTime(),this.mJoin<=0?(this.mJoin=this.mJoinTime,!0):!1},e.prototype.UpdateOpen=function(){return this.mAutoOpen-=this.GetGapTime(),this.mAutoOpen<=0?(this.mAutoOpen=this.mOpenTime,!0):!1},e.prototype.Reset=function(){this.mFull=5,this.mAutoOpen=this.mOpenTime,this.mJoin=this.mJoinTime},e.prototype.ResetType=function(e){0==e?this.mFull=5:(this.mAutoOpen=this.mOpenTime,this.mJoin=this.mJoinTime)},e}();__reflect(TeamTime.prototype,"TeamTime");var TeamBasePanel=function(e){function t(){var t=e.call(this)||this;return t.m_CurIndex=0,t.Listindex=0,t.isShowList=!0,t.skinName="TeamBaseSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.teamBaseMemberView.mModel=this.m_Model,this.teamCheckItemView.m_Model=this.m_Model,this._AddClick(this.teamCheckItemView,this._OnClick),this.list2.itemRenderer=ItemBase,this.list2.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.UpdateContent),this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.UpdateList),this.observe(MessageDef.TEAM_FUBEN_INFO,this.UpdateCurModel),this.InitInfo(),this.teamBaseMemberView.DoOpen(null)},t.prototype.OnClose=function(){this.teamBaseMemberView.DoClose()},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.teamBaseMemberView.OnResume();var i=0,o=e[0]||null;if(o||(this.m_Model.mTeamInfo.HasTeam()?o=this.m_Model.mTeamInfo.level:(this.m_Model.mSelectKey&&(o=this.m_Model.mSelectKey),o||(o=this.GetFirstShowKey()))),o)for(var n=0,a=0,r=this.m_Model.GetConfig();a<r.length;a++){var s=r[a],l=this.m_Model.GetConfigData(s);if(l.GetKey()==o){i=n;break}++n}this.Listindex=i,this.UpdateModel(i)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.teamCheckItemView:this.UpdateModel(this.m_Model.index)}},t.prototype.UpdateCurModel=function(){this.UpdateModel(this.m_CurIndex)},t.prototype.UpdateList=function(){this.teamCheckItemView.showCheckItemList(this.Listindex)},t.prototype.UpdateModel=function(e){var t=this.m_Model.GetConfig();this.teamCheckItemView.index=this.m_CurIndex;var i=this.m_Model.GetConfigData(t[e]);if(i){this.m_CurIndex=e,this.list2.dataProvider=new eui.ArrayCollection(i.GetShowItem());var o=i.GetSuggest();o?this.power_label.text=o+"":this.powerGroup.visible=!1;i.GetBossId();0==this.m_Model.mTeamInfo.HasTeam()&&(this.lbAlert.text=i.GetUititle());var n=this.m_Model.mTeamInfo.HasTeam(),a=this.m_Model.IsNotEnter(i.GetKey()),r=n||!a;this.teamBaseMemberView.visible=r,(this.noneInfoLabel.visible=!r)&&(this.noneInfoLabel.text=a);var s=this.m_Model.GetConfig()[this.m_CurIndex];this.teamBaseMemberView.UpdateKey(this.m_Model.GetConfigData(s).GetKey())}},t.prototype.UpdateContent=function(){},t.prototype.InitInfo=function(){},t.prototype.GetFirstShowKey=function(){return null},t}(BaseView);__reflect(TeamBasePanel.prototype,"TeamBasePanel",["ICommonWindowTitle"]);var TianShenBaseInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.TianShenModel,t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.baseView.powerLabel,this._OnClickBtn),this._AddClick(this.baseView.btnYF,this._OnClickBtn),this._AddClick(this.baseView.btnSXD,this._OnClickBtn),this._AddClick(this.baseView.btnYuanfen,this._OnClickBtn),this._AddItemClick(this.baseView.skillList,this._OnItemClick)},t.prototype._OnClickBtn=function(e){switch(e.currentTarget){case this.baseView.btnSXD:ViewManager.ins().open(TianShenAttrDrugPanel);break;case this.baseView.powerLabel:var t=this.mContext.mTianShenList[this.mContext.mSelectIndex];ViewManager.ins().open(TianshenAttrPanel,t.id)}},t.prototype.UpdateContent=function(){var e=this.mContext.mTianShenList[this.mContext.mSelectIndex],t=e.id;if(!this.model.HasTianShen(t))return void(this.group.visible=!1);this.group.visible=!0;var i=this.model.mTianShenList[t];this.UpdateInfo(t),this.baseView.btnZZ.icon=this.model.mBattleID==t?"ui_bt_xiuxi":"ui_bt_chuzhan",this.baseView.lbLev.text=i.mLevel+"\n阶"},t.prototype.UpdateInfo=function(e){var t=this.model.mTianShenList[e];this.baseView.petShowPanel.SetBody(t.GetSkin()),this.baseView.powerLabel.text=t.GetAllPower(0==t.mLevel?1:t.mLevel),this.baseView.tname.text=this.mContext.mTianShenList[this.mContext.mSelectIndex].name,this.baseView.tname.textColor=ItemBase.GetColorByQuality(this.mContext.mTianShenList[this.mContext.mSelectIndex].quality),this.baseView.skillList.itemRenderer=TianShenSkillIcon,this.skillIds=[];var i=GameGlobal.Config.AirMarshalBaseConfig;this.skillIds.length=6,this.skillIds[0]=i.skill,this.skillIds[1]=i.hskill;for(var o=this.model.mTianShenList[e].GetSkillIds(),n=0;n<o.length;n++)this.skillIds[n+2]=o[n];this.baseView.skillList.dataProvider=new eui.ArrayCollection(this.skillIds)},t.prototype._OnItemClick=function(e){var t=e.itemIndex,i=this.skillIds[t];return i?void ViewManager.ins().open(PetSkillTipPanel,t>2?2:t,i,!1):void ViewManager.ins().open(HavingSkillTipPanel,2)},t}(BaseView);__reflect(TianShenBaseInfoPanel.prototype,"TianShenBaseInfoPanel",["ICommonWindowTitle"]);var TianShenSkillIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){var e,t=this.data;1<this.itemIndex?(this.useTypeImg.source="ui_tn_bm_bei",e=PetConst.GetPassSkillQuality(t),this.iconImg.source=PetConst.GetPassSkillIcon(t)):(this.useTypeImg.source="ui_bm_zhu",e=PetConst.GetSkillQuality(t),this.iconImg.source=PetConst.GetSkillIcon(t)),this.iconBg.source=PetConst.QUALITY_SKILL_BG[e]}},t}(eui.ItemRenderer);__reflect(TianShenSkillIcon.prototype,"TianShenSkillIcon");var XianlvBaseInfoPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.baseView.allAttrBtn,this._OnClickBtn),this._AddClick(this.baseView.powerLabel,this._OnClickBtn),this._AddClick(this.baseView.skillComp,this._OnClickBtn),this._AddClick(this.baseView.btnSC,this._OnClickBtn)},t.prototype._OnClickBtn=function(e){switch(e.currentTarget){case this.baseView.allAttrBtn:ViewManager.ins().open(XianlvAllAttrPanel);break;case this.baseView.skillComp:var t=this.mContext.mXianlvList[this.mContext.mSelectIndex].id,i=GameGlobal.XianlvModel.GetXianlvInfo(t);ViewManager.ins().open(XianlvSkillTipPanel,i.GetSkillId(),i.GetSkillId(1),i.mStar);break;case this.baseView.powerLabel:if("inactive"==this.baseView.currentState);else{var o=this.mContext.mXianlvList[this.mContext.mSelectIndex];ViewManager.ins().open(XianlvAttrPanel,o.id)}break;case this.baseView.btnSC:ViewManager.ins().open(XianlvQyPanel)}},t.prototype.UpdateContent=function(){var e=GameGlobal.XianlvModel,i=this.mContext.mXianlvList[this.mContext.mSelectIndex],o=i.id;if(!e.HasXianlv(o))return void(this.group.visible=!1);var n=e.GetXianlvInfo(o);this.group.visible=!0,this.UpdateInfo(o),t.SetStarGroup(this.baseView.starGroup,n.mStar),this.baseView.btnZZ.icon=e.HasBattle(o)?"ui_bt_xiuxi":"ui_bt_chuzhan",this.baseView.lbLev.text=n.mLevel+"\n阶"},t.SetStarGroup=function(e,t){for(var i=0;i<e.numChildren;i++){var o=e.getChildAt(i);o.source=t>i?"ui_bm_star022":"ui_bm_star021"}},t.prototype.UpdateInfo=function(e){var t=GameGlobal.XianlvModel,i=t.GetXianlvInfo(e);this.baseView.petShowPanel.SetBody(i.GetSkin()),this.baseView.lbPower.text="仙侣总战力："+t.GetAllPower(),this.baseView.lbActive0.text="已出战："+t.GetBattleCount()+"/2",this.baseView.lbActive.text="已激活："+t.GetActiveCount(),this.baseView.powerLabel.text=i.GetPower(0==i.mLevel?1:i.mLevel);var o=Math.max(i.mStar,1);this.baseView.starNum.text=o.toString(),PetSkillIconItem.SetContent(this.baseView.skillComp,i.GetSkillId(),0)},t}(BaseView);__reflect(XianlvBaseInfoPanel.prototype,"XianlvBaseInfoPanel",["ICommonWindowTitle"]);var XianJunBaseInfoPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.baseView.allAttrBtn,this._OnClickBtn),this._AddClick(this.baseView.powerLabel,this._OnClickBtn),this._AddClick(this.baseView.skillComp,this._OnClickBtn),this._AddClick(this.baseView.skillComp0,this._OnClickBtn),this._AddClick(this.baseView.skillComp1,this._OnClickBtn),this._AddClick(this.baseView.btnSC,this._OnClickBtn)},t.prototype._OnClickBtn=function(e){switch(e.currentTarget){case this.baseView.allAttrBtn:ViewManager.ins().open(XianJunAllAttrPanel);break;case this.baseView.skillComp:var t=this.mContext.mXianJunList[this.mContext.mSelectIndex].id,i=GameGlobal.XianJunModel.GetXianJunInfo(t);ViewManager.ins().open(XianJunSkillTipPanel,i.GetSkillId(1),!0);break;case this.baseView.skillComp0:var o=this.mContext.mXianJunList[this.mContext.mSelectIndex].id,n=GameGlobal.XianJunModel.GetXianJunInfo(o);ViewManager.ins().open(XianJunSkillTipPanel,n.GetSkillId(2),!0);break;case this.baseView.skillComp1:var a=this.mContext.mXianJunList[this.mContext.mSelectIndex].id,r=GameGlobal.XianJunModel.GetXianJunInfo(a);ViewManager.ins().open(XianJunSkillTipPanel,r.GetSkillId(0),!1);break;case this.baseView.powerLabel:if("inactive"==this.baseView.currentState);else if("XianJunupStarBaseSkin"==this.skinName);else{var s=this.mContext.mXianJunList[this.mContext.mSelectIndex];ViewManager.ins().open(XianJunAttrPanel,s.id)}break;case this.baseView.btnSC:ViewManager.ins().open(HeChengMainWin)}},t.prototype.UpdateContent=function(){var e=GameGlobal.XianJunModel,i=this.mContext.mXianJunList[this.mContext.mSelectIndex],o=i.id;if(!e.HasXianJun(o))return void(this.group.visible=!1);var n=e.GetXianJunInfo(o);this.group.visible=!0,this.UpdateInfo(o),t.SetStarGroup(this.baseView.starGroup,n.mStar),this.baseView.btnZZ.icon=e.HasBattle(o)?"ui_bt_xiuxi":"ui_bt_chuzhan",this.baseView.lbLev.text=n.mLevel+"\n级"},t.SetStarGroup=function(e,t){for(var i=0;i<e.numChildren;i++){var o=e.getChildAt(i);o.source=t>i?"ui_bm_star022":"ui_bm_star021"}},t.prototype.UpdateInfo=function(e){var t=GameGlobal.XianJunModel,i=t.GetXianJunInfo(e);this.baseView.petShowPanel.SetBody(i.GetSkin()),this.baseView.lbPower.text="星君总战力："+t.GetAllPower(),this.baseView.lbActive0.text="",this.baseView.lbActive.text="已激活："+t.GetActiveCount(),this.baseView.powerLabel.text=i.GetPower(0==i.mLevel?1:i.mLevel);Math.max(i.mStar,1);PetSkillIconItem.SetContent(this.baseView.skillComp,i.GetSkillId(1),0),PetSkillIconItem.SetContent(this.baseView.skillComp0,i.GetSkillId(2),0),PetSkillIconItem.SetContent(this.baseView.skillComp1,i.GetSkillId(0),1)},t}(BaseView);__reflect(XianJunBaseInfoPanel.prototype,"XianJunBaseInfoPanel",["ICommonWindowTitle"]);var YuanfenQixingPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="YuanfenInfoSkin",t.mType=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=YuanfenItem},t.prototype.UpdateContent=function(){this.powerLabel.text=GameGlobal.YuanfenModel.GetAllPower();var e=GameGlobal.YuanfenModel.GetDataList(this.mType);this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.OnOpen=function(){this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateContent)},t.prototype.OnClose=function(){},t.NAME="北斗七星",t}(BaseView);__reflect(YuanfenQixingPanel.prototype,"YuanfenQixingPanel",["ICommonWindowTitle"]);var YuanfenItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnActive.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.labName.text=e.name,this.labAttr.textFlow=AttributeData.GetAttrTabString(e.attrs," "),this.labPower.text="+"+ItemConfig.CalcAttrScoreValue(e.attrs),this.imgAct.visible=GameGlobal.YuanfenModel.HasAct(e.id),this.btnActive.visible=!this.imgAct.visible,this.list.itemRenderer=YuanfenHeadItem,this.list.dataProvider=new eui.ArrayCollection(e.group)},t.prototype._OnBtnClick=function(){return GameGlobal.YuanfenModel.CanYuanfenAct(this.data.id)?void GameGlobal.YuanfenModel.SendActCombo(this.data.id):void UserTips.ins().showTips("未集齐，不可激活")},t}(eui.ItemRenderer);__reflect(YuanfenItem.prototype,"YuanfenItem");var YuanfenHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.item.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){switch(this.data.type){case 1:this.SetPetInfo(this.data.id);break;case 2:this.SetTianshenInfo(this.data.id);break;case 3:this.SetXianlvInfo(this.data.id)}},t.prototype._OnBtnClick=function(){ViewManager.ins().open(YuanfenTipWin,this.data)},t.prototype.SetPetInfo=function(e){var t=GameGlobal.Config.petBiographyConfig[e];t&&(this.lbName.text=t.name,this.lbName.textColor=ItemBase.GetColorByQuality(t.quality),this.item.SetQuality(t.quality),this.item.setItemImg(PetConst.GetHeadIcon(e)),this.item.setGray(!GameGlobal.PetModel.HasPet(e)))},t.prototype.SetXianlvInfo=function(e){var t=GameGlobal.Config.partnerBiographyConfig[e];t&&(this.lbName.text=t.name,this.lbName.textColor=ItemBase.GetColorByQuality(t.quality),this.item.SetQuality(t.quality),this.item.setItemImg("resource/assets/image/head/xianlv/"+t.icon+".png"),this.item.setGray(!GameGlobal.XianlvModel.HasXianlv(e)))},t.prototype.SetTianshenInfo=function(e){var t=GameGlobal.Config.AirMarshalListConfig[e];t&&(this.lbName.text=t.name,this.lbName.textColor=ItemBase.GetColorByQuality(t.quality),this.item.SetQuality(t.quality),this.item.setItemImg("resource/assets/image/head/tianshen/"+t.icon+".png"),this.item.setGray(!GameGlobal.TianShenModel.HasTianShen(e)))},t}(eui.ItemRenderer);__reflect(YuanfenHeadItem.prototype,"YuanfenHeadItem");var AIUnit=function(){function e(){this.mStateList={},this.mBuffIds={},this.mIsDead=!1}return e.prototype.GetRaid=function(){return this.mEntity.mRaid},e.prototype.Init=function(e){this.mEntity=e,this.mCurState=this.mStateList[AIUnitStateType.STAND],this.mNextState=null,this.mIsDead=!1,this.mBuffIds={}},e.prototype.IsDead=function(){return this.mIsDead},e.prototype.IsTarget=function(){return!this.IsDead()},e.prototype.AddBuff=function(e){if(e){var t=new AIUnitBuff;t.mBuffId=e,this.mBuffIds[e]=t;var i=t.GetEff();for(var o in i){var n=i[o];n&&(2==n.effType?0==n.type?GameGlobal.EntityEffMgr.PlayBecastBuff(n,this.mEntity.GetHandle()):this.creatEff(e,n.targetEff):3==n.effType?GameMap.GetBattleView().bloodLayer.ShowBuffEffText(this.mEntity.x,this.mEntity.y,n.targetEff,n.args):console.warn("not impl buff effType => "+e,n.effType))}}},e.prototype.creatEff=function(e,t){var i=new MovieClip;i.loadUrl(ResDataPath.GetSkillPath(t),!0,-1),i.name=e+"",this.mEntity.addBattleBuff(i)},e.prototype.Relive=function(){var e=this.mEntity.GetInfo();e.setAtt(AttributeType.atHp,e.getAtt(AttributeType.atMaxHp)),this.UpdateBlood()},e.prototype.RemoveBuff=function(e,t){void 0===t&&(t=!1),t&&this.mBuffIds[e]&&GameMap.GetBattleView().bloodLayer.ShowWord(this.mEntity.x,this.mEntity.y,0);var i=e+"";this.mEntity.removeBattleBuff(i),delete this.mBuffIds[e]},e.prototype.BuffAct=function(e,t,i){GameMap.GetBattleView().bloodLayer.ShowBuffAct(this.mEntity.x,this.mEntity.y,e,t),i&&this.Die(500)},e.prototype.ChangeHp=function(e,t,i){var o=this.mEntity.GetInfo();o.setAtt(AttributeType.atHp,o.getAtt(AttributeType.atHp)+t),this.UpdateBlood(),GameMap.GetBattleView().bloodLayer.ShowBuffHp(this.mEntity.x,this.mEntity.y,e,t),i&&this.Die(500)},e.prototype.ClearOtherAnim=function(){this.mCurState.ClearOtherAnim()},e.prototype.Evade=function(e){this.mCurState.PlayEvade(),GameMap.EntityHpChange(e)},e.prototype.Hit=function(e,t){var i=this.mEntity.GetInfo();i.setAtt(AttributeType.atHp,i.getAtt(AttributeType.atHp)+e.value);var o;e.type==DamageTypes.CRIT&&(o=GameMap.CRIT_SHAKE),GameMap.EntityHpChange(e,o);var n=this.mCurState.PlayHit();this.UpdateBlood(),t&&this.Die(n)},e.prototype.Die=function(e){this.mIsDead=!0,e?this.mDelayAction={mType:AIUnitStateType.Die,mDelay:e}:this.SetNextState(AIUnitStateType.Die)},e.prototype.UpdateBlood=function(){var e=this.mEntity.GetInfo();if(e){var t=e.getAtt(AttributeType.atMaxHp),i=e.getAtt(AttributeType.atHp);this.mEntity.SetBarValue(i,t)}},e.prototype.GetStateArgs=function(t){return this.GetCurType()==t?this.GetState(t).mAIUnitArgs:e.TEMP_ARGS},e.prototype.GetState=function(e){return this.mStateList[e]},e.prototype.GetCurType=function(){return this.mCurState.mType},e.prototype.Update=function(e){this.mCurState&&(null!=this.mNextState&&(this.mCurState.mIsEnter=!1,this.mCurState.OnExit(),this.mCurState=this.mStateList[this.mNextState],this.mNextState=null),this.mCurState.mIsEnter||(this.mCurState.mIsEnter=!0,this.mCurState.OnEnter()),this.mCurState.OnUpdate(e),this.mDelayAction&&(this.mDelayAction.mDelay-=e)<=0&&(this.SetNextState(this.mDelayAction.mType),this.mDelayAction=null))},e.prototype.StateEndEvent=function(e){e!=AIUnitStateType.Die&&this.SetNextState(AIUnitStateType.STAND)},e.prototype.SetNextState=function(e){this.GetCurType()!=e&&(this.mNextState=e)},e.prototype.StandPos=function(e,t){this.mEntity.SetPos(e,t),this.SetNextState(AIUnitStateType.STAND)},e.prototype.MoveTo=function(e,t){var i=this.mStateList[AIUnitStateType.RUN];i.mAIUnitArgs.SetMovePos(e,t),this.SetNextState(AIUnitStateType.RUN)},e.prototype.Protect=function(e,t){var i=this.mStateList[AIUnitStateType.PROTECT];i.mAIUnitArgs.Protect(e,t),this.SetNextState(AIUnitStateType.PROTECT)},e.GetStandState=function(e){var t=new AIUnitStandState;return t.Init(e),t},e.TEMP_ARGS=new IAIUnitArgs,e}();__reflect(AIUnit.prototype,"AIUnit");var ViewLayerLevel;!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.MIDDLE=2]="MIDDLE",e[e.TOP=3]="TOP"}(ViewLayerLevel||(ViewLayerLevel={}));var AIUnitStateType=function(){function e(){}return e.STAND="STAND",e.Die="Die",e.RUN="RUN",e.BORN="BORN",e.Atk="Atk",e.HIT="HIT",e.PROTECT="BLOCK",e.FIND_NEXT_POS="FIND_NEXT_POS",e}();__reflect(AIUnitStateType.prototype,"AIUnitStateType");var AIUnitState=function(){function e(){this.mIndex=0,this.mAction=[],this.mIsEnter=!1,this.mAIUnitArgs=new AIUnitArgs
}return e.prototype.ClearOtherAnim=function(){},e.prototype.PlayHit=function(){return 0},e.prototype.PlayEvade=function(){return 0},e.prototype.Init=function(e){this.mIndex=0,this.mUnit=e;for(var t=0,i=this.mAction;t<i.length;t++){var o=i[t];o.Init(this)}},e.prototype.OnUpdate=function(e){var t=this.mAction[this.mIndex];if(!t)return void this.mUnit.StateEndEvent(this.mType);var i=t.OnUpdate(e);if(i==AIUnitReturn.BREAK)return void this.mUnit.StateEndEvent(this.mType);if(i==AIUnitReturn.NEXT){t.OnExit();var o=this.mAction[++this.mIndex];o?o.OnEnter():this.mUnit.StateEndEvent(this.mType)}},e.prototype.OnEnter=function(){this.mIndex=0;var e=this.mAction[this.mIndex];e&&e.OnEnter()},e.prototype.OnExit=function(){var e=this.mAction[this.mIndex];e&&e.OnExit()},e}();__reflect(AIUnitState.prototype,"AIUnitState",["IAIUnitState"]);var AIUnitReturn;!function(e){e[e.CONTINUE=0]="CONTINUE",e[e.NEXT=1]="NEXT",e[e.BREAK=2]="BREAK"}(AIUnitReturn||(AIUnitReturn={}));var AIUnitAction=function(){function e(){}return e.prototype.GetUnit=function(){return this.m_UnitState.mUnit},e.prototype.GetEntity=function(){return this.m_UnitState.mUnit.mEntity},e.prototype.GetArgs=function(){return this.m_UnitState.mAIUnitArgs},e.prototype.Init=function(e){this.m_UnitState=e},e.prototype.OnUpdate=function(e){return AIUnitReturn.NEXT},e.prototype.OnEnter=function(){},e.prototype.OnExit=function(){},e.POOL=[],e}();__reflect(AIUnitAction.prototype,"AIUnitAction");var RideShowPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.SetBodyId=function(e){var t=AppearanceConfig.GetUIPath(e);this.mScale=AppearanceConfig.GetScale(e),this.m_Ride!=t&&(this.m_Ride=t,-1!=t.indexOf("horse")?this.m_RideHead=AppearanceConfig.GetUIPath(e,null,null,!0):this.m_RideHead=null,this._Update())},t.prototype.SetBody=function(e){this.mScale=1,this.m_Ride!=e&&(this.m_Ride=e,this._Update())},t.prototype._SetSource=function(e,t){e&&(StringUtils.IsNullOrEmpty(t)?e.LoadByUrl(null):e.LoadByUrl(t,-1,!0))},t.prototype._NewMovieObject=function(){var e=new MovieObject,t=1;return e.scaleX=e.scaleY=t,e.x=this.width*t>>1,e.y=this.height*t>>1,this.addChild(e),e},t.prototype._Update=function(){this.$stage&&(this.rideMv=this._InitMv(this.m_Ride,this.rideMv),this.rideMv&&(this.rideMv.scaleX=this.rideMv.scaleY=this.mScale),this.m_RideHead&&(this.rideHeadMv=this._InitMv(this.m_RideHead,this.rideHeadMv)),this.rideHeadMv&&(this.rideHeadMv.visible=this.m_RideHead?!0:!1),this.m_Ride&&(this.m_RideHead&&this.rideMv.once(egret.Event.CHANGE,this._LoadBodyEnd,this),this._SetSource(this.rideMv,this.m_Ride)))},t.prototype._LoadBodyEnd=function(){this.m_RideHead&&(this.rideHeadMv.once(egret.Event.CHANGE,this.SyncFrame,this),this.rideHeadMv.LoadByUrl(this.m_RideHead,-1,!1))},t.prototype.SyncFrame=function(e){var t=e.currentTarget;this.rideMv&&!StringUtils.IsNullOrEmpty(this.m_RideHead)?t.gotoAndPlay(this.rideMv.currentFrame,-1):t.gotoAndPlay(1,-1)},t.prototype._InitMv=function(e,t){return StringUtils.IsNullOrEmpty(e)?t&&t.LoadByUrl(null):t||(t=this._NewMovieObject()),t},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._Update()},t}(eui.Component);__reflect(RideShowPanel.prototype,"RideShowPanel",["eui.UIComponent","egret.DisplayObject"]);var BUnitListAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mList=[],t.mIndex=0,t.mIsEnter=!0,t}return __extends(t,e),t.CreateList=function(e){var i=new t;return i.mList=e,i},t.prototype.OnUpdate=function(e){var t=this.mList[this.mIndex];if(t){t.mInit||(t.Init(this.mContext),t.mInit=!0),this.mIsEnter&&(t.OnEnter(),this.mIsEnter=!1);var i=t.OnUpdate(e);return i!=AIUnitReturn.CONTINUE&&(t.OnExit(),++this.mIndex,this.mIsEnter=!0),AIUnitReturn.CONTINUE}return AIUnitReturn.NEXT},t.prototype.OnExit=function(){},t}(BUnitAction);__reflect(BUnitListAction.prototype,"BUnitListAction");var RoleShowPanel=function(e){function t(){var t=e.call(this)||this;return t.mScale=1,t.mShowTianx=!0,t.m_Offset=null,t}return __extends(t,e),t.prototype.SetShowImage=function(e){var t=new RoleShowData;t.job=e.job,t.sex=e.sex,t.shows=e.shows,this.SetAll(t)},t.prototype.SetShowMarry=function(e){var t=new RoleShowData;t.job=e.job,t.sex=e.sex,t.shows=e.shows,this.SetAll(t)},t.prototype.ResetData=function(){this.m_Weapon=null,this.m_Body=null,this.m_Wing=null,this.m_Ride=null,this.m_Tianx=null,this.m_huoyan=null,this.m_zx=null},t.prototype.SetWeapon=function(e){e?this.m_Weapon=e:this.m_Weapon=null,this._Update()},t.prototype.SetBody=function(e){null!=e?this.m_Body=e:this.m_Body=null,this._Update()},t.prototype.SetWing=function(e){null!=e?this.m_Wing=e:this.m_Wing=null,this._Update()},t.prototype.SetFir=function(e){null!=e?this.m_huoyan=e:this.m_huoyan=null,this._Update()},t.prototype.SetFormation=function(e){null!=e?this.m_zx=e:this.m_zx=null,this._Update()},t.prototype.SetRide=function(e){null!=e?this.m_Ride=e:this.m_Ride=null,this._Update()},t.prototype.SetTianx=function(e){this.mShowTianx&&(null!=e?this.m_Tianx=e:this.m_Tianx=null,this._Update())},t.prototype.SetTitle=function(e){this.m_Title=e||"",this.imgTitle&&this._Update()},t.prototype.SetTianxPos=function(e,t){this.tianx&&(null!=e&&(this.tianx.x=e),null!=t&&(this.tianx.y=t))},t.prototype._SetSource=function(e,t,i){e&&(t?i?e.name?e.Play(t,e.name||null,-1,!0):e.LoadByUrl(t,-1,!0):(e.once(egret.Event.CHANGE,this.SyncFrame,this),e.LoadByUrl(t,-1,!1)):e.LoadByUrl(null))},t.prototype._NewMovieObject=function(e){var i=new MovieObject;i.__temp_index__=e;var o=this.mScale||1.5;return i.scaleX=i.scaleY=o,i.x=this.width*o>>1,i.y=this.height*o>>1,this.addChild(i),this.$children.sort(t.SORT),i},t.SORT=function(e,t){return(e.__temp_index__||0)-(t.__temp_index__||0)},t.prototype._Update=function(){this.$stage&&TimerManager.ins().doNext(this._DoUpdate,this)},t.prototype._DoUpdate=function(){if(this.$stage){this.zhenxindMv=this._InitMv(this.m_zx,this.zhenxindMv,0),this.rideMv=this._InitMv(this.m_Ride,this.rideMv,1),this.wingMv=this._InitMv(this.m_Wing,this.wingMv,2),this.bodyMv=this._InitMv(this.m_Body,this.bodyMv,3),this.weaponMv=this._InitMv(this.m_Weapon,this.weaponMv,5),this.tianx=this._InitMv(this.m_Tianx,this.tianx,4),this.rideHeadMv=this._InitMv(this.m_RideHead,this.rideHeadMv,6),this.huoyandMv=this._InitMv(this.m_huoyan,this.huoyandMv,7),this._SetImgTitle(this.m_Title),StringUtils.IsNullOrEmpty(this.m_Body)?this._LoadBodyEnd():(this.bodyMv.once(egret.Event.CHANGE,this._LoadBodyEnd,this),this._SetSource(this.bodyMv,this.m_Body,!0));var e=this.m_Offset;this.SetOffset(this.zhenxindMv,e),this.SetOffset(this.wingMv,e),this.SetOffset(this.bodyMv,e),this.SetOffset(this.weaponMv,e),this.SetOffset(this.huoyandMv,e),this.imgTitle&&this.m_Title&&(this.imgTitle.y=-330+(e?e.y:0))}},t.prototype._InitMv=function(e,t,i){return e?t||(t=this._NewMovieObject(i),4==i&&(t.x=-150,t.y=-210)):t&&t.LoadByUrl(null),t},t.prototype._SetImgTitle=function(e){(this.imgTitle||e)&&(this.imgTitle||(this.imgTitle=new eui.Image,this.imgTitle.horizontalCenter=0,this.imgTitle.y=-270,this.addChildAt(this.imgTitle,this.numChildren)),this.imgTitle.source=e||"")},t.prototype._LoadBodyEnd=function(){this._SetSource(this.zhenxindMv,this.m_zx,!1),this._SetSource(this.wingMv,this.m_Wing,!1),this._SetSource(this.rideMv,this.m_Ride,!1),this._SetSource(this.rideHeadMv,this.m_RideHead,!1),this._SetSource(this.weaponMv,this.m_Weapon,!1),this._SetSource(this.tianx,this.m_Tianx,!1),this._SetSource(this.huoyandMv,this.m_huoyan,!1)},t.prototype.SyncFrame=function(e){var t=e.currentTarget;this.bodyMv&&!StringUtils.IsNullOrEmpty(this.m_Body)?t.gotoAndPlay(this.bodyMv.currentFrame,-1):t.gotoAndPlay(1,-1)},t.GetPath=function(e,t,i,o){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=!1),!e)return"";var n=AppearanceConfig.GetUIAppe(e,t,i,!1,o);return n?ResDataPath.GetMovieStandPath(n):""},t.GetHeadPath=function(e){if(!e)return"";var t=AppearanceConfig.GetUIAppe(e,null,null,!0);return t?ResDataPath.GetMovieStandPath(t):""},t.prototype.SetAll=function(e){var i;if(i=egret.is(e,"Role")?e.GetSubRoleData():e){var o=i.GetRideId(),n=o>0;this.m_Weapon=t.GetPath(i.GetSwordId(),i.job,i.sex,n),this.m_Body=t.GetPath(i.GetBodyId(),i.job,i.sex,n),this.m_Wing=t.GetPath(i.GetWingId(),n),this.m_Ride=t.GetPath(o),this.m_RideHead=t.GetHeadPath(o),this.m_Title=i.GetTitleId()?GameGlobal.Config.TitleConf[i.GetTitleId()].icon:"",this.m_huoyan=t.GetPath(i.GetFir()),this.m_zx=t.GetPath(i.GetFormation()),this.m_Offset=AppearanceConfig.GetRideOffset(o,!0),this.mShowTianx&&(this.m_Tianx=t.GetPath(i.GetTianx())),this._Update()}},t.prototype.SetOffset=function(e,t){e&&(t?(e.x=t.x,e.y=t.y):(e.x=0,e.y=0))},t.prototype.Set=function(e,i){var o;o=egret.is(i,"Role")?i.GetSubRoleData():i,e==RoleShowDressType.ARM?this.SetWeapon(t.GetPath(o.GetSwordId(),o.job,o.sex)):e==RoleShowDressType.ROLE?this.SetBody(t.GetPath(o.GetBodyId(),o.job,o.sex)):e==RoleShowDressType.WING?this.SetWing(t.GetPath(o.GetWingId())):e==RoleShowDressType.RIDE?this.SetRide(t.GetPath(o.GetRideId())):e==RoleShowDressType.TIANX?this.SetTianx(t.GetPath(o.GetTianx())):console.log("roleshowpanel not type "+e)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._Update()},t.prototype.ClearCache=function(){this.wingMv&&this.wingMv.ClearCache(),this.bodyMv&&this.bodyMv.ClearCache(),this.weaponMv&&this.weaponMv.ClearCache(),this.tianx&&this.tianx.ClearCache(),this.rideMv&&this.rideMv.ClearCache(),this.rideHeadMv&&this.rideHeadMv.ClearCache(),this.huoyandMv&&this.huoyandMv.ClearCache(),this.zhenxindMv&&this.zhenxindMv.ClearCache(),this.m_Weapon=null,this.m_Body=null,this.m_Wing=null,this.m_Ride=null,this.m_RideHead=null,this.m_Tianx=null,this.m_huoyan=null,this.m_zx=null,this.m_Offset=null},t.prototype.Clear=function(){this.wingMv&&this.wingMv.Clear(),this.bodyMv&&this.bodyMv.Clear(),this.weaponMv&&this.weaponMv.Clear(),this.tianx&&this.tianx.Clear(),this.rideMv&&this.rideMv.Clear(),this.rideHeadMv&&this.rideHeadMv.Clear(),this.huoyandMv&&this.huoyandMv.Clear(),this.zhenxindMv&&this.zhenxindMv.Clear(),this.m_Weapon=null,this.m_Body=null,this.m_Wing=null,this.m_Ride=null,this.m_RideHead=null,this.m_Tianx=null,this.m_huoyan=null,this.m_zx=null},t}(eui.Component);__reflect(RoleShowPanel.prototype,"RoleShowPanel",["eui.UIComponent","egret.DisplayObject"]);var EntityRole=function(e){function t(){var t=e.call(this)||this;return t.skinDic={},t}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t);var i=t.shows.shows;i&&(this.mBodyId=i[RoleShowDataType.ROLE_SKIN]||0,this.mRideId=i[RoleShowDataType.ROLE_RIDE]||0,this.mWingId=i[RoleShowDataType.ROLE_WING]||0,this.mTianxianId=i[RoleShowDataType.ROLE_TIANXIAN]||0,this.mSwordId=i[RoleShowDataType.ROLE_SWORD]||0,this.mTitle=i[RoleShowDataType.ROLE_TITLE]||0,this.job=t.shows.job,this.sex=t.shows.sex)},t.prototype.UpdateTemplateData=function(e,t,i){switch(e){case UserTemplate.TYPE_RIDE:this.mRideId=t;break;case UserTemplate.TYPE_WING:this.mWingId=t;break;case UserTemplate.TYPE_TIANX:this.mTianxianId=t;break;case UserTemplate.TYPE_SHENGB:this.mSwordId=t;break;default:return}this.skinDic[e]=i,GameGlobal.RaidMgr.UpdateRole()},t.prototype.MergeData=function(e){return this.type=e.type,this.masterHandle=e.masterHandle,this.handle=e.handle,this.serverId=e.serverId,this.guildName=e.guildName,this.guildID=e.guildID,this.entityPingJi=e.entityPingJi,e.x&&(this.x=e.x),e.y&&(this.y=e.y),this},t.prototype.GetSkillIDs=function(){return this.skillsData},t.prototype.GetName=function(){return this.entityName},t.prototype.GetTitle=function(){return this.mTitle||0},t.prototype.GetWeaponId=function(){return RoleShowData.GetSwordAppId(this.mSwordId,this.job,this.sex)},t.prototype.GetWingId=function(){return RoleShowData.GetWingAppId(this.mWingId)},t.prototype.GetRideId=function(){return RoleShowData.GetRideAppId(this.mRideId)},t.prototype.GetBodyId=function(){return RoleShowData.GetBodyAppId(this.mBodyId,this.job,this.sex)},t.prototype.GetBodyResPath=function(){return AppearanceConfig.GetAppe(this.GetBodyId(),this.job,this.sex)},t.prototype.GetWeapontResPath=function(){},t}(EntityData);__reflect(EntityRole.prototype,"EntityRole");var MoveTeam=function(){function e(){this.mMasterHandle=0,this.mMember=[]}return e.prototype.GetInfo=function(){if(!this.mMember[0])return null;var e=this.mMember[0].mTarget.GetInfo();return e?e:null},e.prototype.GetX=function(){var e=this.GetInfo();return e?e.x:0},e.prototype.GetY=function(){var e=this.GetInfo();return e?e.y:0},e.prototype.Init=function(e){for(var t=[],i=null,o=0,n=e;o<n.length;o++){var a=n[o];a.mTeamHandle=this.mMasterHandle,a.UpdateAction(EntityClipType.STAND,!1);var r=new MoveMember;r.mTarget=a,t.push(r),i&&(a.SetPos(a.x,a.y),r.mPre=i),i=r}this.mMember=t},e.prototype.Clear=function(){for(var e=0,t=this.mMember;e<t.length;e++){var i=t[e];i.mTarget&&(i.mTarget.mTeamHandle=null)}this.mMember=[],this.mOrderId=null},e.prototype.AddEntity=function(e){if(e){e.mTeamHandle=this.mMasterHandle,e.UpdateAction(EntityClipType.STAND,!1);var t=new MoveMember;t.mTarget=e;var i=this.mMember[this.mMember.length-1];i&&(e.SetPos(i.mTarget.x,i.mTarget.y),t.mPre=i),this.mMember.push(t)}},e.prototype.RemoveMem=function(e){for(var t=0;t<this.mMember.length;t++){var i=this.mMember[t].mTarget;if(i&&i.GetHandle()==e){var o=this.mMember[t].mPre,n=this.mMember[t+1];n&&(n.mPre=o),this.mMember.splice(t,1),i.mTeamHandle=null;break}}},e.prototype.GetMember=function(){for(var e=[],t=0,i=this.mMember;t<i.length;t++){var o=i[t],n=o.mTarget;if(n){var a=n.GetInfo();a.x=n.x,a.y=n.y,e.push(a)}}return e},e.prototype.MoveTo=function(e,t,i,o,n){if(this.mMember.length){this.mOrderId=e;var a=this.mMember[0];if(a&&a.mTarget)if(n)a.MoveTo(t,i,o);else{var r=GameMap.aStar.getPatch(a.mTarget.x,a.mTarget.y,t,i);r&&r.length?a.MoveToByAStar(r,o):a.MoveTo(t,i,o)}}},e.prototype.FlyTo=function(e,t){this.mMember.length&&(this.mOrderId=null,this.mMember[0].FlyTo(e,t))},e.prototype.Update=function(e){if(this.mMember.length){for(var t=this.mMember[0].Update(e),i=this.mMember.length-1;i>=1;--i)this.mMember[i].Update(e);if(null!=this.mOrderId&&-1!=this.mOrderId&&t==AIUnitMoveData.STATE_FINISH){var o=this.mOrderId;this.mOrderId=null;var n=this.mMember[0].mTarget;GameGlobal.RaidMgr.mMapRaid.OnMoveLeval(o,n.GetHandle(),n.x,n.y)}return t}return AIUnitMoveData.STATE_FINISH},e.NONE_ORDER=-1,e.MOVE_SPEED=140,e}();__reflect(MoveTeam.prototype,"MoveTeam");var NormalMoveTeam=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.INDEX=0,t.WAY=1,t.pathIndex=0,t}return __extends(t,e),t.prototype.GetNextPos=function(){var e=GameMap.mPath[this.pathIndex];if(!e)return null;var t=e.points,i=t[this.INDEX];return i||(this.INDEX>=t.length-1?i=t[0]:this.INDEX<=0&&(i=t[t.length-1])),this.INDEX+=this.WAY,this.INDEX>=t.length-1?this.WAY=-1:this.INDEX<=0&&(this.WAY=1),[Const.PosToPixel(e.x+i.x),Const.PosToPixel(e.y+i.y)]},t.prototype.SetRanStartPos=function(e){if(e&&e.length){var t=GameMap.mPath[this.pathIndex];if(t){var i=t.points;this.INDEX=MathUtils.limitInteger(0,i.length-1);var o=i[this.INDEX];o?e[0].SetPos(Const.PosToPixel(t.x+o.x),Const.PosToPixel(t.y+o.y)):e[0].SetPos(Const.PosToPixel(t.x+4),Const.PosToPixel(t.y+4));for(var n=1;n<e.length;n++)e[n].x=e[n-1].x-50,e[n].y=e[n-1].y}}},t.prototype.Init=function(i){GameMap.mPath&&GameMap.mPath.length&&(t.PATH_INDEX++,t.PATH_INDEX>=GameMap.mPath.length?t.PATH_INDEX=0:t.PATH_INDEX<0&&(t.PATH_INDEX=0),this.pathIndex=t.PATH_INDEX),i.length&&0==i[0].GetInfo().x&&0==i[0].GetInfo().y&&this.SetRanStartPos(i),e.prototype.Init.call(this,i);var o=this.GetNextPos();o&&this.MoveTo(MoveTeam.NONE_ORDER,o[0],o[1],0,!0)},t.prototype.Update=function(t){var i=e.prototype.Update.call(this,t);if(2==i){var o=this.GetNextPos();o&&this.MoveTo(MoveTeam.NONE_ORDER,o[0],o[1],0,!0)}return i},t.PATH_INDEX=-1,t}(MoveTeam);__reflect(NormalMoveTeam.prototype,"NormalMoveTeam");var MoveMember=function(){function e(){this.mIsMove=!1,this.m_MoveData=new AIUnitMoveData}return e.prototype.MoveToByAStar=function(e,t){t||(t=this.mPre?20:0),this.m_MoveData.InitByAStar(this.mTarget.x,this.mTarget.y,e,MoveTeam.MOVE_SPEED,t)&&(this.mTarget.SetDir(this.m_MoveData.mDir),this.mIsMove=!0),this.mIsMove&&this.mTarget.UpdateAction(EntityClipType.RUN,!1)},e.prototype.MoveTo=function(e,t,i){i||(i=this.mPre?20:0),this.m_MoveData.Init(this.mTarget.x,this.mTarget.y,e,t,MoveTeam.MOVE_SPEED,i)&&(this.mTarget.SetDir(this.m_MoveData.mDir),this.mIsMove=!0),this.mIsMove&&this.mTarget.UpdateAction(EntityClipType.RUN,!1)},e.prototype.FlyTo=function(e,t){this.m_MoveData&&this.m_MoveData.Stop(),this.mTarget.SetPos(e,t)},e.prototype.Update=function(e){if(!this.mIsMove)return this.CheckRun(),AIUnitMoveData.STATE_FINISH;var t=this.mTarget,i=this.m_MoveData.Update(e,t);return this.mTarget.SetDir(this.m_MoveData.mDir),this.mTarget.alpha=GameMap.checkAlpha(Const.PixelToPos(t.x),Const.PixelToPos(t.y))?.5:1,i==AIUnitMoveData.STATE_FINISH&&(this.CheckRun()||(this.mTarget.UpdateAction(EntityClipType.STAND,!1),this.mIsMove=!1)),i},e.prototype.CheckRun=function(){if(this.mPre){var e=this.mTarget.x,t=this.mTarget.y,i=this.mPre.mTarget.x,o=this.mPre.mTarget.y,n=i-e,a=o-t,r=n*n+a*a;if(r>=6e3)return this.MoveTo(i,o,0),!0}return!1},e}();__reflect(MoveMember.prototype,"MoveMember");var AttributeType;!function(e){e[e.atUp=-1]="atUp",e[e.atHp=0]="atHp",e[e.atMaxHp=1]="atMaxHp",e[e.atAttack=2]="atAttack",e[e.atDef=3]="atDef",e[e.atSpeed=4]="atSpeed",e[e.atCrit=5]="atCrit",e[e.atTough=6]="atTough",e[e.atHitRate=7]="atHitRate",e[e.atEvade=8]="atEvade",e[e.atDefy=9]="atDefy",e[e.atDefyReduction=10]="atDefyReduction",e[e.atDamageEnhance=11]="atDamageEnhance",e[e.atDamageReduction=12]="atDamageReduction",e[e.atDamageEnhancePerc=13]="atDamageEnhancePerc",e[e.atDamageReductionPerc=14]="atDamageReductionPerc",e[e.atCritEnhance=15]="atCritEnhance",e[e.atCritReduction=16]="atCritReduction",e[e.atPVPEnhance=17]="atPVPEnhance",e[e.atPVPReduction=18]="atPVPReduction",e[e.atPVEEnhance=19]="atPVEEnhance",e[e.atPVEReduction=20]="atPVEReduction",e[e.atSoulEnhance=23]="atSoulEnhance",e[e.atSoulReduction=24]="atSoulReduction",e[e.atShieldHP=25]="atShieldHP",e[e.atShieldMax=26]="atShieldMax",e[e.atSoulAttack=27]="atSoulAttack",e[e.atSoulDef=28]="atSoulDef",e[e.atSoulHitEnhance=29]="atSoulHitEnhance",e[e.atSoulHitReduction=30]="atSoulHitReduction",e[e.atPursuedEff=31]="atPursuedEff",e[e.atCureEff=32]="atCureEff",e[e.atConfineEff=33]="atConfineEff",e[e.atConfineResistEff=34]="atConfineResistEff",e[e.atCureReduceEff=35]="atCureReduceEff",e[e.atRestoreEff=36]="atRestoreEff",e[e.atPursuedResistEff=37]="atPursuedResistEff",e[e.atOutbloodEff=38]="atOutbloodEff",e[e.atOutbloodResistEff=39]="atOutbloodResistEff",e[e.atRageDrainEff=40]="atRageDrainEff",e[e.atRageAddEff=41]="atRageAddEff",e[e.atSpecialConfine=42]="atSpecialConfine",e[e.atPvPCritEnhance=43]="atPvPCritEnhance",e[e.atPvPCritReduction=44]="atPvPCritReduction",e[e.atCount=45]="atCount"}(AttributeType||(AttributeType={}));var AttributeValue=function(){function e(){}return e.BaseCritEnhance=15e3,e}();__reflect(AttributeValue.prototype,"AttributeValue");var KaiFuIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE,MessageDef.ACTIVITY_DABIAO_UPDATE,MessageDef.ACTIVITY_IS_GET_AWARDS,MessageDef.ACTIVITY_ADVANCED_INFO,MessageDef.ACTIVITY_ADVANCED_ICON_SHOW],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_124)?GameGlobal.ActivityKaiFuModel.RedPointAdvanced()?!0:GameGlobal.ActivityKaiFuModel.RedPointQiTian()?!0:GameGlobal.ActivityKaiFuModel.RedPointTarget()?!0:GameGlobal.ActivityKaiFuModel.RedPointAdvanceShop()?!0:!1:!1},t.prototype.checkShowIcon=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_124)?!0:!1},t.prototype.tapExecute=function(){KaiFuActivityWin.Show()},t}(RuleIconBase);__reflect(KaiFuIconRule.prototype,"KaiFuIconRule");var RoleBattleEntity=function(e){function t(){var t=e.call(this)||this;t._weapon=new BattleMvData(t,!1),t._wing=new BattleMvData(t,!1),t._horse=new BattleMvData(t,!1),t._horseHead=new BattleMvData(t,!1),t._ring=new BattleMvData(t,!1),t._godSoul=new BattleMvData(t,!1),t._formation=new BattleMvData(t,!1),t._disOrder={},t._formation.SetParent(t.m_Container,0),t._formation.SetNotState(),t._formation.SetPayNum(-1),t._horse.SetParent(t.m_Container,1),t._godSoul.SetParent(t.m_Container,2),t._godSoul.SetNotState(),t._godSoul.SetPayNum(-1),t._weapon.SetParent(t.m_Container,3);var i=(o={},o[EntityClipType.STAND]=!0,o[EntityClipType.RUN]=!0,o);return t._horse.mAnimType=i,t._horseHead.SetParent(t.m_Container,4),t._horseHead.mAnimType=i,t._horseHead.mIsHead=!0,t._wing.mSettingId=FuncOpenModel.SAVE_SYSTEM_SETTING_CB,t._wing.SetParent(t.m_Container,5),t._ring.mSettingId=FuncOpenModel.SAVE_SYSTEM_SETTING_TX,t._ring.SetParent(t,11),t._ring.mAnimType=(n={},n[EntityClipType.STAND]=!0,n),t._disOrder={},t._disOrder[t._horse.hashCode]=CharMcOrder.HORSE,t._disOrder[t.mBody.hashCode]=CharMcOrder.BODY,t._disOrder[t._weapon.hashCode]=CharMcOrder.WEAPON,t._disOrder[t._wing.hashCode]=CharMcOrder.WING,t._disOrder[t._horseHead.hashCode]=CharMcOrder.HORSE_HEAD,t._disOrder[t._godSoul.hashCode]=CharMcOrder.FIR,t._disOrder[t._formation.hashCode]=CharMcOrder.FORMATION,t;var o,n}return __extends(t,e),t.prototype.Init=function(t){this._horse.Init(),this._horseHead.Init(),this._weapon.Init(),this._wing.Init(),this._ring.Init(),this._godSoul.Init(),this._formation.Init(),e.prototype.Init.call(this,t)},t.prototype.UpdateSetting=function(t){e.prototype.UpdateSetting.call(this,t),t==FuncOpenModel.SAVE_SYSTEM_SETTING_CB?this._wing.UpdateSetting(t):t==FuncOpenModel.SAVE_SYSTEM_SETTING_TX&&this._ring.UpdateSetting(t)},t.prototype.IsReplaceShow=function(e){var t=!e;this.SetMvState(this._horse,t),this.SetMvState(this._horseHead,t),this.SetMvState(this._weapon,t),this.SetMvState(this._wing,t),this.SetMvState(this._ring,t),this.SetMvState(this._godSoul,t),this.SetMvState(this._formation,t),t&&this.UpdateOrder()},t.prototype.Dispose=function(){e.prototype.Dispose.call(this),this.mBody.ClearCache(),this._wing.ClearCache(),this._weapon.ClearCache(),this._horse.ClearCache(),this._horseHead.ClearCache(),this._ring&&this._ring.ClearCache(),this._godSoul&&this._godSoul.ClearCache(),this._formation&&this._formation.ClearCache()},t.prototype.UpdateInfo=function(t){var i=t.GetRideId();this._horse.SetId(i),this._horseHead.SetId(i);var o=null;(this.mBody.ride=i?!0:!1)&&(a={},a[EntityClipType.STAND]=!0,a[EntityClipType.ATTACK]=!0,a[EntityClipType.HIT]=!0,o=a),this.mBody.job=t.job,this.mBody.sex=t.sex,this.mBody.mAnimType=o,this._weapon.ride=i?!0:!1,this._weapon.job=t.job,this._weapon.sex=t.sex,this._weapon.mAnimType=o,this._weapon.SetId(t.GetWeaponId()),this._wing.ride=i?!0:!1,this._wing.SetId(t.GetWingId()),this._wing.mAnimType=o,this._ring.SetId(RoleShowData.GetTianxAppId(t.mTianxianId)),this._godSoul.SetId(RoleShowData.GetFirAppId(t.entityPingJi)),this._formation.SetId(RoleShowData.GetFormationAppId(t.entityPingJi));var n=AppearanceConfig.GetRideOffset(i);this.mBody.SetOffset(n),this._weapon.SetOffset(n),this._wing.SetOffset(n),this._godSoul.SetOffset(n),this._formation.SetOffset(n),this.mPosY=BattleEntity.POS+-38+n.y,e.prototype.UpdateInfo.call(this,t);var a},t.prototype.UpdateOrder=function(){if(!t.FRAME_ODER_DICT)for(var e=t.FRAME_ODER_DICT={},i=0,o=0,n=t.FRAME_ODER;o<n.length;o++){for(var a=n[o],r=e[i]={},s=0,l=0,c=a;l<c.length;l++){var u=c[l];r[u]=s++}++i}var p=t.FRAME_ODER_DICT[this.m_Dir],h=this._disOrder;this.m_Container.$children.sort(function(e,t){var i=e.hashCode,o=t.hashCode;return p[h[i]]-p[h[o]]})},t.prototype._BodyLoaded=function(){e.prototype._BodyLoaded.call(this),this._horse.Load(),this._horseHead.Load(),this._weapon.Load(),this._wing.Load(),this._ring.Load(),this._godSoul.Load(),this._formation.Load(),this.UpdateOrder(),!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_TX)&&this._ring.mv&&this._ring.UpdateWayTween()},t.FRAME_ODER=[[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.WEAPON,CharMcOrder.BODY,CharMcOrder.WING],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.WING],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.HORSE_HEAD],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.HORSE_HEAD],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.HORSE_HEAD],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.WING,CharMcOrder.BODY,CharMcOrder.WEAPON],[CharMcOrder.FORMATION,CharMcOrder.FIR,CharMcOrder.HORSE,CharMcOrder.BODY,CharMcOrder.WEAPON,CharMcOrder.WING]],t.FRAME_ODER_DICT=null,t}(BattleEntity);__reflect(RoleBattleEntity.prototype,"RoleBattleEntity");var BaseSound=function(){function e(){this._cache={},this._loadingCache=[]}return e.prototype.getSound=function(e){var t=RES.getRes(e);if(t)this._cache[e]&&(this._cache[e]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(e))return null;this._loadingCache.push(e),RES.getResAsync(e,this.onResourceLoadComplete,this)}return t},e.prototype.onResourceLoadComplete=function(e,t){var i=this._loadingCache.indexOf(t);-1!=i&&(this._loadingCache.splice(i,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e}();__reflect(BaseSound.prototype,"BaseSound");var BattleRaid=function(e){function t(){var t=e.call(this)||this;return t.mIsPlot=0,t.mIsVideo=!1,t.mIsManual=!1,t.mEntityDatas=[],t.m_AllTurnData=[],t.m_TurnData=[],t.m_TurnIndex=-1,t.m_TurnId=0,t.m_StartTime=1,t.m_IsEnter=!1,t}return __extends(t,e),t.prototype.GetSpeed=function(){return SystemSettingPanel.GetSpeed()},t.prototype.IsBackground=function(){return GameGlobal.RaidMgr.mShowType!=RaidMgr.TYPE_NORMAL},t.prototype.OnBackground=function(){this.mBattlePanel&&(this.mBattlePanel.visible=!1)},t.prototype.OnForeground=function(){this.mBattlePanel&&(this.mBattlePanel.visible=!0)},t.prototype.FinishBattle=function(){var e=this.m_TurnData[this.m_TurnIndex];e&&e.mInit&&e.OnExit(),this.m_TurnIndex=-1,this.m_AllTurnData=[],this.ExeFinishAction()||(console.error("not finish battle action !!!"),GameGlobal.RaidMgr.EnterCurMapRaid())},t.prototype.FinishBattleAndReward=function(){var e=this.m_TurnData[this.m_TurnIndex];e&&e.mInit&&e.OnExit(),this.m_TurnIndex=-1,this.m_AllTurnData=[],this.mFinishAction&&1==this.mFinishAction.ret&&(UserTips.InfoTip("已跳过关卡战斗，奖励已进入背包"),GameGlobal.RaidModel.SendGetBossReward()),GameGlobal.UserFb.sendExitFb()},t.prototype.ShowBattleLayer=function(){GameMap.GetBattleView().ShowDefault()},t.prototype.Create=function(e){e.team=this.CalcEntityTeam(e);var t=2==e.side;BattleCtrl.GetPos(t,e.posIndex,e),e.dir=t?7:3;var i=this.AddEntity(e);this.mNotShowBlood||i.ShowBloodBar();var o=new RaidAIUnit;i.SetAI(o),o.UpdateBlood(),GameMap.AddBattleEntity(i),i.SetPos(e.x,e.y)},t.prototype.OnPlotEnd=function(e){this.mIsPlot==e&&(this.mIsPlot=null,GameGlobal.MessageCenter.removeListener(MessageDef.PLOT_PLAY_END,this.OnPlotEnd,this),this.StartTurn())},t.prototype.OnEnter=function(){var e=this;this.m_IsEnter=!0,GameGlobal.RaidMgr.UpdateBGM();for(var t,i=this.mEntityDatas,o=0,n=i;o<n.length;o++)for(var a=n[o],r=0,s=a;r<s.length;r++){var l=s[r];if(l.masterHandle==GameGlobal.actorModel.actorID){t=this.mMySide=l.side;break}}var c=function(i){i.side!=t&&8==i.posIndex&&(e.mBossHandle=i.handle)};if(1==this.mMySide){for(var u=i[0],p=0,h=u;p<h.length;p++){var l=h[p];l.side=2}for(var d=i[1],_=0,f=d;_<f.length;_++){var l=f[_];l.side=1}var m=this.mEntityDatas[0];this.mEntityDatas[0]=this.mEntityDatas[1],this.mEntityDatas[1]=m}for(var g=i[0]||[],v=0,y=g;v<y.length;v++){var l=y[v];-1!=l.posIndex&&(c(l),this.Create(l))}for(var C=i[1]||[],b=0,S=C;b<S.length;b++){var l=S[b];-1!=l.posIndex&&(c(l),this.Create(l))}this.m_StartTime=AIConfig.START_TURN_WAIT_TIME;var G=this.OpenBattlePanel();G&&(this.mBattlePanel=G,G.visible=this.IsBackground()?!1:!0),this.ShowBattleLayer(),BattleMap.mFbType==UserFb.FB_TYPE_GUANQIABOSS&&GameGlobal.PlotModel.OnChapterBattleEnter(GameGlobal.UserFb.guanqiaID)&&(GameGlobal.MessageCenter.addListener(MessageDef.PLOT_PLAY_END,this.OnPlotEnd,this),this.mIsPlot=GameGlobal.UserFb.guanqiaID),this.UpdateMonPlot(),GameMap.GetBattleView().UpdateSort(!0),this.StartTurn()},t.prototype.UpdateMonPlot=function(){for(var e in this.mEntityList){var t=this.mEntityList[e],i=t.GetInfo();if(i&&i.type==EntityType.Monster){var o=i.HasPlot();if(o){t.SetPlot(o);break}}}},t.prototype.OpenBattlePanel=function(){return ViewManager.ins().open(GameBattlePanel)},t.prototype.OnExit=function(){this.mBattlePanel&&(ViewManager.ins().close(this.mBattlePanel),this.mBattlePanel=null),this.m_IsEnter=!1,GameMap.GetBattleView().Hide(),this.RemoveAllEntity(),this.mEntityDatas=[],this.m_AllTurnData=[],this.m_TurnData=[],GameMap.ClearBattleView(),this.ClearEntityEffMgr(),GameGlobal.MessageCenter.removeAll(this)},t.prototype.ClearEntityEffMgr=function(){GameGlobal.EntityEffMgr.Clear(!0)},t.prototype.Update=function(e){var t=1;this.mIsManual||(t=SystemSettingPanel.GetSpeed());var i=e*t,o=this.mEntityList;for(var n in o)o[n].mAI.Update(i);if(!this.mIsPlot){if(this.m_StartTime>0)return void(this.m_StartTime-=i);if(this.m_TurnIndex>=0&&this.m_TurnIndex<this.m_TurnData.length){var a=this.m_TurnData[this.m_TurnIndex];a?(a.mInit||(a.Init(this),a.OnEnter(),a.mInit=!0),a.OnUpdate(i)==AIUnitReturn.NEXT&&(a.OnExit(),++this.m_TurnIndex),this.m_TurnData[this.m_TurnIndex]||this.TurnFinish()):this.TurnFinish()}}},t.prototype.SetBattleData=function(e){this.mEntityDatas=e},t.prototype.Turn=function(e){this.m_TurnData=e,this.m_TurnIndex=0;var t=this.m_TurnData[this.m_TurnIndex];t||console.error("not turn data !!!"),GameGlobal.MessageCenter.dispatch(MessageDef.BATTLE_TURN_START)},t.prototype.TurnAll=function(e){this.mIsManual||(this.m_AllTurnData=e,this.StartTurn())},t.prototype.StartTurn=function(){if(!this.mIsPlot&&this.m_IsEnter&&!this.mIsManual)if(this.m_AllTurnData.length){++this.m_TurnId;var e=this.m_AllTurnData[0];this.m_AllTurnData.splice(0,1),e&&this.Turn(e),GameGlobal.MessageCenter.dispatch(MessageDef.BATTLE_TURN)}else this.ExeFinishAction()},t.prototype.ExeFinishAction=function(){return this.mFinishAction?(this.mFinishAction.Execute(this),this.mFinishAction=null,!0):!1},t.prototype.GetTurnId=function(){return this.m_TurnId},t.prototype.TurnFinish=function(){this.mIsManual?(this.ExeFinishAction(),GameSocket.ins().Rpc(C2sProtocol.cs_battle_play_finish)):this.StartTurn()},t.prototype.SetFinishAction=function(e){this.mFinishAction=e,this.mIsManual&&this.m_TurnData.length&&this.m_TurnIndex>=this.m_TurnData.length&&this.ExeFinishAction()},t.prototype.SetManual=function(e){this.mIsManual=e},t.prototype.StartManual=function(e,t){if(++this.m_TurnId,GameGlobal.MessageCenter.dispatch(MessageDef.BATTLE_TURN),this.mBattlePanel&&egret.is(this.mBattlePanel,"GameBattlePanel")){var i=this.mBattlePanel;i.StartManual(e,t)}},t.prototype.SetAuto=function(e){if(this.mBattlePanel&&egret.is(this.mBattlePanel,"GameBattlePanel")){var t=this.mBattlePanel;t.SetAuto(e)}},t.prototype.UseSkill=function(e){var t=new Sproto.cs_battle_use_skill_request;t.use_skill_list=[];for(var i=0,o=e;i<o.length;i++){var n=o[i],a=new Sproto.use_skill_data;a.skillid=n.skillId,a.handler=n.handle,a.targets=n.targets,t.use_skill_list.push(a)}GameSocket.ins().Rpc(C2sProtocol.cs_battle_use_skill,t)},t.prototype.SendSetAuto=function(e){var t=new Sproto.cs_battle_set_auto_request;t.isauto=e?1:0,GameSocket.ins().Rpc(C2sProtocol.cs_battle_set_auto,t)},t.prototype.OnEventDamage=function(e){},t.MAX_INDEX=9999,t
}(Raid);__reflect(BattleRaid.prototype,"BattleRaid");var CommonMapRaid=function(e){function t(){var t=e.call(this)||this;return t.m_IsAutoReborn=!1,t.m_CreateGapSetting=.07,t.m_CreateGap=0,t}return __extends(t,e),t.prototype.GetSceneId=function(){return GameGlobal.Config.MapConfig[this.mMapId].scenes[0]},t.prototype.AddView=function(e){var t=this.GetGameMapPanel();return t?void t.AddChildBaseView(e):void console.error("not GameMapPanel !!!")},t.prototype.OnBackground=function(){e.prototype.OnBackground.call(this),this.OnHideView()},t.prototype.OnForeground=function(){e.prototype.OnForeground.call(this),this.OnShowView()},t.prototype.Clear=function(){e.prototype.Clear.call(this),this.m_CreateGap=0,this.m_CreatePlayerList=null},t.prototype.OnShowView=function(){LayerManager.UI_GAME_MAP.visible=!0},t.prototype.OnHideView=function(){LayerManager.UI_GAME_MAP.visible=!1},t.prototype.SetSelectEntity=function(e){var t=this.GetGameMapPanel();t&&t.SetSelect(e)},t.prototype.ClearSelectEntity=function(e){var t=this.GetGameMapPanel();t&&t.ClearSelectEntity(e)},t.prototype.IsIsAutoReborn=function(){return this.m_IsAutoReborn},t.prototype.SetCheckState=function(e){this.m_IsAutoReborn=e,this.m_RebornCheckbox&&(this.m_RebornCheckbox.selected=e)},t.prototype.SetRebornCheckbox=function(e){e&&(this.m_RebornCheckbox&&(this.m_RebornCheckbox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickReborn,this),this.m_RebornCheckbox=null),this.m_RebornCheckbox=e,this.m_RebornCheckbox.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickReborn,this))},t.prototype._OnClickReborn=function(){var e=this;if(this.m_RebornCheckbox){var t=this.GetRebornYb();if(!t)return void console.error("没有设置复活消耗数据");if(!this.m_RebornCheckbox.selected)return this.SetCheckState(!1),void UserTips.ins().showTips("已取消挑战中自动复活");var i=MoneyConstToName[t.id],o=t.count;WarnWin.show("确定要在被击败时自动复活吗？<font color='#019704'>\n每次复活将消耗"+o+i+"</font>",function(){e.m_RebornCheckbox&&(Checker.Money(t.id,t.count)?(UserTips.ins().showTips("已开启挑战中自动复活"),e.SetCheckState(!0)):e.SetCheckState(!1))},this,function(){e.SetCheckState(!1)},this)}},t.prototype.GetRebornYb=function(){return null},t.prototype.SendRelive=function(){},t.prototype.ShowRebornView=function(e){var t=this,i=this.GetRebornYb();if(!i)return void console.error("没有设置复活消耗数据");if(this.m_IsAutoReborn){if(Checker.Money(i.id,i.count))return void this.SendRelive();this.SetCheckState(!1)}var o=this.GetGameMapPanel();return o?void o.ShowRebornView(e,i,function(){t.SendRelive()}):void console.error("not GameMapPanel !!!")},t.prototype.RemoveRebornView=function(){var e=this.GetGameMapPanel();e&&e.RemoveRebornView()},t.prototype.GetGameMapPanel=function(){var e=ViewManager.ins().getView(GameMapPanel);if(e)return e},t.prototype.Update=function(t){if(e.prototype.Update.call(this,t),this.m_CreatePlayerList&&(this.m_CreateGap+=t)>=this.m_CreateGapSetting){this.m_CreateGap=0;var i=this.m_CreatePlayerList.pop();i&&this.CreateRole(i),this.m_CreatePlayerList.length||(this.m_CreatePlayerList=null,this.m_CreateGap=0)}},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.DoEnter()},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),this.DoExit()},t.prototype.DoEnter=function(){var e=ViewManager.ins().open(GameMapPanel);e.mRaid=this,e.visible=this.IsBackground()?!1:!0,LayerManager.UI_GAME_MAP.visible=e.visible,e.SetHelpId(this.m_HelpId)},t.prototype.DoExit=function(){ViewManager.ins().close(GameMapPanel),this.m_RebornCheckbox&&(this.m_RebornCheckbox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClickReborn,this),this.m_RebornCheckbox=null)},t.prototype.GetMyTeam=function(){return this.cTeam[GameGlobal.actorModel.actorID]},t.prototype.OnMapClick=function(t,i){var o=e.prototype.OnMapClick.call(this,t,i);return o&&(GameGlobal.CommonRaidModel._MapMove(this.mMapId,t,i),GameGlobal.MessageCenter.dispatch(MessageDef.MINI_MAP_UPDATE_LIST)),o},t.prototype.OtherMoveTo=function(e,t,i){this.cTeam[e]&&e!=GameGlobal.actorModel.actorID&&this.cTeam[e].MoveTo(MoveTeam.NONE_ORDER,t,i,0,this.IsBackground())},t.prototype.FlyTo=function(e,t,i){this.cTeam[e]&&this.cTeam[e].FlyTo(t,i)},t.prototype.CreateMyRole=function(e){var t=[],i=new EntityRole;i.parserBase({ownerid:e.id,handler:e.id,type:EntityType.Role,shows:{job:e.job,sex:e.sex,shows:e.shows,serverid:e.serverid,guildname:e.guildname,guildid:e.guildid}}),i.x=Const.PosToPixel(e.x),i.y=Const.PosToPixel(e.y),i.entityName=e.name,t.push(i),this.AddTeam(e.id,t)},t.prototype.CreateRoleList=function(e){this.m_CreatePlayerList=e||[],this.m_CreateGap=0},t.prototype.CreateRole=function(e){var t=[],i=new EntityRole;i.parserBase({ownerid:e.id,handler:e.id,type:EntityType.Role,shows:{job:e.job,sex:e.sex,shows:e.shows,serverid:e.serverid,guildname:e.guildname,guildid:e.guildid}}),i.x=e.x,i.y=e.y,i.entityName=e.name,t.push(i),this.AddTeam(e.id,t)},t.prototype.CreateMyShapeShiftRole=function(){},t.prototype.CreateTeam=function(){return new CommonMoveTeam},t.prototype.RemoveEntity=function(t){var i=this.mEntityList[t];if(i){var o=i.mTeamHandle;if(o){var n=this.cTeam[o];n?(n.RemoveMem(t),n.mMember.length<1&&this.DismissTeam(o)):delete this.cTeam[o]}}return e.prototype.RemoveEntity.call(this,t)},t.prototype.GetTeamModel=function(){return null},t.prototype.DelayUpdateTeam=function(){var e=this.GetTeamModel();e&&TimerManager.ins().doTimer(400,1,this.UpdateTeam,this)},t.prototype.UpdateTeam=function(){var e=this.GetTeamModel();if(e){var t={};for(var i in this.mEntityList)t[Number(i)]=!0;var o={};for(var i in this.cTeam)o[Number(i)]=!0;var n=e.GetAllTeam();for(var i in o)n[i]||this.DismissTeam(Number(i));for(var i in n){for(var a=Number(i),r=n[i],s=0,l=r;s<l.length;s++){var c=l[s];t[c]&&delete t[c]}if(this.cTeam[a])this.UpdateTeamEntityList(a,r);else for(var u=[],p=0,h=r;p<h.length;p++){var c=h[p],d=this.GetEntity(c);d&&u.push(d),this.CreateTeamData(a,u)}}for(var c in t){var _=Number(c),d=this.GetEntity(_);d&&this.CreateTeamData(_,[d])}}},t.prototype.UpdateTeamEntityList=function(e,t){var i=this.cTeam[e];if(i){for(var o={},n=0,a=t;n<a.length;n++){var r=a[n];o[r]=!0}for(var s={},l=0,c=i.mMember;l<c.length;l++){var u=c[l];u.mTarget&&(s[u.mTarget.GetHandle()]=!0)}for(var p in s){var h=Number(p);o[h]||i.RemoveMem(h)}for(var p in o){var h=Number(p);if(!s[h]){var d=this.GetEntity(h);if(d){if(d.mTeamHandle){var _=this.cTeam[d.mTeamHandle];_&&_.RemoveMem(h)}i.AddEntity(d)}}}}},t}(MapRaid);__reflect(CommonMapRaid.prototype,"CommonMapRaid");var GangMapTaskInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mTaskId=e.id,this.mCount=e.count,this.mResetCount=e.recount,this.mRewardStatus=e.rewardStatus},e}();__reflect(GangMapTaskInfo.prototype,"GangMapTaskInfo");var GangMapExchangInfo=function(){function e(){this.mGMItemMap={}}return e.prototype.UpdateInfo=function(e){this.mRefreshTime=e.refreshTime,this.mRefreshCount=e.refreshCount,this.mExchangeList=e.exchangeList,this.mExchangedMark=e.exchangeMark;for(var t=0,i=e.guildBag;t<i.length;t++){var o=i[t];this.mGMItemMap[o.id]=o.count}},e.prototype.UpdateBagInfo=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];this.mGMItemMap[o.id]=(this.mGMItemMap[o.id]||0)+o.count}},e.prototype.GetGangMapItemNum=function(e){return this.mGMItemMap[e]||0},e.prototype.HasExchangeItem=function(e){return 0==(this.mExchangedMark&Math.pow(2,e-1))},e.prototype.CanItemExchange=function(){for(var e=0,t=this.mExchangeList;e<t.length;e++){var i=t[e],o=GameGlobal.Config.GuildMapBuyConfig[i];if(o){for(var n=!0,a=0,r=o.cost;a<r.length;a++){var s=r[a];this.GetGangMapItemNum(s.id)<s.count&&(n=!1)}if(n&&!this.HasExchangeItem(i))return!0}}return!1},e}();__reflect(GangMapExchangInfo.prototype,"GangMapExchangInfo");var RoleMvShowPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(RoleShowPanel);__reflect(RoleMvShowPanel.prototype,"RoleMvShowPanel");var RoleShowData=function(){function e(){this.rideId=0,this.wingId=0,this.tianxId=0,this.titleId=0,this.pingji=0}return e.prototype.GetSwordId=function(){return this.swordID?this.swordID:e.GetSwordAppId(this.shows?this.shows[RoleShowDataType.ROLE_SWORD]:0,this.job,this.sex)},e.prototype.GetWingId=function(){return this.wingId?this.wingId:e.GetWingAppId(this.shows?this.shows[RoleShowDataType.ROLE_WING]:0)},e.prototype.GetRideId=function(){return this.rideId?this.rideId:e.GetRideAppId(this.shows?this.shows[RoleShowDataType.ROLE_RIDE]:0)},e.prototype.GetTianx=function(){return this.tianxId?this.tianxId:e.GetTianxAppId(this.shows?this.shows[RoleShowDataType.ROLE_TIANXIAN]:0)},e.prototype.GetFir=function(){return this.pingji?e.GetFirAppId(this.pingji):0},e.prototype.GetFormation=function(){return this.pingji?e.GetFormationAppId(this.pingji):0},e.prototype.GetBodyId=function(){return this.clothID?this.clothID:e.GetBodyAppId(this.shows?this.shows[RoleShowDataType.ROLE_SKIN]:0,this.job,this.sex)},e.prototype.GetTitleId=function(){return this.titleId?this.titleId:this.shows?this.shows[RoleShowDataType.ROLE_TITLE]||0:0},e.GetSwordAppId=function(e,t,i){var o=GameGlobal.Config.WeaponSkinConfig[e];return o?o.pid:11e3},e.GetWingAppId=function(e){var t=GameGlobal.Config.WingSkinConfig[e];return t?t.pid:0},e.GetRideAppId=function(e){var t=GameGlobal.Config.RideSkinConfig[e];return t?t.pid:0},e.GetTianxAppId=function(e){var t=GameGlobal.Config.FairySkinConfig[e];return t?t.pid:0},e.GetFirAppId=function(e){var t=GameGlobal.Config.FirSkinConfig[e];return t?t.pid:0},e.GetFormationAppId=function(e){var t=GameGlobal.Config.FormationSkinConfig[e];return t?t.pid:0},e.GetPingJiAppId=function(e){var t=GameGlobal.Config.RateSkinConfig[e];return t?t.name:""},e.GetJinJieAppId=function(e){var t=GameGlobal.Config.RealmConfig[e];return t?t.name:""},e.GetBodyAppId=function(e,t,i){var o=GameGlobal.Config.FashionSkinConfig[e];return o&&(o=o[i])?o.pid:1001},e}();__reflect(RoleShowData.prototype,"RoleShowData");var RoleShowDataType=function(){function e(){}return e.ROLE_RIDE=0,e.ROLE_WING=1,e.ROLE_TIANXIAN=2,e.ROLE_SWORD=3,e.ROLE_SKIN=4,e.ROLE_TITLE=5,e.ROLE_FIR=6,e.XIANLV_FZ=0,e.XIANLV_XW=1,e.PET_TL=0,e.PET_SH=1,e.TIANNV_LQ=1,e.TIANNV_HUA=2,e.TIANSHEN_FLY=0,e}();__reflect(RoleShowDataType.prototype,"RoleShowDataType");var RoleShowDressType;!function(e){e[e.ROLE=1]="ROLE",e[e.ARM=2]="ARM",e[e.WING=3]="WING",e[e.RIDE=4]="RIDE",e[e.TIANX=5]="TIANX"}(RoleShowDressType||(RoleShowDressType={}));var Timer=function(){function e(){this.m_Timer=-1}return e.TimeOut=function(t,i){var o=new e,n=function(){-1!=o.m_Timer&&(t(),o.m_Timer=-1)};return o.m_Timer=setTimeout(n,i),o},e.prototype.Stop=function(){-1!=this.m_Timer&&clearTimeout(this.m_Timer),this.m_Timer=-1},e}();__reflect(Timer.prototype,"Timer");var SimpleRankPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"rankType",{set:function(e){this.m_RankType=e},enumerable:!0,configurable:!0}),t.prototype._UpdateRank=function(){!this.m_RankType},t.prototype.childrenCreated=function(){this.seeRank.textFlow=(new egret.HtmlTextParser).parser("<font><u>"+this.seeRank.text+"</u></font>")},t.prototype.open=function(){this.visible=GameGlobal.actorModel.level>=60,this.seeRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this._UpdateRank()},t.prototype.close=function(){MessageCenter.ins().removeAll(this),this.seeRank.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.updataFirstThree=function(e){if(e){if(e.type==this.m_RankType)for(var t=0;3>t;t++){e.getDataList(t)}}else for(var t=0;3>t;t++){e.getDataList(t);this._SetRankName(t,null),this._SetRankHarm(t,null)}},t.prototype._SetRankName=function(e,t){this["name"+e].text=t||"暂无"},t.prototype._SetRankHarm=function(e,t){void 0===t&&(t="0");var i=this["harm"+e];t?(i.visible=!0,i.text=t+"关"):i.visible=!1},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.seeRank:if(!this.m_RankType)return}},t}(eui.Component);__reflect(SimpleRankPanel.prototype,"SimpleRankPanel",["eui.UIComponent","egret.DisplayObject"]);var StarList=function(e){function t(t,i){void 0===t&&(t=10),void 0===i&&(i=0);var o=e.call(this)||this;return o.m_StarItem=[],o.m_StatListLength=t,o.m_StarNum=i,o}return __extends(t,e),Object.defineProperty(t.prototype,"count",{set:function(e){parseInt(e)||0;this._UpdateStarCount()},enumerable:!0,configurable:!0}),t.prototype._UpdateStarCount=function(){if(this.$stage){this.m_StatListLength=Math.min(this.m_StatListLength,this.m_StarItem.length);for(var e=0;e<this.m_StatListLength;++e){var t=this.m_StarItem[e];t.visible=!0,DisplayUtils.ChangeParent(t,this.group)}for(var e=this.m_StatListLength;e<this.m_StarItem.length;++e){var t=this.m_StarItem[e];t.visible=!1,DisplayUtils.ChangeParent(t,this)}}},t.prototype._UpdateStarState=function(){if(this.$stage)for(var e=0,t=Math.min(this.m_StarItem.length,this.m_StatListLength);t>e;++e)this.m_StarItem[e].currentState=e<this.m_StarNum?"light":"gray"},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){for(var e=this.group,t=0;t<e.numChildren;++t)this.m_StarItem[t]=e.getChildAt(t);this._UpdateStarCount(),this._UpdateStarState()},Object.defineProperty(t.prototype,"starNum",{get:function(){return this.m_StarNum},set:function(e){this.m_StarNum!=e&&(this.m_StarNum=e,this._UpdateStarState())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listLength",{get:function(){return this.m_StatListLength},set:function(e){this.m_StatListLength!=e&&(this.m_StatListLength=e,this._UpdateStarCount())},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(StarList.prototype,"StarList",["eui.UIComponent","egret.DisplayObject"]);var GameApp=function(){function e(e){this.mCallback=e;var t="preload",i=[],o=["cm_json","zjm_json","ui_zc_jz_ditu","ui_bm_icombg1-46"],n=RES.configInstance.groupDic[t];if(n)for(var a=RES.configInstance.keyMap,r=0,s=o.length;s>r;r++){var l=o[r].trim(),c=a[l];c&&-1==n.indexOf(c)&&n.push(c)}RES.setMaxLoadingThread(5),ResourceUtils.ins().loadGroups(t,i,this.onResourceLoadComplete,this.onResourceLoadProgress,this)}return e.prototype.onResourceLoadComplete=function(){this.init(),this.mCallback&&(this.mCallback(),this.mCallback=null)},e.prototype.init=function(){Main.Instance.UpdateLoadingUI(!1,"初始化数据",.8,1,5e3),GlobalConfig.DecompressZip(),ItemConfig.InitConfig(),LayerManager.Init(),GameMap.Init(),Deblocking.Init(),GameGlobal.GuideUtil.Init(),GameGlobal.ActivityKaiFuModel.init(),GameGlobal.ViewManagerImpl.Init(),GameGlobal.GetGameUtil.Init();var e=egret.getTimer();GameGlobal.InitConfig();var t=Main.Instance.mConnectServerData.id;(17==t||18==t)&&(GameGlobal.Config.FuncOpenConfig[DeblockingType.TYPE_32].conditionnum2=3,GameGlobal.Config.FuncOpenConfig[DeblockingType.TYPE_137].conditionnum2=3),console.log("模块初始化完成 耗时:"+(egret.getTimer()-e))},e.prototype.onResourceLoadProgress=function(e,t){Main.Instance.UpdateLoadingUI(!0,"资源加载",.8,e/t,200)},e}();__reflect(GameApp.prototype,"GameApp");var GameGlobal=function(){function e(){}return e.OnDayTimer=function(){for(var e=0,t=this.AllModule;e<t.length;e++){var i=t[e];i.OnDayTimer()}},e.OnSocketClose=function(){for(var e=0,t=this.AllModule;e<t.length;e++){var i=t[e];i.OnSocketClose()}},e.InitConfig=function(){for(var e=0,t=this.AllModule;e<t.length;e++){var i=t[e];i.InitConfig&&i.InitConfig()}},e.initModule=function(){this.TreasureHuntModel=new TreasureHuntModel,this.GuideUtil=new GuideUtil,this.PlotModel=new PlotModel,this.Notice=new Notice,this.MessageCenter=MessageCenter.ins(),this.GameServer=new GameServer,this.ViewManager=ViewManager.ins(),this.ViewManagerImpl=new ViewManagerImpl(this.ViewManager),this.ViewManager.mViewImpl=this.ViewManagerImpl,this.Chat=new Chat,this.actorModel=GameLogic.ins().actorModel,this.SubRoles=SubRoles.ins(),this.RoleMgr=RoleMgr.ins(),this.StageUtils=new StageUtils,this.UserFb=new UserFb,this.UserTips=UserTips.ins(),this.GameLogic=GameLogic.ins(),this.RaidModel=new RaidModel,this.RaidMgr=new RaidMgr,this.UserTask=UserTask.ins(),this.MailModel=MailModel.ins(),this.UserEquip=UserEquip.ins(),this.XianlvModel=new XianlvModel,this.XianJunModel=new XianJunModel,this.PetModel=PetModel.ins(),this.PetShouhModel=new PetShouhModel,this.PetTonglModel=new PetTonglModel,this.HavingHuanModel=new HavingHuanModel,this.HavingLingqModel=new HavingLingqModel,this.HavingMagicModel=new HavingMagicModel,this.HavingModel=new HavingModel,this.EntityEffMgr=new EntityEffMgr,this.UserRole=new UserRole,this.ForgeModel=ForgeModel.ins(),this.UserBag=UserBag.ins(),this.ShopController=ShopController.ins(),this.ShopManage=ShopManage.ins(),this.UserSkill=UserSkill.ins(),this.UserRide=new UserRide,this.UserWing=new UserWing,this.AcrossBossManage=new AcrossBossManage,this.AcrossBossController=new AcrossBossController,this.UserTitle=new UserTitle,this.TeacherController=new TeacherController,this.TeacherManage=new TeacherManage,this.DestinyManage=new DestinyManage,this.DestinyController=new DestinyController,this.TreasureModel=new TreasureModel,this.TsumKoBaseModel=new TsumKoBaseModel,this.FuliModel=new FuliModel,this.UserSkin=new UserSkin,this.UserElixir=new UserElixir,this.XianlvFzModel=new XianlvFzModel,this.XianlvXwModel=new XianlvXwModel,this.TianxModel=new TianxModel,this.SwordModel=new SwordModel,this.BossModel=new BossModel,this.Arena=new Arena,this.JingMaiData=new JingMaiData,this.AnswerController=new AnswerController,this.AnswerManage=new AnswerManage,this.FormationModel=new FormationModel,this.RechargeModel=new RechargeModel,this.RankingModel=new RankingModel,this.GangModel=new GangModel,this.GangMapModel=new GangMapModel,this.GangBossModel=new GangBossModel,this.QujingModel=new QujingModel,this.DailyModel=new DailyModel,this.GangBattleModel=new GangBattleModel,this.GangBattleTeamModel=new GangBattleTeamModel,this.GodPetActiveModel=new GodPetActiveModel,this.GodXinJunActiveModel=new GodXinJunActiveModel,this.GodLotteryModel=new GodLotteryModel,this.GodPieModel=new GodPieModel,this.TianShenModel=new TianShenModel,this.TianShenBaoQiModel=new TianShenBaoQiModel,this.TianShenBreachModel=new TianShenBreachModel,this.PlayerInfoModel=new PlayerInfoModel,this.VipModel=new VipModel,this.YuanfenModel=new YuanfenModel,this.GuildTeamModel=new GuildTeamModel,this.CrossTeamModel=new CrossTeamModel,this.GangMineTeamModel=new GangMineTeamModel,this.CrossBattleTeamModel=new CrossBattleTeamModel,this.XiandaoModel=new XiandaoModel,this.CommonRaidModel=new CommonRaidModel,this.ActivityModel=new ActivityModel,this.ActivityKaiFuModel=new ActivityKaiFuModel,this.GangMineModel=new GangMineModel,this.CrossBattleModel=new CrossBattleModel,this.CloudNineModel=new CloudNineModel,this.TsumKoModel=new TsumKoModel,this.FriendModel=new FriendModel,this.ExchangeModel=new ExchangeModel,this.GrowUpModel=new GrowUpModel,this.AuctionModel=new AuctionModel,this.CatchPetModel=new CatchPetModel,this.YingYuanModel=new YingYuanModel,this.LingtongModel=new LingtongModel,this.LingtongAttrModel=new LingtongAttrModel,this.OpenDayGifModel=new OpenDayGifModel,this.TotemsModel=new TotemsModel,this.UpLvWayModel=new UpLvWayModel,this.Ladder=new Ladder,this.SoundManager=new SoundManager,this.PositionForeshowModel=new PositionForeshowModel,this.GetGameUtil=new GetGameUtil,this.RoleFlyModel=new RoleFlyModel,this.XiuWeiModel=new XiuWeiModel},Object.defineProperty(e,"Config",{get:function(){return GlobalConfig.ins()},enumerable:!0,configurable:!0}),e.GetItemName=function(t){var i=e.Config.ItemConfig[t];return i?i.name:" "},e.AllModule=[],e}();__reflect(GameGlobal.prototype,"GameGlobal");var AttributeData=function(){function e(e){void 0===e&&(e=null),e&&(this.type=e.type,this.value=e.value)}return e.prototype.parser=function(e){this.type=e.type,this.value=e.value},e.AttrStringAddition=function(t,i){for(var o=[],n=0;n<t.length;n++){var a=new e;a.type=t[n].type,a.value=t[n].value,a.valuePlus=i[n].value,o.push(a)}return o},e.AttrAddition=function(t,i){var o=[],n=[];for(var a in t)n[t[a].type]=t[a].value;for(var a in i)n[i[a].type]=(n[i[a].type]||0)+i[a].value;for(var a in n){var r=new e;r.type=parseInt(a),r.value=n[a],o.push(r)}return o},e.AttrAddTo=function(e,t){for(var i in t)e[t[i].type]=(e[t[i].type]||0)+t[i].value},e.transformAttr=function(t){var i=[];for(var o in t){var n=new e;n.type=t[o].type,n.value=t[o].value,i.push(n)}for(var a=0;a<i.length-1;a++)for(var r=0;r<i.length-a-1;r++)if(i[r]<i[r+1]){var s=i[r+1];i[r+1]=i[r],i[r]=s}return i},e.GetAttrTabString=function(e,t){void 0===t&&(t="    ");for(var i="",o=0;o<e.length;o++)i+=this.getAttStrByType(e[o],0,"+",!1,"#682f00&#38983d")+"|",o<e.length-1&&(i+=t);return TextFlowMaker.generateTextFlow(i)},e.getAttStr=function(t,i,o,n,a,r,s){if(void 0===i&&(i=4),void 0===o&&(o=1),void 0===n&&(n="+"),void 0===a&&(a=!1),void 0===r&&(r="#ffffff"),!t)return"";var l="";if(t instanceof e)return s?s+this.getAttStrByType(t,i,n,a,r):this.getAttStrByType(t,i,n,a,r);if(!(t instanceof Array)){var c=[];for(var u in this.translate)if(!isNaN(t[u])){var p=new e;p.type=parseInt(this.translate[u]),p.value=t[u],c.push(p)}return this.getAttStr(c,i,o,n,a)}for(var h=t,d=0;d<h.length;d++)if(s&&(l+=s),l+=this.getAttStrByType(h[d],i,n,a,r),d<h.length-1)for(var _=0;o>_;_++)l+="\n";return l},e.getAttStrByType=function(t,i,o,n,a,r){void 0===i&&(i=4),void 0===o&&(o="+"),void 0===n&&(n=!1),void 0===a&&(a=null),void 0===r&&(r=!1);var s,l="",c=-1;return a&&("string"==typeof a&&(c=a.indexOf("&"),-1!=c&&(s=a.slice(1,c)),s&&(l+="|C:0x"+s+"&T:")),l+=StringUtils.complementByChar(e.getAttrStrByType(t.type,r),8*i)),-1!=c&&(s=a.slice(c+2),l+="|C:0x"+s+"&T:"),l+=t.type>=AttributeType.atDamageEnhancePerc&&t.type<AttributeType.atSoulEnhance||t.type>AttributeType.atSoulHitEnhance&&t.type<=AttributeType.atSoulHitReduction||t.type>=AttributeType.atPvPCritEnhance&&t.type<=AttributeType.atPvPCritReduction?o+Math.floor(t.value/100)+"%":o+t.value},e.inserteBlank=function(e,t,i){void 0===i&&(i=1);for(var o=e.length,n="";t--;)n+=" ";var a="";switch(i){case 0:a=n+e;break;case 1:a=e.slice(0,o/2)+n+e.slice(o/2);break;case 2:a=e+n}return a},e.getAttrInfoByItemData=function(t){var i=GlobalConfig.ins().EquipConfig[t.configID],o="",n=0;for(var a in this.translate)if(!(i[a]<=0))for(var r=0;r<t.att.length;r++)n=t.att[r].type,this.translate[a]==n&&(o+=e.getAttrStrByType(n)+": ",o+=i[a]+" +"+t.att[r].value+"\n");return o},e.GetAttrValueByItemId=function(t,i){var o=GlobalConfig.ins().EquipConfig[t],n="";for(var a in this.translate)if(this.translate[a]==i){var r=o[a];return e.getAttrStrByType(i)+": "+r}return n},e.getAttrStrByType=function(t,i){return void 0===i&&(i=!1),e.TYPE_TO_NAME[t]||""},e.getAttrStrAdd=function(e,t){var i=[];return i=e},e.getAttrStarAdd=function(t,i){var o=[];return t.forEach(function(t){var n=new e;n.type=t.type,n.value=t.value*i>>0,o.push(n)}),o},e.translateAttr=function(e){switch(e){case AttributeType.atMaxHp:return"hp";case AttributeType.atAttack:return"atk";case AttributeType.atDef:return"def";case AttributeType.atCrit:return"crit";case AttributeType.atTough:return"tough";case AttributeType.atDamageReduction:return"reduceharm"}return""},e.transformBaseAttr=function(t,i,o,n,a){void 0===i&&(i=!0),void 0===o&&(o=1);var r;if(1==o?r=[]:2==o&&(r={}),n||(n=this.baseTranslate),a){var s=void 0,l=a.length;for(s=0;l>s;s++)n[this.translateAttr(a[s])]=a[s]}for(var c in n)if(0!=i||!isNaN(t[c])&&0!=t[c]){var u=new e;u.type=parseInt(e.translate[c]),u.value=t[c],1==o?r.push(u):2==o&&(r[u.type]=u)}return r},e.prototype.sumValueAttr=function(t,i){var o={};for(var n in t){var a=new e;a.type=parseInt(e.translate[n]),a.value=t[n],o[a.type]=a}for(var n in i){var a=void 0;o.hasOwnProperty(n)?(a=o[n],a.value+=i[n]):(a=new e,a.value=i[n]),a.type=parseInt(e.translate[n]),o[a.type]=a}return o},e.sumArrValueAttr=function(e,t){for(var i=[],o=0,n=e;o<n.length;o++){for(var a=n[o],r=!1,s=0,l=t;s<l.length;s++){var c=l[s];if(a.type==c.type){var u={type:a.type,value:a.value+c.value};i.push(u),r=!0;break}}r||i.push(a)}for(var p=0,h=t;p<h.length;p++){for(var a=h[p],r=!1,d=0,_=i;d<_.length;d++){var c=_[d];if(a.type==c.type){r=!0;break}}r||i.push(a)}return i},e.TYPE_TO_NAME=(_a={},_a[AttributeType.atUp]="成长",_a[AttributeType.atHp]="当前生命",_a[AttributeType.atMaxHp]="生命",_a[AttributeType.atAttack]="攻击",_a[AttributeType.atDef]="防御",_a[AttributeType.atSpeed]="速度",_a[AttributeType.atCrit]="暴击",_a[AttributeType.atTough]="抗暴",_a[AttributeType.atHitRate]="命中",_a[AttributeType.atEvade]="闪避",_a[AttributeType.atDefy]="无视防御",_a[AttributeType.atDefyReduction]="减免无视",_a[AttributeType.atDamageEnhance]="伤害加深",_a[AttributeType.atDamageReduction]="伤害减少",_a[AttributeType.atDamageEnhancePerc]="伤害加深百分比",_a[AttributeType.atDamageReductionPerc]="伤害减少百分比",_a[AttributeType.atCritEnhance]="暴伤加成",_a[AttributeType.atCritReduction]="暴伤减免",_a[AttributeType.atPVPEnhance]="PVP伤加",_a[AttributeType.atPVPReduction]="PVP伤减",_a[AttributeType.atPVEEnhance]="PVE伤加",_a[AttributeType.atPVEReduction]="PVE伤减",_a[AttributeType.atSoulEnhance]="魂击",_a[AttributeType.atSoulReduction]="抗魂",_a[AttributeType.atSoulAttack]="仙魂",_a[AttributeType.atSoulDef]="仙抗",_a[AttributeType.atSoulHitEnhance]="魂击加深",_a[AttributeType.atSoulHitReduction]="抗魂加深",_a[AttributeType.atPursuedEff]="追击效率加成",_a[AttributeType.atCureEff]="治疗效率加成",_a[AttributeType.atConfineEff]="禁魔加成",_a[AttributeType.atConfineResistEff]="抗魔加成",_a[AttributeType.atCureReduceEff]="治疗效率减少",_a[AttributeType.atRestoreEff]="回血效率加成（主动技能加血）",_a[AttributeType.atPursuedResistEff]="追击抵抗效率5000分比",_a[AttributeType.atOutbloodEff]="破血效率加成5000分比",_a[AttributeType.atOutbloodResistEff]="破血抵抗加成5000分比",_a[AttributeType.atRageDrainEff]="怒气消耗减少5000分比",_a[AttributeType.atRageAddEff]="怒气增加加成5000分比",_a[AttributeType.atSpecialConfine]="特殊封印加成",_a[AttributeType.atPvPCritEnhance]="PVP暴伤加成",_a[AttributeType.atPvPCritReduction]="PVP暴伤减免",_a),e.translate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,crit:AttributeType.atCrit,tough:AttributeType.atTough,reduceharm:AttributeType.atDamageReduction},e.heroEquipTranslate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,crit:AttributeType.atCrit,tough:AttributeType.atTough,reduceharm:AttributeType.atDamageReduction},e.baseTranslate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef},e}();__reflect(AttributeData.prototype,"AttributeData");var _a,TimerManager=function(e){function t(){var t=e.call(this)||this;return t._haveremove=!1,t._handlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._timeScale=1,egret.Ticker.getInstance().register(t.onEnterFrame,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getFrameId=function(){return this._currFrame},t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var e=0,t=this._handlers;e<t.length;e++){var i=t[e];if(i.remove)this._haveremove=!0;else{var o=i.userFrame?this._currFrame:this._currTime;o>=i.exeTime&&(i.method.call(i.methodObj,(this._currTime-i.dealTime)*this._timeScale),i.dealTime=this._currTime,i.exeTime+=i.delay,i.repeat||(i.repeatCount>1?i.repeatCount--:(i.complateMethod&&i.complateMethod.apply(i.complateMethodObj),i.remove=!0,this._haveremove=!0)))}}if(this._haveremove)for(var n=this._handlers.length-1;n>=0;--n){var i=this._handlers[n];i.remove&&(i.clear(),this._handlers.splice(n,1),ObjectPool.push(i))}this._haveremove=!1},t.prototype.create=function(e,t,i,o,n,a,r){if(!(0>t||0>i||null==o)){this.remove(o,n);var s=ObjectPool.pop("TimerHandler");s.userFrame=e,s.repeat=0==i,s.repeatCount=i,s.delay=t,s.method=o,s.methodObj=n,s.complateMethod=a,s.complateMethodObj=r,s.exeTime=t+(e?this._currFrame:this._currTime),s.dealTime=this._currTime,s.remove=!1,this._handlers.push(s)}},t.prototype.doTimer=function(e,t,i,o,n,a){void 0===n&&(n=null),void 0===a&&(a=null),this.create(!1,e,t,i,o,n,a)},t.prototype.doFrame=function(e,t,i,o,n,a){void 0===n&&(n=null),void 0===a&&(a=null),this.create(!0,e,t,i,o,n,a)},t.prototype.doNext=function(e,t){this.create(!0,1,1,e,t,null,null)},t.prototype.remove=function(e,t){for(var i=0,o=this._handlers;i<o.length;i++){var n=o[i];n.remove||n.method!=e||n.methodObj!=t||(n.remove=!0,this._haveremove=!0)}},t.prototype.removeAll=function(e){for(var t=0,i=this._handlers;t<i.length;t++){var o=i[t];o.methodObj==e&&(o.remove=!0,this._haveremove=!0)}},t.prototype.isExists=function(e,t){for(var i=0,o=this._handlers;i<o.length;i++){var n=o[i];if(!n.remove&&n.method==e&&n.methodObj==t)return!0}return!1},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0,this.remove=!1}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null,this.remove=!1},e}();__reflect(TimerHandler.prototype,"TimerHandler");var ViewManager=function(e){function t(){var t=e.call(this)||this;return t._views={},t._viewCode={},t._opens=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){this.closeAll()},t.prototype.destroy=function(e){var t;this._viewCode[e]&&(t=this._viewCode[e],delete this._viewCode[e]),this._views[t]&&delete this._views[t]},t.viewOpenCheck=function(e,t){if(!e)return!1;var i=e.openCheck;return i?i.apply(null,t):!0},t.prototype.openIndex=function(e,i){t.ins().isShow(e)?t.ins().getView(e).SetTableIndex(i):t.ins().open(e,i)},t.prototype.open=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(!t.viewOpenCheck(e,i))return null;var n=this.openEasy(e,i);return n&&this.mViewImpl&&this.mViewImpl.OnOpenView(n),n},t.prototype.openEasy=function(e,t){var i=this;if(void 0===t&&(t=null),null==e)return void console.log("open nameorclass is null");var o=egret.getQualifiedClassName(e),n=this._views[o];if(n||(n=new e,this._views[o]=n,this._viewCode[n.hashCode]=o),null==n)return void console.error("panel "+o+"不存在");var a=e.LAYER_LEVEL;return null==a&&(a=n.GetLayerLevel(),a||console.error("没有设置层级",o)),this._IsShow(o)||n.isInit()?(this.AddTo(a,n),this._OpenView(n,t)):n.loadResource(function(){i.AddTo(a,n),n.setVisible(!1)},function(){n.DoInit(),n.initData(),i._OpenView(n,t),n.setVisible(!0)}),-1==this._opens.indexOf(o)&&this._opens.push(o),n},t.prototype.AddTo=function(e,t){for(var i=Util.GetClass(t).VIEW_LAYER_LEVEL||ViewLayerLevel.MIDDLE,o=0,n=e.numChildren-1;n>=0;--n)if(i>=(Util.GetClass(e.getChildAt(n)).VIEW_LAYER_LEVEL||ViewLayerLevel.MIDDLE)){o=n+1;break}e.addChildAt(t,o)},t.prototype._OpenView=function(e,t){e.DoOpen.call(e,t)},t.prototype._CloseVie=function(e){e.DoClose.apply(e)},t.prototype.close=function(e){var t=egret.getQualifiedClassName(e),i=this.closeEasy(t);i&&this.mViewImpl&&this.mViewImpl.OnCloseOneView(i)},t.prototype.closeEasy=function(e){if(!this._IsShow(e))return null;var t=this._views[e];if(t){var i=this._opens.indexOf(e);i>=0&&(this._opens.splice(i,1),this._CloseVie(t)),DisplayUtils.removeFromParent(t),t.destoryView()}return t},t.prototype.getView=function(e){return this._views[egret.getQualifiedClassName(e)]},t.prototype.closeAll=function(){for(var e=this._opens.length-1;e>=0;--e)this.closeEasy(this._opens[e]);this._opens.length>0&&console.error(this._opens.length+" => close all error !!!"),this.mViewImpl&&this.mViewImpl.OnCloseAll()},t.prototype.currOpenNum=function(){return this._opens.length},t.prototype.isShow=function(e){return this._IsShow(egret.getQualifiedClassName(e))},t.prototype._IsShow=function(e){return this._opens.indexOf(e)>=0},t.prototype.closePartPanel=function(){for(var e=[],t=0;t<this._opens.length;t++){var i=this._opens[t];"MainTop2Panel"!=i&&"MainBottomPanel"!=i&&"MainTopPanel"!=i&&"BriberyBasePanel"!=i&&e.push(this._opens[t])}for(var o=e.length-1;o>=0;o--){var i=e[o],n=this._views[i];if(n){var a=n.parent;(a==LayerManager.UI_Popup||a==LayerManager.UI_Main||a==LayerManager.UI_Main_2)&&this.closeEasy(i)}}this.mViewImpl&&this.mViewImpl.OnClosePartView()
},t.prototype.Guide=function(e,t){void 0===t&&(t=null),this._GotoView(e,t)},t.AdjustIndex=function(e,t){return[e,t]},t.prototype._GotoView=function(e,i){switch(e){case ViewIndexDef.EquipWearCount:case ViewIndexDef.EquipWearAssign:t.ins().open(RoleWin,0);break;case ViewIndexDef.SkillUpgrade:t.ins().open(RoleWin,1);break;case ViewIndexDef.RideUpgrade:t.ins().open(RoleWin,2);break;case ViewIndexDef.Tianx:t.ins().open(TianxianMainPanel);break;case ViewIndexDef.EquipSmelt:case ViewIndexDef.TYPE_1041:t.ins().open(SmeltEquipTotalWin);break;case ViewIndexDef.EquipEnhanceAll:case ViewIndexDef.EquipEnhanceAcc:t.ins().open(ForgeWin,0);break;case ViewIndexDef.EquipRefineAll:case ViewIndexDef.EquipRefineAcc:t.ins().open(ForgeWin,1);break;case ViewIndexDef.EquipAnneal:case ViewIndexDef.EquipAnnealAcc:t.ins().open(ForgeWin,2);break;case ViewIndexDef.EquipGemAll:case ViewIndexDef.EquipGemAcc:t.ins().open(ForgeWin,3);break;case ViewIndexDef.ChapterClear:t.ins().open(GuanQiaRewardWin);break;case ViewIndexDef.ChapterGoto:t.ins().open(WorldMapPanel);break;case ViewIndexDef.PetActive:case ViewIndexDef.PetUpgrade:t.ins().open(PetMainPanel);break;case ViewIndexDef.Xianlv:t.ins().open(XianlvMainPanel);break;case ViewIndexDef.TeamFb:t.ins().open(CrossMainPanel);break;case ViewIndexDef.MyBoss:t.ins().open(BossMainPanel,0);break;case ViewIndexDef.PublicBoss:t.ins().open(BossMainPanel,1);break;case ViewIndexDef.Arane:t.ins().open(ArenaWin);break;case ViewIndexDef.MaterialFb:t.ins().open(FbLayer,0);break;case ViewIndexDef.Treasuremap:t.ins().open(FbLayer,1);break;case ViewIndexDef.HeavenFb:t.ins().open(FbLayer,3);break;case ViewIndexDef.LingLongTa:t.ins().open(FbLayer,2);break;case ViewIndexDef.Fomalhaut:t.ins().open(DailyMainWin,1);break;case ViewIndexDef.ChatWorld:UserTips.ins().showTips("请在世界说句话");break;case ViewIndexDef.RoleLevelup:t.ins().open(UpLvWayMainPanel);break;case ViewIndexDef.AutoOpen:UserTips.ins().showTips("开启自动挑战关卡BOSS");break;case ViewIndexDef.HookKill:UserTips.ins().showTips("挂机遇怪"+i+"次");break;case ViewIndexDef.RoleLevelup:UserTips.ins().showTips("每天登录奖励");break;case ViewIndexDef.TYPE_1000:t.ins().open(ShopLayer,[ShopController.EN_SHOP_DAYAN]);break;case ViewIndexDef.TYPE_1001:t.ins().open(ShopLayer,[ShopController.EN_SHOP_YUANBAO]);break;case ViewIndexDef.TYPE_1002:t.ins().open(ShopLayer,[ShopController.EN_SHOP_BANGYUAN]);break;case ViewIndexDef.TYPE_1003:t.ins().open(ShopLayer,[ShopController.EN_SHOP_EQUIP]);break;case ViewIndexDef.TYPE_1004:t.ins().open(ShopLayer,[ShopController.EN_SHOP_BLACK]);break;case ViewIndexDef.TYPE_1005:t.ins().open(FbLayer);break;case ViewIndexDef.TYPE_1006:t.ins().open(FbLayer,1);break;case ViewIndexDef.TYPE_1007:t.ins().open(FbLayer,2);break;case ViewIndexDef.TYPE_1008:t.ins().open(FbLayer,3);break;case ViewIndexDef.TYPE_1010:case ViewIndexDef.TYPE_1009:case ViewIndexDef.TYPE_1010:case ViewIndexDef.TYPE_1011:case ViewIndexDef.TYPE_1012:case ViewIndexDef.TYPE_1013:case ViewIndexDef.TYPE_1014:case ViewIndexDef.TYPE_1015:case ViewIndexDef.TYPE_1016:case ViewIndexDef.TYPE_1017:case ViewIndexDef.TYPE_1018:case ViewIndexDef.TYPE_1019:case ViewIndexDef.TYPE_1020:case ViewIndexDef.TYPE_1021:case ViewIndexDef.TYPE_1022:t.ins().open(FbLayer);break;case ViewIndexDef.TYPE_1023:t.ins().open(ShopLayer,[ShopController.EN_SHOP_XIANLV]);break;case ViewIndexDef.TYPE_1024:t.ins().open(ShopLayer,[ShopController.EN_SHOP_CHONGWU]);break;case ViewIndexDef.TYPE_1025:t.ins().open(ExchangeMoneyWin);break;case ViewIndexDef.TYPE_1026:t.ins().open(ShopLayer,[ShopController.EN_SHOP_DATI]);break;case ViewIndexDef.TYPE_1027:break;case ViewIndexDef.TYPE_1028:break;case ViewIndexDef.TYPE_1029:t.ins().open(BossMainPanel,0);break;case ViewIndexDef.TYPE_1030:t.ins().open(BossMainPanel,1);break;case ViewIndexDef.TYPE_1031:t.ins().open(BossMainPanel,2);break;case ViewIndexDef.TYPE_1032:t.ins().open(BossMainPanel,3);break;case ViewIndexDef.TYPE_1033:t.ins().open(ArenaWin);break;case ViewIndexDef.TYPE_1034:t.ins().open(CrossMainPanel);break;case ViewIndexDef.TYPE_1035:t.ins().open(GangMainWin,1);break;case ViewIndexDef.TYPE_1036:t.ins().open(GangMainWin,3);break;case ViewIndexDef.TYPE_1037:t.ins().open(DailyMainWin);break;case ViewIndexDef.TYPE_1038:t.ins().open(DailyMainWin,2);break;case ViewIndexDef.TYPE_1039:t.ins().open(DailyMainWin,3);break;case ViewIndexDef.TYPE_1040:t.ins().open(CrossMainPanel,2);break;case ViewIndexDef.TYPE_1043:t.ins().open(GangBossPanel);break;case ViewIndexDef.TYPE_1045:t.ins().open(QujingMainWin);break;case ViewIndexDef.TYPE_1047:t.ins().open(DailyMainWin,1);break;case ViewIndexDef.TYPE_1048:RechargeWin.Open();break;case ViewIndexDef.TYPE_1049:t.ins().open(VipMainPanel);break;case ViewIndexDef.TYPE_1050:t.ins().open(GrowUpWin);break;case ViewIndexDef.TYPE_1051:t.ins().open(ShopLayer,[ShopController.EN_SHOP_QUJING]);break;case ViewIndexDef.TYPE_1052:t.ins().open(TreasureHuntMainPanel);break;case ViewIndexDef.TYPE_1053:t.ins().open(ForgeWin);break;case ViewIndexDef.TYPE_1054:t.ins().open(ForgeWin,1);break;case ViewIndexDef.TYPE_1055:t.ins().open(ForgeWin,2);break;case ViewIndexDef.TYPE_1056:t.ins().open(ForgeWin,3);break;case ViewIndexDef.TYPE_1057:t.ins().open(WorldMapPanel);break;case ViewIndexDef.TYPE_1058:t.ins().open(RelationWin);break;case ViewIndexDef.TYPE_1059:t.ins().open(YingYuanWin);break;case ViewIndexDef.TYPE_1060:if(!UserFb.CheckFighting())return;if(!GameGlobal.actorModel.HasGuild())return void UserTips.ins().showTips("您还没有加入帮会");GameGlobal.CommonRaidModel._MapGo(GameGlobal.Config.GuildConfig.mapid);break;case ViewIndexDef.TYPE_1061:var o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(9);if(o){var n=o.GetConfig();if(!n[o.reachday])return;if(o.runday<=o.reachday)return void UserTips.ins().showTips("你已经购买了该礼包");o.isOpenActivity()&&t.ins().open(RmbGiftPanel)}break;case ViewIndexDef.TYPE_1062:t.ins().open(TsumKoBasePanel,i);break;case ViewIndexDef.TYPE_1063:t.ins().open(QujingMainWin);break;case ViewIndexDef.TYPE_1064:t.ins().open(ShopLayer,[ShopController.EN_SHOP_XIANDU]);break;case ViewIndexDef.TYPE_1065:t.ins().open(ShopLayer,[ShopController.EN_SHOP_CAILIAO]);break;case ViewIndexDef.TYPE_1066:t.ins().open(ShopLayer,[ShopController.EN_SHOP_BANGPAI]);break;case ViewIndexDef.TYPE_1067:t.ins().open(ShopLayer,[ShopController.EN_SHOP_JINGJI]);break;case ViewIndexDef.TYPE_1068:t.ins().open(ShopLayer,[ShopController.EN_SHOP_YOUQING]);break;case ViewIndexDef.TYPE_1069:t.ins().open(ShopLayer,[ShopController.EN_SHOP_WEIWANG]);break;case ViewIndexDef.TYPE_1070:t.ins().open(ShopLayer,[ShopController.EN_SHOP_QUJING]);break;case ViewIndexDef.TYPE_1071:t.ins().open(ShopLayer,[ShopController.EN_SHOP_PIFU]);break;case ViewIndexDef.TYPE_1072:KaiFuActivityWin.Show(5);break;case ViewIndexDef.TYPE_1073:t.ins().open(AuctionMainPanel);break;case ViewIndexDef.TYPE_1074:t.ins().open(GodPetActiveLotteryWin);break;case ViewIndexDef.TYPE_1075:ShootUpIconRule.Open();break;case ViewIndexDef.TYPE_1076:DiscountRule.Open();break;case ViewIndexDef.TYPE_1077:FightPetFBIconRule.Open();break;case ViewIndexDef.TYPE_2000:UserTips.ins().showTips("每日首充活动获得");break;case ViewIndexDef.TYPE_2001:UserTips.ins().showTips("神兽降临活动获得");break;case ViewIndexDef.TYPE_1078:t.ins().open(PetMainPanel);break;case ViewIndexDef.TYPE_1079:t.ins().open(XianlvMainPanel);break;case ViewIndexDef.TYPE_1080:t.ins().open(LingtongMainPanel);break;case ViewIndexDef.TYPE_1081:t.ins().open(YingYuanWin,1);break;case ViewIndexDef.TYPE_1082:t.ins().open(HavingMainPanel);break;case ViewIndexDef.TYPE_1083:t.ins().open(RoleJingMaiPanel);break;case ViewIndexDef.TYPE_1084:t.ins().open(RoleElixirPanel);break;case ViewIndexDef.TYPE_1085:t.ins().open(TotemsMainWin);break;case ViewIndexDef.TYPE_1086:t.ins().open(FriendMainPanel,1);break;case ViewIndexDef.TYPE_1087:t.ins().open(DeityEquipWin);break;case ViewIndexDef.TYPE_1088:t.ins().open(TreasureWin);break;case ViewIndexDef.TYPE_1089:t.ins().open(TotemsGoodLuckMainWin,0);break;case ViewIndexDef.TYPE_1090:OpenDayGifRule.Open();break;case ViewIndexDef.TYPE_1092:t.ins().open(AuctionMainPanel,1);break;case ViewIndexDef.TYPE_1093:t.ins().open(TotemsGoodLuckMainWin,1);break;default:return console.warn("not def goto index => "+e),!1}return!0},t.openCheckTip=!1,t.INVAILD_NAME=[],t}(BaseClass);__reflect(ViewManager.prototype,"ViewManager");var ViewIndexDef;!function(e){e[e.EquipWearCount=10010]="EquipWearCount",e[e.EquipWearAssign=10011]="EquipWearAssign",e[e.EquipSmelt=10020]="EquipSmelt",e[e.EquipEnhanceAll=10030]="EquipEnhanceAll",e[e.EquipEnhanceAcc=10031]="EquipEnhanceAcc",e[e.EquipRefineAll=10040]="EquipRefineAll",e[e.EquipRefineAcc=10041]="EquipRefineAcc",e[e.EquipAnneal=10050]="EquipAnneal",e[e.EquipAnnealAcc=10051]="EquipAnnealAcc",e[e.EquipGemAll=10060]="EquipGemAll",e[e.EquipGemAcc=10061]="EquipGemAcc",e[e.SkillUpgrade=20010]="SkillUpgrade",e[e.ChapterClear=30010]="ChapterClear",e[e.ChapterGoto=30020]="ChapterGoto",e[e.PetActive=40010]="PetActive",e[e.Xianlv=40120]="Xianlv",e[e.PetUpgrade=40020]="PetUpgrade",e[e.RideUpgrade=50010]="RideUpgrade",e[e.Tianx=50020]="Tianx",e[e.TeamFb=60010]="TeamFb",e[e.MyBoss=60020]="MyBoss",e[e.PublicBoss=60030]="PublicBoss",e[e.Arane=60040]="Arane",e[e.MaterialFb=60050]="MaterialFb",e[e.Treasuremap=60060]="Treasuremap",e[e.HeavenFb=60070]="HeavenFb",e[e.LingLongTa=60081]="LingLongTa",e[e.Fomalhaut=60090]="Fomalhaut",e[e.ChatWorld=70010]="ChatWorld",e[e.RoleLevelup=70020]="RoleLevelup",e[e.AutoOpen=70030]="AutoOpen",e[e.HookKill=70040]="HookKill",e[e.DayLogin=70050]="DayLogin",e[e.TYPE_1000=1e3]="TYPE_1000",e[e.TYPE_1001=1001]="TYPE_1001",e[e.TYPE_1002=1002]="TYPE_1002",e[e.TYPE_1003=1003]="TYPE_1003",e[e.TYPE_1004=1004]="TYPE_1004",e[e.TYPE_1005=1005]="TYPE_1005",e[e.TYPE_1006=1006]="TYPE_1006",e[e.TYPE_1007=1007]="TYPE_1007",e[e.TYPE_1008=1008]="TYPE_1008",e[e.TYPE_1009=1009]="TYPE_1009",e[e.TYPE_1010=1010]="TYPE_1010",e[e.TYPE_1011=1011]="TYPE_1011",e[e.TYPE_1012=1012]="TYPE_1012",e[e.TYPE_1013=1013]="TYPE_1013",e[e.TYPE_1014=1014]="TYPE_1014",e[e.TYPE_1015=1015]="TYPE_1015",e[e.TYPE_1016=1016]="TYPE_1016",e[e.TYPE_1017=1017]="TYPE_1017",e[e.TYPE_1018=1018]="TYPE_1018",e[e.TYPE_1019=1019]="TYPE_1019",e[e.TYPE_1020=1020]="TYPE_1020",e[e.TYPE_1021=1021]="TYPE_1021",e[e.TYPE_1022=1022]="TYPE_1022",e[e.TYPE_1023=1023]="TYPE_1023",e[e.TYPE_1024=1024]="TYPE_1024",e[e.TYPE_1025=1025]="TYPE_1025",e[e.TYPE_1026=1026]="TYPE_1026",e[e.TYPE_1027=1027]="TYPE_1027",e[e.TYPE_1028=1028]="TYPE_1028",e[e.TYPE_1029=1029]="TYPE_1029",e[e.TYPE_1030=1030]="TYPE_1030",e[e.TYPE_1031=1031]="TYPE_1031",e[e.TYPE_1032=1032]="TYPE_1032",e[e.TYPE_1033=1033]="TYPE_1033",e[e.TYPE_1034=1034]="TYPE_1034",e[e.TYPE_1035=1035]="TYPE_1035",e[e.TYPE_1036=1036]="TYPE_1036",e[e.TYPE_1037=1037]="TYPE_1037",e[e.TYPE_1038=1038]="TYPE_1038",e[e.TYPE_1039=1039]="TYPE_1039",e[e.TYPE_1040=1040]="TYPE_1040",e[e.TYPE_1043=1043]="TYPE_1043",e[e.TYPE_1045=1045]="TYPE_1045",e[e.TYPE_1041=1041]="TYPE_1041",e[e.TYPE_1047=1047]="TYPE_1047",e[e.TYPE_1048=1048]="TYPE_1048",e[e.TYPE_1049=1049]="TYPE_1049",e[e.TYPE_1050=1050]="TYPE_1050",e[e.TYPE_1051=1051]="TYPE_1051",e[e.TYPE_1052=1052]="TYPE_1052",e[e.TYPE_1053=1053]="TYPE_1053",e[e.TYPE_1054=1054]="TYPE_1054",e[e.TYPE_1055=1055]="TYPE_1055",e[e.TYPE_1056=1056]="TYPE_1056",e[e.TYPE_1057=1057]="TYPE_1057",e[e.TYPE_1058=1058]="TYPE_1058",e[e.TYPE_1059=1059]="TYPE_1059",e[e.TYPE_1060=1060]="TYPE_1060",e[e.TYPE_1061=1061]="TYPE_1061",e[e.TYPE_1062=1062]="TYPE_1062",e[e.TYPE_1063=1063]="TYPE_1063",e[e.TYPE_1064=1064]="TYPE_1064",e[e.TYPE_1065=1065]="TYPE_1065",e[e.TYPE_1066=1066]="TYPE_1066",e[e.TYPE_1067=1067]="TYPE_1067",e[e.TYPE_1068=1068]="TYPE_1068",e[e.TYPE_1069=1069]="TYPE_1069",e[e.TYPE_1070=1070]="TYPE_1070",e[e.TYPE_1071=1071]="TYPE_1071",e[e.TYPE_1072=1072]="TYPE_1072",e[e.TYPE_1073=1073]="TYPE_1073",e[e.TYPE_1074=1074]="TYPE_1074",e[e.TYPE_1075=1075]="TYPE_1075",e[e.TYPE_1076=1076]="TYPE_1076",e[e.TYPE_1077=1077]="TYPE_1077",e[e.TYPE_2000=2e3]="TYPE_2000",e[e.TYPE_2001=2001]="TYPE_2001",e[e.TYPE_1078=1078]="TYPE_1078",e[e.TYPE_1079=1079]="TYPE_1079",e[e.TYPE_1080=1080]="TYPE_1080",e[e.TYPE_1081=1081]="TYPE_1081",e[e.TYPE_1082=1082]="TYPE_1082",e[e.TYPE_1083=1083]="TYPE_1083",e[e.TYPE_1084=1084]="TYPE_1084",e[e.TYPE_1085=1085]="TYPE_1085",e[e.TYPE_1086=1086]="TYPE_1086",e[e.TYPE_1087=1087]="TYPE_1087",e[e.TYPE_1088=1088]="TYPE_1088",e[e.TYPE_1089=1089]="TYPE_1089",e[e.TYPE_1090=1090]="TYPE_1090",e[e.TYPE_1092=1092]="TYPE_1092",e[e.TYPE_1093=1093]="TYPE_1093"}(ViewIndexDef||(ViewIndexDef={}));var Checker=function(){function e(){}return e.Level=function(e,t,i){void 0===i&&(i=!0);var o=GameLogic.ins().actorModel.level,n=0;return e&&e>n?(i&&UserTips.ins().showTips("等级不足"),!1):t&&t>o?(i&&UserTips.ins().showTips("等级不足"),!1):!0},e.VipLevel=function(e,t){void 0===t&&(t=!0);var i=UserVip.ins().lv;return e&&e>i?(t&&UserTips.ins().showTips("VIP等级不足"),!1):!0},e.Money=function(t,i,o,n,a){void 0===o&&(o=!0),void 0===n&&(n=null);var r=GameGlobal.actorModel.GetNum(t);if(r>=i)return a&&a(),!0;if(!o)return!1;var s="";switch(t){case MoneyConst.gold:s="银两不足",ViewManager.ins().open(ExchangeMoneyWin);break;case MoneyConst.yuanbao:s="元宝不足";break;case MoneyConst.byb:s="绑元不足";break;case MoneyConst.GuildContrib:s="帮贡不足"}return o==e.YUNBAO_FRAME&&t==MoneyConst.yuanbao?e.YunbaoTip(n):UserTips.ins().showTips(s),!1},e.Currency=function(t,i,o,n,a){return 0==t.type?t.subid?e.Money(t.id,t.count,!1,null,n)?!0:(n&&WarnWin.show(a||"绑元不足，是否花费【"+t.subcount+"元宝】？",function(){e.Money(t.subid,t.subcount,i,o,n)},this),!1):e.Money(t.id,t.count,i,o,n):void 0},e.YunbaoTip=function(e){void 0===e&&(e=null);var t="",i=3;0!=i&&(t="\n现在充值可获得：",Color.Blue,1==i?t+=StringUtils.addColor("首冲任意金额，五倍返元宝",Color.Yellow):2==i?t+=StringUtils.addColor("每日首充惊喜大礼包",Color.Yellow):t="");var o=e||"所需元宝不足，是否前往充值？";WarnWin.show(TextFlowMaker.generateTextFlow(o+t),function(){RechargeWin.Open()},this,null,null,"sure",{btnName:1==i?"首充":"充值",title:"温馨提示"})},e.Data=function(e,t){return void 0===t&&(t=!0),e?0==e.type?this.Money(e.id,e.count,t):GameGlobal.UserBag.GetCount(e.id)>=e.count?!0:void(t&&UserTips.InfoTip(GameGlobal.Config.ItemConfig[e.id].name+"数量不足")):!1},e.Datas=function(e,t){if(void 0===t&&(t=!0),!e)return!1;for(var i=0,o=e;i<o.length;i++){var n=o[i];if(!this.Data(n,t))return!1}return!0},e.CheckItem=function(e,t,i,o,n){void 0===o&&(o=null),void 0===n&&(n=ShopController.EN_SHOP_BANGYUAN);null==o&&(o=GameGlobal.actorModel.yb);var a=GameGlobal.UserBag.GetCount(e);if(a>=t)return!0;if(i){var r=t-a,s=ItemStoreConfig.GetPrice(e,n)*r;if(o>=s)return!0}return UserWarn.ins().setBuyGoodsWarn(e),!1},e.CheckDatas=function(e,t,i){if(void 0===i&&(i=!0),!e||!e.length)return!1;for(var o=!0,n=GameGlobal.actorModel.yb,a=0,r=e;a<r.length;a++){var s=r[a];if(0==s.type){if(!this.Money(s.id,s.count)){o=!1;break}}else{var l=GameGlobal.UserBag.GetCount(s.id);if(l<s.count){if(t){var c=s.count-l,u=ItemStoreConfig.GetPrice(s.id)*c;if(n-=u,1>n){o=!1,i&&UserWarn.ins().setBuyGoodsWarn(s.id);break}}else o=!1,i&&UserWarn.ins().setBuyGoodsWarn(s.id);break}}}return o?!0:!1},e.OpenDay=function(e,t){return void 0===t&&(t=!0),GameServer.serverOpenDay<e?(t&&UserTips.ErrorTip("开服第"+e+"天开启"),!1):!0},e.YUNBAO_FRAME=2,e}();__reflect(Checker.prototype,"Checker");var DeblockingType;!function(e){e[e.TYPE_1=1]="TYPE_1",e[e.TYPE_2=2]="TYPE_2",e[e.TYPE_3=3]="TYPE_3",e[e.TYPE_4=4]="TYPE_4",e[e.TYPE_5=5]="TYPE_5",e[e.TYPE_6=6]="TYPE_6",e[e.TYPE_7=7]="TYPE_7",e[e.TYPE_8=8]="TYPE_8",e[e.TYPE_9=9]="TYPE_9",e[e.TYPE_10=10]="TYPE_10",e[e.TYPE_11=11]="TYPE_11",e[e.TYPE_12=12]="TYPE_12",e[e.TYPE_13=13]="TYPE_13",e[e.TYPE_14=14]="TYPE_14",e[e.TYPE_15=15]="TYPE_15",e[e.TYPE_16=16]="TYPE_16",e[e.TYPE_17=17]="TYPE_17",e[e.TYPE_18=18]="TYPE_18",e[e.TYPE_19=19]="TYPE_19",e[e.TYPE_20=20]="TYPE_20",e[e.TYPE_21=21]="TYPE_21",e[e.TYPE_22=22]="TYPE_22",e[e.TYPE_23=23]="TYPE_23",e[e.TYPE_24=24]="TYPE_24",e[e.TYPE_25=25]="TYPE_25",e[e.TYPE_26=26]="TYPE_26",e[e.TYPE_27=27]="TYPE_27",e[e.TYPE_28=28]="TYPE_28",e[e.TYPE_29=29]="TYPE_29",e[e.TYPE_30=30]="TYPE_30",e[e.TYPE_31=31]="TYPE_31",e[e.TYPE_32=32]="TYPE_32",e[e.TYPE_33=33]="TYPE_33",e[e.TYPE_34=34]="TYPE_34",e[e.TYPE_35=35]="TYPE_35",e[e.TYPE_36=36]="TYPE_36",e[e.TYPE_37=37]="TYPE_37",e[e.TYPE_38=38]="TYPE_38",e[e.TYPE_39=39]="TYPE_39",e[e.TYPE_40=40]="TYPE_40",e[e.TYPE_41=41]="TYPE_41",e[e.TYPE_42=42]="TYPE_42",e[e.TYPE_43=43]="TYPE_43",e[e.TYPE_44=44]="TYPE_44",e[e.TYPE_45=45]="TYPE_45",e[e.TYPE_46=46]="TYPE_46",e[e.TYPE_47=47]="TYPE_47",e[e.TYPE_48=48]="TYPE_48",e[e.TYPE_49=49]="TYPE_49",e[e.TYPE_50=50]="TYPE_50",e[e.TYPE_51=51]="TYPE_51",e[e.TYPE_52=52]="TYPE_52",e[e.TYPE_53=53]="TYPE_53",e[e.TYPE_54=54]="TYPE_54",e[e.TYPE_55=55]="TYPE_55",e[e.TYPE_56=56]="TYPE_56",e[e.TYPE_57=57]="TYPE_57",e[e.TYPE_58=58]="TYPE_58",e[e.TYPE_59=59]="TYPE_59",e[e.TYPE_60=60]="TYPE_60",e[e.TYPE_61=61]="TYPE_61",e[e.TYPE_62=62]="TYPE_62",e[e.TYPE_63=63]="TYPE_63",e[e.TYPE_64=64]="TYPE_64",e[e.TYPE_65=65]="TYPE_65",e[e.TYPE_66=66]="TYPE_66",e[e.TYPE_67=67]="TYPE_67",e[e.TYPE_68=68]="TYPE_68",e[e.TYPE_69=69]="TYPE_69",e[e.TYPE_70=70]="TYPE_70",e[e.TYPE_71=71]="TYPE_71",e[e.TYPE_72=72]="TYPE_72",e[e.TYPE_73=73]="TYPE_73",e[e.TYPE_74=74]="TYPE_74",e[e.TYPE_75=75]="TYPE_75",e[e.TYPE_76=76]="TYPE_76",e[e.TYPE_77=77]="TYPE_77",e[e.TYPE_78=78]="TYPE_78",e[e.TYPE_79=79]="TYPE_79",e[e.TYPE_80=80]="TYPE_80",e[e.TYPE_81=81]="TYPE_81",e[e.TYPE_82=82]="TYPE_82",e[e.TYPE_83=83]="TYPE_83",e[e.TYPE_84=84]="TYPE_84",e[e.TYPE_85=85]="TYPE_85",e[e.TYPE_86=86]="TYPE_86",e[e.TYPE_87=87]="TYPE_87",e[e.TYPE_88=88]="TYPE_88",e[e.TYPE_89=89]="TYPE_89",e[e.TYPE_90=90]="TYPE_90",e[e.TYPE_91=91]="TYPE_91",e[e.TYPE_92=92]="TYPE_92",e[e.TYPE_93=93]="TYPE_93",e[e.TYPE_94=94]="TYPE_94",e[e.TYPE_95=95]="TYPE_95",e[e.TYPE_96=96]="TYPE_96",e[e.TYPE_97=97]="TYPE_97",e[e.TYPE_98=98]="TYPE_98",e[e.TYPE_99=99]="TYPE_99",e[e.TYPE_100=100]="TYPE_100",e[e.TYPE_101=101]="TYPE_101",e[e.TYPE_102=102]="TYPE_102",e[e.TYPE_103=103]="TYPE_103",e[e.TYPE_104=104]="TYPE_104",e[e.TYPE_105=105]="TYPE_105",e[e.TYPE_106=106]="TYPE_106",e[e.TYPE_107=107]="TYPE_107",e[e.TYPE_108=108]="TYPE_108",e[e.TYPE_109=109]="TYPE_109",e[e.TYPE_110=110]="TYPE_110",e[e.TYPE_111=111]="TYPE_111",e[e.TYPE_112=112]="TYPE_112",e[e.TYPE_113=113]="TYPE_113",e[e.TYPE_114=114]="TYPE_114",e[e.TYPE_115=115]="TYPE_115",e[e.TYPE_116=116]="TYPE_116",e[e.TYPE_117=117]="TYPE_117",e[e.TYPE_118=118]="TYPE_118",e[e.TYPE_119=119]="TYPE_119",e[e.TYPE_120=120]="TYPE_120",e[e.TYPE_212=212]="TYPE_212",e[e.TYPE_121=121]="TYPE_121",e[e.TYPE_122=122]="TYPE_122",e[e.TYPE_123=123]="TYPE_123",e[e.TYPE_124=124]="TYPE_124",e[e.TYPE_125=125]="TYPE_125",e[e.TYPE_126=126]="TYPE_126",e[e.TYPE_127=127]="TYPE_127",e[e.TYPE_128=128]="TYPE_128",e[e.TYPE_129=129]="TYPE_129",e[e.TYPE_130=130]="TYPE_130",e[e.TYPE_131=131]="TYPE_131",e[e.TYPE_132=132]="TYPE_132",e[e.TYPE_133=133]="TYPE_133",e[e.TYPE_134=134]="TYPE_134",e[e.TYPE_137=137]="TYPE_137",e[e.TYPE_138=138]="TYPE_138",e[e.TYPE_140=140]="TYPE_140",e[e.TYPE_141=141]="TYPE_141",e[e.TYPE_142=142]="TYPE_142",e[e.TYPE_143=143]="TYPE_143",e[e.TYPE_144=144]="TYPE_144",e[e.TYPE_145=145]="TYPE_145",e[e.TYPE_146=146]="TYPE_146",e[e.TYPE_183=183]="TYPE_183"}(DeblockingType||(DeblockingType={}));var Deblocking=function(){function e(){}return e.CheckSinge=function(e,t){if(!e||!t)return!0;switch(e){case 1:if(GameGlobal.UserFb.guanqiaID>=t)return!0;break;case 2:if(GameGlobal.actorModel.level>=t)return!0;break;case 3:if(GameGlobal.actorModel.vipLv>=t)return!0;break;case 4:if(GameServer.serverOpenDay>=t)return!0;break;case 5:if(GameServer.loginDay>=t)return!0;break;case 6:break;default:return!0}return!1},e.Init=function(){var t=GameGlobal.Config.FuncOpenConfig;for(var i in t){var o=t[i];if(o.isOpen)for(var n=0;n<this.KEYS.length;++n){var a=e.CONVERT[o[this.KEYS[n]]],r=this.m_DoCheckList[a];r||(this.m_DoCheckList[a]=r=[]),r.push(o.id)}}},e.Update=function(e){},e.IsDeblocking=function(e){return this.Check(e,!0)},e.Check=function(e,t){void 0===t&&(t=!1);var i=GameGlobal.Config.FuncOpenConfig[e];if(!i||!i.conditionkind)return!0;var o=!0;if(i.condition&&1!=i.condition){if(!i.condition||2==i.condition){o=!1;for(var n=0;n<this.KEYS.length;++n){var a=this.KEYS[n],r=this.VALUES[n];if(this.CheckSinge(i[a],i[r])){o=!0;break}}}}else for(var n=0;n<this.KEYS.length;++n){var s=this.KEYS[n],r=this.VALUES[n];if(!this.CheckSinge(i[s],i[r])){o=!1;break}}return o?!0:(t||UserTips.InfoTip(i.opencondition),!1)},e._ShowTip=function(e,t,i,o){if(void 0===i&&(i=!1),!i){var n=o;if(!n)switch(e){case 1:n="通关到第"+t+"关开启";break;case 2:n=t+"级开启";break;case 3:n="登录第"+t+"天开启"}n&&UserTips.InfoTip(n)}},e.IsHide=function(e){if(this.Check(e,!0))return!1;var t=GameGlobal.Config.FuncOpenConfig[e];return t&&1==t.isHide?!0:!1},e.CHECK_TYPE_01=1,e.CHECK_TYPE_02=2,e.CHECK_TYPE_03=3,e.CHECK_TYPE_04=4,e.CONVERT=(_a={},_a[1]=1,_a[2]=2,_a[3]=3,_a[4]=4,_a[5]=4,_a[6]=4,_a),e.KEYS=["conditionkind","conditionkind2"],e.VALUES=["conditionnum","conditionnum2"],e.m_Initds={},e.m_DoCheckList={},e.mOpenIds=[],e}();__reflect(Deblocking.prototype,"Deblocking");var _a,GameString=function(){function e(){}return e.GetLvName=function(e,t){return e>0?e+"阶"+t+"级":t+"级"},e.GetLvName2=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e>0?e+"阶":t+"级"},e.GetThirdPerson=function(e){return 0==e?"他":"她"},e.GetSerAndName=function(e,t){return e?t+".S"+e:t},e.GetSer=function(e){return"S"+e},e.GetSpecTimeString=function(e){var t=e[0].split("^");return[t[0].trim().split("-")[1],t[1].trim().split("-")[1]]},e}();__reflect(GameString.prototype,"GameString");var Keyboard=function(){function e(){}return e.CTRL=17,e.LEFT=37,e.RIGHT=39,e.UP=38,e.DOWN=40,e.W=87,e.A=65,e.S=83,e.D=68,e.J=74,e.K=75,e.L=76,e.U=85,e.I=73,e.O=79,e.P=80,e.SPACE=32,e.BRACE_L=219,e.BACKSLASH=220,e.BRACE_R=221,e.BACK_QUOTE=192,e.ENTER=13,e.ESC=27,e}();__reflect(Keyboard.prototype,"Keyboard");var RedPointMgr=function(){function e(){}return e.Add=function(e){this.m_RolePoints.push(e)},e.AddDelayCheck=function(e){this.m_CheckPoints[e.GetType()]||(this.m_CheckPoints[e.GetType()]=e,this._StartUpdate())},e.Init=function(){if(!this.m_Init){this.m_Init=!0;for(var e=0,t=0,i=0,o=this.m_RolePoints;i<o.length;i++){var n=o[i];if(n.Init()){++e;for(var a=n.GetMessageDef(),r=0,s=a;r<s.length;r++){var l=s[r],c=this.m_MessageDefs[l];c||(c=new RedPointMessage,c.mType=l,c.AddListener(),this.m_MessageDefs[l]=c),c.Add(n)}}else console.log("RedPoint初始化失败",n),++t}console.log("RedPointMgr:Init",e,"fail",t)}},e._OnEnterFrame=function(e){if(SubRoles.ROLE_INIT){for(var t in this.m_CheckPoints)return this.m_CheckPoints[t].CheckAll(),delete this.m_CheckPoints[t],!1;return this._StopUpdate(),!1}},e._StartUpdate=function(){this.m_IsUpdate||(this.m_IsUpdate=!0,egret.startTick(this._OnEnterFrame,this))},e._StopUpdate=function(){this.m_IsUpdate&&(this.m_IsUpdate=!1,egret.stopTick(this._OnEnterFrame,this))},e.m_RolePoints=[],e.m_CheckPoints={},e.m_MessageDefs={},e.m_Init=!1,e.m_IsUpdate=!1,e}();__reflect(RedPointMgr.prototype,"RedPointMgr");var RedPointMessage=function(){function e(){this.mList=[],this.m_Index=0,this.m_Length=0}return e.prototype.AddListener=function(){GameGlobal.MessageCenter.addListener(this.mType,this.DoMessage,this)},e.prototype.DoMessage=function(){for(var e=0,t=this.mList;e<t.length;e++){var i=t[e];i.OnMessage(this.mType)&&RedPointMgr.AddDelayCheck(i)}},e.prototype.Add=function(e){this.mList.push(e),this.m_Length=this.mList.length},e}();__reflect(RedPointMessage.prototype,"RedPointMessage");var ResData=function(){function e(){}return e.GetSliceImgData=function(e){if(null==this.m_SliceData){this.EMPTY_DATA={offY:0,offX:0,sourceH:512,sourceW:512,w:512,h:512,y:0,x:0};try{var t=RES.getRes("slice_img_json");this.m_SliceData=t.slice_img||{},RES.destroyRes("slice_img_json")}catch(i){}this.m_SliceData||(this.m_SliceData={})}return this.m_SliceData[e]||this.EMPTY_DATA},e.m_SliceData=null,e}();__reflect(ResData.prototype,"ResData");var __ref_field__=EquipPos,ResDataPath=function(){function e(){}return e.GetMineNameByType=function(e){return"kuangyuan_"+e},e.GetMapThumbnailPath=function(e){return"resource/assets/map/"+e+"/small.jpg"},e.GetMapPreviewPath=function(e){return"resource/assets/map/"+e+"/pk_preview.jpg"},e.GetMapData=function(e){return"map/"+e+"/mdata.txt"},e.GetMapPath=function(e,t,i){return"resource/assets/map/"+e+"/image/"+i+"_"+t+".jpg"},e.GetBodyName01=function(e,t){return e+"_"+t},e.GetWeaponName01=function(e,t){return e+"_"+t},e.GetItemFullName=function(e){return this.GetItemFullPath(e)},e.GetItemFullPath=function(e){return this.ROOT_ICON+e+".png"},e.GetLvName=function(e,t){return GameString.GetLvName(e,t)},e.GetItemQualityName=function(t){return e.ITEM_BG_QUALITY[t]},e.GetItemQualityEffeName=function(e){return"quality_0"+e},e.GetHeadMiniImgName=function(e,t){return void 0===t&&(t=null),null==t&&(t=e%10,e=Math.floor(e/10)),"ui_head_mini_icon_"+(e||1)+(t||0)},e.GetHeadFrameImgName=function(e){return"ui_kfwz_bm_touxiangkuang0"+e},e.GetLadderHead=function(e,t){return"ui_pp_tx_"+(e||1)+(t||0)},e.GetHeadMiniImgNameById=function(e){return this.GetHeadImgName(Math.floor(e%100*.1),e%10)},e.GetHeadImgName=function(e,t){return"ui_head_icon_"+e+t},e.GetHeadCircleImgName=function(e,t){return(null==t||void 0==t)&&(t=e==JobConst.DaoShi?1:0),null==e||null==t?"":"ui_head_ymini_icon_"+e+t},e.GetHeadCircleImgNameById=function(e){return this.GetHeadImgName(Math.floor(e%100*.1),e%10)},e.GetEquipDefaultGreyIcon=function(e){return"ui_icon_grey_equip_"+(e+1)},e.GetEquipDefaultIcon=function(e){return"ui_icon_eqiup_"+(e+1)},e.GetHeroEquipDefaultIcon=function(t){return e._HeroEquipDefaultIcon[t]},e.GetAssets=function(t){return e.ROOT+t+".png"},e.GetMoviePath=function(t,i){return void 0===i&&(i=null),i?e.ROOT_MOVIE+i+"/"+t:e.ROOT_MOVIE+t},e.GetMovieStandPath=function(e){return this.GetMoviePath(e)},e.GetRingPath=function(t){return e.ROOT_MOVIE+"ring/"+t},e.GetMonsterBodyPath=function(t){return e.ROOT_MOVIE+"monster/"+t},e.GetRoleBodyPath=function(t){return e.ROOT_MOVIE+"body/"+t},e.GetShinvBodyPath=function(e){return""},e.GetShinvShowPath=function(e){return""},e.GetSkillPathByID=function(t){return e.ROOT_MOVIE+"skillEff/"+t},e.GetSkillPath=function(t){return e.ROOT_MOVIE+"skillEff/"+t},e.GetUIEffePath=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetUIEffePath2=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetRoleBodyPath2=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetRoleShowPath=function(t){return t?e.ROOT_MOVIE+"role_show/"+t:""},e.GetVIPImgPath=function(t){return e.ROOT+"image/img/vip_show/"+t+".png"},e.GetHeroImgPath=function(t){return e.ROOT_MOVIE+"role_show/"+t},e.GetPetImgPath=function(t){return e.ROOT+"image/img/pet_show/"+t+".png"},e.GetBookIcon=function(e){switch(e){case 1:return"ui_cjg_tyjs_bai";case 2:return"ui_cjg_tyjs_lan";case 3:return"xyy";case 4:return"ui_cjg_tyjs_huang";case 5:return"ui_cjg_tyjs_hong"}},e.GetGonfuName=function(e){switch(e){case 1:return"ui_cjg_tyjs_hhjf";case 2:return"ui_cjg_tyjs_tqjf";case 3:return"xxdf";case 4:return"ui_cjg_tyjs_jysg";case 5:return"ui_cjg_tyjs_khbd"}},e.GetGonfuName1=function(e){switch(e){case 1:return"ui_cjg_hhjf";case 2:return"ui_cjg_tqjf";case 3:return"ui_cjg_xxdf";case 4:return"ui_cjg_jysg";case 5:return"ui_cjg_kfbd"}},e.GetCjgRoleIcon=function(e){switch(e){case 1:return"ui_cjg_dzn1";case 2:return"ui_cjg_dzn1";case 3:return"ui_cjg_dzn1";case 4:return"ui_cjg_dzn2";case 5:return"ui_cjg_dzn3"}},e.GetRoleBookIcon=function(e){switch(e){case 1:return"ui_cjg_huise";case 2:return"ui_cjg_lan";case 3:return"ui_cjg_zi";case 4:return"ui_cjg_huang";case 5:return"ui_cjg_hong"}},e.GetCjgBookIcon=function(e){switch(e){case 1:return"ui_cjg_hhjf2";case 2:return"ui_cjg_tqjf2";case 3:return"ui_cjg_xxdf2";case 4:return"ui_cjg_jysg2";case 5:return"ui_cjg_khbd2"}},e.GetRankingImg=function(e){switch(e){case 1:return"ui_phb_p_ks1";case 2:return"ui_phb_p_by2";case 3:return"ui_phb_p_th3"}},e.GetRankingBg2=function(e){switch(e){case 1:return"ui_ctg_p_no1";case 2:return"ui_ctg_p_no2";case 3:return"ui_ctg_p_no3";default:return""}},e.GetRankingBigImg=function(e){switch(e){case 1:return"ui_ctg_zi_kuis";case 2:return"ui_ctg_zi_bangyan";case 3:return"ui_ctg_zi_tanhua"}},e.GetRankingBg=function(e){switch(e){case 1:return"ui_phb_p_1";case 2:return"ui_phb_p_2";case 3:return"ui_phb_p_3"}},e.GetGuildLevelImg=function(e){switch(e){case 1:return"ui_bh_cjbh_1";case 2:return"ui_bh_cjbh_2";case 3:return"ui_bh_cjbh_3";case 4:return"ui_bh_cjbh_4";case 5:return"ui_bh_cjbh_5"}},e.GetGuildLvImg=function(e){switch(e){case 1:return"ui_bhjc_p_1";case 2:return"ui_bhjc_p_2";case 3:return"ui_bhjc_p_3";case 4:return"ui_bhjc_p_4";case 5:return"ui_bhjc_p_5";case 6:return"ui_bhjc_p_6"}},e.GetGuildDayIcon=function(e){switch(e){case 1:return"ui_bh_fl_1";case 2:return"ui_bh_fl_2";case 3:return"ui_bh_fl_3";case 4:return"ui_bh_fl_4";case 5:return"ui_bh_fl_5";case 6:return"ui_bh_fl_6";case 7:return"ui_bh_fl_7"}},e.GetRealmIcon=function(e){switch(e){case 1:return"ui_xyll_bm_lv";case 2:return"ui_xyll_bm_lv";case 3:return"ui_xyll_bm_lan";case 4:return"ui_xyll_bm_lan";case 5:return"ui_xyll_bm_lan";case 6:return"ui_xyll_bm_zi";case 7:return"ui_xyll_bm_zi";case 8:return"ui_xyll_bm_zi";case 9:return"ui_xyll_bm_zi";case 10:return"ui_xyll_bm_cheng";case 11:return"ui_xyll_bm_cheng";case 12:return"ui_xyll_bm_cheng";case 13:return"ui_xyll_bm_cheng";case 14:return"ui_xyll_bm_cheng";case 15:return"ui_xyll_bm_hong";case 16:return"ui_xyll_bm_hong";case 17:return"ui_xyll_bm_hong";case 18:return"ui_xyll_bm_hong";case 19:return"ui_xyll_bm_hong";case 20:return"ui_xyll_bm_jin";case 21:return"ui_xyll_bm_jin";case 22:return"ui_xyll_bm_jin";case 23:return"ui_xyll_bm_jin";case 24:return"ui_xyll_bm_jin";case 25:return"ui_xyll_bm_jin"}},e.ROOT="resource/assets/",e.ROOT_MOVIE=e.ROOT+"movie/",e.ROOT_ICON=e.ROOT+"image/item_single/",e.RES_MOVIE_MONSTER="monster",e.RES_MOVIE_BODY="body",e.EMPTY_STR="",e.DEFAULT_BODY_NAME="body000",e.MINER=e.ROOT_MOVIE+"eff/kuanggong",e.MINE_ROB_EFFE=e.ROOT_MOVIE+"uiEffe/kelveduo",e.ITEM_BG_QUALITY=["ui_bm_icon001","ui_bm_icon002","ui_bm_icon003","ui_bm_icon004","ui_bm_icon005","ui_bm_icon006","ui_bm_icon007"],e.ITEM_TIp_QUALITY=["ui_bm_putong","ui_bm_lv","ui_bm_blue","ui_bm_zi","ui_bm_orange","ui_bm_red"],e.DEFAULT_QUALITY=e.ITEM_BG_QUALITY[0],e._HeroEquipDefaultIcon=(_a={},_a[HeroEquipPos.WEAPON]="ui_role_icon_wuqi",_a[HeroEquipPos.CUISH]="ui_role_icon_toubu",_a[HeroEquipPos.CLOTHES]="ui_role_icon_hujia",_a[HeroEquipPos.SHOE]="ui_role_icon_hushou",_a),e}();__reflect(ResDataPath.prototype,"ResDataPath");var _a,RewardData=function(){function e(){}return e.prototype.parser=function(e){this.type=e.type,this.id=e.id,this.count=e.count},e.SetValue=function(e,t,i){return null!=t[e]?(i[e]=t[e],!0):!1},e.ToRewardData=function(t){var i=new e;return e.SetValue("type",t,i),e.SetValue("id",t,i),e.SetValue("count",t,i),i},e.ToRewardDatas=function(e){var t=[];if(e)for(var i=0,o=e;i<o.length;i++){var n=o[i];t.push(this.ToRewardData(n))}return t},e.getCurrencyName=function(e){return MoneyConstToName[e]||""},e.getCurrencyRes=function(e){return ResDataPath.GetItemFullPath(MoneyConstToRes[e]||"")},e.GetCurrencyMiniRes=function(e){var t=MoneyConstToMiniRes[e];if(t)return t;var i=GameGlobal.Config.ItemConfig[e];return i?ResDataPath.GetItemFullPath(i.icon):""},e}();__reflect(RewardData.prototype,"RewardData",["IRewardData"]);var RewardState;!function(e){e[e.NotReached=0]="NotReached",e[e.CanGet=1]="CanGet",e[e.Gotten=2]="Gotten",e[e.Undo=3]="Undo"}(RewardState||(RewardState={}));var SimpleTimeout=function(){function e(){this.m_Timer=null}return e.prototype.SetTimeout=function(e,t,i){this.ClearTimeOut(),egret.setTimeout(e,t,i)},e.prototype.ClearTimeOut=function(){this.m_Timer&&(egret.clearTimeout(this.m_Timer),this.m_Timer=null)},e}();__reflect(SimpleTimeout.prototype,"SimpleTimeout");var Util=function(){function e(){}return e.GetClass=function(e){if(!e)return null;var t=e.__class__;return t?egret.getDefinitionByName(t):null},e.CopyProtoData=function(e){if(null==e)return null;for(var t={},i=Object.keys(e),o=0,n=i.length;n>o;o++){var a=i[o];"se"!=a&&"de"!=a&&(t[a]=e[a])}},e.GetParentByType=function(e,t){if(null==e)return null;
var i=egret.getQualifiedClassName(t),o=e;if(egret.is(o,i))return o;for(var n=0;10>n;++n){if(o=o.parent,null==o)return null;if(egret.is(o,i))return o}return null},e.Copy=function(e){try{var t=document.createElement("input");return t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t),!0}catch(i){console.error("Copy => "+i)}return!1},e}();__reflect(Util.prototype,"Util");var ViewManagerImpl=function(){function e(e){this.mMgr=e}return e.prototype.GetLoading=function(){return null==this.m_Loading&&(this.m_Loading=new CircleLoading),this.m_Loading},e.GetComBg=function(){if(null==this.m_ComBg){var e=this.m_ComBg=new eui.Group;this.m_ComBg.visible=!1,this.m_ComBg.horizontalCenter=0;var t=new eui.Image;t.percentWidth=100,t.percentHeight=100,t.source="ui_zc_jz_ditu",e.addChild(t);var i=new eui.Image;i.left=i.top=i.right=i.bottom=-10,i.source="ui_cm_black",i.alpha=.85,e.addChild(i);var o=function(){e.height=GameGlobal.StageUtils.GetHeight(),e.width=960*e.height/StageUtils.HEIGHT};GameGlobal.StageUtils.GetStage().addEventListener(egret.Event.RESIZE,o,e),o()}return this.m_ComBg},e.prototype.Init=function(){GameSocket.ins().setOnClose(this.ShowLoading,this),GameSocket.ins().setOnConnected(this.HideLoading,this)},e.prototype.Open=function(e){if(e){var t=ViewManager.ins().open(e);t.mRemoveNotDestroyView=!0}},e.prototype.Close=function(e){e&&ViewManager.ins().close(e)},e.prototype.Destroy=function(e){if(e){var t=ViewManager.ins().getView(e);t&&(t.mRemoveNotDestroyView=null,t.isShow()?t.CloseSelf():t.destoryView())}},e.prototype.OnOpenView=function(t){if(t){if(t.parent==LayerManager.UI_Main){this.mMgr.closeEasy(egret.getQualifiedClassName(MainTop2Panel)),this.mMgr.closeEasy(egret.getQualifiedClassName(PlayFunView)),this.mMgr.closeEasy(egret.getQualifiedClassName(GameSceneView)),GameMap.SetActive(!1),this.UpdateUIMainVisible(),e.GetComBg().visible=!0;for(var i=0,o=this.mMgr._opens;i<o.length;i++){var n=o[i],a=this.mMgr._views[n];if(null!=a){if(t==a)break;var r=egret.getDefinitionByName(egret.getQualifiedClassName(a));r.LAYER_LEVEL==LayerManager.UI_Main_2&&this.mMgr.closeEasy(egret.getQualifiedClassName(a))}}}egret.is(t,"GuildWarInfoPanel")&&this.CloseMainTop2Panel()}},e.prototype.OnCloseOneView=function(e){egret.getDefinitionByName(egret.getQualifiedClassName(e));this._CloseOneView()},e.prototype.OnClosePartView=function(){this._CloseOneView()},e.prototype.OnCloseAll=function(){e.GetComBg().visible=!1,GameMap.SetActive(!0)},e.prototype.CloseMainTop2Panel=function(){this.mMgr.closeEasy(egret.getQualifiedClassName(MainTop2Panel))},e.prototype._CloseOneView=function(){return LayerManager.HasMainPanel()?void this.UpdateUIMainVisible():(e.GetComBg().visible=!1,this.CheckMainTop2Panel(),this.mMgr.isShow(GameSceneView)||this.mMgr.openEasy(GameSceneView),GameMap.SetActive(!0),void this.CheckPlayFunviewState())},e.prototype.CheckPlayFunviewState=function(){LayerManager.HasMainPanel()||!BattleMap.IsNoramlLevel()||GameGlobal.CommonRaidModel.OpenClick||GameGlobal.RaidMgr.mShowType==RaidMgr.TYPE_CITY?this.mMgr.isShow(PlayFunView)&&ViewManager.ins().close(PlayFunView):this.mMgr.isShow(PlayFunView)||ViewManager.ins().open(PlayFunView)},e.prototype.CheckMainTop2Panel=function(){LayerManager.HasMainPanel()||GameGlobal.RaidMgr.mShowType!=RaidMgr.TYPE_CITY&&GameGlobal.CommonRaidModel.OpenClick?this.mMgr.isShow(MainTop2Panel)&&ViewManager.ins().close(MainTop2Panel):this.mMgr.isShow(MainTop2Panel)||ViewManager.ins().open(MainTop2Panel)},e.prototype.UpdateUIMainVisible=function(){var e=LayerManager.UI_Main;if(0!=e.$children.length){for(var t=0;t<e.$children.length;t++)e.$children[t].visible=!1;e.$children[e.$children.length-1].visible=!0}},e.prototype.DoBattleChange=function(){var e=BattleMap.mFbId,t=BattleMap.mFbType,i=(BattleMap.mOldFbId,BattleMap.mOldFbType);if(0!=e)t==UserFb.FB_TYPE_LADDER&&GameGlobal.Ladder.ClearActorInfo(),ViewManager.ins().close(PlayFunView),ViewManager.ins().close(GameCityPanel),t==UserFb.FB_TYPE_GUANQIABOSS?ViewManager.ins().close(GuanQiaRewardWin):(ViewManager.ins().close(BossMainPanel),ViewManager.ins().close(ArenaWin),ViewManager.ins().close(FbLayer),ViewManager.ins().close(GangMainWin),ViewManager.ins().close(ActivityWin),ViewManager.ins().close(KaiFuActivityWin),ViewManager.ins().close(QujingMainWin),ViewManager.ins().close(QujingRecordWin),ViewManager.ins().close(GangMinePanel),ViewManager.ins().close(GBattleMainWin),t==UserFb.FB_TYPE_GUILDFB?ViewManager.ins().close(GangMainWin):t==UserFb.FB_TYPE_CROSSTEAMFB?ViewManager.ins().close(CrossMainPanel):t==UserFb.FB_TYPE_LIFE_DEATH_PLUNDER?(ViewManager.ins().close(CrossMainPanel),ViewManager.ins().close(TsumKoBasePanel),1==ViewManager.ins().isShow(TsumKoBaseRecordPanel)&&ViewManager.ins().close(TsumKoBaseRecordPanel)):t==UserFb.FB_TYPE_FOMALHAUT?(ViewManager.ins().close(CrossMainPanel),ViewManager.ins().close(DailyFomalhautTaskPanel),ViewManager.ins().close(DailyMainWin)):t==UserFb.FB_TYPE_ACTIVITY_PET_FIGHT&&ViewManager.ins().close(KaiFuActivityWin));else{if(i>0&&0==e)switch(i){case UserFb.FB_TYPE_ARENA:ViewManager.ins().open(ArenaWin);break;case UserFb.FB_TYPE_PERSONAL_BOSS:ViewManager.ins().open(BossMainPanel,0);break;case UserFb.FB_TYPE_PUBLIC_BOSS:ViewManager.ins().open(BossMainPanel,1);break;case UserFb.FB_TYPE_FIELD_BOSS:ViewManager.ins().open(BossMainPanel,2);break;case UserFb.FB_TYPE_MATERIAL:ViewManager.ins().open(FbLayer,0);break;case UserFb.FB_TYPE_TREASURE:ViewManager.ins().open(FbLayer,1);break;case UserFb.FB_TYPE_TOWER:ViewManager.ins().open(FbLayer,2);break;case UserFb.FB_TYPE_TOWER2:ViewManager.ins().open(FbLayer,3);break;case UserFb.FB_TYPE_GUILDFB:ViewManager.ins().open(GangMainWin,1);break;case UserFb.FB_TYPE_CROSSTEAMFB:ViewManager.ins().open(CrossMainPanel);break;case UserFb.FB_TYPE_ESCORT:GameGlobal.QujingModel.mEscortFightType==QujingModel.ESCORT_FIGHT_TYPE_ROB?ViewManager.ins().open(QujingMainWin):(ViewManager.ins().open(QujingMainWin),ViewManager.ins().open(QujingRecordWin));break;case UserFb.FB_TYPE_VIP_BOSS:ViewManager.ins().open(BossMainPanel,3);break;case UserFb.FB_TYPE_GANGMINE:ViewManager.ins().open(GangMinePanel);break;case UserFb.FB_TYPE_GUILD_WAR:var o=GameGlobal.GangBattleModel.myGBattleInfo.mGateId;o==GangBattleModel.ACTIVE_TYPE_GATE&&ViewManager.ins().open(GBattleMainWin);break;case UserFb.FB_TYPE_LIFE_DEATH_PLUNDER:ViewManager.ins().open(CrossMainPanel,2),ViewManager.ins().open(TsumKoBasePanel);break;case UserFb.FB_TYPE_FOMALHAUT:ViewManager.ins().open(DailyMainWin,1);break;case UserFb.FB_TYPE_ACTIVITY_PET_FIGHT:KaiFuActivityWin.Show(2);break;case UserFb.FB_TYPE_LADDER:LadderWin.Show()}GameGlobal.ViewManagerImpl.CheckPlayFunviewState()}},e.prototype.DoMapChange=function(){var e=(GameMap.oldFbType,GameMap.oldFbId,GameMap.fbType);GameMap.fubenID;e==UserFb.FB_TYPE_XIANDAO?ViewManager.ins().close(ArenaWin):e==UserFb.FB_TYPE_CROSSTEAMFB?ViewManager.ins().close(ActivityWin):e==UserFb.FB_TYPE_CLOUD_NINE&&ViewManager.ins().close(ActivityWin)},e.prototype.DoRaidShowType=function(){GameGlobal.RaidMgr.mShowType==RaidMgr.TYPE_NORMAL;this.CheckPlayFunviewState(),this.CheckMainTop2Panel()},e.prototype.ShowLoading=function(){var e=this.GetLoading();e.m_IsShow||e._Show()},e.prototype.HideLoading=function(){this.m_Loading&&this.m_Loading.m_IsShow&&this.m_Loading._Hide()},e}();__reflect(ViewManagerImpl.prototype,"ViewManagerImpl",["IViewMangerImpl"]);var ActivityConfig=function(){function e(){}return e.GetActTypeById=function(e){var t=GameGlobal.Config.ActivityConfig[e];return t?t.activityType:0},e}();__reflect(ActivityConfig.prototype,"ActivityConfig");var ActivitySumBtnConfig=function(){function e(){}return e.GetOpenList=function(e){if(!this.BTN_LIST){var t=this.BTN_LIST={};for(var i in GameGlobal.Config.ActivitySumBtnConfig){var o=GameGlobal.Config.ActivitySumBtnConfig[i];t[o.openId]||(t[o.openId]={}),t[o.openId][o.id]=o}}return this.BTN_LIST[e]||[]},e.BTN_LIST=null,e}();__reflect(ActivitySumBtnConfig.prototype,"ActivitySumBtnConfig");var AIConfig=function(){function e(){}return e.GetEffTime=function(e){return 2e3},e.GetDamageDelay=function(e){return 300},e.WORD_EFF_TIME=300,e.START_TURN_WAIT_TIME=1200,e.ANIM_TIME=400,e.BODY_OFFSET=50,e.HIT_TIME=300,e.HIT_RESET_TIME=430,e.PLAY_ANIM_TIME=e.HIT_TIME+e.HIT_RESET_TIME,e}();__reflect(AIConfig.prototype,"AIConfig");var AppearanceConfig=function(){function e(){}return e.GetAppeName=function(e,t,i,o){return void 0===o&&(o=!1),e?(i&&(t?e+="_h":e=GameGlobal.Config.AppearancePosConfig[e].downRes?e.replace("_s","_h_s"):null),t&&(e+="_3"+EntityClipTypeToName[o?EntityClipType.RIDE_STAND:EntityClipType.STAND][0]),e):""},e.GetAppe=function(e,t,i,o,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===n&&(n=!1);var a=GameGlobal.Config.AppearanceConfig[e];if(a){var r=void 0;return null!=t&&null!=i&&(r=a["job"+t+i]),r||(r=a.appearance),r&&(r=this.GetAppeName(r,!1,o,n)),r||""}return""},e.GetUIAppe=function(e,t,i,o,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===n&&(n=!1);var a=GameGlobal.Config.AppearanceConfig[e];if(a){var r=void 0;if(null!=t&&null!=i&&(r=n?a["job"+t+i+"show"]:a["job"+t+i+"showa"]),r||(r=a.uishow),r)r=this.GetAppeName(r,!1,o,n);else if(r||(r=a.appearance),r){var s=!0;a.way&&(s=!1),r=this.GetAppeName(r,s,o,n)}return r||""}return""},e.GetScale=function(e){var t=GameGlobal.Config.AppearanceConfig[e];return t&&t.scale?1/(.01*t.scale):1},e.GetUIPath=function(e,t,i,o,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===n&&(n=!1);var a=this.GetUIAppe(e,t,i,o,n);return a?ResDataPath.GetMovieStandPath(a):""},e.GetRideOffset=function(t,i){void 0===i&&(i=!1);var o=GameGlobal.Config.AppearanceConfig[t];if(!o)return e.TMP_DATA;var n=null;return i&&(n=o.uishow),n||(n=o.appearance),o=GameGlobal.Config.AppearancePosConfig[n],o?o.offset||e.TMP_DATA:e.TMP_DATA},e.TMP_DATA={x:0,y:0},e}();__reflect(AppearanceConfig.prototype,"AppearanceConfig");var DailyFubenConfig=function(){function e(){}return e.getPersonalBossFbIds=function(){var e=[];for(var t in GlobalConfig.ins().DailyFubenConfig){var i=GlobalConfig.ins().DailyFubenConfig[t];i&&0==i.kind&&e.push(i)}return e},e.isContains=function(e){for(var t in GlobalConfig.ins().DailyFubenConfig){var i=GlobalConfig.ins().DailyFubenConfig[t];if(e==i)return!0}return!1},e.getLowestFbIdByKind=function(e){for(var t in GlobalConfig.ins().DailyFubenConfig){var i=GlobalConfig.ins().DailyFubenConfig[t];if(i.kind==e)return i.id}},e}();__reflect(DailyFubenConfig.prototype,"DailyFubenConfig");var GainItemConfig=function(){function e(){}return e.GetGainName=function(e){var t=GameGlobal.Config.GainItemConfig[e];return t&&t.gainWay&&t.gainWay[0]?t.gainWay[0][0]||"":""},e.Guide=function(e,t){void 0===t&&(t=0);var i=GameGlobal.Config.GainItemConfig[e];return i&&i.gainWay&&i.gainWay[t]?(GameGlobal.ViewManager.Guide(i.gainWay[t][1][0]),!0):!1},e}();__reflect(GainItemConfig.prototype,"GainItemConfig");var GlobalConfig=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.DecompressZip=function(){for(var e=egret.getTimer(),i=new JSZip(RES.getRes("config_json")),o=i.file(/json/i),n={},a=0,r=o.length;r>a;++a){var s=JSON.parse(o[a].asText());for(var l in s)n[l]=s[l]}t.setIns(n),RES.destroyRes("config_json"),console.log("配置解析完成 耗时:"+(egret.getTimer()-e))},t.ins=function(){return this._instance},t.setIns=function(e){if(t._instance)throw new Error("配置文件应该只设置一次");this._instance=e},t}(GameGlobalConfigDef);__reflect(GlobalConfig.prototype,"GlobalConfig");var EntityMovieObject=function(e){function t(){var t=e.call(this)||this;return t._mcFactory=new egret.MovieClipDataFactory,t.m_State=!1,t.m_LoadAndPlay=!0,t.touchEnabled=!1,t}return __extends(t,e),t.prototype.SetFrameRate=function(e){this.m_FrameRateMul=e},t.prototype.LoadByUrl=function(e,i,o,n,a){void 0===a&&(a=!0);var r=e;if(i&&(r+="_"+i),this.m_FileName!=e&&(this.ClearCache(),this.m_FileName=e,t.Ref(this.m_FileName)),o)this._fileName=o;else{var s=r.lastIndexOf("/");-1!=s?this._fileName=r.substring(s+1):this._fileName=r}if(this._playCount=n||-1,this._autoPlay=a,this.m_CurPath==r)return void(this.m_State&&this.m_LoadAndPlay&&this._Play());this.m_CurPath=r,t.SetRefFile(this.m_FileName,r);var l=this._Load(r+".png",RES.ResourceItem.TYPE_IMAGE),c=this._Load(r+".json",RES.ResourceItem.TYPE_JSON);l&&c&&this._OnCreateBody(c,l)},t.prototype._Load=function(e,t){var i=this._GetRes(e,t);return i?i:(RES.getResByUrl(e,this._CreateBodyByUrl,this,t),null)},t.prototype._GetRes=function(e,t){var i=RES.getAnalyzer(t);return i.getRes(e)},t.prototype.ClearCache=function(){this._mcFactory.mcDataSet=null,this._mcFactory.texture=null,this._mcFactory.clearCache(),this.$bitmapData=null,this.movieClipData=null,this.visible=!1,this.stop(),this.m_State=!1,t.Unref(this.m_FileName),this.m_FileName=null,this.m_CurPath=null},t.prototype._CreateBodyByUrl=function(e,t){var i=this.m_CurPath+".json",o=this.m_CurPath+".png";t&&i!=t&&o!=t||this._OnCreateBody(this._GetRes(i,RES.ResourceItem.TYPE_JSON),this._GetRes(o,RES.ResourceItem.TYPE_IMAGE))},t.prototype._OnCreateBody=function(e,t){e&&t&&(this.visible=!0,this._mcFactory.mcDataSet=e,this._mcFactory.texture=t,this.m_State=!0,this._Play())},t.prototype._Play=function(){this.movieClipData=this._mcFactory.generateMovieClipData(this._fileName),this.movieClipData&&(this._autoPlay&&(this.m_FrameRateMul&&this.m_FrameRateMul>1&&(this.frameRate=this.movieClipData.frameRate*this.m_FrameRateMul),this.movieClipData.$isDataValid()&&this.gotoAndPlay(1,this._playCount)),this.dispatchEventWith(egret.Event.CHANGE))},t.SetRefFile=function(e,t){t+=".png",this.FILE_SET[e]?this.FILE_SET[e][t]||(ResMgr.Ref(t),this.FILE_SET[e][t]=!0):(ResMgr.Ref(t),this.FILE_SET[e]=(i={},i[t]=!0,i));var i},t.Ref=function(e){this.FILE_REF[e]?++this.FILE_REF[e]:this.FILE_REF[e]=1},t.Unref=function(e){if(this.FILE_REF[e]&&--this.FILE_REF[e]<1){var t=this.FILE_SET[e]||{};for(var i in t)ResMgr.Unref(i);delete this.FILE_REF[e],delete this.FILE_SET[e]}},t.FILE_SET={},t.FILE_REF={},t}(egret.MovieClip);__reflect(EntityMovieObject.prototype,"EntityMovieObject");var ItemConfig=function(){function e(){}return e.InitConfig=function(){this.equipConfig=GlobalConfig.ins().EquipConfig,this.powerConfig=GlobalConfig.ins().AttrPowerConfig},e.IsLegendItem=function(e){return e&&e.type==ItemType.EQUIP&&5==e.quality?!0:!1},e.calcItemLevel=function(e){return e.itemConfig.zsLevel&&1e3*e.itemConfig.zsLevel||e.itemConfig.level},e.calcAttrScore=function(e){var t=0,i=GlobalConfig.ins().AttrPowerConfig;return e.forEach(function(e){var o=i[e.type];o&&(t+=o.power*e.value)}),t},e.CalcAttrScoreValue=function(e){return e&&e.length?Math.floor(.01*this.calcAttrScore(e)):0},e.calculateBagItemScore=function(t){var i=GlobalConfig.ins().EquipConfig[t.itemConfig.id];if(!i)return 0;var o=(GlobalConfig.ins().AttrPowerConfig,e.calcAttrScore(t.att));return i.attrs&&(o+=e.calcAttrScore(i.attrs)),Math.floor(o/100)},e.CalculateScore=function(t){var i=GlobalConfig.ins().EquipConfig[t];if(!i)return 0;var o=GlobalConfig.ins().AttrPowerConfig,n=0;i.attrs&&(n+=e.calcAttrScore(i.attrs));for(var a in AttributeData.translate)o[AttributeData.translate[a]]&&i[a]&&(n+=o[AttributeData.translate[a]].power*i[a]);return Math.floor(n/100)},e.CalculateItemScore=function(e){var t=GlobalConfig.ins().EquipConfig[e],i=[];for(var o in Role.translate)if(!(t[o]<=0)){var n=new AttributeData;n.type=Role.getAttrTypeByName(o),n.value=t[o],i.push(n)}return Math.floor(UserBag.getAttrPower(i))},e.pointCalNumber=function(e){var t=0,i=this.equipConfig[e.id],o=this.powerConfig;for(var n in o){var a=i[this.TRANSFROM[o[n].type]]||0;t+=(a+a*i.additionRange*.01)*o[n].power}return Math.floor(.01*t)},e.PointCalNumberRefine=function(e,t){t=.01*t;var i=0,o=this.equipConfig[e.id],n=this.powerConfig;for(var a in n){var r=o[this.TRANSFROM[n[a].type]]||0;i+=(r+r*o.additionRange*.01)*n[a].power*t}return Math.floor(.01*i)},e.LegendRefineScore=function(e,t){if(null==e)return 0;if(!t)return 0;var i=0,o=this.equipConfig[e.id];if(null==o)return 0;var n=this.powerConfig;for(var a in n){var r=o[this.TRANSFROM[n[a].type]]||0;i+=(r+r*o.additionRange*.01)*(.01*t)*n[a].power}return Math.floor(.01*i)},e.FuwenEquipSlot={Slot0:0,Slot1:1,Slot2:2,Slot3:3,Slot4:4,Slot5:5,Slot6:6,Slot7:7,Slot8:8,Count:9},e.TRANSFROM=["","","hp","","atk","def","res"],e}();__reflect(ItemConfig.prototype,"ItemConfig");var ItemStoreConfig=function(){function e(){}return e.getStoreByItemID=function(e,t){void 0===t&&(t=ShopController.EN_SHOP_BANGYUAN);var i;switch(t){case ShopController.EN_SHOP_BANGYUAN:i=this.GetItemBYStoreConfig();break;case ShopController.EN_SHOP_YUANBAO:i=this.GetItemYBStoreConfig()}return i?i[e]||null:null},e.GetItemBYStoreConfig=function(){if(!this.mBangYuanStore){var e=this.mBangYuanStore={},t=GameGlobal.Config.BangYuanStore;for(var i in t)e[t[i].id]=t[i]}return this.mBangYuanStore},e.GetItemYBStoreConfig=function(){if(!this.mYuanBaoStore){var e=this.mYuanBaoStore={},t=GameGlobal.Config.YuanBaoStore;for(var i in t)e[t[i].id]=t[i]}return this.mYuanBaoStore},e.GetPrice=function(e,t){void 0===t&&(t=ShopController.EN_SHOP_BANGYUAN);var i=this.getStoreByItemID(e,t);return i?i.currency.count:9999999},e.GetStoreType=function(e){return this.GetItemBYStoreConfig()[e]?ShopController.EN_SHOP_BANGYUAN:this.GetItemYBStoreConfig()[e]?ShopController.EN_SHOP_YUANBAO:-1},e}();__reflect(ItemStoreConfig.prototype,"ItemStoreConfig");var MonstersConfig=function(){function e(){}return e.GetAppId=function(e){if(!e)return 0;var t=GameGlobal.Config.MonstersConfig[e];return t?t[GameGlobal.Config.MonstersConfig_keys.avatar]||0:0},e.GetName=function(e){var t=GameGlobal.Config.MonstersConfig[e];return t?t[GameGlobal.Config.MonstersConfig_keys.name]:""},e.CreateModel=function(t,i){void 0===i&&(i=null);var o=new EntityData;o.handle=e.GetHandle(),o.type=EntityType.Monster;var n=GameGlobal.Config.MonstersConfig_keys;o.configID=t[n.id];var a=i?Math.round(i*t[n.hp]):t[n.hp];return o.setAtt(AttributeType.atHp,a),o.setAtt(AttributeType.atMaxHp,a),o.scale=AppearanceConfig.GetScale(t[n.id]),o},e.CreateByData=function(t,i,o){void 0===o&&(o=null);var n=new EntityData;n.handle=e.GetHandle(),n.type=EntityType.Monster,n.configID=t;var a=i.hp,r=i.atk,s=i.def,l=i.crit,c=i.tough;return o&&(a=Math.round(o*a),r=Math.round(o*r),s=Math.round(o*s),l=Math.round(o*l),c=Math.round(o*c)),n.setAtt(AttributeType.atHp,a),n.setAtt(AttributeType.atMaxHp,a),n.setAtt(AttributeType.atAttack,r),n.setAtt(AttributeType.atDef,s),n.setAtt(AttributeType.atCrit,l),n.setAtt(AttributeType.atTough,c),n},e.GetHandle=function(){return++e.HANDLE},e.HANDLE=9e5,e}();__reflect(MonstersConfig.prototype,"MonstersConfig");var PayItemsConfig=function(){function e(){}return e.GetConfig=function(){if(!this.CONFIG){var e=LocationProperty.GetRechargeId()||1,t=GameGlobal.Config.PayItemsConfig,i=this.CONFIG={};for(var o in t){var n=t[o];n.plat?n.plat==e&&(i[n.id]=n):i[n.id]=n}}return this.CONFIG},e}();__reflect(PayItemsConfig.prototype,"PayItemsConfig");var SkillsConfig=function(){function e(){}return e.GetSkillEffConfig=function(e){var t=GameGlobal.Config.SkillsConfig[e];if(t){var i=t[GameGlobal.Config.SkillsConfig_keys.effectId];if(i&&GameGlobal.Config.SkillEffConfig[i])return GameGlobal.Config.SkillEffConfig[i]}return GameGlobal.Config.SkillEffConfig[e]||GameGlobal.Config.SkillEffConfig[1e3*Math.floor(e/1e3)+1]},e.GetSkillName=function(e){var t=GameGlobal.Config.SkillsConfig[e],i="";return t&&(i=t[GameGlobal.Config.SkillsConfig_keys.skinName]),i},e.GetSkillQuality=function(e){var t=GameGlobal.Config.EffectsConfig[e],i="";return t&&(i=t[GameGlobal.Config.EffectsConfig_keys.quality]),i||(t=GameGlobal.Config.SkillsConfig[e],t&&(i=t[GameGlobal.Config.SkillsConfig_keys.quality])),i},e.GetSkillIcon=function(e){var t=GameGlobal.Config.SkillsConfig[e],i="";return t&&(i=t[GameGlobal.Config.SkillsConfig_keys.icon]),i+""},e.GetSkillDesc=function(e,t,i){var o=GameGlobal.Config.SkillsConfig[e],n="";if(o){var a=0,r=o[GameGlobal.Config.SkillsConfig_keys.actions][0];if(r){var s=GameGlobal.Config.SkillsExeConfig[r];if(s){var l=s[GameGlobal.Config.SkillsExeConfig_keys.args];l&&(a+=l.b||0)}}return n=o[GameGlobal.Config.SkillsConfig_keys.desc],a+=GameGlobal.Config.SkillsUpgradeConfig[t||1].changeb[i]||0,StringUtils.Format(n,a)}return n},e.GetBuffEffConfig=function(e){return GameGlobal.Config.BuffEffConfig[e]||GameGlobal.Config.BuffEffConfig[1e3*Math.floor(e/1e3)+1]},e.GetSkillId=function(e,t){var i=GameGlobal.Config.SkillsOpenConfig[t+1];return i?i.id[e-1]||0:0},e.IsLock=function(e){var t=GlobalConfig.ins().SkillsOpenConfig[e+1];return t&&t.id[0]?!1:!0},e.GetOpenLevel=function(e){var t=GlobalConfig.ins().SkillsOpenConfig[e+1];return t?t.level:99999},e.BECAST_TYPE={TYPE_0:0,TYPE_1:1,TYPE_2:2,TYPE_3:3},e}();__reflect(SkillsConfig.prototype,"SkillsConfig");var Const=function(){function e(){}return e.PosToPixel=function(e){return 64*e},e.PixelToPos=function(e){return Math.floor(e/64)},e.GetMoveSpeed=function(){return Math.max(4.75*GameMap.CELL_SIZE,1)},e.MAX_INT=999999999,e.SMELT_COUNT=12,e.RECYCLE_COUNT=15,e.SMELT_LARGE_COUNT=50,e.CELL_SIZE=64,e}();__reflect(Const.prototype,"Const");var GuildSkillType;!function(e){e[e.NORMAL=1]="NORMAL",e[e.PRACTICE=2]="PRACTICE"}(GuildSkillType||(GuildSkillType={}));var GuildRobberState;!function(e){e[e.NORMAL=1]="NORMAL",e[e.FIGHT=2]="FIGHT",e[e.DEAD=3]="DEAD"}(GuildRobberState||(GuildRobberState={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function o(o){t.call(i,o,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?o(n):RES.getResAsync(e,o,this)}else{var a=RES.getAnalyzer(RES.ResourceItem.TYPE_IMAGE).getRes(e);a?o(a):RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)}},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ForgeConst=function(){function e(){}return e.CAN_FORGE_EQUIP=[EquipPos.WEAPON,EquipPos.HEAD,EquipPos.NECKLACE,EquipPos.CLOTHES,EquipPos.SHOULDER,EquipPos.BELT,EquipPos.CUFF,EquipPos.RING,EquipPos.PANTS,EquipPos.SHOE],e.EQUIP_POS_TO_SUB=(_a={},_a[EquipPos.WEAPON]=EquipPos.WEAPON,_a[EquipPos.HEAD]=EquipPos.HEAD,_a[EquipPos.NECKLACE]=EquipPos.NECKLACE,_a[EquipPos.CLOTHES]=EquipPos.CLOTHES,_a[EquipPos.SHOULDER]=EquipPos.SHOULDER,_a[EquipPos.BELT]=EquipPos.BELT,_a[EquipPos.CUFF]=EquipPos.CUFF,_a[EquipPos.RING]=EquipPos.RING,_a[EquipPos.PANTS]=EquipPos.PANTS,_a[EquipPos.SHOE]=EquipPos.SHOE,_a),e}();__reflect(ForgeConst.prototype,"ForgeConst");var ForgeType;!function(e){e[e.BOOST=0]="BOOST",e[e.REFINE=1]="REFINE",e[e.EXERCISE=2]="EXERCISE",e[e.GEM=3]="GEM"}(ForgeType||(ForgeType={}));var _a,MovieClip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.loadFile=function(e,t,i,o){this.LoadByUrl(e,i,t,o)},t.prototype.loadUrl=function(e,t,i,o,n){this.LoadByUrl(e,i,t,o,n)},t.prototype.clearCache=function(){this.ClearCache()},t}(MovieObject);__reflect(MovieClip.prototype,"MovieClip");var JobConst;!function(e){e[e.ZhanShi=1]="ZhanShi",e[e.FaShi=2]="FaShi",e[e.DaoShi=3]="DaoShi"}(JobConst||(JobConst={}));var JobItemIconConst=function(){function e(){}return e}();__reflect(JobItemIconConst.prototype,"JobItemIconConst"),JobItemIconConst[0]="",JobItemIconConst[1]="zhang",JobItemIconConst[2]="jin",JobItemIconConst[3]="xue";var JobHeadIconConst=function(){function e(){}return e.GetIcon=function(e,t){return ResDataPath.GetHeadMiniImgName(e,t)},e}();__reflect(JobHeadIconConst.prototype,"JobHeadIconConst");var MessageDef=function(){function e(){}return e.postUseItemSuccess="postUseItemSuccess",e.postInitActorInfo="postInitActorInfo",e.LUCK_RECORD="LUCK_RECORD",e.LUCK_RET_ANIM="LUCK_RET_ANIM",e.LUCK_RET_SUC="LUCK_RET_SUC",e.MAIN_CITY_INFO="MAIN_CITY_INFO",e.CHANNEL_UPDATE_INFO="CHANNEL_UPDATE_INFO",e.CHANNEL_UPDATE_LIST="CHANNEL_UPDATE_LIST",e.BATTLE_TURN="BATTLE_TURN",e.BATTLE_TURN_START="BATTLE_TURN_START",e.RP_FORGE="RP_FORGE",e.FORGE_UPDATE="FORGE_UPDATE",e.FORGE_ITEM_01_UPDATE="FORGE_ITEM_01_UPDATE",e.FORGE_ITEM_02_UPDATE="FORGE_ITEM_02_UPDATE",e.FORGE_ITEM_03_UPDATE="FORGE_ITEM_03_UPDATE",e.ROLE_RIDE_INIT="ROLE_RIDE_INIT",e.ROLE_RIDE_UPDATE="ROLE_RIDE_UPDATE",e.ROLE_RIDE_UPDATE_EXP="ROLE_RIDE_UPDATE_EXP",e.ROLE_RIDE_UPDATE_EQUIP="ROLE_RIDE_UPDATE_EQUIP",e.ROLE_RIDE_UPDATE_DRUG="ROLE_RIDE_UPDATE_DRUG",e.ROLE_WING_UPDATE="ROLE_WING_UPDATE",e.ROLE_WING_UPDATE_EXP="ROLE_WING_UPDATE_EXP",e.ROLE_WING_UPDATE_DRUG="ROLE_WING_UPDATE_DRUG",e.ROLE_WING_INIT="ROLE_WING_INIT",e.ROLE_WING_UPDATE_EQUIP="ROLE_WING_UPDATE_EQUIP",e.ROLE_TITLE_UPDATE="ROLE_TITLE_UPDATE",e.ROLE_SKIN_UPDATE="ROLE_SKIN_UPDATE",e.ROLE_ELIXIR_UPDATE="ROLE_ELIXIR_UPDATE",e.PET_TONGL_UPDATE_EXP="PET_TONGL_UPDATE_EXP",e.PET_TONGL_UPDATE_DRUG="PET_TONGL_UPDATE_DRUG",e.PET_TONGL_UPDATE="PET_TONGL_UPDATE",e.PET_TONGL_INIT="PET_TONGL_INIT",e.PET_TONGL_UPDATE_EQUIP="PET_TONGL_UPDATE_EQUIP",e.RP_BAG_PET_TONGL_EQUIP_UP="RP_BAG_PET_TONGL_EQUIP_UP",e.ROLE_SWORD_UPDATE_EXP="ROLE_SWORD_UPDATE_EXP",e.ROLE_SWORD_UPDATE_DRUG="ROLE_SWORD_UPDATE_DRUG",e.ROLE_SWORD_UPDATE="ROLE_SWORD_UPDATE",e.ROLE_SWORD_INIT="ROLE_SWORD_INIT",e.ROLE_SWORD_UPDATE_EQUIP="ROLE_SWORD_UPDATE_EQUIP",e.RP_BAG_SWORD_EQUIP_UP="RP_BAG_SWORD_EQUIP_UP",e.PET_SHOUH_UPDATE_EXP="PET_SHOUH_UPDATE_EXP",e.PET_SHOUH_UPDATE_DRUG="PET_SHOUH_UPDATE_DRUG",e.PET_SHOUH_UPDATE="PET_SHOUH_UPDATE",e.PET_SHOUH_INIT="PET_SHOUH_INIT",e.PET_SHOUH_UPDATE_EQUIP="PET_SHOUH_UPDATE_EQUIP",e.RP_BAG_PET_SHOUH_EQUIP_UP="RP_BAG_PET_SHOUH_EQUIP_UP",e.HAVING_UPDATE_EXP="HAVING_UPDATE_EXP",e.HAVING_UPDATE_DRUG="HAVING_UPDATE_DRUG",e.HAVING_UPDATE="HAVING_UPDATE",e.HAVING_INIT="HAVING_INIT",e.HAVING_SKILL_ITEM_UPDATE="HAVING_SKILL_ITEM_UPDATE",e.HAVING_HUAN_UPDATE_EXP="HAVING_HUAN_UPDATE_EXP",e.HAVING_HUAN_UPDATE_DRUG="HAVING_HUAN_UPDATE_DRUG",e.HAVING_HUAN_UPDATE="HAVING_HUAN_UPDATE",e.HAVING_HUAN_INIT="HAVING_HUAN_INIT",e.HAVING_HUAN_UPDATE_EQUIP="HAVING_HUAN_UPDATE_EQUIP",e.RP_BAG_HAVING_HUAN_EQUIP_UP="RP_BAG_HAVING_HUAN_EQUIP_UP",e.HAVING_LINGQ_UPDATE_EXP="HAVING_LINGQ_UPDATE_EXP",e.HAVING_LINGQ_UPDATE_DRUG="HAVING_LINGQ_UPDATE_DRUG",e.HAVING_LINGQ_UPDATE="HAVING_LINGQ_UPDATE",e.HAVING_LINGQ_INIT="HAVING_LINGQ_INIT",e.HAVING_LINGQ_UPDATE_EQUIP="HAVING_LINGQ_UPDATE_EQUIP",e.RP_BAG_HAVING_LINGQ_EQUIP_UP="RP_BAG_HAVING_LINGQ_EQUIP_UP",e.ROLE_TIANX_UPDATE_EXP="ROLE_TIANX_UPDATE_EXP",e.ROLE_TIANX_UPDATE_DRUG="ROLE_TIANX_UPDATE_DRUG",e.ROLE_TIANX_UPDATE="ROLE_TIANX_UPDATE",e.ROLE_TIANX_INIT="ROLE_TIANX_INIT",e.ROLE_TIANX_UPDATE_EQUIP="ROLE_TIANX_UPDATE_EQUIP",e.RP_BAG_TIANX_EQUIP_UP="RP_BAG_TIANX_EQUIP_UP",e.XIANLV_FZ_UPDATE_EXP="XIANLV_FZ_UPDATE_EXP",e.XIANLV_FZ_UPDATE_DRUG="XIANLV_FZ_UPDATE_DRUG",e.XIANLV_FZ_UPDATE="XIANLV_FZ_UPDATE",e.XIANLV_FZ_INIT="XIANLV_FZ_INIT",e.XIANLV_FZ_UPDATE_EQUIP="XIANLV_FZ_UPDATE_EQUIP",e.RP_BAG_XIANLV_FZ_EQUIP_UP="RP_BAG_XIANLV_FZ_EQUIP_UP",e.XIANLV_XW_UPDATE_EXP="XIANLV_XW_UPDATE_EXP",e.XIANLV_XW_UPDATE_DRUG="XIANLV_XW_UPDATE_DRUG",e.XIANLV_XW_UPDATE="XIANLV_XW_UPDATE",e.XIANLV_XW_INIT="XIANLV_XW_INIT",e.XIANLV_XW_UPDATE_EQUIP="XIANLV_XW_UPDATE_EQUIP",e.RP_BAG_XIANLV_XW_EQUIP_UP="RP_BAG_XIANLV_XW_EQUIP_UP",e.ROLE_LINGTONG_UPDATE_EXP="ROLE_LINGTONG_UPDATE_EXP",e.ROLE_LINGTONG_UPDATE_DRUG="ROLE_LINGTONG_UPDATE_DRUG",e.ROLE_LINGTONG_UPDATE="ROLE_LINGTONG_UPDATE",e.ROLE_LINGTONG_INIT="ROLE_LINGTONG_INIT",e.ROLE_LINGTONG_UPDATE_EQUIP="ROLE_LINGTONG_UPDATE_EQUIP",e.RP_BAG_LINGTONG_EQUIP_UP="RP_BAG_LINGTONG_EQUIP_UP",e.LINGTONG_UPDATE_INFO="LINGTONG_UPDATE_INFO",e.LINGTONG_UPDATE_GIFT_INFO="LINGTONG_UPDATE_GIFT_INFO",e.RP_LINGTONG="RP_LINGTONG",e.LINGTONG_ACT_ITEM="LINGTONG_ACT_ITEM",e.LINGTONG_RANK_ITEM="LINGTONG_RANK_ITEM",e.LINGTONG_SKILL_ITEM="LINGTONG_SKILL_ITEM",e.SEND_MSG_INFO_SUCCESS="SEND_MSG_INFO_SUCCESS",e.GAME_SERVER_UPDATE_DAY="GAME_SERVER_UPDATE_DAY",e.GAME_DEBLOCKING="GAME_DEBLOCKING",e.SHOP_REFRESH="SHOP_REFRESH",e.MINI_CHAT_PANEL_STATE="MINI_CHAT_PANEL_STATE",e.YB_TURNTABLE_UPDATE="YB_TURNTABLE_UPDATE",e.RAID_KILL_MONSTER_COUNT="RAID_KILL_MONSTER_COUNT",e.FIND_ASSETS_UPDATE="FIND_ASSETS_UPDATE",e.ACTOR_PRESTIGE_UPDATE="ACTOR_PRESTIGE_UPDATE",e.LEVEL_CHANGE="LEVEL_CHANGE",e.GOLD_CHANGE="GOLD_CHANGE",e.SKILL_SORT_CHANGE="SKILL_SORT_CHANGE",e.INIT_ACTOR="INIT_ACTOR",e.YB_CHANGE="YB_CHANGE",e.BYB_CHANGE="BYB_CHANGE",e.EXP_CHANGE="EXP_CHANGE",e.NAME_CHANGE="NAME_CHANGE",e.POWER_CHANGE="POWER_CHANGE",e.SOUL_CHANGE="SOUL_CHANGE",e.POWER_BOOST="POWER_BOOST",e.GUANQIA_CHANGE="GUANQIA_CHANGE",e.FUNC_OPEN_UPDATE="FUNC_OPEN_UPDATE",e.GUILD_CONTRIB_UPDATE="GUILD_CONTRIB_UPDATE",e.CHECK_HAVE_CAN="CHECK_HAVE_CAN",e.VIP_LEVEL_CHANGE="VIP_LEVEL_CHANGE",e.UPDATA_VIP_AWARDS="UPDATA_VIP_AWARDS",e.UPDATA_VIP_EXP="UPDATA_VIP_EXP",e.TITLE_SHOW="TITLE_SHOW",e.SUB_ROLE_CHANGE="SUB_ROLE_CHANGE",e.FUBEN_CHANGE="FUBEN_CHANGE",e.CHALLENGE_FUBEN_CHANGE="CHALLENGE_FUBEN_CHANGE",e.ROLE_HINT="ROLE_HINT",e.RP_ROLE_HINT="RP_ROLE_HINT",e.BAG_USER_EQUIP_COUNT_UPDATE="BAG_USER_EQUIP_COUNT_UPDATE",e.BAG_USER_SKIN_COUNT_UPDATE="BAG_USER_SKIN_COUNT_UPDATE",e.BAG_USER_TITLE_COUNT_UPDATE="BAG_USER_TITLE_COUNT_UPDATE",e.BAG_USER_ORANGE_COUNT_UPDATE="BAG_USER_ORANGE_COUNT_UPDATE",e.FB_COUNT_UPDATE="FB_COUNT_UPDATE",e.FB_CBT_UPDATE="FB_CBT_UPDATE",e.FB_CBT_UPDATE_REWARD="FB_CBT_UPDATE_REWARD",e.ACROSS_BOSS="ACROSS_BOSS",e.WORLDMAP_LOCATETO="WORLDMAP_LOCATETO",e.MAP_TYPE_CHANGE="MAP_TYPE_CHANGE",e.FB_TIANTING_UPDATE="FB_TIANTING_UPDATE",e.FB_REDPOINT_NOTICE="FB_REDPOINT_NOTICE",e.PUBLIC_BOSS_LIST_DATA="PUBLIC_BOSS_LIST_DATA",e.PUBLIC_BOSS_RANK_UPDATE="PUBLIC_BOSS_RANK_UPDATE",e.PUBLIC_BOSS_RECORD_UPDATE="PUBLIC_BOSS_RECORD_UPDATE",e.PUBLIC_BOSS_RELIVE_UPDATE="PUBLIC_BOSS_RELIVE_UPDATE",e.PUBLIC_BOSS_OWNER_CHNAGE="PUBLIC_BOSS_OWNER_CHNAGE",e.REDBAG_JM_DATA="REDBAG_JM_DATA",e.ISHSAREDBAG="ISHSAREDBAG",e.SKILL_UPGRADE="SKILL_UPGRADE",e.SKILL_GREWUPALL="SKILL_GREWUPALL",e.RP_SKILL_UPGRADE="RP_SKILL_UPGRADE",e.SHOP_CHANGE="SHOP_CHANGE",e.TREASURE_CHANGE="TREASURE_CHANGE",e.TREASURE_UPDATE_LV="TREASURE_UPDATE_LV",e.TREASURE_UPDATE_MAKE="TREASURE_UPDATE_MAKE",e.TREASURE_LOCK="TREASURE_LOCK",e.TREASURE_ITEM_CHANGE="TREASURE_ITEM_CHANGE",e.RP_TREASURE="RP_TREASURE",e.DESTINY_RP="DESTINY_RP",e.DESTINY_UP_ITEM="DESTINY_UP_ITEM",e.DESTINY_CHANGE="DESTINY_CHANGE",e.DESTINY_SMELT="DESTINY_SMELT",e.DESTINY_CLICK="DESTINY_CLICK",e.DESTINY_GET_REWARD="DESTINY_GET_REWARD",e.DESTINY_EQUIP_REWARD="DESTINY_EQUIP_REWARD",e.TEACHER_CHANGE="TEACHER_CHANGE",e.TEACHER_TURN="TEACHER_TURN",e.ANSWER_CHANGE="ANSWER_CHANGE",e.ANSWER_REWARD="ANSWER_REWARD",e.MIX_REUSLT="MIX_REUSLT",e.DELETE_ITEM="DELETE_ITEM",e.ADD_ITEM="ADD_ITEM",e.CHANGE_ITEM="CHANGE_ITEM",e.USER_TEMPLATE_RANK_UP_="USER_TEMPLATE_RANK_UP_",e.USER_TEMPLATE_RANK_REWARD_UPDATE_="USER_TEMPLATE_RANK_REWARD_UPDATE_",e.USER_TEMPLATE_RANK_REWARD_UPDATE_ALL___="USER_TEMPLATE_RANK_REWARD_UPDATE_ALL___",e.USER_TEMPLATE_EQUIP_UPDATE_="USER_TEMPLATE_EQUIP_UPDATE_",e.USER_TEMPLATE_SKILL_UPDATE_="USER_TEMPLATE_SKILL_UPDATE_",e.USER_TEMPLATE_SKIN_UPDATE_="USER_TEMPLATE_SKIN_UPDATE_",e.USER_TEMPLATE_ATTR_ITEM_UPDATE_="USER_TEMPLATE_ATTR_ITEM_UPDATE_",e.USER_TEMPLATE_UP_LEVEL_ITEM_UPDATE_="USER_TEMPLATE_UP_LEVEL_ITEM_UPDATE_",e.USER_TEMPLATE_RANK_UPDATE_="USER_TEMPLATE_RANK_UPDATE_",e.RP_USER_TEMPLATE_EQUIP_UPDATE_="RP_USER_TEMPLATE_EQUIP_UPDATE_",e.RP_USER_TEMPLATE_UPDATE_="RP_USER_TEMPLATE_UPDATE_",e.ITEM_COUNT_CHANGE="ITEM_COUNT_CHANGE",e.ITEM_OTHER_COUNT_CHANGE="ITEM_OTHER_COUNT_CHANGE",e.BAG_HUNT_STORE_CHANGE="BAG_HUNT_STORE_CHANGE",e.BAG_VOL_ADD="BAG_VOL_ADD",e.BAG_ITEM_COUNT_CHANGE="BAG_ITEM_COUNT_CHANGE",e.BAG_DEAL_SMELT="BAG_DEAL_SMELT",e.postEquipCheckList="postEquipCheckList",e.BAG_DEAL_RECYCLE="BAG_DEAL_RECYCLE",e.postItemCheckList="postItemCheckList",e.BAG_WILL_FULL="BAG_WILL_FULL",e.BAG_HAS_ITEM_CAN_USE="BAG_HAS_ITEM_CAN_USE",e.SHOP_MEADAL_RESULT="SHOP_MEADAL_RESULT",e.SHOP_MEADAL_BUY_RESULT="SHOP_MEADAL_BUY_RESULT",e.SHOP_MYSTERY_REFRESH="SHOP_MYSTERY_REFRESH",e.MAIL_DATA_CHANGE="MAIL_DATA_CHANGE",e.OPEN_MAIL="OPEN_MAIL",e.MAIL_GET_ITEM="MAIL_GET_ITEM",e.CHANGE_EQUIP="CHANGE_EQUIP",e.CHANGE_WING="CHANGE_WING",e.DEITYEQUIP_ALL_NOTICE="DEITYEQUIP_ALL_NOTICE",e.DEITYEQUIP_INIT="DEITYEQUIP_INIT",e.EXPJADE_UPDATE="EXPJADE_UPDATE",e.SHOW_OTHER_ACTOR="SHOW_OTHER_ACTOR",e.SHOW_RANK_OTHER_ACTOR="SHOW_RANK_OTHER_ACTOR",e.CHALLENGE_UPDATE_INFO="CHALLENGE_UPDATE_INFO",e.ORANGE_EQUIP_UPDATE="ORANGE_EQUIP_UPDATE",e.ORANGE_UPDATE_REFINE="ORANGE_UPDATE_REFINE",e.ORANGE_REFINE_UPDATE="ORANGE_REFINE_UPDATE",e.GUILD_ROBBER_NOTICE="GUILD_ROBBER_NOTICE",e.GUILD_UPDATE_NAME="GUILD_UPDATE_NAME",e.GUILD_BOSS_CALL_INFO="GUILD_BOSS_CALL_INFO",e.GUILD_BOSS_OPEN_INFO="GUILD_BOSS_OPEN_INFO",e.GUILD_REWARD_WINNER_INFO="GUILD_REWARD_WINNER_INFO",e.GUILD_REWARD_UPDATE_DISP_INFO="GUILD_REWARD_UPDATE_DISP_INFO",e.RING_UPDATE_DATA="RING_UPDATE_DATA",e.RING_INIT_DATA="RING_INIT_DATA",e.RING_UPDATE_OPEN_DATA="RING_UPDATE_OPEN_DATA",e.RING_UPDATE_TASK_DATA="RING_UPDATE_TASK_DATA",e.RAID_RELIVE_TIME_GD_BOSS="RAID_RELIVE_TIME_GD_BOSS",e.EGG_BROKEN_RESULT="EGG_BROKEN_RESULT",e.LONG_HUN_ITEM_UPDATE="LONG_HUN_ITEM_UPDATE",e.ELITE_BOSS_INIT_INFO="ELITE_BOSS_INIT_INFO",e.ELITE_BOSS_ACTOR_INFO="ELITE_BOSS_ACTOR_INFO",e.GOGPIE_UPDATE="GOGPIE_UPDATE",e.CROSS_ACTIVITY_ALL_SERVER="CROSS_ACTIVITY_ALL_SERVER",e.CROSS_ACTIVITY_UPDATE_DATA="CROSS_ACTIVITY_UPDATE_DATA",e.CROSS_ACTIVITY_GROUP_BUY_UPDATE="CROSS_ACTIVITY_GROUP_BUY_UPDATE",e.SHARE_FOCUSE_INFO="SHARE_FOCUSE_INFO",e.PET_INIT_INFO="PET_INIT_INFO",e.PET_UPATE_ZIZHI="PET_UPATE_ZIZHI",e.PET_UPATE_INFO="PET_UPATE_INFO",e.PET_ACTIVE="PET_ACTIVE",e.PET_UPATE_EXP="PET_UPATE_EXP",e.BZ_PET_INFO="BZ_PET_INFO",e.PET_UPATE_FLY="PET_UPATE_FLY",e.PET_UPATE_FLYINFO="PET_UPATE_FLYINFO",e.BAG_PET_ACT_ITEM="BAG_PET_ACT_ITEM",e.RP_BAG_PET_ACT_ITEM="RP_BAG_PET_ACT_ITEM",e.BAG_PET_LEVEL_ITEM="BAG_PET_LEVEL_ITEM",e.BAG_PET_SKILL_ITEM="BAG_PET_SKILL_ITEM",e.PET_BATTLE="PET_BATTLE",e.RP_PET="RP_PET",e.XIANLV_ACTIVE="XIANLV_ACTIVE",e.XIANLV_INIT_INFO="XIANLV_INIT_INFO",e.XIANLV_UPATE_INFO="XIANLV_UPATE_INFO",e.XIANLV_UPATE_BATTLE="XIANLV_UPATE_BATTLE",e.XIANLV_UPATE_EXP="XIANLV_UPATE_EXP",e.ROLE_UPDATE_FLYUP="ROLE_UPDATE_FLYUP",e.ROLE_UPDATE_SKILLUP="ROLE_UPDATE_SKILLUP",e.XIANJUN_ACTIVE="XIANJUN_ACTIVE",e.XIANJUN_INIT_INFO="XIANJUN_INIT_INFO",e.XIANJUN_UPATE_INFO="XIANJUN_UPATE_INFO",e.XIANJUN_UPATE_BATTLE="XIANJUN_UPATE_BATTLE",e.XIANJUN_UPATE_EXP="XIANJUN_UPATE_EXP",e.BAG_XIANJUN_ACT_ITEM="BAG_XIANJUN_ACT_ITEM",e.RP_BAG_XIANJUN_ACT_ITEM="RP_BAG_XIANJUN_ACT_ITEM",e.RP_XIANJUN="RP_XIANJUN",e.BAG_XIANJUN_RANK_ITEM="BAG_XIANJUN_RANK_ITEM",e.BAG_XIANJUN_STAR_ITEM="BAG_XIANJUN_STAR_ITEM",e.RP_XIANLV="RP_XIANLV",e.BAG_XIANLV_ACT_ITEM="BAG_XIANLV_ACT_ITEM",e.RP_BAG_XIANLV_ACT_ITEM="RP_BAG_XIANLV_ACT_ITEM",e.BAG_XIANLV_RANK_ITEM="BAG_XIANLV_RANK_ITEM",e.BAG_XIANLV_STAR_ITEM="BAG_XIANLV_STAR_ITEM",e.WORLD_BOSS_UPDATE_BLOOD="WORLD_BOSS_UPDATE_BLOOD",e.WORLD_BOSS_ATT_LIST="WORLD_BOSS_ATT_LIST",e.WORLD_RANK_DATA="WORLD_RANK_DATA",e.WORLD_OPEN="WORLD_OPEN",e.FORMATION_ACTIVE="FORMATION_ACTIVE",e.FORMATION_UPDATE_INFO="FORMATION_UPDATE_INFO",e.FORMATION_UPDATE_EXP="FORMATION_UPDATE_EXP",e.FORMATION_UPDATE_SOUL_EXP="FORMATION_UPDATE_SOUL_EXP",e.FORMATION_USE_DRUG="FORMATION_USE_DRUG",e.FORMATION_UPDATE_SKILL_INFO="FORMATION_UPDATE_SKILL_INFO",e.FORMATION_ALL_NOTICE="FORMATION_ALL_NOTICE",e.QUJING_UPDATE_BASEINFO="QUJING_UPDATE_BASEINFO",e.QUJING_SHOW_REWARD="QUJING_SHOW_REWARD",e.QUJING_UPDATE_RECORD="QUJING_UPDATE_RECORD",e.QUJING_UPDATE_ESCORTLIST="QUJING_UPDATE_ESCORTLIST",e.QUJING_SHOW_ROBVIEW="QUJING_SHOW_ROBVIEW",e.QUJING_ROBBEDFLAG_CHANGE="QUJING_ROBBEDFLAG_CHANGE",e.GANG_INIT="GANG_INIT",e.GANG_UPDATE_LIST="GANG_UPDATE_LIST",e.GANG_UPDATE_APPLIED_LIST="GANG_UPDATE_APPLIED_LIST",e.GANG_UPDATE_BASE_INFO="GANG_UPDATE_BASE_INFO",e.GANG_UPDATE_APPLICANT_LIST="GANG_UPDATE_APPLICANT_LIST",e.GANG_UPDATE_PANTAOINFO="GANG_UPDATE_PANTAOINFO",e.GANG_CHANGE_NAME="GANG_CHANGE_NAME",e.GANG_SKILL_UP="GANG_SKILL_UP",e.GANG_SKILL_LEARN_UP="GANG_SKILL_LEARN_UP",e.GANG_UPDATE_MEMBER_LIST="GANG_UPDATE_MEMBER_LIST",e.GANG_UPDATE_MEMBER_INFO="GANG_UPDATE_MEMBER_INFO",e.GANG_EXIT_NOTICE="GANG_EXIT_NOTICE",e.GANG_UPDATA_RECORD="GANG_UPDATA_RECORD",e.GANG_UPDATA_PROTECTOR_INFO="GANG_UPDATA_PROTECTOR_INFO",e.GANG_UPDATA_PROTECTOR_TASK_INFO="GANG_UPDATA_PROTECTOR_TASK_INFO",e.GANG_UPDATA_GANG_BOSS_INFO="GANG_UPDATA_GANG_BOSS_INFO",e.GANGMAP_ONEKEYFINISH="GANGMAP_ONEKEYFINISH",e.GANG_UPDATE_FBCOUNT="GANG_UPDATE_FBCOUNT",e.GANG_UPDATE_CONTRIBUTECOUNT="GANG_UPDATE_CONTRIBUTECOUNT",e.GANG_ID_CHANGE="GANG_ID_CHANGE",e.GANG_ALL_NOTICE="GANG_ALL_NOTICE",e.GANGMAP_MAPENTITY_INIT="GANGMAP_MAPENTITY_INIT",e.GANGMAP_UPDATE_TASKINFO="GANGMAP_UPDATE_TASKINFO",e.GANGMAP_UPDATE_EXCHANGEINFO="GANGMAP_UPDATE_EXCHANGEINFO",e.GANGMAP_UPDATE_UPDATEENTITY="GANGMAP_UPDATE_UPDATEENTITY",e.GANGMAP_START_PICKPLANT_NOTICY="GANGMAP_START_PICKPLANT_NOTICY",e.GANGMAP_AUTO_TASK="GANGMAP_AUTO_TASK",e.GANGMAP_RESET_MAPENTITY="GANGMAP_RESET_MAPENTITY",e.GANGMAP_HIDEPICKPROGRESS="GANGMAP_HIDEPICKPROGRESS",e.GANGBOSS_DEAD="GANGBOSS_DEAD",e.GANGBOSS_RANK_NOW="GANGBOSS_RANK_NOW",e.GANGBOSS_UPDATE_HP="GANGBOSS_UPDATE_HP",e.GANGBOSS_BOX="GANGBOSS_BOX",e.GANGBOSS_BOX_COLLENT="GANGBOSS_BOX_COLLENT",e.GANGBOSS_UPDATE_INFO="GANGBOSS_UPDATE_INFO",e.GANGBOSS_CHANGE="GANGBOSS_CHANGE",e.FIELD_BOSS_UPDATE="FIELD_BOSS_UPDATE",e.PUBLIC_BOSS_UPDATE="PUBLIC_BOSS_UPDATE",e.PERSON_BOSS_UPDATE="PERSON_BOSS_UPDATE",e.PUBLIC_BOSS_RECORD="PUBLIC_BOSS_RECORD",e.PUBLIC_BOSS_RECORD_KILL="PUBLIC_BOSS_RECORD_KILL",e.VIP_BOSS_UPDATE="VIP_BOSS_UPDATE",e.ALL_BOSS_NOTICE="ALL_BOSS_NOTICE",e.PUBLIC_BOSS_REBORN="PUBLIC_BOSS_REBORN",e.GANGBATTLE_OPEN_GATEVIEW="GANGBATTLE_OPEN_GATEVIEW",e.GANGBATTLE_UPDATE_BOSSINFO="GANGBATTLE_UPDATE_BOSSINFO",e.GANGBATTLE_UPDATE_MYINFO="GANGBATTLE_UPDATE_MYINFO",e.GANGBATTLE_ENTER_NEXT_GATE="GANGBATTLE_ENTER_NEXT_GATE",e.GANGBATTLE_UPDATE_GANGRANK="GANGBATTLE_UPDATE_GANGRANK",e.GANGBATTLE_UPDATE_PLAYERRANK="GANGBATTLE_UPDATE_PLAYERRANK",e.GANGBATTLE_UPDATE_ALLGANGRANK="GANGBATTLE_UPDATE_ALLGANGRANK",e.GANGBATTLE_UPDATE_ALLPLAYERRANK="GANGBATTLE_UPDATE_ALLPLAYERRANK",e.GANGBATTLE_UPDATE_KINGINFO="GANGBATTLE_UPDATE_KINGINFO",e.GANGBATTLE_UPDATE_DURATION="GANGBATTLE_UPDATE_DURATION",e.GANGBATTLE_SHOW_GUARDTIP="GANGBATTLE_SHOW_GUARDTIP",e.YUANFEN_UPDATE_LIST="YUANFEN_UPDATE_LIST",e.YUANFEN_INIT="YUANFEN_INIT",e.YUANFEN_ALL_NOTICE="YUANFEN_ALL_NOTICE",e.DAILY_PEACE_UPDATE="DAILY_PEACE_UPDATE",e.DAILY_TEAM_UPDATE="DAILY_TEAM_UPDATE",e.DAILY_ACTIVE_UPDATE="DAILY_ACTIVE_UPDATE",e.DAILY_MEDAL_UPDATE="DAILY_MEDAL_UPDATE",e.DAILY_TASKLIST_UPDATE="DAILY_TASKLIST_UPDATE",e.DAILY_RETRIEVELIST_UPDATE="DAILY_RETRIEVELIST_UPDATE",e.DAILY_REDPOINT_NOTICE="DAILY_REDPOINT_NOTICE",e.DAILY_FOMALHAUT_MONSTERID="DAILY_FOMALHAUT_MONSTERID",e.DAILY_UPDATE_RETREVE_VIEW="DAILY_UPDATE_RETREVE_VIEW",e.FB_INFO_UPDATE="FB_INFO_UPDATE",e.TA_INFO_UPDATE="TA_INFO_UPDATE",e.GODPETACTIVE_UPDATE_INFO="GODPETACTIVE_UPDATE_INFO",e.GODPETACTIVE_UPDATE_AWARDINFO="GODPETACTIVE_UPDATE_AWARDINFO",e.GODPETACTIVE_UPDATE_LOTTERY="GODPETACTIVE_UPDATE_LOTTERY",e.GODPETACTIVE_LOTTERY_NOTICE="GODPETACTIVE_LOTTERY_NOTICE",e.GODXINJUNACTIVE_UPDATE_INFO="GODXINJUNACTIVE_UPDATE_INFO",e.GODXINJUNACTIVE_UPDATE_AWARDINFO="GODXINJUNACTIVE_UPDATE_AWARDINFO",e.GODXINJUNACTIVE_UPDATE_LOTTERY="GODXINJUNACTIVE_UPDATE_LOTTERY",e.GODXINJUNACTIVE_LOTTERY_NOTICE="GODXINJUNACTIVE_LOTTERY_NOTICE",e.GODLOTTERY_UPDATE_INFO="GODLOTTERY_UPDATE_INFO",e.GODLOTTERY_UPDATE_LOTTERY="GODLOTTERY_UPDATE_LOTTERY",e.ARENA_INFO_DATA="ARENA_INFO_DATA",e.ARENA_BUY_RESULT="ARENA_BUY_RESULT",e.ARENA_RANK_DATA="ARENA_RANK_DATA",e.JINGMAI_DATA_UPDATE="JINGMAI_DATA_UPDATE",e.HAVING_WASH_INFO="HAVING_WASH_INFO",e.HAVING_WASH_REPLACE_INFO="HAVING_WASH_REPLACE_INFO",e.UPDATE_MAIN_TASK="UPDATE_MAIN_TASK",e.UPDATE_CHAT_ZOOM="UPDATE_CHAT_ZOOM",e.TIANSHEN_ACTIVE="TIANSHEN_ACTIVE",e.TIANSHEN_UPDATE_INFO="TIANSHEN_UPDATE_INFO",e.TIANSHEN_BATTLE="TIANSHEN_BATTLE",e.TIANSHEN_UPDATE_EXP="TIANSHEN_UPDATE_EXP",e.TIANSHEN_UPDATE_DRUG="TIANSHEN_UPDATE_DRUG",e.TIANSHEN_UPDATE_BREACH="TIANSHEN_UPDATE_BREACH",e.TIANSHEN_BAOQI_UPDATE_INFO="TIANSHEN_BAOQI_UPDATE_INFO",e.TIANSHEN_BAOQI_UPDATE_EXP="TIANSHEN_BAOQI_UPDATE_EXP",e.BAG_TIANSHEN_ATTR_ITEM="BAG_TIANSHEN_ATTR_ITEM",e.BAG_TIANSHEN_ACT_ITEM="BAG_TIANSHEN_ACT_ITEM",e.BAG_TIANSHEN_LEVEL_ITEM="BAG_TIANSHEN_LEVEL_ITEM",e.RP_BAG_TIANSHEN_ACT_ITEM="RP_BAG_TIANSHEN_ACT_ITEM",e.RP_TIANSHEN="RP_TIANSHEN",e.TIANSHEN_UPDATE_FLYEXP="TIANSHEN_UPDATE_FLYEXP",e.TIANSHEN_UPDATE_FLYINFO="TIANSHEN_UPDATE_FLYINFO",e.PALYER_INFO="PALYER_INFO",e.PLAYER_PREVITE_CHAT="PLAYER_PREVITE_CHAT",e.PLAYER_PREVITE_CLOSE="PLAYER_PREVITE_CLOSE",e.PLAYER_PREVITE_CHAT_SUCCESS="PLAYER_PREVITE_CHAT_SUCCESS",e.PLAYER_CHECK_ONLINE="PLAYER_CHECK_ONLINE",e.PLAYER_NEWMSG_SHOW_RED_POINT="PLAYER_NEWMSG_SHOW_RED_POINT",e.PLAYER_COPY_NAME="PLAYER_COPY_NAME",e.PLAYER_CHANGE_NAME="PLAYER_CHANGE_NAME",e.PLAYER_CHANGE_SYSTEM_SETTING="PLAYER_CHANGE_SYSTEM_SETTING",e.PLAYER_VIEW_ONCITYMAP="PLAYER_VIEW_ONCITYMAP",e.MINICHATSCAL="MINICHATSCAL",e.MINICHATSCAL_ALL="MINICHATSCAL_ALL",e.UPDATE_PAIHANGBANG_DATA="UPDATE_PAIHANGBANG_DATA",e.PHB_REPOINT_UPDATE="PHB_REPOINT_UPDATE",e.UPDATE_TEAM_MYINFO="UPDATE_TEAM_MYINFO",e.UPDATE_TEAM_LIST="UPDATE_TEAM_LIST",e.TEAM_FUBEN_INFO="TEAM_FUBEN_INFO",e.TEAM_UPDATE_LEAVE="TEAM_UPDATE_LEAVE",e.TEAM_UPDATE_MAP_LIST="TEAM_UPDATE_MAP_LIST",e.UPDATE_TEAM_MAIN_INFO="UPDATE_TEAM_MAIN_INFO",e.PUBLIC_BOSS_UPDATE_ATK="PUBLIC_BOSS_UPDATE_ATK",e.ACTIVITY_LIST_INFO="ACTIVITY_LIST_INFO",e.ACTIVITY_OPEN_UPDATE="ACTIVITY_OPEN_UPDATE",e.GANGMINE_UPDATE_INFO="GANGMINE_UPDATE_INFO",e.GANGMINE_RANK_INFO="GANGMINE_RANK_INFO",e.PAGE_BUTTON_UPDATE="PAGE_BUTTON_UPDATE",e.RP_XIANDAO="RP_XIANDAO",e.XIANDAO_UPDATE="XIANDAO_UPDATE",e.XIANDAO_MAP_UPDATE="XIANDAO_MAP_UPDATE",e.MINI_MAP_UPDATE_LIST="MINI_MAP_UPDATE_LIST",e.KFZB_ONECITY_INFO="KFZB_ONECITY_INFO",e.KFZB_MAINJNFEN_INFO="KFZB_MAINJNFEN_INFO",e.FUHUO_UPDATE_INFO="FUHUO_UPDATE_INFO",e.JF_UPDATE_INFO="JF_UPDATE_INFO",e.MOVE_UPDATE_INFO="MOVE_UPDATE_INFO",e.CITYTYPE_UPDATE_INFO="CITYTYPE_UPDATE_INFO",e.UP_GROUP_SHOW="UP_GROUP_SHOW",e.SHOUCITY_UPDATE_INFO="SHOUCITY_UPDATE_INFO",e.SEND_CITY="SEND_CITY",e.CLOUD_NINE_RANK="CLOUD_NINE_RANK",e.CLOUD_NINE_GIFT_REFRES="CLOUD_NINE_GIFT_REFRES",e.CLOUD_NINE_SCENE_INIT="CLOUD_NINE_SCENE_INIT",e.TSUMKO_UPDATE_LIST="TSUMKO_UPDATE_LIST",e.TSUMKO_RECORD="TSUMKO_RECORD",e.TSUMKO_UPDATE_CHECKPOINTLIST="TSUMKO_UPDATE_CHECKPOINTLIST",e.ClOSETSUMKOBASEBAGITEMPLANEL="ClOSETSUMKOBASEBAGITEMPLANEL",e.TSUMKO_INFO="TSUMKO_INFO",e.CHOICECHECKPOINT="CHOICECHECKPOINT",e.KF_BOSS_DEAD="KF_BOSS_DEAD",e.KF_BOSS_RANK_NOW="KF_BOSS_RANK_NOW",e.KF_BOSS_UPDATE_HP="KF_BOSS_UPDATE_HP",e.KF_BOSS_BOX="KF_BOSS_BOX",e.KF_BOSS_BOX_COLLENT="KF_BOSS_BOX_COLLENT",e.KF_BOSS_UPDATE_INFO="KF_BOSS_UPDATE_INFO",e.FRIEND_DATA_REFRESH="FRIEND_DATA_REFRESH",e.FRIEND_RED_POINT_CHANGE="FRIEND_RED_POINT_CHANGE",e.EXCHANGE_COUNT="EXCHANGE_COUNT",e.XIUWEIEXCHANGE="XIUWEIEXCHANGE",e.XIUWEIEXCHANGE_COUNT="XIUWEIEXCHANGE_COUNT",e.YING_YUAN_HEAD="YING_YUAN_HEAD",e.IS_MARRY_INFO="IS_MARRY_INFO",e.QIU_MARRY_INFO="QIU_MARRY_INFO",e.INVITATION_INFO="INVITATION_INFO",e.FLOWER_INFO="FLOWER_INFO",e.MARRY_LOVE_INFO="MARRY_LOVE_INFO",e.HOUSE_UPDATE_INFO="HOUSE_UPDATE_INFO",e.HOUSE_SHARED_NOTICE="HOUSE_SHARED_NOTICE",e.HOUSE_UPDATE_SINGLE="HOUSE_UPDATE_SINGLE",e.FULI_GET_GIFT_SUCCEED="FULI_GET_GIFT_SUCCEED",e.FULI_GET_REDEEMCODE="FULI_GET_REDEEMCODE",e.FULI_GET_RECEIVEITEMSIGN="FULI_GET_RECEIVEITEMSIGN",e.FULI_GET_RECEIVEBRIBERY="FULI_GET_RECEIVEBRIBERY",e.FULI_GET_HAVEBRIBERY="FULI_GET_HAVEBRIBERY",e.FULI_MONTH_WEEK_CHANGE="FULI_MONTH_WEEK_CHANGE",e.FULI_GIVEGOLD_INFO="FULI_GIVEGOLD_INFO",e.FULI_GOLDTREE_INFO="FULI_GOLDTREE_INFO",e.RP_SIGN_UPDATE="RP_SIGN_UPDATE",e.PLOT_PLAY_END="PLOT_PLAY_END",e.RECHARGE_UPDATE="RECHARGE_UPDATE",e.RECHARGE_FIRST_UPDATE="RECHARGE_FIRST_UPDATE",e.RECHARGE_DAILY_UPDATE="RECHARGE_DAILY_UPDATE",e.PLAYER_RECHARGE_UPDATE="PLAYER_RECHARGE_UPDATE",e.ACTIVITY_JIJIE_CHANGE_TITILE="ACTIVITY_JIJIE_CHANGE_TITILE",e.ACTIVITY_INFO="ACTIVITY_INFO",e.ACTIVITY_UPDATE="ACTIVITY_UPDATE",e.ACTIVITY_DABIAO_UPDATE="ACTIVITY_DABIAO_UPDATE",e.ACTIVITY_IS_GET_AWARDS="ACTIVITY_IS_GET_AWARDS",e.ACTIVITY_RACE_HISTORY="ACTIVITY_RACE_HISTORY",e.ACTIVITY_ADVANCED_INFO="ACTIVITY_ADVANCED_INFO",e.ACTIVITY_ADVANCED_RANK="ACTIVITY_ADVANCED_RANK",e.ACTIVITY_TARGET_ShOP_LOOK="ACTIVITY_TARGET_ShOP_LOOK",e.ACTIVITY_ADVANCED_ICON_SHOW="ACTIVITY_ADVANCED_ICON_SHOW",e.ACTIVITY_ADVANCED_ZHUANG_PAN="ACTIVITY_ADVANCED_ZHUANG_PAN",e.ACTIVITY_ADVANCED_ZHUANG_PAN_RULE="ACTIVITY_ADVANCED_ZHUANG_PAN_RULE",e.AUCTION_ITEM_PRICE_UPDATE="AUCTION_ITEM_PRICE_UPDATE",e.AUCTION_LIST_UPDATE="AUCTION_LIST_UPDATE",e.AUCTION_RECORD_UPDATE="AUCTION_RECORD_UPDATE",e.AUCTION_REDPOINT_UPDATE="AUCTION_REDPOINT_UPDATE",e.SHOWFATEEFF="SHOWFATEEFF",e.LOGINDAYGIF="LOGINDAYGIF",e.LADDER_PLAYER_BACK="LADDER_PLAYER_BACK",e.LADDER_PRE_WEEK_REWARD="LADDER_PRE_WEEK_REWARD",e.LADDER_UPWEEK_RANK_UPDATE="LADDER_UPWEEK_RANK_UPDATE",e.LADDER_WINNER="LADDER_WINNER",e.LADDER_CHANGE="LADDER_CHANGE",e.TOTEMS_UPDATEACTIVATION="TOTEMS_UPDATEACTIVATION",e.TOTEMS_INFO="TOTEMS_INFO",e.TOTEMS_REDPOINT_NOTICE="TOTEMS_REDPOINT_NOTICE",e.UPLVWAY_ACQUIRE_ITEM="UPLVWAY_ACQUIRE_ITEM",e.UPLVWAY_CHANGE_SCORE="UPLVWAY_CHANGE_SCORE",e.UPLVWAY_REDPOINT_NOTICE="UPLVWAY_REDPOINT_NOTICE",e.MONEY_INFO_CHANGE="MONEY_INFO_CHANGE",e.MONEY_RECHARGE_GIFT_CHANGE="MONEY_RECHARGE_GIFT_CHANGE",e.POSITION_AWARD_CHANGE="POSITION_AWARD_CHANGE",e.POSITION_STATE_CHANGE="POSITION_STATE_CHANGE",e
}();__reflect(MessageDef.prototype,"MessageDef");var MoneyConst;!function(e){e[e.exp=0]="exp",e[e.gold=1]="gold",e[e.yuanbao=2]="yuanbao",e[e.byb=3]="byb",e[e.GuildContrib=5]="GuildContrib",e[e.GuildFund=6]="GuildFund",e[e.Medal=7]="Medal",e[e.FriendCion=8]="FriendCion",e[e.RECHARGE=99]="RECHARGE",e[e.JingZhuang=2000025]="JingZhuang",e[e.DEITYEQUIP_PIECE=2000040]="DEITYEQUIP_PIECE"}(MoneyConst||(MoneyConst={}));var MoneyConstToName=(_a={},_a[MoneyConst.exp]="经验",_a[MoneyConst.gold]="银两",_a[MoneyConst.byb]="绑元",_a[MoneyConst.yuanbao]="元宝",_a[MoneyConst.RECHARGE]="充值",_a[MoneyConst.GuildContrib]="帮贡",_a),MoneyConstToRes=(_b={},_b[MoneyConst.exp]="ui_icon_item_4201",_b[MoneyConst.gold]="ui_icon_item_4202",_b[MoneyConst.yuanbao]="ui_icon_item_4204",_b[MoneyConst.byb]="ui_icon_item_4203",_b[MoneyConst.RECHARGE]="",_b[MoneyConst.GuildContrib]="ui_icon_item_9",_b),MoneyConstToMiniRes=(_c={},_c[MoneyConst.exp]="ui_zjm_exp",_c[MoneyConst.gold]="ui_common_res_004",_c[MoneyConst.yuanbao]="ui_common_res_002",_c[MoneyConst.byb]="ui_common_res_001",_c[MoneyConst.GuildContrib]="ui_common_gongxian001",_c[MoneyConst.RECHARGE]="",_c[MoneyConst.GuildContrib]="ui_common_bg_01",_c[200002]="ui_mini_icon_jinglian",_c[9e5]="ui_mini_icon_jinglian",_c[2000025]="ui_common_suipian001",_c[2000026]="ui_common_huanshouling001",_c[2000027]="ui_common_xianlvling001",_c[2000028]="ui_comon_xuancaibi",_c[2000029]="ui_common_youqing001",_c[2000030]="ui_common_weiwang001",_c[2000031]="ui_common_gong001",_c[2000043]="ui_ico_staron",_c),_a,_b,_c,GoldFlyEff=function(){function e(){this.mCount=10,this.mMax=10,this.mGap=50,this.m_Pool=[],this.m_Play=[],this.create=0,this.pCreate=0}return e.prototype.Play=function(e,t,i){this.mRect=e,this.mTx=t,this.mTy=i,this.StartTween()},e.prototype.StartTween=function(){this.play||(this.play=!0,this.pt=egret.getTimer(),egret.startTick(this.Update,this),this.m_Pool=[],this.m_Play=[])},e.prototype.StopTween=function(){this.play&&(this.play=!1,egret.stopTick(this.Update,this))},e.prototype.Update=function(e){var t=e-this.pt;this.pt=e;for(var i=this.m_Play.length-1;i>=0;--i){var o=this.m_Play[i];o.Update(t)||(DisplayUtils.removeFromParent(o.mItem),this.m_Play.splice(i,1),this.m_Pool.push(o))}if(this.create<this.mCount&&this.m_Play.length<this.mMax&&egret.getTimer()-this.pCreate>this.mGap){++this.create,this.pCreate=egret.getTimer();var o=this.m_Pool.pop()||new GoldFlyEffItem;o.Init(this.mSource,MathUtils.limitInteger(this.mRect.left,this.mRect.right),MathUtils.limitInteger(this.mRect.top,this.mRect.bottom),this.mTx,this.mTy,MathUtils.limitInteger(20,200),MathUtils.limitInteger(20,200),.25,.55,Math.random()>.5?1:-1,1,egret.Ease.sineOut),LayerManager.UI_Tips.addChild(o.mItem),this.m_Play.push(o)}return!this.m_Play.length&&this.create>=this.mCount&&this.StopTween(),!1},e}();__reflect(GoldFlyEff.prototype,"GoldFlyEff");var GoldFlyEffItem=function(){function e(){this.m_Time=0,this.m_Delay=0}return e.prototype.Init=function(e,t,i,o,n,a,r,s,l,c,u,p){void 0===p&&(p=null),this.mItem||(this.mItem=new eui.Image),this.mItem.source=e;var h=o-t,d=n-i;this.m_Ease=p,this.m_Duration=Math.ceil(Math.sqrt(h*h+d*d)/u);var _=egret.$TempPoint;MathUtils.Normalize(h,d,_);var f={x:c*_.y,y:-1*c*_.x},m=[{x:t,y:i},{x:t+h*s,y:i+d*s},{x:t+h*l,y:i+d*l},{x:o,y:n}];m[1].x+=f.x*a,m[1].y+=f.y*a,m[2].x+=f.x*r,m[2].y+=f.y*r,this.bezier=new Bezier(m),this.mItem.scaleX=this.mItem.scaleY=0,this.mItem.x=t,this.mItem.y=i+80;var g=egret.Tween.get(this.mItem);this.m_Delay=600,g.to({scaleX:1,scaleY:1,y:i},this.m_Delay,egret.Ease.elasticOut)},e.prototype.Update=function(e){if(this.m_Delay>0&&(this.m_Delay-=e)>0)return!0;this.m_Time+=e;var t=this.m_Time/this.m_Duration;t>=1&&(t=1),this.m_Ease&&(t=this.m_Ease(t));var i=egret.$TempPoint;return this.bezier.Get(t,i),this.mItem.x=i.x,this.mItem.y=i.y,1>t},e}();__reflect(GoldFlyEffItem.prototype,"GoldFlyEffItem");var BagItemBase=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype._UpdateRedPoint=function(){this.data.getCanbeUsed?this.redPoint.visible=this.data.getCanbeUsed():e.prototype._UpdateRedPoint.call(this)},t.prototype.showDetail=function(){if(this.itemConfig.useType==ItemUseType.TYPE00)e.prototype.showDetail.call(this);else if(this.itemConfig.useType==ItemUseType.TYPE04)ViewManager.ins().open(ItemAuctionTipsWin,0,this.itemConfig.id);else{if(!ItemData.IsNotTimeLimitUse(this.itemConfig))return void e.prototype.showDetail.call(this);ViewManager.ins().open(ItemUseTipsWin,0,this.itemConfig.id)}},t}(ItemBase);__reflect(BagItemBase.prototype,"BagItemBase");var GainLabel=function(e){function t(){var t=e.call(this)||this;return t.mLabels=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mLabels=this.getGroup.$children;for(var e=0;e<this.mLabels.length;e++)this.mLabels[e].name=e+"",this.mLabels[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this);this.mId&&this.SetId(this.mId)},t.prototype.OnClick=function(e){if(this.gainWayData){var t=Number(e.currentTarget.name),i=this.gainWayData[t];i&&1==i[2]?GameGlobal.ViewManager.Guide(i[1][0]):i&&2==i[2]&&GameGlobal.UserTips.showTips(i[0])}},t.prototype.SetId=function(e){if(this.mId=e,this.mLabels.length){for(var t=0,i=this.mLabels;t<i.length;t++){var o=i[t];UIHelper.SetVisible(o,!1)}var n=GameGlobal.Config.GainItemConfig[e];if(n&&n.gainWay&&n.gainWay.length){this.gainWayData=n.gainWay;for(var a=0;a<n.gainWay.length;a++){var r=n.gainWay[a],o=this.mLabels[a];if(!o)break;UIHelper.SetVisible(o,!0),r[2]?UIHelper.SetLinkStyleLabel(o,r[0]):o.text=r[0]}}else this.mLabels[0].text="暂无",UIHelper.SetVisible(this.mLabels[0],!0)}},t}(eui.Component);__reflect(GainLabel.prototype,"GainLabel");var ThemeAdapter=function(){function e(){this.getTheme=function(e,t,i,o){function n(e){t.call(o,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)}}return e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ItemBaseEffe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(ItemBase);__reflect(ItemBaseEffe.prototype,"ItemBaseEffe");var ItemBaseEffeNoName=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},t}(ItemBaseNotName);__reflect(ItemBaseEffeNoName.prototype,"ItemBaseEffeNoName");var ItemBaseNoTap=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onClick=function(){},t}(ItemBase);__reflect(ItemBaseNoTap.prototype,"ItemBaseNoTap");var ItemIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="ItemIconSkin",t}return __extends(t,e),t.AddEff=function(e,t){var i=t.mc;i||(i=t.mc=this.EFF_LIST.pop()||new MovieBaseObject,i.touchEnabled=!1),i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.x=t.x,i.y=t.y,i.Play(t.url,null,-1,!0,null,null,2),e.addChild(i)},t.CacheEff=function(e){var t=e.mc;t&&(this.EFF_LIST.push(t),t.stop(),DisplayUtils.removeFromParent(t),e.mc=null)},t.prototype.GetImgCorner=function(){if(!this.m_ImgCorner){var e=this.m_ImgCorner=new eui.Image;e.left=2,e.top=2,this.addChild(e)}return this.m_ImgCorner},t.prototype.ResetScale=function(){this.imgIcon&&(this.imgIcon.scaleX=this.imgIcon.scaleY=1)},t.prototype.setItemImg=function(e){this.imgIcon.source=e},t.prototype.setGray=function(e){var t=function(e){return e?!0:!1};e&&t(this.imgIcon.filters)||(this.imgIcon.filters=e?Color.GetFilter():null)},t.prototype.setItemBg=function(e){this.imgBg.source=e},t.prototype.SetQuality=function(e){this.setItemBg(ResDataPath.GetItemQualityName(e))},t.prototype.SetCornerImg=function(e){if(e){var t=this.GetImgCorner();t.source=e,t.visible=!0}},t.prototype.SetCornerType=function(e){var i=t.CornerType[e];i?this.SetCornerImg(i):this.m_ImgCorner&&(this.m_ImgCorner.visible=!1)},t.prototype.isShowLCorner=function(e){this.m_ImgCorner&&(this.m_ImgCorner.visible=e)},t.prototype.setData=function(e){if(null!=e){var i=ResDataPath.GetItemFullPath(e.icon);RES.hasRes(i)?this.imgIcon.source=i:this.imgIcon.source=ResDataPath.GetItemFullPath(e.icon),this.imgBg.source=ResDataPath.GetItemQualityName(e.quality);var o=null;if(e.itemeff&&(3==e.quality?o="eff_ui_zb_001":4==e.quality?o="eff_ui_zb_002":5==e.quality?o="eff_ui_zb_003":6==e.quality&&(o="eff_ui_zb_004")),o){var n=this.effectData;n||(n=this.effectData={}),n.scaleX=this.width/96,n.scaleY=this.height/96,n.x=this.width>>1,n.y=this.height>>1,n.url=ResDataPath.GetUIEffePath(o),t.AddEff(this,this.effectData)}else this.effectData&&(t.CacheEff(this.effectData),this.effectData=null)}else this.imgIcon.source=ResDataPath.EMPTY_STR,this.imgBg.source=ResDataPath.DEFAULT_QUALITY,this.m_ImgCorner&&(this.m_ImgCorner.source="",this.m_ImgCorner.visible=!1),this.effectData&&(t.CacheEff(this.effectData),this.effectData=null)},t.prototype.SetItemId=function(e){this.setData(GameGlobal.Config.ItemConfig[e])},t.SetItemName=function(e,t){var i=GameGlobal.Config.ItemConfig[t];i&&e&&(e.text=i.name,0!=i.type&&(e.textColor=ItemBase.QUALITY_COLOR[i.quality]))},t.prototype.$onAddToStage=function(i,o){e.prototype.$onAddToStage.call(this,i,o),this.effectData&&t.AddEff(this,this.effectData)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.effectData&&t.CacheEff(this.effectData)},t.EFF_LIST=[],t.CornerType=(_a={},_a[1]="ui_jchd_bm_zhenxi",_a[2]="ui_xb_bm_jiaobiao",_a[3]="ui_jchd_bm_zhenping",_a),t}(eui.Component);__reflect(ItemIcon.prototype,"ItemIcon");var _a,PriceIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._labelColor&&(this.priceLabel.textColor=this._labelColor),this.iconImg.addEventListener(egret.Event.COMPLETE,this._Complete,this)},t.prototype._Complete=function(){UIHelper.SetRatio(this.iconImg,44,44)},t.prototype.getPrice=function(){return this._price},Object.defineProperty(t.prototype,"price",{get:function(){return this._price},set:function(e){this.setPrice(e)},enumerable:!0,configurable:!0}),t.prototype.setPrice=function(e,t){void 0===t&&(t=0),this._price=e,this.setText(this.getTxtStr(t))},t.prototype.setColor=function(e){this.priceLabel.textColor=e},t.prototype.setPriceData=function(e,t){this.setType(e),this.setPrice(t,3)},t.prototype.setMyCount=function(e){e!=this._myCount&&(this._myCount=e,this.setText(this.getTxtStr()))},t.prototype.setEnoughCount=function(e){e!=this._myCount&&(this._myCount=e,this.setText(this.getTextEnough()))},t.prototype.getTxtStr=function(e){if(void 0===e&&(e=0),void 0!=this._myCount)return this._myCount>=this._price?"|C:0x019704&T:"+this._myCount+"|/"+this._price:"|C:0xff0000&T:"+this._myCount+"|/"+this._price;if(1==e)return"|C:0xff00&T:"+this._price+"|";if(2==e)return this._price>1e6?"|C:0xff00&T:"+this._price/1e4+"万|":"|C:0xff00&T:"+this._price+"|";if(3==e){var t=void 0;return t=GameGlobal.actorModel.IsCurrency(this._type)?GameGlobal.actorModel.GetNum(this._type):GameGlobal.UserBag.GetCount(this._type),t>=this._price?"|C:0x019704&T:"+t+"|/"+this._price:"|C:0xfd0000&T:"+t+"|/"+this._price}return""+this._price},t.prototype.getTextEnough=function(e){return void 0===e&&(e=0),void 0!=this._myCount?this._myCount>=this._price?"|C:0x019704&T:"+this._price+"|":"|C:0xff0000&T:"+this._price+"|":e>0?"|C:0xff00&T:"+this._price+"|":""},t.prototype.isEnough=function(){return this._myCount&&this._myCount>=this._price?!0:!1},Object.defineProperty(t.prototype,"text",{set:function(e){this.setText(e)},enumerable:!0,configurable:!0}),t.prototype.setText=function(e){e+="",this.priceLabel.textFlow=TextFlowMaker.generateTextFlow(e)},t.prototype.setData=function(e){if(egret.is(e,"RewardData")){var t=e;this._type=t.id,this.setPrice(t.count),this.setMyCount(t.myCount)}else if(e){var i=e;this._type=i.itemConfig.id,this.setPrice(i.count)}this.iconImg.source=RewardData.GetCurrencyMiniRes(this._type)},t.prototype.setConfigData=function(e){e&&e.id&&e.count&&(this.setType(e.id),this.setPrice(e.count))},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this.setType(e)},enumerable:!0,configurable:!0}),t.prototype.getType=function(){return this._type},t.prototype.setType=function(e){if(this._type!=e){this._type=e;var i=t.GetResIcon(this._type);this.iconImg.source=i}},Object.defineProperty(t.prototype,"labelColor",{get:function(){return this._labelColor},set:function(e){this._labelColor!=e&&(this._labelColor=e,this.priceLabel&&(this.priceLabel.textColor=this._labelColor))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeName",{get:function(){return MoneyConstToName[this._type]||""},enumerable:!0,configurable:!0}),t.GetResIcon=function(e){return RewardData.GetCurrencyMiniRes(e)},t.ICON_INTEGRATION="mall_res_002",t}(BaseView);__reflect(PriceIcon.prototype,"PriceIcon");var UIHelper=function(){function e(){}return e.SetHead=function(e,t,i,o){if(void 0===o&&(o=!0),null!=e){var n=e.face;return null==n?void console.log("UIHelper.SetHead face == null"):null==t||null==i?void(n.source=""):void(n.source=ResDataPath.GetHeadImgName(t,i))}},e.SetHeadByHeadId=function(e,t,i){if(void 0===i&&(i=!0),null!=e){var o=e.face;return null==o?void console.log("UIHelper.SetHeadByHeadId face == null"):void(i?o.source=t?ResDataPath.GetHeadCircleImgNameById(t):"":o.source=t?ResDataPath.GetHeadMiniImgNameById(t):"")}},e.ShowRedPoint=function(e,t){if(e){var i=e.redPoint;if(null==i){var o=e;o.getChildByName&&(i=o.getChildByName("redPoint"))}return i?void(i.visible=t?!0:!1):void console.log("没有设置提示图标",e.name)}},e.SetBtnNormalEffe=function(e,t,i,o){var n=1,a=1;i&&(n=i/148),o&&(a=o/53);var r="normalbtn",s=e.getChildByName(r);s?t?s.loadUrl(ResDataPath.GetUIEffePath2(r),!0,-1):DisplayUtils.removeFromParent(s):t&&(s=new MovieClip,s.name=r,s.x=e.width>>1,s.y=e.height>>1,s.scaleX=n,s.scaleY=a,e.addChild(s),s.loadUrl(ResDataPath.GetUIEffePath2(r),!0,-1))},e.SetBtnEffe=function(e,t,i,o,n,a,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r=null);var s=e.getChildByName(t);s?i?s.loadUrl(ResDataPath.GetUIEffePath2(t),!0,-1):DisplayUtils.removeFromParent(s):i&&(s=new MovieClip,s.name=t,e.addChild(s),s.loadUrl(ResDataPath.GetUIEffePath2(t),!0,-1)),s&&s.parent&&((o||n)&&(s.scaleX=o||n,s.scaleY=n||o),s.x=a||30,s.y=r||0)},e.RemoveIconMovie=function(e){egret.Tween.removeTweens(e)},e.SetBtnEffeType8=function(t,i){e.SetBtnEffe(t,"chargeff1",i,1.1,1.3)},e.SetCircleEffe=function(t,i,o,n){void 0===o&&(o=33),void 0===n&&(n=30),e.SetBtnEffe(t,"actIconCircle",i,null,null,o,n)},e.SetScrollHIndex=function(e,t){if(null==e.parent)return void console.warn("not scroll view");var i=e.parent.width,o=0,n=0,a=0;null!=e.layout&&(egret.is(e.layout,"eui.HorizontalLayout")?(o=e.layout.gap||0,n=e.layout.paddingLeft||0,a=e.layout.paddingRight||0):egret.is(e.layout,"eui.HorizontalLayout")&&(o=e.layout.horizontalGap||0,n=e.layout.paddingLeft||0,a=e.layout.paddingRight||0));var r=e.getChildAt(0)?e.getChildAt(0).width:0,s=-n+(r+o)*t;e.scrollH=MathUtils.Clamp(s,-n,n+(r+o)*e.numElements+a-o-i)},e.ScrollHIndex=function(e,t,i,o){null==o&&(o=e.width),e.validateNow();var n=e.numElements*i-o;e.scrollH=Math.min(t*i,n)},e.ScrollHRight=function(e,t,i){null==i&&(i=e.width),e.scrollH=Math.min(e.numElements*t-i,e.scrollH+i)},e.ScrollHLeft=function(e,t){null==t&&(t=e.width),e.scrollH=Math.max(0,e.scrollH-t)},e.SetLinkStyleLabel=function(e,t){void 0===t&&(t=null),e&&(e.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>'+(null==t?e.text:t)+"</u></a>"))},e.GetChildByName=function(e,t){return null==e||null==e.getChildByName?null:e.getChildByName(t)},e.ListRefresh=function(e){if(null!=e){var t=e.dataProvider;null!=t&&t.replaceAll(t.source)}},e.PlayBoomEff=function(e){if(e){var t=ObjectPool.pop("MovieClip");t.scaleX=t.scaleY=1,t.rotation=0,t.x=e.width>>1,t.y=e.height>>1,t.loadFile(ResDataPath.GetUIEffePath("litboom"),!0,1,function(){ObjectPool.push(t)}),e.addChild(t)}},e.PlayUpEff=function(e,t){if(void 0===t&&(t=1),e){var i=ObjectPool.pop("MovieClip");i.scaleX=i.scaleY=t,i.x=e.width>>1,i.y=e.height>>1,i.loadFile(ResDataPath.GetUIEffePath("ui_eff_skillf_001"),!0,1,function(){}),e.addChild(i)}},e.SetVisible=function(e,t){e&&(e.visible=t,e.includeInLayout=t)},e.prototype.RefreshList=function(e){if(e){var t=e.dataProvider;if(t&&egret.is(t,"eui.ArrayCollection")){var i=t;i.replaceAll(i.source)}}},e.SetLabelText=function(e,t,i){e.textFlow=TextFlowMaker.generateTextFlow(t+("|C:0x38983d&T:"+i+"|"))},e.SetInputMaxChar=function(e,t){var i=e.text;e.addEventListener(egret.Event.CHANGE,function(){var t=StringUtils.strByteLen(e.text);t>12?e.text=i:i=e.text},e)},e.SetRatio=function(e,t,i){if(e){var o=e.$Bitmap[0];if(o&&o){var n=o.textureWidth,a=o.textureHeight;a>i?(e.height=i,e.width=i/a*n):(e.width=t,e.height=t/n*a)}}},e.PlayPanelTween=function(e){egret.Tween.removeTweens(e),e.scaleX=e.scaleY=.5,e.alpha=0,egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut)},e.PANEL="Panel",e.PANEL_NO_TAB="Panel2",e.STAE_IMG_NAME="ui_bm_star022",e.STAE_NONE_IMG_NAME="ui_bm_star021",e.DEFUALT_HEAD_ID=10,e}();__reflect(UIHelper.prototype,"UIHelper");var GuideUtil=function(){function e(){this.mGuideDoneCount={},this.m_LastTime=0,this.m_IsBindMsg=!1,this.m_ShowState=0,this.m_IsAdd=!1,this.m_GuideDelay=null,this.m_GuideStep=null}return Object.defineProperty(e.prototype,"GuideId",{get:function(){return this.m_GuideId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mGuideHand",{get:function(){return this.guideHand||(this.guideHand=new GuideHand),this.guideHand},enumerable:!0,configurable:!0}),e.CheckPart=function(e){return this.mCheckPart[e]?!0:!1},e.prototype.Finish=function(e,t){e&&t&&(this.m_GuideId=-1,this.m_GuideStep=null,this.m_GuideDelay=null,this.Show(e,t,0))},e.prototype.Start=function(e){var t=GameGlobal.Config.GuideStepConfig[e];t&&(this.m_GuideId=e,this.m_GuideStep=null,this.m_GuideDelay=null,this.DoGuide(0))},e.prototype.Trigger=function(e,t){return e&&2==e.type?(this.m_IsAdd||(this.m_IsAdd=!0,GameGlobal.MessageCenter.addListener(MessageDef.PLOT_PLAY_END,this.OnPlotEnd,this)),PlotPanel.OpenPlot(e.value,1e6*this.m_GuideId+t),!1):!0},e.prototype.OnPlotEnd=function(e){this.m_IsAdd&&(this.m_IsAdd=!1,GameGlobal.MessageCenter.removeListener(MessageDef.PLOT_PLAY_END,this.OnPlotEnd,this));var t=Math.floor(e/1e6),i=e%1e6;t==this.m_GuideId&&this.Guide(i+1)},e.prototype.PreTrigger=function(e,t){if(!e)return!0;if(1==e.type){GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL_ALL);var i=GameGlobal.Config.GuideBaseConfig.text;GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_COPY_NAME,i[MathUtils.limitInteger(0,i.length-1)],!0)}else console.error("not imple PreTrigger type => "+e.type);return!0},e.prototype.Guide=function(e){this.m_GuideStep=e,this.m_GuideDelay=3},e.prototype.DoGuide=function(e){var t=GameGlobal.Config.GuideStepConfig[this.m_GuideId];if(!t)return void this.HideGuideHand();var i=t[e];if(!i)return void this.HideGuideHand();if(!this.CheckCondition(i.preCon))return console.log("条件不满足退出 => ",this.m_GuideId,e),void this.HideGuideHand();if(!this.PreTrigger(i.preui,e))return void this.HideGuideHand();var o=GuideConst.GetTarget(i.panel,i.pos);if(o){var n=o[0],a=o[1];this.Show(n,a,e)}else this.HideGuideHand()},e.prototype.GetTopLayer=function(e){if(!e)return null;for(var t=e;;){if(t.__TOP_LAYER__)return t;if(t=t.parent,!t)return null}},e.prototype.Show=function(e,t,i){if(!e||!t)return void this.HideGuideHand();DisplayUtils.removeFromParent(this.mGuideHand);var o=this.GetTopLayer(e);o&&o.parent.addChildAt(this.mGuideHand,o.parent.getChildIndex(o)+1),0!=this.m_ShowState&&this.mGuideHand.$visible?this.mGuideHand.MoveToTarget(this.m_GuideId,i,e,t):this.mGuideHand.ShowTarget(this.m_GuideId,i,e,t),this.m_ShowState=1},e.prototype.Init=function(){egret.startTick(this.UpdateTime,this)},e.prototype.UpdateTime=function(e){if(null!=this.m_GuideStep)if(this.m_GuideDelay)--this.m_GuideDelay;else{var t=this.m_GuideStep;this.m_GuideStep=null,this.DoGuide(t)}var i=e-this.m_LastTime;return this.m_LastTime=e,this.guideHand&&this.guideHand.parent&&1==this.m_ShowState&&this.guideHand.OnUpdate(i),this.m_ShowState>=2&&(--this.m_ShowState,this.m_ShowState<=2&&(this.guideHand&&(this.guideHand.OnClose(),DisplayUtils.removeFromParent(this.guideHand)),this.m_ShowState=0)),!1},e.prototype.CheckCondition=function(e){if(!e)return!0;switch(e.type){case 1:return GameGlobal.UserFb.CanPkBoss();default:console.error("not impl check condition => "+e)}return!0},e.prototype.HideGuideHand=function(e){void 0===e&&(e=!1),e?this.m_ShowState=2:this.m_ShowState=6},e.prototype.OnTargetRemoved=function(e,t){this.m_GuideId==e&&this.HideGuideHand()},e.prototype.OnTargetTap=function(e,t){if(this.m_GuideId==e){var i=GameGlobal.Config.GuideStepConfig[e];if(!i)return void this.HideGuideHand();var o=i[t];return this.Trigger(o.ui,t)?void(i[t+1]?this.Guide(t+1):(this.mGuideDoneCount[e]=(this.mGuideDoneCount[e]||0)+1,this.HideGuideHand(!0))):void this.HideGuideHand()}},e.mCheckPart={},e}();__reflect(GuideUtil.prototype,"GuideUtil");var GuideConst=function(){function e(){}return e.GetViewList=function(){return this.m_ViewList||(this.m_ViewList=(e={},e[1]={cls:PlayFunView,subCls:null},e[2]={cls:GameSceneView,subCls:null},e[3]={cls:MainBottomPanel,subCls:null},e[4]={cls:GameCityPanel,subCls:null},e[100]={cls:FbLayer,subCls:null},e[10010]={cls:RoleWin,subCls:RoleInfoPanel},e[20010]={cls:RoleWin,subCls:RoleSkillPanel},e[30010]={cls:GuanQiaRewardWin,subCls:GuanQiaRewardPanel},e[40010]={cls:PetMainPanel,subCls:PetUpLevelPanel},e[10030]={cls:ForgeWin,subCls:ForgeqhPanel},e[50010]={cls:RoleWin,subCls:RoleRidePanel},e[10020]={cls:SmeltEquipTotalWin,subCls:SmeltEquipNormalPanel},e[30020]={cls:WorldMapPanel,subCls:null},e[60050]={cls:FbLayer,subCls:CaiLiaoFbPanel},e[60081]={cls:FbLayer,subCls:LingLongTaPanel},e[60060]={cls:FbLayer,subCls:FbCbtPanel},e[60020]={cls:BossMainPanel,subCls:PersonBossPanel},e[60040]={cls:ArenaWin,subCls:ArenaInfoPanel},e[60090]={cls:DailyMainWin,subCls:DailyFomalhautMainPanel},e[6009001]={cls:DailyFomalhautTaskPanel,subCls:null},e)),this.m_ViewList;var e},e.GetView=function(e,t){void 0===t&&(t=null);var i=ViewManager.ins().getView(e);if(t&&i&&i.mCommonWindowBg){var o=i.mCommonWindowBg.GetViewByClassType(t);return o}return i},e.GetTarget=function(e,t){var i=this.GetViewList()[e];if(i){var o=this.GetView(i.cls,i.subCls);if(o)if(100==t){var n=Util.GetParentByType(o,BaseEuiView);if(n&&n.mCommonWindowBg&&n.mCommonWindowBg.returnBtn)return[n,n.mCommonWindowBg.returnBtn];console.warn("view not close btn => "+egret.getQualifiedClassName(o))}else{if(o.GetGuideTarget){var a=o.GetGuideTarget(),r=a[t];return r||console.error("not find target => "+egret.getQualifiedClassName(o)+"; targetId => "+t),[o,r]}console.error("not GetGuideTarget func => "+egret.getQualifiedClassName(o))}else console.warn("not open view => "+egret.getQualifiedClassName(i.cls))}else console.error("not def panelId => "+e);return null},e.m_ViewList=null,e}();__reflect(GuideConst.prototype,"GuideConst");var GuideHand=function(e){function t(){var t=e.call(this)||this;return t.m_Type=0,t.m_Listener={ResetFunc:null,list:[]},t.m_PosInvalid=!1,t.skinName="GuideHandSkin",t.touchEnabled=!1,t.touchChildren=!1,t.play.addEventListener("complete",t.onTweenGroupComplete,t),t.mc=t.mc||new MovieClip,t.mc.x=0,t.mc.y=0,t.mc.loadFile(ResDataPath.GetUIEffePath2("ui_guide_001"),!0,-1),t.group.addChild(t.mc),t}return __extends(t,e),t.prototype.Play=function(){this.mc.visible=!0,this.play.play(0)},t.prototype.Pause=function(){this.mc.visible=!1,this.play.play(0),this.play.pause()},t.prototype.onTweenGroupComplete=function(){this.m_Target&&this.play.play(0)},t.prototype.RemoveTargetEvent=function(){var e=this.m_Target;if(e){for(var t=0,i=this.m_Listener.list;t<i.length;t++){var o=i[t];o.target.removeEventListener(o.event,o.func,o.thisObject)}this.m_Listener.list=[],this.m_Listener.ResetFunc=null,this.m_Target=null,this.m_ObjParent=null}},t.prototype.AddEventListener=function(e,t,i,o,n,a){e.addEventListener(t,i,o,n,a),this.m_Listener.list.push({target:e,event:t,func:i,thisObject:o})},t.prototype.AddTargetEvent=function(e,t,i){var o=t,n=i,a=function(e){e.target==e.currentTarget&&GameGlobal.GuideUtil.OnTargetRemoved(o,n)},r=function(){GameGlobal.GuideUtil.OnTargetTap(o,n)};this.m_Listener.ResetFunc=function(e,t){o=e,n=t},this.AddEventListener(e,egret.Event.REMOVED_FROM_STAGE,a,this),this.AddEventListener(e,egret.Event.REMOVED,a,this),this.AddEventListener(e,egret.Event.ADDED,this.OnTargetAdded,this),this.AddEventListener(e,egret.TouchEvent.TOUCH_TAP,r,this,!1,-999),this.m_Target=e},t.prototype.OnTargetAdded=function(e){e.target==e.currentTarget&&this.OnTargetPosition()},t.prototype.GetTargetPosition=function(){var e=this.m_Target;if(e){var t=egret.$TempPoint;return DisplayUtils.GetGlobalPos(e,t),this.globalToLocal(t.x,t.y,t),{x:t.x+(e.width>>1),y:t.y+(e.height>>1)}}},t.prototype.OnTargetPosition=function(){var e=this.m_Target;if(e){var t=this.GetTargetPosition();t&&(this.group.x=t.x,this.group.y=t.y)}},t.prototype.OnMoveTargetPosition=function(){var e=this.m_Target;if(e){var i=this.GetTargetPosition();if(i){this.m_CX=this.group.x,this.m_CY=this.group.y,this.m_EX=i.x,this.m_EY=i.y;var o=this.m_EX-this.m_CX,n=this.m_EY-this.m_CY,a=Math.sqrt(o*o+n*n);this.m_Time=0,this.m_Duration=Math.ceil(a/t.SPEED*1e3)}}},t.prototype.OnClose=function(){this.RemoveTargetEvent()},t.prototype.OnUpdate=function(e){switch(this.m_Target&&this.m_ObjParent&&(this.m_Target.$visible&&this.m_ObjParent.$visible&&!this.$visible?this.$setVisible(!0):this.m_Target.$visible&&this.m_ObjParent.$visible||!this.$visible||this.$setVisible(!1)),this.m_Type){case t.TYPE_STAND:this.OnTargetPosition();break;case t.TYPE_MOVE:if(this.m_PosInvalid)this.OnMoveTargetPosition(),this.m_PosInvalid=!1;else{this.m_Time+=e;var i=void 0;this.m_Time>=this.m_Duration?(i=1,this.m_Duration=0):i=this.m_Time/this.m_Duration,i=egret.Ease.sineOut(i),MathUtils.Lerp(this.m_CX,this.m_CY,this.m_EX,this.m_EY,i,this.group),i>=1&&(this.m_Type=t.TYPE_STAND,this.Play())}}},t.prototype.SetTargetData=function(e,t,i,o){return this.m_Target==o?void(this.m_Listener.ResetFunc&&this.m_Listener.ResetFunc(e,t)):(this.m_Target&&this.RemoveTargetEvent(),void(this.m_Target||(this.m_ObjParent=i,this.AddTargetEvent(o,e,t))))},t.prototype.ShowTarget=function(e,i,o,n){this.SetTargetData(e,i,o,n),this.m_PosInvalid=!0,this.m_Type=t.TYPE_STAND,this.Play()},t.prototype.MoveToTarget=function(e,i,o,n){this.SetTargetData(e,i,o,n),this.m_PosInvalid=!0,this.m_Type=t.TYPE_MOVE,this.Pause()},t.SPEED=1100,t.TYPE_STAND=0,t.TYPE_MOVE=1,t}(eui.Component);__reflect(GuideHand.prototype,"GuideHand");var BattleMap=function(){function e(){}return e.Parse=function(e){this.mOldFbId=this.mFbId,this.mOldFbType=this.mFbType,this.mFbId=e.mFbId,this.mFbType=e.mFbType,this.mFbName=e.mFbName,this.mFbDesc=e.mFbDesc,this.mMapId=e.mMapId},e.Exit=function(){return this.mOldFbId=this.mFbId,this.mOldFbType=this.mFbType,this.mFbId=0,this.mFbType=0,this.mFbName="",this.mFbDesc="",this.mMapId=0,this.mOldFbType?!0:!1},e.IsNoramlLevel=function(){return 0==this.mFbId},e.IsCangBaoTu=function(){return this.mFbType==UserFb.FB_TYPE_TREASURE},e.IsGuanQiaBoss=function(){return this.mFbType==UserFb.FB_TYPE_GUANQIABOSS},e.IsFieldBoss=function(){return this.mFbType==UserFb.FB_TYPE_FIELD_BOSS},e.IsPersonalBoss=function(){return this.mFbType==UserFb.FB_TYPE_PERSONAL_BOSS},e.IsPublicBoss=function(){return this.mFbType==UserFb.FB_TYPE_PUBLIC_BOSS},e}();__reflect(BattleMap.prototype,"BattleMap");var BattleMapData=function(){function e(){}return e}();__reflect(BattleMapData.prototype,"BattleMapData");var BattleView=function(e){function t(){var t=e.call(this)||this;return t.m_IsUpdate=!1,t.width=StageUtils.WIDTH,t._bgMapImg=new eui.Image,t._bgMapImg.horizontalCenter=0,t._bgMapImg.x=-120,t.addChild(t._bgMapImg),t._blackImg1=new eui.Image,t._blackImg1.source="ui_cm_black",t.addChild(t._blackImg1),t._Img=new eui.Image,t._Img.source=ResDataPath.ROOT+"image/battlemap/backMark.png",t._Img.horizontalCenter=0,t.addChild(t._Img),t._Img.addEventListener(egret.Event.COMPLETE,t.onResize,t),t._entityLayer=new egret.DisplayObjectContainer,t._entityLayer.width=529,t._entityLayer.height=548,t.addChild(t._entityLayer),t.bloodLayer=new BloodView,t.addChild(t.bloodLayer),t.onResize(),t}return __extends(t,e),t.prototype.onResize=function(){var e=egret.MainContext.instance.stage.stageWidth,t=egret.MainContext.instance.stage.stageHeight;this._Img.x=e-this._Img.width>>1,this._Img.y=(t-this._Img.height>>1)-60,this._bgMapImg.height=t,this._bgMapImg.height=t/StageUtils.HEIGHT*960,this._bgMapImg.x=e-this._bgMapImg.width>>1,this._bgMapImg.y=0,this._blackImg1.x=-100,this._blackImg1.y=-100,this._blackImg1.width=e+200,this._blackImg1.height=t+200,this._entityLayer.x=e-this._entityLayer.width>>1,this._entityLayer.y=(t-this._entityLayer.height>>1)-40,this.bloodLayer.x=this._entityLayer.x,this.bloodLayer.y=this._entityLayer.y},t.prototype.showMapBg=function(e){this._bgMapImg.visible=!0,this._blackImg1.alpha=.7,this._Img.alpha=1,this.alpha=1,GameMap.mBattleLayer.addChild(this);var t=e;this._bgMapImg.source!=t&&ResMgr.Ref(t),this._bgMapImg.source=t},t.prototype.Hide=function(){var e=this._bgMapImg.source;e&&(ResMgr.Unref(e),this._bgMapImg.source=""),this._bgMapImg.visible=!1,DisplayUtils.removeFromParent(this)},t.prototype.ShowDefault=function(){this._bgMapImg.visible=!1,this._blackImg1.alpha=0,this._Img.alpha=0,this.alpha=1,GameMap.mBattleLayer.addChild(this),egret.Tween.removeTweens(this),egret.Tween.removeTweens(this._blackImg1),egret.Tween.removeTweens(this._Img),egret.Tween.get(this._blackImg1).to({alpha:.7},300),egret.Tween.get(this._Img).to({alpha:1},300)},t.prototype.StartHide=function(e){var t=this;egret.Tween.get(this).to({alpha:0},500).call(function(){t.Hide(),e&&e()})},t.prototype.AddEntity=function(e){this._entityLayer.addChild(e),this.UpdateSort()},t.prototype.GetEntityGlobal=function(e,t,i){this._entityLayer.localToGlobal(e,t,i)},t.prototype.Clear=function(){this.bloodLayer.Clear()},t.prototype.UpdateSort=function(e){void 0===e&&(e=!1),e?(TimerManager.ins().remove(this.UpdateIndex,this),this.UpdateIndex()):this.m_IsUpdate||(this.m_IsUpdate=!0,this._entityLayer.$children.length&&TimerManager.ins().doTimer(500,1,this.UpdateIndex,this))},t.prototype.UpdateIndex=function(){this.m_IsUpdate=!1,this._entityLayer.$children.sort(MapView.sortF)},t}(egret.DisplayObjectContainer);__reflect(BattleView.prototype,"BattleView");var GameMap=function(){function e(){}return e.GetMap=function(){return null==this.m_MapLayer?(console.error("not mapview !!!"),new MapView):this.m_MapLayer},e.SetGameMainActive=function(e){var t=this.m_Group;e&&!t.parent?LayerManager.Game_Main.addChild(t):!e&&t.parent&&DisplayUtils.removeFromParent(t)},e.Init=function(){this.m_Init||(this.m_Group=new egret.DisplayObjectContainer,LayerManager.Game_Main.addChild(this.m_Group),this.m_Init=!0,this.m_MapLayer=new MapView,this.m_MapLayer.initMap(),this.m_Group.addChildAt(this.m_MapLayer,0),this.mBattleLayer=new egret.DisplayObjectContainer,this.m_Group.addChild(this.mBattleLayer),this.m_BattleView=new BattleView,this.onResize(),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.grid=this.grid||new MapGrid,this.aStar=this.aStar||new AStar,this.mapZip=this.mapZip||new JSZip(RES.getRes("map")),RES.destroyRes("map"))},e.onResize=function(){this.m_BattleView.onResize()},e.SetShowState=function(e){e!=this.m_ShowState&&(this.m_ShowState=e,this.m_MapLayer&&(e==RaidMgr.TYPE_NORMAL?(DisplayUtils.removeFromParent(this.m_MapLayer.mCityEntityView),this.m_Group.addChildAt(this.mBattleLayer,1),this.m_MapLayer.addChildAt(this.m_MapLayer.mMapEntityView,1)):(DisplayUtils.removeFromParent(this.m_MapLayer.mMapEntityView),DisplayUtils.removeFromParent(this.mBattleLayer),this.m_MapLayer.addChildAt(this.m_MapLayer.mCityEntityView,2))))
},e.GetBattleView=function(){return this.m_BattleView},e.AddBattleEntity=function(e){this.m_BattleView.AddEntity(e)},e.ClearBattleView=function(){this.m_BattleView.Clear()},e.SetActive=function(t){e.SetGameMainActive(t)},e.EntityHpChange=function(e,t){void 0===t&&(t=null);var i=e.team,o=e.x,n=e.y,a=e.type,r=e.value,s=SkillsConfig.GetSkillEffConfig(e.skillId);s&&s.shake?DisplayUtils.shakeIt(this.m_BattleView,s.shake[0],s.shake[1],s.shake[2]):t&&DisplayUtils.shakeIt(this.m_BattleView,t[0],t[1],t[2]);var l=this.m_BattleView.bloodLayer;l.ShowBlood(i,o,n,a,r)},e.UpdateScene=function(){this.DoUpdateScene()},e.DoUpdateScene=function(){var e=GameGlobal.RaidMgr.GetCurMapId();if(this.m_MapLayer.mapId!=e){var t=GlobalConfig.ins().ScenesConfig[e].mapfilename,i=this.mapZip.file(ResDataPath.GetMapData(t));i?(this.parserBytes(JSON.parse(i.asText())),this.m_MapLayer.ChangeMap(e,t)):egret.log("地图资源读取异常:"+t)}},e.parserBytes=function(e){this.CELL_SIZE=64,this.MAX_WIDTH=e.width,this.MAX_HEIGHT=e.height,this.COL=e.realWidth,this.ROW=e.realHeight,this.chunkw=e.chunkw||512,this.chunkh=e.chunkh||512,this.scale=e.scale||0,this.scalechunk=e.scalechunk||512,this.mPath=e.path||[],this.grid.initGrid(this.ROW,this.COL,e.datas),this.aStar.initFromMap(this.grid)},e.GetRandomPos=function(t,i,o,n,a){for(var r=null,s=null,l=0;6>l;++l){var c=MathUtils.limitInteger(t-o,t+o),u=MathUtils.limitInteger(i-o,i+o);if(e.checkWalkable(c,u)){r=c,s=u;break}}null!=r&&null!=s&&null!=a?(a.x=r,a.y=s):(a.x=t,a.y=i)},e.checkWalkable=function(t,i){return e.grid.isWalkableTile(t,i)},e.checkAlpha=function(t,i){return e.grid.IsHide(t,i)},e.parser=function(e){this.oldFbId=this.fubenID,this.oldFbType=this.fbType,this.fubenID=e.fubenID,e.mapX?this.mapX=Const.PosToPixel(e.mapX):this.mapX=null,e.mapY?this.mapY=Const.PosToPixel(e.mapY):this.mapY=null,this.fbType=e.fbType},e.CloseView=function(e){return ViewManager.ins().isShow(e)?(ViewManager.ins().close(e),!0):!1},e.mPath=[],e.m_Init=!1,e.m_ShowState=-1,e.CRIT_SHAKE=[6,60,3],e.TYPE_ID_CITY=100101,e}();__reflect(GameMap.prototype,"GameMap");var GameMapData=function(){function e(){this.mapX=0,this.mapY=0,this.fbType=0}return e}();__reflect(GameMapData.prototype,"GameMapData");var MainCityView=function(e){function t(){var t=e.call(this)||this;return t.initMap(),t}return __extends(t,e),t.prototype.initMap=function(){for(var e=GameGlobal.Config.KingCityConfig,t=GameGlobal.Config.KingBaseConfig,i=["citypos","rcitypos","xcitypos","mcitypos"],o=0;4>o;o++)this["city"+o]=new MapCity,this["city"+o].citySrc(e[o+1][10].icon),this["city"+o].x=t[i[o]][0],this["city"+o].y=t[i[o]][1],this.addChild(this["city"+o]),this["city"+o].cityName.pixelHitTest=!0,this["city"+o].cityName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},t.prototype.setRoleHead=function(e,t){this["city"+e].cityHead(t)},t.prototype.click=function(e){var t=0;switch(e.currentTarget){case this.city0.cityName:t=CityType.MINCITY;break;case this.city1.cityName:t=CityType.PERCITY;break;case this.city3.cityName:t=CityType.MOCITY;break;case this.city2.cityName:t=CityType.XIANCITY}return 1==GameGlobal.CrossBattleModel.status?UserTips.InfoTip("活动还未开始"):void GameGlobal.CrossBattleModel.sendKingCityData(t)},t}(egret.DisplayObjectContainer);__reflect(MainCityView.prototype,"MainCityView");var CityType;!function(e){e[e.MINCITY=0]="MINCITY",e[e.PERCITY=1]="PERCITY",e[e.XIANCITY=2]="XIANCITY",e[e.MOCITY=3]="MOCITY"}(CityType||(CityType={}));var MapEntityView=function(e){function t(){var t=e.call(this)||this;return t._dropLayer=new egret.DisplayObjectContainer,t._dropLayer.name="drop",t.addChild(t._dropLayer),t._entityLayer=new egret.DisplayObjectContainer,t._entityLayer.name="entityLayer",t.addChild(t._entityLayer),t}return __extends(t,e),t.prototype.sortEntity=function(){this._entityLayer.$children.sort(MapView.sortF)},t.prototype.RemoveDropLayer=function(){this._dropLayer.removeChildren()},t.prototype.RemoveEntityLayer=function(){TimerManager.ins().remove(this.sortEntity,this),DisplayUtils.removeFromParent(this._entityLayer)},t.prototype.AddEntityLayer=function(){this._entityLayer.parent||(TimerManager.ins().doTimer(500,0,this.sortEntity,this),this.addChild(this._entityLayer))},t.prototype.AddDrop=function(e){this._dropLayer.addChild(e)},t.prototype.AddEntity=function(e){this._entityLayer.addChild(e)},t.prototype.LocalToGlobal=function(e,t,i){this._entityLayer.localToGlobal(e,t,i)},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this._entityLayer.parent&&TimerManager.ins().doTimer(500,0,this.sortEntity,this)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),TimerManager.ins().remove(this.sortEntity,this)},t}(egret.DisplayObjectContainer);__reflect(MapEntityView.prototype,"MapEntityView");var MapView=function(e){function t(){var t=e.call(this)||this;return t.mClickEff=[],t.m_PreX=null,t.m_PreY=null,t}return __extends(t,e),t.prototype.initMap=function(){this._mapImage=new MapViewBg,this.touchEnabled=!0,this.touchChildren=!0,this._mapImage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onGridClick,this),this._mapImage.touchEnabled=!0,this.addChild(this._mapImage),this.mMapEntityView=new MapEntityView,this.mMapEntityView.name="map",this.mCityEntityView=new MapEntityView,this.mCityEntityView.name="city",this.addChild(this.mMapEntityView),this.addChild(this.mCityEntityView)},t.prototype.addMapCity=function(){this.MainCityView||(this.MainCityView=new MainCityView),this.mMapEntityView.AddDrop(this.MainCityView)},t.prototype.removeMapCity=function(){DisplayUtils.removeFromParent(this.MainCityView),this.MainCityView=null},t.sortF=function(e,t){return e.y-t.y>1?1:e.y-t.y<-1?-1:e.$hashCode-t.$hashCode},t.prototype.onGridClick=function(e){var t=e.localX,i=e.localY,o=this.mClickEff.pop();o||(o=new MovieBaseObject),o.Play(ResDataPath.GetUIEffePath("scene_click001"),null,1,!0,this.OnEffComp,this,!0),o.x=t,o.y=i,this.addChild(o),GameMap.checkWalkable(Const.PixelToPos(t),Const.PixelToPos(i))&&GameGlobal.RaidMgr.OnMapClick(e.localX,e.localY)},t.prototype.OnEffComp=function(e){this.mClickEff.push(e)},t.prototype.LookAt=function(e){null!=e&&this.UpdatePos(e.x,e.y)},t.prototype._UpdatePos=function(e,t){var i=GameGlobal.StageUtils.GetWidth(),o=GameGlobal.StageUtils.GetHeight();null!=e&&(GameMap.MAX_WIDTH<i?this.x=0:this.x=-Math.min(Math.max(e-(i>>1),0),GameMap.MAX_WIDTH-i)),null!=t&&(GameMap.MAX_HEIGHT<o?this.y=o-GameMap.MAX_HEIGHT>>1:this.y=-Math.min(Math.max(t-50-(o>>1),0),GameMap.MAX_HEIGHT-o))},t.prototype.UpdatePos=function(e,t){(this.m_PreX!=e||this.m_PreY!=t)&&(this.m_PreX=e,this.m_PreY=t,this._UpdatePos(e,t),this._mapImage.updateHDMap(this))},t.prototype.ChangeMap=function(e,t){this.mapId!=e&&(this.m_PreX=null,this.m_PreY=null,this.mapId=e,this._UpdatePos(GameMap.mapX,GameMap.mapY),GameMap.MAX_WIDTH<GameGlobal.StageUtils.GetWidth()?this._mapImage.scaleX=GameGlobal.StageUtils.GetWidth()/GameMap.MAX_WIDTH:this._mapImage.scaleX=1,this._mapImage.lastUpdateX=this.x,this._mapImage.lastUpdateY=this.y,this._mapImage.initThumbnail(GameMap.MAX_WIDTH,GameMap.MAX_HEIGHT,t),this._mapImage.updateHDMap(this,!0))},t}(egret.DisplayObjectContainer);__reflect(MapView.prototype,"MapView");var MapViewBg=function(e){function t(){var t=e.call(this)||this;t._imageList={},t.m_ThumbList=[],t.chunkPos=512,t.m_MapUrl=null,t.m_ImageList=[],t.mGroup=new egret.DisplayObjectContainer,t.mGroup.touchEnabled=!1,t.mGroup.touchChildren=!1,t.addChild(t.mGroup),t.lastUpdateX=0,t.lastUpdateY=0,t.touchChildren=!1,t.touchEnabled=!1;var i=new eui.Image;return t.mGroup.addChild(i),t.thumbnail=i,t}return __extends(t,e),t.prototype.onThumbnailComplete=function(){this.isThumbnailComplete=!0,this.updateHDMap({x:this.lastUpdateX,y:this.lastUpdateY},!0)},t.prototype.initThumbnail=function(e,t,i){if(this.mapName!=i){this.mGroup.scaleX=this.mGroup.scaleY=GameMap.scale?1/(.01*GameMap.scale):1,this.chunkPos=GameMap.scalechunk,this.isThumbnailComplete=!1;for(var o in this._imageList)this.SetImage(this._imageList[o]);this._imageList={},this.mapName=i;var n=GameMap.chunkw;if(this.maxImagXCount=Math.ceil(e/n),this.maxImagYCount=Math.ceil(t/n),this.thumbnail.width=e,this.thumbnail.height=t,this.m_MapUrl){for(var a=0,r=this.m_ThumbList.length;r>a;a++)if(this.m_ThumbList[a]==this.m_MapUrl){this.m_ThumbList.splice(a,1);break}this.m_ThumbList.unshift(this.m_MapUrl);for(var a=this.m_ThumbList.length-1;a>=3;--a)RES.getAnalyzer(RES.ResourceItem.TYPE_IMAGE).destroyRes(this.m_ThumbList[a]);this.m_MapUrl=null}var s=ResDataPath.GetMapPreviewPath(this.mapName);this.m_MapUrl=s;var l=RES.getAnalyzer(RES.ResourceItem.TYPE_IMAGE),c=new RES.ResourceItem(s,s,RES.ResourceItem.TYPE_IMAGE);l.loadFile(c,this._Finish,this)}},t.prototype._Finish=function(e){e.name==this.m_MapUrl?(this.thumbnail.source=RES.getAnalyzer(RES.ResourceItem.TYPE_IMAGE).getRes(e.name),this.onThumbnailComplete()):console.error("MapViewBg._Finish resItem.name != this.m_MapUrl",e.name,this.m_MapUrl)},t.prototype.updateHDMap=function(e,t){void 0===t&&(t=!1);var i=GameMap.chunkw;if(t||Math.abs(this.lastUpdateX-e.x)>60||Math.abs(this.lastUpdateY-e.y)>60||0==this.lastUpdateX){if(this.lastUpdateX=e.x,this.lastUpdateY=e.y,!this.isThumbnailComplete)return;for(var o=GameGlobal.StageUtils.GetWidth(),n=GameGlobal.StageUtils.GetHeight(),a=Math.max(Math.floor(-e.x/i),0),r=Math.max(Math.floor(-e.y/i),0),s=Math.min(a+Math.ceil(o/i)+1,this.maxImagXCount),l=Math.min(r+Math.ceil(n/i)+1,this.maxImagYCount),c=a;s>c;c++)for(var u=r;l>u;u++){var p=this.maxImagXCount*u+c;this._imageList[p]||(this._imageList[p]=this.GetImage(c,u,ResDataPath.GetMapPath(this.mapName,c,u)))}}},t.prototype.GetImage=function(e,t,i){var o=this.m_ImageList.pop()||new eui.Image;return o.name=e+"_"+t,o.x=this.chunkPos*e,o.y=this.chunkPos*t,o.source=i,ResMgr.Ref(i),o.parent||this.mGroup.addChild(o),o},t.prototype.SetImage=function(e){e&&(StringUtils.IsNullOrEmpty(e.source)||(ResMgr.Unref(e.source),e.source="",e.$stage||e.$setBitmapData(null)),this.m_ImageList.push(e))},t}(egret.DisplayObjectContainer);__reflect(MapViewBg.prototype,"MapViewBg");var AcrossBossController=function(e){function t(){var t=e.call(this)||this;return t.tRankLast=null,t.status=0,t.changetime=0,t.shieldvalue=0,t.hp=0,t.hpperc=0,t.mCurRank=null,t.mBox={},t.mCollectNow={},t.mPlayerDead=0,t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.OnDayTimer=function(){this.m_EndTime=null},t.prototype.info=function(e){this.status=e.status,this.changetime=e.changetime,this.status==AcrossBossState.BOSS?PlayFunView.GameNotice(MainGameNoticeView.TYPE_CROSS_BOSS,600,MainGameNoticeView.SHOW_TYPE_GOTO):this.status==AcrossBossState.KILL&&PlayFunView.RemoveGameNotice(MainGameNoticeView.TYPE_CROSS_BOSS),GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_UPDATE_INFO)},t.prototype.getEndTime=function(){if(!this.m_EndTime){var e=GlobalConfig.ins().KfBossBaseConfig.opentime[1],t=e.split(":"),i=new Date(1e3*GameServer.serverTime);i.setHours(Number(t[0]),Number(t[1]),Number(t[2]),0),this.m_EndTime=Math.floor(i.getTime()/1e3)}return Math.max(this.m_EndTime-GameServer.serverTime,0)},t.prototype.doUpdateInfo=function(e){this.shieldvalue=e.shieldvalue,this.hp=e.hp,this.hpperc=e.hpperc,GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_UPDATE_HP)},t.prototype.doBoxAll=function(e){this.mBox={};for(var t=0,i=e.boxinfos;t<i.length;t++){var o=i[t];this.mBox[o.id]=o}GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_BOX)},t.prototype.doBoxOne=function(e){var t=e.boxinfo.id;delete this.mCollectNow[t],delete this.mBox[t],GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_BOX)},t.prototype.doPlayerDead=function(e){this.mPlayerDead=e.deadtime+GameGlobal.Config.KfBossBaseConfig.revivecd,GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_DEAD)},t.prototype.doRankNow=function(e){this.mCurRank=e,GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_RANK_NOW)},t.prototype.doRankLast=function(e){this.tRankLast=e,GameGlobal.MessageCenter.dispatch(MessageDef.ACROSS_BOSS)},t.prototype.doCollentNow=function(e){var t=e.info;if(t.time)this.mCollectNow[t.boxid]||(this.mCollectNow[t.boxid]=[]),this.mCollectNow[t.boxid].push(t);else{var i=this.mCollectNow[t.boxid];if(i){for(var o=0;o<i.length;o++)if(i[o].playerid==t.playerid){i.splice(o,1);break}i.length||delete this.mCollectNow[t.boxid]}}GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_BOX_COLLENT)},t.prototype.doCollentAll=function(e){this.mCollectNow={};for(var t=0,i=e.infos;t<i.length;t++){var o=i[t];this.mCollectNow[o.boxid]||(this.mCollectNow[o.boxid]=[]),this.mCollectNow[o.boxid].push(o)}GameGlobal.MessageCenter.dispatch(MessageDef.KF_BOSS_BOX_COLLENT)},t.prototype.RemoveCollentBox=function(){GameGlobal.AcrossBossManage.sendCollectBoxCancel()},t.prototype.GetDeadTime=function(){return this.mPlayerDead?Math.max(this.mPlayerDead-GameServer.serverTime,0):0},t.prototype.ClearData=function(){this.mBox={},this.mCollectNow={},this.mPlayerDead=0},t.prototype.IsAcrossBossAct=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_64)?0!=this.status:!1},t}(BaseSystem);__reflect(AcrossBossController.prototype,"AcrossBossController");var AcrossBossManage=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_kfboss_info,t.doInfo),t.regNetMsg(S2cProtocol.sc_kfboss_update_info,t.doUpdateInfo),t.regNetMsg(S2cProtocol.sc_kfboss_box_all,t.doBoxAll),t.regNetMsg(S2cProtocol.sc_kfboss_box_one,t.doBoxOne),t.regNetMsg(S2cProtocol.sc_kfboss_player_dead,t.doPlayerDead),t.regNetMsg(S2cProtocol.sc_kfboss_rank_now,t.doRankNow),t.regNetMsg(S2cProtocol.sc_kfboss_rewards,t.doRewards),t.regNetMsg(S2cProtocol.sc_kfboss_rank_last,t.doRankLast),t.regNetMsg(S2cProtocol.sc_kfboss_collect_all,t.doCollentAll),t.regNetMsg(S2cProtocol.sc_kfboss_collect_now,t.doCollentNow),t.regNetMsg(S2cProtocol.sc_kfboss_report,t.getEndAwardPanelData),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.enterMap=function(){this.Rpc(C2sProtocol.cs_kfboss_entermap)},t.prototype.sendChallenge=function(e){var t=new Sproto.cs_kfboss_challenge_request;t.challengeid=e,this.Rpc(C2sProtocol.cs_kfboss_challenge,t)},t.prototype.sendCollectBox=function(e){var t=new Sproto.cs_kfboss_collect_box_start_request;t.boxid=e,this.Rpc(C2sProtocol.cs_kfboss_collect_box_start,t)},t.prototype.sendCollectBoxCancel=function(){this.Rpc(C2sProtocol.cs_kfboss_collect_box_cancel)},t.prototype.sendRelive=function(){this.Rpc(C2sProtocol.cs_kfboss_relive)},t.prototype.sendGetLastRank=function(){this.Rpc(C2sProtocol.cs_kfboss_getranks)},t.prototype.sendGetRewards=function(e){this.Rpc(C2sProtocol.cs_kfboss_get_rewards,null,function(e){})},t.prototype.doInfo=function(e){GameGlobal.AcrossBossController.info(e)},t.prototype.doUpdateInfo=function(e){GameGlobal.AcrossBossController.doUpdateInfo(e)},t.prototype.doBoxAll=function(e){GameGlobal.AcrossBossController.doBoxAll(e)},t.prototype.doBoxOne=function(e){GameGlobal.AcrossBossController.doBoxOne(e)},t.prototype.doPlayerDead=function(e){GameGlobal.AcrossBossController.doPlayerDead(e)},t.prototype.doRankNow=function(e){GameGlobal.AcrossBossController.doRankNow(e)},t.prototype.doRewards=function(e){GameGlobal.RaidModel.OnCrossBossResult(e)},t.prototype.doRankLast=function(e){GameGlobal.AcrossBossController.doRankLast(e)},t.prototype.doCollentNow=function(e){e.info&&GameGlobal.AcrossBossController.doCollentNow(e)},t.prototype.doCollentAll=function(e){GameGlobal.AcrossBossController.doCollentAll(e)},t.prototype.getEndAwardPanelData=function(e){if(e){var t=new activityEndAwardData;t.award=e.rewards,t.auction=e.auctionrewards,t.paneltitle="跨服争霸";var i={titleName:"",name:"",iconSrc:"",iconBgSrc:"",banghuiTxt:null};i.titleName="跨服BOSS归属帮会",i.name=e.sharedata.victory,i.iconSrc="ui_bh_bm_qizi",t.icon1=i;var o={titleName:"",name:"",iconSrc:"",iconBgSrc:"",banghuiTxt:null};o.titleName="伤害第一名玩家",o.name=e.sharedata.first,o.iconSrc=ResDataPath.GetHeadImgName(e.sharedata.job,e.sharedata.sex),t.icon2=o,ViewManager.ins().open(ActivityEndAwardPanel,t)}},t}(BaseSystem);__reflect(AcrossBossManage.prototype,"AcrossBossManage");var AcrossBossState;!function(e){e[e.CLOSE=0]="CLOSE",e[e.WAIT=1]="WAIT",e[e.BOSS=2]="BOSS",e[e.KILL=3]="KILL",e[e.REBORNING=4]="REBORNING"}(AcrossBossState||(AcrossBossState={}));var AcrossBossBox=function(e){function t(t,i){var o=e.call(this)||this;return o.mIds={},o.skinName="AcrossBossBoxSkin",o.mBox=t,o.mClotieTime=i,o.addEventListener(egret.TouchEvent.TOUCH_TAP,o._OnClick,o),o.dataGroup.x=-1*(o.dataGroup.width>>1),o.dataGroup.y=-1*(o.dataGroup.height>>1),o.barGroup.visible=!1,o}return __extends(t,e),t.prototype.GetBar=function(){var e=new eui.ProgressBar;e.skinName="bar0Skin";var t=this.mClotieTime;return e.maximum=t,e.value=t,e.slideDuration=1e3*t,e.width=148,e.height=20,e.labelFunction=function(e,t){return e+"秒"},e},t.prototype.ResetBarValue=function(e,t){null==t&&(t=GameGlobal.Config.KfBossBaseConfig.coltime),t=Math.max(t-GameServer.serverTime,0),e.slideDuration=0,e.value=t,e.slideDuration=1e3*t},t.prototype.OnAdded=function(e){if(!e){this.img.scaleX=this.img.scaleY=0;var t=egret.Tween.get(this.img);t.to({scaleX:1,scaleY:1,y:-100},200,egret.Ease.backOut).to({y:0},100)}this.x=this.mBox.x,this.y=this.mBox.y,GameMap.GetMap().mMapEntityView.AddDrop(this)},t.prototype.DoRemoved=function(){DisplayUtils.removeFromParent(this)},t.prototype._OnClick=function(){GameGlobal.RaidMgr.mMapRaid.MoveOrder(this.mBox.id,this.x,this.y,100)},t.prototype.ShowBar=function(e,t){var i=this.mIds[e];t?(i||(i=this.GetBar(),this.bar.addChild(i),this.mIds[e]=i),this.ResetBarValue(i,t),i.value=0):i&&(DisplayUtils.removeFromParent(i),delete this.mIds[e]),this.barGroup.visible=this.bar.numChildren>0},t.prototype.ShowBars=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];this.ShowBar(o.playerid,o.time)}},t.prototype.RemoveBar=function(){this.mIds={},this.bar.removeChildren(),this.barGroup.visible=!1},t}(eui.Component);__reflect(AcrossBossBox.prototype,"AcrossBossBox");var AcrossBossPanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=20,t.tPanelData=[],t.nStatus=0,t.nCountTime=0,t.skinName="AcrossBossSkin",t.listBoss.itemRenderer=ItemBaseNotName,t.listHave.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.RedPointCheck=function(){return GameGlobal.AcrossBossController.IsAcrossBossAct()},t.prototype.childrenCreated=function(){this.oConfig=GlobalConfig.ins().KfBossBaseConfig},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e[0]||0;this.observe(MessageDef.KF_BOSS_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.ACROSS_BOSS,this.UpdateContent),this.observe(MessageDef.KF_BOSS_RANK_NOW,this.UpdateContent),this._AddClick(this.btnOpen,this.onClick),this._AddClick(this.btnInfo,this.showTip),this._AddClick(this.btnShowAward,this.showAward),this.btnShowAward.icon=ActivityModel.ICONSOURCE_MAP[ActivityModel.TYPE_GANG_BOSS],GameGlobal.AcrossBossManage.sendGetLastRank(),this.showPanel.SetBodyId(MonstersConfig.GetAppId(GlobalConfig.ins().KfBossBaseConfig.bossid)),this.AddLoopTimer(1e3,this.upTime),this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData(),this.listBoss.dataProvider=new eui.ArrayCollection(this.oConfig.showItem1),this.listHave.dataProvider=new eui.ArrayCollection(this.oConfig.showItem2),this.upInfo()},t.prototype.upInfo=function(){var e="",t="";this.nStatus?(this.btnOpen.label="挑战",this.lbShowTitle.text="当前所属",GameGlobal.AcrossBossController.mCurRank&&GameGlobal.AcrossBossController.mCurRank.playerranks&&GameGlobal.AcrossBossController.mCurRank.playerranks[0]&&(e=GameGlobal.AcrossBossController.mCurRank.playerranks[0].name,t=GameGlobal.AcrossBossController.mCurRank.playerranks[0].serverid+"")):(this.btnOpen.label="未开始",this.lbShowTitle.text="上次归属",GameGlobal.AcrossBossController.tRankLast&&GameGlobal.AcrossBossController.tRankLast.firstinfo&&(e=GameGlobal.AcrossBossController.tRankLast.firstinfo.name,t=GameGlobal.AcrossBossController.tRankLast.firstinfo.serverid+"")),this.lbPlayerName.text=e?e+".S"+t:"",this.lbUnionName.text=""},t.prototype.setPower=function(e){if(e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+"万"}return e},t.prototype.upTime=function(){if(this.nStatus){var e=GameGlobal.AcrossBossController.getEndTime();this.lbTime.text=DateUtils.getFormatBySecond(e)}else this.oConfig.opentime&&this.oConfig.opentime.length&&(this.lbTime.text=this.oConfig.opentime[0]+"~"+this.oConfig.opentime[1])},t.prototype.setData=function(){this.nStatus=GameGlobal.AcrossBossController.status,this.nCountTime=GameGlobal.AcrossBossController.changetime},t.prototype.onClick=function(e){if(this.nStatus){var t=GlobalConfig.ins().KfBossBaseConfig.guildlv||0,i=GameGlobal.GangModel.getGangLv();i>=t?(GameGlobal.AcrossBossManage.enterMap(),ViewManager.ins().close(CrossMainPanel)):UserTips.FormatTip(GameGlobal.Config.KfBossBaseConfig.kfboss_tips01,t)}else UserTips.ins().showTips("未开始")},t.prototype.showTip=function(e){ViewManager.ins().open(ActivityDescPanel,28)},t.prototype.showAward=function(){ActivityRewardShowWin.Open(101)},t.NAME="跨服BOSS",t}(BaseView);__reflect(AcrossBossPanel.prototype,"AcrossBossPanel",["ICommonWindowTitle"]);var AcrossBossSceneView=function(e){function t(t){var i=e.call(this)||this;i.tCheckBox=[],i.m_Raid=t,i.skinName="AcrossBossFightSkin",i.list.itemRenderer=AcrossBossNowRankItem,i._AddClick(i.btnArrow,i._OnClick),i._AddClick(i.laRank,i._OnClick),i._AddClick(i.checkBox0,i._OnClick),i._AddClick(i.checkBox1,i._OnClick),i._AddClick(i.checkBox2,i._OnClick),i.barProtect.thumb.source="ui_kf_bm_lansetiao",i.barProtect.maximum=100,i.barProtect.labelFunction=function(e,t){return e+"%"},i.barBlood.maximum=100,i.barBlood.labelFunction=function(e,t){return e+"%"};for(var o=0;3>o;o++){var n=i["checkBox"+o];i.tCheckBox[o]=n}return i}return __extends(t,e),t.prototype.OnOpen=function(){var e=ViewManager.ins().getView(GameMapPanel);e&&e.SetReturnBtn(-239),this.checkBox0.selected=this.m_Raid.mSelList[0],this.checkBox2.selected=this.m_Raid.mSelList[2],this.checkBox3.selected=this.m_Raid.IsIsAutoReborn(),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdatePos),this.observe(MessageDef.KF_BOSS_RANK_NOW,this._UpdateRank),this.observe(MessageDef.KF_BOSS_UPDATE_HP,this._UpdateHp),this.observe(MessageDef.PLAYER_CHANGE_SYSTEM_SETTING,this._UpdatePlayerSetting),this._UpdatePlayerSetting(),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this._UpdatePos(),this._UpdateHp(),this._UpdateTime(),this.AddTimer(1e3,0,this._UpdateTime),this.OnChange(null)},t.prototype._UpdatePlayerSetting=function(){this.checkBox1.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER)},t.prototype.OnChange=function(e){for(var t=this.m_Raid,i=[],o=0;o<this.tCheckBox.length;o++)i.push(this.tCheckBox[o].selected);t.UpdateSel(e,i)},t.prototype._UpdatePos=function(){MiniChatPanel.UpdateViewPos(this.groupAll)},t.prototype.OnClose=function(){this.removeObserve(),TimerManager.ins().removeAll(this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnArrow:var t=this.list.visible=!this.list.visible;this.btnArrow.icon=t?"ui_zd_bt_zhankai":"ui_zd_bt_shousuo";break;case this.laRank:GameGlobal.AcrossBossController.mCurRank&&GameGlobal.AcrossBossController.mCurRank.playerranks&&GameGlobal.AcrossBossController.mCurRank.playerranks.length?ViewManager.ins().open(RankWin,RankDataType.TYPE_ACROSS_PERSON):UserTips.ins().showTips("赶紧冲榜吧");break;case this.checkBox0:this.OnChange(0);break;case this.checkBox1:SystemSettingPanel.ChangeShowOther(this.checkBox1.selected);break;case this.checkBox2:this.OnChange(2)}},t.prototype._UpdateTime=function(){var e=GameGlobal.AcrossBossController.status;if(e==AcrossBossState.KILL){this.titleLabel.text=t.LABEL.OUT_TIME;var i=GameServer.serverTime-GameGlobal.AcrossBossController.changetime,o=GameGlobal.Config.KfBossBaseConfig.leavetime-i;this.lbTime.text=DateUtils.format_1(Math.max(1e3*o,0))}else if(e==AcrossBossState.WAIT){this.titleLabel.text=t.LABEL.BOSS;var i=GameServer.serverTime-GameGlobal.AcrossBossController.changetime,o=GameGlobal.Config.KfBossBaseConfig.readytime-i;this.lbTime.text=DateUtils.format_1(Math.max(1e3*o,0))}else this.titleLabel.text=t.LABEL.OUT_TIME,this.lbTime.text=DateUtils.format_1(1e3*GameGlobal.AcrossBossController.getEndTime())},t.prototype._UpdateHp=function(){if(GameGlobal.AcrossBossController.status<AcrossBossState.BOSS)this.barProtect.value=100,this.barBlood.value=100;else if(GameGlobal.AcrossBossController.status==AcrossBossState.KILL)this.barBlood.value=0;else{var e=GameGlobal.AcrossBossController;this.barProtect.value=Math.ceil(e.shieldvalue/GameGlobal.Config.KfBossBaseConfig.shieldvalue*100),this.barBlood.value=e.hpperc}},t.prototype._UpdateRank=function(){var e=GameGlobal.AcrossBossController.mCurRank;return e?void(this.list.dataProvider=new eui.ArrayCollection(e.playerranks)):void(this.list.dataProvider=new eui.ArrayCollection([]))},t.LABEL={OUT_TIME:"场景关闭倒计时",BOSS:"BOSS降临倒计时"},t}(BaseView);__reflect(AcrossBossSceneView.prototype,"AcrossBossSceneView");var AcrossBossNowRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.lbName.text=e.name,this.lbRank.text=this.itemIndex+1+"",this.lbLv.text=GameString.GetSer(e.serverid),UIHelper.SetHead(this.head,e.job,e.sex,!1),this.lbHave.visible=0==this.itemIndex},t.prototype.childrenCreated=function(){},t}(eui.ItemRenderer);__reflect(AcrossBossNowRankItem.prototype,"AcrossBossNowRankItem");var AcrossRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(GBattleDamageRankPanel),TabView.CreateTabViewData(GBattleGangRankPanel)])},t.prototype.OnOpen=function(){this.mCommonWindowBg.OnAdded(this)},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(AcrossRankWin.prototype,"AcrossRankWin");var ResultAcrossBossPanel=function(e){function t(){var t=e.call(this)||this;return t.m_BtnStr="确定",t.m_EndTime=5,t.bFist=!0,t.skinName="ResultBossWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.AddClick(this.closeBtn,this.OnClick),this.listBoos.itemRenderer=ItemBase},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_EndTime=5,this.reWard=e[0],this.listBoos.dataProvider=new eui.ArrayCollection(this.reWard),this.AddTimer(1e3,6,this.updateCloseBtnLabel)},t.prototype.SetCloseFunc=function(e){this.closeFunc=e},t.prototype.SetBtnLabel=function(e){this.m_BtnStr=e},t.prototype.SetTitleLabel=function(e){this.titleLabel.text=e},t.prototype.OnClose=function(){TimerManager.ins().remove(this.updateCloseBtnLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},t.prototype.updateCloseBtnLabel=function(){this.m_EndTime--,this.m_EndTime<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.m_BtnStr+"("+this.m_EndTime+"s)"},t.prototype.OnClick=function(e){switch(e.target){case this.closeBtn:this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ResultAcrossBossPanel.prototype,"ResultAcrossBossPanel");var ActivityAdvance=function(){function e(e){this.m_component=null,this.m_component=e,this.show()}return e.prototype.show=function(){var e=GameGlobal.Config.ActivityPreviewConfig;for(var t in e)if(Deblocking.Check(e[t].openlv,!0)&&GameGlobal.Config[e[t].tablename]&&!this.m_component.getChildByName("advanceBtn"+t)){var i=GameGlobal.Config[e[t].tablename],o=i[e[t].acday],n=new Date(1e3*GameServer.serverTime),a=DateUtils.GetDay(n),r=e[t].actime,s=i[r][Object.keys(i[r])[1]],l=DateUtils.FormatTimeString(s);for(var c in o)if(o[c]==a&&n.getTime()<=l){var u=new ActivityAdvanceBtn(i);u.type=e[t].type,u.name="advanceBtn"+t,this.m_component.addChild(u);break}}},e}();__reflect(ActivityAdvance.prototype,"ActivityAdvance");var ActivityAdvanceBtn=function(e){function t(t){var i=e.call(this)||this;return i.type=-1,i.m_BaseConfig=null,i.m_bIsOpen=!1,i.m_bOpenTime=0,i.m_cTipsPanelDate=new TipsPanelDate,i.m_BaseConfig=t,i.skinName="AcitivityAdvanceBtnSkin",i}return __extends(t,e),t.prototype.createChildren=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this),this.m_activityConfig=GameGlobal.Config.ActivityPreviewConfig,this.iconDisplay.source=this.m_activityConfig[this.type].nameicon;var e=this.m_activityConfig[this.type].actime,t=this.m_BaseConfig[e][Object.keys(this.m_BaseConfig[e])[0]],i=t.split(":");this.m_bOpenTime=i[0],this.tipsLabel.text=this.m_bOpenTime+"点开启"},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),TimerManager.ins().doTimer(1e3,0,this.timer,this)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),TimerManager.ins().removeAll(this)},t.prototype.tap=function(){if(this.m_bIsOpen)switch(this.type){case 1:ViewManager.ins().open(GangBossPanel);break;case 2:GameGlobal.ActivityModel.sendActivityEnter(ActivityModel.TYPE_CROSS_BATTLE);break;case 3:ViewManager.ins().open(GBattleMainWin);break;case 4:GameGlobal.CloudNineModel.sendLeaveTime();break;case 5:ViewManager.ins().open(CrossMainPanel,1);break;case 6:ViewManager.ins().open(ArenaWin,1)}else this.showTipsPanel()},t.prototype.showTipsPanel=function(){this.m_cTipsPanelDate.iocn=this.m_activityConfig[this.type].nameicon,this.m_cTipsPanelDate.tips1Txt=this.m_bOpenTime+"点";var e="周";for(var t in this.m_BaseConfig[this.m_activityConfig[this.type].acday])e+=this.m_BaseConfig[this.m_activityConfig[this.type].acday][t]+"、";this.m_cTipsPanelDate.tips2Txt=e,this.m_cTipsPanelDate.detailsTxt=this.m_activityConfig[this.type].illustrate;var i=this.m_BaseConfig[this.m_activityConfig[this.type].showitem2];i&&(this.m_cTipsPanelDate.award=i);var o=this.m_BaseConfig[this.m_activityConfig[this.type].showitem1];o&&(this.m_cTipsPanelDate.auction=o),ViewManager.ins().open(ActivityAdvanceTispPanel,this.m_cTipsPanelDate)},t.prototype.timer=function(){var e=this.m_activityConfig[this.type].actime,t=this.m_BaseConfig[e][Object.keys(this.m_BaseConfig[e])[0]],i=DateUtils.FormatTimeString(t);i<=1e3*GameServer.serverTime&&(this.m_bIsOpen=!0,this.timeGroup.visible=!1,this.runImg.visible=!0);var o=this.m_BaseConfig[e][Object.keys(this.m_BaseConfig[e])[1]];i=DateUtils.FormatTimeString(o),i<=1e3*GameServer.serverTime&&(this.m_bIsOpen=!0,TimerManager.ins().remove(this.timer,this),DisplayUtils.removeFromParent(this))},t}(eui.Component);__reflect(ActivityAdvanceBtn.prototype,"ActivityAdvanceBtn");var TipsPanelDate=function(){function e(){}return e}();__reflect(TipsPanelDate.prototype,"TipsPanelDate");var ActivityAdvanceTispPanel=function(e){function t(){var t=e.call(this)||this;return t.m_pData=null,t.skinName="AcitivityAdvanceTips",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.auctionList.itemRenderer=ItemBase,this.awardList.itemRenderer=ItemBase},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.gainWayTxt,this.showTips),this._AddClick(this.btn,this.CloseSelf),this._AddClick(this.bg,this.CloseSelf),UIHelper.SetLinkStyleLabel(this.gainWayTxt),e[0]&&(this.m_pData=e[0],this.updateCentent())},t.prototype.showTips=function(){ActivityDescPanel.Show("     拍卖奖励由前五名帮会获得，排名越前奖励越好，奖励不会发放给个人，而是以帮会为单位进入拍卖行，售出后，收益平均给参与队员\n（0点通过邮寄发送奖励）","说明")},t.prototype.updateCentent=function(){this.iocn.source=this.m_pData.iocn,this.tips1Txt.text=this.m_pData.tips1Txt,this.tips2Txt.text=this.m_pData.tips2Txt,this.detailsTxt.text=this.m_pData.detailsTxt,this.auctionGroup.visible=!1,this.m_pData.auction&&(this.auctionList.dataProvider=new eui.ArrayCollection(this.m_pData.auction),this.auctionGroup.visible=!0,this.awardGroup.y=707,this.btn.y=864,this.iconBg.source="ui_yg_bm_kfboss"),this.m_pData.award&&(this.awardList.dataProvider=new eui.ArrayCollection(this.m_pData.award))
},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ActivityAdvanceTispPanel.prototype,"ActivityAdvanceTispPanel");var ActivityDataFactory=function(){function e(){}return e.create=function(e){var t,i=e.baseData.id,o=e.baseData.openState,n=e.baseData.startTime,a=e.baseData.endTime,r=e.baseData.type;switch(r){case 1:t=new ActivityType1Data;break;case 2:t=new ActivityType2Data;break;case 3:t=new ActivityType3Data;break;case 4:t=new ActivityType4Data;break;case 5:t=new ActivityType5Data;break;case 6:t=new ActivityType6Data;break;case 7:t=new ActivityType7Data;break;case 8:t=new ActivityType8Data;break;case 9:t=new ActivityType9Data;break;case 10:t=new ActivityType10Data;break;case 11:t=new ActivityType11Data;break;case 12:t=new ActivityType12Data;break;case 13:t=new ActivityType13Data;break;case 14:t=new ActivityType14Data;break;case 15:t=new ActivityType15Data;break;case 16:t=new ActivityType16Data;break;case 17:t=new ActivityType17Data;break;case 18:t=new ActivityType18Data;break;case 19:t=new ActivityType19Data;break;case 20:t=new ActivityType20Data;break;case 21:t=new ActivityType21Data;break;case 22:t=new ActivityType22Data;break;case 23:t=new ActivityType23Data;break;case 24:t=new ActivityType24Data;break;case 25:t=new ActivityType25Data;break;case 26:t=new ActivityType26Data;break;case 27:t=new ActivityType27Data;break;case 28:t=new ActivityType28Data;break;default:return null}if(t){t.id=i,t.startTime=n,t.endTime=a,t.type=r,t.openState=o,t.init(),t.update(e);t.isOpenActivity()&&1==t.openState}return t},e.GetPanel=function(e){this.PANEL_LIST||(this.PANEL_LIST=(i={},i[ActivityKaiFuFuncType.ACT_21_OutdrawDiscountShop]=KaiFuTargetTeamBuyPanel,i[ActivityKaiFuFuncType.ACT_1_Upgrade]=KaiFuTargetUpLevelPanel,i[ActivityKaiFuFuncType.ACT_20_RechargeGroupon]=KaiFuTargetPowerPanel,i[ActivityKaiFuFuncType.ACT_3_RechargeContinue]=KaiFuTargetReChargePanel,i[ActivityKaiFuFuncType.ACT_26_DisCountShop]=KaiFuTargetShopPanel,i[ActivityKaiFuFuncType.ACT_22_OrangePetTarget]=KaiFuTargetFightPanel,i[ActivityKaiFuFuncType.ACT_17_ArenaTarget]=KaiFuTargetFuncTargetPanel,i[ActivityKaiFuFuncType.ACT_99990_JiJie]=KaiFuJiJiePanel,i[ActivityKaiFuFuncType.ACT_99991_JiJieRank]=KaiFuJiJieRankPanel,i[ActivityKaiFuFuncType.ACT_99992_JiJieShop]=KaiFuJiJieShopPanel,i[ActivityKaiFuFuncType.ACT_99993_LeiJiReCharge]=KaiFuLeiJiReChargePanel,i));var t=this.PANEL_LIST[e];return t||console.warn("not imple act id => ",e),t;var i},e}();__reflect(ActivityDataFactory.prototype,"ActivityDataFactory");var ActivityDescPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.Show=function(e,i){var o=ViewManager.ins().open(t);o.SetDesc(e,i)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.Config.HelpInfoConfig[e[0]];i&&this.SetDesc(i.text,e[1]||i.title)},t.prototype.SetDesc=function(e,t){this.tdesc.multiline=this.tdesc.wordWrap=!0,this.tdesc.textFlow=TextFlowMaker.generateTextFlow(e),t&&(this.title.text=t)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ActivityDescPanel.prototype,"ActivityDescPanel");var ActivityEndAwardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="AcivityEndAwardSkin",t.awardList.itemRenderer=ItemBase,t.auctionList.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.notClickMask=!0,e[0]&&(this.m_pData=e[0],this.commonDialog.title=this.m_pData.paneltitle,this.updateCentent()),this._AddClick(this.closeBtn,this.tap)},t.prototype.tap=function(){this.CloseSelf()},t.prototype.updateCentent=function(){if(this.rankTxt.text=this.m_pData.rankTxt,this.cloudNineGroup.visible=!1,this.m_pData.shows){this.cloudNineNameTxt.text=this.m_pData.shows.name+("  S."+this.m_pData.shows.serverid);var e=new RoleShowData;e.sex=this.m_pData.shows.sex,e.job=this.m_pData.shows.job,e.shows=this.m_pData.shows.shows,this.roleShowPanel.SetAll(e),this.cloudNineGroup.visible=!0}if(this.icon1.visible=!1,this.m_pData.icon1){var t=this.icon1;t.icon.source=this.m_pData.icon1.iconSrc,t.iconbg.source=this.m_pData.icon1.iconBgSrc,t.titleNameTxt.text=this.m_pData.icon1.titleName,t.nameTxt.text=this.m_pData.icon1.name,this.m_pData.icon1.banghuiTxt&&(t.banghuiTxt.text=this.m_pData.icon1.banghuiTxt),this.icon1.visible=!0,this.m_pData.icon2&&(this.icon1.x=113)}if(this.icon2.visible=!1,this.m_pData.icon2){var i=this.icon2;i.icon.source=this.m_pData.icon2.iconSrc,i.iconbg.source=this.m_pData.icon2.iconBgSrc,i.titleNameTxt.text=this.m_pData.icon2.titleName,i.nameTxt.text=this.m_pData.icon2.name,this.icon2.visible=!0}this.auctionGroup.visible=!1,this.m_pData.auction?(this.auctionList.dataProvider=new eui.ArrayCollection(this.m_pData.auction),this.auctionGroup.visible=!0):(this.awardGroup.y=670,this.whiteBglength.visible=!1,this.rankBg.visible=""!=this.rankTxt.text),this.awardGroup.visible=!1,this.m_pData.award&&(this.awardGroup.visible=!0,this.awardList.dataProvider=new eui.ArrayCollection(this.m_pData.award))},t.prototype.OnClose=function(){GameGlobal.CommonRaidModel.MapLeave()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ActivityEndAwardPanel.prototype,"ActivityEndAwardPanel");var activityEndAwardData=function(){function e(){}return e}();__reflect(activityEndAwardData.prototype,"activityEndAwardData");var ActivityKaiFuModel=function(e){function t(){var t=e.call(this)||this;return t.m_type_activityId={},t.m_activityData={},t.m_ReachData={},t.m_rankInfoList={},t.advancedRank=[],t.advancedRankMySelfe=0,t.advancedSelfPower=0,t.answerFisrstNe="",t.advancedInfo=new ActivityAdvancedInfo,t.regNetMsg(S2cProtocol.sc_activity_info_res,t._DoActivity_init_answer),t.regNetMsg(S2cProtocol.sc_activity_init_info,t._DoActivity_init_info),t.regNetMsg(S2cProtocol.sc_activity_reward_result,t._DoRewardResult),t.regNetMsg(S2cProtocol.sc_activity_dabiao_info,t._DoDaBiaoInfo),t.regNetMsg(S2cProtocol.sc_activity_dabiao_reward,t._DoDaBiaoRewardStatu),t.regNetMsg(S2cProtocol.sc_activity_update_info,t._DoActivityUpdate),t.regNetMsg(S2cProtocol.sc_activity_race_history,t._DoRaceHistory),t.regNetMsg(S2cProtocol.sc_advanced_info,t._DoAdvanced_info),t.regNetMsg(S2cProtocol.sc_advanced_update,t._DoAdvanced_update),t.regNetMsg(S2cProtocol.sc_advanced_rank,t._DoAdvanced_Rank),t.regNetMsg(S2cProtocol.sc_activity_luckwheel_ret,t.luckwheel_ret),GameGlobal.MessageCenter.addListener(MessageDef.GAME_SERVER_UPDATE_DAY,t.updateAdvancedData,t),GameGlobal.MessageCenter.addListener(MessageDef.LEVEL_CHANGE,t.updateAdvancedData,t),t}return __extends(t,e),t.prototype.updateAdvancedData=function(){this.advancedRank=[],GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW)},t.prototype.init=function(){for(var e in GameGlobal.Config.ActivitySumBtnConfig)if(GameGlobal.Config.ActivitySumBtnConfig.hasOwnProperty(e)){var i=GameGlobal.Config.ActivitySumBtnConfig[e];i&&(2==i.openId?t.Ids_ActivityTarget.push(i.id):3==i.openId&&t.Ids_ActivityQiTian.push(i.id))}},t.prototype.GetMyAdvancedLevel=function(e){var t=0;switch(e){case ActivityKaiFuJiJieType.ride:t=GameGlobal.UserRide.mLevel;break;case ActivityKaiFuJiJieType.wing:t=GameGlobal.UserWing.mLevel;break;case ActivityKaiFuJiJieType.fairy:t=GameGlobal.TianxModel.mLevel;break;case ActivityKaiFuJiJieType.weapon:t=GameGlobal.SwordModel.mLevel;break;case ActivityKaiFuJiJieType.pet_psychic:t=GameGlobal.PetShouhModel.mLevel;break;case ActivityKaiFuJiJieType.pet_soul:t=GameGlobal.PetTonglModel.mLevel;break;case ActivityKaiFuJiJieType.xianlv_circle:t=GameGlobal.XianlvXwModel.mLevel;break;case ActivityKaiFuJiJieType.xianlv_position:t=GameGlobal.XianlvFzModel.mLevel;break;case ActivityKaiFuJiJieType.tiannv:t=GameGlobal.HavingModel.mLevel;break;case ActivityKaiFuJiJieType.tiannv_nimbus:t=GameGlobal.HavingLingqModel.mLevel;break;case ActivityKaiFuJiJieType.tiannv_flower:t=GameGlobal.HavingHuanModel.mLevel;break;case ActivityKaiFuJiJieType.lingtong:t=GameGlobal.LingtongModel.mLevel;break;case 100:t=GameGlobal.actorModel.vipLv}return t},t.prototype.OpenAdvancedPanel=function(e){switch(e){case ActivityKaiFuJiJieType.ride:Deblocking.Check(DeblockingType.TYPE_9)&&ViewManager.ins().open(RoleWin,2);break;case ActivityKaiFuJiJieType.wing:Deblocking.Check(DeblockingType.TYPE_10)&&ViewManager.ins().open(RoleWin,3);break;case ActivityKaiFuJiJieType.fairy:Deblocking.Check(DeblockingType.TYPE_27)&&ViewManager.ins().open(TianxianMainPanel,0);break;case ActivityKaiFuJiJieType.weapon:Deblocking.Check(DeblockingType.TYPE_28)&&ViewManager.ins().open(TianxianMainPanel,1);break;case ActivityKaiFuJiJieType.pet_psychic:Deblocking.Check(DeblockingType.TYPE_14)&&ViewManager.ins().open(PetMainPanel,3);break;case ActivityKaiFuJiJieType.pet_soul:Deblocking.Check(DeblockingType.TYPE_13)&&ViewManager.ins().open(PetMainPanel,2);break;case ActivityKaiFuJiJieType.xianlv_circle:Deblocking.Check(DeblockingType.TYPE_18)&&ViewManager.ins().open(XianlvMainPanel,3);break;case ActivityKaiFuJiJieType.xianlv_position:Deblocking.Check(DeblockingType.TYPE_17)&&ViewManager.ins().open(XianlvMainPanel,2);break;case ActivityKaiFuJiJieType.tiannv:Deblocking.Check(DeblockingType.TYPE_19)&&ViewManager.ins().open(HavingMainPanel,0);break;case ActivityKaiFuJiJieType.tiannv_nimbus:Deblocking.Check(DeblockingType.TYPE_22)&&ViewManager.ins().open(HavingMainPanel,3);break;case ActivityKaiFuJiJieType.tiannv_flower:Deblocking.Check(DeblockingType.TYPE_21)&&ViewManager.ins().open(HavingMainPanel,2);break;case ActivityKaiFuJiJieType.lingtong:ViewManager.ins().open(LingtongMainPanel)}return 0},t.prototype.GetActivityDataById=function(e){return e?this.m_activityData[e]:null},t.prototype.GetActivityDataByType=function(e){for(var t in this.m_activityData){var i=this.m_activityData[t];if(e==i.type)return i}return null},t.prototype.getisCangetDabiao=function(e){for(var t=1;t<=this.GetMyReachIndex(e);++t)if(!BitUtil.Has(this.GetMyReachDraw(e),t))return!0;return this.checkRedPointTemp(e)},t.prototype.GetMyReachIndex=function(e){return null==this.m_ReachData[e]?0:this.m_ReachData[e].index},t.prototype.GetMyReachDraw=function(e){return null==this.m_ReachData[e]?0:this.m_ReachData[e].draw},t.prototype.checkRedPointTemp=function(e){var t=this.GetActivityDataById(e);return t&&t.isOpenActivity()?!1:!1},t.prototype.Send_advanced_charger_reward=function(e){var t=new Sproto.cs_advanced_charger_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_advanced_charger_reward,t)},t.prototype.Send_advanced_lv_reward=function(e,t){var i=new Sproto.cs_advanced_lv_reward_request;i.typ=e,i.id=t,this.Rpc(C2sProtocol.cs_advanced_lv_reward,i)},t.prototype.Send_advanced_rank=function(){this.Rpc(C2sProtocol.cs_advanced_rank)},t.prototype.Send_advanced_buy=function(e,t,i){var o=new Sproto.cs_advanced_buy_request;o.id=e,o.num=t,o.typ=i,this.Rpc(C2sProtocol.cs_advanced_buy,o)},t.prototype.SendLevelInfo=function(e){var t=new Sproto.cs_activity_send_level_info_request;t.activityID=e,this.Rpc(C2sProtocol.cs_activity_send_level_info,t)},t.prototype.SendRaceHistory=function(){this.Rpc(C2sProtocol.cs_activity_race_history)},t.prototype.sendReward=function(e,t){var i=new Sproto.cs_activity_send_reward_request;i.id=e,i.index=t,this.Rpc(C2sProtocol.cs_activity_send_reward,i)},t.prototype.sendDabiaoInfo=function(e){var t=new Sproto.cs_activity_send_dabiao_info_request;t.activityID=e,this.Rpc(C2sProtocol.cs_activity_send_dabiao_info,t)},t.prototype.sendPetFightInfo=function(e){var t=new Sproto.cs_activity_action_request;t.activityId=e,this.Rpc(C2sProtocol.cs_activity_action,t)},t.prototype.sendInvestment=function(e){var t=new Sproto.cs_activity_open_request;t.id=e,this.Rpc(C2sProtocol.cs_activity_open,t)},t.prototype._DoActivity_init_info=function(e){for(var i=GameGlobal.Config.ActivityConfig,o=0,n=e.datas;o<n.length;o++){var a=n[o];if(a.basecfg){if(i[a.basecfg.Id]=a.basecfg,a.btncfg)try{GameGlobal.Config.ActivitySumBtnConfig[a.basecfg.Id]=JSON.parse(a.btncfg)||{}}catch(r){console.error(a.btncfg),console.error(r)}if(a.basecfg.activityType)try{GameGlobal.Config["ActivityType"+a.basecfg.activityType+"Config"][a.basecfg.Id]=JSON.parse(a.config)||{}}catch(r){console.error(a.basecfg),console.error(r)}else console.error("not activityType => ",a.basecfg)}var s=t.GetActivityData(a);if(s){var l=s.baseData.id;if(this.m_activityData[l])this.m_activityData[l].UpdateBase(s.baseData),this.m_activityData[l].update(s),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_UPDATE,l);else{var c=ActivityDataFactory.create(s);c&&(this.m_activityData[c.id]=c)}}}MessageCenter.ins().dispatch(MessageDef.ACTIVITY_INFO)},t.prototype._DoActivity_init_answer=function(e){this.answerFisrstNe=e.answer},t.prototype._DoRewardResult=function(e){var i=e.id;if(this.m_activityData[i]){var o=t.GetActivityData(e.data);this.m_activityData[i].UpdateBase(o.baseData),this.m_activityData[i].update(o),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_UPDATE,i)}},t.prototype._DoDaBiaoInfo=function(e){for(var t=this.m_rankInfoList[e.acId]=[],i=0;e.rankInfo.length>i;i++){var o=new DabiaoRankData;t.push(o),o.prase(e.rankInfo[i],null)}this.m_ReachData[e.acId]=e,e.rankInfo=null,GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_DABIAO_UPDATE)},t.prototype._DoDaBiaoRewardStatu=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_IS_GET_AWARDS)},t.prototype._DoActivityUpdate=function(e){var i=e.index;if(this.m_activityData[i]){var o=t.GetActivityData(e.data);this.m_activityData[i].UpdateBase(o.baseData),this.m_activityData[i].update(o),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_UPDATE,i)}},t.prototype._DoRaceHistory=function(e){this.m_RaceHistory=e,GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_RACE_HISTORY)},t.prototype._DoAdvanced_info=function(e){this.advancedInfo.prase(e),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW)},t.prototype._DoAdvanced_update=function(e){e.shop&&this.advancedInfo.updateShop(e.shop),e.advancedReward&&this.advancedInfo.updateAdvancedReward(e.advancedReward),e.chargerReward&&(this.advancedInfo.chargerReward=e.chargerReward),e.dayCharger&&(this.advancedInfo.dayChargeValue=e.dayCharger),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW)},t.prototype._DoAdvanced_Rank=function(e){this.advancedRank=e.datas||[],this.advancedRankMySelfe=e.selfRank,this.advancedSelfPower=e.selfPower,GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_RANK)},t.GetActivityData=function(e){for(var t in e)if(0==t.indexOf("type"))return e[t];return null},t.pushJiJieBtn=function(e){this.jjkh_btns.push(e)},t.setJiJieOpenViewData=function(e){},t.ShowJiJieKuangHuanIcon=function(e,t){if(Deblocking.Check(DeblockingType.TYPE_109,!0)){var i=GameGlobal.ActivityKaiFuModel.GetAdvancedTypeArr();if(e&&e.jjkh_img){var o=void 0,n=!1,a=void 0,r=t.length;for(a=0;r>a;a++)if(o=t[a],-1!=i.indexOf(o)){n=!0;break}e.jjkh_img.visible=n}}},t.prototype.GetAdvancedTypeArr=function(){var e=[],t=GameServer.serverOpenDay,i=GameGlobal.Config.ProgressCrazyBaseConfig;if(t<=i.initialorder.length)e.push(i.initialorder[t-1]);else{var o=(t-i.initialorder.length-1)%i.progressorder.length;e=i.progressorder[o]}return e},t.prototype.GetAdvancedReChargeType=function(){var e=GameServer.serverOpenDay,t=GameGlobal.Config.ProgressCrazyBaseConfig;if(e<=t.initialorder.length)return t.initialorder[e-1];var i=(e-t.initialorder.length-1)%t.progressorder.length;return t.rechargeorder[i]},t.prototype.RedPointAdvanced=function(){if(!Deblocking.Check(DeblockingType.TYPE_109,!0))return!1;var e,t=this.GetAdvancedTypeArr(),i=t.length;for(e=0;i>e;e++)if(1==this.RedPointAdvancedUpLevelByType(t[e]))return!0;return 1==this.RedPointAdvancedReCharge()?!0:!1},t.prototype.RedPointAdvancedUpLevelByType=function(e){var t=GameGlobal.Config.ProgressCrazyRewardConfig,i=t[e];for(var o in i)if(i.hasOwnProperty(o)){var n=i[o],a=GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(e)>=n.value;if(a){var r=GameGlobal.ActivityKaiFuModel.advancedInfo.GetAdvancedReward(e,n.index);if(!r)return!0}}return!1},t.prototype.RedPointAdvancedReCharge=function(){var e=this.GetAdvancedReChargeType(),t=GameGlobal.Config.ProgressCrazyRechargeConfig,i=t[e];for(var o in i)if(i.hasOwnProperty(o)){var n=i[o],a=GameGlobal.ActivityKaiFuModel.advancedInfo.dayChargeValue>=n.money;if(a){var r=GameGlobal.ActivityKaiFuModel.advancedInfo.GetChargeReward(n.id);if(!r)return!0}}return!1},t.prototype.RedPointAdvanceShop=function(){var e=this.GetAdvancedReChargeType(),t=GameGlobal.Config.ProgressCrazyShopConfig,i=t[e];for(var o in i){var n=i[o];if(!(3==n.type.type&&this.advancedInfo.getBuyNum(n.shopid)>=n.type.value||GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(n.value.type)<n.value.value)){var a=n.gold.id;if((a==MoneyConst.byb||a==MoneyConst.gold)&&Checker.Money(a,n.gold.count,!1))return!0}}return!1},t.prototype.RedPointTarget=function(){if(!(Deblocking.Check(DeblockingType.TYPE_97,!0)||Deblocking.Check(DeblockingType.TYPE_98,!0)||Deblocking.Check(DeblockingType.TYPE_99,!0)||Deblocking.Check(DeblockingType.TYPE_100,!0)||Deblocking.Check(DeblockingType.TYPE_101,!0)||Deblocking.Check(DeblockingType.TYPE_102,!0)))return!1;var e,i=t.Ids_ActivityTarget,o=i.length;for(e=0;o>e;e++){var n=this.GetActivityDataById(i[e]);if(n&&n.isOpenActivity()&&n.hasReward())return!0}return!1},t.prototype.RedPointQiTian=function(){return!1},t.prototype.hasActivityQiTian=function(){return!1},t.prototype.hasActivityTarget=function(){if(!(Deblocking.Check(DeblockingType.TYPE_97,!0)||Deblocking.Check(DeblockingType.TYPE_98,!0)||Deblocking.Check(DeblockingType.TYPE_99,!0)||Deblocking.Check(DeblockingType.TYPE_100,!0)||Deblocking.Check(DeblockingType.TYPE_101,!0)||Deblocking.Check(DeblockingType.TYPE_102,!0)))return!1;var e,i=t.Ids_ActivityTarget,o=i.length;for(e=0;o>e;e++){var n=this.GetActivityDataById(i[e]);if(n&&n.isOpenActivity())return!0}return!1},t.prototype.jingCai_huoDong=function(){var e=(GameServer.serverOpenDay,GameGlobal.Config.ActivityConfig),t=GameGlobal.Config.ActivitySumBtnConfig,i=[],o=[];for(var n in t)4==t[Number(n)].openId&&i.push(Number(n));for(var a=0;a<i.length;a++){var r=i[a],s=void 0;6==e[r].activityType&&(s=ZhuangPanShopPanel),26==e[r].activityType&&(s=zheKouBasePanel);var l=GameGlobal.ActivityKaiFuModel.GetActivityDataById(r);l&&l.openState&&o.push(r)}return o},t.prototype.jingCaiIconRedPoin=function(){for(var e=this.jingCai_huoDong(),t=GameGlobal.Config.ActivityConfig,i=0;i<e.length;i++)if(this.jingCaiRedPoint(t[e[i]].activityType,e[i],i)[1])return!0;return!1},t.prototype.luckwheel_ret=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_ADVANCED_ZHUANG_PAN_RULE,e)},t.prototype.jingCaiRedPoint=function(e,t,i){if(6==e){var o=this.GetActivityDataById(t);if(!o)return[i,!1];if(o.drawtime>0)return[i,!0]}return[i,!1]},t.Ids_ActivityTarget=[],t.Ids_ActivityQiTian=[],t.jjkh_btns=[],t}(BaseSystem);__reflect(ActivityKaiFuModel.prototype,"ActivityKaiFuModel");var ActivityModel=function(e){function t(){var t=e.call(this)||this;return t.activityList={},t.regNetMsg(S2cProtocol.sc_activity_hall,t.getActivityList),t.regNetMsg(S2cProtocol.sc_activity_msg,t.updateActivity),t}return __extends(t,e),t.prototype.sendActivityEnter=function(e){var t=new Sproto.cs_activity_enter_request;t.activity=e,this.Rpc(C2sProtocol.cs_activity_enter,t)},t.prototype.sendActivityList=function(){this.Rpc(C2sProtocol.cs_activity_hall)},t.prototype.sendActivityInfoReq=function(){this.Rpc(C2sProtocol.cs_activity_info_req)},t.prototype.getActivityList=function(e){this.activityList={};var i,o=0,n=e.activitys.length;for(o;n>o;o++)i=e.activitys[o],this.activityList[i.activity]=i.isopen;MessageCenter.ins().dispatch(MessageDef.ACTIVITY_LIST_INFO),this.activityList[t.TYPE_GANG_BATTLE]?PlayFunView.GameNotice(t.TYPE_GANG_BATTLE,600,MainGameNoticeView.SHOW_TYPE_GOTO):PlayFunView.RemoveGameNotice(t.TYPE_GANG_BATTLE)},t.prototype.updateActivity=function(e){this.activityList[e.activity]&&(this.activityList[e.activity]=!0,e.activity==t.TYPE_CROSS_BATTLE&&PlayFunView.GameNotice(t.TYPE_CROSS_BATTLE,300,2),MessageCenter.ins().dispatch(MessageDef.ACTIVITY_OPEN_UPDATE))},t.prototype.GetActivityOpenFlag=function(e){return this.activityList[e]},t.TYPE_ANSWER=1,t.TYPE_QUJING=2,t.TYPE_GANG_BOSS=3,t.TYPE_GANGMINE=4,t.TYPE_CROSS_BATTLE=5,t.TYPE_GANG_BATTLE=6,t.TYPE_WULIN_ZHENGBA=8,t.TYPE_CLOUD_NINE=7,t.ICONSOURCE_MAP=(_a={},_a[t.TYPE_ANSWER]="ui_dt_bt_keju",_a[t.TYPE_QUJING]="ui_qj_bm_husongshangdian",_a[t.TYPE_GANG_BOSS]="ui_hddt_bt_pmjl",_a[t.TYPE_GANGMINE]="",_a[t.TYPE_CROSS_BATTLE]="ui_hddt_bt_pmjl",_a[t.TYPE_GANG_BATTLE]="ui_hddt_bt_pmjl",_a[t.TYPE_WULIN_ZHENGBA]="",_a[t.TYPE_CLOUD_NINE]="ui_hddt_bt_paihang",_a),t}(BaseSystem);__reflect(ActivityModel.prototype,"ActivityModel");var _a,ActivityRewardShowConst=function(){function e(){}return e._GetAwardList=function(e){var t=GameGlobal.Config.ActivityPreviewConfig[e];if(!t||!t.tablename||!t.showrewards_1)return[];var i=[],o=GameGlobal.Config[t.tablename];for(var n in t.showrewards_1){var a=parseInt(n),r=t.showrewards_1[n],s={name:t.des_1[a],showitem:o[r]};i.push(s)}return i},e._GetRankAwardList=function(e){var t=GameGlobal.Config.ActivityPreviewConfig[e];if(!t||!t.rankname)return[];var i=[],o=GameGlobal.Config[t.rankname]||[];for(var n in o)i.push(o[n]);return i},e._GetDragonRankAwardList=function(e){var t=GameGlobal.Config.ActivityPreviewConfig[e];if(!t||!t.rankname_2)return[];var i=[],o=GameGlobal.Config[t.rankname_2]||[];for(var n in o)i.push(o[n]);return i},e.GetAwardListByActivityType=function(e){var t=this.ACTIVITY_TYPE_EXCHANGETO_MAP[e];return null==t?[]:this._GetAwardList(t)},e.GetRankAwardListByActivityType=function(e){var t=this.ACTIVITY_TYPE_EXCHANGETO_MAP[e];return null==t?[]:this._GetRankAwardList(t)},e.GetDragonRankAwardListByActivityType=function(e){var t=this.ACTIVITY_TYPE_EXCHANGETO_MAP[e];return null==t?[]:this._GetDragonRankAwardList(t)},e.GetImageSourceByActivityType=function(e){var t=this.ACTIVITY_TYPE_EXCHANGETO_MAP[e];if(null==t)return"";var i=GameGlobal.Config.ActivityPreviewConfig[t];return i&&i.icon?i.icon:""},e.ACTIVITY_TYPE_EXCHANGETO_MAP=(_a={},_a[3]=1,_a[5]=2,_a[6]=3,_a[101]=5,_a),e}();__reflect(ActivityRewardShowConst.prototype,"ActivityRewardShowConst");var _a,ActivityWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityWinSkin",t.commonWindowBg.SetTitle("活动大厅"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ActivityItem;for(var e=CommonUtils.GetArray(GameGlobal.Config.ActivityListConfig,"orderpos"),t=e.length-1;t>=0;--t)GameGlobal.actorModel.level<e[t].showlv&&e.splice(t,1);this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GANGBATTLE_OPEN_GATEVIEW,this.CloseSelf),this.observe(MessageDef.ACTIVITY_LIST_INFO,this.UpdateList),GameGlobal.ActivityModel.sendActivityList(),GameGlobal.ActivityModel.sendActivityInfoReq()},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_121)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ActivityWin.prototype,"ActivityWin",["ICommonWindow"]);var ActivityItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.tipTxt.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>说明</u></a>'),this.goTxt.textFlow=(new egret.HtmlTextParser).parser("<a href='event:go'><u>马上前往</u></a>"),this.tipTxt.addEventListener(egret.TextEvent.LINK,this.showTip,this),this.goTxt.addEventListener(egret.TextEvent.LINK,this.gotoHandler,this),this.ranKBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankHandler,this),this.list.itemRenderer=ItemBaseNotName,this.list.dataProvider=null},t.prototype.showTip=function(e){ViewManager.ins().open(ActivityDescPanel,this.descID)},t.prototype.gotoHandler=function(e){if(Deblocking.Check(this.openID)){var t=GameGlobal.ActivityModel.activityList[this.type];if(!t&&this.type!=ActivityModel.TYPE_GANG_BATTLE&&this.type!=ActivityModel.TYPE_GANG_BOSS)return void GameGlobal.UserTips.showTips("活动未开启");switch(this.type){case ActivityModel.TYPE_ANSWER:GameGlobal.AnswerController.bOpenAnswer()?ViewManager.ins().open(AnswerLayer):GameGlobal.UserTips.showTips("活动未开启"),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL);break;case ActivityModel.TYPE_QUJING:ViewManager.ins().open(QujingMainWin);break;case ActivityModel.TYPE_GANG_BOSS:if(!GameGlobal.actorModel.HasGuild())return void GameGlobal.UserTips.showTips("请先加入帮派");ViewManager.ins().open(GangBossPanel);break;case ActivityModel.TYPE_GANGMINE:if(!GameGlobal.actorModel.HasGuild())return void GameGlobal.UserTips.showTips("请先加入帮派");ViewManager.ins().open(GangMinePanel);break;case ActivityModel.TYPE_CROSS_BATTLE:GameGlobal.ActivityModel.sendActivityEnter(this.type);break;case ActivityModel.TYPE_GANG_BATTLE:if(!Deblocking.Check(DeblockingType.TYPE_56))return;if(!GameGlobal.actorModel.HasGuild())return void GameGlobal.UserTips.showTips("请先加入帮派");GameGlobal.GangBattleModel.SendEnterBattle();break;case ActivityModel.TYPE_WULIN_ZHENGBA:break;case ActivityModel.TYPE_CLOUD_NINE:GameGlobal.CloudNineModel.sendLeaveTime()}}},t.prototype.rankHandler=function(e){switch(this.type){case ActivityModel.TYPE_ANSWER:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_DATI]);break;case ActivityModel.TYPE_QUJING:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_QUJING]);break;case ActivityModel.TYPE_GANGMINE:ViewManager.ins().open(GangMineCrossRankPanel);break;case ActivityModel.TYPE_CLOUD_NINE:ViewManager.ins().open(CloudNineRankPanel,CloudNineRankType.legendOfEmpire);break;case ActivityModel.TYPE_GANG_BOSS:case ActivityModel.TYPE_GANG_BATTLE:case ActivityModel.TYPE_CROSS_BATTLE:ActivityRewardShowWin.Open(this.type);break;case ActivityModel.TYPE_WULIN_ZHENGBA:}},t.prototype.dataChanged=function(){var e=this.data;this.descID=e.illustrate,this.type=e.type,this.openID=e.openlv,this.descGroup.visible=e.illustrate>0,this.typeImg.source=e.icon,this.titleImg.source=e.nameicon,this.list.dataProvider=new eui.ArrayCollection(e.rewardshow);var t=ActivityModel.ICONSOURCE_MAP[e.type];this.ranKBtn.icon=t;var i=this._GetDesc(e),o=i[0],n=i[1];this.timeDesc1.textFlow=TextFlowMaker.generateTextFlow(o),this.timeDesc0.text=n},t.prototype._GetDesc=function(e){var t=e.acday,i=e.actime;switch(e.type){case ActivityModel.TYPE_ANSWER:t="|C:0xe6f1f4&T:"+e.acday+":|C:0x019704&T:"+(GameGlobal.ActivityKaiFuModel.answerFisrstNe||"")+"|";break;case ActivityModel.TYPE_QUJING:var o=GameGlobal.QujingModel.baseInfo,n=GameGlobal.Config.EscortBaseConfig.escortnum;t="|C:0xe6f1f4&T:"+e.acday+" |C:0x019704&T:"+(n-o.mEscortCount)+"/"+n+"|",i=GameGlobal.QujingModel.GetDoubleTimeDesc();break;case ActivityModel.TYPE_GANG_BOSS:break;case ActivityModel.TYPE_GANGMINE:break;case ActivityModel.TYPE_CROSS_BATTLE:break;case ActivityModel.TYPE_GANG_BATTLE:break;case ActivityModel.TYPE_WULIN_ZHENGBA:break;case ActivityModel.TYPE_CLOUD_NINE:}return[t,i]},t}(eui.ItemRenderer);__reflect(ActivityItem.prototype,"ActivityItem");var ActivityConst=function(){function e(){}return e.JiJieTypeName=function(e){switch(e){case ActivityKaiFuJiJieType.ride:return"坐骑";case ActivityKaiFuJiJieType.wing:return"翅膀";case ActivityKaiFuJiJieType.fairy:return"守护";case ActivityKaiFuJiJieType.weapon:return"神兵";case ActivityKaiFuJiJieType.pet_psychic:return"宠物兽魂";case ActivityKaiFuJiJieType.pet_soul:return"宠物通灵";case ActivityKaiFuJiJieType.xianlv_circle:return"仙侣仙位";case ActivityKaiFuJiJieType.xianlv_position:return"仙侣法阵";case ActivityKaiFuJiJieType.tiannv:return"玄女";case ActivityKaiFuJiJieType.tiannv_nimbus:return"玄女灵气";case ActivityKaiFuJiJieType.tiannv_flower:return"玄女花辇";case ActivityKaiFuJiJieType.lingtong:return"灵童";case 100:return"VIP"}},e.JiJieTypeName2=function(e){switch(e){case ActivityKaiFuJiJieType.ride:return"坐骑";case ActivityKaiFuJiJieType.wing:return"翅膀";case ActivityKaiFuJiJieType.fairy:return"守护";case ActivityKaiFuJiJieType.weapon:return"神兵";case ActivityKaiFuJiJieType.pet_psychic:return"兽魂";case ActivityKaiFuJiJieType.pet_soul:return"通灵";case ActivityKaiFuJiJieType.xianlv_circle:return"仙位";case ActivityKaiFuJiJieType.xianlv_position:return"法阵";case ActivityKaiFuJiJieType.tiannv:return"玄女";case ActivityKaiFuJiJieType.tiannv_nimbus:return"灵气";case ActivityKaiFuJiJieType.tiannv_flower:return"花辇";case ActivityKaiFuJiJieType.lingtong:return"灵童"}},e.GetQiTianActivityIds=function(e,t){return GameGlobal.Config.WeekEnjoyEverydayConfig[e][t].content},e.GetConfigByActityType=function(e){return GameGlobal.Config["ActivityType"+e+"Config"]},e.GetCfgObjByValue=function(e){var t=this.GetConfigByActityType(e.type),i=t[e.id];return i instanceof Array?i[e.value-1]:i[e.value]},e.ActivityKaiFuJiJieRankType=[0,5,6,7,8,14,13,12,11,9,16,15,20],e}();__reflect(ActivityConst.prototype,"ActivityConst");var ActivityKaiFuFuncType;!function(e){e[e.ACT_1_Upgrade=1]="ACT_1_Upgrade",e[e.ACT_2_PackageDiscount=2]="ACT_2_PackageDiscount",e[e.ACT_3_RechargeContinue=3]="ACT_3_RechargeContinue",e[e.ACT_4_Reach=4]="ACT_4_Reach",e[e.ACT_5_WeekLogin=5]="ACT_5_WeekLogin",e[e.ACT_6_RechargeWheel=6]="ACT_6_RechargeWheel",e[e.ACT_7_RechargeTotal=7]="ACT_7_RechargeTotal",e[e.ACT_8_Invest=8]="ACT_8_Invest",e[e.ACT_9_Loop=9]="ACT_9_Loop",e[e.ACT_10_MergeWing=10]="ACT_10_MergeWing",e[e.ACT_11_MergeBag=11]="ACT_11_MergeBag",e[e.ACT_12_MergeRecharge=12]="ACT_12_MergeRecharge",e[e.ACT_13_umulativeRecharge=13]="ACT_13_umulativeRecharge",e[e.ACT_14_ResetDouble=14]="ACT_14_ResetDouble",e[e.ACT_15_ActivitySingleRecharge=15]="ACT_15_ActivitySingleRecharge",e[e.ACT_16_DayLogin=16]="ACT_16_DayLogin",e[e.ACT_17_ArenaTarget=17]="ACT_17_ArenaTarget",e[e.ACT_18_CashGift=18]="ACT_18_CashGift",e[e.ACT_19_PowerTarget=19]="ACT_19_PowerTarget",e[e.ACT_20_RechargeGroupon=20]="ACT_20_RechargeGroupon",e[e.ACT_21_OutdrawDiscountShop=21]="ACT_21_OutdrawDiscountShop",e[e.ACT_22_OrangePetTarget=22]="ACT_22_OrangePetTarget",e[e.ACT_23_AdvanceLevel=23]="ACT_23_AdvanceLevel",e[e.ACT_24_GrowFund=24]="ACT_24_GrowFund",e[e.ACT_25_Consumption=25]="ACT_25_Consumption",e[e.ACT_26_DisCountShop=26]="ACT_26_DisCountShop",e[e.ACT_99990_JiJie=99990]="ACT_99990_JiJie",e[e.ACT_99991_JiJieRank=99991]="ACT_99991_JiJieRank",e[e.ACT_99992_JiJieShop=99992]="ACT_99992_JiJieShop",e[e.ACT_99993_LeiJiReCharge=99993]="ACT_99993_LeiJiReCharge"}(ActivityKaiFuFuncType||(ActivityKaiFuFuncType={}));var ActivityKaiFuShopLimitBuyType;!function(e){e[e["long"]=1]="long",e[e.noTimes=2]="noTimes",e[e.day=3]="day"}(ActivityKaiFuShopLimitBuyType||(ActivityKaiFuShopLimitBuyType={}));var ActivityKaiFuJiJieType;!function(e){e[e.ride=1]="ride",e[e.wing=2]="wing",e[e.fairy=3]="fairy",e[e.weapon=4]="weapon",e[e.pet_psychic=5]="pet_psychic",e[e.pet_soul=6]="pet_soul",e[e.xianlv_circle=7]="xianlv_circle",e[e.xianlv_position=8]="xianlv_position",e[e.tiannv=9]="tiannv",e[e.tiannv_nimbus=10]="tiannv_nimbus",e[e.tiannv_flower=11]="tiannv_flower",e[e.lingtong=12]="lingtong",e[e.xianjun=13]="xianjun"}(ActivityKaiFuJiJieType||(ActivityKaiFuJiJieType={}));var ActivityKaiFuTargetId;!function(e){e[e.team=1]="team",e[e.petCopy=2]="petCopy",e[e.upLevel=3]="upLevel",e[e.power=4]="power",e[e.show=5]="show",e[e.recharge=6]="recharge"}(ActivityKaiFuTargetId||(ActivityKaiFuTargetId={}));var ActivityAdvancedInfo=function(){function e(){this.dayChargeValue=0,this.chargerReward=[],this.m_shopDatas={},this.advancedReward_datas={}}return e.prototype.GetChargeReward=function(e){return-1!=this.chargerReward.indexOf(e)},e.prototype.GetAdvancedReward=function(e,t){var i=this.advancedReward_datas[e]||[];
return-1!=i.indexOf(t)},e.prototype.getBuyNum=function(e){return this.m_shopDatas[e]||0},e.prototype.prase=function(e){if(this.chargerReward=e.chargerReward,this.dayChargeValue=e.dayCharger,this.m_shopDatas={},e.shop){var t=void 0,i=e.shop.length;for(t=0;i>t;t++)this.m_shopDatas[e.shop[t].id]=e.shop[t].num}if(this.advancedReward_datas={},e.advancedReward){var t=void 0,i=e.advancedReward.length;for(t=0;i>t;t++)this.advancedReward_datas[e.advancedReward[t].typ]=e.advancedReward[t].reward}},e.prototype.updateShop=function(e){if(e){var t=void 0,i=e.length;for(t=0;i>t;t++)this.m_shopDatas[e[t].id]=e[t].num}},e.prototype.updateAdvancedReward=function(e){if(e){var t=void 0,i=e.length;for(t=0;i>t;t++)this.advancedReward_datas[e[t].typ]=e[t].reward}},e}();__reflect(ActivityAdvancedInfo.prototype,"ActivityAdvancedInfo");var GameSocket=function(){function e(){this.m_ByteList=[],this.m_IsUpdate=!1,this.m_ReLoginTimer=0,this.m_ServerTimeCounter=5,this.mIsLogin=!1,this.socket_=Socket.ins(),this.socket_.proxy=this}return e.prototype.GetState=function(){return this.socket_.GetSocketState()},e.prototype.Rpc=function(e,t,i,o){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),this.send(Sproto.SprotoSender.Pack(e,t,i,o)),!0},e.prototype.send=function(e){return this.socket_.GetSocketState()==Socket.STATUS_COMMUNICATION?(this.socket_.sendPack(e),this._SendGetServerTime(),!0):(console.log("发送数据时没和服务连接或者未进入通信状态"),!1)},e.prototype.onSocketConnected=function(){TimerManager.ins().remove(this.reLogin,this)},e.prototype.onSocketRead=function(e){this.m_ByteList.push(e),this.DoDispatch()},e.prototype.DoDispatch=function(){this.m_IsUpdate||(this.m_IsUpdate=!0,egret.startTick(this.UpdateDispatch,this))},e.prototype.UpdateDispatch=function(e){for(var t=0;20>t;++t){var i=this.m_ByteList.shift();if(!i){this.m_IsUpdate=!1,egret.stopTick(this.UpdateDispatch,this);break}var o=Sproto.SprotoCore.Dispatch(i);if(o&&this.send(o),egret.getTimer()-e>10)break}return!1},e.prototype.onSocketClose=function(e){this._onClosed&&this._onClosed(),GameServer.mOtherLogin||(GameGlobal.OnSocketClose(),this.m_ReLoginTimer=egret.getTimer(),TimerManager.ins().doTimer(5e3,0,this.reLogin,this))},e.prototype.reLogin=function(){egret.getTimer()<this.m_ReLoginTimer+4e3||(this.m_ReLoginTimer=egret.getTimer(),this.socket_.close(),this.login(this.socket_._host+":"+this.socket_._port))},e.prototype.onFinishCheck=function(e,t){e==Socket.STATUS_COMMUNICATION||(e==Socket.STATUS_CHECKING?(this._onConnected&&this._onConnected(),this.sendCheckAccount()):e==Socket.STATUS_DISCONNECT)},e.prototype._SendGetServerTime=function(){egret.getTimer()>this.m_ServerTimeCounter+2e5&&(this.m_ServerTimeCounter=egret.getTimer(),this.Rpc(C2sProtocol.cs_base_get_game_time))},e.prototype.sendCheckAccount=function(){if(!this.mIsLogin)return void console.warn("not login not check account !!!");console.log("开始验证账号");var e=new Sproto.checkAccount_request;e.token=Main.Instance.mToken,Main.Instance.mConnectServerData&&(e.serverid=Number(Main.Instance.mConnectServerData.id)),e.lid=Main.Instance.lid,this.socket_.sendPack(Sproto.SprotoSender.Pack(C2sProtocol.checkAccount,e,GameGlobal.RoleMgr.doCheckAccount,GameGlobal.RoleMgr))},e.prototype.CheckAccount=function(e){e?this.socket_.updateStatus(Socket.STATUS_COMMUNICATION):(this.socket_.updateStatus(Socket.STATUS_DISCONNECT),this.socket_.close())},e.prototype.login=function(e){this.mIsLogin=!0;var t=e.split(":"),i=t[0],o=t[1];this.socket_.connected?this.sendCheckAccount():this.socket_.connect(i,o)},e.prototype.setOnClose=function(e,t){this._onClosed=e.bind(t)},e.prototype.setOnConnected=function(e,t){this._onConnected=e.bind(t)},e.prototype.close=function(){this.socket_.close()},e.ins=function(){return e._ins||(e._ins=new e),e._ins},e}();__reflect(GameSocket.prototype,"GameSocket");var ActivityType10Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType10Data.prototype,"ActivityType10Data");var ActivityType11Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType11Data.prototype,"ActivityType11Data");var ActivityType12Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType12Data.prototype,"ActivityType12Data");var ActivityType13Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType13Data.prototype,"ActivityType13Data");var ActivityType14Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType14Data.prototype,"ActivityType14Data");var ActivityType15Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType15Data.prototype,"ActivityType15Data");var ActivityType16Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.logrecord=e.logrecord},t.prototype.hasReward=function(){if(!this.isOpenActivity())return!1;var e,t=this.logrecord||0;for(e=1;t>=e;e++)if(1==this.canGetRecordByIndex(e))return!0;return!1},t.prototype.canGetRecordByIndex=function(e){return this.isOpenActivity()?GameServer.serverOpenDay<e?!1:!this.GetRecordByIndex(e):!1},t}(ActivityBaseData);__reflect(ActivityType16Data.prototype,"ActivityType16Data");var ActivityType17Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.target=e.target},t.prototype.hasReward=function(){if(!this.isOpenActivity())return!1;var e,t=this.GetConfig(),i=t.length,o=GameServer.serverOpenDay;for(e=0;i>e;e++)if(t[e].day==o&&this.canGetRecordByIndex(e+1))return!0;return!1},t.prototype.canGetRecordByIndex=function(t){if(!this.isOpenActivity())return!1;var i=this.GetConfig()[t-1],o=i.day;return GameServer.serverOpenDay<o?!1:e.prototype.canGetRecordByIndex.call(this,t)},t}(ActivityBaseData);__reflect(ActivityType17Data.prototype,"ActivityType17Data");var ActivityType18Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.dayrecharge=e.dayrecharge},t.prototype.canGetRecordByIndex=function(t){if(!this.isOpenActivity())return!1;var i=this.GetConfig()[t-1],o=i.day;return GameServer.serverOpenDay<o?!1:e.prototype.canGetRecordByIndex.call(this,t)},t}(ActivityBaseData);__reflect(ActivityType18Data.prototype,"ActivityType18Data");var ActivityType19Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reachday=0,t}return __extends(t,e),t.prototype.update=function(e){this.reachday=e.reachday,this.runday=e.runday,this.record=e.record},t.prototype.isLastDay=function(){var e=this.GetConfig()[this.runday];return null==e},t}(ActivityBaseData);__reflect(ActivityType19Data.prototype,"ActivityType19Data");var ActivityType1Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record},t}(ActivityBaseData);__reflect(ActivityType1Data.prototype,"ActivityType1Data");var ActivityType20Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record},t}(ActivityBaseData);__reflect(ActivityType20Data.prototype,"ActivityType20Data");var ActivityType21Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.people=e.people,this.rechargeNum=e.rechargeNum},t}(ActivityBaseData);__reflect(ActivityType21Data.prototype,"ActivityType21Data");var ActivityType22Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.gid=e.gid},t}(ActivityBaseData);__reflect(ActivityType22Data.prototype,"ActivityType22Data");var ActivityType23Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.runday=1,t}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.runday=e.runday},t.prototype.hasReward=function(){if(!this.isOpenActivity())return!1;this.GetConfig();return 3==this.record?!0:!1},t.prototype.GetRecordByIndex=function(e){return 4==this.record?!0:!1},t}(ActivityBaseData);__reflect(ActivityType23Data.prototype,"ActivityType23Data");var ActivityType24Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.status=0,t.reward=[],t}return __extends(t,e),t.prototype.update=function(e){e&&(this.status=e.status,this.reward=e.reward)},t.prototype.hasReward=function(){if(0==this.status)return!1;var e,t=this.GetConfig(),i=GameGlobal.actorModel.level,o=t.length;for(e=0;o>e;e++)if(i>=t[e].level&&-1==this.reward.indexOf(t[e].index))return!0;return!1},t.prototype.canReward=function(){if(1==this.status){var e=this.GetConfig(),t=void 0,i=e.length;for(t=0;i>t;t++)if(-1==this.reward.indexOf(e[t].index))return!0}return!1},t}(ActivityBaseData);__reflect(ActivityType24Data.prototype,"ActivityType24Data");var ActivityType25Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.money=0,t.reward=0,t}return __extends(t,e),t.prototype.update=function(e){e&&(this.money=e.RechargeNum,this.reward=e.reward)},t.prototype.hasReward=function(){if(!this.isOpenActivity())return!1;if(0==this.money)return!1;var e,t=this.GetConfig(),i=t.length;for(e=0;i>e;e++)if(this.money>=t[e].cost&&!BitUtil.Has(this.reward,t[e].index))return!0;return!1},t}(ActivityBaseData);__reflect(ActivityType25Data.prototype,"ActivityType25Data");var ActivityType26Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.buynums=e.buynums||[]},t.prototype.hasReward=function(){return!1},t}(ActivityBaseData);__reflect(ActivityType26Data.prototype,"ActivityType26Data");var ActivityType27Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cloutArr=[],t.redPoint=!0,t}return __extends(t,e),t.prototype.update=function(e){this.cloutArr=e.data},t.prototype.isRedPoint=function(){return this.redPoint},t}(ActivityBaseData);__reflect(ActivityType27Data.prototype,"ActivityType27Data");var ActivityType28Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.runday=e.runday,this.recharge=e.recharge},t}(ActivityBaseData);__reflect(ActivityType28Data.prototype,"ActivityType28Data");var AStar=function(){function e(e){void 0===e&&(e=null),this.m_nMarkTag=0,e&&this.initFromMap(e)}return e.prototype.initFromMap=function(e){var t=0;this.m_ASMapCells?t=this.m_ASMapCells.length:this.m_ASMapCells=[],this.m_nWidth=e.numCols,this.m_nHeight=e.numRows;var i=this.m_nWidth*this.m_nHeight;i>this.m_ASMapCells.length&&(this.m_ASMapCells.length=i);for(var o=t;i>o;++o)this.m_ASMapCells[o]=new ASMapCell;var n,a,r,s;for(r=0,a=0;a<this.m_nHeight;++a)for(n=0;n<this.m_nWidth;++n)s=this.m_ASMapCells[r],s.X=n,s.Y=a,s.CanNotMove=!e.isWalkableTile(n,a),r++},e.prototype.getPatch=function(t,i,o,n){var a=MapGrid.CELL_SIZE,t=Math.floor(t/a),i=Math.floor(i/a),o=Math.floor(o/a),n=Math.floor(n/a);if(t==o&&i==n)return null;if(0>t||t>=this.m_nWidth||0>i||i>=this.m_nHeight)return null;if(0>o||o>=this.m_nWidth||0>n||n>=this.m_nHeight)return null;var r=this.m_ASMapCells[n*this.m_nWidth+o];if(!r||r.CanNotMove)return null;var s=new egret.Point,l=!0;MathUtils.Normalize(o-t,n-i,s);for(var c=o>t?1:-1,u=0,p=0,h=Math.abs(o-t);h>p;p++){var d=c+u,_=Math.floor(d*s.y/s.x);if(!GameMap.checkWalkable(t+d,i+_)){l=!1;break}u+=c}if(l)for(var f=n>i?1:-1,u=0,m=0,h=Math.abs(n-i);h>m;m++){var _=f+u,d=Math.floor(_*s.x/s.y);if(!GameMap.checkWalkable(t+d,i+_)){l=!1;break}u+=f}if(l)return[new AStarNode(o,n)];this.reset(t,i);var g=!1,v=t,y=i,C=this.m_ASMapCells[y*this.m_nWidth+v];C.GCost=0,C.LastX=-1,C.LastY=-1,C.X=v,C.Y=y,C.MarkTag=this.m_nMarkTag,C.HCost=Math.abs(o-t)+10*Math.abs(n-i);for(var b,S,G,T;;){if(v==o&&y==n){g=!0;break}for(C.State!=ASMapCell.CSCLOSE&&this.closeCell(C),b=0;8>b;++b)S=v+e.NEIGHBORPOS_X_VALUES[b],G=y+e.NEIGHBORPOS_Y_VALUES[b],0>S||S>=this.m_nWidth||0>G||G>=this.m_nHeight||(T=this.m_ASMapCells[G*this.m_nWidth+S],T.CanNotMove||(T.MarkTag!=this.m_nMarkTag||T.State==ASMapCell.CSNONE?(T.MarkTag=this.m_nMarkTag,T.LastX=v,T.LastY=y,T.btDir=b,T.GCost=C.GCost+e.AS_MOVECOST[1&b],T.HCost=Math.abs(o-S)+10*Math.abs(n-G),this.openCell(T)):T.State==ASMapCell.CSOPEN&&T.GCost>C.GCost+e.AS_MOVECOST[1&b]&&(T.LastX=v,T.LastY=y,T.btDir=b,T.GCost=C.GCost+e.AS_MOVECOST[1&b],this.reopenCell(T))));if(C=this.m_LastOpenCell,null==C)break;v=C.X,y=C.Y}if(g){for(var I=new Array;;)if(I.push(new AStarNode(C.X,C.Y)),C=this.m_ASMapCells[C.LastY*this.m_nWidth+C.LastX],C.LastX<=0&&C.LastY<=0||C.MarkTag!=this.m_nMarkTag)break;return I}return null},e.prototype.reset=function(e,t){var i=this.m_ASMapCells[t*this.m_nWidth+t];i.LastX=0,i.LastY=0,i.HCost=0,i.GCost=0,i.FValue=0,i.State=0,i.Prev=null,i.Next=null,i.btDir=0,this.m_LastOpenCell=null,this.m_nMarkTag=this.m_nMarkTag+1},e.prototype.closeCell=function(e){e.State==ASMapCell.CSOPEN&&(e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),e==this.m_LastOpenCell&&(this.m_LastOpenCell=e.Prev)),e.State=ASMapCell.CSCLOSE},e.prototype.openCell=function(e){e.State=ASMapCell.CSOPEN;var t=e.HCost+e.GCost;e.FValue=t;var i=this.m_LastOpenCell;if(i){for(;i.FValue<t;){if(null==i.Prev)return i.Prev=e,e.Prev=null,void(e.Next=i);i=i.Prev}e.Prev=i,i.Next?(e.Next=i.Next,i.Next.Prev=e,i.Next=e):(e.Next=null,i.Next=e,this.m_LastOpenCell=e)}else this.m_LastOpenCell=e,e.Prev=null,e.Next=null},e.prototype.reopenCell=function(e){var t=e.HCost+e.GCost;e.FValue=t;var i=e.Next;if(i&&i.FValue>t){do i=i.Next;while(i&&i.FValue>t);e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),i?(e.Next=i,i.Prev?(e.Prev=i.Prev,i.Prev.Next=e):e.Prev=null,i.Prev=e):(e.Prev=this.m_LastOpenCell,e.Next=null,this.m_LastOpenCell.Next=e,this.m_LastOpenCell=e)}},e.RMOVECOST=14,e.DMOVECOST=10,e.AS_MOVECOST=[e.DMOVECOST,e.RMOVECOST],e.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],e.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],e}();__reflect(AStar.prototype,"AStar");var ASMapCell=function(){function e(){}return e.CSNONE=0,e.CSOPEN=1,e.CSCLOSE=2,e}();__reflect(ASMapCell.prototype,"ASMapCell");var ActivityType3Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.day=e.day,this.rechargeCount=e.rechargeCount},t}(ActivityBaseData);__reflect(ActivityType3Data.prototype,"ActivityType3Data");var ActivityType4Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType4Data.prototype,"ActivityType4Data");var ActivityType5Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityBaseData);__reflect(ActivityType5Data.prototype,"ActivityType5Data");var ActivityType6Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.reachindex=e.reachindex,this.value=e.value,this.drawrecord=e.drawrecord,this.drawtime=e.drawtime},t}(ActivityBaseData);__reflect(ActivityType6Data.prototype,"ActivityType6Data");var ActivityType7Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){this.record=e.record,this.recharge=e.recharge},t}(ActivityBaseData);__reflect(ActivityType7Data.prototype,"ActivityType7Data");var ActivityType8Data=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.status=0,t.day=0,t}return __extends(t,e),t.prototype.update=function(e){e&&(this.status=e.status,this.day=e.day)},t.prototype.canReward=function(){if(1==this.status){var e=this.GetConfig(),t=e.length;if(this.day<=t)return!0}return!1},t}(ActivityBaseData);__reflect(ActivityType8Data.prototype,"ActivityType8Data");var ActivityType9Data=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ActivityType2Data);__reflect(ActivityType9Data.prototype,"ActivityType9Data");var DabiaoRankData=function(){function e(){}return e.prototype.prase=function(e,t){this.name=e.name,this.numType=e.value},e}();__reflect(DabiaoRankData.prototype,"DabiaoRankData");var GangBattleModel=function(e){function t(){var t=e.call(this)||this;return t.mKingInfoMap={},t.mMyGBattleInfo=new MyGangBattleInfo,t.mGBPlayerGlobalInfo=new GBattlePlayerGlobalInfo,t.mGBGangGlobalInfo=new GBattleGangGlobalInfo,t.mBossInfo=new GangBattleBossInfo,t.mGuardsInfo=new GuardsInfo,t.mGRanksInfo=new GangRanksInfo,t.mGBPlayerRanksInfo=new GBattlePlayerRanksInfo,t.regNetMsg(S2cProtocol.sc_guildwar_player_info,t._DoPlayerInfo),t.regNetMsg(S2cProtocol.sc_guildwar_guild_info,t._DoGangInfo),t.regNetMsg(S2cProtocol.sc_guildwar_boss_info,t._DoBossInfo),t.regNetMsg(S2cProtocol.sc_guildwar_barrier_info,t._DoGateInfo),t.regNetMsg(S2cProtocol.sc_guildwar_four_king_info,t._DoKingInfo),t.regNetMsg(S2cProtocol.sc_guildwar_guard_info,t._DoGuardInfo),t.regNetMsg(S2cProtocol.sc_guildwar_guild_rank,t._DoGuildRankInfo),t.regNetMsg(S2cProtocol.sc_guildwar_player_global_info,t._DoPlayerGlobalInfo),t.regNetMsg(S2cProtocol.sc_guildwar_player_rank,t._DoPlayerRank),t.regNetMsg(S2cProtocol.sc_guildwar_all_guild_rank_info,t._DoAllGangRankInfo),t.regNetMsg(S2cProtocol.sc_guildwar_all_player_rank_info,t._DoAllPlayerRank),t.regNetMsg(S2cProtocol.sc_guildwar_myguild_global_info,t._DoMyGangGlobalInfo),t.regNetMsg(S2cProtocol.sc_guildwar_enter_war_guild,t._DoBeforeEnterInfo),t.regNetMsg(S2cProtocol.sc_guildwar_enter_dragon_guild,t._DoEnterDragonInfo),t.regNetMsg(S2cProtocol.sc_guildwar_ultimate_attack,t._DoDragonGuardShowTime),t.regNetMsg(S2cProtocol.sc_guildwar_report,t.getEndAwardPanelData),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype._DoPlayerInfo=function(e){this.mMyGBattleInfo.UpdateInfo(e),this.EnterMapScence(),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_MYINFO)},t.prototype._DoGangInfo=function(e){this.mMyGBattleInfo.UpdateGangInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_MYINFO)},t.prototype._DoBossInfo=function(e){this.mBossInfo.UpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_BOSSINFO)},t.prototype._DoGateInfo=function(e){this.mMyGBattleInfo.UpdateGateInfo(e)},t.prototype._DoKingInfo=function(e){for(var t=0,i=e.bossinfos;t<i.length;t++){var o=i[t],n=this.mKingInfoMap[o.bossid];n||(n=new GangBattleKingInfo,this.mKingInfoMap[o.bossid]=n),n.UpdateInfo(o)}GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_KINGINFO)},t.prototype._DoGuardInfo=function(e){this.mGuardsInfo.UpdataInfo(e)},t.prototype._DoGuildRankInfo=function(e){this.mGRanksInfo.UpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_GANGRANK)},t.prototype._DoPlayerGlobalInfo=function(e){this.mGBPlayerGlobalInfo.UpdateInfo(e),GangBattleConst.level=e.worldlevel,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_MYINFO),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_DURATION)},t.prototype._DoPlayerRank=function(e){this.mGBPlayerRanksInfo.UpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_PLAYERRANK)},t.prototype._DoAllGangRankInfo=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_ALLGANGRANK,e.rankinfos)},t.prototype._DoAllPlayerRank=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_ALLPLAYERRANK,e)},t.prototype._DoMyGangGlobalInfo=function(e){this.mGBGangGlobalInfo.UnpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_UPDATE_MYINFO)},t.prototype._DoBeforeEnterInfo=function(e){this.mChampionInfo=e.championGuild,this.mJoinInfos=e.guildinfos},t.prototype._DoEnterDragonInfo=function(e){this.mEnterDragonInfo=e},t.prototype._DoDragonGuardShowTime=function(e){this.mGuardShowTime=e.countdown,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_SHOW_GUARDTIP)},t.prototype.SendEnterBattle=function(){var e=this,i=new Sproto.cs_guildwar_enter_request;this.Rpc(C2sProtocol.cs_guildwar_enter,i,function(i){i.ret?(e.mActiveOpenFlag=!0,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_OPEN_GATEVIEW),e.mMyGBattleInfo.mGateId==t.ACTIVE_TYPE_GATE&&ViewManager.ins().open(GBattleMainWin)):(e.mActiveOpenFlag=!1,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_OPEN_GATEVIEW),ViewManager.ins().open(GBattleMainWin))},this)},t.prototype.SendAttackBoss=function(e){var t=new Sproto.cs_guildwar_attack_boss_request;t.bossid=e,this.Rpc(C2sProtocol.cs_guildwar_attack_boss,t)},t.prototype.SendEnterNext=function(){var e=new Sproto.cs_guildwar_next_barrier_request;this.Rpc(C2sProtocol.cs_guildwar_next_barrier,e,function(e){e.ret&&(GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_OPEN_GATEVIEW),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBATTLE_ENTER_NEXT_GATE))},this)},t.prototype.SendReturnPrev=function(){var e=new Sproto.cs_guildwar_last_barrier_request;this.Rpc(C2sProtocol.cs_guildwar_last_barrier,e,function(e){e.ret},this)},t.prototype.SendAttackPlayer=function(e){var t=new Sproto.cs_guildwar_attack_player_request;t.targetid=e,this.Rpc(C2sProtocol.cs_guildwar_attack_player,t,function(e){return 1==e.ret?void UserTips.ins().showTips("同帮玩家不可相互攻击"):2==e.ret?void UserTips.ins().showTips("不可攻击复活中的玩家"):3==e.ret?void UserTips.ins().showTips("目标不是队长"):void 0},this)},t.prototype.SendClearRebornCD=function(){var e=new Sproto.cs_guildwar_clear_reborncd_request;this.Rpc(C2sProtocol.cs_guildwar_clear_reborncd,e,function(e){e.ret},this)},t.prototype.SendAllGangRank=function(){var e=new Sproto.cs_guildwar_all_guild_rank_info_request;this.Rpc(C2sProtocol.cs_guildwar_all_guild_rank_info,e)},t.prototype.SendAllPlayerRank=function(){var e=new Sproto.cs_guildwar_all_player_rank_info_request;this.Rpc(C2sProtocol.cs_guildwar_all_player_rank_info,e)},t.prototype.SendExitGBattle=function(){var e=new Sproto.cs_guildwar_exit_barrier_request;this.Rpc(C2sProtocol.cs_guildwar_exit_barrier,e)},t.prototype.SendGainScoreAward=function(e){var t=new Sproto.cs_guildwar_get_score_reward_request;t.rewardid=e,this.Rpc(C2sProtocol.cs_guildwar_get_score_reward,t)},Object.defineProperty(t.prototype,"bossInfo",{get:function(){return this.mBossInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myGBattleInfo",{get:function(){return this.mMyGBattleInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"guardsInfo",{get:function(){return this.mGuardsInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gRanksInfo",{get:function(){return this.mGRanksInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gbPlayerGlobalInfo",{get:function(){return this.mGBPlayerGlobalInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gbGangGlobalInfo",{get:function(){return this.mGBGangGlobalInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gbPlayerRanksInfo",{get:function(){return this.mGBPlayerRanksInfo},enumerable:!0,configurable:!0}),t.prototype.IsActive=function(){return this.mActiveOpenFlag},t.prototype.IsBroken=function(e){return e==t.ACTIVE_TYPE_DRAGON?this.mEnterDragonInfo&&null!=this.mEnterDragonInfo.guildinfos:this.mMyGBattleInfo.mGateId==e&&this.mMyGBattleInfo.mBrokenFlag},t.prototype.CanAttack=function(){return GameServer.serverTime>=this.mMyGBattleInfo.mAttackTime},t.prototype.IsKingAlive=function(e){var t=this.mKingInfoMap[e];return t?t.mRebornTime<=GameServer.serverTime:!0},t.prototype.GetKingRebornDiffTime=function(e){var t=this.mKingInfoMap[e];return t?Math.max(t.mRebornTime-GameServer.serverTime,0):0},t.prototype.GetKingRebornTime=function(e){var t=this.mKingInfoMap[e];return t?t.mRebornTime:0},t.prototype.GetRebornTime=function(){return this.mGBPlayerGlobalInfo.mRebornTime-GameServer.serverTime},t.prototype.GetNextScoreConfig=function(){if(this.mGBPlayerGlobalInfo.mScoreReward)for(var e=GangBattleConst.GetScoreList(),t=0,i=e;t<i.length;t++){var o=i[t];if((this.mGBPlayerGlobalInfo.mScoreReward&Math.pow(2,o.id-1))>0)return o}},t.prototype.HasScoreRewardGain=function(e){return this.mGBPlayerGlobalInfo.mScoreReward?0==(this.mGBPlayerGlobalInfo.mScoreReward&Math.pow(2,e-1)):!1},t.prototype.CanScoreRewardGain=function(e){var t=GangBattleConst.GetScoreConfig(e);if(!t)return!1;var i=this.mGBPlayerGlobalInfo.mScore;return i>=t.needpoints},t.prototype.NeedJumpToOutsider=function(){return this.mMyGBattleInfo.mGateId!=t.ACTIVE_TYPE_GATE},t.prototype.GetActiveEndTime=function(){return this.mGBPlayerGlobalInfo.mEndTime||0},t.prototype.IsInOutsideScience=function(){return this.mMyGBattleInfo.mGateId==t.ACTIVE_TYPE_OUTSIDER},t.prototype.EnterMapScence=function(){if(BattleMap.mFbType!=UserFb.FB_TYPE_GUILD_WAR&&BattleMap.mFbType!=UserFb.FB_TYPE_GUILD_WAR_PK&&this.mMyGBattleInfo.mGateId!=t.ACTIVE_TYPE_GATE){var e;switch(this.mMyGBattleInfo.mGateId){case t.ACTIVE_TYPE_OUTSIDER:e=GameGlobal.Config.GuildBattleBaseConfig.t_mapid;break;case t.ACTIVE_TYPE_DRAGON:e=GameGlobal.Config.GuildBattleBaseConfig.s_mapid;break;case t.ACTIVE_TYPE_TEMPLE:e=GameGlobal.Config.GuildBattleBaseConfig.l_mapid}GameGlobal.CommonRaidModel.IsInCurMap(e)||GameGlobal.CommonRaidModel._MapGo(e)}},t.prototype.getEndAwardPanelData=function(e){if(e){var t=new activityEndAwardData;t.award=e.rewards,t.auction=e.auctionrewards,t.paneltitle="帮会战",t.rankTxt="我的帮会排名：第"+e.guilddetail.rank+"名";var i={titleName:"",name:"",iconSrc:"",iconBgSrc:"",banghuiTxt:""};i.titleName="本次帮会胜方",i.name=e.sharedata.victory+"(s"+e.sharedata.serverid+"服)",i.iconSrc="ui_bh_bm_qizi",i.banghuiTxt=i.name.charAt(0),t.icon1=i,ViewManager.ins().open(ActivityEndAwardPanel,t)}},t.ACTIVE_TYPE_GATE=0,t.ACTIVE_TYPE_OUTSIDER=1,t.ACTIVE_TYPE_DRAGON=2,t.ACTIVE_TYPE_TEMPLE=3,t}(BaseSystem);__reflect(GangBattleModel.prototype,"GangBattleModel");var GangBattleTeamModel=function(e){function t(){return e.call(this,UserFb.FB_TYPE_GUILD_WAR)||this}return __extends(t,e),t.prototype.InnerCheckEnter=function(e){return!0},t.prototype.SendRecruit=function(){this.Rpc(C2sProtocol.cs_guildwar_team_recruit)},t}(TeamBaseModel);__reflect(GangBattleTeamModel.prototype,"GangBattleTeamModel");var GangBattleConst=function(){function e(){}return Object.defineProperty(e,"level",{set:function(e){this.mLevel=Math.max(e,1)},enumerable:!0,configurable:!0}),e.GetKingList=function(){var e=[];for(var t in GameGlobal.Config.GuildBattleKingConfig){var i=GameGlobal.Config.GuildBattleKingConfig[t],o=this._GetConfig(i);o&&e.push(o)}return e},e.GetKingConfig=function(e){return this._GetConfig(GameGlobal.Config.GuildBattleKingConfig[e])},e.GetScoreList=function(){var e=[];for(var t in GameGlobal.Config.GuildBattleRewardsConfig){var i=GameGlobal.Config.GuildBattleRewardsConfig[t],o=this._GetConfig(i);o&&e.push(o)}return e},e.GetScoreConfig=function(e){return this._GetConfig(GameGlobal.Config.GuildBattleRewardsConfig[e])},e._GetConfig=function(e){var t;for(var i in e){if(!(this.mLevel>=parseInt(i)))break;t=e[i]}return t},e.mLevel=10,e}();__reflect(GangBattleConst.prototype,"GangBattleConst");var GangBattleRankInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){e&&(this.mDamage=e.injure,this.mDamageRank=e.injureRank,this.mHoldtracks=e.holdtracks,this.mHoldtracksRank=e.holdtracksRank,this.mScore=e.score,this.mScoreRank=e.scoreRank,this.mKill=e.kill,this.mKillRank=e.killRank)},e}();__reflect(GangBattleRankInfo.prototype,"GangBattleRankInfo");var MyGangBattleInfo=function(){function e(){this.mGBRankInfo=new GangBattleRankInfo,this.mMemberCount=0,this.mPassCount=0,this.mMyGangRankInfo=new GangBattleRankInfo}return e.prototype.UpdateInfo=function(e){this.mGateId=e.barrierId,this.mBrokenFlag=e.through,this.mRebornTime=e.reborntime,this.mAttackTime=e.attacktime||0,this.mGBRankInfo.UpdateInfo(e.rankData)},e.prototype.UpdateGangInfo=function(e){this.mMemberCount=e.playerNum||this.mMemberCount,this.mPassCount=e.throughNum||this.mPassCount,this.mMyGangRankInfo.UpdateInfo(e.rankData)},e.prototype.UpdateGateInfo=function(e){this.mCurGatePlayerCount=e.playerNum},e}();__reflect(MyGangBattleInfo.prototype,"MyGangBattleInfo");var GangBattleBossInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mGateId=e.barrierId,this.mDefend=e.shield,this.mHp=e.hp,this.mRecoveryTime=e.recovertime},e}();__reflect(GangBattleBossInfo.prototype,"GangBattleBossInfo");var GangBattleKingInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mBossId=e.bossid,this.mRebornTime=e.reborntime||0},e}();__reflect(GangBattleKingInfo.prototype,"GangBattleKingInfo");var GuardInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mName=e.name,this.mGangName=e.guildName,this.mJob=e.job,this.mSex=e.sex,this.mServerId=e.serverId},e}();__reflect(GuardInfo.prototype,"GuardInfo");var GuardsInfo=function(){function e(){}return e.prototype.UpdataInfo=function(e){if(this.mGuardType=e.guardtype,this.mHoldTime=e.holdtime,this.mResistCount=e.resistNum,this.mHp=e.hp,this.mGangId=e.ownerGuildId,1==this.mGuardType){this.mGuardList=new Array;for(var t=0,i=e.guardinfos;t<i.length;t++){var o=i[t],n=new GuardInfo;n.UpdateInfo(o),this.mGuardList.push(n)}}},e}();__reflect(GuardsInfo.prototype,"GuardsInfo");var GangRankInfo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.UpdateGRankInfo=function(e){this.UpdateInfo(e.rankData),this.mGangId=e.guildId,this.mGangName=e.guildName,this.mServerId=e.serverId,this.mPassCount=e.throughNum},t}(GangBattleRankInfo);__reflect(GangRankInfo.prototype,"GangRankInfo");var GangRanksInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mGateId=e.barrierId,this.mGangRankInfoList=new Array;for(var t=0,i=e.guildinfos;t<i.length;t++){var o=i[t],n=new GangRankInfo;n.UpdateGRankInfo(o),this.mGangRankInfoList.push(n)}},e}();__reflect(GangRanksInfo.prototype,"GangRanksInfo");var GBattlePlayerGlobalInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mRebornTime=e.reborntime,this.mScore=e.score,this.mScoreRank=e.scoreRank,this.mKill=e.kill,this.mKillRank=e.killRank,this.mScoreReward=e.rewardMark,this.mEndTime=e.endtime,this.mWorldLevel=e.worldlevel},e}();__reflect(GBattlePlayerGlobalInfo.prototype,"GBattlePlayerGlobalInfo");var GBattlePlayerRankInfo=function(){function e(){this.mRankData=new GangBattleRankInfo}return e.prototype.UpdateInfo=function(e){this.mPlayerId=e.dbid,this.mName=e.name,this.mJob=e.job,this.mSex=e.sex,this.mServerId=e.serverId,this.mGangName=e.guildName,this.mRankData.UpdateInfo(e.rankData)},e}();__reflect(GBattlePlayerRankInfo.prototype,"GBattlePlayerRankInfo");var GBattlePlayerRanksInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mGateId=e.barrierId,this.mGBPlayerRankInfoList=new Array;for(var t=0,i=e.rankInfos;t<i.length;t++){var o=i[t],n=new GBattlePlayerRankInfo;n.UpdateInfo(o),this.mGBPlayerRankInfoList.push(n)}},e}();__reflect(GBattlePlayerRanksInfo.prototype,"GBattlePlayerRanksInfo");var GBattleGangGlobalInfo=function(){function e(){}return e.prototype.UnpdateInfo=function(e){this.mPlayerCount=e.playerNum,this.mScore=e.score,this.mScoreRank=e.scoreRank},e}();__reflect(GBattleGangGlobalInfo.prototype,"GBattleGangGlobalInfo");var GBattleBoxItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.imgBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBoxClick,this),this.groupScore.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnScoreClick,this)
},t.prototype.SetScoreInfo=function(){var e=GameGlobal.GangBattleModel.gbPlayerGlobalInfo,t=e.mScore,i=GameGlobal.GangBattleModel.GetNextScoreConfig();if(i){var o=t>=(i.needpoints||0)?"|C:0x2dff42&T:"+t:"|C:0xdb0000&T:"+t;this.labCurScore.textFlow=TextFlowMaker.generateTextFlow(o+"/|C:0xffffff&T:"+(i.needpoints||0)+"|");var n=i.showitem[0];this.priceIcon.visible=!0,this.priceIcon.type=n.id,this.priceIcon.setPrice(n.count,2)}else this.labCurScore.text="",this.labItem.text="没有可领取的奖励",this.labItem.textColor=Color.OrangeColor,this.priceIcon.visible=!1},t.prototype._OnBoxClick=function(e){ViewManager.ins().open(GBattleScoreWin)},t.prototype._OnScoreClick=function(){var e=GameGlobal.GangBattleModel.gbPlayerGlobalInfo,t=e.mScore,i=GameGlobal.GangBattleModel.GetNextScoreConfig();i&&(t>=i.needpoints?GameGlobal.GangBattleModel.SendGainScoreAward(i.id):UserTips.ins().showTips("积分不足"))},t}(eui.Component);__reflect(GBattleBoxItem.prototype,"GBattleBoxItem",["eui.UIComponent","egret.DisplayObject"]);var GBattleDamageRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleRankSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=DamageRankItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.UpdateContent=function(){},t.prototype.UpdatePlayerRank=function(e){var t=e.injurerank;t.sort(function(e,t){return e.rankData.injureRank-t.rankData.injureRank});var i=this.GetMyPlayerRankInfo(t);if(i)this.labMyRank.text=""+i.rankData.injureRank,this.labMyData.text=""+i.rankData.injure;else{var o=GameGlobal.GangBattleModel.myGBattleInfo;this.labMyRank.text="未排名",this.labMyData.text=""+(o.mGBRankInfo.mDamage||0)}this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.OnOpen=function(){this.observe(MessageDef.GANGBATTLE_UPDATE_ALLPLAYERRANK,this.UpdatePlayerRank),GameGlobal.GangBattleModel.SendAllPlayerRank()},t.prototype.OnClose=function(){},t.prototype.GetMyPlayerRankInfo=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.dbid==GameGlobal.actorModel.actorID)return o}},t.NAME="个人排行",t}(BaseView);__reflect(GBattleDamageRankPanel.prototype,"GBattleDamageRankPanel",["ICommonWindowTitle"]);var DamageRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.imgBg.visible=this.itemIndex%2==0;var e=this.data;this.labNo.text=""+e.rankData.injureRank,this.labGangName.text=e.guildName+".S"+e.sex,this.labName.text=""+e.name,this.labData.text=""+e.rankData.injure},t}(eui.ItemRenderer);__reflect(DamageRankItem.prototype,"DamageRankItem");var GBattleDragonGuardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleDragonGuardSkin",t._AddClick(t.btnConfirm,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="神龙鼎";var i=GameGlobal.GangBattleModel.guardsInfo;if(this.bar.maximum=100,this.bar.value=i.mHp,this.labProgNum.text=i.mHp+"%",0!=i.mGuardType){var o=i.mGuardList;if(1==o.length)return this.item1.visible=!1,this.item2.visible=!0,void this.item2.SetGuardInfo(o[0]);for(var n=1,a=0,r=o;a<r.length;a++){var s=r[a];this["item"+n]&&(this["item"+n].visible=!0,this["item"+n].SetGuardInfo(s),this["item"+n].SetLeader(1==n)),n++}}else for(var l=GameGlobal.Config.GuildBattleBaseConfig.lboss_icon,c=GameGlobal.Config.GuildBattleBaseConfig.lboss_name,u=1,p=0,h=l;p<h.length;p++){var d=h[p];this["item"+u]&&(this["item"+u].visible=!0,this["item"+u].SetMonsterInfo(d,c[u-1])),u++}},t.prototype.OnClose=function(){TimerManager.ins().removeAll(this),this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){var t=GameGlobal.GangBattleModel.guardsInfo;return t.mGangId==GameGlobal.actorModel.guildID?void UserTips.ins().showTips("同帮会不可互相攻击"):(GameGlobal.GangBattleModel.SendAttackBoss(null),void this.CloseSelf())},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GBattleDragonGuardWin.prototype,"GBattleDragonGuardWin");var GBattleDragonItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.SetGuardInfo=function(e){this.imgFace.source=ResDataPath.GetHeadImgName(e.mJob,e.mSex),this.labName.text=e.mName+".S"+e.mServerId,this.labDesc.text=e.mGangName?"("+e.mGangName+")":""},t.prototype.SetMonsterInfo=function(e,t){this.imgFace.source=e,this.labName.text=t,this.labDesc.text=""},t.prototype.SetLeader=function(e){this.imgLeader.visible=e},t}(eui.Component);__reflect(GBattleDragonItem.prototype,"GBattleDragonItem",["eui.UIComponent","egret.DisplayObject"]);var GBattleDragonScieneWin=function(e){function t(){var t=e.call(this)||this;return t.mTimerStartFlag=!1,t.skinName="GBattleDragonSceneSkin",UIHelper.SetLinkStyleLabel(t.labView),UIHelper.SetLinkStyleLabel(t.labViewRank),t}return __extends(t,e),t.prototype.OnOpen=function(){GameGlobal.GangBattleTeamModel.SendGetMyTeamInfos(),this.observe(MessageDef.GANGBATTLE_UPDATE_BOSSINFO,this.SetBossInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_MYINFO,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_GANGRANK,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_PLAYERRANK,this.SetPlayerRankInfo),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this.observe(MessageDef.GANGBATTLE_UPDATE_DURATION,this.StartDuration),this._AddClick(this.btnEnter,this._OnClicked),this._AddClick(this.btnTeam,this._OnClicked),this._AddClick(this.btnReturn,this._OnClicked),this._AddClick(this.labViewRank,this._OnClicked),this._AddClick(this.labView,this._OnClicked),this._AddClick(this.btnArr,this._OnClicked),this._AddClick(this.btnFight,this._OnClicked),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this.mTimerStartFlag=!1,this.StartDuration(),this.AdaptationGroup(!0),this.SetPlayerRankInfo(),this.SetOtherInfo(),this.SetBossInfo()},t.prototype.OnClose=function(){},t.prototype.StartDuration=function(){if(!this.mTimerStartFlag){var e=GameGlobal.GangBattleModel.GetActiveEndTime();e>0&&(this.mTimerStartFlag=!0),this.durationLab.SetColor(Color.Green),this.durationLab.SetEndTime(e,DurationLabel.TIMETEXT_TYPE_MMSS)}},t.prototype.SetPlayerRankInfo=function(){var e=GameGlobal.GangBattleModel.gbPlayerRanksInfo.mGBPlayerRankInfoList||[];e.sort(function(e,t){return e.mRankData.mDamageRank-t.mRankData.mDamageRank});for(var t=0;3>t;t++){var i=e[t];this["roleHead"+(t+1)]&&i&&(this["roleHead"+(t+1)].visible=!0,this["roleHead"+(t+1)].SetPlayerInfo(i,t+1))}},t.prototype.SetOtherInfo=function(){var e=GameGlobal.GangBattleModel.gRanksInfo.mGangRankInfoList||[];e.sort(function(e,t){return e.mDamageRank-t.mDamageRank});for(var t=0;3>t;t++){var i=e[t];this["labNum"+(t+1)].text=i?""+(t+1):"",this["labName"+(t+1)].text=i?i.mGangName+".S"+i.mServerId:"",this["labData"+(t+1)].text=i?""+i.mDamage:""}var o=GameGlobal.GangBattleModel.gbGangGlobalInfo;this.labCount.text="同帮人数："+o.mPlayerCount;var n=GameGlobal.GangBattleModel.myGBattleInfo,a=(n.mMyGangRankInfo.mDamageRank||0)>0?n.mMyGangRankInfo.mDamageRank:"未排名";this.labRange.text="本帮排名："+a+"     "+(n.mMyGangRankInfo.mDamage?n.mMyGangRankInfo.mDamage:0),this.boxItem.SetScoreInfo()},t.prototype.SetBossInfo=function(){this.groupBossBlood.visible=!GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_DRAGON);var e=GameGlobal.GangBattleModel.bossInfo;this.progBlood.maximum=100,this.progBlood.value=e.mHp,this.progBloodNum.text=e.mHp+"%",this.progDef.maximum=100,this.progDef.value=e.mDefend,this.durationDefCD.visible=0==e.mDefend,this.progDefNum.visible=e.mDefend>0,this.progDefNum.text=e.mDefend+"%",this.durationDefCD.SetTextFormat("{0}后护盾恢复"),this.durationDefCD.SetEndTime(e.mRecoveryTime,DurationLabel.TIMETEXT_TYPE_MMSS)},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.btnEnter:if(!GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_DRAGON))return void UserTips.ins().showTips("击杀神龙后，伤害前三名的帮会才能进入神龙殿");ViewManager.ins().open(GBattleEnterTempleTipWin);break;case this.btnTeam:GameGlobal.GangBattleTeamModel.mTeamInfo.HasTeam()?ViewManager.ins().open(GBattleTeamPanel):ViewManager.ins().open(GBattleTeamWin);break;case this.btnReturn:ViewManager.ins().open(GBattleExitTipWin);break;case this.labViewRank:ViewManager.ins().open(GBattleRankWin);break;case this.labView:ViewManager.ins().openIndex(GBattleRankWin,1);break;case this.btnArr:this.ShowRankList(-1!=this.btnArr.$getScaleX());break;case this.btnFight:if(GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_DRAGON))return void UserTips.ins().showTips("BOSS已经死亡");var t=GameGlobal.Config.GuildBattleBaseConfig.sboss_bronpos,i=GameGlobal.Config.GuildBattleBaseConfig.sbossid;GameGlobal.RaidMgr.mMapRaid.MoveOrder(i,t[0],t[1])}},t.prototype.AdaptationGroup=function(e){null!=e&&(MiniChatPanel.UpdateViewPos(this.groupAdaptation),this.groupAdaptation.y-=280,this.ShowRankList(!e))},t.prototype.ShowRankList=function(e){this.btnArr.$setScaleX(e?-1:1),this.groupRank.visible=e},t.LAYER_LEVEL=LayerManager.UI_GAME_MAP,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(GBattleDragonScieneWin.prototype,"GBattleDragonScieneWin");var GBattleEnterTempleTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleEnterTempleTipSkin",t._AddClick(t.btnEnter,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="龙殿入口";for(var i=GameGlobal.GangBattleModel.mEnterDragonInfo.guildinfos,o=0;3>o;o++){var n=i[o];this["labGangName"+(o+1)].text=n?n.guildName+".s"+n.serverId:""}var a=GameGlobal.GangBattleModel.mEnterDragonInfo.countdown;this.groupDuration.visible=a>GameServer.serverTime,a<=GameServer.serverTime||(this.durationLab.SetColor(7222027),this.durationLab.SetEndTime(a,DurationLabel.TIMETEXT_TYPE_MMSS))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){return this.CanEnter()?(GameGlobal.GangBattleModel.SendEnterNext(),void ViewManager.ins().close(this)):void UserTips.ins().showTips("您的帮会未获得进入资格，可回到上层继续挑战天王")},t.prototype.CanEnter=function(){for(var e=GameGlobal.actorModel.guildID,t=GameGlobal.GangBattleModel.mEnterDragonInfo.guildinfos,i=0,o=t;i<o.length;i++){var n=o[i];if(e==n.guildId)return!0}return!1},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GBattleEnterTempleTipWin.prototype,"GBattleEnterTempleTipWin");var GBattleExitTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleExitTipSkin",t._AddClick(t.btnPrev,t._OnClick),t._AddClick(t.btnExit,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!0),this.commonDialog.title="提示"},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnExit:GameGlobal.CommonRaidModel.MapLeave(),GameGlobal.GangBattleModel.SendExitGBattle();break;case this.btnPrev:GameGlobal.GangBattleModel.SendReturnPrev()}this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GBattleExitTipWin.prototype,"GBattleExitTipWin");var GBattleGangRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleGangRankSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GangRankIem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.UpdateContent=function(){},t.prototype.UpdateRankInfo=function(e){var t=this.GetMyGangRankInfo(e);this.labMyRank.text=""+(t?t.rankData.injureRank:"未排名"),this.labMyData.text=""+(t?t.rankData.injure:0),e.sort(function(e,t){return e.rankData.injureRank-t.rankData.injureRank}),this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.OnOpen=function(){this.observe(MessageDef.GANGBATTLE_UPDATE_ALLGANGRANK,this.UpdateRankInfo),GameGlobal.GangBattleModel.SendAllGangRank()},t.prototype.OnClose=function(){},t.prototype.GetMyGangRankInfo=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.guildId==GameGlobal.actorModel.guildID)return o}},t.NAME="帮会排行",t}(BaseView);__reflect(GBattleGangRankPanel.prototype,"GBattleGangRankPanel",["ICommonWindowTitle"]);var GangRankIem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.imgBg.visible=this.itemIndex%2==0;var e=this.data;this.labNo.text=""+e.rankData.injureRank,this.labGangName.text=e.guildName+".S"+e.serverId,this.labData.text=""+e.rankData.injure},t}(eui.ItemRenderer);__reflect(GangRankIem.prototype,"GangRankIem");var GBattleHKRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleRankSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.labDataTitle.text="击杀次数",this.labRankDataTitle.text="击杀：",this.list.itemRenderer=HKRankItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.UpdateContent=function(){},t.prototype.UpdatePlayerRank=function(e){var t=e.killrank;t.sort(function(e,t){return e.rankData.killRank-t.rankData.killRank});var i=this.GetMyPlayerRankInfo(t);if(i)this.labMyRank.text=""+i.rankData.killRank,this.labMyData.text=""+i.rankData.kill;else{var o=GameGlobal.GangBattleModel.gbPlayerGlobalInfo;this.labMyRank.text="未排名",this.labMyData.text=""+(o.mKill||0)}this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.OnOpen=function(){this.observe(MessageDef.GANGBATTLE_UPDATE_ALLPLAYERRANK,this.UpdatePlayerRank),GameGlobal.GangBattleModel.SendAllPlayerRank()},t.prototype.OnClose=function(){},t.prototype.GetMyPlayerRankInfo=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.dbid==GameGlobal.actorModel.actorID)return o}},t.NAME="击杀排行",t}(BaseView);__reflect(GBattleHKRankPanel.prototype,"GBattleHKRankPanel",["ICommonWindowTitle"]);var HKRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.imgBg.visible=this.itemIndex%2==0;var e=this.data;this.labNo.text=""+e.rankData.killRank,this.labGangName.text=e.guildName+".S"+e.serverId,this.labName.text=""+e.name,this.labData.text=""+e.rankData.kill},t}(eui.ItemRenderer);__reflect(HKRankItem.prototype,"HKRankItem");var GBattleJoinTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleJoinTipSkin",t._AddClick(t.btnConfirm,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="参战帮会";for(var i=GameGlobal.GangBattleModel.mJoinInfos||[],o=0;2>o;o++){var n=i[o];this["group"+(o+1)].visible=null!=n,n&&(this["labAbbreviated"+(o+1)].text=n.guildName.substr(0,1),this["labGangName"+(o+1)].text=n.guildName)}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GBattleJoinTipWin.prototype,"GBattleJoinTipWin");var GBattleMainWin=function(e){function t(){var t=e.call(this)||this;return t.mTimerStartFlag=!1,t.skinName="GBattleGateSkin",t.commonWindowBg.SetTitle("南天门"),UIHelper.SetLinkStyleLabel(t.labDetail),UIHelper.SetLinkStyleLabel(t.labJoinGang),t._AddClick(t.labJoinGang,t._OnClick),t._AddClick(t.labDetail,t._OnClick),t._AddClick(t.btnEnter,t._OnClick),t._AddClick(t.btnReturn,t._OnClick),t._AddClick(t.btnShowAward,t._OnClick),t.observe(MessageDef.GANGBATTLE_UPDATE_BOSSINFO,t.SetBossInfo),t.observe(MessageDef.GANGBATTLE_UPDATE_MYINFO,t.SetOpenInfo),t.observe(MessageDef.GANGBATTLE_UPDATE_GANGRANK,t.SetOpenInfo),t.observe(MessageDef.GANGBATTLE_ENTER_NEXT_GATE,t.JumpToNext),t.observe(MessageDef.GANGBATTLE_UPDATE_DURATION,t.StartDuration),t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.btnShowAward.icon=ActivityModel.ICONSOURCE_MAP[ActivityModel.TYPE_GANG_BATTLE],this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.labJoinGang:ViewManager.ins().open(GBattleJoinTipWin);break;case this.labDetail:ViewManager.ins().open(ActivityDescPanel,GameGlobal.Config.GuildBattleBaseConfig.n_helpid);break;case this.btnEnter:if(!GameGlobal.GangBattleModel.IsActive())return void UserTips.ins().showTips("活动未开启");if(GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_GATE))GameGlobal.GangBattleModel.SendEnterNext();else{if(!GameGlobal.GangBattleModel.CanAttack())return void UserTips.ins().showTips("攻击CD未结束");GameGlobal.GangBattleModel.SendAttackBoss(null)}break;case this.btnReturn:GameGlobal.GangBattleModel.IsActive()&&GameGlobal.GangBattleModel.SendExitGBattle(),this.CloseSelf();break;case this.btnShowAward:ActivityRewardShowWin.Open(ActivityModel.TYPE_GANG_BATTLE)}},t.prototype.JumpToNext=function(){this.CloseSelf()},t.prototype.StartDuration=function(){if(!this.mTimerStartFlag&&GameGlobal.GangBattleModel.IsActive()){var e=GameGlobal.GangBattleModel.GetActiveEndTime();e>0&&(this.mTimerStartFlag=!0),this.durationLab.SetColor(Color.Green),this.durationLab.SetEndTime(e,DurationLabel.TIMETEXT_TYPE_MMSS)}},t.prototype.UpdateContent=function(){this.StartDuration(),this.SetUnopenInfo(),this.SetOpenInfo(),this.SetBossInfo()},t.prototype.SetUnopenInfo=function(){if(!GameGlobal.GangBattleModel.IsActive()){this.labDesc.text=GameGlobal.Config.GuildBattleBaseConfig.helpdes;var e=GameGlobal.GangBattleModel.mChampionInfo;this.labMasterName.text=e&&e.leaderName?e.leaderName+".s"+e.serverId:"暂无",this.labGangName.text=e&&e.guildName?"("+e.guildName+")":"";for(var t=GameGlobal.Config.GuildBattleBaseConfig.n_showItem,i=1,o=0,n=t;o<n.length;o++){var a=n[o],r="item"+i;this[r]&&(this[r].visible=!0,this[r].setItemAward(a.type,a.id,a.count)),i++}}},t.prototype.SetOpenInfo=function(){var e=this;if(this.groupUnopen.visible=!GameGlobal.GangBattleModel.IsActive(),this.groupOpen.visible=GameGlobal.GangBattleModel.IsActive(),this.labBrokenTip.visible=GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_GATE),this.btnEnter.label=GameGlobal.GangBattleModel.IsActive()?"攻 门":"未开启",this.btnEnter.label=GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_GATE)?"进入殿前":this.btnEnter.label,GameGlobal.GangBattleModel.IsActive()){if(GameGlobal.GangBattleModel.CanAttack()||GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_GATE))this.durationAtkCD.visible=!1;else{var t=GameGlobal.GangBattleModel.myGBattleInfo.mAttackTime;this.durationAtkCD.SetColor(7222027),this.durationAtkCD.SetTextFormat("{0}后可攻击"),this.durationAtkCD.SetEndTime(t,DurationLabel.TIMETEXT_TYPE_MMSS),this.durationAtkCD.SetCallbackFunc(function(){e.durationAtkCD.visible=!1})}var i=GameGlobal.GangBattleModel.gRanksInfo.mGangRankInfoList||[];i.sort(function(e,t){return e.mDamageRank-t.mDamageRank});for(var o=0;3>o;o++){var n=i[o];this["labName"+(o+1)].text=n?o+1+"."+n.mGangName+".S"+n.mServerId:"",this["labData"+(o+1)].text=n?""+n.mDamage:""}var a=GameGlobal.GangBattleModel.gbGangGlobalInfo;this.labCount.text="同帮人数："+a.mPlayerCount;var r=GameGlobal.GangBattleModel.myGBattleInfo,s=(r.mMyGangRankInfo.mDamageRank||0)>0?r.mMyGangRankInfo.mDamageRank:"未排名";this.labMyRank.text="本帮排名："+s+"    "+(r.mMyGangRankInfo.mDamage||0)}},t.prototype.SetBossInfo=function(){if(GameGlobal.GangBattleModel.IsActive()){this.groupGateBlood.visible=!GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_GATE);var e=GameGlobal.GangBattleModel.bossInfo;this.progBlood.maximum=100,this.progBlood.value=e.mHp,this.progBloodNum.text=e.mHp+"%",this.progDef.maximum=100,this.progDef.value=e.mDefend,this.durationDefCD.visible=0==e.mDefend,this.progDefNum.visible=e.mDefend>0,this.progDefNum.text=e.mDefend+"%",this.durationDefCD.SetTextFormat("{0}后护盾恢复"),this.durationDefCD.SetEndTime(e.mRecoveryTime,DurationLabel.TIMETEXT_TYPE_MMSS)}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GBattleMainWin.prototype,"GBattleMainWin",["ICommonWindow"]);var GBattleOutsiderScieneWin=function(e){function t(){var t=e.call(this)||this;return t.mTimerStartFlag=!1,t.skinName="GBattleOutsiderSceneSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){GameGlobal.GangBattleTeamModel.SendGetMyTeamInfos(),this.observe(MessageDef.GANGBATTLE_UPDATE_MYINFO,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_GANGRANK,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_KINGINFO,this.UpdateKingInfo),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this.observe(MessageDef.GANGBATTLE_UPDATE_DURATION,this.StartDuration),this._AddClick(this.img1,this._OnClicked),this._AddClick(this.img2,this._OnClicked),this._AddClick(this.img3,this._OnClicked),this._AddClick(this.img4,this._OnClicked),this._AddClick(this.btnTeam,this._OnClick),this._AddClick(this.btnEnter,this._OnClick),this._AddClick(this.returnBtn,this._OnClick),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this.durationReborn1.SetTextFormat("{0}s后复活"),this.durationReborn2.SetTextFormat("{0}s后复活"),this.durationReborn3.SetTextFormat("{0}s后复活"),this.durationReborn4.SetTextFormat("{0}s后复活"),this.durationReborn1.SetColor(104196),this.durationReborn2.SetColor(104196),this.durationReborn3.SetColor(104196),this.durationReborn4.SetColor(104196),this.mTimerStartFlag=!1,this.StartDuration(),this.AdaptationGroup(),this.SetBossList(),this.SetOtherInfo()},t.prototype.OnClose=function(){},t.prototype.StartDuration=function(){if(!this.mTimerStartFlag){var e=GameGlobal.GangBattleModel.GetActiveEndTime();e>0&&(this.mTimerStartFlag=!0),this.durationLab.SetColor(Color.Green),this.durationLab.SetEndTime(e,DurationLabel.TIMETEXT_TYPE_MMSS)}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnTeam:GameGlobal.GangBattleTeamModel.mTeamInfo.HasTeam()?ViewManager.ins().open(GBattleTeamPanel):ViewManager.ins().open(GBattleTeamWin);break;case this.btnEnter:var t=GameGlobal.Config.GuildBattleBaseConfig.t_points;if(!GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_OUTSIDER))return void UserTips.ins().showTips("击杀天王或玩家，集够"+t+"积分可进入凌宵殿");GameGlobal.GangBattleModel.SendEnterNext();break;case this.returnBtn:WarnWin.show("是否退出当前副本？",function(){GameGlobal.CommonRaidModel.MapLeave(),GameGlobal.GangBattleModel.SendExitGBattle()},this)}},t.prototype._OnClicked=function(e){var t=parseInt(e.currentTarget.name);if(!GameGlobal.GangBattleModel.IsKingAlive(t))return void UserTips.ins().showTips("BOSS未复活");var i=GangBattleConst.GetKingConfig(t);GameGlobal.RaidMgr.mMapRaid.MoveOrder(t,i.pos[0],i.pos[1])},t.prototype.SetOtherInfo=function(){var e=GameGlobal.Config.GuildBattleBaseConfig.t_count;this.labTip.text="本帮进入"+e+"人后，全帮成员可直接进入";var t=GameGlobal.GangBattleModel.myGBattleInfo,i=GameGlobal.GangBattleModel.gbGangGlobalInfo;this.labCount.text="同帮人数："+i.mPlayerCount,this.labScore.text="积分："+(t.mMyGangRankInfo.mScore||0);var o=GameGlobal.GangBattleModel.gbPlayerGlobalInfo,n=o.mScore,a=GameGlobal.Config.GuildBattleBaseConfig.t_points,r=n>=a?Color.Green:Color.Red;this.labScoreTip.textFlow=TextFlowMaker.generateTextFlow("积分：|C:"+r+"&T:"+n+"|/"+a),this.labMemberCount.text="我的帮会进入数："+t.mPassCount,this.boxItem.SetScoreInfo();var s=GameGlobal.GangBattleModel.gRanksInfo.mGangRankInfoList||[];s.sort(function(e,t){return e.mScoreRank-t.mScoreRank});for(var l=0;3>l;l++){var c=s[l];this["labNum"+(l+1)].text=c?""+(l+1):"",this["labName"+(l+1)].text=c?c.mGangName+".S"+c.mServerId:"",this["labCount"+(l+1)].text=c?""+c.mPassCount:"",this["labData"+(l+1)].text=c?""+c.mScore:""}},t.prototype.SetBossList=function(){for(var e=GangBattleConst.GetKingList(),t=1,i=0,o=e;i<o.length;i++){var n=o[i];this["labBossName"+t]&&(this["img"+t].name=n.id,this["labBossName"+t].text=n.uititle,UIHelper.SetLinkStyleLabel(this["labBossName"+t]),this["labDifficulty"+t].text="("+n.des+")",this["labReward"+t].text="积分 * "+n.points),t++}this.UpdateKingInfo()},t.prototype.UpdateKingInfo=function(){for(var e=GangBattleConst.GetKingList(),t=1,i=0,o=e;i<o.length;i++){var n=o[i],a=GameGlobal.GangBattleModel.GetKingRebornTime(n.id);this["durationReborn"+t].visible=a>GameServer.serverTime,a>GameServer.serverTime&&this["durationReborn"+t].SetEndTime(a,DurationLabel.TIMETEXT_TYPE_ONLYSS),t++}},t.prototype.AdaptationGroup=function(){MiniChatPanel.UpdateViewPos(this.groupAdaptation),this.groupAdaptation.y-=300},t.LAYER_LEVEL=LayerManager.UI_GAME_MAP,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(GBattleOutsiderScieneWin.prototype,"GBattleOutsiderScieneWin");var GBattleRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(GBattleDamageRankPanel),TabView.CreateTabViewData(GBattleGangRankPanel),TabView.CreateTabViewData(GBattleHKRankPanel),TabView.CreateTabViewData(GBattleScoreRankPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.mCommonWindowBg.OnAdded(this,i)},t.NAME="排行",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GBattleRankWin.prototype,"GBattleRankWin");var GBattleScoreRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleRankSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.labDataTitle.text="积分",this.labRankDataTitle.text="积分：",this.list.itemRenderer=ScoreRankItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.UpdateContent=function(){},t.prototype.UpdatePlayerRank=function(e){var t=e.scorerank;t.sort(function(e,t){return e.rankData.scoreRank-t.rankData.scoreRank});var i=this.GetMyPlayerRankInfo(t);if(i)this.labMyRank.text=""+i.rankData.scoreRank,this.labMyData.text=""+i.rankData.score;else{var o=GameGlobal.GangBattleModel.gbPlayerGlobalInfo;this.labMyRank.text="未排名",this.labMyData.text=""+(o.mScore||0)}this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.OnOpen=function(){this.observe(MessageDef.GANGBATTLE_UPDATE_ALLPLAYERRANK,this.UpdatePlayerRank),GameGlobal.GangBattleModel.SendAllPlayerRank()},t.prototype.OnClose=function(){},t.prototype.GetMyPlayerRankInfo=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.dbid==GameGlobal.actorModel.actorID)return o}},t.NAME="积分排行",t}(BaseView);__reflect(GBattleScoreRankPanel.prototype,"GBattleScoreRankPanel",["ICommonWindowTitle"]);var ScoreRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.imgBg.visible=this.itemIndex%2==0;var e=this.data;this.labNo.text=""+e.rankData.scoreRank,this.labGangName.text=e.guildName+".S"+e.serverId,this.labName.text=""+e.name,this.labData.text=""+e.rankData.score},t}(eui.ItemRenderer);__reflect(ScoreRankItem.prototype,"ScoreRankItem");var GBattleTeamPanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.GangBattleTeamModel,t}return __extends(t,e),t.prototype.OnClickZaomu=function(){this.model.mTeamInfo.IsMyTeam()?(GameGlobal.GangBattleTeamModel.SendRecruit(),UserTips.InfoTip("已经发布招募信息")):GameGlobal.UserTips.showTips("您不是队长没有权限操作")},t}(GangMineMyTeamPanel);__reflect(GBattleTeamPanel.prototype,"GBattleTeamPanel");var GBattleTeamWin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=GameGlobal.GangBattleTeamModel,t.mMyTeamPanel=GBattleTeamPanel,t}return __extends(t,e),t}(GangMineTeamPanel);__reflect(GBattleTeamWin.prototype,"GBattleTeamWin");var GBattleTempleScieneWin=function(e){function t(){var t=e.call(this)||this;return t.mTimerStartFlag=!1,t.skinName="GBattleTempleSceneSkin",UIHelper.SetLinkStyleLabel(t.labView),UIHelper.SetLinkStyleLabel(t.labViewRank),t}return __extends(t,e),t.prototype.OnOpen=function(){GameGlobal.GangBattleTeamModel.SendGetMyTeamInfos(),this.observe(MessageDef.GANGBATTLE_UPDATE_BOSSINFO,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_MYINFO,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_GANGRANK,this.SetOtherInfo),this.observe(MessageDef.GANGBATTLE_UPDATE_PLAYERRANK,this.SetPlayerRankInfo),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this.observe(MessageDef.GANGBATTLE_UPDATE_DURATION,this.StartDuration),this.observe(MessageDef.GANGBATTLE_SHOW_GUARDTIP,this.SetGuardShowTip),this._AddClick(this.btnTeam,this._OnClicked),this._AddClick(this.btnReturn,this._OnClicked),this._AddClick(this.labView,this._OnClicked),this._AddClick(this.labViewRank,this._OnClicked),this._AddClick(this.btnArr,this._OnClicked),this._AddClick(this.btnInstruction,this._OnClicked),this._AddClick(this.btnFight,this._OnClicked),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this.mTimerStartFlag=!1,this.SetGuardShowTip(),this.StartDuration(),this.AdaptationGroup(!0),this.SetPlayerRankInfo(),this.SetOtherInfo()},t.prototype.OnClose=function(){},t.prototype.SetGuardShowTip=function(){var e=this,t=GameGlobal.GangBattleModel.mGuardShowTime;t&&(this.durationShowGuard.SetColor(Color.Green),this.durationShowGuard.SetTextFormat("{0}后神龙鼎出现"),this.durationShowGuard.SetCallbackFunc(function(){e.durationShowGuard.visible=!1}),this.durationShowGuard.SetEndTime(t))},t.prototype.StartDuration=function(){if(!this.mTimerStartFlag){var e=GameGlobal.GangBattleModel.GetActiveEndTime();e>0&&(this.mTimerStartFlag=!0),this.durationLab.SetColor(Color.Green),this.durationLab.SetEndTime(e,DurationLabel.TIMETEXT_TYPE_MMSS)}},t.prototype.SetPlayerRankInfo=function(){var e=GameGlobal.GangBattleModel.gbPlayerRanksInfo.mGBPlayerRankInfoList||[];e.sort(function(e,t){return e.mRankData.mKillRank-t.mRankData.mKillRank});for(var t=0;3>t;t++){var i=e[t];this["roleHead"+(t+1)]&&i&&(this["roleHead"+(t+1)].visible=!0,this["roleHead"+(t+1)].SetPlayerInfo(i,t+1))}},t.prototype.SetOtherInfo=function(){this.boxItem.SetScoreInfo();var e=GameGlobal.GangBattleModel.gRanksInfo.mGangRankInfoList||[];e.sort(function(e,t){return e.mScoreRank-t.mScoreRank});for(var t=0;3>t;t++){var i=e[t];this["labNum"+(t+1)].text=i?""+(t+1):"",this["labName"+(t+1)].text=i?i.mGangName+".S"+i.mServerId:"",this["labScore"+(t+1)].text=i?""+i.mScore:""}var o=GameGlobal.GangBattleModel.gbGangGlobalInfo;this.labCount.text="同帮人数："+o.mPlayerCount;var n=GameGlobal.GangBattleModel.myGBattleInfo;this.labRange.text="本帮积分："+(n.mMyGangRankInfo.mScore?n.mMyGangRankInfo.mScore:0)},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.btnTeam:GameGlobal.GangBattleTeamModel.mTeamInfo.HasTeam()?ViewManager.ins().open(GBattleTeamPanel):ViewManager.ins().open(GBattleTeamWin);break;case this.btnReturn:ViewManager.ins().open(GBattleExitTipWin);break;case this.labViewRank:ViewManager.ins().openIndex(GBattleRankWin,2);break;case this.labView:ViewManager.ins().openIndex(GBattleRankWin,1);break;case this.btnArr:this.ShowRankList(-1!=this.btnArr.$getScaleX());break;case this.btnInstruction:ViewManager.ins().open(ActivityDescPanel,GameGlobal.Config.GuildBattleBaseConfig.s_helpid);break;case this.btnFight:var t=GameGlobal.GangBattleModel.mGuardShowTime;if(!t)return;if(t>GameServer.serverTime)return void UserTips.ins().showTips("神龙鼎尚未出现，不可挑战");var i=GameGlobal.Config.GuildBattleBaseConfig.lboss_bronpos,o=GameGlobal.Config.GuildBattleBaseConfig.lbossid;GameGlobal.RaidMgr.mMapRaid.MoveOrder(o,i[0],i[1])}},t.prototype.AdaptationGroup=function(e){null!=e&&(MiniChatPanel.UpdateViewPos(this.groupAdaptation),this.groupAdaptation.y-=200,this.ShowRankList(!e))
},t.prototype.ShowRankList=function(e){this.btnArr.$setScaleX(e?-1:1),this.groupRank.visible=e},t.LAYER_LEVEL=LayerManager.UI_GAME_MAP,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(GBattleTempleScieneWin.prototype,"GBattleTempleScieneWin");var GBRoleHead=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.SetPlayerInfo=function(e,i){this.labNo.text=""+i,this.labNo.textColor=t.Color_Type[i-1],this.imgFace.source=ResDataPath.GetHeadImgName(e.mJob,e.mSex),this.labName.text=""+e.mName,this.labServer.text="S"+e.mServerId},t.Color_Type=[14352384,13793025,12845309],t}(eui.Component);__reflect(GBRoleHead.prototype,"GBRoleHead",["eui.UIComponent","egret.DisplayObject"]);var GangMineModel=function(e){function t(){var t=e.call(this)||this;return t.myInfo=new GangMineMyInfo,t.mineInfos={},t.mineRanks={},t.regNetMsg(S2cProtocol.sc_guildmine_mine_info,t.getGangMineInfo),t.regNetMsg(S2cProtocol.sc_guildmine_mine_one_info,t.getGangMineOneInfo),t.regNetMsg(S2cProtocol.sc_guildmine_mine_mystatus,t.getGangMineMyStatus),t.regNetMsg(S2cProtocol.sc_guildmine_score_rank_day,t.getGangMineScoreRankInfo),t.regNetMsg(S2cProtocol.sc_guildmine_rob_info,t.getGangMineRob),t}return __extends(t,e),t.prototype.getGangMineInfo=function(e){var t,i,o=0,n=this.mineTotalNum=e.mineinfos.length;for(o;n>o;o++)t=e.mineinfos[o],i=this.mineInfos[t.mineId],i?i.updateInfo(t):(i=new GangMineInfo,i.updateInfo(t),this.mineInfos[t.mineId]=i);MessageCenter.ins().dispatch(MessageDef.GANGMINE_UPDATE_INFO)},t.prototype.getGangMineOneInfo=function(e){var t=this.mineInfos[e.mineinfo.mineId];t&&t.updateInfo(e.mineinfo),MessageCenter.ins().dispatch(MessageDef.GANGMINE_UPDATE_INFO)},t.prototype.getGangMineMyStatus=function(e){this.myInfo.updateInfo(e),MessageCenter.ins().dispatch(MessageDef.GANGMINE_UPDATE_INFO)},t.prototype.getGangMineScoreRankInfo=function(e){var t,i,o=0,n=e.rankdatas.length;for(this.mineRanks[e.rankType]=[],o;n>o;o++)t=e.rankdatas[o],i=new GangMineRankInfo,i.rankType=e.rankType,i.updateInfo(t),this.mineRanks[e.rankType][o]=i;MessageCenter.ins().dispatch(MessageDef.GANGMINE_RANK_INFO)},t.prototype.getGangMineRob=function(e){WarnWin.show("您在矿山争夺中被【"+e.name+".S"+e.serverId+"】击败",this.revengeHandler,this,null,null,"normal",{btnName:"前往复仇"})},t.prototype.revengeHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.ActivityModel.activityList[ActivityModel.TYPE_GANGMINE]?ViewManager.ins().open(GangMinePanel):GameGlobal.UserTips.showTips("活动未开启")},t.prototype.sendGangMineScoreRank=function(e){var t=new Sproto.cs_guildmine_score_rank_request;t.rankType=e,this.Rpc(C2sProtocol.cs_guildmine_score_rank,t)},t.prototype.sendGangMineEnter=function(){this.Rpc(C2sProtocol.cs_guildmine_enter)},t.prototype.sendGangMineLeave=function(){this.Rpc(C2sProtocol.cs_guildmine_leave_mine)},t.prototype.sendGangMineForce=function(e){var t=new Sproto.cs_guildmine_force_join_request;t.mineId=e,this.Rpc(C2sProtocol.cs_guildmine_force_join,t,function(e){e.ret||GameGlobal.UserTips.showTips("您不是队长不能操作")},this)},t.prototype.sendGangMineDeatial=function(e){var t=new Sproto.cs_guildmine_mine_info_request;t.mineId=e,this.Rpc(C2sProtocol.cs_guildmine_mine_info,t)},t.prototype.sendGangMineProtect=function(e){var t=new Sproto.cs_guildmine_join_mine_request;t.mineId=e,this.Rpc(C2sProtocol.cs_guildmine_join_mine,t,function(e){e.ret&&GameGlobal.UserTips.showTips("成功加入采矿队列")},this)},t.prototype.sendGangMineCollect=function(){var e=new Sproto.cs_guildmine_gather_request;this.Rpc(C2sProtocol.cs_guildmine_gather,e,function(e){e.ret},this)},t.MINE_MAX_NUM=10,t.MINE_GUARD_NUM=3,t}(BaseSystem);__reflect(GangMineModel.prototype,"GangMineModel");var GangMineInfo=function(){function e(){this.status=0}return e.prototype.updateInfo=function(e){if(this.status=e.status,this.mineId=e.mineId,1!=e.status){this.guildName=e.guildName;var t=0,i=e.guard.length,o=void 0;for(this.guardList=[],t;i>t;t++)o=new GangMineGuardInfo,o.updateInfo(e.guard[t]),this.guardList[t]=o}},e}();__reflect(GangMineInfo.prototype,"GangMineInfo");var GangMineGuardInfo=function(){function e(){this.level=0,this.power=0,this.hp=0}return e.prototype.updateInfo=function(e){this.name=e.name,this.hp=e.hp,this.level=e.level,this.power=e.power,this.job=e.job,this.sex=e.sex},e}();__reflect(GangMineGuardInfo.prototype,"GangMineGuardInfo");var GangMineMyInfo=function(){function e(){this.status=0,this.attackTime=0,this.chainrate=0,this.gatherTime=0,this.score=0,this.rank=0}return e.prototype.updateInfo=function(e){this.status=e.status,this.attackTime=e.attackTime,this.chainrate=e.chainrate,this.gatherTime=e.gatherTime,this.mineId=e.mineId,this.score=e.guildScore,this.rank=e.guildRank},e}();__reflect(GangMineMyInfo.prototype,"GangMineMyInfo");var GangMineRankInfo=function(){function e(){this.guildId=0,this.serverId=0,this.score=0,this.rank=0}return e.prototype.updateInfo=function(e){this.guildId=e.guildId,this.guildName=e.guildName,this.rank=e.rank,this.score=e.score},e.prototype.getRankReward=function(){var e=GameGlobal.Config.RankRewardConfig[this.rankType][this.rank-1];return e?e.reward:[]},e}();__reflect(GangMineRankInfo.prototype,"GangMineRankInfo");var GangMineCrossRankPanel=function(e){function t(){var t=e.call(this)||this;return t.pageNum=4,t.curpage=1,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GangMineCrossRankSkin",this.commonWindowBg.SetTitle("跨服排名")},t.prototype.initData=function(){this.list.itemRenderer=GangMineRankItem,this.list.dataProvider=null,this.pageBtn.setPage(1),this.curpage=1,this.pageBtn.setMax(1)},t.prototype.pageChangeFun=function(e){this.curpage=e,this.list.dataProvider=new eui.ArrayCollection(this.getPageList(this.curpage))},t.prototype.getPageList=function(e){var t=0,i=this.rankInfos.length-(e-1)*this.pageNum,o=[];for(i>this.pageNum&&(i=this.pageNum),t;i>t;t++)o[t]=this.rankInfos[t+(e-1)*i];return o},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GANGMINE_RANK_INFO,this.updateContent),this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.pageChangeFun),GameGlobal.GangMineModel.sendGangMineScoreRank(2)},t.prototype.updateContent=function(){if(this.rankInfos=GameGlobal.GangMineModel.mineRanks[2],this.pageBtn.setPage(1),this.curpage=1,this.pageBtn.setMax(this.rankInfos.length/this.pageNum>>0),this.list.dataProvider=new eui.ArrayCollection(this.rankInfos),GameGlobal.actorModel.HasGuild()){var e=!1;for(var t in this.rankInfos)if(this.rankInfos[t].guildId==GameGlobal.actorModel.guildID){this.trank.text=this.rankInfos[t].rank+"",this.tscore.text=this.rankInfos[t].score+"分",e=!0;break}e||(this.trank.text="未上榜")}else this.tscore.text="0分",this.trank.text="未上榜"},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangMineCrossRankPanel.prototype,"GangMineCrossRankPanel");var AStarNode=function(){function e(e,t){this.nX=e,this.nY=t}return e}();__reflect(AStarNode.prototype,"AStarNode");var GangMinePanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.GangMineModel,t.curpage=1,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GangMinePanelSkin",this.commonWindowBg.SetTitle("矿山争夺")},t.prototype.initData=function(){for(var e=0;10>e;e++){var t=this["kuang"+e];switch(e){case 0:t.setType(1);break;case 1:case 2:case 3:case 4:t.setType(2);break;case 5:case 6:case 7:case 8:t.setType(3);break;case 9:t.setType(0)}}this.resetItem(),this.pageBtn.setPage(1),this.pageBtn.setMax(1)},t.prototype.resetItem=function(){this.roleGroup.touchEnabled=this.roleGroup.touchChildren=!1;var e=0,t=GangMineModel.MINE_MAX_NUM;for(e=0;t>e;e++)this["role"+e].visible=!1},t.prototype.pageChangeFun=function(e){this.curpage=e,this.showPageData(this.curpage),this.showOtherData()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddClick(this.ranKBtn,this.onClickHandler),this.AddClick(this.teamBtn,this.onClickHandler);var i=0,o=GangMineModel.MINE_MAX_NUM;for(i=0;o>i;i++){var n=this["kuang"+i];n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)}this.observe(MessageDef.GANGMINE_UPDATE_INFO,this.updateContent),this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.pageChangeFun),this.model.sendGangMineEnter()},t.prototype.onClickHandler=function(e){if(egret.is(e.currentTarget,"GangMineKuangItem")){var t=e.currentTarget;if(this.mineId=t.mineId,1==this.model.myInfo.status&&this.model.myInfo.mineId==this.mineId&&0==t.type)return void GameGlobal.UserTips.showTips("您已经在采矿中...");if(this.model.mineInfos[this.mineId].status>1&&this.model.myInfo.mineId!=this.mineId&&this.model.mineInfos[this.mineId].guildName==GameGlobal.actorModel.guildName){var i=this.model.mineInfos[this.mineId].guardList.length;if(i<GangMineModel.MINE_GUARD_NUM){var o=GameGlobal.GangMineTeamModel.mTeamInfo;o.HasTeam()?o.IsMyTeam()?i+o.members.length<=GangMineModel.MINE_GUARD_NUM?this.model.sendGangMineProtect(this.mineId):GameGlobal.UserTips.showTips("当前开采位置不足"):GameGlobal.UserTips.showTips("你不是队长无权限操作"):this.model.sendGangMineProtect(this.mineId)}else GameGlobal.UserTips.showTips("当前开采位置不足");return}switch(t.state){case 1:WarnWin.show("该矿山有一群小妖占领着，是否赶跑妖怪开始占领采矿？",this.sureHandler,this);break;case 2:this.model.sendGangMineDeatial(this.mineId),ViewManager.ins().open(GangMineTeamGuardPanel,this.mineId);break;case 3:case 4:GameGlobal.UserTips.showTips("该矿脉正在战斗中...");break;case 5:this.model.myInfo.mineId==this.mineId?(this.model.sendGangMineDeatial(this.mineId),ViewManager.ins().open(GangMineTeamGuardPanel,this.mineId)):GameGlobal.UserTips.showTips("该矿脉遭受到别帮攻击，暂时不能加入守护")}}else e.target==this.ranKBtn?ViewManager.ins().open(GangMineRankPanel):e.target==this.teamBtn&&(GameGlobal.GangMineTeamModel.mTeamInfo.HasTeam()?ViewManager.ins().open(GangMineMyTeamPanel):ViewManager.ins().open(GangMineTeamPanel))},t.prototype.sureHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.model.sendGangMineForce(this.mineId)},t.prototype.updateContent=function(){this.pageBtn.setPage(this.curpage),this.pageBtn.setMax(this.model.mineTotalNum/GangMineModel.MINE_MAX_NUM>>0),this.showPageData(this.curpage),this.showOtherData()},t.prototype.showOtherData=function(){this.titleTxt.text=this.curpage+"号矿山";var e=this.model.myInfo.attackTime-GameServer.serverTime;this.tcd.text=e>0?e+"秒":"无",e>0&&TimerManager.ins().doTimer(1e3,0,this.updateTimes,this),this.teamBtn.visible=2==this.model.myInfo.status,this.tliansou.text=this.model.myInfo.chainrate+"%",this.tscore.text=this.model.myInfo.score+"",this.trank.text=this.model.myInfo.rank+""},t.prototype.updateTimes=function(){var e=this.model.myInfo.attackTime-GameServer.serverTime;0>=e&&TimerManager.ins().remove(this.updateTimes,this),this.tcd.text=e>0?this.cdTime+"秒":"无"},t.prototype.showPageData=function(e){this.resetItem();var t=0,i=GangMineModel.MINE_MAX_NUM;for(t;i>t;t++){var o=this.model.mineInfos[t+1+(e-1)*i];this["kuang"+t].state=o.status,this["kuang"+t].mineId=o.mineId;var n=this["role"+t];10*e==o.mineId?o.mineId==this.model.myInfo.mineId&&(n.visible=!0,n.updateTieKuang(o.mineId)):(n.visible=!0,n.updateContent(o))}},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve(),this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangMinePanel.prototype,"GangMinePanel");var GangMineKuangItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=0,t.mineId=0,t.state=1,t}return __extends(t,e),t.prototype.setType=function(e){this.type=e,this.updateContent()},t.prototype.updateContent=function(){this.kuangImg.source=t.KUANG_TYPE[this.type]},t.KUANG_TYPE=["tiekuang","ui_hddt_bt_jinkuang","ui_hddt_bt_yinkuang","ui_hddt_bt_tongkuang"],t}(eui.Component);__reflect(GangMineKuangItem.prototype,"GangMineKuangItem");var GangMineRoleItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isTimering=!1,t}return __extends(t,e),t.prototype.updateContent=function(e){if(e.mineId==GameGlobal.GangMineModel.myInfo.mineId)return void this.updateTieKuang(e.mineId);var t=e.mineId<6?1:2;this.currentState="state"+t,this.group.visible=e.status>=2&&3!=e.status,this.group.visible&&(this.roleImg.source=ResDataPath.GetHeadImgName(e.guardList[0].job,e.guardList[0].sex),this.tname.text=e.guardList[0].name,this.tnum.text=e.guardList.length+"/"+GangMineModel.MINE_GUARD_NUM,this.tguild.text=e.guildName),this.fightingGroup.visible=e.status>2},t.prototype.updateTieKuang=function(e){this.currentState="state3",this.roleImg.source=ResDataPath.GetHeadImgName(GameGlobal.actorModel.job,GameGlobal.actorModel.sex),this.isTimering||(TimerManager.ins().doTimer(1e3,0,this.updateProgress,this),this.isTimering=!0,this.updateProgress())},t.prototype.updateProgress=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.GangMineModel.myInfo.gatherTime-GameServer.serverTime,o=GameGlobal.Config.GuildDiggingBaseConfig.needtime;this.bar.value=o-i,this.bar.maximum=o,this.timeTxt.text=o-i+"秒",0>=i&&(TimerManager.ins().remove(this.updateProgress,this),this.isTimering=!1,GameGlobal.GangMineModel.sendGangMineCollect())},t}(eui.Component);__reflect(GangMineRoleItem.prototype,"GangMineRoleItem");var GangMineRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMineRankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.list.dataProvider=null},t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.tname.text=e.guildName+".S"+e.serverId,this.tscore.text=e.score+"分",this.trank.text="第"+e.rank+"名";var t=e.getRankReward();t.length>0&&(this.list.dataProvider=new eui.ArrayCollection(t))}},t}(eui.ItemRenderer);__reflect(GangMineRankItem.prototype,"GangMineRankItem");var GangMineRankPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GangMineRankSkin",this.commonWindowBg.SetTitle("排名")},t.prototype.initData=function(){this.list.itemRenderer=GangMineRankItem,this.list.dataProvider=null},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GANGMINE_RANK_INFO,this.updateContent),GameGlobal.GangMineModel.sendGangMineScoreRank(1)},t.prototype.updateContent=function(){var e=GameGlobal.GangMineModel.mineRanks[1];this.list.dataProvider=new eui.ArrayCollection(e);var t=!1;for(var i in e)if(e[i].guildId==GameGlobal.actorModel.guildID){this.trank.text=e[i].rank+"",t=!0;break}t||(this.trank.text="未上榜")},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangMineRankPanel.prototype,"GangMineRankPanel");var GangMineTeamGuardPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GangMineTeamGuardPanelSkin",this.CommonDialog.title="提示"},t.prototype.initData=function(){this.list.itemRenderer=GangMineTeamRoleItem,this.list.dataProvider=null},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.CommonDialog.OnAdded(this),this.AddClick(this.cancelBtn,this.onClickHandler),this.AddClick(this.sureBtn,this.onClickHandler),this.AddClick(this.exitBtn,this.onClickHandler),this.mineId=e[0],this.observe(MessageDef.GANGMINE_UPDATE_INFO,this.updateContent),this.updateContent()},t.prototype.updateContent=function(){this.mineId==GameGlobal.GangMineModel.myInfo.mineId?this.currentState="myState":this.currentState="normal";for(var e=GameGlobal.GangMineModel.mineInfos[this.mineId].guardList,t=[],i=0;i<e.length;i++)t[i]={guardInfo:e[i],mInfo:null,mIndex:0};this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.onClickHandler=function(e){this.CloseSelf(),e.target==this.sureBtn?GameGlobal.GangMineModel.sendGangMineForce(this.mineId):e.target==this.exitBtn&&GameGlobal.GangMineModel.sendGangMineLeave()},t.prototype.OnClose=function(){this.removeObserve(),this.removeEvents(),this.CommonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangMineTeamGuardPanel.prototype,"GangMineTeamGuardPanel");var MapGrid=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t._nodes=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"numCols",{get:function(){return this._numCols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numRows",{get:function(){return this._numRows},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e,t){return this._nodes[this._numCols*t+e]||0},t.prototype.isWalkableTile=function(e,t){return!((1&this.getNode(e,t))>0)},t.prototype.IsHide=function(e,t){return(2&this.getNode(e,t))>0},t.prototype.destruct=function(){this.clearNodes()},t.prototype.initGrid=function(e,t,i){this._nodes&&this.clearNodes(),this._numRows=e,this._numCols=t,this._nodes=i||[]},t.prototype.clearNodes=function(){this._nodes.length=0},t.CELL_SIZE=64,t}(egret.Sprite);__reflect(MapGrid.prototype,"MapGrid");var GangMineTeamRoleItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMineTeamRoleItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.kickBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)},t.prototype.onClickHandler=function(e){var t=Util.GetParentByType(this,GangMineMyTeamPanel);t?t.model.SendKick(1,this.memberId):console.error("not parent !!!")},t.prototype.dataChanged=function(){if(this.data){var e=this.data;if(e.guardInfo){var t=e.guardInfo;this.teamImg.visible=this.kickBtn.visible=!1,this.iconImg.source=ResDataPath.GetHeadImgName(t.job,t.sex),this.bloodBar.width=188*(t.hp/100),this.tname.text=t.name,this.tpower.text=t.power+"",this.tlevel.text="Lv."+t.level}else if(e.mInfo){var i=e.mInfo,o=i.members[e.mIndex];this.memberId=o.dbid,this.teamImg.visible=i.leaderid==this.memberId,this.kickBtn.visible=i.IsMyTeam()&&i.leaderid!=this.memberId,this.iconImg.source=ResDataPath.GetHeadImgName(o.job,o.sex),this.tname.text=o.name,this.tpower.text=o.power+"",this.tlevel.text="Lv."+o.level}}},t}(eui.ItemRenderer);__reflect(GangMineTeamRoleItem.prototype,"GangMineTeamRoleItem");var GBattleScoreWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GBattleScoreListSkin",t.commonWindowBg.SetTitle("积分奖励"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GBattleScoreItem,this.UpdateContent()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANGBATTLE_UPDATE_MYINFO,this.UpdateContent),this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.UpdateContent=function(){var e=GangBattleConst.GetScoreList(),t=function(e){var t=e.id;return GameGlobal.GangBattleModel.HasScoreRewardGain(t)?t+1e3:GameGlobal.GangBattleModel.CanScoreRewardGain(t)?t-1e3:t};e.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(e)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GBattleScoreWin.prototype,"GBattleScoreWin",["ICommonWindow"]);var GBattleScoreItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase,this.btnGain.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.list.dataProvider=new eui.ArrayCollection(e.showitem),this.imgGained.visible=GameGlobal.GangBattleModel.HasScoreRewardGain(e.id),this.labUndone.visible=!GameGlobal.GangBattleModel.CanScoreRewardGain(e.id),this.btnGain.visible=!this.imgGained.visible&&!this.labUndone.visible;var t="|C:0x019704&T:【积分礼包】|C:0x6e330b&T:(积分达到"+e.needpoints+"可领取)|";this.labText.textFlow=TextFlowMaker.generateTextFlow(t);var i=GameGlobal.GangBattleModel.gbPlayerGlobalInfo,o=i.mScore,n="";n=o>=e.needpoints?"|C:0x019704&T:"+o:"|C:0xdb0000&T:"+o,this.labScore.textFlow=TextFlowMaker.generateTextFlow(n+"|C:0x6e330b&T:/"+e.needpoints+"|")},t.prototype._OnBtnClick=function(e){GameGlobal.GangBattleModel.SendGainScoreAward(this.data.id)},t}(eui.ItemRenderer);__reflect(GBattleScoreItem.prototype,"GBattleScoreItem");var CloudNineModel=function(e){function t(){var t=e.call(this)||this;return t.monsterId={},t.regNetMsg(S2cProtocol.sc_climb_score_info,t.getGoodsSucceed),t.regNetMsg(S2cProtocol.sc_climb_all_rank,t.getAllRank),t.regNetMsg(S2cProtocol.sc_climb_curr_rank,t.getLocalRank),t.regNetMsg(S2cProtocol.sc_climb_refresh_mon,t.refreshMonsters),t.regNetMsg(S2cProtocol.sc_climb_fighting_change,t.updataFightingState),t.regNetMsg(S2cProtocol.sc_climb_info,t.getSceneInfo),t.regNetMsg(S2cProtocol.sc_climb_report,t.getEndAwardPanelData),t}return __extends(t,e),t.prototype.checkPk=function(e){for(var t=0;t<this.fighting.length;t++)if(this.fighting[t]==e)return!0;return!1},t.prototype.addfightingIcon=function(){var e=GameGlobal.RaidMgr.mMapRaid.mEntityList;for(var t in e)e[t].ChageStatus(EntityStatusView.NONE);for(var i=0;i<this.fighting.length;i++)e[this.fighting[i]]&&e[this.fighting[i]].ChageStatus(EntityStatusView.ATK);e[GameGlobal.GameLogic.actorModel.actorID].ChageStatus(EntityStatusView.NONE)},t.prototype.getActivityTime=function(){var e=GameGlobal.Config.ClimbTowerBaseConfig.opentime.endtime,t=e.indexOf(":"),i=e.substr(0,t),o=e.substr(t+1,e.length),n=new Date(1e3*GameServer.serverTime);n.setHours(i,o,0,0);var a=n.getTime()/1e3;return a},t.prototype.getMonsterServersId=function(e){return null!=this.monsterId[e]?this.monsterId[e]:void 0},t.prototype.sendCrimbJoin=function(){var e=new Sproto.cs_crimb_join_request;this.Rpc(C2sProtocol.cs_crimb_join,e,this.getJoinSucceed,this)},t.prototype.getJoinSucceed=function(e){e.ret},t.prototype.sendLeaveTime=function(){var e=Sproto.cs_climb_leave_time_request;this.Rpc(C2sProtocol.cs_climb_leave_time,e,this.getLeaveTime,this)},t.prototype.getLeaveTime=function(e){var t=e.time+GameGlobal.Config.ClimbTowerBaseConfig.cd-GameServer.serverTime;0>=t?GameGlobal.ActivityModel.sendActivityEnter(ActivityModel.TYPE_CLOUD_NINE):GameGlobal.UserTips.showTips(t+"秒后可以进入")},t.prototype.sendPk=function(e){var t=new Sproto.cs_crimb_pk_request;t.targetid=e,this.Rpc(C2sProtocol.cs_crimb_pk,t)},t.prototype.sendGetGoods=function(){var e=new Sproto.cs_climb_get_reward_request;this.Rpc(C2sProtocol.cs_climb_get_reward,e)},t.prototype.getGoodsSucceed=function(e){this.score=e.score,this.rewardsocre=e.rewardsocre,MessageCenter.ins().dispatch(MessageDef.CLOUD_NINE_GIFT_REFRES)},t.prototype.sendLocalRank=function(){var e=new Sproto.cs_climb_curr_rank_request;this.Rpc(C2sProtocol.cs_climb_curr_rank,e)},t.prototype.getLocalRank=function(e){MessageCenter.ins().dispatch(MessageDef.CLOUD_NINE_RANK,e),this.rankType=CloudNineRankType.local},t.prototype.sendAllRank=function(){var e=new Sproto.cs_climb_all_rank_request;this.Rpc(C2sProtocol.cs_climb_all_rank,e)},t.prototype.getAllRank=function(e){MessageCenter.ins().dispatch(MessageDef.CLOUD_NINE_RANK,e),this.rankType=CloudNineRankType.legendOfEmpire},t.prototype.sendLeave=function(){var e=new Sproto.cs_climb_leave_request;this.Rpc(C2sProtocol.cs_climb_leave,e)},t.prototype.refreshMonsters=function(e){if(e.flag){for(var t in this.monsterId)GameGlobal.RaidMgr.mMapRaid.RemoveEntity(parseInt(t));this.monsterId={}}else for(var i=0;i<e.monsters.length;i++)this.fighting.splice(this.fighting.indexOf(e.monsters[i].id),1);for(var i=0;i<e.monsters.length;i++){var o=GameGlobal.RaidMgr.mMapRaid.CreateMonster(e.monsters[i].monsterid,e.monsters[i].x,e.monsters[i].y);this.monsterId[o.GetHandle()]=e.monsters[i].id}},t.prototype.updataFightingState=function(e){e.isfighting?this.fighting.push(e.dbid):this.fighting.splice(this.fighting.indexOf(e.dbid),1),this.addfightingIcon()},t.prototype.getSceneInfo=function(e){this.fighting=e.fighting,this.score=e.score,this.rewardsocre=e.rewardsocre,MessageCenter.ins().dispatch(MessageDef.CLOUD_NINE_SCENE_INIT),this.addfightingIcon(),this.monsterId={};for(var t=0;t<e.monsters.length;t++){var i=GameGlobal.RaidMgr.mMapRaid.CreateMonster(e.monsters[t].monsterid,e.monsters[t].x,e.monsters[t].y);this.monsterId[i.GetHandle()]=e.monsters[t].id}},t.prototype.getEndAwardPanelData=function(e){if(e){var t=new activityEndAwardData;t.award=e.rewards,t.paneltitle="九重天",e.sharedata.shows&&(t.shows=e.sharedata.shows),ViewManager.ins().open(ActivityEndAwardPanel,t)}},t}(BaseSystem);__reflect(CloudNineModel.prototype,"CloudNineModel");var CloudNineRankType;!function(e){e[e.local=1]="local",e[e.legendOfEmpire=2]="legendOfEmpire"}(CloudNineRankType||(CloudNineRankType={}));var CloudNineRankPanel=function(e){function t(){var t=e.call(this)||this;return t.tab=[{type:CloudNineRankType.local,name:"排行"},{type:CloudNineRankType.legendOfEmpire,name:"周排行"}],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CloudNineRankSkin"},t.prototype.initData=function(){GameGlobal.MessageCenter.addListener(MessageDef.CLOUD_NINE_RANK,this.UpdateContent,this),this.list.itemRenderer=CloudNineRankItem,this.list.dataProvider=null,this.tabList.itemRenderer=WindowTabBarItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddItemClick(this.tabList,this.itemClick),e[0]==CloudNineRankType.local?(this.currentState="local",this.commonWindowBg.SetTitle("排名"),GameGlobal.CloudNineModel.sendLocalRank()):e[0]==CloudNineRankType.legendOfEmpire?(this.currentState="legendOfEmpire",this.commonWindowBg.SetTitle("跨服排名"),GameGlobal.CloudNineModel.sendLocalRank(),this.topTipsTxt.text="每周一根据区服排名累计积分，发放排名奖励"):UserTips.ins().showTips("未定义类型"),CommonUtils.addLableStrokeColor(this.topTipsTxt,4587529,3),this.tabList.dataProvider=new eui.ArrayCollection(this.tab),this.tabList.validateNow(),this.tabList.selectedIndex=0},t.prototype.UpdateContent=function(e){GameGlobal.CloudNineModel.rankType==CloudNineRankType.legendOfEmpire&&0!=e.ranklist.length&&this.roleShowpanel.SetShowImage(e),this.dataArray=new eui.ArrayCollection;for(var t=[],i=GameGlobal.Config.ClimbTowerRewardConfig[GameGlobal.CloudNineModel.rankType],o=0,n=i;o<n.length;o++){var a=n[o];if(!(a.min<=e.ranklist.length))break;t.push(e.ranklist[a.min-1])}for(var r=0;r<t.length;r++){var s={};s=t[r],s.king=e.king,this.dataArray.addItem(s)}this.list.dataProvider=this.dataArray;var l=!1;for(var c in e.ranklist)if(e.ranklist[c].name==GameGlobal.actorModel.name){this.trank.text=e.ranklist[c].rank+"",l=!0;break}l||(this.trank.text="未上榜")},t.prototype.itemClick=function(e){this.roleShowpanel.ClearCache(),this.roleShowpanel.SetTitle(""),this.tabList.selectedItem.type==CloudNineRankType.local?(this.commonWindowBg.SetTitle("排名"),GameGlobal.CloudNineModel.sendLocalRank(),this.topTipsTxt.text="根据活动累计积分排名，发放排名奖励"):this.tabList.selectedItem.type==CloudNineRankType.legendOfEmpire&&(this.commonWindowBg.SetTitle("跨服排名"),GameGlobal.CloudNineModel.sendAllRank(),this.topTipsTxt.text="每周一根据区服排名累计积分，发放排名奖励"),this.list.dataProvider=null},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(CloudNineRankPanel.prototype,"CloudNineRankPanel");var CloudNineRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="CloudNineRankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.list.dataProvider=null},t.prototype.dataChanged=function(){if(this.data){this.tname.text=this.data.name+".S"+this.data.serverid,this.tscore.text=this.data.score+"分",this.trank.text="第"+this.data.rank+"名",this.chenghaoImg.visible=this.data.dbid==this.data.king;var e=GameGlobal.Config.ClimbTowerRewardConfig[GameGlobal.CloudNineModel.rankType],t=GameGlobal.Config.ClimbTowerRewardConfig[GameGlobal.CloudNineModel.rankType][this.data.rank-1];for(var i in e)if(this.data.rank>=e[i].min&&this.data.rank<e[i].max){t=e[i];break}t&&(this.list.dataProvider=new eui.ArrayCollection(t.reward)),t.min!=t.max&&(this.tname.text="第"+t.min+"-"+t.max+"名",this.tscore.text="奖励",this.trank.text="第"+t.min+"-"+t.max+"名")}},t}(eui.ItemRenderer);__reflect(CloudNineRankItem.prototype,"CloudNineRankItem");var CloudNineSceneView=function(e){function t(){var t=e.call(this)||this;t.nextGiftScore=0,t.score=0,t.maxScore=0,t.skinName="CloudNineSceneSkin";var i=GameGlobal.Config.ClimbTowerBaseConfig.scoretask;for(var o in i)t.maxScore=i[o].score;return t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.CLOUD_NINE_GIFT_REFRES,this.RefresTaskTraceBtn),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this._AddClick(this.manualBtn,this._OnClick),this._AddClick(this.rankBtn,this._OnClick),this._AddClick(this.taskTraceBtn,this._OnClick);var e=GameGlobal.CloudNineModel.getActivityTime();this.counterLabel.SetColor(Color.Green),this.counterLabel.SetEndTime(e,DurationLabel.TIMETEXT_TYPE_MMSS),this.RefreshHeadImg(),this.powerLabel.text=GameLogic.ins().actorModel.power.toString();var t=GameGlobal.actorModel.level||0;this.lbLev.text="lv."+t,this.lbName.text=GameGlobal.actorModel.name,this.UpdataContent()},t.prototype.UpdataContent=function(){this.lvTxt.text=GameGlobal.Config.MapConfig[GameMap.fubenID].name,this.AdaptationGroup(),this.RefresTaskTraceBtn()},t.prototype.AdaptationGroup=function(){MiniChatPanel.UpdateViewPos(this.groupAdaptation),this.groupAdaptation.y-=300},t.prototype.RefresTaskTraceBtn=function(){var e=GameGlobal.CloudNineModel.score,t=GameGlobal.CloudNineModel.rewardsocre;this.score=e,this.nextGiftScore=t;var i=GameGlobal.Config.ClimbTowerBaseConfig.scoretask,o=GameGlobal.Config.ItemConfig;for(var n in i)i[n].score==t&&(this.giftBagTxt.textColor=ItemBase.GetColorByQuality(o[i[n].item].quality),this.giftBagTxt.text=GameGlobal.Config.ItemConfig[i[n].item].name);this.integralTxt.textFlow=TextFlowMaker.generateTextFlow((this.score>=t?"|C:"+Color.Green+"&T:":"|C:"+Color.Red+"&T:")+this.score+"|C:"+Color.Green+"&T:/"+t),this.score>=i[i.length-1].score&&(-1!=this.nextGiftScore?(this.giftBagTxt.textColor=ItemBase.GetColorByQuality(o[i[i.length-1].item].quality),this.giftBagTxt.text=GameGlobal.Config.ItemConfig[i[i.length-1].item].name,this.giftTipsTxt.text="奖励："):(this.giftBagTxt.textColor=Color.Red,this.giftBagTxt.text="积分目标已全部达成",this.integralTxt.text=this.score+"/"+i[i.length-1].score,this.giftTipsTxt.text=""))},t.prototype.OnClose=function(){this.removeObserve(),TimerManager.ins().removeAll(this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.manualBtn:ViewManager.ins().open(ActivityDescPanel,GameGlobal.Config.ClimbTowerBaseConfig.tips);break;case this.rankBtn:ViewManager.ins().open(CloudNineRankPanel,CloudNineRankType.local);break;case this.taskTraceBtn:this.score>=this.nextGiftScore?-1!=this.nextGiftScore?GameGlobal.CloudNineModel.sendGetGoods():GameGlobal.UserTips.showTips("积分目标已全部达成"):GameGlobal.UserTips.showTips("积分不足")}},t.prototype.RefreshHeadImg=function(){var e=SubRoles.ins().GetRoleData();e&&(this.face.source=ResDataPath.GetHeadImgName(e.job,e.sex))},t.LAYER_LEVEL=LayerManager.UI_BATTLE,t}(BaseEuiView);__reflect(CloudNineSceneView.prototype,"CloudNineSceneView");var ActivityRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ActivityRewardShowPanel",t.mIdx=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ActivityAwardShowItem},t.prototype.UpdateContent=function(){this.imgShow.source=this.mContext.GetImgSource();var e=this.mContext.GetAwardList(this.mIdx);
this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.OnOpen=function(){this.UpdateContent()},t.prototype.OnClose=function(){},t.NAME="奖励预览",t}(BaseView);__reflect(ActivityRewardPanel.prototype,"ActivityRewardPanel",["ICommonWindowTitle"]);var ActivityAwardShowItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName},t.prototype.dataChanged=function(){var e=this.data;this.labText.text=e.name,this.list.dataProvider=new eui.ArrayCollection(e.showitem)},t}(eui.ItemRenderer);__reflect(ActivityAwardShowItem.prototype,"ActivityAwardShowItem");var ActivityRankRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.mIdx=1,t}return __extends(t,e),t.NAME="排名奖励",t}(ActivityRewardPanel);__reflect(ActivityRankRewardPanel.prototype,"ActivityRankRewardPanel");var ActivityDragonRankPanel=function(e){function t(){var t=e.call(this)||this;return t.mIdx=2,t}return __extends(t,e),t.NAME="神龙奖励",t}(ActivityRewardPanel);__reflect(ActivityDragonRankPanel.prototype,"ActivityDragonRankPanel");var ActivityRewardShowWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.Open=function(e){ViewManager.ins().open(t,0,e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.mType=e[1];var o=[TabView.CreateTabViewData(ActivityRewardPanel,{mContext:this}),TabView.CreateTabViewData(ActivityRankRewardPanel,{mContext:this})];this.mType==ActivityModel.TYPE_GANG_BATTLE&&o.push(TabView.CreateTabViewData(ActivityDragonRankPanel,{mContext:this})),this.mCommonWindowBg.SetTabView(o),this.mCommonWindowBg.OnAdded(this,i)},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.GetAwardList=function(e){return 0==e?ActivityRewardShowConst.GetAwardListByActivityType(this.mType):1==e?ActivityRewardShowConst.GetRankAwardListByActivityType(this.mType):2==e?ActivityRewardShowConst.GetDragonRankAwardListByActivityType(this.mType):void 0},t.prototype.GetImgSource=function(){return ActivityRewardShowConst.GetImageSourceByActivityType(this.mType)},t.NAME="奖励预览",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ActivityRewardShowWin.prototype,"ActivityRewardShowWin");var KaiFuActivityWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL_NO_TAB,t}return __extends(t,e),t.Show=function(e,i){void 0===e&&(e=null),void 0===i&&(i=!0);var o=null;e&&(o={val:e,isId:i}),ViewManager.ins().open(t,o)},t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(KaiFuActivityPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,0,e[0]),this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_DABIAO_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_IS_GET_AWARDS,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_RACE_HISTORY,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,GameGlobal.ActivityKaiFuModel.RedPointAdvanced()||GameGlobal.ActivityKaiFuModel.RedPointTarget())},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(KaiFuActivityWin.prototype,"KaiFuActivityWin");var DailyChargeGiftWin=function(e){function t(){var t=e.call(this)||this;return t.mActivityId=28,t.skinName="DailyChargeGiftSkin",t._AddClick(t.btnBuy,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="每日豪礼",this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.mActivityId),t=e.runday,i=e.GetConfig()[t-1];return this.list.dataProvider=new eui.ArrayCollection(i.gift),this.labChargeTip.text="今日已充值："+e.recharge+"元",4==e.record[t-1]?(this.btnBuy.label="已领取",void(this.btnBuy.enabled=!1)):void(this.btnBuy.label=i.recharge>e.recharge?"前往充值":"领取奖励")},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.mActivityId),i=t.runday,o=t.GetConfig()[i-1];return o.recharge>t.recharge?(RechargeWin.Open(),void this.CloseSelf()):void GameGlobal.ActivityKaiFuModel.sendReward(this.mActivityId,i)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DailyChargeGiftWin.prototype,"DailyChargeGiftWin");var DailyFirstChargeWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="DailyFirstChargeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBaseNotName,this.itemList.dataProvider=null;var e=GameGlobal.RechargeModel.dailyId,i=GameGlobal.Config.DailyrechargeConfig[e],o=[];if(t.list=[],i){for(var n in i)o.push(1==i[n].recharge?"充任意金额":"充"+i[n].recharge+"元"),t.list.push(i[n]);this.tabBar.dataProvider=new eui.ArrayCollection(o),this.tabBar.itemRenderer=BtnTab4Item,this.tabBar.selectedIndex=0}},t.prototype.onClick=function(e){"充点小钱"==this.chargeBtn.label?(this.CloseSelf(),RechargeWin.Open()):GameGlobal.RechargeModel.sendRechargeDailyReward(this.tabBar.selectedIndex+1)},t.prototype.onItemClick=function(e){this.updateContent()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.dialogMask,this.CloseSelf),this.AddClick(this.dialogCloseBtn,this.CloseSelf),this.AddClick(this.chargeBtn,this.onClick),this.AddItemClick(this.tabBar,this.onItemClick),this.observe(MessageDef.RECHARGE_DAILY_UPDATE,this.updateContent),this.updateContent()},t.prototype.updateContent=function(){UIHelper.ListRefresh(this.tabBar),this.itemList.dataProvider=new eui.ArrayCollection(t.list[this.tabBar.selectedIndex].reward);var e=GameGlobal.RechargeModel.dailyRechare;this.chargeTxt.text="今日已充值"+e+"元";var i=GameGlobal.RechargeModel.dailyReward;UIHelper.ShowRedPoint(this.chargeBtn,!1),BitUtil.Has(i,this.tabBar.selectedIndex)?(this.chargeBtn.label="已领取",this.chargeBtn.enabled=!1):(this.chargeBtn.enabled=!0,e>=t.list[this.tabBar.selectedIndex].recharge?(this.chargeBtn.label="领 取",UIHelper.ShowRedPoint(this.chargeBtn,!0)):this.chargeBtn.label="充点小钱")},t.LAYER_LEVEL=LayerManager.UI_Popup,t.list=[],t}(BaseEuiView);__reflect(DailyFirstChargeWin.prototype,"DailyFirstChargeWin");var BtnTab4Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=GameGlobal.RechargeModel.dailyReward,i=GameGlobal.RechargeModel.dailyRechare;i>=DailyFirstChargeWin.list[this.itemIndex].recharge&&(this.redPoint.visible=!BitUtil.Has(t,this.itemIndex))},t}(eui.ItemRenderer);__reflect(BtnTab4Item.prototype,"BtnTab4Item");var RechargeFeedbackWin=function(e){function t(){var t=e.call(this)||this;return t.mActivityId=29,t.mCurIdx=0,t.skinName="RechargeFeedbackSkin",t.commonWindowBg.SetTitle("累充回馈"),t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,140),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBaseNotName,this.list.itemRenderer=RechargeFeedbackItem,this.itemList.dataProvider=new eui.ArrayCollection([]),this.list.dataProvider=new eui.ArrayCollection([]),this._AddClick(this.btnBuy,this._OnClicked),this._AddItemClick(this.list,this._OnItemTap)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.commonWindowBg.OnAdded(this);var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.mActivityId),o=i.GetConfig();this.list.dataProvider=new eui.ArrayCollection(o),this.list.selectedIndex=0,this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.list),this.UpdateBtnRedPoint();var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.mActivityId);this.labCharge.text=e.recharge+"元",this.duration.SetColor(104196),this.duration.SetEndTime(e.endTime,DurationLabel.TIMETEXT_TYPE_DDHH_HHMMSS);var t=e.GetConfig()[this.mCurIdx];return this.itemList.dataProvider=new eui.ArrayCollection(t.rewards),this.btnBuy.enabled=4!=e.record[this.mCurIdx],4==e.record[this.mCurIdx]?void(this.btnBuy.label="已领取"):void(this.btnBuy.label=e.recharge>=t.value?"领取奖励":"前往充值")},t.prototype._OnItemTap=function(e){this.mCurIdx=e.itemIndex,this.UpdateContent()},t.prototype._OnClicked=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.mActivityId),t=e.GetConfig()[this.mCurIdx];return e.recharge>=t.value?void GameGlobal.ActivityKaiFuModel.sendReward(this.mActivityId,t.index):void RechargeWin.Open()},t.prototype.UpdateBtnRedPoint=function(){for(var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.mActivityId),t=e.GetConfig(),i=[],o=0,n=t;o<n.length;o++){var a=n[o];i.push(e.canGetRecordByIndex(a.index))}this.mListLRBtnCtrl.SetRedPointList(i),this.mListLRBtnCtrl.OnRefresh()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RechargeFeedbackWin.prototype,"RechargeFeedbackWin",["ICommonWindow"]);var RechargeFeedbackItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.labDesc.text=e.des.replace("%s",""+e.value);var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(29);this.redPoint.visible=t.canGetRecordByIndex(e.index)},t}(eui.ItemRenderer);__reflect(RechargeFeedbackItem.prototype,"RechargeFeedbackItem");var GrowUpModel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.IsRedPoint=function(){return this.checkFirstChargeRedPoint()?!0:this.checkGrowUpRedPoint()?!0:this.checkInvestmentRedPoint()?!0:!1},t.prototype.checkFirstChargeRedPoint=function(){var e=GameGlobal.RechargeModel.rechargeNum;if(0==e)return!1;var t=GameGlobal.Config.FirstRechargeConfig;for(var i in t)if(e>=t[i].recharge&&!GameGlobal.RechargeModel.GetFirstRewardState(t[i].id))return!0;return!1},t.prototype.checkInvestmentRedPoint=function(){return!1},t.prototype.checkGrowUpRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(11);return e?e.hasReward():!1},t.prototype.checkConsumptionRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(13);return e?e.hasReward():!1},t}(BaseSystem);__reflect(GrowUpModel.prototype,"GrowUpModel");var GrowUpWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.GetViews=function(){var e=[],t=GameGlobal.RechargeModel.rechargeNum;if(0==t)e.push(FirstChargePanel);else{var i=GameGlobal.Config.FirstRechargeConfig,o=!1;for(var n in i)if(!GameGlobal.RechargeModel.GetFirstRewardState(i[n].id)){o=!0;break}o&&e.push(FirstChargePanel)}var a=GameGlobal.ActivityKaiFuModel.GetActivityDataById(11);a&&a.isOpenActivity()?e.push(GrowUpPanel):a&&a.canReward()&&e.push(GrowUpPanel);var r=GameGlobal.ActivityKaiFuModel.GetActivityDataById(12);return r&&r.isOpenActivity()?e.push(InvestmentPlanPanel):r&&r.canReward()&&e.push(InvestmentPlanPanel),e},t.prototype.childrenCreated=function(){var e=t.GetViews();this.views=[];for(var i=0,o=e;i<o.length;i++){var n=o[i];this.views.push(TabView.CreateTabViewData(n))}this.commonWindowBg.SetTabView(this.views)},t.prototype.OnOpenIndex=function(e){switch(e){case 1:if(Deblocking.Check(DeblockingType.TYPE_106,!0))return!0;break;case 2:if(Deblocking.Check(DeblockingType.TYPE_107,!0))return!0;break;case 3:if(Deblocking.Check(DeblockingType.TYPE_108,!0))return!0}return!0},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.RECHARGE_FIRST_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.CheckTalRedPoint(0),this.commonWindowBg.CheckTalRedPoint(1),this.commonWindowBg.CheckTalRedPoint(2),this.commonWindowBg.CheckTalRedPoint(3)},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.openCheck=function(){var e=t.GetViews();return e&&e.length?!0:(UserTips.InfoTip("已经首充"),!1)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GrowUpWin.prototype,"GrowUpWin");var ConsumptionPanel=function(e){function t(){var t=e.call(this)||this;return t._activityId=13,t.lists=[],t.skinName="ConsumptionPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ConsumptionItem,this.itemList.dataProvider=null,this.lists=GameGlobal.Config.ActivityType25Config[this._activityId],this.itemList.dataProvider=new eui.ArrayCollection(this.lists)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent)},t.prototype.UpdateContent=function(){var e=this;if(this._activityData=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),this._activityData){this.ingotTxt.text=this._activityData.money+"元宝";var t=function(t){var i=BitUtil.Has(e._activityData.reward,t.index);return i?t.index+1e4:t.index};this.lists.sort(function(e,i){return t(e)-t(i)}),UIHelper.ListRefresh(this.itemList)}TimerManager.ins().remove(this.updateTime,this),this.AddTimer(1e3,0,this.updateTime),this.updateTime()},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._activityData?this.timeTxt.textFlow=TextFlowMaker.generateTextFlow(this._activityData.getRemindTimeString()):this.timeTxt.text="活动未开启"},t.RedPointCheck=function(){return GameGlobal.GrowUpModel.checkConsumptionRedPoint()},t.NAME="消费有礼",t}(BaseView);__reflect(ConsumptionPanel.prototype,"ConsumptionPanel",["ICommonWindowTitle"]);var ConsumptionItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.rewardList.itemRenderer=ItemBaseNotName,this.rewardList.dataProvider=null,this.rewardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCkick,this)},t.prototype.onCkick=function(e){GameGlobal.ActivityKaiFuModel.sendReward(13,this.data.index)},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){var t=this.data;this.descTxt.text="消费"+t.cost+"元宝",this.rewardList.dataProvider=new eui.ArrayCollection(t.item);var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(13);if(i)if(i.money<t.cost)this.levelTxt.text="未达成",this.levelTxt.visible=!0,this.rewardBtn.visible=this.rewardImg.visible=!1;else{var o=BitUtil.Has(i.reward,t.index);UIHelper.ShowRedPoint(this.rewardBtn,!o),this.rewardImg.visible=o,this.rewardBtn.visible=!o,this.levelTxt.visible=!1}}},t}(eui.ItemRenderer);__reflect(ConsumptionItem.prototype,"ConsumptionItem");var FirstChargePanel=function(e){function t(){var t=e.call(this)||this;return t.posY=0,t.hasPos=!1,t.skinName="FirstChargePanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mListLRBtnCtrl=new ListLRBtnCtrl(this.tabList,this.leftBtn,this.rightBtn,152),this.itemList.itemRenderer=ItemBaseNotName,this.itemList.dataProvider=null,t.lists=CommonUtils.GetArray(GameGlobal.Config.FirstRechargeConfig);for(var e=[],i=0,o=t.lists;i<o.length;i++){var n=o[i];e.push("充值"+n.recharge+"元\n"+n.buttondes)}this.tabList.dataProvider=new eui.ArrayCollection(e),this.tabList.itemRenderer=BtnTab5Item,this.tabList.selectedIndex=1},t.prototype.onClick=function(e){var i=t.lists[this.tabList.selectedIndex];"立即充值"==this.chargeBtn.label?GameGlobal.RechargeModel.sendRecharge(i.buyid):GameGlobal.RechargeModel.sendRechargeFirstReward(i.id)},t.prototype.onItemClick=function(e){this.UpdateContent()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.chargeBtn,this.onClick),this.AddItemClick(this.tabList,this.onItemClick),this.observe(MessageDef.RECHARGE_FIRST_UPDATE,this.UpdateContent)},t.prototype._NewMovieObject=function(){var e=new MovieObject,t=1;return e.scaleX=e.scaleY=t,e.x=this.width*t>>1,e.y=this.height*t>>1,this.addChild(e),e},t.prototype.onEnterFrame=function(e){this._movie&&(this.posY<-16?this.hasPos=!0:0==this.posY&&(this.hasPos=!1),this.hasPos?this.posY++:this.posY--,this._movie.y=this.roleShowPanel.y+54+this.posY>>0)},t.prototype.UpdateContent=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),UIHelper.ListRefresh(this.tabList);var e=t.lists[this.tabList.selectedIndex];if(this.itemList.dataProvider=new eui.ArrayCollection(e.item),this.titleImg.source=e.title,this.roleShowPanel&&this.roleShowPanel.ClearCache(),3==this.tabList.selectedIndex?this.roleShowPanel.y=420:this.roleShowPanel.y=368,0==e.showtype)this.showImg.source=e.show,this.showImg.visible=!0,this.roleShowPanel.visible=!1,this._movie&&this._movie.ClearCache();else if(1==e.showtype){var i=new RoleShowData;i.clothID=e.show,this.roleShowPanel.Set(RoleShowDressType.ROLE,i),this.showImg.visible=!1,this.roleShowPanel.visible=!0,this._movie&&this._movie.ClearCache()}else if(3==e.showtype){var o=GameGlobal.Config.FashionSkinConfig,i=new RoleShowData;i.clothID=o[e.show][GameGlobal.actorModel.sex].pid,i.sex=GameGlobal.actorModel.sex,i.job=GameGlobal.actorModel.job,i.rideId=2000105,this.roleShowPanel.SetAll(i),this.showImg.visible=!1,this.roleShowPanel.visible=!0,this._movie&&this._movie.ClearCache()}else this._movie||(this._movie=this._NewMovieObject()),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this._movie.LoadByUrl(ResDataPath.GetUIEffePath(e.show)),this._movie.y=this.roleShowPanel.y+54>>0,this.showImg.visible=this.roleShowPanel.visible=!1;this.powerTxt.textFlow=TextFlowMaker.generateTextFlow(e.powertitle),this.titleTxt.textFlow=TextFlowMaker.generateTextFlow(e.valuetitle);var n=GameGlobal.RechargeModel.rechargeNum;this.chargeTxt.text="累计已充值"+n+"元",this.chargeBtn.enabled=!0,UIHelper.ShowRedPoint(this.chargeBtn,!1),n>=e.recharge?GameGlobal.RechargeModel.GetFirstRewardState(e.id)?(this.chargeBtn.label="已领取",this.chargeBtn.enabled=!1):(UIHelper.ShowRedPoint(this.chargeBtn,!0),this.chargeBtn.label="领 取"):this.chargeBtn.label="立即充值"},t.RedPointCheck=function(){return GameGlobal.GrowUpModel.checkFirstChargeRedPoint()},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve(),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.NAME="充值",t.lists=[],t}(BaseView);__reflect(FirstChargePanel.prototype,"FirstChargePanel",["ICommonWindowTitle"]);var BtnTab5Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=FirstChargePanel.lists[this.itemIndex],i=GameGlobal.RechargeModel.rechargeNum;i>=t.recharge&&(this.redPoint.visible=!GameGlobal.RechargeModel.GetFirstRewardState(this.itemIndex+1))},t}(eui.ItemRenderer);__reflect(BtnTab5Item.prototype,"BtnTab5Item");var GrowUpPanel=function(e){function t(){var t=e.call(this)||this;return t.lists=[],t._activityId=11,t.skinName="GrowUpPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=GrowUpItem,this.itemList.dataProvider=null,this.lists=GameGlobal.Config.ActivityType24Config[this._activityId],this.itemList.dataProvider=new eui.ArrayCollection(this.lists)},t.prototype.onClick=function(e){Checker.Money(MoneyConst.yuanbao,2e4,MoneyConst.yuanbao)&&GameGlobal.ActivityKaiFuModel.sendInvestment(this._activityId)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.touziBtn,this.onClick),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent)},t.prototype.UpdateContent=function(){var e=this;if(TimerManager.ins().remove(this.updateTime,this),this._activityData=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),this._activityData){0==this._activityData.status?(this.touziBtn.visible=this.timeTxt.visible=!0,this.flagImg.visible=!1,this.AddTimer(1e3,0,this.updateTime),this.updateTime()):(this.touziBtn.visible=this.timeTxt.visible=!1,this.flagImg.visible=!0);var t=function(t){var i=-1!=e._activityData.reward.indexOf(t.index);return i?t.index+1e4:t.index};this.lists.sort(function(e,i){return t(e)-t(i)}),UIHelper.ListRefresh(this.itemList)}},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._activityData?this.timeTxt.textFlow=TextFlowMaker.generateTextFlow(this._activityData.getRemindTimeString()):this.timeTxt.text="活动未开启"},t.RedPointCheck=function(){return GameGlobal.GrowUpModel.checkGrowUpRedPoint()},t.NAME="成长基金",t}(BaseView);__reflect(GrowUpPanel.prototype,"GrowUpPanel",["ICommonWindowTitle"]);var GrowUpItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.rewardList.itemRenderer=ItemBaseNotName,this.rewardList.dataProvider=null,this.rewardBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCkick,this)},t.prototype.onCkick=function(e){var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(11);if(t){if(0==t.status)return void UserTips.ins().showTips("您还没有投资，不能领取");GameGlobal.ActivityKaiFuModel.sendReward(11,this.data.index)}},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){var t=this.data;this.descTxt.text="达到"+t.level+"级，返还",this.rewardList.dataProvider=new eui.ArrayCollection(t.reward);var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(11);if(i){var o=GameGlobal.actorModel.level;if(o<t.level)this.levelTxt.text=o+"级/"+t.level+"级",this.levelTxt.visible=!0,this.rewardBtn.visible=this.rewardImg.visible=!1;else{var n=-1!=i.reward.indexOf(t.index);UIHelper.ShowRedPoint(this.rewardBtn,1==i.status&&!n),this.rewardImg.visible=n,this.rewardBtn.visible=!n,this.levelTxt.visible=!1}}}},t}(eui.ItemRenderer);__reflect(GrowUpItem.prototype,"GrowUpItem");var InvestmentPlanPanel=function(e){function t(){var t=e.call(this)||this;return t._activityId=12,t.skinName="InvestmentPlanPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=InvestmentItem,this.itemList.dataProvider=null;var e=GameGlobal.Config.ActivityType8Config[this._activityId];this.itemList.dataProvider=new eui.ArrayCollection(e)},t.prototype.onClick=function(e){Checker.Money(MoneyConst.yuanbao,8888,MoneyConst.yuanbao)&&GameGlobal.ActivityKaiFuModel.sendInvestment(this._activityId)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.touziBtn,this.onClick),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent)},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.itemList),TimerManager.ins().remove(this.updateTime,this),this._activityData=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),this._activityData&&(0==this._activityData.status?(this.touziBtn.visible=this.timeTxt.visible=!0,this.flagImg.visible=!1,this.AddTimer(1e3,0,this.updateTime),this.updateTime()):(this.touziBtn.visible=this.timeTxt.visible=!1,this.flagImg.visible=!0))},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._activityData?this.timeTxt.textFlow=TextFlowMaker.generateTextFlow(this._activityData.getRemindTimeString()):this.timeTxt.text="活动未开启"},t.RedPointCheck=function(){return GameGlobal.GrowUpModel.checkInvestmentRedPoint()},t.NAME="投资计划",t}(BaseView);__reflect(InvestmentPlanPanel.prototype,"InvestmentPlanPanel",["ICommonWindowTitle"]);var InvestmentItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.rewardList.itemRenderer=ItemBaseNotName,this.rewardList.dataProvider=null,this.rewardBtn.visible=!1},t.prototype.onCkick=function(e){},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){var t=this.data;this.descTxt.text="第"+StringUtils.numTenToChinese(t.index)+"天返利",this.rewardList.dataProvider=new eui.ArrayCollection(t.item);var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(12);i&&(i.day<t.index?(this.levelTxt.text=i.day+"天/"+t.index+"天",this.levelTxt.visible=!0,this.rewardImg.visible=!1):(this.rewardImg.visible=!0,this.levelTxt.visible=!1))}},t}(eui.ItemRenderer);__reflect(InvestmentItem.prototype,"InvestmentItem");var KaiFuActivityPanel=function(e){function t(){var t=e.call(this)||this;return t.activityIconList=[],t.skinName="KaiFuActivityPanelSkin",t}return __extends(t,e),t.sortByType=function(e,t){return e.type-t.type},t.prototype.GetTargetIconList=function(){var e=[],i=ActivitySumBtnConfig.GetOpenList(2);for(var o in i){var n=i[o],a=GameGlobal.ActivityKaiFuModel.GetActivityDataById(n.id);if(a&&a.openState){if(n.activityType=ActivityConfig.GetActTypeById(n.id),n.activityType==ActivityKaiFuFuncType.ACT_22_OrangePetTarget&&a.AllGotten())continue;e.push(n)}}return e.sort(t.sortByType),e},t.prototype.GetJijieIconList=function(){var e=[],t=GameServer.serverOpenDay,i=GameGlobal.Config.ProgressCrazyBaseConfig;if(t<=i.initialorder.length){var o=i.initialorder[t-1];e.push({jijieType:o,activityType:ActivityKaiFuFuncType.ACT_99990_JiJie,cls:KaiFuJiJiePanel,icon:i.probtn[o-1],title:"进阶狂欢"}),e.push({jijieType:o,activityType:ActivityKaiFuFuncType.ACT_99991_JiJieRank,cls:KaiFuJiJieRankPanel,icon:i.rankbtn[o-1],title:"进阶排行"}),e.push({jijieType:o,activityType:ActivityKaiFuFuncType.ACT_99992_JiJieShop,cls:KaiFuJiJieShopPanel,icon:"ui_bm_zhekoushangdian",title:"折扣商店"}),e.push({jijieType:o,activityType:ActivityKaiFuFuncType.ACT_99993_LeiJiReCharge,cls:KaiFuLeiJiReChargePanel,icon:"ui_bm_leijichongzhi",title:"累计充值"})}else{var n=void 0,a=(t-i.initialorder.length-1)%i.progressorder.length,r=i.progressorder[a],s=r.length;for(n=0;s>n;n++)e.push({jijieType:r[n],activityType:ActivityKaiFuFuncType.ACT_99990_JiJie,cls:KaiFuJiJiePanel,icon:i.probtn[r[n]-1],title:"进阶狂欢"});a=(t-i.initialorder.length-1)%i.rechargeorder.length,e.push({jijieType:i.shoporder[a],activityType:ActivityKaiFuFuncType.ACT_99992_JiJieShop,cls:KaiFuJiJieShopPanel,icon:"ui_bm_zhekoushangdian",title:"折扣商店"}),e.push({jijieType:i.rechargeorder[a],activityType:ActivityKaiFuFuncType.ACT_99993_LeiJiReCharge,cls:KaiFuLeiJiReChargePanel,icon:"ui_bm_leijichongzhi",title:"累计充值"})}return e},t.prototype.childrenCreated=function(){var e=this.GetJijieIconList(),t=this.GetTargetIconList();this.activityIconList=[],this.activityIconList=this.activityIconList.concat(e),this.activityIconList=this.activityIconList.concat(t),this.mListLRBtnCtrl=new ListLRBtnCtrl(this.list,this.leftBtn,this.rightBtn,126);for(var i=[],o=0,n=this.activityIconList;o<n.length;o++){var a=n[o];i.push(TabView.CreateTabViewData(ActivityDataFactory.GetPanel(a.activityType),{jijieType:a.jijieType,_activityId:a.id}))}this.tabEuiView.tabChildren=i,this.list.itemRenderer=KaiFuBtnItem,this.list.dataProvider=new eui.ArrayCollection(this.activityIconList)},t.prototype.UpdateRedList=function(){for(var e=0,t=this.activityIconList;e<t.length;e++){var i=t[e],o=!1;if(i.activityType==ActivityKaiFuFuncType.ACT_99990_JiJie)1==GameGlobal.ActivityKaiFuModel.RedPointAdvancedUpLevelByType(i.jijieType)&&(o=!0);else if(i.activityType==ActivityKaiFuFuncType.ACT_99993_LeiJiReCharge)1==GameGlobal.ActivityKaiFuModel.RedPointAdvancedReCharge()&&(o=!0);else if(i.activityType==ActivityKaiFuFuncType.ACT_99992_JiJieShop)GameGlobal.ActivityKaiFuModel.RedPointAdvanceShop()&&(o=!0);else{var n=GameGlobal.ActivityKaiFuModel.GetActivityDataById(i.id);n&&n.hasReward()&&(o=!0)}i.__redPoint__=o}},t.prototype.OnClickMenu=function(e){this.openPage(e.itemIndex)},t.prototype.openPage=function(e){this.activityIconList[e];this.tabEuiView.selectedIndex=e,this.list.selectedIndex=e},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=0;if(i&&i.val){var n=i.val;if(i.isId){for(var a=0;a<this.activityIconList.length;a++)if(this.activityIconList[a].id==n){o=a;break}}else for(var a=0;a<this.activityIconList.length;a++)if(this.activityIconList[a].activityType==n){o=a;break}}o&&o>3&&this.mListLRBtnCtrl.SetLeftIndex(o),this.mListLRBtnCtrl.OnRefresh(),this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateContent),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent),this.AddItemClick(this.list,this.OnClickMenu),this.openPage(o),this.UpdateContent()},t.prototype.UpdateContent=function(){this.UpdateRedList(),UIHelper.ListRefresh(this.list);for(var e=[],t=0,i=this.activityIconList;t<i.length;t++){var o=i[t];e.push(o.__redPoint__?!0:!1)}this.mListLRBtnCtrl.SetRedPointList(e),this.mListLRBtnCtrl.OnRefresh();var n=this.tabEuiView.getElementAt(this.tabEuiView.selectedIndex);n&&n.UpdateContent&&n.UpdateContent()},t.prototype.OnClose=function(){this.tabEuiView.CloseView()},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="开服活动",t}(BaseEuiView);__reflect(KaiFuActivityPanel.prototype,"KaiFuActivityPanel",["ICommonWindowTitle"]);var KaiFuBtnItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;if(15==e.id){var t=Math.min(GameServer.serverOpenDay,7),i=GameGlobal.Config.ActivityType17Config[15],o="";for(var n in i)if(i[n].day==t){o=i[n].info.btn;break}this.icon.source=o}else this.icon.source=e.icon;this.redPoint.visible=this.data.__redPoint__},t}(eui.ItemRenderer);__reflect(KaiFuBtnItem.prototype,"KaiFuBtnItem");var KaiFuJiJieRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuJiJieRankWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("进阶排行")},t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuJiJieRankItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.UpdateContent=function(){var e=GameGlobal.ActivityKaiFuModel.advancedRank;0==e.length?(this.rankTitle_group.visible=!1,this.noRank_label.visible=!0):(this.rankTitle_group.visible=!0,this.noRank_label.visible=!1),this.list.dataProvider.replaceAll(e);var t=GameGlobal.ActivityKaiFuModel.advancedRankMySelfe||"未上榜";this.myInfo.textFlow=TextFlowMaker.generateTextFlow("我的排名：|C:"+Color.GetStr(Color.l_green_1)+"&T:"+t+"|         我的战力：|C:"+Color.GetStr(Color.l_green_1)+"&T:"+(GameGlobal.ActivityKaiFuModel.advancedSelfPower||0)+"|")},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.rankTitleTxt.text=ActivityConst.JiJieTypeName2(i)+"阶数",this.powerTxt.text=ActivityConst.JiJieTypeName2(i)+"战力",this.observe(MessageDef.ACTIVITY_ADVANCED_RANK,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(KaiFuJiJieRankWin.prototype,"KaiFuJiJieRankWin");var KaiFuJiJieRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.imgBg.visible=this.itemIndex%2==0,this.rank_txt.text=this.itemIndex+1+"",this.name_txt.text=e.name,this.powerTxt.text=e.power+"",this.lv_txt.text=e.lv?e.lv+"":"0"
}},t}(eui.ItemRenderer);__reflect(KaiFuJiJieRankItem.prototype,"KaiFuJiJieRankItem");var RES_REF={ActivityRewardShowPanel:["ui_hddt_bm_jiuchongtianBG"],PlayerInfoSkin:["ui_bh_icon_VIP","chongzhi_json","boss_json"],FuliGoldTreeSkin:["xiyoulilian_json","js_json","ui_fldt_bt_bj","fulidating_json"],CustomServicePanelSkin:["ui_fk_banner"],ReferrerSkin:["haoyou_json"],FeatsShopItem:["shangcheng_json"],TreasureBaseIconSkin:["jineng_json"],briberyItem:["hongbao_json"],GangMemberListItemSkin:["guankia_json"],DeityEquipMainSkin:["shenzhuang_json"],TsumKoBaseMemberSkin:["shenjiang_json"],PetInfoSkin:["chongwu_json","tujian_json","ui_skill_31"],BtnTab5Skin:["yunyinghuodong_json"],FuliSignBoardSkin:["ui_fldt_bm_qiandaoBanner","fuben_json"],DailyFomalhautMainSkin:["ui_smrw_bm_yuanhua","zuoqi_json"],NpcDialogSkin:["npc_800001"],ChatFaceSkin:["faceIcon_json","wanjiaxiangqing_json"],KaiFuJiJieBtnSkin:["jineng_json"],GBattleGangRankItemSkin:["chongwu_json"],ForgeEquipSkin:["duanzao_json"],YingYuanZhengShuSkin:["yinyuan_json"],GBattleGateSkin:["zd_json","ui_kfbz_bm_yuanhua","huodongdating_json","kuafuboss_json","ui_kfbz_bm_jiangliBG","kuafubangzhan_json"],StudentSkin:["fuben_json"],CangbaotuPopSkin:["fuben_json"],RoleHeadSkin:["boss_json"],GodPetActiveTipSkin:["chongwu_json"],PageButtonSkin:["paihangbang_json"],briberyOpenSkin:["ui_hb_bm_hongbao02","hongbao_json"],XiandaoSceneSkin:["zd_json","banghui_json"],GodPetActiveLotterySkin:["ui_ssjl_bm_tupian01","ui_ssjl_bm_bg","shenshoujianglin_json"],CmLabel3Skin:["name_bg_json"],DailyTeamSkin:["zuoqi_json","ui_xyll_bm_kuafuzudui"],GangProtectorAwarkListItemSkin:["guankia_json"],GameBattleSelectSkin:["zd_json"],TreasureResultSkin:["xunbao_json"],KaiFuJiJieShopItemSkin:["jinjiekuanghuan_json","shangcheng_json"],OpenDayGifItemSkin:["denglusongyuanbao_json","fuben_json"],FieldBossSkin:["zd_json","boss_json","name_bg_json"],FriendMainSkin:["haoyou_json"],FuliLvNoticeSkin:["ui_fldt_bm_gonggaoBanner"],RoleSuitSkin:["js_json","name_bg_json","jineng_json","taozhuang_json","chibang_json"],OpenDayGifSkin:["denglusongyuanbao_json","fuben_json"],FuliWeeklyCardSkin:["ui_fldt_bm_zhoukaBanner","qujingdonggui_json","fulidating_json"],MainPlayerInfoSkin:[],FuliBtnSkin:["jineng_json","fulidating_json"],QujingRecordListItemSkin:["qujingdonggui_json"],XiandaoRankItemSkin:["chongwu_json"],FateFadeViewSkin:["js_json","ui_zd_bm_taizi"],DailyResRetrieveSkin:[],briberySkin:["hongbao_json","ui_hb_bm_hongbao01"],LadderLevelSkin:["kuafuwangzhe_json"],ItemAuctionTipsSkin:[],GodPetActiveAwardSkin:["ui_ssjl_bm_tupian02","huodongdating_json","shangcheng_json"],WorldMapContentSkin:["shijieditu_json","fuben_json"],AnswerSkin:["dati_json","ui_dt_bm_bg","banghui_json"],UpLvWayMainSkin:["dati_json","shengjitujing_json"],XianlvAttrSkin:["name_bg_json"],GodLotterySkin:["ui_ts_bm_tupian","tianshenjianglin_json","ui_ts_bm_bg"],KaiFuTargetFightPanelSkin:["chibang_json","fuben_json","guankia_json"],GrowUpItemSkin:["fuben_json"],XiandaoVideoSkin:["xiandaohui_json","boss_json"],ChatSkin:[],PetInactiveSkin:["shenjiang_json","tujian_json","chongwu_json","ui_skill_31"],TianShenHeChengItemSkin:["shenjiang_json"],TianShenGmSkin:[],XianlvupStarSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],CaiLiaoItem:["fuben_json"],RideItemSkin:[],PetHeadSkin:["chongwu_json"],RoleSkillSetSkinItemSkin:["jineng_json"],ForgeGemSkin:[],RechargeRebateSkin:["chongzhifanli_json","chongzhi_json"],XiandaoRankItem2Skin:["xiandaohui_json"],GangMapSceneSkin:["zuoqi_json","zd_json","banghui_json","chongwu_json"],HouseDetailSkin:["fangwu_json"],SystemSettingSkin:["youjian_json"],CrossBattleItemSkin:["boss_json"],CommonDialogSkin:[],Btn2Skin:["zd_json"],DailyFirstChargeSkin:["ui_yyhd_bm_meirishouchongBG"],FansSkin:["haoyou_json"],MainGameNoticeSkin:["xiandaohui_json"],TsumKoListItemSkin:["qujingdonggui_json","ui_bsyn_bm_ditu01","bashiyinan_json"],LadderInfoHeadItemSkin:["kuafuwangzhe_json"],BagMakeListSkin:[],BossTipsItemSkin:["chongwu_json"],ShopIntegralItemSkin:["shangcheng_json"],PlotLeftMsgSkin:["plot_json"],GangMemberInfoSkin:["ui_bh_icon_VIP","chongzhi_json","guankia_json"],TianShenHeChengSkin:["shenjiang_json"],GBattleRankItemSkin:["chongwu_json"],KaiFuTargetPanelSkin:["jineng_json"],GangMineKuangItemSkin:["huodongdating_json"],PowerLabel3Skin:["js_json"],XianlvSkillTipSkin:["chongwu_json","ui_skill_31"],TopActivitySkin:["ui_bm_xuannvxiafan"],XiandaoRankSkin:["chongwu_json","xiandaohui_json"],XiandaoSkin:["xiandaohui_json"],TotemsActivationModelSkin:["youjian_json","tuteng_json"],RankDataItemSkin:["chongwu_json"],RechargeRebateMainSkin:["jineng_json","fulidating_json"],DestinyEquipDlgSkin:[],RoleInfoItemSkin:["js_json"],DestinyArrTipSkin:[],FuliGiveGoldMainSkin:["ui_yyhd_bm_songshiwanyuanbaoBG","fuben_json","qujingdonggui_json"],GBRoleHeadSkin:["kuafubangzhan_json"],LadderLevelNameSkin:["kuafuwangzhe_json"],TreasureMakeRectSkin:["ui_fb_bm_bg","fabao_json"],zhuangPanItemSkin:["jinjiekuanghuan_json","shangcheng_json"],HavingLockItemSkin:["xianlv_json"],RoleInfoSkin:["js_json"],PetGodQualitySkin:["js_json","chongwu_json","tujian_json","ui_skill_31"],HeadSkin:["boss_json"],TianShenLevelUpSkin:["shenjiang_json","zuoqi_json","name_bg_json","chongwu_json"],CangbaotuRewardSkin:["name_bg_json","fuben_json"],welComeLandingSkin:["ui_xsyd_bg"],ResultFailSkin:["jineng_json","jiesuan_json"],YuanfenTipSkin:["chongwu_json"],FuliPracticeSkin:["fuben_json","xiyoulilian_json","zuoqi_json","ui_fldt_bm_fuliBanner","fulidating_json"],YingyueEnAiSkin:["yinyuan_json","huodongdating_json","shangcheng_json"],DailyExpRetrieveItemSkin:["chongwu_json"],TeacherSecendSkin:["shitu_json","chongwu_json"],RoleHead1Skin:["xiandaohui_json","boss_json"],PositionForeshowSkin:["name_bg_json","ui_zwgnt_bm_bj","zhenweigongneng_json","jiesuan_json","ui_skill_31","chongwu_json"],LadderRankPanelSkin:["kuafuwangzhe_json"],ForgeSkin:["ui_bm_duanzaowenli","duanzao_json"],GangMineRankSkin:[],EquipUserTipsSkin:["tips_json"],DestinyRectInfoSkin:["zd_json"],FuliActivationCodeSkin:["ui_fldt_bm_jihuomaBanner"],KaiFuTargetUpLevelPanelSkin:["ui_kfhd_bm_dengjiBanner","fuben_json"],ActivityEndAwardIconSkin:["banghui_json"],InvestmentPlanItemSkin:["fuben_json"],HavingMagicSkin:["tiannv_json","skill_0_3"],TreasureArrRectInfo:["zd_json"],RoleTemplateRewardSkin:["ui_jjjl_bg","fuben_json"],GodPetActiveResultSkin:["xunbao_json"],CloudNineRankItemSkin:["ui_ch_bm_xiandaozhizun"],GangMineMyTeamPanelSkin:["shenjiang_json","boss_json"],DestinyResolveSkin:["chongwu_json"],FriendBlacklistSkin:["haoyou_json"],GuaQiaRankItemSkin:["chongwu_json"],WorldMapSkin:["shijieditu_json","fuben_json"],TeacherFirstSkin:["shitu_json","chongwu_json"],DestinyResolveHandleDlgSkin:[],GangApplyListSkin:["guankia_json"],GangMineRoleItemSkin:["zuoqi_json"],CommonWindowBgSkin:["js_json"],DayBtnSkin:["qitianzunxiang_json"],GangMineCrossRankSkin:["ui_hddt_bm_kszdpaimingBG"],CloudNineRankSkin:["ui_hddt_bm_jiuchongtianpaimingBG","ui_ch_bm_xiandaozhizun"],XianlvAllAttrSkin:["name_bg_json"],LingtongSkillSkin:["name_bg_json","chongwu_json","ui_skill_31"],TsumKoBaseRecordSkin:["youjian_json","name_bg_json","bashiyinan_json"],HouseUpgradeTipSkin:["chongwu_json"],TreasureUpPanelSkin:["duanzao_json","zd_json","jineng_json","chongwu_json"],FuliMonthlyCardSkin:["ui_fldt_bm_yuekaBanner","qujingdonggui_json","fulidating_json"],KaiFuTargetShopItemSkin:["jinjiekuanghuan_json","shangcheng_json"],ShopResolveSkin:["duanzao_json"],YingYuanXianHuaSkin:[],YuanfenItemSkin:["shenjiang_json","js_json"],RoleSkillItemSkin:["jineng_json"],YingYuanZjmSkin:["boss_json"],XianlvupAttrSkin:["xianlv_json"],GangJuanXianListItemSkin:["guankia_json"],CommonDialog2Skin:[],XianlvUpLevelSkin:["shenjiang_json","zuoqi_json","xianlv_json","name_bg_json","chongwu_json"],TeacherSendSkin:["ui_st_bm_chuangongBG"],UpLvWayItemSkin2:["shengjitujing_json"],PlayerChangeNameSkin:[],RoleSkillSkin:["jineng_json","ui_bm_jinengwenli"],MoneyTreeBoxSkin:[],LingLongTaSkin:["fuben_json","ui_fb_bm_linglongbaotabg"],TheFirstPlayerTipSkin:["ui_zjm_mobaiBG"],ChangeLinerSkin:["chongwu_json"],KaiFuJiJieRankItemSkin:["chongwu_json"],GangCreateSkin:[],MailContentSkin:["youjian_json"],AcrossBossSkin:["name_bg_json","ui_kf_bm_beijingBG","kuafubangzhan_json"],GangMapTaskResetTipSkin:[],KaiFuJiJieAwardItemSkin:["fuben_json"],TiantiRankItem:["kuafuwangzhe_json"],TianshilianItemSkin:["fuben_json"],GodPieWinSkin:["jineng_json","fulidating_json"],TsumKoPanelSkin:["bashiyinan_json","qujingdonggui_json","ui_bsyn_bm_ditu01"],BagItemTypeSkin:[],TsumKoCheckItemListSkin:["shenjiang_json","bashiyinan_json"],GBattleJoinTipSkin:["banghui_json"],GangMineRankItemSkin:[],HavingSkillIconSkin:["jineng_json","chongwu_json"],KaiFuTargetShopSkin:["ui_kfhd_bm_zhekouBanner","jinjiekuanghuan_json","shangcheng_json"],HouseUpgradeTipItemSkin:["chongwu_json"],TsumKoBaseBagItemSkin:[],TreasureHoldIconSkin:["jineng_json","chongwu_json"],PublicBossItemSkin:["zd_json","boss_json","name_bg_json"],ChatItem1Skin:["wanjiaxiangqing_json","boss_json"],MapCitySkin:["ui_hddt_bm_wangcheng","boss_json"],CrossBattleJfViewSkin:["huodongdating_json","shangcheng_json","vip_json"],zhuangPanPanelSkin:["zuoqi_json","jingcaihuodong_json","ui_jchd_bm_zhuanpan02"],FuliForeverCardSkin:["qujingdonggui_json","ui_fldt_bm_zskbanner","fulidating_json"],DailyPeaceItemSkin:["fuben_json"],KillBossItemSkin:["chongwu_json"],bar0Skin:["zd_json"],CommonFuHuSkin:[],PublicBossSkin:["zd_json","boss_json","name_bg_json"],RoleTemplateSkin:["zuoqi_json","name_bg_json"],YingyueInfoSkin:["yinyuan_json","fuben_json","ui_yy_bm_huenliBG","name_bg_json","ui_yy_bm_qiuhuenBG","banghui_json","xiandaohui_json","boss_json"],AuctionSelectSkin:["paimaihang_json"],AcrossBossMiniRankSkin:["jineng_json","boss_json"],ShopTitle:["shangcheng_json"],RideDressItemSkin:["chibang_json"],XiandaoBetTipSkin:[],PetSkillIcon2Skin:["ui_skill_31","chongwu_json"],GBattleDragonSceneSkin:["ui_bm_tiaozhan","huodongdating_json","zd_json","kuafubangzhan_json","kuafuboss_json"],TianShenMainSkin:["js_json","chongwu_json"],YingyueEnAiItemSkin:["yinyuan_json","huodongdating_json","shangcheng_json"],BossKillRecordSkin:["chongwu_json"],TeamCheckItemListSkin:["shenjiang_json","bashiyinan_json"],HavingTipsSkin:["xuannvchuzhan_json","ui_xncz_bm_renwu","ui_xncz_bm_tupian"],BossHurtItemSkin:["chongwu_json"],RankWinSkin:["chongwu_json"],TeacherGetReItemSkin:["shitu_json","chongwu_json"],PlayerChatSkin:["dati_json","wanjiaxiangqing_json"],VipBossItemSkin:["boss_json","name_bg_json"],GangProtectorAwardListSkin:["guankia_json"],LingtongInactiveSkin:["lingtong_json","name_bg_json","ui_skill_31","chongwu_json"],YingYuanAddSkin:[],TeamBaseSkin:["name_bg_json"],CrossBattleMainSkin:["huodongdating_json"],BagStarTypeSkin:[],QujingRecordListSkin:["qujingdonggui_json"],TeacherInvItemSkin:["guankia_json","chongwu_json"],GangChangeNameSkin:[],PetTuJianItemSkin:["tujian_json","chongwu_json"],KaiFuJiJieRankPanelItemSkin:["jinjiekuanghuan_json"],GangMapExchangItemSkin:["chongwu_json"],DestinySkin:["mingge_json","chongwu_json","duanzao_json"],KaiFuJiJieRankPanelSkin:["jinjiekuanghuan_json"],YingYuanHeliSkin:["boss_json","shangcheng_json"],GBattleEnterTempleTipSkin:["kuafubangzhan_json"],HouseUpgradeSkin:["zuoqi_json","fangwu_json","name_bg_json"],PetTuJianSkin:["tujian_json","chongwu_json"],TreasureSkillDescSkin:["chongwu_json"],CrossBattleChargeSkin:["huodongdating_json"],TsumKoBaseSkin:["name_bg_json","bashiyinan_json"],MiniMapCityInfoSkin:["ui_hddt_bm_wangcheng"],RankingKeyItemSkin:["paihangbang_json"],TianshilianPopSkin:["name_bg_json","zd_json","fuben_json"],GangMineTeamPanelSkin:["shenjiang_json","huodongdating_json"],RoleSuitItemSkin:["taozhuang_json"],TotemsInfoSkin:["name_bg_json","vip_json","chongwu_json"],KaiFuTargetGuanQiaItmeSkin:["fuben_json"],TotemsMainSkin:["vip_json","js_json","jineng_json","name_bg_json","chongwu_json","ui_tt_bm_yuanquan"],GainNewImageSkin:["js_json","ui_zd_bm_taizi"],GangJuanXianListSkin:["name_bg_json","guankia_json"],zhuangPanResultSkin:["xunbao_json"],YingYuanHeLiItemSkin:["shangcheng_json"],XianlvInactiveSkin:["shenjiang_json","xianlv_json","name_bg_json","chongwu_json"],CreateRolSkin:["chuangjue_json","ui_cjjs_bm_ditu"],FormationSkillSkin:["name_bg_json","zuoqi_json","chongwu_json","ui_skill_31"],DeityEquipDetailSkin:["chongwu_json","tips_json"],GangMemberListSkin:["guankia_json","banghui_json"],TreasureShowSkin:["fabao_json"],CaiLiaoItemSkin:["fuben_json"],bar4Skin:["zd_json"],InvestmentPlanPanelSkin:["ui_yyhd_bm_touzijihuaBG","yunyinghuodong_json","fuben_json"],ChatItem2Skin:["wanjiaxiangqing_json","boss_json"],XiandaoApplySkin:["xiandaohui_json","boss_json"],GwHeadSkin:["boss_json"],BtnN7Skin:["chongzhitehui_json"],KaiFuTargetFuncTargetSkin:["ui_kfhd_bm_banner","fuben_json"],QujingEscortItemSkin:["qujingdonggui_json"],RechargeItemSkin:["chongzhi_json"],GameCityPanelSkin:["ui_zc_bm_shenmishangdian","ui_zc_jz_boss","ui_zc_jz_jingji","ui_zc_jz_kuafu","ui_zc_jz_huodong","ui_zc_jz_ditu","ui_zc_bt_szzp","ui_zc_jz_fuben","ui_bm_xuannvxiafan","ui_bm_zjm_songxuannv"],RideDressSkin:["chibang_json","zuoqi_json"],AuctionPanelSkin:["paimaihang_json"],GangMinePanelSkin:["huodongdating_json","ui_hddt_bm_wakuangBG","name_bg_json"],UpLvWayItemSkin:["shengjitujing_json"],MiniMapSkin:["huodongdating_json"],TreasureResolvePanelSkin:["chongwu_json","jineng_json"],ResultBossWinSkin:["ui_bm_shengli","jiesuan_json"],CrossBattleJfItemSkin:["huodongdating_json","shangcheng_json","vip_json"],XiandaoBetSkin:["xiandaohui_json","boss_json"],TeacherThird:["guankia_json","chongwu_json"],TsumKoCheckpointItemSkin:["shenjiang_json","bashiyinan_json"],VipBossSkin:["boss_json","name_bg_json"],RankingWinSkin:["paihangbang_json","chongwu_json","js_json"],QujingRevengeSkin:[],TestSkin:[],CrossBattleTipSkin:["tips_json"],TreasureArrSkin:["tips_json"],ShopMysterySkin:["shangcheng_json"],GangBossPanelSkin:["name_bg_json","ui_kf_bm_beijingBG","kuafubangzhan_json"],GangMapTaskItemSkin:["zd_json"],ActivityTipSkin:[],AreanPKResultSkin:["banghui_json","jingjichang_json","ui_bm_shengli","jiesuan_json"],GodPetActiveAwardItemSkin:["huodongdating_json","shangcheng_json"],TeacherItemInfoSkin:["shitu_json","boss_json"],CrossBattleCityInfomaTionSkin:["boss_json"],PetUpLevelSkin:["shenjiang_json","name_bg_json","zuoqi_json","tujian_json","chongwu_json","ui_skill_31"],FieldBossItemSkin:["zd_json","boss_json","name_bg_json"],DetailsChatSkin:["wanjiaxiangqing_json"],bar3Skin:["zd_json"],XianlvupSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],GBattleScoreItemSkin:["huodongdating_json","shangcheng_json","vip_json"],KaiFuQiTianFuLiPanelSkin:["fuben_json"],XiandaoKnockoutSkin:["xiandaohui_json","ui_xdh_bm_xian","boss_json"],DailyExpRetrieveSkin:["chongwu_json"],HavingSkillTipSkin:[],GangRecordListSkin:["chongwu_json"],FateMainSkin:["name_bg_json"],TeamMemberItemSkin:["shenjiang_json","boss_json"],GBattleRankSkin:["chongwu_json"],zhuangPanShopSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","shangcheng_json"],GangDefendPanelSkin:["banghui_json","name_bg_json","duanzao_json","guankia_json","chongwu_json"],PetXilianTipSkin:[],LadderWinnerSkin:["ui_kfwz_bm_bj","banghui_json"],PlotRightMsgSkin:["plot_json"],TeamBaseMemberSkin:["shenjiang_json","boss_json"],LadderResultWinSkin:["ui_bm_shengli","kuafuwangzhe_json"],KaiFuJiJieSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","fuben_json"],LingtongRankSkin:["name_bg_json","zuoqi_json","duanzao_json","chongwu_json","ui_skill_31"],RechargeWinSkin:["chongzhi_json","vip_json","ui_yyhd_bm_shuangbeishouchongBG"],TotemsGoodLuckSkin:["xunbao_json","ui_xb_bm_wupinBG"],ItemTipsSkin:["tips_json"],XiandaoKnockoutHeadSkin:["boss_json"],FuliGiveGoldItem:["fuben_json","qujingdonggui_json"],DailyPeaceSkin:["ui_xyll_bm_pingdinganbang","fuben_json"],HelpTipsSkin:["zd_json","tips_json"],TianShenBreachSkin:["xianlv_json","name_bg_json","ui_skill_31"],KaiFuTargetReChargePanelSkin:["ui_kfhd_bm_lianxuchongzhiBanner","fuben_json"],LadderRankRewardItemSkin:["kuafuwangzhe_json"],PetMainSkin:["js_json","chongwu_json"],CrossGuildSkin:[],XianlvMainSkin:["js_json","chongwu_json"],BossHurtRankSkin:["chongwu_json"],HavingSkillItemSkin:["jineng_json"],FirstChargePanelSkin:["fuben_json","name_bg_json","yunyinghuodong_json"],YuanfenInfoSkin:["shenjiang_json","js_json"],TianShenBaseSkin:["shenjiang_json","name_bg_json","zuoqi_json","chongwu_json","jineng_json"],TreasureHuntMainSkin:["xunbao_json","ui_xb_bm_wupinBG"],DailyRetrieveCountSkin:["xiyoulilian_json","zuoqi_json"],GangListItemSkin:["guankia_json"],GangRecordListItemSkin:["chongwu_json"],DailyAwardSkin:[],RewardsWin:[],PetSkillTipSkin:["chongwu_json","ui_skill_31"],KaiFuJiJieShopPanelSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","shangcheng_json"],AnswerResultSkin:["dati_json"],FuliLvGiftBagSkin:["ui_fldt_bm_shengjiBanner","fuben_json"],QujingAwardSkin:["qujingdonggui_json"],ArenaRoleItemSkin:["jingjichang_json"],GameBattleManualSkin:["zd_json"],CaiLiaoFB:["fuben_json"],RoleJingMaiSkin:["name_bg_json","jingmai_json","ui_jm_bm_jingmai"],TeamDataItemSkin:["shenjiang_json"],LadderPreWeekPanelSkin:["kuafuwangzhe_json"],OfflineRewardSkin:["lixianshouyi_json"],RoleSkillSetPanelSkin:["jineng_json"],ShopRectItemSkin:["shangcheng_json"],ShopMysteryItemSkin:["shangcheng_json"],GangMineTeamGuardPanelSkin:["shenjiang_json","boss_json"],LadderLevelIconSkin:["kuafuwangzhe_json"],TotemsMainModelSkin:["zuoqi_json","tuteng_json"],MailItemSkin:["youjian_json"],FormationMainSkin:["js_json"],GrowUpPanelSkin:["ui_yyhd_bm_chengzhangjijinBG","yunyinghuodong_json","fuben_json"],GBattleScoreListSkin:["huodongdating_json","shangcheng_json","vip_json"],ArenaInfoSkin:["ui_jjc_bm_ditu","jingjichang_json"],XianlvBattleSkin:["chongwu_json"],KaiFuQiTianShopItemSkin:["jinjiekuanghuan_json","shangcheng_json"],XianlvQySkin:[],KaiFuTargetTeamBuyPanelSkin:["ui_kfhd_bm_kaifutuangouBanner","fuben_json"],RoleSuitHeadSkin:["jineng_json","taozhuang_json"],GangApplyListItemSkin:["guankia_json"],PersonBossItemSkin:["boss_json","name_bg_json"],BtnN4Skin:["paihangbang_json"],GameBattleSkin:["zd_json","fuben_json"],QujingChooseItemSkin:["qujingdonggui_json"],CloudNineSceneSkin:["huodongdating_json"],CrossGuildWarSkin:[],PetXilianSkillSkin:["js_json","chongwu_json","jineng_json","ui_skill_31"],GangProtectorJinJieAwardSkin:[],PlotSimpleSkin:["zd_json"],XianlvBaseSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],ActivityRewardShowItemSkin:[],WorldMapIconSkin:["shijieditu_json","fuben_json"],ShootUpPanelSkin:["yunyinghuodong_json","2006709_s","ui_yyhd_bm_zhishengyijieBG"],GangMapExchangeSkin:["chongwu_json"],GodListItemSkin:[],RoleRideDrugSkin:["name_bg_json"],CaiLiaoFBSkin:["fuben_json"],CmLabel2Skin:["name_bg_json"],CommonMidSkin:[],XiandaoResultSkin:["xiandaohui_json","boss_json"],TreasureRectIconSkin:["fabao_json"],TeacherSkin:["ui_st_bm_bg","shitu_json"],CommonDialog3Skin:["ui_yy_bm_xijielianliBG"],GangInfoSkin:["boss_json","chongwu_json","banghui_json"],BtnTab4Skin:["shitu_json"],PetSkillSkin:["chongwu_json","ui_skill_31"],LittleBg3:["tips_json"],PetAttrSkin:["name_bg_json","chongwu_json"],ActivityItemSkin:["huodongdating_json","ui_hddt_bm_kszdBG"],TreasureMakePanelSkin:["jineng_json","chongwu_json"],ForgeMasterTipSkin:["tips_json","duanzao_json"],KaiFuActivityPanelSkin:["jineng_json"],ShopCommonSkin:["shangcheng_json"],TeacherItemDepart:[],AcrossBossFightSkin:["zd_json","kuafuboss_json","jineng_json","boss_json"],RoleRideSkillSkin:["name_bg_json","zuoqi_json"],ForgeEquipListSkin:["ui_bm_duanzaowenli","duanzao_json"],BG:["ui_bm_back4"],ResultWinSkin:["ui_bm_shengli","jiesuan_json"],TotemsItemComSkin:["jineng_json","tuteng_json"],XianLvInfoSkin:["chongwu_json","ui_skill_31"],PowerLabel2Skin:["js_json"],ActivityWinSkin:["huodongdating_json","ui_hddt_bm_kszdBG"],DailyTaskItemSkin:["chongwu_json"],FieldBossDetailSkin:["name_bg_json","zd_json","boss_json"],GBattleTempleSceneSkin:["ui_bm_tiaozhan","huodongdating_json","zd_json","kuafubangzhan_json"],CatchPetResultWinSkin:["ui_bm_shengli","jiesuan_json","ui_zd_bm_taizi"],AcivityEndAwardSkin:["name_bg_json","banghui_json","jiesuan_json"],TianshilianSkin:["ui_fb_bm_yongchuangtiantingbg","name_bg_json","zd_json","fuben_json"],GameGattlePubBossSkin:["zd_json"],XianlvupStarBaseSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],SmeltSelectSkin:[],RoleTemplateRewardItemSkin:["fuben_json"],GangCreateItemSkin:["name_bg_json","banghui_json"],HeadSkin2:["boss_json"],HeadSkin3:["xiandaohui_json","boss_json"],CangbaotuItemSkin:["fuben_json"],RechargeRebateItemSkin:["chongzhifanli_json","chongzhi_json"],DeityEquipInjectSkin:["shenzhuang_json","duanzao_json"],UpLvWayViewSkin:["xiyoulilian_json","zuoqi_json","fuben_json","shengjitujing_json"],bar2Skin:["zd_json"],HouseBuildSkin:["fangwu_json"],GangPangTaoHuiSkin:["ui_bh_bm_pantaohuiyuanhua","fuben_json"],MyFriendSkin:["haoyou_json"],CrossBattleCityInfoSkin:["boss_json"],TeamItemComSkin:["shenjiang_json","bashiyinan_json"],HavingShowSkin:["ui_xn_bm_db","xuannvxiafan_json","jineng_json","chongwu_json"],TianshenDetailSkin:["chongwu_json"],BtnTab2Skin:["paihangbang_json"],GuaQiaRankSkin:["chongwu_json"],BossTipsSkin:["chongwu_json"],KaiFuJiJieRankWinSkin:["chongwu_json"],GangListSkin:["guankia_json"],RoleSuitTipSkin:["js_json","tips_json"],RechargeFeedbackSkin:["ui_lchk_bm_bj"],DeityEquipAwakeSkin:["shenzhuang_json","duanzao_json"],HavingCard:["ui_bm_zjm_songxuannv"],GameMapSkin:["huodongdating_json"],CatchPetResultFailSkin:["ui_zd_bm_ku","zd_json","ui_zd_bm_taizi"],ChatUeseItem:["dati_json","wanjiaxiangqing_json"],KaiFuQiTianActivityPanelSkin:["qitianzunxiang_json"],FormationAllAttrSkin:["name_bg_json"],Btn1Skin:["zd_json"],BagEquipTypeSkin:[],AcitivityAdvanceTips:["ui_yg_bm_jct"],RoleSuitEquipItemSkin:["chibang_json","taozhuang_json"],ShouDaoXianHuaSkin:["ui_yy_bm_qiuhuenBG"],RechargeAwardSkin:["ui_czth_bm_biaotou","chongzhitehui_json","ui_czth_bm_tupian02","ui_czth_bm_tupian01"],RoleElixirSkin:["jineng_json","ui_bm_jinengwenli"],CityTypeSkin:["huodongdating_json"],FubenSkin:["youjian_json"],GBattleDragonGuardSkin:["zuoqi_json"],DestinyShowRectSkin:["mingge_json","zd_json"],AuctionItemSkin:["paimaihang_json"],ConsumptionPanelSkin:["ui_yyhd_bm_xiaofeiyouliBG","fuben_json"],LingLongTaItem:["fuben_json","name_bg_json"],AuctionRecordPanelSkin:[],CommonRewardsWin:[],LingLongTaItemSkin:["fuben_json","name_bg_json"],CrossBattleTeam:["huodongdating_json","shangcheng_json"],VipMainSkin:["ui_vip_bm_banner","vip_json","zuoqi_json","chongzhi_json"],GangMineTeamItemSkin:["shenjiang_json","huodongdating_json"],CangbaotuSkin:["name_bg_json","ui_fb_bm_cangbaotubg","fuben_json"],KaiFuQiTianShopPanelSkin:["jinjiekuanghuan_json","shangcheng_json"],BtnTab29Skin:["kuafuwangzhe_json"],warnFrameSkin:[],RankingValueItemSkin:["js_json","paihangbang_json"],ConsumptionItemSkin:["fuben_json"],DailyFomalhautTaskSkin:["name_bg_json","ui_smrw_bm_bg","shimenrenwu_json"],KaiFuQiTianOtherPanelSkin:["fuben_json"],PetZizhiSkin:["name_bg_json","zuoqi_json","chongwu_json","jiesuan_json"],ShouDaoSkin:["yinyuan_json","ui_yy_bm_qiuhuenBG","boss_json"],GangSkillListSkin:["guankia_json","ui_bm_jinengwenli","duanzao_json","jineng_json"],FuliMainSkin:["jineng_json","fulidating_json"],DestinyShowSkin:["mingge_json","zd_json"],MiniChatPanelSkin:[],KaiFuLeiJiReChargePanelSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","fuben_json"],RechargeProgressBarSkin:["zuoqi_json"],ShopEquipSkin:["shangcheng_json"],KaiFuTargetPowerPanelSkin:["ui_kfhd_bm_zhanliBanner","fuben_json"],RechargeAwardBtnSkin:["chongzhitehui_json"],AcrossBossBoxSkin:["chongzhi_json"],MainPlayFunViewSkin:["ui_yy_btn_xitie","ui_yy_btn_xianhua","ui_dt_bt_keju","ui_yy_btn_qiuhuen","ui_bm_xuannvxiafan","ui_bm_zjm_songxuannv"],ForgeMasterBtnSkin:["duanzao_json"],GameBattleBtnSkin:["11001","zd_json"],FbRankSkin:["fuben_json"],GangDefendListItemSkin:["guankia_json","chongwu_json"],PetXilianItemSkin:["jineng_json","ui_skill_31","chongwu_json"],DestinyNiSkin:["mingge_json"],TianShenInactiveSkin:["shenjiang_json","name_bg_json","zuoqi_json","chongwu_json","jineng_json"],BtnN5Skin:["shitu_json"],FormationSoulSkin:["zuoqi_json","name_bg_json","duanzao_json"],MainBottomPanelSkin:["ui_bm_icombg1-46"],DailyInfoSkin:["xiyoulilian_json","zuoqi_json","boss_json","chongwu_json"],LingtongSkillDecsSkin:["ui_skill_31"],MailListSkin:["youjian_json"],RmbGiftPanelSkin:["ui_yyhd_bm_shiyuanlibaoBG","yunyinghuodong_json"],FuliSignBoardItemSkin:["fuben_json"],GBattleGangRankSkin:["chongwu_json"],ShopCommonItemSkin:["shangcheng_json"],ShowPanelSkin:["boss_json"],XiandaoVideoItemSkin:["xiandaohui_json"],PetSkillIconSkin:["ui_skill_31","chongwu_json"],ItemUseTipsSkin:[],GBattleOutsiderSceneSkin:["huodongdating_json","kuafubangzhan_json","boss_json"],GangMineTeamRoleItemSkin:["shenjiang_json","boss_json"],PetRenameSkin:[],SmeltMainSkin:["ui_bm_shuoming"],PersonBossSkin:["boss_json","name_bg_json"],FriendItemSkin:["haoyou_json","boss_json"],DailyBoxSkin:["xiyoulilian_json","fuben_json"],CrossBattleResultWinSkin:["ui_bm_shengli","jiesuan_json"],PetTuJianItemIconSkin:["chongwu_json"],LingLongTa:["fuben_json","ui_fb_bm_linglongbaotabg"],KaiFuQiTianAwardItemSkin:["fuben_json"],CrossBattleTeamItemSkin:["huodongdating_json","shangcheng_json","boss_json"],PetXilianTip2Skin:[],FormationInfoSkin:["name_bg_json","zuoqi_json","zhenxing_json","chongwu_json","ui_skill_31"],DailyChargeGiftSkin:["ui_mrhl_bm_bj"],PetBattleSkin:["chongwu_json"],LastWeekRankItemSkin:["kuafuwangzhe_json"],PetAllAttrSkin:["name_bg_json"],ChestSkin:["youjian_json"],PetNameSkin:["chongwu_json"],RoleAttrSkin:["jineng_json"],GuanqiajiangliSkin:["ui_bm_diwen","guankia_json"],TianShenBaoQiSkin:["xianlv_json","shenjiang_json","name_bg_json","zuoqi_json","ui_sj_bm_wenli"],LadderInfoPanelSkin:["name_bg_json","kuafuwangzhe_json","boss_json"],GameBattleBtn2Skin:["11001","zd_json"],HavingUpLevelSkin:["zuoqi_json","name_bg_json","jineng_json","chongwu_json"],EquipTipsSkin:["tips_json"],TeacherShowReItemSkin:["chongwu_json"],LingtongUpLevelSkin:["zuoqi_json","name_bg_json","chongwu_json","ui_skill_31"],QujingMainSkin:["qujingdonggui_json","ui_qj_bm_ditu"]},KaiFuJiJieRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuJiJieRankPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuJiJieRankPanelItem,this.list0.itemRenderer=ItemBaseNotName},t.prototype.OnOpen=function(){GameGlobal.ActivityKaiFuModel.Send_advanced_rank(),this.AddClick(this.getwayLabel,this._OnClick),this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateContent),this.observe(MessageDef.ACTIVITY_ADVANCED_RANK,this.UpdateContent),this.AddTimer(1e3,0,this.updateTime),this.UpdateContent(),this.updateTime()},t.GetUpdateTime=function(e){if(e==ActivityKaiFuJiJieType.lingtong){var t=void 0;9==GameServer.serverOpenDay?t=GameServer._dayEnd3Time:10==GameServer.serverOpenDay?t=GameServer._dayEnd2Time:11==GameServer.serverOpenDay&&(t=GameServer.dayEndTime);var i=DateUtils.format_1(t-GameServer.serverTimeMilli);return i}var i=DateUtils.format_1(GameServer.dayEndTime-GameServer.serverTimeMilli);return i},t.prototype.updateTime=function(){var e=t.GetUpdateTime(this.jijieType);this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动倒计时：|C:0x019704&T:"+e+"|")},t.prototype.getReward=function(){var e=this.jijieType,t=GameGlobal.Config.ProgressCrazyRandConfig,i=[],o=t[e];for(var n in o)if(o.hasOwnProperty(n)){var a=o[n],r={};if(r.type=e,r.cfg=a,i.push(r),i.length>=4)return i}return i},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible){var e=this.jijieType,t=this.getReward(),i=t.shift();if(i){this.list.dataProvider=new eui.ArrayCollection(t),this.list0.dataProvider=new eui.ArrayCollection(i.cfg.showreward),this.item.data=i.cfg.showitem,this.ranktips_txt.text=i.cfg.des,this.rankAward_txt.text=i.cfg.des2;var o="|C:"+Color.GetStr(Color.l_green_1)+"&T:"+GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(e)+" 阶|";this.lv_txt.textFlow=TextFlowMaker.generateTextFlow("当前"+ActivityConst.JiJieTypeName(e)+"阶数："+o);var n=GameGlobal.ActivityKaiFuModel.advancedRank[0];this.roleShowPanel.hideAllPanel(),n?(this.name_txt.text=GameString.GetSerAndName(n.serverid,n.name),this.powerLabel.text=n.power,n.outcircle?(this.roleShowPanel.scaleX=this.roleShowPanel.scaleY=.8,this.roleShowPanel.y=85):(this.roleShowPanel.scaleX=this.roleShowPanel.scaleY=1,this.roleShowPanel.y=59),RankingWin.showRolePanel(this.roleShowPanel,ActivityConst.ActivityKaiFuJiJieRankType[e],n),this.roleShowPanel.setName("",16734464)):(this.name_txt.text="暂无",this.powerLabel.text=0),this.title_img.source=i.cfg.titleicon||""}}},t.prototype.getShowById=function(e){var t=new RoleShowData;return t.job=e.job,t.sex=e.sex,t.rideId=RoleShowData.GetRideAppId(e.outride),0!=e.skin&&(t.clothID=RoleShowData.GetBodyAppId(e.skin,e.job,e.sex)),RoleShowData.GetSwordAppId(e.outweapon,e.job,e.sex),t},t.prototype.msgPrompt=function(e){},t.prototype._OnClick=function(e){e.currentTarget==this.getwayLabel&&GameGlobal.ActivityKaiFuModel.OpenAdvancedPanel(this.jijieType)},t}(BaseView);__reflect(KaiFuJiJieRankPanel.prototype,"KaiFuJiJieRankPanel");var KaiFuJiJieRankPanelItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.getwayLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){ViewManager.ins().open(KaiFuJiJieRankWin,this.data.type)},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg);this.list.dataProvider=new eui.ArrayCollection(e.showreward),this.item.data=e.showitem,this.tips_txt.text=e.des;var t=e.id-1;if(e.id<=3){1==e.id?this.rank_txt.textColor=Color.Cyan:2==e.id?this.rank_txt.textColor=Color.Red:3==e.id&&(this.rank_txt.textColor=Color.Blue);var i=GameGlobal.ActivityKaiFuModel.advancedRank[t];i?(this.name_txt.text=GameString.GetSerAndName(i.serverid,i.name),this.powerTxt.text="战 "+i.power):(this.name_txt.text="暂无",this.powerTxt.text=""),this.rank_txt.text="第"+StringUtils.numTenToChinese(e.id)+"名"}else this.rank_txt.text="4~20名",this.name_txt.text="",this.powerTxt.text="";this.getwayLabel.visible=""==this.name_txt.text},t}(eui.ItemRenderer);__reflect(KaiFuJiJieRankPanelItem.prototype,"KaiFuJiJieRankPanelItem");var KaiFuJiJieShopPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuJiJieShopPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuJiJieShopItem,this.list.dataProvider=new eui.ArrayCollection},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateContent),this.AddTimer(1e3,0,this.updateTime),this.UpdateContent(),this.updateTime()},t.prototype.updateTime=function(){var e=DateUtils.format_1(GameServer.dayEndTime-GameServer.serverTimeMilli);this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动倒计时：|C:0x2dff42&T:"+e+"|")},t.prototype.OnClose=function(){TimerManager.ins().removeAll(this)},t.prototype.UpdateContent=function(){if(this.visible){var e=(this.jijieType,this.getShopList()),t=function(e){var t=GameGlobal.ActivityKaiFuModel.advancedInfo.getBuyNum(e.cfg.shopid);return 2!=e.cfg.type.type&&e.cfg.type.value<=t?e.cfg.shopid+1e3:GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(e.cfg.value.type)>=e.cfg.value.value?e.cfg.shopid-1e3:e.cfg.shopid};e.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider.replaceAll(e)}},t.prototype.getShopList=function(){var e=this.jijieType,t=GameGlobal.Config.ProgressCrazyShopConfig,i=[],o=t[e];for(var n in o)if(o.hasOwnProperty(n)){var a=o[n],r={};r.type=e,r.cfg=a,i.push(r)}return i},t.prototype._OnClick=function(e){},t}(BaseView);__reflect(KaiFuJiJieShopPanel.prototype,"KaiFuJiJieShopPanel",["ICommonWindow"]);var KaiFuJiJieShopItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){return""!=this.info.text?void UserTips.InfoTip("进阶条件不满足"):void(Checker.Money(this.data.cfg.gold.id,this.data.cfg.gold.count,!0)&&GameGlobal.ActivityKaiFuModel.Send_advanced_buy(this.data.cfg.shopid,1,this.data.cfg.orderid))
},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg);this.itemIcon.isShowName(!1),this.itemIcon.data=e.itemid,this.itemIcon.setCount(e.count);var t=GameGlobal.Config.ItemConfig[e.itemid];this.name_txt.textColor=ItemBase.QUALITY_COLOR[t.quality],this.name_txt.text=t.name;var i=e.value;this.imgBuyEnd.visible=!1;var o=0;GameGlobal.ActivityKaiFuModel.GetMyAdvancedLevel(i.type)<i.value?100==i.type?this.info.text="VIP"+i.value+"解锁":this.info.text=ActivityConst.JiJieTypeName(i.type)+"达到"+i.value+"阶解锁":(this.info.text="",o=GameGlobal.ActivityKaiFuModel.advancedInfo.getBuyNum(e.shopid),2!=e.type.type&&e.type.value<=o&&(this.imgBuyEnd.visible=!0)),2==e.type.type?this.times_txt.text="":this.times_txt.text="限购("+o+"/"+e.type.value+")",this.buy.visible=this.imgBuyEnd.visible||""!=this.info.text?!1:!0,this.priceIcon1.text=CommonUtils.overLength(e.showgold),this.priceIcon2.text=CommonUtils.overLength(e.gold.count),this.priceIcon1.type=this.priceIcon2.type=e.gold.id,this.mark.visible=e.mark,this.mark.visible&&(this.disPirce_txt.text=e.mark+"折")},t}(eui.ItemRenderer);__reflect(KaiFuJiJieShopItem.prototype,"KaiFuJiJieShopItem");var KaiFuLeiJiReChargePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuLeiJiReChargePanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuLeiJiReChargeItem},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateContent),this.AddClick(this.getwayLabel,this._OnClick),this.AddTimer(1e3,0,this.updateTime),this.UpdateContent(),this.updateTime()},t.prototype.updateTime=function(){var e=KaiFuJiJieRankPanel.GetUpdateTime(this.jijieType);this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动倒计时：|C:0x2dff42&T:"+e+"|")},t.prototype.getReward=function(){var e=this.jijieType,t=GameGlobal.Config.ProgressCrazyRechargeConfig,i=[],o=t[e];for(var n in o)if(o.hasOwnProperty(n)){var a=o[n],r={};r.type=e,r.cfg=a,r.weight=a.id;var s=GameGlobal.ActivityKaiFuModel.advancedInfo.dayChargeValue>=a.money,l=GameGlobal.ActivityKaiFuModel.advancedInfo.GetChargeReward(a.id);s?l?r.weight+=1e3:r.weight-=1e3:l&&(r.weight+=1e3),i.push(r)}return i},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible){var e=(this.jijieType,this.getReward());SortTools.sortMap(e,"weight"),this.list.dataProvider=new eui.ArrayCollection(e),this.allReCharge_label.text="累计充值："+GameGlobal.ActivityKaiFuModel.advancedInfo.dayChargeValue+"元"}},t.prototype._OnClick=function(e){e.currentTarget==this.getwayLabel&&RechargeWin.Open()},t}(BaseView);__reflect(KaiFuLeiJiReChargePanel.prototype,"KaiFuLeiJiReChargePanel");var KaiFuLeiJiReChargeItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onClick=function(e){"领 取"==this.btn.label&&GameGlobal.ActivityKaiFuModel.Send_advanced_charger_reward(this.data.cfg.id)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=(this.data.type,this.data.cfg),i=this.data.weight;this.tipsTxt.text="累计充值"+t.money+"元",this.btn.visible=100>i,this.btn.label=i>0&&100>i?"未达成":"领 取",UIHelper.ShowRedPoint(this.btn,0>i),this.getted_img.visible=!this.btn.visible},t}(KaiFuJiJieAwardItem);__reflect(KaiFuLeiJiReChargeItem.prototype,"KaiFuLeiJiReChargeItem");var SceneManager=function(){function e(){}return e.ins=function(){return this._ins||(this._ins=new e),this._ins},e.prototype.clear=function(){var e=this._currScene;e&&(e.onExit(),this._currScene=void 0)},e.prototype.runScene=function(e){if(null==e)return void console.log("runScene:scene is null");var t=this._currScene;t&&(t.onExit(),t=void 0);var i=new e;i.onEnter(),this._currScene=i},e.prototype.getCurrScene=function(){return this._currScene},e}();__reflect(SceneManager.prototype,"SceneManager");var KaiFuTargetFightPanel=function(e){function t(){var t=e.call(this)||this;return t.canGetCount=0,t.skinName="KaiFuTargetFightPanelSkin",t.activityType=ActivityKaiFuFuncType.ACT_22_OrangePetTarget,t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,114),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=TargetGuanQiaItem,this.list.dataProvider=new eui.ArrayCollection,this.awardList.itemRenderer=ItemBaseNotName,this.awardList.dataProvider=new eui.ArrayCollection,this.bar.snapInterval=0,this.bar.maximum=100,this.bar.labelFunction=function(e,t){return""}},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.list.selectedIndex=-1,this.AddClick(this.getwayLabel,this._OnClick),this.AddClick(this.challenge_btn,this._OnClick),this.AddClick(this.leftBtn,this._OnClick),this.AddClick(this.rightBtn,this._OnClick),this.AddItemClick(this.list,this.itemClick),this.UpdateContent(),this.AddLoopTimer(1e3,this.updateTime),this.list.selectedIndex>=5&&this.mListLRBtnCtrl.SetLeftIndex(5),this.mListLRBtnCtrl.OnRefresh(),this.setAwardPetIcon()},t.prototype.setAwardPetIcon=function(){var e=ActivityConst.GetConfigByActityType(this.activityType)[this._activityId],t=e[0].showitem2;this.awardPetIcon.data=t.id,this.awardPetName_label.text=e[0].showtext},t.prototype.itemClick=function(e){this.setCurInfo()},t.prototype.UpdateContent=function(){if(this.visible&&this._activityId){var e=this.getReward();this.list.dataProvider.replaceAll(e),-1==this.list.selectedIndex&&(this.list.selectedIndex=0),this.setCurInfo(),this.setProgressBarData()}},t.prototype.setProgressBarData=function(){var e=0;e=1==this.leftBtn.visible?this.canGetCount>=5?5:this.canGetCount-1:this.canGetCount>5?this.canGetCount-5-1:-1,this.bar.value=25*e;for(var t=0;t<this.progressIconGroup.numChildren;t++)e>=t?this.progressIconGroup.getChildAt(t).source="ui_yuan":this.progressIconGroup.getChildAt(t).source="ui_yuan_quse"},t.prototype.setCurInfo=function(){var e=this.list.selectedItem;if(null!=e){var t=e.cfg,i=t.showreward;this.roleShowpanel.Clear(),t.bossid&&this.roleShowpanel.SetBody(PetConst.GetSkin(t.bossid)),this.guanQia_label.text="第 "+t.gid+" 关";var o=GameGlobal.Config.petBiographyConfig[t.bossid];null!=o&&(this.powerLabel.text=ItemConfig.CalcAttrScoreValue(o.attrs)),this.challenge_btn.label="挑 战",this.awardList.dataProvider=new eui.ArrayCollection(i);var n=GameGlobal.ActivityKaiFuModel.GetActivityDataById(t.Id);if(null!=n){var a=n.canGetRecordByIndex(t.gid),r=n.GetRecordByIndex(t.gid);this.challenge_btn.visible=!0,this.hasGet_img.visible=!1,a&&!r?this.challenge_btn.label="领 取":a||r?r&&(this.challenge_btn.visible=!1,this.hasGet_img.visible=!0):this.challenge_btn.label="挑 战",UIHelper.ShowRedPoint(this.challenge_btn,a&&!r)}}},t.prototype.updateTime=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);e?this.time_txt.textFlow=TextFlowMaker.generateTextFlow(e.getRemindTimeString()):this.time_txt.text="活动未开启"},t.prototype.getReward=function(){this.canGetCount=0;var e,t=[],i=ActivityConst.GetConfigByActityType(this.activityType)[this._activityId],o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),n=i.length;for(e=0;n>e;e++){var a=i[e];if(a.Id==this._activityId){var r={};if(r.cfg=a,r.actType=this.activityType,o){var s=o.canGetRecordByIndex(a.gid),l=o.GetRecordByIndex(a.gid);(s||l)&&this.canGetCount++,-1==this.list.selectedIndex&&(s||l||(this.list.selectedIndex=e))}t.push(r)}}return t},t.prototype._OnClick=function(e){if(null!=this.list.selectedItem){var t=this.list.selectedItem;if(e.currentTarget==this.getwayLabel){var i=t.cfg.bossid,o=GameGlobal.Config.petBiographyConfig[i];o&&ViewManager.ins().open(PetInfoPanel,o)}else e.currentTarget==this.challenge_btn?"挑 战"==this.challenge_btn.label?GameGlobal.ActivityKaiFuModel.sendPetFightInfo(t.cfg.Id):"领 取"==this.challenge_btn.label&&GameGlobal.ActivityKaiFuModel.sendReward(t.cfg.Id,t.cfg.gid):e.currentTarget==this.leftBtn?this.setProgressBarData():e.currentTarget==this.rightBtn&&this.setProgressBarData()}},t.prototype.OnClose=function(){},t}(BaseView);__reflect(KaiFuTargetFightPanel.prototype,"KaiFuTargetFightPanel");var TargetGuanQiaItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){if(null!=this.data){var e=(this.data.type,this.data.cfg),t=e.showitem.id,i=GameGlobal.Config.ItemConfig[t];this.item.setData(i),this.lbName.text=i.name,this.lbName.textColor=ItemBase.QUALITY_COLOR[i.quality];var o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(e.Id);if(o){var n=o.canGetRecordByIndex(e.gid),a=o.GetRecordByIndex(e.gid);this.hasGetAward_img.visible=n||a,UIHelper.ShowRedPoint(this,n&&a)}}},t}(eui.ItemRenderer);__reflect(TargetGuanQiaItem.prototype,"TargetGuanQiaItem");var KaiFuTargetFuncTargetPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuTargetFuncTargetSkin",t.activityType=ActivityKaiFuFuncType.ACT_17_ArenaTarget,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuTargetFuncTargetItem},t.prototype.OnOpen=function(){this.UpdateContent(),this.AddLoopTimer(1e3,this.updateTime)},t.prototype.updateTime=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);e?this.time_txt.textFlow=TextFlowMaker.generateTextFlow(this.getRemindTimeString()):this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动未开启")},t.prototype.getRemindTimeString=function(){var e=GameServer.serverTimeMilli,t=new Date(e);return t.setHours(0,0,0,0),t.setDate(t.getDate()+1),"倒计时：|C:0x2dff42&T:"+DateUtils.format_1(t.getTime()-e)+"|"},t.prototype.getReward=function(){var e,t=Math.min(GameServer.serverOpenDay,7),i=ActivityConst.GetQiTianActivityIds(t,1),o=[],n=i.length,a=!1;for(e=0;n>e;e++){var r=ActivityConst.GetCfgObjByValue(i[e]);a||(this.ShowDesc(r),a=!0);var s=GameGlobal.ActivityKaiFuModel.GetActivityDataById(r.Id),l={};if(l.cfg=r,l.weight=r.index,s){var c=s.canGetRecordByIndex(r.index),u=s.GetRecordByIndex(r.index);c?u?l.weight+=1e3:l.weight-=1e3:u&&(l.weight+=1e3)}o.push(l)}return o},t.prototype.ShowDesc=function(e){var t=e.type,i=[];switch(t){case"arenarank":i=["竞技场排名：",GameGlobal.Arena.getMyRank()];break;case"wildgeese":i=["玲珑宝塔层数：",GameGlobal.UserFb.GetLinglongLayer()];break;case"chapter":i=["关卡关数：",GameGlobal.UserFb.guanqiaID||0];break;case"heaven":i=["勇闯天庭：",GameGlobal.UserFb.tFbTiantingServerData?GameGlobal.UserFb.tFbTiantingServerData.todayLayer:0];break;case"treasuremap":i=["藏宝图层数：",Math.max(FbCbtPanel.GetLastNum()-1,1)];break;case"petcount":i=["宠物数量：",GameGlobal.PetModel.GetActiveCount()]}var o="";i.length&&e.info&&e.info.text?(o=e.info.text.replace("%s","|C:0x2dff42&T:"+i[1]+"|"),this.value_txt.textFlow=TextFlowMaker.generateTextFlow(o)):this.value_txt.text=""},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible){var e=this.getReward();SortTools.sortMap(e,"weight"),this.list.dataProvider=new eui.ArrayCollection(e)}},t.RedPoint=function(e){var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(15);if(t){var i=t.GetConfig();for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];if(n.day!=e)continue;if(t.canGetRecordByIndex(n.index))return!0}}return!1},t.prototype._OnClick=function(e){},t}(BaseView);__reflect(KaiFuTargetFuncTargetPanel.prototype,"KaiFuTargetFuncTargetPanel");var KaiFuTargetFuncTargetItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuQiTianAwardItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){var t=this.data.cfg;"领 取"==this.btn.label?GameGlobal.ActivityKaiFuModel.sendReward(t.Id,t.index):"前 往"==this.btn.label&&t.gainway&&GameGlobal.ViewManager.Guide(t.gainway[0][1][0])},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg),t=this.data.weight;this.data.actType;this.tipsTxt.text=e.des.replace("%s",e.value),this.list.dataProvider=new eui.ArrayCollection(e.rewards);var i=Math.min(GameServer.serverOpenDay,7);i>GameServer.serverOpenDay&&GameServer.serverOpenDay<=7?(this.tip2.text="明日开启",this.getted_img.visible=!1,this.btn.visible=!1):(this.tip2.text="",this.btn.visible=100>t,this.btn.label=t>0&&100>t?e.gainway?"前 往":"未达成":"领 取",UIHelper.ShowRedPoint(this.btn,0>t),this.getted_img.visible=!this.btn.visible)},t}(eui.ItemRenderer);__reflect(KaiFuTargetFuncTargetItem.prototype,"KaiFuTargetFuncTargetItem");var KaiFuTargetPowerPanel=function(e){function t(){var t=e.call(this)||this;return t.activityType=ActivityKaiFuFuncType.ACT_20_RechargeGroupon,t.skinName="KaiFuTargetPowerPanelSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){e.prototype.UpdateContent.call(this),this.value_txt.text="当前战力："+CommonUtils.overLength(GameGlobal.actorModel.power)},t}(KaiFuTargetBasePanel);__reflect(KaiFuTargetPowerPanel.prototype,"KaiFuTargetPowerPanel");var KaiFuTargetReChargePanel=function(e){function t(){var t=e.call(this)||this;return t.activityType=ActivityKaiFuFuncType.ACT_3_RechargeContinue,t.skinName="KaiFuTargetReChargePanelSkin",t}return __extends(t,e),t.prototype._OnClick=function(e){RechargeWin.Open()},t}(KaiFuTargetBasePanel);__reflect(KaiFuTargetReChargePanel.prototype,"KaiFuTargetReChargePanel");var KaiFuTargetShopPanel=function(e){function t(){var t=e.call(this)||this;return t.curLookAttrs=[],t.activityType=ActivityKaiFuFuncType.ACT_26_DisCountShop,t.skinName="KaiFuTargetShopSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuTargetShopItem,this.roleShowPanel.scaleX=.7,this.roleShowPanel.scaleY=.7},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_TARGET_ShOP_LOOK,this.upDataLook),this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent),e.prototype.OnOpen.call(this),t.curLookIndex=-1},t.prototype.upDataLook=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e){var o=e[0];if(2==o.stype){var n=GameGlobal.XianlvModel.GetXianlvInfo(o.pid);if(!n)return;this.attrs_label.text="战力：\n"+n.GetPower(1),this.imageShow_img.source="",this.roleShowPanel.ClearCache(),this.roleShowPanel.y=433,this.roleShowPanel.SetBody(AppearanceConfig.GetUIPath(o.pid))}else{t.curLookIndex=o.index;var a=o.pid,r=o.itemtype,s=this.getSkinConfig(r,a);if(null==s)return;this.attrs_label.text="战力：\n"+ItemConfig.CalcAttrScoreValue(s.attrpower),this.roleShowPanel.ClearCache(),this.imageShow_img.source="",r==RoleShowDataType.ROLE_TITLE?this.imageShow_img.source=s.icon+"":r==RoleShowDataType.ROLE_TIANXIAN?(this.roleShowPanel.y=370,this.roleShowPanel.SetBody(AppearanceConfig.GetUIPath(s.pid))):(this.roleShowPanel.y=433,this.roleShowPanel.SetAll(this.getShowById(r,s.pid))),this.UpdateContent()}}},t.prototype.getSkinConfig=function(e,t){var i;if(e==RoleShowDataType.ROLE_TITLE)i=GameGlobal.Config.TitleConf;else if(e==RoleShowDataType.ROLE_RIDE)i=GameGlobal.Config.RideSkinConfig;else if(e==RoleShowDataType.ROLE_WING)i=GameGlobal.Config.WingSkinConfig;else if(e==RoleShowDataType.ROLE_SWORD)i=GameGlobal.Config.WeaponSkinConfig;else if(e==RoleShowDataType.ROLE_TIANXIAN)i=GameGlobal.Config.FairySkinConfig;else if(e==RoleShowDataType.ROLE_SKIN)return i=GameGlobal.Config.FashionSkinConfig,i[t][GameGlobal.actorModel.sex];return i[t]},t.prototype.getShowById=function(e,t){var i=SubRoles.ins().GetRoleData(),o=i.GetSubRoleData(),n=new RoleShowData;return n.job=o.job,n.sex=o.sex,n.rideId=o.rideId,n.wingId=o.wingId,n.clothID=o.clothID,n.swordID=o.swordID,n.tianxId=0,e==RoleShowDataType.ROLE_RIDE?n.rideId=t:e==RoleShowDataType.ROLE_WING?n.wingId=t:e==RoleShowDataType.ROLE_SWORD?n.swordID=t:e==RoleShowDataType.ROLE_SKIN&&(n.clothID=t),n},t.prototype.UpdateContent=function(){e.prototype.UpdateContent.call(this)},t.curLookIndex=-1,t}(KaiFuTargetBasePanel);__reflect(KaiFuTargetShopPanel.prototype,"KaiFuTargetShopPanel");var KaiFuTargetShopItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn_look.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.gainway_txt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){if(e.currentTarget==this.btn_buy){if(!Checker.Money(this.data.cfg.gold.id,this.data.cfg.gold.count,!0))return;GameGlobal.ActivityKaiFuModel.sendReward(this.data.cfg.Id,this.data.cfg.index)}else if(e.currentTarget==this.btn_look)GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_TARGET_ShOP_LOOK,this.data.cfg);else if(e.currentTarget==this.gainway_txt){var t=this.data.cfg;GameGlobal.ViewManager.Guide(t.gainway[0][1][0])}},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg),t=(this.data.actType,GameGlobal.ActivityKaiFuModel.GetActivityDataById(e.Id));this.itemIcon.data=e.itemid,this.itemIcon.isShowName(!1),this.itemIcon.setCount(e.count);var i=GameGlobal.Config.ItemConfig[e.itemid];this.name_txt.textColor=ItemBase.QUALITY_COLOR[i.quality],this.name_txt.text=i.name;var o=0;this.btn_look.visible=!0,KaiFuTargetShopPanel.curLookIndex==e.index&&(this.btn_look.visible=!1),2==e.type.type?this.limit_txt.text="不限购":(t&&(o=t.buynums[e.index-1]),this.limit_txt.text="限购（"+o+"/"+e.type.value+"）");e.value;this.imgBuyEnd.visible=!1,2!=e.type.type&&e.type.value<=o?this.imgBuyEnd.visible=!0:-1==KaiFuTargetShopPanel.curLookIndex&&(KaiFuTargetShopPanel.curLookIndex=e.index,GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_TARGET_ShOP_LOOK,e)),this.btn_buy.visible=this.imgBuyEnd.visible?!1:!0,this.priceIcon1.text=e.showgold,this.priceIcon2.text=e.gold.count,e.gainway&&(this.gainway_txt.text=e.gainway[0][0],UIHelper.SetLinkStyleLabel(this.gainway_txt,e.gainway[0][0])),this.gainway_txt.visible=e.gainway},t}(eui.ItemRenderer);__reflect(KaiFuTargetShopItem.prototype,"KaiFuTargetShopItem");var KaiFuTargetTeamBuyPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuTargetTeamBuyPanelSkin",t.activityType=ActivityKaiFuFuncType.ACT_21_OutdrawDiscountShop,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=KaiFuTargetBaseAwardItem,this.tabBar.dataProvider=new eui.ArrayCollection(["团购10人","团购20人","团购60人","团购100人","团购200人"]),this.tabBar.selectedIndex=0,this.tabBar.validateNow()},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.AddItemClick(this.tabBar,this.changeTab)},t.prototype.changeTab=function(e){this.UpdateContent()},t.prototype.getReward=function(){var e,t=GameGlobal.Config.ActivityType21Config[this._activityId],i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),o=[],n=[10,20,60,100,200],a=[!1,!1,!1,!1,!1],r=n[this.tabBar.selectedIndex],s=t.length;for(e=0;s>e;e++){var l=t[e],c=void 0,u=void 0;if(i&&(c=i.canGetRecordByIndex(l.index),u=i.GetRecordByIndex(l.index)),c&&!u&&(a[n.indexOf(l.type)]=!0),r==l.type){var p={};p.cfg=l,p.weight=l.Id,p.actType=this.activityType,c?u?p.weight+=1e3:p.weight-=1e3:u&&(p.weight+=1e3),o.push(p)}}for(s=a.length,e=0;s>e;e++)this.tabBar.getChildAt(e)&&(this.tabBar.getChildAt(e).getChildAt(1).visible=a[e]);return o},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){e.prototype.UpdateContent.call(this),this.allReCharge_label.text="今日充值：0";var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);if(t){this.allReCharge_label.text="今日充值："+t.rechargeNum,this.people_txt.text=t.people+"人";var i=this.tabBar.dataProvider,o=void 0,n=i.length;for(o=0;n>o;o++)this.tabBar.getChildAt(o).redPoint=t.canGetRecordByIndex(o+1)}else this.people_txt.text="0人"},t.prototype._OnClick=function(e){RechargeWin.Open()},t}(KaiFuTargetBasePanel);__reflect(KaiFuTargetTeamBuyPanel.prototype,"KaiFuTargetTeamBuyPanel");var KaiFuTargetUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.activityType=ActivityKaiFuFuncType.ACT_1_Upgrade,t.skinName="KaiFuTargetUpLevelPanelSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){e.prototype.UpdateContent.call(this),this.value_txt.text="当前等级："+GameGlobal.actorModel.level},t}(KaiFuTargetBasePanel);__reflect(KaiFuTargetUpLevelPanel.prototype,"KaiFuTargetUpLevelPanel");var KaiFuQiTianActivityPanel=function(e){function t(){var t=e.call(this)||this;return t.index=-1,t.tabDatas=[{cls:KaiFuQiTianFuLiPanel,label:"每日福利"},{cls:KaiFuQiTianShopPanel,label:"低价贩售"}],t.dayListData=[{id:1,day:1},{id:2,day:2},{id:3,day:3},{id:4,day:4},{id:5,day:5},{id:6,day:6}],t.skinName="KaiFuQiTianActivityPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=[];e.push(TabView.CreateTabViewData(KaiFuQiTianFuLiPanel)),e.push(TabView.CreateTabViewData(KaiFuQiTianShopPanel)),this.tabEuiView.tabChildren=e,this.dayList.itemRenderer=QiTianDayButtonItem,this.dayList.dataProvider=new eui.ArrayCollection(this.dayListData),this.tabBar.itemRenderer=QiTianTabItem,this.tabBar.dataProvider=new eui.ArrayCollection(this.tabDatas)},t.prototype.OnOpen=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.AddTimer(1e3,0,this.updateTime),t.OPEN_SHOW_DAY=Math.min(GameServer.serverOpenDay,7),this.index=0,this.AddItemClick(this.dayList,this.OnClickDayMenu),this.AddItemClick(this.tabBar,this.OnClickTabMenu),this.AddClick(this.sevenDay_btn,this.onClick),this.AddClick(this.look_btn,this.onClick),this.UpdateContent(),this.updateTime();var o,n=GameGlobal.Config.WeekEnjoyBaseConfig.petid;o=0==(n+"").indexOf("9")?GameGlobal.Config.petBiographyConfig[n]:GameGlobal.Config.partnerBiographyConfig[n],o&&this.petShowPanel.SetBody(PetConst.GetSkin(o.id)),this.petShowPanel.scaleX=-.4,this.petShowPanel.scaleY=.4},t.prototype.updateTime=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataByType(ActivityKaiFuFuncType.ACT_17_ArenaTarget);e?this.time_label.textFlow=TextFlowMaker.generateTextFlow(e.getRemindTimeString()):this.time_label.text="活动未开启"},t.prototype.UpdateContent=function(){GameServer.serverOpenDay;this.dayList.selectedIndex=t.OPEN_SHOW_DAY-1;var e,i=(GameGlobal.Config.WeekEnjoyBaseConfig.name[t.OPEN_SHOW_DAY-1],7);for(e=0;i>e;e++){var o=!1,n=void 0,a=this.tabDatas.length;for(n=0;a>n;n++){var r=this.tabDatas[n].cls.RedPoint(e+1);e+1==t.OPEN_SHOW_DAY&&(this.tabDatas[n].redPoint=r),r&&(o=!0)}e==i-1?UIHelper.ShowRedPoint(this.sevenDay_btn,o):this.dayListData[e].redPoint=o}this.dayList.dataProvider.replaceAll(this.dayListData),this.tabBar.dataProvider.replaceAll(this.tabDatas),7==t.OPEN_SHOW_DAY?(this.dayList.selectedIndex=-1,this.seventhDaySelected_icon.visible=!0):this.seventhDaySelected_icon.visible=!1,this.openPage(this.index)},t.prototype.OnClickDayMenu=function(e){var t=e.itemIndex+1;this.changeDayFunc(t)},t.prototype.changeDayFunc=function(e){var i=GameServer.serverOpenDay;return e>i+1?(this.dayList.selectedIndex=t.OPEN_SHOW_DAY-1,void UserTips.ins().showTips("活动未开启，请第"+e+"天再来")):(t.OPEN_SHOW_DAY=e,void this.UpdateContent())},t.prototype.OnClickTabMenu=function(e){this.index=e.itemIndex,this.UpdateContent()},t.prototype.onClick=function(e){if(e.currentTarget==this.look_btn){var t=GameGlobal.Config.WeekEnjoyBaseConfig.petid,i=void 0;0==(t+"").indexOf("9")?(i=GameGlobal.Config.petBiographyConfig[t],i&&ViewManager.ins().open(PetInfoPanel,i)):(i=GameGlobal.Config.partnerBiographyConfig[t],i&&ViewManager.ins().open(XianLvInfoPanel,i))}else e.currentTarget==this.sevenDay_btn&&this.changeDayFunc(7)},t.prototype.openPage=function(e){this.tabEuiView.selectedIndex=this.index,this.tabBar.selectedIndex==this.index&&this.tabEuiView.getElementAt(this.index).OnOpen(),this.tabBar.selectedIndex=this.index},t.prototype.OnClose=function(){this.tabEuiView.CloseView()},t.prototype.UpdateListRedPoint=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="七天尊享",t}(BaseEuiView);__reflect(KaiFuQiTianActivityPanel.prototype,"KaiFuQiTianActivityPanel",["ICommonWindowTitle"]);var QiTianDayButtonItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.labelDisplay.text="第"+this.data.day+"天",this.redPoint.visible=this.data.redPoint},t}(eui.ItemRenderer);__reflect(QiTianDayButtonItem.prototype,"QiTianDayButtonItem");var QiTianTabItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.labelDisplay.text=this.data.label,this.redPoint.visible=this.data.redPoint},t}(eui.ItemRenderer);__reflect(QiTianTabItem.prototype,"QiTianTabItem");var KaiFuQiTianFuLiPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuQiTianFuLiPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=QiTianFuLiAwardItem},t.prototype.OnOpen=function(){this.UpdateContent()},t.prototype.getReward=function(){var e=ActivityConst.GetQiTianActivityIds(KaiFuQiTianActivityPanel.OPEN_SHOW_DAY,0);return e},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible){var e=this.getReward();SortTools.sortMap(e,"weight"),this.list.dataProvider=new eui.ArrayCollection(e)}},t.RedPoint=function(e){var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(7);if(t&&t.canGetRecordByIndex(e))return!0;if(t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(8)){var i=t.GetConfig();for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];if(n.day!=e)continue;if(t.canGetRecordByIndex(n.index))return!0}}return!1},t.prototype._OnClick=function(e){},t}(BaseEuiView);__reflect(KaiFuQiTianFuLiPanel.prototype,"KaiFuQiTianFuLiPanel");var QiTianFuLiAwardItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){var t=ActivityConst.GetCfgObjByValue(this.data);"领 取"==this.btn.label?GameGlobal.ActivityKaiFuModel.sendReward(t.Id,t.index):"前 往"==this.btn.label&&t.gainway&&GameGlobal.ViewManager.Guide(t.gainway[0][1][0])},t.prototype.dataChanged=function(){var e=ActivityConst.GetCfgObjByValue(this.data);if(this.tipsTxt.text=e.des.replace("%s",e.value),this.list.dataProvider=new eui.ArrayCollection(e.rewards),KaiFuQiTianActivityPanel.OPEN_SHOW_DAY>GameServer.serverOpenDay&&GameServer.serverOpenDay<=7)this.tip2.text="明日开启",this.getted_img.visible=!1,this.btn.visible=!1;else{this.tip2.text="",this.getted_img.visible=!1,this.btn.visible=!0,this.btn.label=e.gainway?"前 往":"未达成";var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(e.Id);if(t){var i=t.canGetRecordByIndex(e.index),o=t.GetRecordByIndex(e.index);i&&(o||(this.btn.label="领 取")),this.getted_img.visible=o,UIHelper.ShowRedPoint(this.btn,i),this.btn.visible=!this.getted_img.visible,!i&&KaiFuQiTianActivityPanel.OPEN_SHOW_DAY<GameServer.serverOpenDay&&(this.btn.visible=!1,this.tip2.text="已过期")}}},t}(eui.ItemRenderer);__reflect(QiTianFuLiAwardItem.prototype,"QiTianFuLiAwardItem");var KaiFuQiTianOtherPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuQiTianOtherPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=QiTianOtherAwardItem},t.prototype.OnOpen=function(){this.UpdateContent()},t.prototype.getReward=function(){var e,t=ActivityConst.GetQiTianActivityIds(KaiFuQiTianActivityPanel.OPEN_SHOW_DAY,1),i=[],o=t.length;for(e=0;o>e;e++){var n=ActivityConst.GetCfgObjByValue(t[e]),a=GameGlobal.ActivityKaiFuModel.GetActivityDataById(n.Id),r={};if(r.cfg=n,r.weight=n.index,a){var s=a.canGetRecordByIndex(n.index),l=a.GetRecordByIndex(n.index);s?l?r.weight+=1e3:r.weight-=1e3:l&&(r.weight+=1e3)}i.push(r)}return i},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible){var e=this.getReward();SortTools.sortMap(e,"weight"),this.list.dataProvider=new eui.ArrayCollection(e)}},t.RedPoint=function(e){var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(15);if(t){var i=t.GetConfig();for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];if(n.day!=e)continue;if(t.canGetRecordByIndex(n.index))return!0}}return!1},t.prototype._OnClick=function(e){},t}(BaseEuiView);__reflect(KaiFuQiTianOtherPanel.prototype,"KaiFuQiTianOtherPanel");var QiTianOtherAwardItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){var t=this.data.cfg;"领 取"==this.btn.label?GameGlobal.ActivityKaiFuModel.sendReward(t.Id,t.index):"前 往"==this.btn.label&&t.gainway&&GameGlobal.ViewManager.Guide(t.gainway[0][1][0])},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg),t=this.data.weight;this.data.actType;this.tipsTxt.text=e.des.replace("%s",e.value),this.list.dataProvider=new eui.ArrayCollection(e.rewards),KaiFuQiTianActivityPanel.OPEN_SHOW_DAY>GameServer.serverOpenDay&&GameServer.serverOpenDay<=7?(this.tip2.text="明日开启",this.getted_img.visible=!1,this.btn.visible=!1):(this.tip2.text="",this.btn.visible=100>t,this.btn.label=t>0&&100>t?e.gainway?"前 往":"未达成":"领 取",UIHelper.ShowRedPoint(this.btn,0>t),this.getted_img.visible=!this.btn.visible)},t}(eui.ItemRenderer);__reflect(QiTianOtherAwardItem.prototype,"QiTianOtherAwardItem");var KaiFuQiTianShopPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="KaiFuQiTianShopPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=QiTianShopItem},t.prototype.OnOpen=function(){this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible){var e=this.getShopList();this.list.dataProvider=new eui.ArrayCollection(e)}},t.RedPoint=function(){return!1},t.prototype.getShopList=function(){var e=ActivityConst.GetQiTianActivityIds(KaiFuQiTianActivityPanel.OPEN_SHOW_DAY,2);return e},t.prototype._OnClick=function(e){},t}(BaseEuiView);__reflect(KaiFuQiTianShopPanel.prototype,"KaiFuQiTianShopPanel",["ICommonWindow"]);var QiTianShopItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){var e=ActivityConst.GetCfgObjByValue(this.data);if(null!=e){if(this.itemIcon.setItemAward(1,e.itemid,e.count),KaiFuQiTianActivityPanel.OPEN_SHOW_DAY>GameServer.serverOpenDay&&GameServer.serverOpenDay<=7)this.tip2.text="明日开启",this.imgBuyEnd.visible=!1,this.buy.visible=!1;else{e.value;this.imgBuyEnd.visible=!1,this.tip2.text="";var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this.data.id);if(t){var i=t.buyData[e.index-1];2!=e.type.type&&e.type.value<=i&&(this.imgBuyEnd.visible=!0)}this.buy.visible=!this.imgBuyEnd.visible,this.buy.visible&&KaiFuQiTianActivityPanel.OPEN_SHOW_DAY<GameServer.serverOpenDay?(this.buy.visible=!1,this.tip2.text="已过期"):this.tip2.text=""}this.priceIcon1.text=e.showgold,this.priceIcon2.text=e.gold.count}},t.prototype.onClick=function(e){var t=ActivityConst.GetCfgObjByValue(this.data);Checker.Money(t.gold.id,t.gold.count,!0)&&GameGlobal.ActivityKaiFuModel.sendReward(this.data.id,t.index)},t}(eui.ItemRenderer);__reflect(QiTianShopItem.prototype,"QiTianShopItem");var RmbGiftPanel=function(e){function t(){var t=e.call(this)||this;return t._activityId=9,t._rechargeId=0,t.skinName="RmbGiftPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBaseNotName,this.itemList.dataProvider=null},t.prototype.onClick=function(e){var t=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);if(t){if(t.canGetRecordByIndex(t.reachday+1)){var i=t.GetConfig()[t.reachday];return void GameGlobal.ActivityKaiFuModel.sendReward(this._activityId,i.index)}GameGlobal.RechargeModel.sendRecharge(this._rechargeId)}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];
this.AddClick(this.dialogMask,this.CloseSelf),this.AddClick(this.dialogCloseBtn,this.CloseSelf),this.AddClick(this.chargeBtn,this.onClick),this.observe(MessageDef.ACTIVITY_UPDATE,this.updateContent),this.updateContent()},t.prototype.updateContent=function(){this.setCurContent(),this.setNextContent();var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);e&&(this.chargeBtn.label=e.canGetRecordByIndex(e.reachday+1)?"领取奖励":"立即购买")},t.prototype.setCurContent=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);if(e){if(e.AllGotten())return void this.CloseSelf();this.chargeBtn.visible=e.runday>e.reachday,this.labTip.visible=!this.chargeBtn.visible,TimerManager.ins().isExists(this.updateTime,this)||this.AddTimer(1e3,0,this.updateTime),this.updateTime();var t=e.GetConfig()[e.reachday];if(t){if(this.itemList.dataProvider=new eui.ArrayCollection(t.gift),this.titleImg.source=t.title,this.titleLabel.text=t.name,this._rechargeId=t.rechargeid,this.nameTxt.text=t.showname,this.valueTxt.textFlow=TextFlowMaker.generateTextFlow(t.des),this.power.text=t.power,this.showImg.visible=0==t.showtype,this.rideShowPanel.visible=1==t.showtype,this.roleShowPanel.visible=2==t.showtype,0==t.showtype)this.showImg.source=t.show;else if(2==t.showtype){var i=void 0;i=t.showg&&1==GameGlobal.actorModel.sex?t.showg:t.show;var o=SubRoles.ins().GetRoleData(),n=GameGlobal.Config.RideSkinConfig[o.mRideId],a=new RoleShowData;a.job=GameGlobal.actorModel.job,a.sex=GameGlobal.actorModel.sex,a.clothID=i,a.rideId=n?n.pid:0,this.roleShowPanel.SetAll(a)}else t.showg&&1==GameGlobal.actorModel.sex?this.rideShowPanel.SetBodyId(t.showg):this.rideShowPanel.SetBodyId(t.show);this.setCurPos(t)}}},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=new Date(GameServer.serverTimeMilli),o=DateUtils.MS_PER_DAY-1e3*(60*i.getHours()*60+60*i.getMinutes()+i.getSeconds());this.timeTxt.text=DateUtils.format_1(o)},t.prototype.setNextContent=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);if(e){var t=e.GetConfig()[e.reachday+1];if(this.nextGroup.visible=null!=t&&e.reachday<e.runday,this.nextGroup.visible){if(this.labNextPower.text="战力直升 "+t.power,this.nextShowImg.visible=0==t.showtype,this.nextRideShowPanel.visible=1==t.showtype,this.nextRoleShowPanel.visible=2==t.showtype,0==t.showtype)this.nextShowImg.source=t.show;else if(2==t.showtype){var i=void 0;i=t.showg&&1==GameGlobal.actorModel.sex?t.showg:t.show;var o=SubRoles.ins().GetRoleData(),n=GameGlobal.Config.RideSkinConfig[o.mRideId],a=new RoleShowData;a.job=GameGlobal.actorModel.job,a.sex=GameGlobal.actorModel.sex,a.clothID=i,a.rideId=n?n.pid:0,this.nextRoleShowPanel.SetAll(a)}else t.showg&&1==GameGlobal.actorModel.sex?this.nextRideShowPanel.SetBodyId(t.showg):this.nextRideShowPanel.SetBodyId(t.show);this.setNextPos(t)}}},t.prototype.setCurPos=function(e){this.rideShowPanel.y=380;var t=e.itemtype;2==t&&(this.rideShowPanel.y=490)},t.prototype.setNextPos=function(e){this.nextRideShowPanel.y=120,this.nextRideShowPanel.x=94,this.nextShowImg.y=21;var t=e.itemtype;return 2==t?(this.nextRideShowPanel.x=110,void(this.nextRideShowPanel.y=170)):3==t?void(this.nextRideShowPanel.y=95):4==t?void(this.nextShowImg.y=0):void(6==t&&(this.nextShowImg.y=0))},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RmbGiftPanel.prototype,"RmbGiftPanel");var ShootUpPanel=function(e){function t(){var t=e.call(this)||this;return t._activityId=10,t._index=0,t.skinName="ShootUpPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBaseNotName,this.itemList.dataProvider=null},t.prototype.onClick=function(e){this.CloseSelf(),"充点小钱"==this.chargeBtn.label?RechargeWin.Open():GameGlobal.ActivityKaiFuModel.sendReward(this._activityId,this._index)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.dialogMask,this.CloseSelf),this.AddClick(this.dialogCloseBtn,this.CloseSelf),this.AddClick(this.chargeBtn,this.onClick),this.updateContent()},t.prototype.updateContent=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);if(e){UIHelper.ShowRedPoint(this.chargeBtn,e.hasReward());var t=e.GetConfig()[e.runday-1];if(t){this.itemList.dataProvider=new eui.ArrayCollection(t.item),this.titleImg.source=t.title,this.imgIcon.source=t.showitem,this.nameTxt.text=t.itemname+"",this._index=t.index;var i=GameGlobal.RechargeModel.dailyRechare;this.chargeTxt.text="今日已充值："+i+"元",this.chargeBtn.enabled=!0,i>=t.cost?4==e.record?(this.chargeBtn.label="已领取",this.chargeBtn.enabled=!1):3==e.record&&(this.chargeBtn.label="点击领取"):this.chargeBtn.label="充点小钱"}TimerManager.ins().remove(this.updateTime,this),this.AddTimer(1e3,0,this.updateTime),this.updateTime()}},t.prototype.updateTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=new Date(GameServer.serverTimeMilli),o=DateUtils.MS_PER_DAY-1e3*(60*i.getHours()*60+60*i.getMinutes()+i.getSeconds());this.timeTxt.text=DateUtils.format_1(o)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ShootUpPanel.prototype,"ShootUpPanel");var ActorModel=function(){function e(){this._power=0,this._guildID=0,this._gold=0,this._yb=0,this._byb=0,this.friendCoin=0,this.mSaveDataList=[]}return e.IsGM=function(){return 100==Main.Instance.GmLevel},e.IsSimpleGM=function(){return Main.Instance.GmLevel>=1},Object.defineProperty(e.prototype,"vipLv",{get:function(){return UserVip.ins().lv},enumerable:!0,configurable:!0}),e.prototype.SendUpLevel=function(){GameSocket.ins().Rpc(C2sProtocol.cs_change_role_level)},e.prototype.parser=function(e){this.setGuild(e.guildid,e.guildname),this.actorID=e.actorid,this.job=e.job,this.sex=e.sex,Main.Instance.mConnectServerData&&(Main.Instance.mConnectServerData.id=e.serverid),this._name=e.actorname,this._pingji=e.pingji,this._level=e.level,this._exp=e.exp,this._power=e.power||0,this._gold=e.gold,this._yb=e.yuanbao,this._contrib=e.contrib,this._byb=e.byb,this.friendCoin=e.friendcoin,UserVip.ins().lv=e.vip;var t=GlobalConfig.ins().BagBaseConfig;UserBag.ins().bagNum=e.bagnum*t.rowSize+t.baseSize,this.mSaveData=e.clientvalue,this.mSaveDataList=e.clientvaluelist||[],GameGlobal.SoundManager.SetBgOn(!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_SY)),GameGlobal.MessageCenter.dispatch(MessageDef.POWER_CHANGE),egret.setTimeout(this.InitMsg,this,1e3),GameGlobal.MessageCenter.dispatch(MessageDef.INIT_ACTOR),GameGlobal.EntityEffMgr.RefActorEff(this.job)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name!=e&&(this._name=e,MessageCenter.ins().dispatch(MessageDef.NAME_CHANGE))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pingji",{get:function(){return this._pingji},set:function(e){this._pingji!=e&&(this._pingji=e,MessageCenter.ins().dispatch(MessageDef.NAME_CHANGE))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byb",{get:function(){return this._byb},set:function(e){if(this._byb!=e){var t=e-this._byb;if(t>0){var i="";i="|C:0xffb02d&T:绑元  +"+t+"|";var o=ResDataPath.GetItemFullPath("ui_icon_item_4203");UserTips.ins().showContTips(i,o)}this._byb=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gold",{get:function(){return this._gold},set:function(e){if(this._gold!=e){var t=e-this._gold;if(t>0){var i="";i="|C:0xffb02d&T:银两  +"+t+"|";var o=ResDataPath.GetItemFullPath("ui_icon_item_4202");UserTips.ins().showContTips(i,o)}this._gold=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yb",{get:function(){return this._yb},set:function(e){if(this._yb!=e){var t=e-this._yb;if(t>0){var i="";i="|C:0xffb02d&T:元宝  +"+t+"|";var o=ResDataPath.GetItemFullPath("ui_icon_item_4204");UserTips.ins().showContTips(i,o)}this._yb=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level!=e&&(this._level=e,MessageCenter.ins().dispatch(MessageDef.LEVEL_CHANGE),Deblocking.Update(Deblocking.CHECK_TYPE_02),20==this._level)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp!=e&&(this._exp=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contrib",{get:function(){return this._contrib},set:function(e){this._contrib!=e&&(this._contrib=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return this._power},enumerable:!0,configurable:!0}),e.prototype.SetPower=function(e,t){this._power!=e&&(this._power<e&&this._power>0&&(t||MessageCenter.ins().dispatch(MessageDef.POWER_BOOST,e,this._power)),this._power=e,MessageCenter.ins().dispatch(MessageDef.POWER_CHANGE))},e.prototype.setGuild=function(e,t){this._guildID!=e&&(this._guildID=e,this._guildName=t,0!=this._guildID)},Object.defineProperty(e.prototype,"guildID",{get:function(){return this._guildID},enumerable:!0,configurable:!0}),e.prototype.HasGuild=function(){return 0!=this._guildID},Object.defineProperty(e.prototype,"guildName",{get:function(){return this._guildName},enumerable:!0,configurable:!0}),e.prototype.GetNum=function(e){var t=0;switch(e){case MoneyConst.gold:t=this._gold;break;case MoneyConst.yuanbao:t=this._yb;break;case MoneyConst.byb:t=this.byb;break;case MoneyConst.GuildContrib:t=this._contrib}return t},e.prototype.GetCurrencyName=function(e){return MoneyConstToName[e]},e.prototype.IsCurrency=function(e){return null!=MoneyConstToName[e]},e.prototype.InitMsg=function(){if(GameGlobal.CrossTeamModel.SendGetInfos(),GameGlobal.BossModel.sendCallFieldBossList(),GameGlobal.BossModel.sendCallVipBossList(),GameGlobal.Arena.sendArenaData(),GameGlobal.QujingModel.SendEnterEscortView(),GameGlobal.AuctionModel.sendAuctionList(0),this.HasGuild()){GameGlobal.GangModel.SendGetPanTaoHuiInfo(),GameGlobal.GangModel.sendGetSkillInfos(),GameGlobal.GangModel.sendGetProtectorInfo(),GameGlobal.GangMapModel.SendGetExchange(),GameGlobal.GuildTeamModel.SendGetInfos(),GameGlobal.GangModel.sendGetGangBossInfo(),GameGlobal.AuctionModel.sendAuctionList(1);var e=GameGlobal.GangModel.myGangInfo;e&&GangConst.GetAuditingRight(e.mOffice)&&GameGlobal.GangModel.SendGetApplicantList()}GameGlobal.Ladder.SendInitInfo()},e}();__reflect(ActorModel.prototype,"ActorModel");var Role=function(e){function t(){var t=e.call(this)||this;return t.power=0,t.skillLevels=[],t.skillSortDatas=[],t.equipsData=[],t}return __extends(t,e),t.getAttrTypeByName=function(e){return this.translate[e]},t.getJobNameByJob=function(e){return this.jobNumberToName[e]},t.getEquipNameByType=function(e){return this.typeNumberToName[e]},t.prototype.GetCurSkillIDs=function(){for(var e=[],t=0;t<this.skillLevels.length;t++){this.skillLevels[t]<1?1:this.skillLevels[t];e.push(SkillsConfig.GetSkillId(this.job,t))}return e},t.prototype.GetCurSkillSortIds=function(){for(var e=[],t=0;t<this.skillLevels.length;t++)this.skillLevels[t]&&this.skillLevels[t]>0&&e.push(SkillsConfig.GetSkillId(this.job,t));for(var i=e,o=this.skillSortDatas,n=[],a=0,r=o;a<r.length;a++){var s=r[a];i[s-1]&&n.push(i[s-1])}return n},t.prototype.getSkillSort=function(){return this.skillSortDatas},t.prototype.setSkillSort=function(e){e instanceof Array&&(this.skillSortDatas=e)},t.prototype.parser=function(e){this.power=e.power,this.skillLevels=e.skillDatas,this.skillSortDatas=e.skillSortDatas,this.equipsData=[];for(var t=0,i=e.equipsData;t<i.length;t++){var o=i[t],n=new EquipsData;n.parser(o),this.equipsData.push(n)}this.parserAtt(e.attributeData),GameGlobal.MessageCenter.dispatch(MessageDef.DEITYEQUIP_INIT)},t.prototype.parseForgeChange=function(e,t){var i="";switch(t){case ForgeType.BOOST:i="strengthen";break;case ForgeType.REFINE:i="refine";break;case ForgeType.EXERCISE:i="exercise";break;case ForgeType.GEM:i="gem"}for(var o=0;o<e.forgeLevel.length;o++){var n=e.forgeLevel[o];this.equipsData[o][i]=n}},t.prototype.getMinEquipIndexByType=function(e){var t=this.GetMinEquipIndexAndLevel(e),i=t[0];t[1];return i},t.prototype.GetMinEquipIndexAndLevel=function(e){for(var t=0,i=Number.MAX_VALUE,o=0,n=ForgeConst.CAN_FORGE_EQUIP.length,a=0;n>a;++a){var r=ForgeConst.CAN_FORGE_EQUIP[a];o=this.equipsData[r].GetForgeValue(e),i>o&&(i=o,t=r)}return[t,i]},t.prototype.getEquipDataBysubType=function(e){for(var t=0;t<this.equipsData.length;t++){var i=this.equipsData[t+1].item.itemConfig;if(!i)return null;if(i.subType==e)return this.equipsData[t+1]}return null},t.prototype.getSkillTotalPower=function(){for(var e=0,t=0;t<this.skillLevels.length;t++){var i=GlobalConfig.ins().SkillPowerConfig[t];e+=this.skillLevels[t]*i.powerPerLevel}return e},t.prototype.getForgeTotalPower=function(e){for(var t=0,i=0,o=this.equipsData.length;o>i;i++){var n=this.equipsData[i],a=n.GetForgeValue(e);if(a>0){var r=GameGlobal.ForgeModel.GetForgeConfigByPos(i,a,e);t+=Math.floor(UserBag.getAttrPower(r.attr))}}var s=GameGlobal.ForgeModel.GetForgeMasterLevel(e);return s&&(t+=ItemConfig.CalcAttrScoreValue(s.attrs)),t},Object.defineProperty(t.prototype,"lv",{get:function(){return this._lv},set:function(e){this._lv=e},enumerable:!0,configurable:!0}),t.prototype.getEquipByIndex=function(e){return this.equipsData[e]},t.prototype.getEquipLen=function(){return this.equipsData.length},t.prototype.getSkillsDataByIndex=function(e){return this.skillLevels[e]},t.prototype.setSkillsDataByIndex=function(e,t){this.skillLevels[e]=t},t.prototype.GetSubRoleData=function(){var e=new RoleShowData;return e.job=this.job,e.sex=this.sex,e.pingji=this.entityPingJi,e.clothID=this.GetBodyId(),e.swordID=this.GetWeaponId(),e.rideId=this.GetRideId(),e.wingId=this.GetWingId(),e.tianxId=this.GetTianxId(),e.titleId=this.GetTitleId(),e},t.prototype.GetHeadImgName=function(){return ResDataPath.GetHeadMiniImgName(this.job,this.sex)},t.prototype.GetHeadCircleImgName=function(){return ResDataPath.GetHeadCircleImgName(this.job,this.sex)},t.prototype.GetTitle=function(){return this.mTitle?this.mTitle:GameGlobal.UserTitle.getWearId()||0},t.prototype.GetBodyId=function(){return RoleShowData.GetBodyAppId(GameGlobal.UserSkin.getWearId(),this.job,this.sex)},t.prototype.GetWeaponId=function(){return RoleShowData.GetSwordAppId(GameGlobal.SwordModel.mDressId,this.job,this.sex)},t.prototype.GetWingId=function(){return GameGlobal.UserWing.GetAppaId()},t.prototype.GetRideId=function(){return GameGlobal.UserRide.GetAppaId()},t.prototype.GetTianxId=function(){return GameGlobal.TianxModel.GetAppaId()},t.prototype.GetTitleId=function(){return GameGlobal.UserTitle.getWearId()},t.prototype.ClearTmpData=function(){this.mTitle=null},t.jobNumberToName={0:"通用",1:"职业1",2:"职业2",3:"职业3",4:"职业4"},t.translate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,crit:AttributeType.atCrit,tough:AttributeType.atTough},t.typeNumberToName=["武器","头盔","项链","衣服","护肩","腰带","护腕","戒指","裤子","鞋子"],t.typeNumberToName2=["部位1","部位2","部位3","部位4"],t}(EntityRole);__reflect(Role.prototype,"Role");var SubRoles=function(e){function t(){var t=e.call(this)||this;return t.mTemplate={},t.regNetMsg(S2cProtocol.sub_roles,t.doSubRole),t.regNetMsg(S2cProtocol.sc_template_init_data,t._DoInitData),t.regNetMsg(S2cProtocol.sc_template_update_data,t._DoUpdateData),t}return __extends(t,e),t.GetDefaultSex=function(e){return 3==e?1:0},t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){var e=GameGlobal.Config.FashionSkinConfig;for(var t in e){var i=e[t][0];GameGlobal.UserBag.AddListenerItem(i.itemid.id,MessageDef.BAG_USER_SKIN_COUNT_UPDATE)}e=GameGlobal.Config.TitleConf;for(var t in e)GameGlobal.UserBag.AddListenerItem(e[t].itemid?e[t].itemid.id:0,MessageDef.BAG_USER_TITLE_COUNT_UPDATE);GameGlobal.UserBag.AddListenerItem(SHOP_MONEY.jinzhuang,MessageDef.BAG_USER_ORANGE_COUNT_UPDATE)},t.prototype.GetRoleData=function(){return this.rolesModel},t.prototype._DoInitData=function(e){var t=this.mTemplate[e.templateType];t?t._DoInitData(e):console.error("not impl type => "+e.templateType)},t.prototype._DoUpdateData=function(e){var t=this.mTemplate[e.templateType];t?t._DoUpdateData(e):console.error("not impl type => "+e.templateType)},t.prototype.doSubRole=function(e){this.rolesModel||(this.rolesModel=new Role),this.rolesModel.parser(e.roleList),this.rolesModel.job=GameGlobal.actorModel.job,this.rolesModel.sex=GameGlobal.actorModel.sex,this.rolesModel.entityName=GameGlobal.actorModel.name,this.UpdatePower(),GameGlobal.MessageCenter.dispatch(MessageDef.SUB_ROLE_CHANGE),t.ROLE_INIT=!0},t.prototype.doSubRoleAtt=function(e){var t=(e.roleID,this.rolesModel);t.parserAtt(e.attributeData),t.power=e.power,this.UpdatePower(),GameLogic.ins().actorModel.SetPower(t.power,!1)},t.prototype.UpdatePower=function(e){void 0===e&&(e=!1)},t.MAX_COUNT=1,t.ROLE_INIT=!1,t}(BaseSystem);__reflect(SubRoles.prototype,"SubRoles");var UserEquip=function(e){function t(){var t=e.call(this)||this;return t.mDeityEquipRP=new DeityEquipRedPoint,t.regNetMsg(S2cProtocol.sc_equip_update_data,t.doUpDataEquip),t.regNetMsg(S2cProtocol.sc_bag_deal_smelt_result,t.doSmeltREquip),t.regNetMsg(S2cProtocol.sc_bag_deal_recycle_result,t.doSmeltRIteam),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendWearEquipment=function(e,t){var i=new Sproto.cs_equip_wear_request;i.itemHandle=e,i.pos=t,GameSocket.ins().Rpc(C2sProtocol.cs_equip_wear,i)},t.prototype.sendSmeltEquip=function(e){var t=new Sproto.cs_bag_smelt_request;t.type=0,t.itemHandle=new Array;for(var i=0;i<e.length;i++)null!=e[i]&&t.itemHandle.push(e[i].handle);return 0==t.itemHandle.length?!1:(GameSocket.ins().Rpc(C2sProtocol.cs_bag_smelt,t),!0)},t.prototype.sendSmeltIteam=function(e){var t=new Sproto.cs_bag_recycle_request;t.type=0,t.itemHandle=new Array;for(var i=0;i<e.length;i++)null!=e[i]&&t.itemHandle.push(e[i].handle);return 0==t.itemHandle.length?!1:(GameSocket.ins().Rpc(C2sProtocol.cs_bag_recycle,t),!0)},t.prototype.doSmeltRIteam=function(e){var t=e.state;if(0==t)return void UserTips.ins().showTips("|C:0xff0000&T:回收失败！|");e.goldCount,e.len;this.SmeltItemaComplete()},t.prototype.doUpDataEquip=function(e){var t=e.equipPos,i=new ItemData;i.parser(e.data);var o=SubRoles.ins().GetRoleData(),n=o.getEquipByIndex(t);n.item=i,n.deityEquipData.UpdateInfo(e.reddata),GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_EQUIP)},t.prototype.doSmeltREquip=function(e){var t=e.state;if(0==t)return void UserTips.ins().showTips("|C:0xff0000&T:熔炼失败！|");e.goldCount,e.len;this.SmeltEquipComplete()},t.prototype.SmeltEquipComplete=function(){GameGlobal.MessageCenter.dispatch(MessageDef.BAG_DEAL_SMELT)},t.prototype.SmeltItemaComplete=function(){GameGlobal.MessageCenter.dispatch(MessageDef.BAG_DEAL_RECYCLE)},t.contrastEquip=function(e,t){return e&&0!=e.handle?t&&0!=t.handle&&t.GetScore()>e.GetScore()?t:e:t},t.prototype.getEquipsByJobNPos=function(e,t){var i=SubRoles.ins().GetRoleData();return i.job==e?i.getEquipByIndex(t):null},t.GetEquipId=function(e,t,i,o){return 1e5+t+1e4*e+100*i+1e3*o},t.prototype.checkEquipsIsWear=function(e){for(var t=SubRoles.ins().GetRoleData(),i=t.getEquipLen(),o=0;i>o;o++)if(e.handle==t.getEquipByIndex(o).item.handle)return!0;return!1},t.prototype.SendComposeDeityEquip=function(e){var t=new Sproto.cs_equip_red_generate_request;t.slot=e,this.Rpc(C2sProtocol.cs_equip_red_generate,t)},t.prototype.SendDeityEquipAwake=function(e){var t=new Sproto.cs_equip_red_upgrade_request;t.slot=e,this.Rpc(C2sProtocol.cs_equip_red_upgrade,t)},t.prototype.SendDeityEquipInjectSoul=function(e,t){var i=new Sproto.cs_equip_red_inject_request;i.slot=e,i.mode=t,this.Rpc(C2sProtocol.cs_equip_red_inject,i,function(e){e.ret||UserTips.ins().showTips("注灵失败")},this)},t.prototype.GetDeityEquipPos=function(){for(var e=GameGlobal.SubRoles.GetRoleData(),t=0;10>t;t++){var i=e.getEquipByIndex(t),o=i.item.configID;if(DeityEquipConst.IsDeityEquip(o))return t}return-1},t.prototype.GetDeityEquipNum=function(){for(var e=0,t=GameGlobal.SubRoles.GetRoleData(),i=0;10>i;i++){var o=t.getEquipByIndex(i),n=o.item.configID;DeityEquipConst.IsDeityEquip(n)&&e++}return e},t.prototype.GetDeityEquipInjectLevel=function(){for(var e=0,t=GameGlobal.SubRoles.GetRoleData(),i=0;10>i;i++){var o=t.getEquipByIndex(i),n=o.item.configID;DeityEquipConst.IsDeityEquip(n)&&(e+=o.deityEquipData.injectLevel)}return e},t.prototype.CanTheDeityEquipAwake=function(e){var t=GameGlobal.SubRoles.GetRoleData();if(t){var i=t.getEquipByIndex(e),o=i.item.configID,n=DeityEquipConst.GetNextDeityEquipId(o,e),a=GameGlobal.Config.ItemConfig[n];if(a&&a.level>GameGlobal.actorModel.level)return!1;if(DeityEquipConst.IsMaxAwakeLevel(o))return!1;var r=DeityEquipConst.GetAwakeCost(o,e);return Checker.Data(r,!1)}},t.prototype.HasDeityEquipAwake=function(){if(!Deblocking.Check(DeblockingType.TYPE_32,!0))return!1;for(var e=0;10>e;e++)if(this.CanTheDeityEquipAwake(e))return!0;return!1},t.prototype.CanTheDeityEquipInject=function(e){var t=GameGlobal.SubRoles.GetRoleData(),i=t.getEquipByIndex(e),o=i.item.configID;if(!DeityEquipConst.IsDeityEquip(o))return!1;var n=i.deityEquipData.injectLevel;if(DeityEquipConst.IsMaxInjectLevel(e,n))return!1;var a=DeityEquipConst.GetInjectCost(e,n+1);return Checker.Data(a,!1)},t.prototype.HasDeityEquipInject=function(){if(!Deblocking.Check(DeblockingType.TYPE_32,!0))return!1;for(var e=0;10>e;e++)if(this.CanTheDeityEquipInject(e))return!0;return!1},t.prototype.HasDeityEquipResolve=function(){return Deblocking.Check(DeblockingType.TYPE_32,!0)?GameGlobal.UserBag.getBagEquipByLevelSort(ITEM_QUALITY.RED_QUALITY).length>0:!1},t}(BaseSystem);__reflect(UserEquip.prototype,"UserEquip");var UserRole=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mSkin={},t.mTitle={},t.canChangeEquips=[],t.m_CheckHaveCanTimer=null,t.m_CheckTimer=0,t.mOrangeCount={},t}return __extends(t,e),t.prototype.OnChange=function(e){e==t.INDEX_EQUIP?MessageCenter.ins().dispatch(MessageDef.ROLE_HINT):MessageCenter.ins().dispatch(MessageDef.RP_ROLE_HINT)},t.prototype.OnMessage=function(i){var o=!0;if((i==MessageDef.BAG_USER_ORANGE_COUNT_UPDATE||i==MessageDef.BAG_USER_EQUIP_COUNT_UPDATE||i==MessageDef.LEVEL_CHANGE||i==MessageDef.CHANGE_EQUIP)&&(this.ClearFlag(t.INDEX_ORANGE),o=!1),i==MessageDef.BAG_USER_SKIN_COUNT_UPDATE||i==MessageDef.ROLE_SKIN_UPDATE)this.ClearFlag(t.INDEX_SKIN);else if(i==MessageDef.BAG_USER_TITLE_COUNT_UPDATE||i==MessageDef.ROLE_TITLE_UPDATE)this.ClearFlag(t.INDEX_TITLE);else if(i==MessageDef.EXP_CHANGE)this.ClearFlag(t.INDEX_UP_LEVEL);else if(i==MessageDef.JINGMAI_DATA_UPDATE)this.ClearFlag(t.INDEX_JINGAMI);else{if(i!=MessageDef.ROLE_ELIXIR_UPDATE)return e.prototype.OnMessage.call(this,i);this.ClearFlag(t.INDEX_ELIXIR)}return o},t.prototype.GetMessageDef=function(){var e=[MessageDef.BAG_USER_EQUIP_COUNT_UPDATE,MessageDef.LEVEL_CHANGE,MessageDef.CHANGE_EQUIP,MessageDef.BAG_USER_SKIN_COUNT_UPDATE,MessageDef.ROLE_SKIN_UPDATE,MessageDef.BAG_USER_TITLE_COUNT_UPDATE,MessageDef.ROLE_TITLE_UPDATE,MessageDef.EXP_CHANGE,MessageDef.CHANGE_ITEM,MessageDef.JINGMAI_DATA_UPDATE,MessageDef.ROLE_ELIXIR_UPDATE,MessageDef.BAG_USER_ORANGE_COUNT_UPDATE];return e},t.prototype.GetCheckFuncList=function(){var e=(i={},i[t.INDEX_EQUIP]=this.GetIndexEquip,i[t.INDEX_SKIN]=this.GetIndexSkin,i[t.INDEX_TITLE]=this.GetIndexTitle,i[t.INDEX_UP_LEVEL]=this.GetIndexUpLevel,i[t.INDEX_JINGAMI]=this.GetIndexJingmai,i[t.INDEX_ELIXIR]=this.GetIndexElixir,i[t.INDEX_ORANGE]=this.GetIndexOrange,i);return e;var i},t.prototype.GetIndexSkin=function(){this.mSkin={};var e=GameGlobal.Config.FashionSkinConfig,t=GameGlobal.actorModel.sex;for(var i in e){var o=e[i][t];o&&(GameGlobal.UserSkin.HasDress(o.skinid)||Checker.Data(o.itemid,!1)&&(this.mSkin[o.skinid]=!0))}for(var n in this.mSkin)return!0;return!1},t.prototype.GetIndexUpLevel=function(){var e=GameGlobal.actorModel.level,t=GameGlobal.actorModel.exp,i=GameGlobal.Config.ExpConfig[e],o=!1;return GameGlobal.Config.ExpConfig[e+1]&&(o=t>=i.exp),o},t.prototype.GetIndexTitle=function(){this.mTitle={};var e=GameGlobal.Config.TitleConf;for(var t in e){var i=e[t];GameGlobal.UserTitle.HasDress(i.skinid)||Checker.Data(i.itemid,!1)&&(this.mTitle[i.skinid]=!0)}for(var o in this.mTitle)return!0;return!1},t.prototype.GetIndexEquip=function(){this.checkHaveCan();for(var e=0;e<this.canChangeEquips.length;e++)if(this.canChangeEquips[e])return!0;return!1},t.prototype._ContinueCheck=function(){this.checkHaveCan()},t.prototype.GetCanEquipList=function(e){var t=GameGlobal.actorModel.level,i=UserBag.ins().getBagEquipByType(0);if(i){for(var o=function(i){return i.itemConfig?0!=i.itemConfig.job&&i.itemConfig.job!=e||t<i.itemConfig.level?!1:!0:!1},n={},a=0;a<i.length;a++){var r=i[a];if(o(r)){var s=r.itemConfig.subType,l=n[s];l||(l=n[s]=[]),l.push(r)}}return n}},t.prototype.SendEquip=function(){this.checkHaveCan(!0)},t.prototype.checkHaveCan=function(e){if(void 0===e&&(e=!1),!e&&this.m_CheckTimer>egret.getTimer())return void(null==this.m_CheckHaveCanTimer&&(this.m_CheckHaveCanTimer=egret.setTimeout(this._ContinueCheck,this,1e3)));this.m_CheckTimer=egret.getTimer()+800,this.m_CheckHaveCanTimer&&(egret.clearTimeout(this.m_CheckHaveCanTimer),this.m_CheckHaveCanTimer=null);var t=[],i=SubRoles.ins().GetRoleData();if(i){for(var o=this.GetCanEquipList(i.job),n=function(e){return t.indexOf(e)>=0?!1:!0},a=i.getEquipLen(),r=0;a>r;r++){var s=i.getEquipByIndex(r);if(0==s.item.handle){var l=o[ForgeConst.EQUIP_POS_TO_SUB[r]];if(l)for(var c=0,u=l;c<u.length;c++){var p=u[c];n(p)&&(t[r]=UserEquip.contrastEquip(p,t[r]))}}}for(var r=0;a>r;r++){var s=i.getEquipByIndex(r);if(0!=s.item.handle){var l=o[s.item.itemConfig.subType];if(l)for(var h=0,d=l;h<d.length;h++){var p=d[h];n(p)&&(t[r]=UserEquip.contrastEquip(t[r]?t[r]:s.item,p))}}}for(var r=0;a>r;r++){var s=i.getEquipByIndex(r);this.canChangeEquips[r]=0,t[r]&&s.item.handle!=t[r].handle&&(e?(UserEquip.ins().sendWearEquipment(t[r].handle,r),this.canChangeEquips[r]=0):this.canChangeEquips[r]=t[r].configID)}for(var _=!1,f=0,m=this.canChangeEquips;f<m.length;f++){var g=m[f];if(g){_=!0;break}}_||(this.canChangeEquips.length=0),MessageCenter.ins().dispatch(MessageDef.ROLE_HINT)}},t.prototype.IsRedEquip=function(){for(var e=0;e<this.canChangeEquips.length;e++)if(this.canChangeEquips[e])return!0;return!1},t.prototype.IsRedSkin=function(e){return this.mSkin[e]?!0:!1},t.prototype.GetIndexJingmai=function(){if(!Deblocking.Check(DeblockingType.TYPE_30,!0))return!1;var e=GameGlobal.Config.JingMaiLevelConfig,t=e[0==GameGlobal.JingMaiData.level?1:GameGlobal.JingMaiData.level];if(!t)return!1;var i=t.itemid;return i?i.count<=GameGlobal.UserBag.GetCount(i.id):!1},t.prototype.GetIndexElixir=function(){if(!Deblocking.Check(DeblockingType.TYPE_29,!0))return!1;var e=GameGlobal.UserElixir.getElixirData();for(var t in e){var i=e[t].itemid;if(i.count<=GameGlobal.UserBag.GetCount(i.id))return!0}return!1},t.prototype.GetIndexOrange=function(){this.mOrangeCount={};var e=GameGlobal.UserBag.GetCount(SHOP_MONEY.jinzhuang),t=GameGlobal.SubRoles.GetRoleData();if(t){var i=40,o=GameGlobal.actorModel.level;if(!(i>o))for(var n=Math.max(20*Math.floor(o/20),i),a=0,r=0,s=t.equipsData;r<s.length;r++){var l=s[r],c=0;if(l.item&&l.item.itemConfig){var u=l.item.itemConfig.quality;4==u?c=l.item.itemConfig.level:u>4&&(c=99999)}for(var p=n;p>=i;p-=20){var h=2*a+p;if(!(h>o||c>=h)){var d=GameGlobal.ShopController.mEquipCurrencyCount[p];if(e>=d){this.mOrangeCount[a]=p;break}}}++a}}},t.prototype.IsOrange=function(e){return this.mOrangeCount[e]||0},t.INDEX_EQUIP=0,t.INDEX_SKIN=1,t.INDEX_TITLE=2,t.INDEX_UP_LEVEL=3,t.INDEX_JINGAMI=5,t.INDEX_ELIXIR=6,t.INDEX_ORANGE=7,t}(IRedPoint);__reflect(UserRole.prototype,"UserRole");var PowerSkillState;!function(e){e[e.LOADING=0]="LOADING",e[e.USE=1]="USE",e[e.INIT=2]="INIT"}(PowerSkillState||(PowerSkillState={}));var UserSkill=function(e){function t(){var t=e.call(this)||this;return t.mRedPoint=new UserSkillRedPoint,t.regNetMsg(S2cProtocol.sc_skill_upgrade_result,t.grewUpSkillResult),t.regNetMsg(S2cProtocol.sc_skill_all_upgrade_result,t.grewUpAllSkillResult),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){},t.prototype.sendGrewUpSkill=function(e){var t=new Sproto.cs_skill_upgrade_request;t.skillID=e,GameSocket.ins().Rpc(C2sProtocol.cs_skill_upgrade,t)},t.prototype.sendSkillList=function(e){var t=new Sproto.cs_skill_sort_release_request;t.skills=e,GameSocket.ins().Rpc(C2sProtocol.cs_skill_sort_release,t)},t.prototype.grewUpSkillResult=function(e){var t=e.skillID,i=e.level,o=SubRoles.ins().GetRoleData(),n=o.skillLevels,a=0;for(var r in n)if(r==t.toString()){a=i-n[r],o.setSkillsDataByIndex(r,i);break}MessageCenter.ins().dispatch(MessageDef.SKILL_UPGRADE,t,i,a)},t.prototype.sendGrewUpAllSkill=function(){GameSocket.ins().Rpc(C2sProtocol.cs_skill_upgrade_all)},t.prototype.grewUpAllSkillResult=function(e){for(var t=SubRoles.ins().GetRoleData(),i=t.skillLevels,o=[],n=[],a=0;a<e.level.length;a++){var r=e.level[a];n[a]=r-i[a],t.setSkillsDataByIndex(a,r),o.push(e.level[a])}MessageCenter.ins().dispatch(MessageDef.SKILL_GREWUPALL,o,n)},t.prototype.getSkillLimitLevel=function(){return GameLogic.ins().actorModel.level},t.prototype.getSingleSkillGrewUpCost=function(e){var t=this.getSkillLimitLevel(),i=SubRoles.ins().GetRoleData().skillLevels[e],o=0;if(i>0){for(var n=i;t>n;n++)o+=GlobalConfig.ins().SkillsUpgradeConfig[n].cost;return o}return 0},t.prototype.getAllSkillGrewupCost=function(){var e=t.ins().getSkillLimitLevel(),i=SubRoles.ins().GetRoleData().skillLevels,o=GameLogic.ins().actorModel.gold,n=0,a=[];for(var r in i)i[r]>0&&a.push(i[r]);for(;;){for(var s=0,l=1;l<a.length;l++)a[s]>a[l]&&(s=l);if(a[s]>=e)break;var c=GlobalConfig.ins().SkillsUpgradeConfig[a[s]].cost;if(!(o>=c+n))break;n+=c,a[s]++}return n},t.prototype.canGrewupAllSkills=function(){var e=GameLogic.ins().actorModel.level,t=SubRoles.ins().GetRoleData();if(!t)return!1;var i=SubRoles.ins().GetRoleData().skillLevels;for(var o in i)if(i[o]>0&&i[o]<e)return!0;return!1},t}(BaseSystem);__reflect(UserSkill.prototype,"UserSkill");var UserSkillRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_UP_SKILL]=this.GetIndexUpSkill,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.SKILL_UPGRADE,MessageDef.SKILL_GREWUPALL,MessageDef.GOLD_CHANGE]},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.RP_SKILL_UPGRADE)},t.prototype.GetIndexUpSkill=function(){if(!UserSkill.ins().canGrewupAllSkills())return!1;var e=UserSkill.ins().getAllSkillGrewupCost();return e&&e<=GameLogic.ins().actorModel.gold?!0:!1},t.INDEX_UP_SKILL=0,t}(IRedPoint);__reflect(UserSkillRedPoint.prototype,"UserSkillRedPoint");var CheckTimer=function(){function e(e,t,i){void 0===i&&(i=800),this.m_CheckHaveCanTimer=!1,this.m_CheckTimer=0,this.m_CheckFun=e,this.m_CheckObj=t,this.m_GapTime=i}return e.prototype._ContinueCheck=function(){this.m_CheckFun&&this.m_CheckObj&&this.m_CheckFun.call(this.m_CheckObj)},e.prototype.CanCheck=function(){return this.m_CheckTimer>egret.getTimer()?(0==this.m_CheckHaveCanTimer&&(this.m_CheckHaveCanTimer=!0,TimerManager.ins().doTimer(this.m_GapTime+200,1,this._ContinueCheck,this)),!1):(this.m_CheckTimer=egret.getTimer()+this.m_GapTime,this.m_CheckHaveCanTimer&&(TimerManager.ins().remove(this._ContinueCheck,this),this.m_CheckHaveCanTimer=!1),!0)},e}();__reflect(CheckTimer.prototype,"CheckTimer");var SoundBg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currBg="",t}return __extends(t,e),t.prototype.isPlay=function(){return null!=this._currSoundChannel},t.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg=""},t.prototype.play=function(e){this._currBg!=e&&(this.stop(),this._currBg=e,TimerManager.ins().doNext(this.ChangeSound,this))},t.prototype.ChangeSound=function(){if(this._currBg){var e=this.getSound(this._currBg);e&&this.playSound(e)
}},t.prototype.playSound=function(e){e&&(this._currSound=e,this._currSoundChannel=this._currSound.play(0,0),this._currSoundChannel.volume=this._volume)},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){this._currBg==e&&this.playSound(RES.getRes(e))},t.prototype.checkCanClear=function(e){return this._currBg!=e},t}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var UserElixir=function(e){function t(){var t=e.call(this)||this;return t.mMsgDefUpdate=MessageDef.ROLE_ELIXIR_UPDATE,t.regNetMsg(S2cProtocol.sc_panacea_update,t.doWaveData),t}return __extends(t,e),t.prototype.useElixir=function(e){var t;t=new Sproto.cs_panacea_use_request,t.posid=e,this.Rpc(C2sProtocol.cs_panacea_use,t)},t.prototype.doWaveData=function(e){this.tElixirData=[];for(var t in e.lvlist)for(var i in this.tConfig)this.tConfig[i].posId==t&&(this.tElixirData[t]=this.tConfig[i],this.tElixirData[t].level=e.lvlist[t]);this.tElixirArr=e.attrs,GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_ELIXIR_UPDATE)},t.prototype.getElixirData=function(){return this.tElixirData},t.prototype.getElixirArr=function(){return this.tElixirArr},t.prototype.Init=function(){this.tConfig=GameGlobal.Config.PanaceaConfig,e.prototype.Init.call(this)},t}(BaseSystem);__reflect(UserElixir.prototype,"UserElixir");var RoleElixirPanel=function(e){function t(){var t=e.call(this)||this;return t.mItems=[],t.nSelectIndex=0,t.tElixirData=[],t.tDanYaoName=["生命丹","攻击丹","防御丹","命中丹","闪避丹","暴击丹","抗暴丹","攻速丹"],t.tDanYaoImg=["2006701","2006702","2006703","2006704","2006705","2006706","2006707","2006708"],t.skinName="RoleElixirSkin",t.name="丹药",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnUp,this.onCkick),this.observe(MessageDef.ROLE_ELIXIR_UPDATE,this.UpdateContent),this.commonWindowBg.SetTitle("丹药");for(var e=0;7>=e;e++){var t=this["g"+e];t.currentState="open",this.mItems[e]=t,this._AddClick(t,this._OnItemClick)}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_ELIXIR_UPDATE),this.nSelectIndex=0,this.UpdateContent()},t.prototype.onCkick=function(e){var t=this.getNowSelctDanYao();t&&UserBag.CheckEnough(t.itemid.id,t.itemid.count)&&GameGlobal.UserElixir.useElixir(t.posId)},t.prototype.getNowSelctDanYao=function(){return this.tElixirData[this.nSelectIndex]},t.prototype.upDateData=function(){this.tElixirData=GameGlobal.UserElixir.getElixirData()},t.prototype.UpdateContent=function(){this.upDateData(),this.localCanUpPos();for(var e=this.nSelectIndex,t=0;t<this.mItems.length;t++){var i=this.mItems[t];i.img_select.visible=t==e,this.UpdateItem(t)}this.upDateInfo()},t.prototype.upDateInfo=function(){var e=this.getNowSelctDanYao();this.nSelectIndex<=this.tDanYaoName.length&&(this.lbName.text=this.tDanYaoName[this.nSelectIndex]),this.needItemView.SetItemId(e.itemid.id,e.itemid.count),UIHelper.SetLabelText(this.lbHasUse,"已使用：",e.level+""),this.tattr.text=AttributeData.getAttStr(e.attrpower,0,1,"："),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(GameGlobal.UserElixir.getElixirArr());for(var t,i=0;8>i;i++)t=GameGlobal.UserElixir.getElixirArr()[i],t?this["totalAttr"+i].text=AttributeData.getAttStrByType(t,0,"+",!1,"#682f00"):this["totalAttr"+i].text=""},t.prototype.localCanUpPos=function(){if(this.tElixirData[this.nSelectIndex]){var e=this.tElixirData[this.nSelectIndex].itemid.id;if(GameGlobal.UserBag.GetCount(e)>=this.tElixirData[this.nSelectIndex].itemid.count)return}for(var t in this.tElixirData){var i=this.tElixirData[t].itemid.id;if(i&&GameGlobal.UserBag.GetCount(i)>=this.tElixirData[t].itemid.count){this.nSelectIndex=this.tElixirData[t].posId;break}}},t.prototype.UpdateItem=function(e){var t=this.mItems[e];if(e<=this.tDanYaoName.length){t.lb_name.text=this.tDanYaoName[e];var i=this.tDanYaoImg[e];t.img_icon.source=ResDataPath.GetItemFullPath(i)}var o="";this.tElixirData[e]&&this.tElixirData[e].level&&this.tElixirData[e].level>0&&(o=this.tElixirData[e].level),t.lb_level.text=o,t.lb_name.textColor=6827776,UIHelper.ShowRedPoint(t,this.tElixirData[e].itemid.count<=GameGlobal.UserBag.GetCount(this.tElixirData[e].itemid.id))},t.prototype._OnItemClick=function(e){var t=this.mItems.indexOf(e.currentTarget);this.nSelectIndex=t,this.UpdateContent()},t.prototype.OnClose=function(){},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_29)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleElixirPanel.prototype,"RoleElixirPanel",["ICommonWindow"]);var JingMaiData=function(e){function t(){var t=e.call(this)||this;return t.level=0,t.regNetMsg(S2cProtocol.sc_vein_update,t.getJingMaiData),t}return __extends(t,e),t.prototype.getJingMaiData=function(e){null!=e&&(this.level=e.level,this.totalAttrs=e.totalattr,MessageCenter.ins().dispatch(MessageDef.JINGMAI_DATA_UPDATE,e))},t.prototype.sendJingMaiUpLevel=function(){this.Rpc(C2sProtocol.cs_vein_Breakthrough)},t.MAX_LEVEL=11,t}(BaseSystem);__reflect(JingMaiData.prototype,"JingMaiData");var RoleJingMaiPanel=function(e){function t(){var t=e.call(this)||this;return t.isTop=!1,t.skinName="RoleJingMaiSkin",t.config=GameGlobal.Config.JingMaiLevelConfig,t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_30)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("经脉"),this.AddClick(this.btnUp,this.onCkick),MessageCenter.ins().dispatch(MessageDef.JINGMAI_DATA_UPDATE),this.observe(MessageDef.JINGMAI_DATA_UPDATE,this.UpdateContent),this.UpdateContent()},t.prototype.onCkick=function(e){if(e.target==this.btnUp){if(this.isTop)return void UserTips.ins().showTips("经脉已达顶级");var t=this.config[0==this.level?1:this.level].itemid;UserBag.CheckEnough(t.id,t.count)&&(GameGlobal.JingMaiData.sendJingMaiUpLevel(),UserTips.ins().showTips("升级成功"))}},t.prototype.showAttr=function(e){var t=GameGlobal.Config.JingMaiLevelConfig[this.isTop?e-1:e];this.tattr.text=AttributeData.getAttStr(t.attr,0,1,"：")},t.prototype.UpdateContent=function(){var e=1,t=JingMaiData.MAX_LEVEL;this.level=GameGlobal.JingMaiData.level,this.isTop=null==this.config[this.level+1],this.fullLabel.visible=this.isTop,this.attGroup.visible=!this.isTop,this.step=this.level/t>>0;var i=this.level%t;this._IsMaxLv(this.level)&&(i=JingMaiData.MAX_LEVEL,this.step-=1);var o,n,a;for(e;t>=e;e++)o=this.config[e+this.step*t],o&&(a=this["tname"+e],a.text=o.name,a.textColor=e>i?9738651:104196,n=this.conGroup.getChildAt(e-1),n.source=e>i?"ui_jm_bm_tupo02":"ui_jm_bm_tupo01",e==t?n.scaleX=n.scaleY=1.2:n.scaleX=n.scaleY=1);var r;for(e=0;8>e;e++)r=GameGlobal.JingMaiData.totalAttrs[e],r?this["totalAttr"+e].text=AttributeData.getAttStrByType(r,0,"+",!1,"#682f00"):this["totalAttr"+e].text="";this.powerLabel.text=ItemConfig.CalcAttrScoreValue(GameGlobal.JingMaiData.totalAttrs),this.showAttr(0==this.level?1:this.level);var s=this.config[0==this.level?1:this.level].itemid;s&&this.needItemView.SetItemId(s.id,s.count);var l=(this.step+1)/10>>0,c=(this.step+1)%10,u="";l>0?l>1?(u=StringUtils.numTenToChinese(l)+"十",u+=c>0?StringUtils.numTenToChinese(c)+"重":"重"):u=c>0?"十"+StringUtils.numTenToChinese(c)+"重":"十重":u=StringUtils.numTenToChinese(this.step+1)+"重",this.stepLabel.text=u,this.btnUp.label=0==this.level?"激 活":10==i?"突 破":"升 级",this.selectEff.visible=!0,this.selectEff.x=this.conGroup.getChildAt(i).x-8>>0,this.selectEff.y=this.conGroup.getChildAt(i).y-8>>0,i==t-1?this.selectEff.scaleX=this.selectEff.scaleY=1.2:this.selectEff.scaleX=this.selectEff.scaleY=1,this.isTop&&(a=this.tname10,a.text=this.config[this.level].name,a.textColor=104196,n=this.conGroup.getChildAt(i),n.source="ui_jm_bm_tupo01",this.selectEff.visible=!1)},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve()},t.prototype._IsMaxLv=function(e){return null==this.config[e+1]},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleJingMaiPanel.prototype,"RoleJingMaiPanel",["ICommonWindow"]);var EquipsData=function(){function e(){this.strengthen=0,this.gem=0,this.refine=0,this.exercise=0,this.item=new ItemData,this.deityEquipData=new DeityEquipData}return e.prototype.parser=function(e){this.strengthen=e.strengthen,this.refine=e.refine,this.exercise=e.anneal,this.gem=e.gem,this.item.ParserByEquipData(e.item),this.deityEquipData.UpdateInfo(e.reddata)},e.prototype.IsOrange=function(){return null!=this.item&&0!=this.item.configID&&4==this.item.itemConfig.quality},e.Create=function(t){var i=new e;return i.strengthen=0,i.gem=0,i.item.configID=t,i.item.count=1,i},e.prototype.GetForgeValue=function(e){var t=0;switch(e){case ForgeType.BOOST:t=this.strengthen;break;case ForgeType.REFINE:t=this.refine;break;case ForgeType.EXERCISE:t=this.exercise;break;case ForgeType.GEM:t=this.gem}return t},e}();__reflect(EquipsData.prototype,"EquipsData");var DeityEquipData=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.injectLevel=e.injectstage,this.injectNum=e.injectcount},e}();__reflect(DeityEquipData.prototype,"DeityEquipData");var RoleAutoSendData=function(){function e(e,t,i){void 0===i&&(i=200),this.mIsAuto=!1,this.mStep=0,this.mSendFunc=e,this.mStateChange=t,this.mTime=i}return e.prototype.Continue=function(){this.mStep=BitUtil.Set(this.mStep,e.CONTINUE,!0),this.CallFunc()},e.prototype.Toggle=function(){this.mIsAuto?this.Stop():this.Start()},e.prototype.Start=function(){this.mIsAuto||(this.mIsAuto=!0,this.mStep=e.ALL,TimerManager.ins().doTimer(this.mTime,0,this.Update,this),this.mStateChange&&this.mStateChange())},e.prototype.Stop=function(){this.mStep=0,this.mIsAuto&&(this.mIsAuto=!1,TimerManager.ins().removeAll(this),this.mStateChange&&this.mStateChange())},e.prototype.Update=function(){this.mStep=BitUtil.Set(this.mStep,e.UPDATE,!0),this.CallFunc()},e.prototype.Release=function(){this.Stop(),this.mSendFunc=null},e.prototype.CallFunc=function(){this.mStep==e.ALL&&(this.mSendFunc&&this.mSendFunc(),this.mStep=0)},e.CONTINUE=1,e.UPDATE=2,e.ALL=(1<<e.CONTINUE)+(1<<e.UPDATE),e}();__reflect(RoleAutoSendData.prototype,"RoleAutoSendData");var RoleSendCheckData=function(){function e(e,t,i,o){void 0===o&&(o=null),this.m_Callback=e,this.m_GetFunc=t,this.m_GetAuto=i,this.m_GetRestart=o}return e.prototype.SendBoost=function(e){this.m_Callback&&this.m_Callback(e)},e.prototype.GetCost=function(){return this.m_GetFunc()},e.prototype.SendUp=function(){var e=this,t=this.GetCost();if(!t)return!1;var i=t[0],o=t[1],n=t[2],a=t[3];if(i&&!Checker.Money(i,o))return!1;var r=n;if(!r)return!1;var s=GameGlobal.UserBag.GetCount(r),l=a-s;if(s>=a)return this.SendBoost(0),!0;if(this.m_GetAuto()){var c=ItemStoreConfig.GetStoreType(r);if(c==ShopController.EN_SHOP_BANGYUAN){var u=ItemStoreConfig.GetPrice(r)*l,p=GameLogic.ins().actorModel;if(!(u>p.byb))return this.SendBoost(1),!0;if(!this.m_IsTips)return WarnWin.show("绑元不足，是否【消耗元宝】来自动购买？",function(){e.m_IsUse=!0,e.m_IsTips=!0,e.m_GetRestart&&e.m_GetRestart()},this,function(){e.m_IsUse=!1},this),!1;if(!this.m_IsUse)return!1;if(u=ItemStoreConfig.GetPrice(r,ShopController.EN_SHOP_YUANBAO)*l,Checker.Money(MoneyConst.yuanbao,u))return this.SendBoost(2),!0}else if(c==ShopController.EN_SHOP_YUANBAO){var u=ItemStoreConfig.GetPrice(r,ShopController.EN_SHOP_YUANBAO)*l;if(Checker.Money(MoneyConst.yuanbao,u))return this.SendBoost(2),!0}else if(c==ShopController.EN_SHOP_NULL){var u=ItemStoreConfig.GetPrice(r,ShopController.EN_SHOP_YUANBAO)*l;if(Checker.Money(MoneyConst.yuanbao,u))return this.SendBoost(2),!0}else console.warn("not store type => ",c,r)}else UserWarn.ins().setBuyGoodsWarn(r,l);return!1},e}();__reflect(RoleSendCheckData.prototype,"RoleSendCheckData");var UserRide=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_RIDE)||this;return t.mMsgDefUpdateExp=MessageDef.ROLE_RIDE_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.ROLE_RIDE_UPDATE_DRUG,t.mMsgDefInit=MessageDef.ROLE_RIDE_INIT,t.mMsgDefUpdate=MessageDef.ROLE_RIDE_UPDATE,t.mMsgDefUpdateEquip=MessageDef.ROLE_RIDE_UPDATE_EQUIP,t.mMaxLevel=10,t.mRedPoint=new UserRideRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.RideBaseConfig,this.LvproConfig=GameGlobal.Config.RideLvproConfig,this.SkillConfig=GameGlobal.Config.RideSkillConfig,this.AttrsConfig=GameGlobal.Config.RideAttrsConfig,this.ProgressConfig=GameGlobal.Config.RideProgressConfig,this.SkinConfig=GameGlobal.Config.RideSkinConfig,e.prototype.Init.call(this)},t}(UserTemplate);__reflect(UserRide.prototype,"UserRide");var UserRideRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.RIDE,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(UserRideRedPoint.prototype,"UserRideRedPoint");var RoleRideDressPanel=function(e){function t(){var t=e.call(this)||this;return t.mList=[],t.skinName="RideDressSkin",t.list.itemRenderer=RoleRideDressItem,t.listCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,109),t._AddItemClick(t.list,t._OnItemClick),t._AddClick(t.activeBtn,t._OnClick),t._AddClick(t.getLabel,t._OnClick),t._AddClick(t.changeBtn,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.mModel=e[0],this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.mCommonWindowBg.SetTitle("皮肤"),this.commonWindowBg.OnAdded(this),this.UpdateList(),this.list.selectedIndex=0,e[1])for(var i in this.mList)this.mList[i].skinid==e[1]&&(this.list.selectedIndex=parseInt(i));this.UpdateContent()},t.prototype.UpdateList=function(){var e=this;this.mList=CommonUtils.copyDataHandler(this.mModel.GetSkinConfig());var t=function(t){var i=t.skinid;if(e.mModel.HasDress(i))return-1e5-i;var o=GameGlobal.UserBag.GetCount(t.itemid.id),n=t.itemid.count;return o>=n?-1e4-i:i};this.mList.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mList)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){var t=this.mList[this.list.selectedIndex];switch(e.currentTarget){case this.activeBtn:this.mModel.SendActiveDress(t.skinid);break;case this.getLabel:GainItemConfig.Guide(t.itemid.id);break;case this.changeBtn:this.mModel.SendDress(t.skinid)}},t.prototype._OnItemClick=function(e){this.UpdateContent()},t.prototype.UpdateContent=function(){for(var e=[],t=0,i=this.mList;t<i.length;t++){var o=i[t],n=GameGlobal.UserBag.GetCount(o.itemid.id),a=o.itemid.count,r=!this.mModel.HasDress(o.skinid)&&n>=a;o.__redPoint__=r,e.push(r)}this.listCtrl.SetRedPointList(e),this.listCtrl.OnRefresh(),UIHelper.ListRefresh(this.list);var s=this.mList[this.list.selectedIndex],l=GameGlobal.Config.ItemConfig[s.itemid.id];this.item.setItemData(s.itemid),this.item.isShowName(!1);var c=GameGlobal.UserBag.GetCount(s.itemid.id),u=s.itemid.count;l&&(this.nameLabel.text=l.name+("("+c+"/"+u+")"));var p=this.mModel.HasDress(s.skinid);this.activeBtn.visible=!p&&c>=u,this.attrLabel.text=AttributeData.getAttStr(s.attrpower,0),this.attrLabel.textColor=p?Color.l_green_1:Color.l_gray,this.allPowerLabel.text="皮肤总战力："+this.mModel.GetDressPower(),this.activeCountLabel.text="已激活数："+this.mModel.GetActiveDressCount(),this.mModel.mTemplateType==UserTemplate.TYPE_RIDE?this.ridePanel.SetBodyId(s.pid):this.showPanel.SetBody(AppearanceConfig.GetUIPath(s.pid)),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(s.attrpower),(this.groupItem.visible=!p)&&UIHelper.SetLinkStyleLabel(this.getLabel,GainItemConfig.GetGainName(s.itemid.id)),this.gaoupHave.visible=p,this.imgHave.visible=s.skinid==this.mModel.mDressId,this.changeBtn.visible=!this.imgHave.visible},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleRideDressPanel.prototype,"RoleRideDressPanel",["ICommonWindow"]);var RoleRideDressItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.nameLabel.text=e.name;var t=this.parent.parent.parent;this.stateImg.source=t.mModel.HasDress(e.skinid)?"ui_yuan":"ui_yuan_quse",this.imgRed.visible=this.data.__redPoint__},t}(eui.ItemRenderer);__reflect(RoleRideDressItem.prototype,"RoleRideDressItem");var SoundEffects=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.play=function(e){var t=this.getSound(e);t&&this.playSound(t)},t.prototype.playSound=function(e){var t=e.play(0,1);t.volume=this._volume},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){this.playSound(RES.getRes(e))},t}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var RoleSkilSetItem=function(e){function t(){var t=e.call(this)||this;return t.tSkillList=[],t.skinName="RoleSkillSetSkinItemSkin",t.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.tSkillList=SubRoles.ins().GetRoleData().getSkillSort();var e=this.tSkillList[this.data]-1,t=SubRoles.ins().GetRoleData(),i=t.GetCurSkillIDs(),o=i[e],n=t.getSkillsDataByIndex(e),a=SkillsConfig.GetSkillName(o),r=SkillsConfig.GetSkillDesc(o,n,0);n>0?(this.btn.touchEnabled=!0,this.filters=null):(this.btn.touchEnabled=!1,this.filters=Color.GetFilter()),this.lb_level.text=n+"",this.lbSkillLv.text=n+"",this.lbSkillNe.text=a,this.lbInfo.text=r,this.img_icon.source=SkillsConfig.GetSkillIcon(o)},t.prototype.OnClick=function(e){this.data>0&&(this.tSkillList=this.swapItems(this.tSkillList,this.data,this.data-1),UserSkill.ins().sendSkillList(this.tSkillList),SubRoles.ins().GetRoleData().setSkillSort(this.tSkillList),GameGlobal.MessageCenter.dispatch(MessageDef.SKILL_SORT_CHANGE))},t.prototype.swapItems=function(e,t,i){return e[t]=e.splice(i,1,e[t])[0],e},t}(eui.ItemRenderer);__reflect(RoleSkilSetItem.prototype,"RoleSkilSetItem");var RoleSkilSetLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tShopData=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RoleSkillSetSkin",this.viewStack.tabChildren=[TabView.CreateTabViewData(RoleSkilSetPanel)],this.commonWindowBg.SetViewStack(this.viewStack)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.viewStack.UpdateTabShowState(this.viewStack.length,!1),this.commonWindowBg.OnAdded(this),this.commonWindowBg.tabBar.visible=!1},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleSkilSetLayer.prototype,"RoleSkilSetLayer",["ICommonWindow","ICommonWindowTitle"]);var RoleSkilSetPanel=function(e){function t(){var t=e.call(this)||this;return t.tSkillList=[],t.skinName="RoleSkillSetPanelSkin",t.observe(MessageDef.SKILL_SORT_CHANGE,t.updateList),t.observe(MessageDef.SKILL_GREWUPALL,t.updateList),t.observe(MessageDef.SKILL_UPGRADE,t.updateList),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=0;8>e;e++){var t=SubRoles.ins().GetRoleData().getSkillSort(),i=t[e]-1,o=SubRoles.ins().GetRoleData(),n=o.GetCurSkillIDs(),a=n[i];a&&this.tSkillList.push(e)}this._AddItemClick(this.listView,this.onListViewClick),this.listView.itemRenderer=RoleSkilSetItem,this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype.updateList=function(){this.listView.dataProvider.replaceAll(this.tSkillList)},t.prototype.UpdateContent=function(){this.listView.dataProvider=new eui.ArrayCollection(this.tSkillList)},t.prototype.onListViewClick=function(e){},t.prototype.swapItems=function(e,t,i){return e[t]=e.splice(i,1,e[t])[0],e},t.prototype.onClick=function(e){},t}(BaseView);__reflect(RoleSkilSetPanel.prototype,"RoleSkilSetPanel",["ICommonWindowTitle"]);var UserSkin=function(e){function t(){var t=e.call(this)||this;return t.mMsgDefUpdate=MessageDef.ROLE_SKIN_UPDATE,t.titleConfig=[],t.regNetMsg(S2cProtocol.sc_effect_skin_update,t.doWaveData),t}return __extends(t,e),t.prototype.Init=function(){this.titleConfig=GameGlobal.Config.FashionSkinConfig,e.prototype.Init.call(this)},t.prototype.GetSkinConfig=function(){var e=this.titleConfig,t=[];for(var i in e)parseInt(i)>=1e3&&t.push(e[i]);return t.sort(function(e,t){return e.skinid-t.skinid}),t},t.prototype.HasDress=function(e){var t=!1;if(this.tServerData&&this.tServerData.ownlist)for(var i in this.tServerData.ownlist)if(this.tServerData.ownlist[i].id===e){t=!0;break}return t},t.prototype.GetDressData=function(e){if(this.tServerData)for(var t in this.tServerData.ownlist)if(this.tServerData.ownlist[t].id===e)return this.tServerData.ownlist[t];return null},t.prototype.SendActiveDress=function(e){var t;this.tServerData&&null!=this.tServerData.wearid&&(e===this.tServerData.wearid?this.changDress(e):(t=new Sproto.cs_effect_skin_activate_request,t.id=e,this.Rpc(C2sProtocol.cs_effect_skin_activate,t)))},t.prototype.changDress=function(e){var t;t=new Sproto.cs_effect_skin_change_request,t.id=e,this.Rpc(C2sProtocol.cs_effect_skin_change,t)},t.prototype.doWaveData=function(e){this.tServerData=e,GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_SKIN_UPDATE),GameGlobal.RaidMgr.UpdateRole()},t.prototype.GetDressPower=function(){var e=0;for(var t in this.titleConfig)if(this.tServerData&&this.tServerData.ownlist)for(var i in this.tServerData.ownlist){var o=this.tServerData.ownlist[i].id;o===this.titleConfig[t][GameGlobal.actorModel.sex].skinid&&(e+=ItemConfig.CalcAttrScoreValue(this.titleConfig[t][GameGlobal.actorModel.sex].attrpower))}return e},t.prototype.getWearId=function(){return this.tServerData?this.tServerData.wearid:0},t.prototype.GetActiveDressCount=function(){return this.tServerData&&this.tServerData.ownlist?this.tServerData.ownlist.length:0},t.prototype.IsOpen=function(e){},t}(BaseSystem);__reflect(UserSkin.prototype,"UserSkin");var RoleSkinPanel=function(e){function t(){var t=e.call(this)||this;return t.mList=[],t.skinName="RideDressSkin",t.list.itemRenderer=RoleSkinDressItem,t.listCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,109),t._AddItemClick(t.list,t._OnItemClick),t._AddClick(t.activeBtn,t._OnClick),t._AddClick(t.getLabel,t.onGuide),t._AddClick(t.changeBtn,t._OnChange),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0],this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.commonWindowBg.SetTitle("时装"),this.commonWindowBg.OnAdded(this),this.UpdateList(),this.list.selectedIndex=0,this.listCtrl.OnRefresh(),this.UpdateContent(),this.AddLoopTimer(1e3,this.UpdateTimeGroup)},t.prototype.getSkinId=function(){var e=SubRoles.ins().GetRoleData(),t=e.mRideId;return t},t.prototype.UpdateList=function(){var e=this;this.mList=CommonUtils.copyDataHandler(this.mModel.GetSkinConfig());var t=function(t){var i=t[GameGlobal.actorModel.sex],o=(i.skinid,GameGlobal.UserBag.GetCount(i.itemid.id)||0);return o>0?0:e.mModel.HasDress(i.skinid)?1:2};this.mList.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mList)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(){var e=this.mList[this.list.selectedIndex][GameGlobal.actorModel.sex];this.mModel.SendActiveDress(e.skinid)},t.prototype._OnChange=function(){var e=this.mList[this.list.selectedIndex][GameGlobal.actorModel.sex];this.mModel.changDress(e.skinid)},t.prototype.onGuide=function(){var e=this.mList[this.list.selectedIndex][GameGlobal.actorModel.sex];e&&e.itemid.id&&GainItemConfig.Guide(e.itemid.id)},t.prototype._OnItemClick=function(e){this.UpdateContent()},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.list);var e=this.mList[this.list.selectedIndex][GameGlobal.actorModel.sex],t=GameGlobal.Config.ItemConfig[e.itemid.id];this.item.setItemData(e.itemid),this.item.isShowName(!1);var i=GameGlobal.UserBag.GetCount(e.itemid.id),o=e.itemid.count;t&&(this.nameLabel.text=t.name+("("+i+"/"+o+")")),this.activeBtn.visible=!this.mModel.HasDress(e.skinid)&&i>=o,this.attrLabel.text=AttributeData.getAttStr(e.attrpower,0),this.attrLabel.textColor=this.mModel.HasDress(e.skinid)?Color.l_green_1:Color.l_gray,this.allPowerLabel.text="时装总战力："+this.mModel.GetDressPower(),this.activeCountLabel.text="已激活数："+this.mModel.GetActiveDressCount();var n=GameGlobal.Config.RideSkinConfig[this.getSkinId()],a=new RoleShowData;a.job=GameGlobal.actorModel.job,a.sex=GameGlobal.actorModel.sex,a.clothID=e.pid,a.rideId=n?n.pid:0,this.roleShowPanel.SetAll(a),this.getLabel.text="",this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrpower),this.timeGroup.visible=!1;var r=this.mModel.GetDressData(e.skinid);this.mDressData=r,this.mModel.HasDress(e.skinid)?(this.groupItem.visible=!1,this.gaoupHave.visible=!0,this.mModel.getWearId()===e.skinid?(this.changeBtn.visible=!1,this.imgHave.visible=!0):(this.changeBtn.visible=!0,this.imgHave.visible=!1),this.UpdateTimeGroup()):(this.groupItem.visible=!0,this.gaoupHave.visible=!1,UIHelper.SetLinkStyleLabel(this.getLabel,GainItemConfig.GetGainName(e.itemid.id)))},t.prototype.UpdateTimeGroup=function(){if(this.mDressData&&this.mDressData.term){this.timeGroup.visible=!0;var e=this.mDressData.term-GameServer.serverTime;e>0?this.timeLabel.text=DateUtils.format_1(1e3*e):this.timeLabel.text="已过期"}else this.timeGroup.visible=!1},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_33)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleSkinPanel.prototype,"RoleSkinPanel",["ICommonWindow"]);var RoleSkinDressItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data[GameGlobal.actorModel.sex];this.nameLabel.text=e.name;var t=this.parent.parent.parent,i=t.mModel.HasDress(e.skinid);this.stateImg.source=i?"ui_yuan":"ui_yuan_quse";var o=GameGlobal.UserBag.GetCount(e.itemid.id);!i&&o?this.imgRed.visible=!0:this.imgRed.visible=!1},t}(eui.ItemRenderer);__reflect(RoleSkinDressItem.prototype,"RoleSkinDressItem");var RoleSuitPanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.isFashion=!1,t.skinName="RoleSuitSkin",t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,112),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=RoleSuitHeadItem;var e=CommonUtils.GetArray(GameGlobal.Config.SuitConfig,"id");this.list.dataProvider=new eui.ArrayCollection(e),this.list.selectedIndex=this.mSelectIndex,this._AddItemClick(this.list,this._OnItemTap),this.itemList.itemRenderer=RoleSuitEquipItem,this.itemList.dataProvider=null},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("套装"),this.mListLRBtnCtrl.OnRefresh(),this.UpdateContent()},t.prototype._OnItemTap=function(e){this.mSelectIndex=e.itemIndex,this.UpdateContent()},t.prototype.UpdateContent=function(){var e=this.mSelectIndex+1,t=GameGlobal.Config.SuitConfig[e];if(t){var i=0,o=0,n=[];this.isFashion=!1;var a=SubRoles.ins().GetRoleData(),r=new RoleShowData;r.job=a.job,r.sex=a.sex;for(var s=0;s<t.activation.length;s++){var l=t.activation[s].type,c=this.getSkinIdsByType(l),u=t.activation[s].id,p=c.indexOf(u),h=this.getSkinConfig(l,u,r);p>-1&&(i++,o+=l==UserTemplate.TYPE_DRESS_FATION?ItemConfig.CalcAttrScoreValue(h[GameGlobal.actorModel.sex].attrpower):ItemConfig.CalcAttrScoreValue(h.attrpower)),n[s]={type:l,flag:p>-1,config:l==UserTemplate.TYPE_DRESS_FATION?h[GameGlobal.actorModel.sex]:h}}this.itemList.dataProvider=new eui.ArrayCollection(n),this.isFashion||(r.clothID=a.GetSubRoleData().GetBodyId()),this.roleShowPanel.SetAll(r);for(var d=void 0,s=1;3>=s;s++)d=this["item"+s],d.bg.source=i>=s+1?"ui_tz_bm_jihuoshuxingbg01":"ui_tz_bm_jihuoshuxingbg02",d.title.textColor=i>=s+1?7222027:9989443,d.title.text="激活"+(s+1)+"件",d.attr.textColor=i>=s+1?7222027:9989443,d.attr.text="战力："+ItemConfig.CalcAttrScoreValue(t["attrpower_"+s])+"\n"+AttributeData.getAttStr(t["attrpower_"+s],0,1,"：");this.powerLabel.text=o,this.nameLab.text=t.name}},t.prototype.getSkinConfig=function(e,t,i){var o;switch(e){case UserTemplate.TYPE_RIDE:o=GameGlobal.Config.RideSkinConfig[t],i.rideId=o.pid;break;case UserTemplate.TYPE_WING:o=GameGlobal.Config.WingSkinConfig[t],i.wingId=o.pid;break;case UserTemplate.TYPE_SHENGB:o=GameGlobal.Config.WeaponSkinConfig[t],i.swordID=o.pid;break;case UserTemplate.TYPE_DRESS_FATION:o=GameGlobal.Config.FashionSkinConfig[t],this.isFashion=!0,i.clothID=o[GameGlobal.actorModel.sex].pid;break;case UserTemplate.TYPE_TIANX:o=GameGlobal.Config.FairySkinConfig[t],i.tianxId=o.pid}return o},t.prototype.getSkinIdsByType=function(e){var t=SubRoles.ins().GetRoleData(),i=t.skinDic[e]||[];return i},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleSuitPanel.prototype,"RoleSuitPanel",["ICommonWindow"]);var RoleSuitHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.icon.source=e.icon}},t}(eui.ItemRenderer);__reflect(RoleSuitHeadItem.prototype,"RoleSuitHeadItem");var RoleSuitItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.Component);__reflect(RoleSuitItem.prototype,"RoleSuitItem");var RoleSuitEquipItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RoleSuitEquipItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){this.title.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},t.prototype.dataChanged=function(){this.data&&(this.flagImg.source=this.data.flag?"ui_yuan":"ui_yuan_quse",this.flag.text=this.data.flag?"已激活":"未激活",this.flag.textColor=this.data.flag?13793025:9738651,this.data.config&&(UIHelper.SetLinkStyleLabel(this.title,this.data.config.name),this.itemIcon.data=this.data.config.itemid,this.power.textColor=this.data.flag?13793025:9738651,this.power.text="战力 "+ItemConfig.CalcAttrScoreValue(this.data.config.attrpower)))},t.prototype.tap=function(){var e=this.data.config.skinid;1==this.data.type?ViewManager.ins().open(RoleRideDressPanel,GameGlobal.UserRide,e):2==this.data.type?ViewManager.ins().open(RoleRideDressPanel,GameGlobal.UserWing,e):3==this.data.type?ViewManager.ins().open(RoleRideDressPanel,GameGlobal.TianxModel,e):4==this.data.type&&ViewManager.ins().open(RoleRideDressPanel,GameGlobal.SwordModel,e)},t}(eui.ItemRenderer);__reflect(RoleSuitEquipItem.prototype,"RoleSuitEquipItem");var RoleSuitTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="RoleSuitTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.Config.RoleSuitConfig,o=this.getSuitLevel(i),n=null;o?(this.activeLabel2.visible=!1,this.curTipLabel.text=i[o].des,this.curLabel.text=AttributeData.getAttStr(i[o].attrs,0),i[o+1]?(this.currentState="active",this.nextTipLabel.text=i[o+1].des,this.nextLabel.text=AttributeData.getAttStr(i[o+1].attrs,0),n=ItemConfig.CalcAttrScoreValue(i[o+1].attrs)-ItemConfig.CalcAttrScoreValue(i[o].attrs)):this.currentState="full"):(this.activeLabel2.visible=!0,this.nextTipLabel.text=i[1].des,this.currentState="none",this.nextLabel.text=AttributeData.getAttStr(i[1].attrs,0),n=ItemConfig.CalcAttrScoreValue(i[1].attrs)),null!=n?this.effLabel.text="可提升"+n+"战力":this.effLabel.text=""},t.prototype.getSuitLevel=function(e){var t,i,o=SubRoles.ins().GetRoleData(),n=o.getEquipLen(),a=0;for(var r in e){t=0;for(var s=0;n>s;s++)i=o.getEquipByIndex(s),i&&i.item.configID&&e[r].quality<=i.item.itemConfig.quality&&i.item.itemConfig.level>=e[r].level&&t++;
if(!(t>=e[r].count))break;a=e[r].suitLv}return this.img.filters=a?null:Color.GetFilter(),a},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RoleSuitTipPanel.prototype,"RoleSuitTipPanel");var UserTitle=function(e){function t(){var t=e.call(this)||this;return t.mMsgDefUpdate=MessageDef.ROLE_TITLE_UPDATE,t.regNetMsg(S2cProtocol.sc_effect_title_update,t.doWaveData),t}return __extends(t,e),t.prototype.Init=function(){this.titleConfig=GameGlobal.Config.TitleConf,e.prototype.Init.call(this)},t.prototype.GetSkinConfig=function(){var e=this.titleConfig,t=[];for(var i in e)parseInt(i)>=1e3&&t.push(e[i]);return t.sort(function(e,t){return e.skinid-t.skinid}),t},t.prototype.HasDress=function(e){var t=!1;if(this.tServerData)for(var i in this.tServerData.ownlist)if(this.tServerData.ownlist[i].id===e){t=!0;break}return t},t.prototype.GetDressData=function(e){if(this.tServerData)for(var t in this.tServerData.ownlist)if(this.tServerData.ownlist[t].id===e)return this.tServerData.ownlist[t];return null},t.prototype.getOwnList=function(){return this.tServerData.ownlist},t.prototype.SendActiveDress=function(e){var t;e===this.tServerData.wearid?this.changDress(e):(t=new Sproto.cs_effect_title_activate_request,t.id=e,this.Rpc(C2sProtocol.cs_effect_title_activate,t))},t.prototype.changDress=function(e){var t;t=new Sproto.cs_effect_title_change_request,t.id=e,this.Rpc(C2sProtocol.cs_effect_title_change,t)},t.prototype.doWaveData=function(e){this.getWearId();this.tServerData=e,GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_TITLE_UPDATE),GameGlobal.RaidMgr.UpdateRole()},t.prototype.GetDressPower=function(){var e=0;for(var t in this.titleConfig)for(var i in this.tServerData.ownlist){var o=this.tServerData.ownlist[i].id;o===this.titleConfig[t].skinid&&(e+=ItemConfig.CalcAttrScoreValue(this.titleConfig[t].attrpower))}return e},t.prototype.GetActiveDressCount=function(){return this.tServerData?this.tServerData.ownlist.length:0},t.prototype.getWearId=function(){return this.tServerData?this.tServerData.wearid:0},t.prototype.GetIndex=function(e){return this.tServerData&&this.tServerData.ownlist?this.tServerData.ownlist[e]||null:null},t.prototype.GetAddAttrRate=function(e){var t=0,i=GameGlobal.Config.TitleAttrConf;for(var o in i)1==this.HasDress(i[o].skinid)&&i[o].type==e&&(t+=i[o].attrpower);return t/100},t}(BaseSystem);__reflect(UserTitle.prototype,"UserTitle");var RoleTitlePanel=function(e){function t(){var t=e.call(this)||this;return t.mList=[],t.skinName="RideDressSkin",t.list.itemRenderer=RoleTitleDressItem,t.listCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,109),t._AddItemClick(t.list,t._OnItemClick),t._AddClick(t.activeBtn,t._OnClick),t._AddClick(t.changeBtn,t._OnChange),t._AddClick(t.getLabel,t.onGuide),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0],this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.commonWindowBg.SetTitle("称号"),this.commonWindowBg.OnAdded(this),this.UpdateList(),this.list.selectedIndex=0,this.UpdateContent(),this.AddLoopTimer(1e3,this.UpdateTimeGroup)},t.prototype.UpdateList=function(){for(var e=this,t=this.mModel.GetSkinConfig(),i=0,o=t;i<o.length;i++){var n=o[i];1==n.show&&this.mList.push(n)}var a=function(t){return t.hasOwnProperty("itemid")?e.mModel.HasDress(t.skinid)?t.skinid-1e3:GameGlobal.UserBag.GetCount(t.itemid.id)>0?t.skinid-1e4:t.skinid:void 0};this.mList.sort(function(e,t){return a(e)-a(t)}),this.list.dataProvider=new eui.ArrayCollection(this.mList)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(){var e=this.mList[this.list.selectedIndex];this.mModel.SendActiveDress(e.skinid)},t.prototype._OnChange=function(){var e=this.mList[this.list.selectedIndex];this.mModel.changDress(e.skinid)},t.prototype.onGuide=function(){var e=this.mList[this.list.selectedIndex];e&&e.itemid.id&&GainItemConfig.Guide(e.itemid.id)},t.prototype._OnItemClick=function(e){this.UpdateContent()},t.prototype.UpdateContent=function(){for(var e=[],t=0,i=this.mList;t<i.length;t++){var o=i[t],n=this.mModel.HasDress(o.skinid),a=GameGlobal.UserBag.GetCount(o.itemid.id),r=!1;!n&&a&&(r=!0),e.push(r),o.__redPoint__=r}this.listCtrl.SetRedPointList(e),this.listCtrl.OnRefresh(),UIHelper.ListRefresh(this.list);var s=this.mList[this.list.selectedIndex],l=GameGlobal.Config.ItemConfig[s.itemid.id];this.item.setItemData(s.itemid),this.item.isShowName(!1);var c=GameGlobal.UserBag.GetCount(s.itemid.id),u=s.itemid.count;l&&(this.nameLabel.text=l.name+("("+c+"/"+u+")")),this.activeBtn.visible=!this.mModel.HasDress(s.skinid)&&c>=u,this.attrLabel.text=AttributeData.getAttStr(s.attrpower,0),this.changeTitle(),this.attrLabel.textColor=this.mModel.HasDress(s.skinid)?Color.l_green_1:Color.l_gray,this.allPowerLabel.text="称号总战力："+this.mModel.GetDressPower(),this.activeCountLabel.text="已激活数："+this.mModel.GetActiveDressCount(),this.imgStyle.source=s.icon,this.imgStyle.scaleX=1.5,this.imgStyle.scaleY=1.5,this.getLabel.text="",this.powerLabel.text=ItemConfig.CalcAttrScoreValue(s.attrpower),this.timeGroup.visible=!1;var p=this.mModel.GetDressData(s.skinid);this.mDressData=p,p?(this.groupItem.visible=!1,this.gaoupHave.visible=!0,this.mModel.getWearId()===s.skinid?(this.changeBtn.visible=!1,this.imgHave.visible=!0):(this.changeBtn.visible=!0,this.imgHave.visible=!1),this.UpdateTimeGroup()):(this.groupItem.visible=!0,this.gaoupHave.visible=!1,"运营活动"==GainItemConfig.GetGainName(s.itemid.id)?this.getLabel.text=GainItemConfig.GetGainName(s.itemid.id):UIHelper.SetLinkStyleLabel(this.getLabel,GainItemConfig.GetGainName(s.itemid.id)))},t.prototype.UpdateTimeGroup=function(){if(this.mDressData&&this.mDressData.term){this.timeGroup.visible=!0;var e=this.mDressData.term-GameServer.serverTime;e>0?this.timeLabel.text=DateUtils.format_1(1e3*e):this.timeLabel.text="已过期"}else this.timeGroup.visible=!1},t.prototype.changeTitle=function(){var e=this.mList[this.list.selectedIndex],t=e.skinid,i=GameGlobal.Config.TitleAttrConf;if(void 0!=i[t]){var o=i[t].attrpower,n=i[t].des;this.attrLabel.text+="\n"+n+"+"+o+"%",this.attrLabel.textAlign="left"}else{var a=e.attrpower;this.attrLabel.textAlign="left",this.attrLabel.text=AttributeData.getAttStr(a,0)}},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_34)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleTitlePanel.prototype,"RoleTitlePanel",["ICommonWindow"]);var RoleTitleDressItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.nameLabel.text=e.name;var t=this.parent.parent.parent,i=t.mModel.HasDress(e.skinid);this.stateImg.source=i?"ui_yuan":"ui_yuan_quse";GameGlobal.UserBag.GetCount(e.itemid.id);this.imgRed.visible=this.data.__redPoint__},t}(eui.ItemRenderer);__reflect(RoleTitleDressItem.prototype,"RoleTitleDressItem");var TreasureData=function(){function e(){}return e.prototype.updateByuseSpells=function(e){this.initData(e.spellsNo,e.lv,e.skillList),this.level=e.lv},e.prototype.updateUpuseSpells=function(e){this.level=e.lv;var t=this.SpellsResLvproConfig?this.SpellsResLvproConfig[this.level-1]:null;t&&(this.cost=t.cost||[],this.attrs=t.attrs||[],this.tiptext=t.tiptext||"",this.attrstips=t.attrstips||"")},e.prototype.spellsList=function(e){this.initData(e.spellsNo,1,e.skillList),this.lock=e.lock||0,this.spellsId=e.spellsId||0},e.prototype.replace=function(e){this.initData(e.spellsNo,1,e.oldSkillList),this.lock=e.lock||0,this.spellsId=e.spellsId||0},e.prototype.initData=function(e,t,i){if(e&&t){var o=GlobalConfig.ins().SpellsResListConfig[e]||{};if(this.SpellsResLvproConfig=GlobalConfig.ins().SpellsResLvproConfig[e],!this.SpellsResLvproConfig)return;var n=this.SpellsResLvproConfig[t-1]||{};this.id=o.id||0,this.quality=o.quality||0,this.name=o.name||"",this.icon=o.icon||"",this.type=o.type||0,this.cost=n.cost||[],this.attrs=n.attrs||[],this.skillid=i,this.tiptext=n.tiptext||"",this.attrstips=n.attrstips||""}},e}();__reflect(TreasureData.prototype,"TreasureData");var TreasureModel=function(e){function t(){var t=e.call(this)||this;return t.tUseSpellsData=[],t.tSpellsListData=[],t.nNum=0,t.nPerfectNum=0,t.mRedPoint=new TreasureRedPoint,t.regNetMsg(S2cProtocol.sc_spellsRes_info,t.doSpellsRes),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this);for(var t in GameGlobal.Config.SpellsResLvproConfig){GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.SpellsResLvproConfig[t][0].cost.id,MessageDef.TREASURE_ITEM_CHANGE);break}for(var t in GameGlobal.Config.SpellsResMakeConfig)for(var i=GameGlobal.Config.SpellsResMakeConfig[t],o=0,n=i.cost;o<n.length;o++){var a=n[o];GameGlobal.UserBag.AddListenerItem(a.id,MessageDef.TREASURE_ITEM_CHANGE)}},t.prototype.sendSpellsResMake=function(e,t){var i=this,o=new Sproto.cs_spellsRes_make_request;o.makeType=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_spellsRes_make,o,function(e){var t=e;t.ret?(i.spellsResMake(t),MessageCenter.ins().dispatch(MessageDef.TREASURE_CHANGE),MessageCenter.ins().dispatch(MessageDef.TREASURE_UPDATE_MAKE)):UserTips.ins().showTips("打造失败")})},t.prototype.sendSpellsResUse=function(e,t){var i=this,o=new Sproto.cs_spellsRes_use_request;o.pos=e,o.spellsId=t,this.Rpc(C2sProtocol.cs_spellsRes_use,o,function(e){var t=e;t.ret&&(i.spellsResUse(t),MessageCenter.ins().dispatch(MessageDef.TREASURE_CHANGE))})},t.prototype.sendSpellsResLock=function(e,t){var i=this,o=new Sproto.cs_spellsRes_lock_request;o.lock=e,o.spellsId=t,this.Rpc(C2sProtocol.cs_spellsRes_lock,o,function(e){var t=e;t.ret&&(i.spellsResLock(t),MessageCenter.ins().dispatch(MessageDef.TREASURE_LOCK))})},t.prototype.sendSpellsResUpLv=function(e,t){var i=this,o=new Sproto.cs_spellsRes_up_lv_request;o.pos=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_spellsRes_up_lv,o,function(e){var t=e;t.ret&&(i.spellsResUpLv(t),MessageCenter.ins().dispatch(MessageDef.TREASURE_CHANGE),MessageCenter.ins().dispatch(MessageDef.TREASURE_UPDATE_LV))})},t.prototype.sendSpellsResSmelt=function(e){var t=this,i=new Sproto.cs_spellsRes_smelt_request;i.spellsIdList=e,this.Rpc(C2sProtocol.cs_spellsRes_smelt,i,function(e){var i=e;t.spellsResSmelt(i),MessageCenter.ins().dispatch(MessageDef.TREASURE_CHANGE)})},t.prototype.doSpellsRes=function(e){this.updateTreasure(e),GameGlobal.MessageCenter.dispatch(MessageDef.TREASURE_CHANGE)},t.prototype.getPerFectTime=function(){return this.nPerfectNum},t.prototype.getHaveList=function(){var e;return e=this.deepCopy(this.tSpellsListData),e.reverse()},t.prototype.getUseList=function(){return this.tUseSpellsData},t.prototype.deepCopy=function(e){if("object"==typeof e){var t=e instanceof Array?[]:{};for(var i in e)e.hasOwnProperty(i)&&(t[i]="object"==typeof e[i]?this.deepCopy(e[i]):e[i]);return t}},t.prototype.updateTreasure=function(e){if(e){if(this.nNum=e.num||0,this.nPerfectNum=e.perfectNum||0,e.useSpells)for(var t in e.useSpells)if(e.useSpells[t].spellsNo)if(this.tUseSpellsData[t])this.tUseSpellsData[t].updateByuseSpells(e.useSpells[t]);else{var i=new TreasureData;i.updateByuseSpells(e.useSpells[t]),this.tUseSpellsData[t]=i}else this.tUseSpellsData[t]={};if(e.spellsList)for(var t in e.spellsList){var o=!1;for(var n in this.tSpellsListData)this.tSpellsListData[n].spellsId===e.spellsList[t].spellsId&&(this.tSpellsListData[n].spellsList(e.spellsList[t]),o=!0);if(!o){var i=new TreasureData;i.spellsList(e.spellsList[t]),i&&this.tSpellsListData.push(i)}}}},t.prototype.spellsResMake=function(e){if(this.nNum=e.num||0,this.nPerfectNum=e.perfectNum||0,e.spellsId&&e.spellsNo){var t=new TreasureData;t.spellsList({spellsId:e.spellsId,spellsNo:e.spellsNo,lock:0,skillList:e.skillList}),t&&this.tSpellsListData.push(t)}},t.prototype.spellsResUse=function(e){this.nNum=e.num||0;var t=this.tUseSpellsData[e.pos-1];if(t)if(t instanceof TreasureData){var i={lv:t.level||1,spellsNo:e.useSpellsNo,skillList:e.useSkillList||[]};t.updateByuseSpells(i)}else{var i=new TreasureData,o={lv:1,spellsNo:e.useSpellsNo,skillList:e.useSkillList||[]};i.updateByuseSpells(o),this.tUseSpellsData[e.pos-1]=i}for(var n=0;n<this.tSpellsListData.length;n++){var i=this.tSpellsListData[n];if(i.spellsId===e.spellsId){if(0===e.spellsNo){this.tSpellsListData.splice(n,1);break}i.replace(e)}}},t.prototype.spellsResLock=function(e){for(var t in this.tSpellsListData){var i=this.tSpellsListData[t];i.spellsId===e.spellsId&&(i.lock=e.lock)}},t.prototype.spellsResUpLv=function(e){var t=e.pos-1;this.tUseSpellsData[t]&&this.tUseSpellsData[t].updateUpuseSpells(e)},t.prototype.spellsResSmelt=function(e){for(var t=this.tSpellsListData.length-1;t>=0;t--)for(var i in e.spellsIdList)this.tSpellsListData[t]&&this.tSpellsListData[t].spellsId===e.spellsIdList[i]&&this.tSpellsListData.splice(t,1)},t.prototype.getShowConByType=function(e){if(!e)return[];var t=[],i=GlobalConfig.ins().SpellsResListConfig;for(var o in i){var n=new TreasureData;switch(e){case 1:i[o].quality===ITEM_QUALITY.RED_QUALITY&&(n.initData(i[o].id,1,[]),t.push(n));break;case 2:i[o].quality===ITEM_QUALITY.ORANGE_QUALITY&&(n.initData(i[o].id,1,[]),t.push(n));break;case 3:i[o].quality===ITEM_QUALITY.RED_QUALITY||i[o].quality===ITEM_QUALITY.ORANGE_QUALITY||(n.initData(i[o].id,1,[]),t.push(n))}}return t},t.prototype.canEquip=function(e,t){for(var i in this.tUseSpellsData)if(t!=parseInt(i)&&this.tUseSpellsData[i].type==e)return!1;return!0},t}(BaseSystem);__reflect(TreasureModel.prototype,"TreasureModel");var TreasureRedPoint=function(e){function t(){var t=e.call(this)||this;return console.log("--------------------------------"),t}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_UP_TREASURE]=this.GetIndexUpTreasure,e[t.INDEX_MAKE_TREASURE]=this.GetIndexMakeTreasure,e[t.INDEX_RESOLVE_TREASURE]=this.GetIndexResolveTreasure,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.TREASURE_CHANGE,MessageDef.TREASURE_LOCK,MessageDef.TREASURE_ITEM_CHANGE]},t.prototype.IsRedPoint=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_31)?e.prototype.IsRedPoint.call(this):!1},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.RP_TREASURE)},t.prototype.GetIndexUpTreasure=function(){var e=!1,t=GameGlobal.TreasureModel.getUseList();for(var i in t){var o=t[i];if(o.level&&o.level<100&&GameGlobal.UserBag.GetCount(o.cost.id)>=o.cost.count){e=!0;break}}return e},t.prototype.GetIndexMakeTreasure=function(){var e=GlobalConfig.ins().SpellsResMakeConfig;for(var t in e){var i=e[t];if(Checker.CheckDatas(i.cost,!1,!1))return!0}return!1},t.prototype.GetIndexResolveTreasure=function(){var e=GameGlobal.TreasureModel.getHaveList();return e.length},t.INDEX_UP_TREASURE=0,t.INDEX_MAKE_TREASURE=1,t.INDEX_RESOLVE_TREASURE=2,t}(IRedPoint);__reflect(TreasureRedPoint.prototype,"TreasureRedPoint");var BaseCricleIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.setData=function(e){e&&(e.icon&&(this.imgBg.source=e.icon),"number"==typeof e.quality&&(this.imgIcon.source=PetConst.QUALITY_SKILL_BG[e.quality]||""))},t}(BaseView);__reflect(BaseCricleIcon.prototype,"BaseCricleIcon");var TreaMakeRect=function(e){function t(){var t=e.call(this)||this;return t.lId=0,t.rId=0,t.nType=0,t.skinName="TreasureMakeRectSkin",t.listView.itemRenderer=ItemBaseCost,t._AddClick(t.btnBuild,t.onClick),t._AddClick(t.lNe,t.onClick),t._AddClick(t.rNe,t.onClick),t.mRoleSendCheckData=new RoleSendCheckData(function(e){GameGlobal.TreasureModel.sendSpellsResMake(t.nType,e)},function(){var e=GlobalConfig.ins().SpellsResMakeConfig[t.nType];if(e){var i=e.cost;return[3,0,i[0].id,i[0].count]}return[null]},function(){var e=t.checkBox.selected;return e}),t}return __extends(t,e),t.prototype._SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype.onUpdate=function(e){var t=GlobalConfig.ins().SpellsResMakeConfig[e];if(t){if(this.nType=e,1===this.nType){this.lbName.text="普通打造",this.currentState="normal",this.btnBuild.icon="ui_fb_bt_putongdazao";var i="",o="";for(var n in t.cost)t.cost[n].id&&("0"==n?(this.lId=t.cost[n].id,i=GameGlobal.Config.ItemConfig[t.cost[n].id].name||""):"1"==n&&(this.rId=t.cost[n].id,o=GameGlobal.Config.ItemConfig[t.cost[n].id].name||""));UIHelper.SetLinkStyleLabel(this.lNe,i),UIHelper.SetLinkStyleLabel(this.rNe,o)}else 2===this.nType&&(this.lbName.text="完美打造",this.currentState="perfit",this.btnBuild.icon="ui_fb_bt_wanmeidazao",this.lbAddup.text="已累计: "+GameGlobal.TreasureModel.getPerFectTime()+"次");this.listView.dataProvider=new eui.ArrayCollection(t.cost)}},t.prototype.onClick=function(e){switch(e.target){case this.btnBuild:this._SendUp();break;case this.lNe:this.lId&&UserWarn.ins().BuyGoodsWarn(this.lId);break;case this.rNe:this.rId&&UserWarn.ins().BuyGoodsWarn(this.rId)}},t}(BaseView);__reflect(TreaMakeRect.prototype,"TreaMakeRect");var TreasureArrInfo=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="TreasureArrSkin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.bViBtn=e[2],this.bg.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.btnDress.addEventListener(egret.TouchEvent.TOUCH_END,this.onUp,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_END,this.onShow,this),this.setData(i,o),this.setMakeName(e[3]),UIHelper.PlayPanelTween(this.animGroup)},t.prototype.OnClose=function(){this.bg.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.btnDress.addEventListener(egret.TouchEvent.TOUCH_END,this.onUp,this),this.btnShow.addEventListener(egret.TouchEvent.TOUCH_END,this.onUp,this)},t.prototype.otherClose=function(e){ViewManager.ins().close(t)},t.prototype.onUp=function(e){this.data.spellsId&&(GameGlobal.TreasureModel.canEquip(this.data.type,this.nPos-1)?GameGlobal.TreasureModel.sendSpellsResUse(this.nPos,this.data.spellsId):UserTips.ins().showTips("相同类型的法宝不能装备")),ViewManager.ins().close(t)},t.prototype.onShow=function(){var e=[],i=new Sproto.client_chat_param;i.type=2,i.value=this.data.id,i.valueEx=this.data.level||1,i.strvalue=this.data.skillid?this.data.skillid.join(","):"",e.push(i),GameGlobal.Chat.chatShareInfo(3,e),ViewManager.ins().close(t)},t.prototype._SetType=function(e){e&&(this.type.text="级别："+e)},t.prototype.setMakeName=function(e){e?this.lv.text="打造者: "+e:this.lv.text=""},t.prototype.setData=function(e,t){if(this.nPos=t,e){var i=e;this.data=e,this.bViBtn?UIHelper.SetVisible(this.gDown,!1):(UIHelper.SetVisible(this.gDown,!0),t?(this.btnShow.x=62,this.btnDress.visible=!0):(this.btnShow.x=121,this.btnDress.visible=!1)),this.nameLabel.text=i.name,this.nameLabel.textColor=ItemBase.QUALITY_TIP_COLOR[i.quality],e.attrs&&(this.score.text="评分: "+ItemConfig.CalcAttrScoreValue(e.attrs),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrs)),this.baseCricle.setData(i),this._SetType(TreasureShowItem.TREASURETYPE[i.quality]);var o=AttributeData.getAttStr(i.attrs,1);if(this.attr.text=o,this.imgTipRect.source=ResDataPath.ITEM_TIp_QUALITY[i.quality],i.skillid&&i.skillid.length){this.gSkill.visible=!0;for(var n=0,a=i.skillid;n<a.length;n++){var r=a[n],s=new eui.Component;s.skinName="TreasureSkillDescSkin";var l=SkillsConfig.GetSkillQuality(r),c=ItemBase.QUALITY_TIP_COLOR[l];""==l&&(c=ItemBase.QUALITY_TIP_COLOR[0]);var u=SkillsConfig.GetSkillName(r),p=PetConst.GetSkillDesc(r);s.lbSkillName.textFlow=(new egret.HtmlTextParser).parser("<a color="+c+">"+u+"</a>"),s.lbSkillDes.textFlow=(new egret.HtmlTextParser).parser("<a color="+c+">"+p+"</a>"),this.gSkill.addChild(s)}}}},t}(BaseEuiView);__reflect(TreasureArrInfo.prototype,"TreasureArrInfo"),TreasureArrInfo.LAYER_LEVEL=LayerManager.UI_Popup;var TreasureHoldIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="TreasureHoldIconSkin",t.currentState="have",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.baseCricle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnThisClick,this),this.imgLock.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.dataChanged=function(){this.data&&("number"==typeof this.data.lock&&(1===this.data.lock?this.imgLock.source="ui_bt_suo":this.imgLock.source="ui_bt_weisuo"),this.baseCricle.setData(this.data),this.data.name&&(this.lbName.text=this.data.name),this.data.quality&&(this.lbName.textColor=ItemBase.QUALITY_COLOR[this.data.quality]),"number"==typeof this.data.level&&(this.lbLv.text=this.data.level))},t.prototype.OnClick=function(e){switch(e.target){case this.imgLock:var t=1;1===this.data.lock&&(t=0),GameGlobal.TreasureModel.sendSpellsResLock(t,this.data.spellsId);break;case this.baseCricle:}},t.prototype.OnThisClick=function(e){ViewManager.ins().open(TreasureArrInfo,this.data,this.data.nPos,!1,GameLogic.ins().actorModel.name)},t}(eui.ItemRenderer);__reflect(TreasureHoldIcon.prototype,"TreasureHoldIcon");var TreasureMakePanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.tMakeRect=[],t.tHave=[],t.skinName="TreasureMakePanelSkin",t.listView.itemRenderer=TreasureHoldIcon,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tMakeRect.push(this.pMakeRect0),this.tMakeRect.push(this.pMakeRect1),UIHelper.SetLinkStyleLabel(this.lbAccount2,"法宝图鉴")},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e[0]||0;this.observe(MessageDef.TREASURE_CHANGE,this.UpdateContent),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.observe(MessageDef.TREASURE_LOCK,this.upList),this._AddClick(this.lbAccount2,this.onClick)},t.prototype.upList=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tHave)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider=new eui.ArrayCollection(this.tHave);for(var e=1;2>=e;e++)this.tMakeRect[e-1].onUpdate(e);var t="|C:0x682f00&T:累计20次完美打造,必出完美法宝|C:0xdb0000&T: (完美法宝有特技)|";this.lbAccount1.textFlow=TextFlowMaker.generateTextFlow(t)},t.prototype.setData=function(){this.tHave=GameGlobal.TreasureModel.getHaveList()},t.prototype.onClick=function(e){switch(e.target){case this.lbAccount2:ViewManager.ins().open(TreasureShowWin)}},t.RedPointCheck=function(){return GameGlobal.TreasureModel.mRedPoint.Get(TreasureRedPoint.INDEX_MAKE_TREASURE)},t.NAME="打造",t}(BaseView);__reflect(TreasureMakePanel.prototype,"TreasureMakePanel",["ICommonWindowTitle"]);var TreasureResolvePanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.tHave=[],t.tCheckBox=[],t.skinName="TreasureResolvePanelSkin",t.listView.itemRenderer=TreasureHoldIcon,t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=0;6>e;e++){var t=this["checkBox"+e];t.labelDisplay.textColor=ItemBase.QUALITY_COLOR[e],this.tCheckBox[e]=t,t.addEventListener(egret.Event.CHANGE,this.chage,this)}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e[0]||0;this.observe(MessageDef.TREASURE_CHANGE,this.UpdateContent),this.observe(MessageDef.TREASURE_LOCK,this.upList),this._AddClick(this.btnDress,this.onClick)},t.prototype.upList=function(){this.setData();var e=[];for(var t in this.tHave)this.tHave[t].id&&e.push(this.tHave[t]);this.listView.dataProvider.replaceAll(e)},t.prototype.UpdateContent=function(){this.setData();var e=[];for(var t in this.tHave)this.tHave[t].id&&e.push(this.tHave[t]);this.listView.dataProvider=new eui.ArrayCollection(e),this.lbGet.text=this.getResolveNum()},t.prototype.chage=function(){this.UpdateContent()},t.prototype.setData=function(){this.tHave=GameGlobal.TreasureModel.getHaveList()},t.prototype.getResolveNum=function(){var e=0,t=GameGlobal.TreasureModel.getHaveList(),i=GlobalConfig.ins().SpellsResDecomposeConfig;for(var o in this.tCheckBox){var n=this.tCheckBox[o];if(n.selected)for(var a in t)t[a].quality==o&&(e+=i[t[a].id].count)}return e+""},t.prototype.getResolveData=function(){var e=[],t=GameGlobal.TreasureModel.getHaveList();for(var i in this.tCheckBox){var o=this.tCheckBox[i];if(o.selected)for(var n in t)t[n].quality==i&&e.push(t[n].spellsId)}return e},t.prototype.onClick=function(e){switch(e.target){case this.btnDress:this.getResolveData().length&&GameGlobal.TreasureModel.sendSpellsResSmelt(this.getResolveData())}},t.RedPointCheck=function(){return GameGlobal.TreasureModel.mRedPoint.Get(TreasureRedPoint.INDEX_RESOLVE_TREASURE)},t.NAME="分解",t}(BaseView);__reflect(TreasureResolvePanel.prototype,"TreasureResolvePanel",["ICommonWindowTitle"]);var TreasureShowItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TreasureRectIconSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.baseCricle.setData(this.data),this.data.name&&(this.lbName.text=this.data.name),null!=this.data.quality&&(this.lbQuality.text=t.TREASURETYPE[this.data.quality],this.lbQuality.textColor=ItemBase.QUALITY_COLOR[this.data.quality],this.lbName.textColor=ItemBase.QUALITY_COLOR[this.data.quality]))},t.prototype.onClick=function(){ViewManager.ins().open(TreasureArrInfo,this.data,null,!0)},t.TREASURETYPE=(_a={},_a[0]="普通",_a[1]="精良",_a[2]="稀有",_a[3]="卓越",_a[4]="完美",_a[5]="传说",_a[6]="传说",_a),t}(eui.ItemRenderer);__reflect(TreasureShowItem.prototype,"TreasureShowItem");var _a,TreasureShowPanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.skinName="TreasureShowSkin",t.listView.itemRenderer=TreasureShowItem,t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.UpdateContent()},t.prototype.UpdateContent=function(){this.tPanelData.length&&(this.listView.dataProvider=new eui.ArrayCollection(this.tPanelData))},t.prototype.setData=function(e){this.tPanelData=GameGlobal.TreasureModel.getShowConByType(e)},t}(BaseView);__reflect(TreasureShowPanel.prototype,"TreasureShowPanel",["ICommonWindowTitle"]);var TreasureShowFirPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setData(1),this.UpdateContent()},t.NAME="传说",t}(TreasureShowPanel);__reflect(TreasureShowFirPanel.prototype,"TreasureShowFirPanel");var TreasureShowSecPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setData(2),this.UpdateContent()},t.NAME="完美",t}(TreasureShowPanel);__reflect(TreasureShowSecPanel.prototype,"TreasureShowSecPanel");var TreasureShowThrPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setData(3),this.UpdateContent()},t.NAME="其它",t}(TreasureShowPanel);__reflect(TreasureShowThrPanel.prototype,"TreasureShowThrPanel");var TreasureShowWin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tShopData=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="FubenSkin",this.commonWindowBg.SetViewStack(this.viewStack),this.commonWindowBg.title="法宝图鉴",this.viewStack.tabChildren=[TabView.CreateTabViewData(TreasureShowFirPanel),TabView.CreateTabViewData(TreasureShowSecPanel),TabView.CreateTabViewData(TreasureShowThrPanel)],this.uiBg1.visible=!0,this.uiBg2.visible=!1},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.viewStack.UpdateTabShowState(this.viewStack.length,!1),this.commonWindowBg.OnAdded(this,i)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.destoryView=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){switch(e){case 0:break;case 1:break;case 2:break;case 3:}return!0},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TreasureShowWin.prototype,"TreasureShowWin",["ICommonWindow","ICommonWindowTitle"]);var TreasureUpLvPanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.tHaveData=[],t.nType=0,t.tDress=[],t.nSelect=0,t.tArrInfo=[],t.skinName="TreasureUpPanelSkin",t.roleShowPanel.mShowTianx=!1,t.listView.itemRenderer=TreasureHoldIcon,t.mRoleSendCheckData=new RoleSendCheckData(function(e){GameGlobal.TreasureModel.sendSpellsResUpLv(t.nSelect+1,e)},function(){var e=t.tPanelData[t.nSelect];if(e&&e.cost){var i=e.cost;return[3,0,i.id,i.count]}return null},function(){return t.checkBox.selected}),t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=1;4>=e;e++){var t=this["pDress"+e];this.tDress[e]=t,t.initPos(e-1)}this._AddClick(this.tDress[1],this.onClick1),this._AddClick(this.tDress[2],this.onClick2),this._AddClick(this.tDress[3],this.onClick3),this._AddClick(this.tDress[4],this.onClick4),this.pArrInfo1.lbTitle.text="下级属性";for(var e=0;1>=e;e++){var t=this["pArrInfo"+e];this.tArrInfo[e]=t}},t.prototype.upList=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tHaveData)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider=new eui.ArrayCollection(this.tHaveData);for(var e=1;4>=e;e++)this.tPanelData[e-1]?this.tDress[e].setData(this.tPanelData[e-1],this.nSelect):this.tDress[e].setData(null,this.nSelect);if(this.upDateShowRect(),this.updateTotalPower(),1==this.nType)for(var t in this.tArrInfo)this.upDateArrInfo(this.tArrInfo[t],parseInt(t));this.upDateBuyInfo()},t.prototype.upDateBuyInfo=function(){var e=this.tPanelData[this.nSelect];if(e&&e.cost&&e.cost.type){GameGlobal.Config.ItemConfig[e.cost.id];this.consumeLabel.mIsImg=!0,this.consumeLabel.consumeItemId=e.cost.id,this.consumeLabel.curValue=GameGlobal.UserBag.GetCount(e.cost.id),this.consumeLabel.consumeValue=e.cost.count}},t.prototype.updateTotalPower=function(){var e=[];for(var t in this.tPanelData){var i=this.tPanelData[t];if(i&&i.attrs)for(var o=0;o<i.attrs.length;o++){var n=new AttributeData;n.type=i.attrs[o].type,n.value=i.attrs[o].value,e.push(n)}}this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e)},t.prototype.upDateArrInfo=function(e,t){var i=this.tPanelData[this.nSelect];if(i){var o=[];o.push(e.lbArr0),o.push(e.lbArr1),o.push(e.lbArr2);for(var n in o)o[n].text="";var a,r="",s="",l=ItemBase.QUALITY_TIP_COLOR[0];if(0===t){a=i.attrs;var c=i.skillid?i.skillid[0]||0:0;if(c){r=PetConst.GetSkillName(c)+": "+PetConst.GetSkillDesc(c);var u=SkillsConfig.GetSkillQuality(c);l=ItemBase.QUALITY_TIP_COLOR[u]}s="基础属性加成"+i.attrstips+"%"}else if(i&&i.id&&i.level){var p=GlobalConfig.ins().SpellsResLvproConfig[i.id][i.level+1];if(p){a=p.attrs;var c=i.skillid?i.skillid[0]||0:0;if(c){r=PetConst.GetSkillName(c)+": "+PetConst.GetSkillDesc(c);var u=SkillsConfig.GetSkillQuality(c);l=ItemBase.QUALITY_TIP_COLOR[u]}s="基础属性加成"+p.attrstips+"%"}}if(a)for(var n in a){var h=a[n],d=void 0;d=new AttributeData,d.type=h.type,d.value=h.value,o[n].text=AttributeData.getAttStr(d,0)}e.lbSkillInfo.text="",e.lbBaseAtt.text=s}},t.prototype.chage=function(){},t.prototype._DoUpdateExp=function(){},t.prototype.SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype.setData=function(){this.tPanelData=GameGlobal.TreasureModel.getUseList();var e=this.deepCopy(GameGlobal.TreasureModel.getHaveList());this.tHaveData=[];for(var t in e){var i=e[t];i.nPos=this.nSelect+1,this.tHaveData.push(i)}},t.prototype.deepCopy=function(e){if("object"==typeof e){var t=e instanceof Array?[]:{};for(var i in e)e.hasOwnProperty(i)&&(t[i]="object"==typeof e[i]?this.deepCopy(e[i]):e[i]);return t}},t.prototype.onClick1=function(){this.onClick(0)},t.prototype.onClick2=function(){this.onClick(1)
},t.prototype.onClick3=function(){this.onClick(2)},t.prototype.onClick4=function(){this.onClick(3)},t.prototype.onClick=function(e){var t=e;this.nSelect===t?(this.onEquip(t),this.upDateShowRect()):(this.nSelect=t,this.UpdateContent())},t.prototype.onEquip=function(e){this.tPanelData[this.nSelect]&&(this.tPanelData[this.nSelect].id?ViewManager.ins().open(TreasureArrInfo,this.tPanelData[this.nSelect],!1,!1,GameLogic.ins().actorModel.name):this.tHaveData[0]&&this.tHaveData[0].spellsId&&(GameGlobal.TreasureModel.canEquip(this.tHaveData[0].type,e)?GameGlobal.TreasureModel.sendSpellsResUse(e+1,this.tHaveData[0].spellsId):UserTips.ins().showTips("相同类型的法宝不能装备")))},t.prototype.upDateShowRect=function(){1===this.nType&&(this.tPanelData[this.nSelect]&&this.tPanelData[this.nSelect].id?(this.gpUp.visible=!0,this.gpHave.visible=!1):(this.gpUp.visible=!1,this.gpHave.visible=!0))},t.prototype.onUpClick=function(e){switch(e.target){case this.btnDress:this.SendUp()}},t.prototype.setType=function(e){this.observe(MessageDef.TREASURE_CHANGE,this.UpdateContent),this.observe(MessageDef.TREASURE_LOCK,this.upList),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this._AddChange(this.checkBox,this.chage),this._AddClick(this.btnDress,this.onUpClick),this.nType=e,this.UpdateContent(),0==this.nType?(this.gpHave.visible=!0,this.gpUp.visible=!1):(this.gpHave.visible=!1,this.gpUp.visible=!0);var t=SubRoles.ins().GetRoleData().GetSubRoleData();t.titleId=0,this.roleShowPanel.SetAll(t)},t}(BaseView);__reflect(TreasureUpLvPanel.prototype,"TreasureUpLvPanel",["ICommonWindowTitle"]);var TreasureHaveIcon=function(e){function t(){var t=e.call(this)||this;return t.nPos=0,t.nSelect=0,t.tLockLvList=[],t.tLockVipList=[],t.skinName="TreasureHoldIconSkin",t.currentState="dress",t}return __extends(t,e),t.prototype.initPos=function(e){this.nPos=e;var t=GlobalConfig.ins().SpellsResBaseConfig.unlocklv;for(var i in t)this.tLockLvList.push(i);var o=GlobalConfig.ins().SpellsResBaseConfig.unlockvip;for(var i in o)this.tLockVipList.push(i)},t.prototype.setData=function(e,t){this.data=e,this.nSelect=t,this.dataChanged()},t.prototype.dataChanged=function(){this.nPos==this.nSelect?this.imgSelect.visible=!0:this.imgSelect.visible=!1,this.data?this.data.name?(this.imgCover.visible=!1,this.gpLv.visible=!0,this.baseCricle.visible=!0,this.data.name&&(this.lbName.text=this.data.name),this.data.quality&&(this.lbName.textColor=ItemBase.QUALITY_COLOR[this.data.quality]),this.baseCricle.setData(this.data),"number"==typeof this.data.level&&(this.lbLv.text=this.data.level)):(this.lbName.text="",this.gpLv.visible=!1,this.imgCover.visible=!1,this.baseCricle.visible=!0):(this.tLockLvList[this.nPos]&&this.tLockVipList[this.nPos]&&(this.lbName.text=this.tLockLvList[this.nPos]+"级或v"+this.tLockVipList[this.nPos]),this.gpLv.visible=!1,this.imgCover.visible=!0,this.lbName.textColor=Color.l_normal,this.baseCricle.visible=!1)},t}(BaseView);__reflect(TreasureHaveIcon.prototype,"TreasureHaveIcon");var TreasureUpFirPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setType(0)},t.NAME="法宝",t}(TreasureUpLvPanel);__reflect(TreasureUpFirPanel.prototype,"TreasureUpFirPanel");var TreasureUpSecPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setType(1)},t.RedPointCheck=function(){return GameGlobal.TreasureModel.mRedPoint.Get(TreasureRedPoint.INDEX_UP_TREASURE)},t.NAME="升级",t}(TreasureUpLvPanel);__reflect(TreasureUpSecPanel.prototype,"TreasureUpSecPanel");var TreasureWin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tShopData=[],t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_31)?!0:!1},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="TreasureLayerSkin",this.commonWindowBg.SetViewStack(this.viewStack),this.viewStack.tabChildren=[TabView.CreateTabViewData(TreasureUpFirPanel),TabView.CreateTabViewData(TreasureUpSecPanel),TabView.CreateTabViewData(TreasureMakePanel),TabView.CreateTabViewData(TreasureResolvePanel)]},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.viewStack.UpdateTabShowState(this.viewStack.length,!1),this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.RP_TREASURE,this.UpdateRedPoint),this.UpdateRedPoint()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.OnBackClick=function(e){return 0},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(1),this.mCommonWindowBg.CheckTalRedPoint(2),this.mCommonWindowBg.CheckTalRedPoint(3)},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TreasureWin.prototype,"TreasureWin",["ICommonWindow","ICommonWindowTitle"]);var DressItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="DressItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.UpdateSelect(),this.levellabel.visible=!1},t.prototype.UpdateSelect=function(){},t.prototype.updateTimer=function(e){var t="",i=e-GameServer.serverTime;return t=(i/24/3600>>0)+"天"+(i/3600%24>>0)+"时"+(i/60%60>>0)+"分"},t}(eui.ItemRenderer);__reflect(DressItemRenderer.prototype,"DressItemRenderer");var GainNewImagePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GainNewImageSkin",t.mCount=5,t._AddClick(t,t.CloseSelf),t._AddClick(t.btnEnter,t._onClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0];var i=this.mModel.mLevel,o=this.mModel.BaseConfig.pictureid[i-1];this.SetMainShow(o),this.SetExtraShow(o);var n=new MovieClip;n.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_hht_001"),!0,0),n.x=this.imgPoint.x,n.y=this.imgPoint.y,n.scaleX=2.3,n.scaleY=2.3,this.group.addChild(n),this.AddTimer(1e3,5,this._DoUpdate)},t.prototype.OnClose=function(){},t.prototype._DoUpdate=function(){this.mCount--,this.btnEnter.label="确定("+this.mCount.toString()+"s)",0==this.mCount&&ViewManager.ins().close(this)},t.prototype._onClick=function(e){switch(e.currentTarget){case this.btnEnter:ViewManager.ins().close(this)}},t.prototype.SetMainShow=function(e){var t=this.mModel;if(t.mTemplateType==UserTemplate.TYPE_RIDE)return void this.ridePanel.SetBodyId(t.SkinConfig[e].pid);if(t.mTemplateType!=UserTemplate.TYPE_XIANLV_XW)if(t.mTemplateType!=UserTemplate.TYPE_PET_SHOUH){if(t.mTemplateType==UserTemplate.TYPE_WING){var i=SubRoles.ins().GetRoleData();return this.roleShowPanel.SetAll(i),this.roleShowPanel.SetTianx(null),this.roleShowPanel.SetTitle(null),void this.roleShowPanel.SetWing(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid))}if(t.mTemplateType==UserTemplate.TYPE_TIANX){var i=SubRoles.ins().GetRoleData();return this.roleShowPanel.SetAll(i),this.roleShowPanel.SetTianx(null),void this.roleShowPanel.SetTitle(null)}if(t.mTemplateType==UserTemplate.TYPE_SHENGB){var i=SubRoles.ins().GetRoleData();return this.roleShowPanel.SetAll(i),this.roleShowPanel.SetTianx(null),this.roleShowPanel.SetTitle(null),void this.roleShowPanel.SetWeapon(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid,i.job,i.sex,!1,!0))}this.showPanel.SetBody(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid))}else{var o=GameGlobal.PetModel,n=o.GetShowId();if(0!=n){var a=o.GetPetInfo(n);this.showPanel.SetBody(a.GetSkin())}}else{var r=GameGlobal.XianlvModel,s=r.getBattledXianlv();if(0!=s){var l=r.GetXianlvInfo(s);this.showPanel.SetBody(l.GetSkin())}}},t.prototype.SetExtraShow=function(e){var t=this.mModel;if(t.mTemplateType!=UserTemplate.TYPE_XIANLV_FZ){if(t.mTemplateType==UserTemplate.TYPE_XIANLV_XW||t.mTemplateType==UserTemplate.TYPE_HAVING_LINGQ){var i=AppearanceConfig.GetUIAppe(t.SkinConfig[e].pid);return void(this.imgXianw.source=i.substring(i.lastIndexOf("/")+1))}if(t.mTemplateType!=UserTemplate.TYPE_PET_TONGL){if(t.mTemplateType==UserTemplate.TYPE_PET_SHOUH){var i=AppearanceConfig.GetUIPath(t.SkinConfig[e].pid);return void this.soulPanel.SetBody(i)}return t.mTemplateType==UserTemplate.TYPE_TIANX?void this.showTianx.SetBody(AppearanceConfig.GetUIPath(t.SkinConfig[e].pid)):void 0}var o=GameGlobal.PetModel,n=o.GetShowId();if(0!=n){var a=o.GetPetInfo(n);this.extraPanel.SetBody(a.GetSkin())}}else{var r=GameGlobal.XianlvModel,s=r.getBattledXianlv();if(0!=s){var l=r.GetXianlvInfo(s);this.extraPanel.SetBody(l.GetSkin())}}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GainNewImagePanel.prototype,"GainNewImagePanel");var JsFlyupSkillWin=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.skinName="JsFlyupSkillSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=JsFlyupSkillItem,this.itemList.validateNow(),this._AddItemClick(this.itemList,this._OnItemClick),this._AddClick(this.upBtn,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.title="技能",this.mModel=e[0];var i=e[1],o=e[2];this.mSelectIndex=i;for(var n=0;5>n;n++){var a=this.itemList.getChildAt(n);a.item.imgIcon.source=o[n]}this.commonDialog.OnAdded(this),this.UpdateContent(),this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){var t=this.mModel,i=t.mSkills[this.mSelectIndex],o=t.SkillConfig[t.mRideSkills[this.mSelectIndex]],n=o[i-1];if(Checker.Data(n.costitem[0])){this.mModel.SendUpSkill(this.mSelectIndex);var a=this.itemList.getChildAt(this.mSelectIndex);a.showEff()}},t.prototype._OnItemClick=function(e){this.mSelectIndex=e.itemIndex,this.UpdateContent()},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.itemList);var e=this.mModel,t=e.IsOpen(this.mSelectIndex);this.noneImg.visible=!t;for(var i=e.mSkills[this.mSelectIndex],o=e.SkillConfig[e.mRideSkills[this.mSelectIndex]],n=o[i+1],a=0;5>a;a++){var r=this.itemList.getChildAt(a);r.item.imgIcon.filters=this.mModel.IsOpen(a)?null:Color.GetFilter(),r.selectImg.visible=a==this.mSelectIndex,e.IsOpen(a)?(r.lvLabel.text="Lv."+e.mSkills[a],r.lvLabel.textColor=Color.l_green_1):(r.lvLabel.text=e.GetOpenLevel(a)+"阶激活",r.lvLabel.textColor=Color.Red)}if(i>0?this.skillName.text=o[0].skillname+" 等级 "+i.toString():this.skillName.text=o[0].skillname,t){var s=o[i];if(this.curAttrLabel.textFlow=AttributeData.GetAttrTabString(s.attrs),n){this.needItemView.SetItemId(s.costitem[0].id,s.costitem[0].count);var l=GameGlobal.RoleFlyModel.XiuWei>=s.cost?Color.l_green_1:Color.Red;this.needExp.textFlow=TextFlowMaker.generateTextFlow("消耗修为: |C:0x009000&T:"+s.cost+"|"),this.haveExp.textFlow=TextFlowMaker.generateTextFlow("|C:0x682f00&T:拥有修为: |C:"+l+"&T:"+GameGlobal.RoleFlyModel.XiuWei+"|"),this.upGroup.visible=!0,this.nextAttrLabel.textFlow=AttributeData.GetAttrTabString(n.attrs)}else this.upGroup.visible=!1,this.nextAttrLabel.text="已满级";this.curLabel.text="当前效果",this.nextLabel.text="下级效果",this.nextAttrLabel.textColor=Color.GrayAttr}else this.upGroup.visible=!1,this.curLabel.text="下级效果",this.nextLabel.text="激活条件",this.curAttrLabel.textFlow=AttributeData.GetAttrTabString(n.attrs),this.nextAttrLabel.text="需人物飞升"+e.GetOpenLevel(this.mSelectIndex)+"阶",this.nextAttrLabel.textColor=Color.l_green_1},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(JsFlyupSkillWin.prototype,"JsFlyupSkillWin",["ICommonWindowTitle"]);var JsFlyupSkillItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=Util.GetParentByType(this,RoleTemplateSkillPanel);if(e){var t=e.mModel;if(t){var i=t.GetOpenLevel(this.itemIndex);t.mLevel>=i?(this.lvLabel.text="Lv."+t.mSkills[this.itemIndex],this.lvLabel.textColor=3708989):(this.lvLabel.text=i+"阶激活",this.lvLabel.textColor=Color.l_green_1)}}},t.prototype.showEff=function(){var e=new MovieClip;e.loadUrl(ResDataPath.GetUIEffePath2("ui_eff_skillf_001"),!0,1),e.x=this.selectImg.width>>1,e.y=this.selectImg.height>>1,this.addChild(e)},t}(eui.ItemRenderer);__reflect(JsFlyupSkillItem.prototype,"JsFlyupSkillItem");var LingTongRoleTemplateAttrPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.ShowModel=function(e){LingtongViewHelper.SetRole(this.roleShowPanel)},t.prototype.UpdateSkinLabel=function(){this.skinLabel.text="天赋属性加成";var e=GameGlobal.LingtongAttrModel;if(!e.mSex)return void UIHelper.SetVisible(this.skinAttr.parent,!1);var t=GameGlobal.Config.BabyTalentConfig[e.mSex][e.giftlv-1];if(!t)return void UIHelper.SetVisible(this.skinAttr.parent,!1);var i=e.getTianFuAllAttr();return i&&i.length?this.skinAttr.textFlow=AttributeData.GetAttrTabString(i):UIHelper.SetVisible(this.skinAttr.parent,!1),i},t}(RoleTemplateAttrPanel);__reflect(LingTongRoleTemplateAttrPanel.prototype,"LingTongRoleTemplateAttrPanel");var RoleAttrWin=function(e){function t(){var t=e.call(this)||this;return t.mShowList=[AttributeType.atMaxHp,AttributeType.atSpeed,AttributeType.atAttack,AttributeType.atDef,AttributeType.atHitRate,AttributeType.atEvade,AttributeType.atCrit,AttributeType.atTough,AttributeType.atDefy,AttributeType.atDefyReduction,AttributeType.atDamageEnhance,AttributeType.atDamageReduction,AttributeType.atDamageEnhancePerc,AttributeType.atDamageReductionPerc,AttributeType.atCritEnhance,AttributeType.atCritReduction,AttributeType.atPVPEnhance,AttributeType.atPVPReduction,AttributeType.atPVEEnhance,AttributeType.atPVEReduction,AttributeType.atSoulEnhance,AttributeType.atSoulReduction,AttributeType.atSoulAttack,AttributeType.atSoulDef,AttributeType.atSoulHitEnhance,AttributeType.atSoulHitReduction,AttributeType.atConfineEff,AttributeType.atConfineResistEff,AttributeType.atPvPCritEnhance,AttributeType.atPvPCritReduction],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RoleAttrSkin",this._AddClick(this.closeBtn,this.CloseSelf)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setRoleAttr()},t.prototype.setRoleAttr=function(){for(var e=GameGlobal.SubRoles.GetRoleData(),t=0;t<this.mShowList.length;t++){var i="",o=this.mShowList[t],n=AttributeData.getAttrStrByType(o),a=e.getAtt(o);o==AttributeType.atAttack,n.length<3&&(n=AttributeData.inserteBlank(n,4)),i+=o>=AttributeType.atDamageEnhancePerc&&o<AttributeType.atSoulEnhance||o>AttributeType.atSoulHitEnhance&&o<=AttributeType.atSoulHitReduction||o>=AttributeType.atPvPCritEnhance&&o<=AttributeType.atPvPCritReduction?n+"："+a/100+"%":n+"："+a;var r=new eui.Label;r.size=20,r.text=i,this.attr.addChild(r)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RoleAttrWin.prototype,"RoleAttrWin");var RoleInfoPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.oneKeyChange,e;var e},t.prototype.childrenCreated=function(){this.touchEnabled=!1,this.touchChildren=!0,this.equips=[];for(var e=0;e<EquipPos.MAX;e++)this.equips[e]=this["item"+e],this.equips[e].touchEnabled=!0;this._AddClick(this.checkAttr,this._OnClick),this._AddClick(this.oneKeyChange,this._OnClick),this._AddClick(this.upgreadBtn,this._OnClick),this._AddClick(this.roleTitle,this._OnClick),this._AddClick(this.dressBtn,this._OnClick),this._AddClick(this.bless,this._OnClick),this._AddClick(this.btnDeityEquip,this._OnClick),this.mListLRBtnCtrl=new ListLRBtnCtrl(this.list,this.leftBtn,this.rightBtn,110),this.mListLRBtnCtrl.mNotVisible=!0,this.list.itemRenderer=RoleInfoItem,this.list.dataProvider=new eui.ArrayCollection},t.prototype._OnClick=function(e){switch(e.target){case this.upgreadBtn:GameGlobal.actorModel.SendUpLevel();break;case this.checkAttr:ViewManager.ins().open(RoleAttrWin);break;case this.oneKeyChange:GameGlobal.UserRole.SendEquip();break;case this.roleTitle:ViewManager.ins().open(RoleTitlePanel,GameGlobal.UserTitle);break;case this.dressBtn:ViewManager.ins().open(RoleSkinPanel,GameGlobal.UserSkin);break;case this.btnDeityEquip:ViewManager.ins().open(DeityEquipWin);break;case this.bless:ViewManager.ins().open(TreasureWin)}},t.prototype.OnItemClick=function(e){"神兵系统"==e.name&&UIHelper.SetBtnEffe(this.list.getChildAt(0),"ui_yhy002",!1),ViewManager.ins().open(e.win)},t.prototype.OnOpen=function(){this.observe(GameGlobal.TianxModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.TianxModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.SwordModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.SwordModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(MessageDef.CHANGE_EQUIP,this.UpdateRedPoint),this.observe(MessageDef.RP_TREASURE,this.UpdateRedPoint),this.observe(MessageDef.RP_ROLE_HINT,this.UpdateRedPoint),this.observe(MessageDef.ROLE_HINT,this.UpdateRedPoint),this.observe(MessageDef.CHANGE_EQUIP,this.updataEquip),this.observe(MessageDef.EXP_CHANGE,this.UpdateListContent),this.observe(MessageDef.LEVEL_CHANGE,this.UpdateExp),this.observe(MessageDef.ROLE_TITLE_UPDATE,this.UpdateTitle),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.UpdateListContent(),this.updateJiJieBtnPng(),this.UpdateFateEff()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.list.getChildAt(1),[ActivityKaiFuJiJieType.fairy,ActivityKaiFuJiJieType.weapon])},t.prototype.UpdateListContent=function(){var e=(GameGlobal.actorModel.level,[{icon:"ui_jsfs_bt_fs",redPoint:!1,name:"飞升系统",win:RoleFlyWin},{icon:"ui_bt_shouhu",redPoint:GameGlobal.TianxModel.mRedPoint.IsRedPoint()||GameGlobal.SwordModel.mRedPoint.IsRedPoint(),name:"神兵系统",win:TianxianMainPanel},{icon:"ui_bt_zhenxing",redPoint:GameGlobal.FormationModel.mRedPoint.IsRedPoint(),name:"阵型系统",win:FormationWin},{icon:"ui_bt_danyao",redPoint:GameGlobal.UserRole.GetIndexElixir(),name:"丹药系统",win:RoleElixirPanel},{icon:"ui_bt_jingmai",redPoint:GameGlobal.UserRole.GetIndexJingmai(),name:"经脉系统",win:RoleJingMaiPanel},{icon:"ui_bt_taozhuang",redPoint:!1,name:"套装系统",win:RoleSuitPanel},{icon:"ui_bt_taozhuangdaren",redPoint:!1,name:"套装达人系统",win:RoleSuitTipPanel}]);this.list.dataProvider.replaceAll(e),this.list.validateNow(),this.leftBtn.visible=this.rightBtn.visible=e.length>7,this.UpdateExp()},t.prototype.UpdateExp=function(){var e=GameGlobal.actorModel;this.levelLabel.text=e.level+"";var t=GameGlobal.Config.ExpConfig[e.level],i="",o=!1;GameGlobal.Config.ExpConfig[e.level+1]&&(i="/"+CommonUtils.overLength(t.exp),o=e.exp>=t.exp),this.expLabel.text=CommonUtils.overLength(e.exp)+i,this.upgreadBtn.enabled=o},t.prototype.UpdateTitle=function(){var e=SubRoles.ins().GetRoleData();this.roleShowPanel.SetAll(e)},t.prototype.updataEquip=function(){var e=SubRoles.ins().GetRoleData();this.setEquip(e)},t.prototype.setEquip=function(e){if(e){for(var t=e.getEquipLen(),i=(GameGlobal.UserRole.canChangeEquips,0);t>i;i++){var o=e.getEquipByIndex(i);this.equips[i].model=e,this.equips[i].data=o.item,o.item.configID||this.equips[i].setItemImg(ResDataPath.GetEquipDefaultGreyIcon(i))}this.roleShowPanel.SetAll(e),this.totalPower.text=GameLogic.ins().actorModel.power+"",this.UpdateRedPointEquip()}},t.prototype.UpdateRedPointEquip=function(){var e=GameGlobal.SubRoles.GetRoleData(),t=!1;if(e)for(var i=GameGlobal.UserRole.canChangeEquips,o=0,n=e.getEquipLen();n>o;o++){var a=i[o]?!0:!1;this.equips[o].IsShowRedPoint(a?!0:!1),this.equips[o].IsShowUp(GameGlobal.UserRole.IsOrange(o)?!0:!1),a&&(t=!0)}this.oneKeyChange.visible=t},t.prototype.UpdateRedPoint=function(){this.UpdateRedPointEquip(),UIHelper.ShowRedPoint(this.dressBtn,GameGlobal.UserRole.Get(UserRole.INDEX_SKIN)),UIHelper.ShowRedPoint(this.roleTitle,GameGlobal.UserRole.Get(UserRole.INDEX_TITLE)),UIHelper.ShowRedPoint(this.bless,GameGlobal.TreasureModel.mRedPoint.IsRedPoint()),UIHelper.ShowRedPoint(this.btnDeityEquip,GameGlobal.UserEquip.HasDeityEquipAwake()||GameGlobal.UserEquip.HasDeityEquipInject()),this.UpdateListContent()},t.prototype.UpdateFateEff=function(){FateEff.isShowEff2(this)},t.prototype.UpdateContent=function(){this.UpdateRedPoint(),this.updataEquip(),this.UpdateTitle()},t.RedPointCheck=function(){return GameGlobal.UserRole.IsRedEquip()?!0:GameGlobal.UserRole.IsRedPoint()?!0:GameGlobal.TianxModel.mRedPoint.IsRedPoint()?!0:GameGlobal.SwordModel.mRedPoint.IsRedPoint()?!0:GameGlobal.TreasureModel.mRedPoint.IsRedPoint()?!0:GameGlobal.UserEquip.mDeityEquipRP.IsRedPoint()?!0:!1},t.NAME="角色",t}(BaseView);__reflect(RoleInfoPanel.prototype,"RoleInfoPanel",["ICommonWindowTitle"]);var RoleInfoItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.width=96,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(){var e=Util.GetParentByType(this,RoleInfoPanel);e.OnItemClick(this.data)},t.prototype.dataChanged=function(){this.iconDisplay.source=this.data.icon,this.redPoint.visible=this.data.redPoint},t}(eui.ItemRenderer);__reflect(RoleInfoItem.prototype,"RoleInfoItem");var RoleItem=function(e){function t(){var t=e.call(this)||this;return t.mQuality=-1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_END,this.openEquipsTips,this)},t.prototype.setItemImg=function(e){this.itemBase.setItemImg(e)},t.prototype.setItemBg=function(e){this.itemBase.setItemBg(e)},t.prototype.IsShowRedPoint=function(e){this.itemBase.IsShowRedPoint(e)},t.prototype.IsShowUp=function(e){this.upImage.visible=e},Object.defineProperty(t.prototype,"nameTxt",{get:function(){return this.itemBase?this.itemBase.nameTxt:null},set:function(e){this.itemBase&&(this.itemBase.nameTxt=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.itemBase?this.itemBase.getCount():null},set:function(e){this.itemBase&&this.itemBase.setCount(e)},enumerable:!0,configurable:!0}),t.prototype.dataChanged=function(){this.itemBase.data=this.data,this.playEff(),e.prototype.dataChanged.call(this);var t=this.data.itemConfig;if(t)for(var i=this.model.equipsData,o=void 0,n=0;n<i.length;n++)if(this.data.handle==i[n].item.handle){o=i[n];break}this._lastData=this.data,this._lastModel=this._model},t.prototype.clear=function(){this.itemBase.clear(),this.playEff()},t.prototype.openEquipsTips=function(){null!=this.itemBase.itemConfig&&ViewManager.ins().open(EquipUserDetailedWin,this.data.handle,this.itemBase.itemConfig.id,this.data,this._model)},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e},enumerable:!0,configurable:!0}),t.prototype.playEff=function(){this._lastData&&this._lastData!=this.data&&this.model==this._lastModel&&UIHelper.PlayUpEff(this)},t}(eui.ItemRenderer);__reflect(RoleItem.prototype,"RoleItem");var RoleSkillPanel=function(e){function t(){var t=e.call(this)||this;return t.mItems=[],t.mSelectIndex=0,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.oneKeyUp,e;var e},t.prototype.childrenCreated=function(){for(var e=0;7>=e;e++){var t=this["g"+e];this.mItems[e]=t,this._AddClick(t,this._OnItemClick)}this._AddClick(this.oneKeyUp,this._OnClick),this._AddClick(this.onup,this._OnClick),this._AddClick(this.skillSettingBtn,this._OnClick),this.priceicon1.type=MoneyConst.gold,this.priceicon2.type=MoneyConst.gold},t.prototype.OnOpen=function(){this.mSelectIndex=0,this.observe(MessageDef.SKILL_UPGRADE,this.grewupSkillCB),this.observe(MessageDef.SKILL_GREWUPALL,this.grewupAllSkillCB),this.UpdateContent()},t.prototype.UpdateContent=function(){for(var e=this.mSelectIndex,t=0;t<this.mItems.length;t++){var i=this.mItems[t];i.img_select.visible=t==e,this.UpdateItem(t)}var o=SubRoles.ins().GetRoleData(),n=o.GetCurSkillIDs(),a=n[e],r=o.getSkillsDataByIndex(e);SkillsConfig.GetSkillEffConfig(a);this.skillDes.text=SkillsConfig.GetSkillDesc(a,r,e),this.skillName.text=SkillsConfig.GetSkillName(a);var s="|C:0x4fcd4c&T:"+r+"|C:0x6E330B&T: 级|";this.skillLv.textFlow=TextFlowMaker.generateTextFlow(s),UserSkill.ins().canGrewupAllSkills()?(this.priceicon2.visible=!0,this.lbMaxLv.visible=!1):(this.priceicon2.visible=!1,this.lbMaxLv.visible=!0);var l=SkillsConfig.GetOpenLevel(e);if(l>GameGlobal.actorModel.level)this.grpUpOper.visible=!1,this.limitLabel.visible=!0,this.limitLabel.text="解锁当前技能需要到达"+l+"级";else{this.grpUpOper.visible=!0,this.limitLabel.visible=!1;var c=(GlobalConfig.ins().SkillsUpgradeConfig[r],GlobalConfig.ins().SkillsUpgradeConfig[r].cost),u=UserSkill.ins().getAllSkillGrewupCost();0==u&&(u=c),this.priceicon1.price=c,this.priceicon2.price=u}},t.prototype.UpdateItem=function(e){var t=this.mItems[e],i=SubRoles.ins().GetRoleData(),o=(i.GetCurSkillIDs(),i.GetCurSkillIDs()),n=o[e],a=i.getSkillsDataByIndex(e),r=GlobalConfig.ins().SkillsOpenConfig[e+1];if(r)if(r.id[i.job-1])if(t.currentState="open",t.img_icon.source=SkillsConfig.GetSkillIcon(n),0>=a){UserSkill.ins().getSkillLimitLevel();UserSkill.ins().getSkillLimitLevel()>=r.level?t.lb_name.text="开启":t.lb_name.text=r.level+"级开启",t.img_lv_bg.visible=!1,t.lb_level.visible=!1,t.img_icon.filters=Color.GetFilter(),t.lb_name.textColor=15388075}else t.lb_level.text=a+"",t.lb_name.text=SkillsConfig.GetSkillName(n),t.img_lv_bg.visible=!0,t.lb_level.visible=!0,t.img_icon.filters=null,t.lb_name.textColor=6827776;else t.currentState="lock";else t.currentState="lock",t.lb_name.text="未开放"},t.prototype._OnClick=function(e){switch(e.target){case this.oneKeyUp:this.grewUpAllSkillBtnCB();break;case this.onup:this.grewUpSkillBtnCB();break;case this.skillSettingBtn:ViewManager.ins().open(RoleSkilSetLayer)}},t.prototype._OnItemClick=function(e){var t=this.mItems.indexOf(e.currentTarget);SkillsConfig.IsLock(t)||(this.mSelectIndex=t,this.UpdateContent())},t.prototype.grewupSkillCB=function(e,t,i){this.grewupTip(e,i),this.UpdateContent()},t.prototype.grewupAllSkillCB=function(e,t){var i=SubRoles.ins().GetRoleData(),o=i.skillLevels;for(var n in o){var a=t[n];a>0&&0!=o[n]&&this.grewupTip(parseInt(n),a)}this.UpdateContent()},t.prototype.grewupTip=function(e,t){var i=new eui.Label;i.text="+"+t,i.textColor=4063042,i.touchEnabled=!1;var o=this.mItems[e];i.x=o.width,i.y=o.height/4,o.addChild(i);var n=egret.Tween.get(i);n.to({y:i.y-45},1e3).to({alpha:0},500).call(function(){DisplayUtils.removeFromParent(i)},this);var a=new MovieClip;a.loadUrl(ResDataPath.GetUIEffePath2("ui_eff_skilly_001"),!0,1),a.x=o.iconGroup.width>>1,a.y=o.iconGroup.height>>1,o.iconGroup.addChild(a)},t.prototype.grewUpSkillBtnCB=function(){var e=SubRoles.ins().GetRoleData(),t=e.getSkillsDataByIndex(this.mSelectIndex),i=UserSkill.ins().getSkillLimitLevel();i>t?GameLogic.ins().actorModel.gold>=GlobalConfig.ins().SkillsUpgradeConfig[t].cost?UserSkill.ins().sendGrewUpSkill(this.mSelectIndex):UserWarn.ins().setBuyGoodsWarn(1):GameLogic.ins().actorModel.gold<GlobalConfig.ins().SkillsUpgradeConfig[t].cost?UserWarn.ins().setBuyGoodsWarn(1):this.showHint()},t.prototype.grewUpAllSkillBtnCB=function(){if(!UserSkill.ins().canGrewupAllSkills())return void this.checkUpType();var e=UserSkill.ins().getAllSkillGrewupCost();e&&e<=GameLogic.ins().actorModel.gold?this.onSendupgreadAll():this.checkUpType()},t.prototype.checkUpType=function(){var e=SubRoles.ins().GetRoleData(),t=e.getSkillsDataByIndex(this.mSelectIndex),i=GlobalConfig.ins().SkillsUpgradeConfig[t].cost,o=UserSkill.ins().getAllSkillGrewupCost();0==o&&(o=i),GameLogic.ins().actorModel.gold>=o?this.showHint():GameGlobal.ViewManager.Guide(ViewIndexDef.TYPE_1025)},t.prototype.onSendupgreadAll=function(){UserSkill.ins().sendGrewUpAllSkill()},t.prototype.showHint=function(){UserTips.ErrorTip("技能等级不能超过人物等级")},t.RedPointCheck=function(){return GameGlobal.UserSkill.mRedPoint.IsRedPoint()},t.NAME="技能",t}(BaseView);__reflect(RoleSkillPanel.prototype,"RoleSkillPanel",["ICommonWindowTitle"]);var SoundManager=function(){function e(){this.bgOn=!1,this.effectOn=!1,this.bgVolume=.5,this.effectVolume=.5,this.m_DelayTime=!0,this.m_DelaySetTime=!0,this.bg=new SoundBg,this.bg.setVolume(this.bgVolume)}return e.prototype.PlayEffect=function(e){!this.effectOn},e.prototype.PlayBg=function(e){return this.currBg=e,this.GetBgOn()?this.m_DelayTime?void(this.m_DelaySetTime&&(this.m_DelaySetTime=null,TimerManager.ins().doTimer(2500,1,this.DelayPlay,this))):void this.bg.play(e):void 0},e.prototype.DelayPlay=function(){this.m_DelayTime=null,this.GetBgOn()&&this.currBg&&this.bg.play(this.currBg)},e.prototype.StopBg=function(){this.bg.stop()},e.prototype.SetEffectOn=function(e){this.effectOn=e},e.prototype.SetBgOn=function(e){this.bgOn=e;var t=this.GetBgOn();t?this.currBg&&this.PlayBg(this.currBg):this.StopBg()},e.prototype.GetBgOn=function(){return this.bgOn&&!StartMain.instance.mIsPauseApp},e.prototype.UpdateBgOn=function(){this.SetBgOn(this.bgOn)},e.prototype.SetBgVolume=function(e){e=MathUtils.Clamp(e,0,1),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(e){e=MathUtils.Clamp(e,0,1),this.effectVolume=e},e.prototype.getEffectVolume=function(){return this.effectVolume},e.CLEAR_TIME=18e4,e}();__reflect(SoundManager.prototype,"SoundManager");var RoleTemplateDrugPanel=function(e){function t(){var t=e.call(this)||this;return t.useNum=0,t.skinName="RoleRideDrugSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.numLabel.text=this.useNum+"",this.numLabel.inputType=egret.TextFieldInputType.TEL,this.numLabel.restrict="0-9",this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this._AddClick(this.minBtn,this._OnClick),this._AddClick(this.maxBtn,this._OnClick),this._AddClick(this.btnLessTen,this._OnClick),this._AddClick(this.btnAddTen,this._OnClick),this._AddClick(this.getwayLabel,this._OnClick),this._AddClick(this.useBtn,this._OnClick)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.minBtn:this.ChangeCount(-1);break;case this.maxBtn:this.ChangeCount(1);break;case this.btnLessTen:this.ChangeCount(-10);break;case this.btnAddTen:this.ChangeCount(10);break;case this.useBtn:var t=GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid);t>0?this.mModel.SendDrug(this.useNum):UserTips.ins().showTips("|C:0xff0000&T:属性丹数量不足，无法使用|")}},t.prototype.onTxtChange=function(e){var t=parseInt(this.numLabel.text);this.useNum=GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid),this.ChangeCount(t)},t.prototype.ChangeCount=function(e){this.useNum=MathUtils.Clamp(this.useNum+e,0,GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid)),this.numLabel.text=this.useNum+""},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.ItemConfig[this.mModel.BaseConfig.attreitemid];this.item.data=this.mModel.BaseConfig.attreitemid,this.matLabel.text=e.name;var t=this.mModel.mDrugNum;UIHelper.SetLabelText(this.countLabel,"当前背包拥有：",GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid)+"个"),UIHelper.SetLabelText(this.useCountLabel,"已使用：",t+"个");var i=this.mModel.GetCurDrugAttr();this.attrLabel.textFlow=AttributeData.GetAttrTabString(i)},t.prototype.UpdateDrug=function(){this.useNum=GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid),this.ChangeCount(0)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0],this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.observe(this.mModel.mMsgDefUpdateDrug,this.UpdateDrug),this.UpdateContent(),this.commonDialog.OnAdded(this),this.useNum=GameGlobal.UserBag.GetCount(this.mModel.BaseConfig.attreitemid),this.numLabel.text=this.useNum+"",this.getwayLabel.SetId(this.mModel.BaseConfig.attreitemid)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()
},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RoleTemplateDrugPanel.prototype,"RoleTemplateDrugPanel");var BitUtil=function(){function e(){}return e.Has=function(e,t){return(e&1<<t)>0},e.Set=function(e,t,i){return i?e|=1<<(255&t):e&=~(1<<(255&t)),e},e.decoderError=function(e,t){return e&&egret.$error(1027),t||65533},e.encoderError=function(e){egret.$error(1026,e)},e.inRange=function(e,t,i){return e>=t&&i>=e},e.div=function(e,t){return Math.floor(e/t)},e.decodeUTF8=function(e){for(var t,i=!1,o=0,n="",a=0,r=0,s=0,l=0;e.length>o;){var c=e[o++];if(c==this.EOF_byte)t=0!=r?this.decoderError(i):this.EOF_code_point;else if(0==r)this.inRange(c,0,127)?t=c:(this.inRange(c,194,223)?(r=1,l=128,a=c-192):this.inRange(c,224,239)?(r=2,l=2048,a=c-224):this.inRange(c,240,244)?(r=3,l=65536,a=c-240):this.decoderError(i),a*=Math.pow(64,r),t=null);else if(this.inRange(c,128,191))if(s+=1,a+=(c-128)*Math.pow(64,r-s),s!==r)t=null;else{var u=a,p=l;a=0,r=0,s=0,l=0,t=this.inRange(u,p,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,c)}else a=0,r=0,s=0,l=0,o--,t=this.decoderError(i,c);null!==t&&t!==this.EOF_code_point&&(65535>=t?t>0&&(n+=String.fromCharCode(t)):(t-=65536,n+=String.fromCharCode(55296+(t>>10&1023)),n+=String.fromCharCode(56320+(1023&t))))}return n},e.encodeUTF8=function(t){for(var i=0,o=e.stringToCodePoints(t),n=[];o.length>i;){var a=o[i++];if(e.inRange(a,55296,57343))e.encoderError(a);else if(e.inRange(a,0,127))n.push(a);else{var r=void 0,s=void 0;for(e.inRange(a,128,2047)?(r=1,s=192):e.inRange(a,2048,65535)?(r=2,s=224):e.inRange(a,65536,1114111)&&(r=3,s=240),n.push(e.div(a,Math.pow(64,r))+s);r>0;){var l=e.div(a,Math.pow(64,r-1));n.push(128+l%64),r-=1}}}return new Uint8Array(n)},e.UTF8ByteCount=function(e){return this.encodeUTF8(e).length},e.stringToCodePoints=function(t){for(var i=[],o=0,n=t.length;o<t.length;){var a=t.charCodeAt(o);if(e.inRange(a,55296,57343))if(e.inRange(a,56320,57343))i.push(65533);else if(o==n-1)i.push(65533);else{var r=t.charCodeAt(o+1);if(e.inRange(r,56320,57343)){var s=1023&a,l=1023&r;o+=1,i.push(65536+(s<<10)+l)}else i.push(65533)}else i.push(a);o+=1}return i},e.EOF_byte=-1,e.EOF_code_point=-1,e}();__reflect(BitUtil.prototype,"BitUtil");var RoleTemplateRewardPanel=function(e){function t(){var t=e.call(this)||this;t.skinName="RoleTemplateRewardSkin",t.list.itemRenderer=RoleTemplateRewardItem;var i=[];for(var o in GameGlobal.Config.ProgressRewardConfig)i.push({name:ItemConst.TYPE_NAME[UserTemplate.TEMPTYPE_TO_ITEMTYPE[o]],type:o});return i.sort(function(e,t){return e-t}),t.bar.dataProvider=new eui.ArrayCollection(i),t.bar.selectedIndex=0,t._AddItemClick(t.bar,t._OnItemClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this);var i=e[0];if(null!=i)for(var o=0,n=0,a=this.bar.dataProvider.source;n<a.length;n++){var r=a[n];if(i==r.type){this.bar.selectedIndex=o;break}++o}this._UpdateContent(),this.observe(MessageDef.USER_TEMPLATE_RANK_REWARD_UPDATE_ALL___,this.UpdateList)},t.prototype._OnItemClick=function(e){this._UpdateContent()},t.prototype._UpdateContent=function(){this.bar.selectedItem;this.UpdateList()},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.bar),this.bar.validateNow();for(var e=0,t=this.bar.dataProvider.length;t>e;e++){var i=this.bar.getChildAt(e);UIHelper.ShowRedPoint(i,GameGlobal.SubRoles.mTemplate[this.bar.dataProvider.getItemAt(e).type].mRedPoint.Get(UserTemplateRedPoint.INDEX_REWARD))}for(var o=GameGlobal.SubRoles.mTemplate[this.bar.selectedItem.type],n=[],a=GameGlobal.Config.ProgressRewardConfig[this.bar.selectedItem.type],r=0,s=a;r<s.length;r++){var l=s[r];n.push(l)}var c=function(e){var t=o.GetRewardState(e.id-1);return t==RewardState.Gotten?1e4+e.id:t==RewardState.CanGet?-1e4+e.id:e.id};n.sort(function(e,t){return c(e)-c(t)}),this.list.dataProvider=new eui.ArrayCollection(n)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleTemplateRewardPanel.prototype,"RoleTemplateRewardPanel");var RoleTemplateRewardItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseEffeNoName,this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data,t=GameGlobal.SubRoles.mTemplate[e.type];t.SendGetReward(e.id)},t.prototype.dataChanged=function(){var e=this.data;this.title.text=ItemConst.TYPE_NAME[UserTemplate.TEMPTYPE_TO_ITEMTYPE[e.type]]+"进阶到"+e.progress+"阶奖励",this.list.dataProvider=new eui.ArrayCollection(e.reward);var t=e.type,i=GameGlobal.SubRoles.mTemplate[t];if(this.goBtn.visible=!1,this.getImg.visible=!1,i){var o=i.GetRewardState(e.id-1);this.goBtn.visible=o==RewardState.CanGet,this.getImg.visible=o==RewardState.Gotten}},t}(eui.ItemRenderer);__reflect(RoleTemplateRewardItem.prototype,"RoleTemplateRewardItem");var RoleTemplateSkillPanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.skinName="RoleRideSkillSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=RoleTemplateSkillItem,this.itemList.validateNow(),this._AddItemClick(this.itemList,this._OnItemClick),this._AddClick(this.upBtn,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.title="技能",this.mModel=e[0];var i=e[1],o=e[2];this.mSelectIndex=i;for(var n=0;4>n;n++){var a=this.itemList.getChildAt(n);a.item.imgIcon.source=o[n]}this.commonDialog.OnAdded(this),this.UpdateContent(),this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){var t=this.mModel,i=t.mSkills[this.mSelectIndex],o=t.SkillConfig[t.mRideSkills[this.mSelectIndex]],n=o[i-1];if(Checker.Data(n.cost)){this.mModel.SendUpSkill(this.mSelectIndex);var a=this.itemList.getChildAt(this.mSelectIndex);a.showEff()}},t.prototype._OnItemClick=function(e){this.mSelectIndex=e.itemIndex,this.UpdateContent()},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.itemList);for(var e=0;4>e;e++){var t=this.itemList.getChildAt(e);t.item.imgIcon.filters=this.mModel.IsOpen(e)?null:Color.GetFilter(),t.selectImg.visible=e==this.mSelectIndex}var i=this.mModel,o=i.IsOpen(this.mSelectIndex);this.noneImg.visible=!o;var n=i.mSkills[this.mSelectIndex],a=i.SkillConfig[i.mRideSkills[this.mSelectIndex]],r=a[n];if(n>0?this.skillName.text=a[0].skillname+" 等级 "+n.toString():this.skillName.text=a[0].skillname,o){var s=a[n-1];this.curAttrLabel.textFlow=AttributeData.GetAttrTabString(s.attrpower),r?(this.needItemView.SetItemId(s.cost.id,s.cost.count),this.upGroup.visible=!0,this.nextAttrLabel.textFlow=AttributeData.GetAttrTabString(r.attrpower)):(this.upGroup.visible=!1,this.nextAttrLabel.text="已满级"),this.curLabel.text="当前效果",this.nextLabel.text="下级效果",this.nextAttrLabel.textColor=Color.GrayAttr}else this.upGroup.visible=!1,this.curLabel.text="下级效果",this.nextLabel.text="激活条件",this.curAttrLabel.textFlow=AttributeData.GetAttrTabString(r.attrpower),this.nextAttrLabel.text=this.getKindName()+"达到"+i.GetOpenLevel(this.mSelectIndex)+"阶",this.nextAttrLabel.textColor=Color.Red},t.prototype.getKindName=function(){var e=this.mModel.mTemplateType,t="";switch(e){case UserTemplate.TYPE_XIANLV_FZ:t="法阵";break;case UserTemplate.TYPE_XIANLV_XW:t="仙位";break;case UserTemplate.TYPE_PET_TONGL:t="通灵";break;case UserTemplate.TYPE_PET_SHOUH:t="兽魂";break;case UserTemplate.TYPE_RIDE:t="坐骑";break;case UserTemplate.TYPE_WING:t="翅膀"}return t},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RoleTemplateSkillPanel.prototype,"RoleTemplateSkillPanel",["ICommonWindowTitle"]);var RoleTemplateSkillItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=Util.GetParentByType(this,RoleTemplateSkillPanel);if(e){var t=e.mModel;if(t){var i=t.GetOpenLevel(this.itemIndex);t.mLevel>=i?(this.lvLabel.text="Lv."+t.mSkills[this.itemIndex],this.lvLabel.textColor=Color.l_green_1):(this.lvLabel.text=i+"阶激活",this.lvLabel.textColor=3708989)}}},t.prototype.showEff=function(){var e=new MovieClip;e.loadUrl(ResDataPath.GetUIEffePath2("ui_eff_skillf_001"),!0,1),e.x=this.selectImg.width>>1,e.y=this.selectImg.height>>1,this.addChild(e)},t}(eui.ItemRenderer);__reflect(RoleTemplateSkillItem.prototype,"RoleTemplateSkillItem");var RoleWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.GetRoleInfoPanel=function(){return this.commonWindowBg.GetViewStackElementByIndex(0)},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RoleWinSkin",this.commonWindowBg.SetTabView([TabView.CreateTabViewData(RoleInfoPanel,{skinName:"RoleInfoSkin"}),TabView.CreateTabViewData(RoleSkillPanel,{skinName:"RoleSkillSkin"}),TabView.CreateTabViewData(RoleRidePanel),TabView.CreateTabViewData(RoleWingPanel)])},t.prototype.destoryView=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,o?i:0),this.observe(MessageDef.ROLE_HINT,this.UpdateRedPoint),this.observe(MessageDef.RP_ROLE_HINT,this.UpdateRedPoint),this.observe(MessageDef.LEVEL_CHANGE,this.UpdateRedPoint),this.observe(GameGlobal.TianxModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.TianxModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.SwordModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.SwordModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(MessageDef.RP_TREASURE,this.UpdateRedPoint),this.observe(MessageDef.DEITYEQUIP_ALL_NOTICE,this.UpdateRedPoint),this.UpdateRedPoint(),this.observe(MessageDef.RP_SKILL_UPGRADE,this.UpdateSkillRedPoint),this.UpdateSkillRedPoint(),this.observe(GameGlobal.UserRide.GetItemRpUpdateMsg(),this.UpdateRideRedPoint),this.observe(GameGlobal.UserRide.GetItemEquipRpUpdateMsg(),this.UpdateRideRedPoint),this.UpdateRideRedPoint(),this.observe(GameGlobal.UserWing.GetItemRpUpdateMsg(),this.UpdateWingRedPoint),this.observe(GameGlobal.UserWing.GetItemEquipRpUpdateMsg(),this.UpdateWingRedPoint),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.UpdateWingRedPoint(),this.updateJiJieBtnPng()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(0),[ActivityKaiFuJiJieType.fairy,ActivityKaiFuJiJieType.weapon]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(2),[ActivityKaiFuJiJieType.ride]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(3),[ActivityKaiFuJiJieType.wing])},t.prototype.updateFateEff=function(){FateEff.isShowEff3(this)},t.prototype.OnClose=function(){MainBottomPanel.CloseNav(this),this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.OnOpenIndex=function(e){switch(e){case 1:return Deblocking.Check(DeblockingType.TYPE_8);case 2:return Deblocking.Check(DeblockingType.TYPE_9);case 3:return Deblocking.Check(DeblockingType.TYPE_10)}return!0},t.prototype.UpdateRedPoint=function(){this.commonWindowBg.CheckTalRedPoint(0)},t.prototype.UpdateSkillRedPoint=function(){this.commonWindowBg.CheckTalRedPoint(1)},t.prototype.UpdateRideRedPoint=function(){this.commonWindowBg.CheckTalRedPoint(2)},t.prototype.UpdateWingRedPoint=function(){this.commonWindowBg.CheckTalRedPoint(3)},t.prototype.OnBackClick=function(e){return 0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleWin.prototype,"RoleWin",["ICommonWindow"]);var UserWing=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_WING)||this;return t.mMsgDefUpdateExp=MessageDef.ROLE_WING_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.ROLE_WING_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.ROLE_WING_UPDATE,t.mMsgDefInit=MessageDef.ROLE_WING_INIT,t.mMsgDefUpdateEquip=MessageDef.ROLE_WING_UPDATE_EQUIP,t.mRedPoint=new UserWingRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.WingBaseConfig,this.LvproConfig=GameGlobal.Config.WingLvproConfig,this.SkillConfig=GameGlobal.Config.WingSkillConfig,this.AttrsConfig=GameGlobal.Config.WingAttrsConfig,this.ProgressConfig=GameGlobal.Config.WingProgressConfig,this.SkinConfig=GameGlobal.Config.WingSkinConfig,e.prototype.Init.call(this)},t}(UserTemplate);__reflect(UserWing.prototype,"UserWing");var UserWingRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.WING,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(UserWingRedPoint.prototype,"UserWingRedPoint");var RoleWingPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.UserWing,t.mModelRedPoint=GameGlobal.UserWing.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.wing,t}return __extends(t,e),t.RedPointCheck=function(){return GameGlobal.UserWing.mRedPoint.IsRedPoint()},t.NAME="翅膀",t}(RoleRidePanel);__reflect(RoleWingPanel.prototype,"RoleWingPanel");var AnswerController=function(e){function t(){var t=e.call(this)||this;return t.nOopenWinState=0,t.bOpenLayer=!1,t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),this.tAnswerData={type:0,rank:0,answerNum:0,answerNo:0,answerList:[],point:0,rankNo:0,operation:0,timeout:0}},t.prototype.getAnswerData=function(){return this.tAnswerData},t.prototype.bOpenAnswer=function(){var e=!1;return this.tAnswerData.type&&(e=!0),e},t.prototype.updateAnswer=function(e){this.tAnswerData.type=this.sentenceTrue(this.tAnswerData.type,e.type),this.tAnswerData.rank=this.sentenceTrue(this.tAnswerData.rank,e.rank),this.tAnswerData.answerNum=this.sentenceTrue(this.tAnswerData.answerNum,e.answerNum),this.tAnswerData.answerNo=this.sentenceTrue(this.tAnswerData.answerNo,e.answerNo),this.tAnswerData.answerList=this.sentenceTrue(this.tAnswerData.answerList,e.answerList),this.tAnswerData.point=this.sentenceTrue(this.tAnswerData.point,e.point),this.tAnswerData.rankNo=this.sentenceTrue(this.tAnswerData.rankNo,e.rankNo),this.tAnswerData.operation=this.sentenceTrue(this.tAnswerData.operation,e.operation),this.tAnswerData.timeout=this.sentenceTrue(this.tAnswerData.timeout,e.timeout)},t.prototype.sentenceTrue=function(e,t){return"number"==typeof t?e=t:"object"==typeof t&&(e=t),e},t.prototype.OnSocketClose=function(){this.tAnswerData&&(this.tAnswerData.type=0)},t}(BaseSystem);__reflect(AnswerController.prototype,"AnswerController");var AnswerManage=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_answer_info,t.doAnswerInfo),t.regNetMsg(S2cProtocol.sc_answer_update,t.doAnswerUpDateInfo),t.regNetMsg(S2cProtocol.sc_answer_reward,t.doAnswerReward),t.regNetMsg(S2cProtocol.sc_answer_rank_res,t.doAnswerRank),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.sendAnswer=function(e,t){var i=new Sproto.cs_answer_answer_request;i.no=e,i.answer=t,this.Rpc(C2sProtocol.cs_answer_answer,i)},t.prototype.sendRetRank=function(){var e=new Sproto.cs_answer_answer_rank_request;this.Rpc(C2sProtocol.cs_answer_answer_rank,e)},t.prototype.openAnswer=function(){this.Rpc(C2sProtocol.cs_answer_answer_ui,function(e){})},t.prototype.doAnswerInfo=function(e){GameGlobal.AnswerController.updateAnswer(e),GameGlobal.MessageCenter.dispatch(MessageDef.ANSWER_CHANGE)},t.prototype.doAnswerUpDateInfo=function(e){GameGlobal.AnswerController.updateAnswer(e),GameGlobal.MessageCenter.dispatch(MessageDef.ANSWER_CHANGE)},t.prototype.doAnswerReward=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.ANSWER_REWARD),ViewManager.ins().open(AnswerResultLayer,e);var t={type:0};t.type=0,GameGlobal.AnswerController.updateAnswer(t),GameGlobal.MessageCenter.dispatch(MessageDef.ANSWER_CHANGE)},t.prototype.doAnswerRank=function(e){ViewManager.ins().open(AnswerRankWin,e.rank)},t}(BaseSystem);__reflect(AnswerManage.prototype,"AnswerManage");var AnswerLayer=function(e){function t(){var t=e.call(this)||this;return t.tName=[],t.tScore=[],t.tAs=[],t.tRe=[],t.nCountTime=0,t.skinName="AnswerSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=0;2>=e;e++){var t=this["lbNe"+(e+1)];this.tName[e]=t}for(var e=0;2>=e;e++){var t=this["lbSc"+(e+1)];this.tScore[e]=t}for(var e=0;3>=e;e++){var t=this["lbAs"+(e+1)];this.tAs[e]=t}for(var e=0;3>=e;e++){var t=this["imgAn"+(e+1)];this.tRe[e]=t}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.ANSWER_CHANGE,this.UpdateContent),this.commonWindowBg.OnAdded(this),this._AddClick(this.lbRank,this.onClick),this._AddClick(this.imgSe1,this.onClick),this._AddClick(this.imgSe2,this.onClick),this._AddClick(this.imgSe3,this.onClick),this._AddClick(this.imgSe4,this.onClick),this.AddTimer(1e3,0,this.startUpdate),GameGlobal.AnswerManage.openAnswer(),GameGlobal.AnswerController.bOpenLayer=!0},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),TimerManager.ins().remove(this.startUpdate,this),GameGlobal.AnswerController.bOpenLayer=!1},t.prototype.startUpdate=function(){if(this.nCountTime>0){if(this.nCountTime-=1,this.tLayerData)if(1===this.tLayerData.type){var e="|C:0x682f00&T:答题剩余时间|C:0x369427&T:"+this.nCountTime+"|C:0x369427&T:秒|";this.lbTime.textFlow=TextFlowMaker.generateTextFlow(e)}else if(2===this.tLayerData.type){var e="|C:0x682f00&T:"+this.nCountTime+"|C:0x682f00&T:秒后进入下一题|";this.lbTime.textFlow=TextFlowMaker.generateTextFlow(e)}else this.lbTime.text=""}else this.lbTime.text=""},t.prototype.setData=function(){GameGlobal.AnswerController.getAnswerData()&&(this.tLayerData=GameGlobal.AnswerController.getAnswerData(),this.nCountTime=this.tLayerData.timeout+1||0)},t.prototype.onClick=function(e){var t=0;switch(e.target){case this.lbRank:GameGlobal.AnswerManage.sendRetRank();break;case this.imgSe1:t=1;break;case this.imgSe2:t=2;break;case this.imgSe3:t=3;break;case this.imgSe4:t=4}this.tLayerData&&!this.tLayerData.operation&&t>0&&GameGlobal.AnswerManage.sendAnswer(this.tLayerData.answerNum,t)},t.prototype.UpdateContent=function(){this.setData(),this.startUpdate(),this.updateInfo(),this.updateRank(),this.updateTitel()},t.prototype.updateRank=function(){var e=this.tLayerData.rank;if(e.length){this.gRank.visible=!0;for(var t in e)this.tName[t].text=e[t].name||"",this.tScore[t].text=e[t].point||""}else this.gRank.visible=!1},t.prototype.updateInfo=function(){var e=this.tLayerData;if(e){e.rankNo?this.lbMyRank.text="我的排名: 第"+e.rankNo+"名":this.lbMyRank.text="未上榜",e.point?this.lbMyScore.text=e.point+"":this.lbMyScore.text="",e.answerNum&&(this.lbTitle.text="第"+e.answerNum+"题");var t=GlobalConfig.ins().AnswerBaseConfig.answermax;this.lbTitleNums.text="共"+t+"题"}},t.prototype.updateTitel=function(){var e=this.tLayerData;if(e){var t=GlobalConfig.ins().AnswerQuestionConfig[e.answerNo];if(t&&t.question){this.lbQus.text=t.question;var i=["A: ","B: ","C: ","D: "],o=[t.result1,t.result2,t.result3,t.result4];for(var n in this.tAs)this.tAs[n].text=i[n]+o[e.answerList[n]-1]}if(e.operation||2==e.type)for(var n in this.tRe){this.tRe[n].visible=!0;var a="0";for(var r in e.answerList)1===e.answerList[r]&&(a=r);a==n?this.tRe[n].source="ui_dt_bm_gou":this.tRe[n].source="ui_dt_bm_x"}else for(var n in this.tRe)this.tRe[n].visible=!1;if(e.operation){this.imgSelect.visible=!0;var s=[];s[1]=this.imgSe1,s[2]=this.imgSe2,s[3]=this.imgSe3,s[4]=this.imgSe4,this.imgSelect.x=s[e.operation].x,this.imgSelect.y=s[e.operation].y}else this.imgSelect.visible=!1}},t.LAYER_LEVEL=LayerManager.UI_Main_2,t}(BaseEuiView);__reflect(AnswerLayer.prototype,"AnswerLayer",["ICommonWindow"]);var AnswerRankItem=function(e){function t(){var t=e.call(this)||this;return t.rewardList=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tOther.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.dataChanged=function(){if(this.data){var e=this.data;e.rank&&(this.setTxtColorByRank(e.rank),this.trank.text=e.rank+"",this.imgBg.visible=e.rank%2?!0:!1),this.tname.text=e.name||"",this.tpower.text=e.point||""}},t.prototype._OnClick=function(e){e.target,this.y},t.prototype.setTxtColorByRank=function(e){var t=7222027;switch(e){case 1:t=13793025;break;case 2:t=12845309;break;case 3:t=3108854}this.trank.textColor=this.tname.textColor=t},t}(eui.ItemRenderer);__reflect(AnswerRankItem.prototype,"AnswerRankItem");var AnswerRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="RankWinSkin",t.itemList.itemRenderer=AnswerRankItem,t.listView.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonDialogBg.OnAdded(this),this.rewardList=[],this.tValue1.text="分数"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddItemClick(this.itemList,this.onItemClick),this._AddClick(this.gReBg,this.onBgClick),this._AddItemClick(this.itemList,this.onItemClick);var i=e[0];if(i){var o=[];for(var n in i){var a={name:"",point:0,rank:0};a.name=i[n].name,a.point=i[n].point,a.rank=parseInt(n)+1,o.push(a)}this.getRankData(o)}this.showContent()},t.prototype.getRankData=function(e){this.itemList.dataProvider=new eui.ArrayCollection(e)},t.prototype.showContent=function(){var e=GameGlobal.AnswerController.getAnswerData();this.tRank.text=e.rankNo+""||"",this.gScore.visible=!0,this.tScore.text=e.point+""||""},t.prototype.OnClose=function(){this.removeObserve()},t.prototype.onItemClick=function(e){if(e.item.rank){var t=e.item.rank,i=GlobalConfig.ins().AnswerAwardConfig;for(var o in i)t>=i[o].rank[0]&&t<=i[o].rank[1]&&this.listView.dataProvider.replaceAll(i[o].reward)}this.gReBg.visible=!0,this.gReward.y=e.itemRenderer.y+this.pScr.y-this.gReward.height-this.itemList.scrollV},t.prototype.onBgClick=function(){this.gReBg.visible=!1},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(AnswerRankWin.prototype,"AnswerRankWin");var AnswerResultLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="AnswerResultSkin",t.listView.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this._AddClick(this.btnSure,this.close),this.tLayerData=e[0],this.updateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.close=function(){ViewManager.ins().close(AnswerLayer),ViewManager.ins().close(this)},t.prototype.updateContent=function(){if(this.tLayerData){this.lbSort.text=this.tLayerData.rankNo||99;var e=this.tLayerData.point||0,t="|C:0x682F00&T:今日成绩|C:0x369427&T:"+e+"|C:0x369427&T:分|";this.lbScore.textFlow=TextFlowMaker.generateTextFlow(t),this.tLayerData.rewards&&this.tLayerData.rewards.length&&this.listView.dataProvider.replaceAll(this.tLayerData.rewards)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(AnswerResultLayer.prototype,"AnswerResultLayer");var Arena=function(e){function t(){var t=e.call(this)||this;return t.myRank=0,t.maxRank=0,t.medal=0,t}return __extends(t,e),t.prototype.getRobotBodyByRank=function(e){return t.MON_LIST[MathUtils.limitInteger(0,t.MON_LIST.length-1)]||220004},t.prototype.getRankRewards=function(e){var t,i=GameGlobal.Config.ArenaRankRewardConfig;for(var o in i)if(t=i[o],e>=t.rankBegin&&e<=t.rankEnd)return t.rankReward;return null},t.prototype.getVipBuyCount=function(){var e=GameGlobal.actorModel.vipLv,t=GameGlobal.Config.ArenaVipConfig;return t[e]?t[e].maxBuyTime:0},t.prototype.getMaxBuyCount=function(){return GameGlobal.Config.ArenaConfig.maxBuyTime},t.prototype.getPKCount=function(){return GameGlobal.Config.ArenaConfig.normalPKCount},t.prototype.getPKCountBuy=function(){return GameGlobal.Config.ArenaConfig.pkCountPrice},t.prototype.getAddPKCount=function(){return GameGlobal.Config.ArenaConfig.buyPKCount},t.prototype.getPKTimes=function(){return GameGlobal.Config.ArenaConfig.revertInterval},t.prototype.getRankRewardTimes=function(){var e=GameGlobal.Config.ArenaConfig.rewardMinute,t=GameGlobal.Config.ArenaConfig.rewardHour,i=e>0?"每天"+t+"时"+e+"分结算":"每天"+t+"时结算";return i},t.prototype.getUpRankReward=function(){return GameGlobal.Config.ArenaConfig.promoteReward},t.prototype.getMyRank=function(){return this.myRank},t.prototype.getMaxRank=function(){return this.maxRank},t.prototype.getArenaInfoRsp=function(){return this.arenaInfoRsp},t.prototype.sendArenaData=function(){var e=this,t=new Sproto.cs_arena_info_request;this.Rpc(C2sProtocol.cs_arena_info,t,function(t){e.arenaInfoRsp=t;var i=t;e.myRank=i.rank,e.maxRank=i.maxrank,e.medal=i.medal,e.HandleDuration(i.remaintime),MessageCenter.ins().dispatch(MessageDef.ARENA_INFO_DATA,i)})},t.prototype.sendArenaChallenge=function(e){var t=new Sproto.cs_arena_pk_request;t.rank=e,this.Rpc(C2sProtocol.cs_arena_pk,t)},t.prototype.sendArenaBuyCount=function(){var e=this,t=new Sproto.cs_buy_pk_request;this.Rpc(C2sProtocol.cs_buy_pk,t,function(t){var i=t;i.ret&&(e.arenaInfoRsp.pkcount=i.pkcount),MessageCenter.ins().dispatch(MessageDef.ARENA_BUY_RESULT,i)})},t.prototype.sendGetRewards=function(){this.Rpc(C2sProtocol.cs_arena_get_reward,new Sproto.cs_arena_get_reward_request)},t.prototype.sendArenaRank=function(){var e=new Sproto.cs_arena_rank_request;this.Rpc(C2sProtocol.cs_arena_rank,e,function(e){var t=e;MessageCenter.ins().dispatch(MessageDef.ARENA_RANK_DATA,t)})},t.prototype.getMedal=function(){return this.medal},t.prototype.setMedal=function(e){this.medal=e},t.prototype.HandleDuration=function(e){0>=e||(TimerManager.ins().removeAll(this),TimerManager.ins().doTimer(1e3*e,1,this.sendArenaData,this))},t.prototype.IsRedPoint=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_42)&&this.arenaInfoRsp&&this.arenaInfoRsp.pkcount?!0:!1},t.MON_LIST=[220004,220003],t}(BaseSystem);__reflect(Arena.prototype,"Arena");var ArenaInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.pkCount=0,t.remaintime=0,t.buyCount=0,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.m_roles[0],e;var e},t.prototype.childrenCreated=function(){this.m_roles=[];var e,t=0;for(t;5>t;t++)e=this["role"+t],e.touchEnabled=!0,this.m_roles[t]=e;this.itemList.itemRenderer=ItemBaseNotName},t.prototype._OnClick=function(e){if(egret.is(e.currentTarget,"ArenaRoleItem"))return void(this.pkCount>0?UserFb.FinishAndCheckFighting()&&GameGlobal.Arena.sendArenaChallenge(e.currentTarget.getRank()):UserTips.ins().showTips("挑战次数不足"));switch(e.target){case this.rankBtn:ViewManager.ins().open(RankWin,RankDataType.TYPE_ARENA);break;case this.mallBtn:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_ARENA]);break;case this.buyBtn:var t=GameGlobal.Arena.getVipBuyCount();0==t&&(t=GameGlobal.Arena.getMaxBuyCount());GameGlobal.actorModel.vipLv;this.reaminCount=t-this.buyCount,WarnWin.show("是否消耗|C:0xfff01e&T:"+GameGlobal.Arena.getPKCountBuy()+"元宝|购买|C:0xd27701&T:"+GameGlobal.Arena.getAddPKCount()+"次|挑战机会\n\n剩余购买次数："+this.reaminCount+"\n\nVIP"+GameGlobal.actorModel.vipLv+"每天可购买"+t+"次",this.okBuyHandler,this,null,null,"normal",{title:"购买提示"})}},t.prototype.okBuyHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.Arena.sendArenaBuyCount()},t.prototype.OnOpen=function(){var e,t=0;for(t;5>t;t++)e=this.m_roles[t],this.AddClick(e,this._OnClick);this.AddClick(this.rankBtn,this._OnClick),this.AddClick(this.mallBtn,this._OnClick),this.AddClick(this.buyBtn,this._OnClick),this.observe(MessageDef.ARENA_INFO_DATA,this.getArenaInfoData),this.observe(MessageDef.ARENA_BUY_RESULT,this.getArenaBuyResult),GameGlobal.Arena.sendArenaData()},t.prototype.getArenaInfoData=function(e){var t,i=0;for(i;5>i;i++)t=this.m_roles[i],t.updateData(e.targets[i]);this.buyCount=e.buycount,this.pkCount=e.pkcount,this.rankTxt.text=e.rank+"",this.countTxt.text=e.pkcount+"",this.itemList.dataProvider=new eui.ArrayCollection(GameGlobal.Arena.getRankRewards(e.rank)),TimerManager.ins().remove(this.updateTimes,this),this.remaintime=e.remaintime,this.timeTxt.visible=e.remaintime>0,this.timeTxt.text=DateUtils.getFormatBySecond(e.remaintime),e.remaintime>0&&this.AddTimer(1e3,0,this.updateTimes)},t.prototype.updateTimes=function(){this.remaintime--,this.remaintime<=0&&(this.timeTxt.visible=!1,TimerManager.ins().remove(this.updateTimes,this)),this.timeTxt.text=DateUtils.getFormatBySecond(this.remaintime)},t.prototype.getArenaBuyResult=function(e){e.ret?(this.pkCount=e.pkcount,this.buyCount=e.buycount,this.countTxt.text=e.pkcount+"",this.timeTxt.visible=!1,TimerManager.ins().remove(this.updateTimes,this)):this.reaminCount<=0?UserTips.ins().showTips("购买剩余次数不足，购买失败！"):UserTips.ins().showTips("元宝不足，购买失败！")},t.prototype.UpdateContent=function(){this.cleanTxt.text=GameGlobal.Arena.getRankRewardTimes(),this.myPower.text=GameGlobal.actorModel.power},t.NAME="竞技场",t}(BaseView);__reflect(ArenaInfoPanel.prototype,"ArenaInfoPanel",["ICommonWindowTitle"]);var ArenaPKResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="AreanPKResultSkin",t.list.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.sortFunc=function(e,t){if(1==e.type&&1==t.type){var i=GlobalConfig.ins().ItemConfig[e.id],o=GlobalConfig.ins().ItemConfig[t.id];if(i.quality>o.quality)return-1;if(i.quality<o.quality)return 1;if(i.level>o.level)return-1;if(i.level<o.level)return 1}else{if(e.type<t.type)return-1;if(e.type>t.type)return 1}return 0},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.SetBtnLabel("领取奖励"),this.SetTitleLabel("获得奖励"),this.SetCloseFunc(t[5]),e.prototype.OnOpen.call(this),this.winGroup.visible=t[0],this.failGroup.visible=!t[0];var o=t[1];o&&o.sort(this.sortFunc),this.list.dataProvider=new eui.ArrayCollection(o),this.list.validateNow(),this.lastRankTxt.text=t[2]+"",this.curRankTxt.text=t[3]+"";var n=t[4]-t[3];n>0?(this.upImg.visible=!0,this.upRankTxt.text=n+""):(this.upImg.visible=!1,this.upRankTxt.text="不变");var a=0;t[2]>t[3]&&(a=t[2]-t[3]),this.rewardTxt.text=a*GameGlobal.Arena.getUpRankReward()+""},t}(ResultBasePanel);__reflect(ArenaPKResultPanel.prototype,"ArenaPKResultPanel");var ArenaRoleItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getRank=function(){return this.rank},t.prototype.updateData=function(e){if(this.rank=e.rank,this.totalPower.text=e.power,this.rankTxt.text=e.rank+"",this.nameTxt.text=e.name,this.mkillImg.visible=e.iskill,e.id>0){this.challengeImg.visible=!1,this.nameTxt.visible=!0;var t=new RoleShowData;t.job=e.job,t.sex=e.sex,t.shows=e.shows,this.roleShowPanel.SetAll(t),this.roleShowPanel.scaleX=this.roleShowPanel.scaleY=.6}else this.challengeImg.visible=!0,this.nameTxt.visible=!1,this.roleShowPanel.ClearCache(),this.roleShowPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(e.monId||220004))),this.roleShowPanel.scaleX=this.roleShowPanel.scaleY=1},t}(eui.Component);__reflect(ArenaRoleItem.prototype,"ArenaRoleItem");var ArenaWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ArenaWinSkin",this.commonWindowBg.SetTabView([TabView.CreateTabViewData(ArenaInfoPanel,{skinName:"ArenaInfoSkin"}),TabView.CreateTabViewData(XiandaoPanel),TabView.CreateTabViewData(LadderInfoPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.Ladder.SendGetInitInfo(),GameGlobal.Ladder.sendGetRankInfo(),GameGlobal.XiandaoModel.SendGetInfo();var i=e[0],o=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,o?i:0),this.observe(MessageDef.ARENA_INFO_DATA,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ARENA_BUY_RESULT,this.UpdateTabBtnRedPoint),this.observe(MessageDef.LADDER_CHANGE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.LADDER_WINNER,this.UpdateTabBtnRedPoint),this.observe(MessageDef.LADDER_PRE_WEEK_REWARD,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()
},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.Arena.IsRedPoint()),this.mCommonWindowBg.ShowTalRedPoint(1,GameGlobal.XiandaoModel.mRedPoint.IsRedPoint()),this.mCommonWindowBg.ShowTalRedPoint(2,GameGlobal.Ladder.IsRedPoint())},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_42)},t.prototype.OnOpenIndex=function(e){return 1==e?Deblocking.Check(DeblockingType.TYPE_43):2==e?Deblocking.Check(GameGlobal.Config.KingSportsBaseConfig.openid):!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ArenaWin.prototype,"ArenaWin",["ICommonWindow"]);var AuctionModel=function(e){function t(){var t=e.call(this)||this;return t.rechargeRatio=0,t.activeRatio=0,t.lockRatio=0,t.auctionLists={},t.recordInfos=[],t.isRedPoint=!1,t.mAuctionItemPrice={},t.auctionLists=(i={},i[0]=[],i[1]=[],i),t.regNetMsg(S2cProtocol.sc_auction_list,t._DoUpdateAuctionList),t.regNetMsg(S2cProtocol.sc_auction_update,t._DoUpdateAuctionInfo),t.regNetMsg(S2cProtocol.sc_auction_record,t._DoUpdateAuctionRecord),t.regNetMsg(S2cProtocol.sc_auction_select,t._DoUpdateAuctionSelect),t.regNetMsg(S2cProtocol.sc_ratio_change,t._DoUpdateAuctionRatio),t.regNetMsg(S2cProtocol.sc_aution_notice,t._DoUpdateAuctionRedPoint),t;var i}return __extends(t,e),t.prototype._DoUpdateAuctionItem=function(){GameGlobal.MessageCenter.dispatch(MessageDef.AUCTION_ITEM_PRICE_UPDATE)},t.prototype._DoUpdateAuctionList=function(e){this.rechargeRatio=e.ratio,this.activeRatio=e.ratioAct,this.lockRatio=e.lockratio;for(var t,i=e.items.length,o=[],n=0;i>n;n++)t=new AuctionInfo,t.parser(e.items[n]),o[n]=t;this.sortInfos(o),this.auctionLists[e.guildid>0?1:0]=o,GameGlobal.MessageCenter.dispatch(MessageDef.AUCTION_LIST_UPDATE),this.calculateRedPointState()},t.prototype.sortInfos=function(e){var t=function(e){return e.createtime};e.sort(function(e,i){return t(i)-t(e)})},t.prototype._DoUpdateAuctionInfo=function(e){var t=this.auctionLists[e.guildid>0?1:0],i=t.length;if(i>0)for(var o=void 0,n=0;i>n;n++)if(o=t[n],o.id==e.item.id){o.parser(e.item),o.status>3&&t.splice(n,1),GameGlobal.MessageCenter.dispatch(MessageDef.AUCTION_LIST_UPDATE);break}this.calculateRedPointState()},t.prototype._DoUpdateAuctionRecord=function(e){var t=e.items.length;this.recordInfos=[];for(var i,o=0;t>o;o++)i=new AuctionInfo,i.parser(e.items[o]),this.recordInfos[o]=i;GameGlobal.MessageCenter.dispatch(MessageDef.AUCTION_RECORD_UPDATE)},t.prototype._DoUpdateAuctionSelect=function(e){ViewManager.ins().open(AuctionSelectPanel,e.rewards[0])},t.prototype._DoUpdateAuctionRatio=function(e){this.rechargeRatio=e.ratio,this.activeRatio=e.ratioAct,this.lockRatio=e.lockratio},t.prototype._DoUpdateAuctionRedPoint=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.AuctionModel.sendAuctionList(0),GameGlobal.GangModel.HasGang()&&GameGlobal.AuctionModel.sendAuctionList(1)},t.prototype.sendAuctionUseItem=function(e){var t=new Sproto.cs_auction_useitem_request;t.id=e,this.Rpc(C2sProtocol.cs_auction_useitem,t)},t.prototype.sendAuctionSelect=function(e){var t=new Sproto.cs_auction_select_request;t.choose=e,this.Rpc(C2sProtocol.cs_auction_select,t)},t.prototype.sendAuctionList=function(e){var t=new Sproto.cs_auction_list_request;t.auctype=e,this.Rpc(C2sProtocol.cs_auction_list,t)},t.prototype.sendAuctionOffer=function(e,t){var i=new Sproto.cs_auction_offer_request;i.id=e,i.guildid=t,this.Rpc(C2sProtocol.cs_auction_offer,i)},t.prototype.SendGetItemPrice=function(e){var t=this,i=new Sproto.cs_auction_query_item_request;i.itemid=e,this.Rpc(C2sProtocol.cs_auction_query_item,i,function(i){t.mAuctionItemPrice[e]=i})},t.prototype.sendAuctionBuy=function(e,t){var i=new Sproto.cs_auction_buy_request;i.id=e,i.guildid=t,this.Rpc(C2sProtocol.cs_auction_buy,i)},t.prototype.sendAuctionRecord=function(e){var t=new Sproto.cs_auction_record_request;t.auctype=e,this.Rpc(C2sProtocol.cs_auction_record,t)},t.prototype.sendAuctionUpdate=function(e,t){var i=new Sproto.cs_auction_update_request;i.id=e,i.guildid=t,this.Rpc(C2sProtocol.cs_auction_update,i)},t.prototype.getBaseConfig=function(){return GameGlobal.Config.AuctionBaseConfig},t.prototype.getDescByStatus=function(e){var t="";switch(e){case 1:t="|C:"+Color.Blue+"&T:展示阶段|";break;case 2:t="|C:0x019704&T:竞拍阶段|";break;case 3:t="|C:"+Color.Red+"&T:抢拍阶段|";break;case 4:t="成交阶段";break;case 5:t="流拍阶段"}return t},t.prototype.calculateRedPointState=function(){this.isRedPoint=!1;for(var e in this.auctionLists)if(this.auctionLists[e].length>0){this.isRedPoint=!0;break}GameGlobal.MessageCenter.dispatch(MessageDef.AUCTION_REDPOINT_UPDATE)},t.prototype.getRemainRatio=function(){return this.rechargeRatio+this.activeRatio-this.lockRatio},t.prototype.showAlert=function(){var e=this.activeRatio-this.lockRatio>0?this.activeRatio-this.lockRatio:0,t=e>0?this.rechargeRatio:this.getRemainRatio(),i="\n您在拍卖行的消费额度不足，无法参与竞拍\n\n|C:0x019704&T:充值额度剩余："+t+"\n活跃剩余额度："+e+"(优先消耗活跃额度)|\n\n花费额度获得途径：\n每充值1元宝，增加"+this.getBaseConfig().goldratio+"元宝购买额度\n每1点活跃度，可转化为"+this.getBaseConfig().activeratio+"元宝购买额度\n";WarnWin.show(i,function(){},this,null,null,"sure",{title:"拍卖提示"})},t.prototype.showRatioPanel=function(){var e=this.activeRatio-this.lockRatio>0?this.activeRatio-this.lockRatio:0,t=e>0?this.rechargeRatio:this.getRemainRatio(),i="\n|C:0x019704&T:充值额度剩余："+t+"\n活跃剩余额度："+e+"(优先消耗活跃额度)|\n\n花费额度获得途径：\n每充值1元宝，增加"+this.getBaseConfig().goldratio+"元宝购买额度\n每1点活跃度，可转化为"+this.getBaseConfig().activeratio+"元宝购买额度\n";WarnWin.show(i,function(){},this,null,null,"sure")},t}(BaseSystem);__reflect(AuctionModel.prototype,"AuctionModel");var AuctionInfo=function(){function e(){this.id=0,this.itemid=0,this.count=0,this.price=0,this.playername="",this.offername="",this.status=0,this.createtime=0,this.dealtime=0,this.isbuy=0}return e.prototype.parser=function(e){this.id=e.id,this.itemid=e.itemid,this.count=e.count,this.price=e.price,this.playername=e.playername,this.offername=e.offername,this.status=e.status,this.createtime=e.createtime,this.dealtime=e.dealtime,this.isbuy=e.isbuy,this.dealprice=e.dealprice,this.addprice=e.addprice,this.numerictype=e.numerictype},e.prototype.HasOffer=function(){return this.offername?!0:!1},e}();__reflect(AuctionInfo.prototype,"AuctionInfo");var AuctionAllServicePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];AuctionBasePanel.aucType=0,e.prototype.OnOpen.call(this)},t.NAME="全服拍品",t}(AuctionBasePanel);__reflect(AuctionAllServicePanel.prototype,"AuctionAllServicePanel");var CImage=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"source",{set:function(e){this.source2(e)},enumerable:!0,configurable:!0}),t.prototype.source2=function(e){var i=e;this.m_Url!=i&&(this.m_Url&&ResMgr.Unref(ResMgr.GetName(this.m_Url),ResMgr.IMG_LIFT_TIME),this.m_Url=i,this.m_Url&&ResMgr.Ref(ResMgr.GetName(this.m_Url)),egret.superSetter(t,this,"source",e))},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.m_Cache&&(this.source2(this.m_Cache),this.m_Cache=null)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.m_Url&&(this.m_Cache=this.m_Url,this.source2(null))},t}(eui.Image);__reflect(CImage.prototype,"CImage");var AuctionGuildPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];AuctionBasePanel.aucType=1,e.prototype.OnOpen.call(this)},t.NAME="帮会拍品",t}(AuctionBasePanel);__reflect(AuctionGuildPanel.prototype,"AuctionGuildPanel");var AuctionMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(AuctionAllServicePanel),TabView.CreateTabViewData(AuctionGuildPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.commonWindowBg.OnAdded(this,i)},t.prototype.OnOpenIndex=function(e){return 1!=e||GameGlobal.actorModel.HasGuild()?!0:(UserTips.ins().showTips("您没有加入帮会"),!1)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!=e[0]||GameGlobal.actorModel.HasGuild()?!0:(UserTips.ins().showTips("您没有加入帮会"),!1)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(AuctionMainPanel.prototype,"AuctionMainPanel");var AuctionRecordPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="AuctionRecordPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.recordList.itemRenderer=AuctionRecordItem,this.recordList.dataProvider=null},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.AUCTION_RECORD_UPDATE,this.UpdateContent),this.commonWindowBg.SetTitle(0==e[0]?"全服成交记录":"帮会成交记录"),GameGlobal.AuctionModel.sendAuctionRecord(e[0])},t.prototype.UpdateContent=function(){var e=GameGlobal.AuctionModel.recordInfos,t=function(e){return e.dealtime};e.sort(function(e,i){return t(i)-t(e)});var i=e.length;this.tipTxt.visible=0==i,this.conGroup.visible=i>0,this.recordList.dataProvider=new eui.ArrayCollection(e)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(AuctionRecordPanel.prototype,"AuctionRecordPanel");var AuctionRecordItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),this.data){var t=this.data;this.itemIcon.num=t.count,this.itemIcon.data=t.itemid,this.playNameTxt.text=t.offername,this.priceicon.type=MoneyConst.yuanbao,this.priceicon.price=t.price*t.count,this.descTxt.text=1==t.isbuy?"一口价成交":"竞拍价成交";var i=1e3*t.dealtime,o=new Date(i),n=o.getHours()<10?"0"+o.getHours():o.getHours(),a=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes();this.dealTimeTxt.text=o.getMonth()+1+"月"+o.getDate()+"日"+n+":"+a}},t}(eui.ItemRenderer);__reflect(AuctionRecordItem.prototype,"AuctionRecordItem");var AuctionSelectPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="AuctionSelectSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemIcon.isShowName(!1)},t.prototype.onClick=function(e){this.CloseSelf(),GameGlobal.AuctionModel.sendAuctionSelect(e.target==this.useBtn?1:2);var t="";t=e.target==this.useBtn?"已放入背包":"已放入拍卖行",GameGlobal.UserTips.showTips(t)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.useBtn,this.onClick),this.AddClick(this.auctionBtn,this.onClick),this.observe(MessageDef.AUCTION_ITEM_PRICE_UPDATE,this.UpdateContent),this.rewardData=e[0],this.rewardData&&GameGlobal.AuctionModel.SendGetItemPrice(this.rewardData.id),this.UpdateContent()},t.prototype.UpdateContent=function(){if(this.rewardData){this.itemIcon.data=this.rewardData;var e=GameGlobal.AuctionModel.mAuctionItemPrice,t=e[this.rewardData.id];t?(this.priceicon0.type=t.numerictype,this.priceicon0.price=t.dealprice*this.rewardData.count,this.priceicon1.type=t.numerictype,this.priceicon1.price=t.price*this.rewardData.count,this.priceicon0.visible=!0,this.priceicon1.visible=!0):(this.priceicon0.visible=!1,this.priceicon1.visible=!1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(AuctionSelectPanel.prototype,"AuctionSelectPanel");var Sproto;!function(e){var t=function(){function e(){}return e}();e.MetaInfo=t,__reflect(t.prototype,"Sproto.MetaInfo");var i=function(){function i(){this.MetaDictionary={}}return i.prototype._GetMeta=function(e){var i=this.MetaDictionary[e];return null==i&&(i=new t,i.ProtocolType=e,this.MetaDictionary[e]=i),i},i.prototype.Set=function(e,t,i){var o=this._GetMeta(e);o.RequestType=t,o.ResponseType=i},i.prototype.GenRequest=function(t,i,o){void 0===o&&(o=0);var n=this.MetaDictionary[t];if(null==n.RequestType)return null;var a=e.SprotoCore.GetDeserialize(i,o,i.length),r=e.ALL_DICT[n.RequestType].de(a);return e.SprotoCore.CloseDeserialize(a),r},i.prototype.Get=function(e){return this.MetaDictionary[e]},i}();e.ProtocolFunctionDictionary=i,__reflect(i.prototype,"Sproto.ProtocolFunctionDictionary")}(Sproto||(Sproto={}));var ItemData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mIsNewItem=!1,t}return __extends(t,e),t.prototype.parser=function(t){e.prototype.parser.call(this,t),t&&(this.invalidtime=t.invalidtime||0)},t.prototype.UpdateConfigId=function(t){e.prototype.UpdateConfigId.call(this,t),t&&this.setCanbeUsed()},t.prototype.setCanbeUsed=function(){if(this.itemConfig)if(1==this.itemConfig.useType||2==this.itemConfig.useType)if(GameLogic.ins().actorModel.level<this.itemConfig.level)this.canbeUsed=!1;else{var e=this.itemConfig.id;if(230001==e||230002==e||230003==e)this.canbeUsed=!1;else{var t=XianlvModel.MATERIAL_ID[e];t?GameGlobal.XianlvModel.HasXianlv(t)?this.canbeUsed=!0:this.canbeUsed=!1:this.canbeUsed=!0}}else this.canbeUsed=!1},t.prototype.getCanbeUsed=function(){return this.canbeUsed?t.IsNotTimeLimitUse(this.itemConfig):!1},t.IsNotTimeLimitUse=function(e){if(e.useType==ItemUseType.TYPE01&&null!=e.useArg&&null!=e.useArg.timelimit)try{var t=DateUtils.StrToDate(e.useArg.timelimit);if(t&&.001*t.getTime()>=GameServer.serverTime)return!1}catch(i){}var o=XianlvModel.MATERIAL_ID[e.id];return o&&!GameGlobal.XianlvModel.HasXianlv(o)?!1:!0},t}(ItemBaseData);__reflect(ItemData.prototype,"ItemData");var UserBag=function(e){function t(){var i=e.call(this)||this;return i.bagNum=0,i.bagModel={},i.promptList=["","背包满了","不能使用","不能被使用","级别不足","数量不足够","物品已过期","元宝不足"],i.m_ListenerItems={},i._useItemFunc={},i.m_BagItems=[],i.mIsTip=!0,i.m_BagItems.push(new SpeEquipItemEvent),i.bagModel[t.BAG_TYPE_OTHTER]=new UserBagData02,i.bagModel[t.BAG_TYPE_EQUIP]=new UserBagData,i.bagModel[t.BAG_TYPE_TREASUREHUNT]=new UserBagData,i.bagModel[t.BAG_TYPE_ASTROLABE]=new UserBagData02,i.regNetMsg(S2cProtocol.sc_bag_init_data,i.doBagData),i.regNetMsg(S2cProtocol.sc_bag_deal_delete_item,i.doDeleteItem),i.regNetMsg(S2cProtocol.sc_bag_deal_add_item,i.doAddItem),i.regNetMsg(S2cProtocol.sc_bag_update_item_data,i.doUpDataItem),i.regNetMsg(S2cProtocol.sc_bag_deal_valumn_add,i.doBagValumnAdd),i.regNetMsg(S2cProtocol.sc_bag_user_item_back,i.doUserItemBack),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){},t.prototype.AddListenerItem=function(e,t){if(t&&e)if(this.m_ListenerItems[e]){var i=this.m_ListenerItems[e];"string"==typeof i&&(this.m_ListenerItems[e]=[i]),this.m_ListenerItems[e].push(t)}else this.m_ListenerItems[e]=t},t.prototype.NotifyItem=function(e){var t=this.m_ListenerItems[e];if(t){if("string"==typeof t)GameGlobal.MessageCenter.dispatch(t);else for(var i=0,o=t;i<o.length;i++){var n=o[i];GameGlobal.MessageCenter.dispatch(n)}return!0}for(var a=0,r=this.m_BagItems;a<r.length;a++){var n=r[a],s=n.Handle(e);if(s)return GameGlobal.MessageCenter.dispatch(s),!0}return!1},t.prototype.sendAddBagGrid=function(e){var t=new Sproto.cs_bag_add_grid_request;t.bagNum=e,GameSocket.ins().Rpc(C2sProtocol.cs_bag_add_grid,t)},t.prototype.sendUseItem=function(e,t){var i=new Sproto.cs_bag_use_item_request;return i.id=e,i.count=t,GameSocket.ins().Rpc(C2sProtocol.cs_bag_use_item,i),!0},t.prototype.sendUserGoods=function(e,t){},t.prototype.doBagData=function(e){var i=e.code,o=e.type;0==i&&this.bagModel[o].Clear();for(var n,a=e.datas.length,r=0;a>r;r++)n=new ItemData,n.parser(e.datas[r]),this.bagModel[o].Add(n),this.NotifyItem(n.configID);GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE),o==t.BAG_TYPE_EQUIP?this.doBagVolChange(!0):o==t.BAG_TYPE_TREASUREHUNT?GameGlobal.MessageCenter.dispatch(MessageDef.BAG_HUNT_STORE_CHANGE):o==t.BAG_TYPE_OTHTER},t.prototype.doBagVolChange=function(e){void 0===e&&(e=!1),TimerManager.ins().remove(this.isAutoRonglian,this),TimerManager.ins().doTimer(1e3,1,this.isAutoRonglian,this);var t=this.getBagItemNum()/this.getMaxBagRoom()>=GlobalConfig.ins().BagBaseConfig.exceed/100;MessageCenter.ins().dispatch(MessageDef.BAG_ITEM_COUNT_CHANGE,t),t=this.getSurplusCount()<.05*this.getMaxBagRoom(),MessageCenter.ins().dispatch(MessageDef.BAG_WILL_FULL,t,e)},t.prototype.isAutoRonglian=function(){var e=this.bFullBag();FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_BAG_RONG_LIAN)&&e&&this.ronglian()},t.prototype.bFullBag=function(){return this.getBagItemNum()/this.getMaxBagRoom()*100>=GlobalConfig.ins().BagBaseConfig.exceed},t.prototype.ronglian=function(){var e=this.getOutEquips();e.length>0?(this.mIsTip&&(this.mIsTip=!1,UserTips.InfoTip("自动熔炼")),UserEquip.ins().sendSmeltEquip(e),TimerManager.ins().doTimer(1e3,1,this.ronglian,this)):(this.mIsTip=!0,TimerManager.ins().remove(this.ronglian,this))},t.prototype.doUserItemBack=function(e){var t=e.tipIndex;t>0?UserTips.ins().showTips(this.promptList[t]):0==t&&GameGlobal.MessageCenter.dispatch(MessageDef.postUseItemSuccess)},t.prototype.doBagValumnAdd=function(e){var t=GlobalConfig.ins().BagBaseConfig;this.bagNum=e.bagNum*t.rowSize+t.baseSize,GameGlobal.MessageCenter.dispatch(MessageDef.BAG_VOL_ADD)},t.prototype.doDeleteItem=function(e){var i=e.type,o=e.handle,n=(this.bagModel[i],this.bagModel[i].Delete(o));n&&this.NotifyItem(n.configID),i==t.BAG_TYPE_TREASUREHUNT?GameGlobal.MessageCenter.dispatch(MessageDef.BAG_HUNT_STORE_CHANGE):(GameGlobal.MessageCenter.dispatch(MessageDef.DELETE_ITEM),this.doBagVolChange(),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE),i==t.BAG_TYPE_OTHTER&&GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_OTHER_COUNT_CHANGE))},t.prototype.doAddItem=function(e){var i=e.type,o=new ItemData;o.parser(e.data),this.bagModel[i].Add(o),this.NotifyItem(o.configID);var n=e.showTip;n&&(o.itemConfig.quality>=4&&i==t.BAG_TYPE_EQUIP?UserTips.ins().showGoodEquipTips(o):i!=t.BAG_TYPE_TREASUREHUNT&&t.ShowItemTips(o.configID,o.count)),i==t.BAG_TYPE_TREASUREHUNT?GameGlobal.MessageCenter.dispatch(MessageDef.BAG_HUNT_STORE_CHANGE):(this.doBagVolChange(),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE))},t.ShowItemTips=function(e,t){var i=GameGlobal.Config.ItemConfig[e];if(i){var o=ItemBase.QUALITY_COLOR[i.quality],n="获得|C:"+o+"&T:"+i.name+" x "+t+"|",a=ResDataPath.GetItemFullPath(i.icon);UserTips.ins().showContTips(n,a)}},t.prototype.doUpDataItem=function(e){var i=e.type,o=e.handle,n=this.bagModel[i].Update(o,e.num,t.TEMP_DATA),a=t.TEMP_DATA.itemData;t.TEMP_DATA.itemData=null,null!=n&&this.NotifyItem(a.configID);var r=e.showTip;if(r&&n>0&&2!=i){var s=ItemBase.QUALITY_COLOR[a.itemConfig.quality],l="获得|C:"+s+"&T:"+a.itemConfig.name+" x "+n+"|",c=ResDataPath.GetItemFullPath(a.itemConfig.icon);UserTips.ins().showContTips(l,c)}i!=t.BAG_TYPE_TREASUREHUNT&&(this.doBagVolChange(),MessageCenter.ins().dispatch(MessageDef.CHANGE_ITEM),GameGlobal.MessageCenter.dispatch(MessageDef.ITEM_COUNT_CHANGE))},t.prototype.sendGetGoodsByStore=function(e){if(0!=e&&this.getSurplusCount()<1)return void UserTips.ins().showTips("strTips");var t=new Sproto.cs_bag_get_goods_by_store_request;t.uuid=e,GameSocket.ins().Rpc(C2sProtocol.cs_bag_get_goods_by_store,t)},t.prototype.registerUseItemFunc=function(e,t){this._useItemFunc[e]=t},t.prototype.getBagItemById=function(e){return this.bagModel[t.BAG_TYPE_OTHTER].GetById(e)},t.prototype.getBagGoodsByTypeAndId=function(e,t){return this.bagModel[e].GetById(t)},t.prototype.getBagEquipByType=function(e,i){var o=this.bagModel[t.BAG_TYPE_EQUIP].mItems,n=[];for(var a in o)o[a].itemConfig.type==e&&(i?o[a].itemConfig.subType==i&&n.push(o[a]):n.push(o[a]));return n},t.prototype.getBagGoodsByTypeAndSubType=function(e,i){var o=this.bagModel[t.BAG_TYPE_OTHTER],n=[];for(var a in o)o[a].itemConfig.type==e&&o[a].itemConfig.subType==i&&n.push(o[a]);return n},t.prototype.getBagGoodsCountById=function(e,t){var i=this.bagModel[e].GetById(t);return i?i.count:0},t.prototype.GetCount=function(e){return this.getBagGoodsCountById(t.BAG_TYPE_OTHTER,e)},t.prototype.getGoodsAllCountByid=function(e,t){for(var i=this.bagModel[e].GetByIds(t),o=0,n=0,a=i;n<a.length;n++){var r=a[n];o+=r.count}return o},t.prototype.getBagItemNum=function(e){return void 0===e&&(e=1),this.bagModel[e].GetLength()},t.prototype.getSurplusCount=function(){return this.getMaxBagRoom()-this.getBagItemNum()},t.prototype.getMaxBagRoom=function(){var e=0;return GameGlobal.FuliModel.FuliData.month>0&&(e=GameGlobal.Config.WelfareBaseConfig.moncardbag),this.bagNum+GlobalConfig.ins().VipGridConfig[UserVip.ins().lv].grid+e},t.prototype.sort1=function(e,t){var i=ItemConfig.calculateBagItemScore(e),o=ItemConfig.calculateBagItemScore(t);return i>o?-1:o>i?1:0},t.prototype.sort2=function(e,t){var i=ItemConfig.calculateBagItemScore(e),o=ItemConfig.calculateBagItemScore(t);return o>i?-1:i>o?1:0},t.prototype.getBagSortQualityEquips=function(e,i,o,n){void 0===e&&(e=5),void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=null);var a=this.bagModel[t.BAG_TYPE_EQUIP],r=[];for(var s in a.mItems){var l=a.mItems[s];5!=e&&(l.itemConfig.quality>e||i&&l.itemConfig.quality<e)||(null==n||n(l))&&(r[r.length]=l)}return r},t.prototype.getBagSortQualityItem=function(){var e=this.bagModel[t.BAG_TYPE_OTHTER],i=[];for(var o in e.mItems){var n=e.mItems[o];1==n.itemConfig.recycle&&(i[i.length]=n)}return i},t.prototype.SmeltEquip=function(e){if(e){for(var t={},i=0,o=e;i<o.length;i++){var n=o[i],a=n.itemConfig;if(!(a.quality>=4)){var r=t[a.subType];r||(r=t[a.subType]=[]),r.push(n)}}var s=(GameGlobal.actorModel.level,GameGlobal.actorModel.job),l=SubRoles.ins().GetRoleData();if(l){for(var c=l.getEquipLen(),u=[],p=0;c>p;p++){var h=t[p];if(h){var d={},_=l.getEquipByIndex(p),f=0;_.item.itemConfig&&(f=_.item.GetScore());for(var m=0,g=h;m<g.length;m++){var v=g[m],a=v.itemConfig;if(0==a.job||a.job==s){var y=v.GetScore();if(f>=y)u.push(v);else{var C=a.level;d[C]?d[C].GetScore()<y?(u.push(d[C]),d[C]=v):u.push(v):d[C]=v}}else u.push(v)}}}return u}}},t.prototype.SmeltTemplateEquip=function(e,t){var i=GameGlobal.SubRoles.mTemplate[e];if(i&&t){for(var o={},n=0,a=t;n<a.length;n++){var r=a[n],s=o[r.itemConfig.subType];s||(s=o[r.itemConfig.subType]=[]),s.push(r)}for(var l=(i.mLevel,[]),c=0;c<UserTemplate.EQUIP_COUNT;c++){var u=o[c];if(u){var p={},h=i.mEquip[c],d=0;h.itemConfig&&(d=h.GetScore());for(var _=0,f=u;_<f.length;_++){var m=f[_],g=m.itemConfig,v=m.GetScore();if(d>=v)l.push(m);else{var y=g.level;p[y]?p[y].GetScore()<v?(l.push(p[y]),p[y]=m):l.push(m):p[y]=m}}}}return l}},t.prototype.getOutEquips=function(){for(var e=this.getBagSortQualityEquips(5,0,1),t={},i=0,o=e;i<o.length;i++){var n=o[i];if(n.itemConfig){var a=n.itemConfig.type;t[a]||(t[a]=[]),t[a].push(n)}}var r=[],s=this.SmeltEquip(t[0]);s&&(r=r.concat(s));for(var l in t){var a=Number(l);if(a){var c=UserTemplate.GetTemplateTypeByItemType(a);if(c){var u=this.SmeltTemplateEquip(c,t[l]);u&&(r=r.concat(u))}}}return r},t.prototype.getOutItems=function(){for(var e=this.getBagSortQualityItem(),t={},i=0,o=e;i<o.length;i++){var n=o[i];if(n.itemConfig){var a=n.itemConfig.type;t[a]||(t[a]=[]),t[a].push(n)}}var r=[],s=this.SmeltEquip(t[0]);s&&(r=r.concat(s));for(var l in t){var a=Number(l);a&&(r=r.concat(t[l]))}return r},t.prototype.getBagGoodsBySort=function(){var e=this.bagModel[t.BAG_TYPE_OTHTER].mItems,i=[];for(var o in e)i.push(e[o]);var n=i.sort(function(e,t){return e.configID>t.configID?1:e.configID<t.configID?-1:0});return n},t.SortById=function(e,t){return e.configID-t.configID},t.prototype.GetBagStarBySort=function(){var e=this.bagModel[t.BAG_TYPE_ASTROLABE].mItems,i=[];for(var o in e)i.push(e[o]);var n=i.sort(t.SortById);return n},t.prototype.GetBagStarList=function(){return this.bagModel[t.BAG_TYPE_ASTROLABE].mItems},t.prototype.getBagGoodsByType=function(e,i){var o=this.bagModel[t.BAG_TYPE_OTHTER].mItems,n=[];for(var a in o)i?o[a].itemConfig.type==e&&o[a].itemConfig.subType==i&&n.push(o[a]):o[a].itemConfig.type==e&&n.push(o[a]);return n},t.prototype.getBagEquipBySort=function(e){var i=[],o=this.bagModel[t.BAG_TYPE_EQUIP].mItems,n=[];for(var a in o)n.push(o[a]);var r=n.sort(function(e,t){return e.configID>t.configID?1:e.configID<t.configID?-1:0});for(var s in r)GlobalConfig.ins().ItemConfig[r[s].configID].quality==e&&i.push(r[s]);return i},t.prototype.getBagEquipByLevelSort=function(e){var i=[],o=GlobalConfig.ins().ItemConfig;if(this.bagModel[t.BAG_TYPE_EQUIP]){var n=this.bagModel[t.BAG_TYPE_EQUIP].mItems,a=null,r=null;for(var s in n)a=n[s],r=o[a.configID],r.quality==e&&0==r.type&&i.push(a)}return i},t.prototype.getBagGoodsByHandle=function(e,t){return this.bagModel[e].GetByHandle(t)},t.prototype.getIsExitUsedItem=function(){var e=this.bagModel[t.BAG_TYPE_OTHTER];for(var i in e.mItems)if(e.mItems[i].getCanbeUsed())return!0;return!1},t.prototype.getBagGoodsById=function(e,t){return this.bagModel[e].GetById(t)},t.prototype.useRenameItem=function(e,t){},t.prototype.UseCallBoss=function(e,t){},t.prototype.HasOrangeEquip=function(){var e=this.getBagEquipByLevelSort(ITEM_QUALITY.ORANGE_QUALITY);return e.length>0},t.getAttrPower=function(e){for(var t=GlobalConfig.ins().AttrPowerConfig,i=0,o=0;o<e.length;o++){var n=t[e[o].type];n&&(i+=(void 0==e[o].value?0:e[o].value)*n.power)}return Math.floor(i/100)},t.CheckEnough=function(e,i){var o=t.ins().getBagGoodsCountById(0,e);if(i>o){var n=GameGlobal.Config.ItemConfig[e];return n&&UserTips.ins().showTips(n.name+"数量不足"),!1}return!0},t.EMPTY_TABLE=[],t.TEMP_DATA={},t.BAG_TYPE_OTHTER=0,t.BAG_TYPE_EQUIP=1,t.BAG_TYPE_TREASUREHUNT=2,t.BAG_TYPE_ASTROLABE=3,t.BAG_ENOUGH=20,t}(BaseSystem);__reflect(UserBag.prototype,"UserBag");var UserBagData=function(){function e(){this.mItems={},this.m_Length=0}return e.prototype.Clear=function(){this.mItems={},this.m_Length=0},e.prototype.Add=function(e){this.mItems[e.handle]||++this.m_Length,this.mItems[e.handle]=e},e.prototype.Delete=function(e){var t=this.mItems[e];return t?(--this.m_Length,delete this.mItems[e],t):null},e.prototype.Update=function(e,t,i){var o=this.mItems[e];if(o){var n=t-o.count;return o.count=t,i.itemData=o,n}return null},e.prototype.GetById=function(e){for(var t in this.mItems)if(this.mItems[t].configID==e)return this.mItems[t];return null},e.prototype.GetByIds=function(e){var t=[];for(var i in this.mItems)this.mItems[i].configID==e&&t.push(this.mItems[i]);return t},e.prototype.GetByHandle=function(e){return this.mItems[e]},e.prototype.GetLength=function(){return this.m_Length},e}();__reflect(UserBagData.prototype,"UserBagData");var UserBagData02=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_ConfigIds={},t}return __extends(t,e),t.prototype.Clear=function(){e.prototype.Clear.call(this),this.m_ConfigIds={}},t.prototype.Add=function(t){e.prototype.Add.call(this,t),this.m_ConfigIds[t.configID]=t.handle},t.prototype.GetById=function(e){return this.GetByHandle(this.m_ConfigIds[e])},t.prototype.Delete=function(t){var i=e.prototype.Delete.call(this,t);return i&&delete this.m_ConfigIds[i.configID],i},t}(UserBagData);__reflect(UserBagData02.prototype,"UserBagData02");var SpeEquipItemEvent=function(){function e(){}return e.prototype.Handle=function(e){var t=GameGlobal.Config.ItemConfig[e];if(!t)return null;var i=t.type;if(0==i)return MessageDef.BAG_USER_EQUIP_COUNT_UPDATE;if(1==i);else if(ItemConst.ITEM_SHOW_RANK_TYPE[i])return MessageDef.USER_TEMPLATE_EQUIP_UPDATE_+i},e}();__reflect(SpeEquipItemEvent.prototype,"SpeEquipItemEvent",["ISpeItemEvent"]);var BagAddItemWarn=function(e){function t(){var i=e.call(this)||this;return i.onTap=function(e){switch(e.currentTarget){case this.decBtn:this.setCount(Number(this.count.text)-5);break;case this.addBtn:this.setCount(Number(this.count.text)+5);break;case this.sureBtn:if(GameLogic.ins().actorModel.yb<this.price.price){UserTips.ins().showTips("|C:0xff0000&T:元宝不足|");break}UserBag.ins().sendAddBagGrid(Number(this.count.text)/5);case this.cancelBtn:ViewManager.ins().close(t)}},i}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="OpenCellSkin",this.price.setType(MoneyConst.yuanbao)},t.prototype.OnOpen=function(){this.AddClick(this.decBtn,this.onTap),this.AddClick(this.addBtn,this.onTap),this.AddClick(this.sureBtn,this.onTap),this.AddClick(this.cancelBtn,this.onTap),this.commonDialog.OnAdded(this),this.commonDialog.setBgVisible(!0),this.setCount(5)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeEvents()},t.prototype.setCount=function(e){var t=GlobalConfig.ins().BagBaseConfig,i=GlobalConfig.ins().BagExpandConfig,o=CommonUtils.getObjectLength(i),n=(UserBag.ins().bagNum-t.baseSize)/t.rowSize,a=(o-n)*t.rowSize;5>e?(e=5,UserTips.ins().showTips("|C:0xff0000&T:已经是最小扩张数|")):e>a&&(e=a,UserTips.ins().showTips("|C:0xff0000&T:已经是最大扩张数|")),this.count.text=""+e;for(var r=0,s=e/t.rowSize,l=1;s>=l;l++)r+=i[n+l].cost;this.price.setPrice(r)},t}(BaseEuiView);__reflect(BagAddItemWarn.prototype,"BagAddItemWarn"),BagAddItemWarn.LAYER_LEVEL=LayerManager.UI_Popup;var BagMakeEx=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MailSkin",this.viewStack.tabChildren=[TabView.CreateTabViewData(BagMakeExListPanel)],this.commonWindowBg.SetViewStack(this.viewStack),this.commonWindowBg.tabBar.visible=!1,!LocationProperty.NotCustionServer()},t.prototype.OnOpen=function(){this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(BagMakeEx.prototype,"BagMakeEx",["ICommonWindow"]);var BagMakeExItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="BagMakeExItemSkin",t.group.touchChildren=!1,t.group.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data&&this.data.itemConfig&&this.data.itemConfig.name){this.nameLabel.text=this.data.itemConfig.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[this.data.itemConfig.quality],this.itemIcon.setData(this.data.itemConfig);var e=GlobalConfig.ins().EquipConfig[this.data.itemConfig.id];this.lbPower.text="战力: "+ItemConfig.CalcAttrScoreValue(e.attrs)}},t.prototype.OnClick=function(e){this.checkBox.selected=!this.checkBox.selected,this.data.select=this.checkBox.selected},t}(eui.ItemRenderer);__reflect(BagMakeExItem.prototype,"BagMakeExItem");var BagMakeExListPanel=function(e){function t(){var t=e.call(this)||this;return t.tList=[],t.skinName="BagMakeListSkin",t._mails=[],t.listView.itemRenderer=BagMakeExItem,t}return __extends(t,e),t.prototype.OnOpen=function(){this.allReceiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.observe(MessageDef.CHANGE_ITEM,this.UpdateContent),this.observe(MessageDef.BAG_DEAL_SMELT,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){this.allReceiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.CHANGE_ITEM,this.UpdateContent,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.allReceiveBtn:var t=(this.tList,[]);for(var i in this.tList)this.tList[i].select&&t.push(this.tList[i]);t.length?UserEquip.ins().sendSmeltEquip(t):UserTips.ins().showTips("请勾选熔炼装备")}},t.prototype.UpdateContent=function(){var e=UserBag.ins().getBagSortQualityEquips(5,0,1),t=function(e){return e.itemConfig.quality};e.sort(function(e,i){return t(e)-t(i)}),this.tList=[];for(var i=0;12>i;i++)e[i]&&this.tList.push(e[i]);
this.listView.dataProvider=new eui.ArrayCollection(this.tList)},t.NAME="熔炼",t}(BaseView);__reflect(BagMakeExListPanel.prototype,"BagMakeExListPanel",["ICommonWindowTitle"]);var BagWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BagSkin";var t=[TabView.CreateTabViewData(BagEquipTypePanel),TabView.CreateTabViewData(BagItemTypePanel)];Deblocking.IsDeblocking(DeblockingType.TYPE_120)&&t.push(TabView.CreateTabViewData(BagStarTypePanel)),this.viewStack.tabChildren=t,this.commonWindowBg.SetViewStack(this.viewStack)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.viewStack.UpdateTabShowState(3,!1),this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.ITEM_OTHER_COUNT_CHANGE,this.UpdateRedPoint),this.UpdateRedPoint()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.destoryView=function(){},t.prototype.UpdateRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.UserBag.getIsExitUsedItem())},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(BagWin.prototype,"BagWin",["ICommonWindow","ICommonWindowTitle"]);var BagEquipTypePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BagEquipTypeSkin",t.itemScroller.viewport=t.itemList,t.itemList.itemRenderer=BagItemBase,t._AddClick(t.smeltBtn,t.onClick),t._AddClick(t.addBtn,t.onClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.observe(MessageDef.BAG_VOL_ADD,this.SetCount),this.UpdateContent()},t.prototype.UpdateContent=function(){this.itemList.dataProvider=new eui.ArrayCollection(UserBag.ins().getBagSortQualityEquips(5,0,1)),UserBag.ins().getBagItemNum()/UserBag.ins().getMaxBagRoom()>=.8?UIHelper.ShowRedPoint(this.smeltBtn,!0):UIHelper.ShowRedPoint(this.smeltBtn,!1),this.SetCount()},t.prototype.SetCount=function(){this.itemCount.text=UserBag.ins().getBagItemNum()+"/"+UserBag.ins().getMaxBagRoom()},t.prototype.onClick=function(e){switch(e.currentTarget){case this.smeltBtn:ViewManager.ins().close(BagWin),ViewManager.ins().open(SmeltEquipTotalWin);break;case this.addBtn:var t=GlobalConfig.ins().BagBaseConfig,i=(UserBag.ins().bagNum-t.baseSize)/t.rowSize;i==CommonUtils.getObjectLength(GlobalConfig.ins().BagExpandConfig)?UserTips.ins().showTips(StringUtils.addColor("格子不能继续扩张",16711680)):ViewManager.ins().open(BagAddItemWarn)}},t.NAME="装备",t}(BaseView);__reflect(BagEquipTypePanel.prototype,"BagEquipTypePanel",["ICommonWindowTitle"]);var BagItemTypePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BagItemType1Skin",t._AddClick(t.recycleBtn,t.onClick),t.itemListGoods.itemRenderer=BagItemBase,t.itemListGoods.dataProvider=new eui.ArrayCollection,t.itemGoodsScroller.viewport=t.itemListGoods,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.UpdateContent=function(){this.itemListGoods.dataProvider.replaceAll(UserBag.ins().getBagGoodsBySort())},t.prototype.onClick=function(e){switch(e.currentTarget){case this.recycleBtn:ViewManager.ins().close(BagWin),ViewManager.ins().open(SmeltItemTotalWin)}},t.NAME="道具",t}(BaseView);__reflect(BagItemTypePanel.prototype,"BagItemTypePanel",["ICommonWindowTitle"]);var BagStarTypePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BagItemTypeSkin",t.itemListGoods.itemRenderer=BagItemBase,t.itemListGoods.dataProvider=new eui.ArrayCollection,t.itemGoodsScroller.viewport=t.itemListGoods,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.onClick=function(e){e.currentTarget},t.prototype.UpdateContent=function(){this.itemListGoods.dataProvider=new eui.ArrayCollection(UserBag.ins().GetBagStarBySort())},t.NAME="命格",t}(BaseView);__reflect(BagStarTypePanel.prototype,"BagStarTypePanel",["ICommonWindowTitle"]);var EquipDetailedWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="EquipTipsSkin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.setData(i,o)},t.prototype.OnClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.otherClose=function(e){ViewManager.ins().close(t)},t.prototype._SetType=function(e){e&&(this.type.text="部位："+e)},t.prototype._SetLv=function(e,t){e&&(this.lv.text=e)},t.prototype.setData=function(e,t){var i;if(i=GlobalConfig.ins().ItemConfig[e],this.nameLabel.text=i.name,this.nameLabel.textColor=ItemBase.QUALITY_TIP_COLOR[i.quality],this.itemIcon.setData(i),this.imgTipRect.source=ResDataPath.ITEM_TIp_QUALITY[i.quality],t instanceof ItemData||null!=i){var o=void 0;o=GameLogic.ins().actorModel.level<i.lv?Color.Red:Color.Green,i.type==ItemType.EQUIP?(this._SetLv("等级："+i.level+"级",Color.GetStr(o)),this._SetType(Role.getEquipNameByType(i.subType)),this.career.text="职业："+Role.getJobNameByJob(i.job)):(this._SetLv("阶数："+i.level+"阶",Color.GetStr(o)),this._SetType(Role.typeNumberToName2[i.subType]),this.career.text="系统："+ItemConst.TYPE_NAME[i.type])}var n=GlobalConfig.ins().EquipConfig[e],a=AttributeData.getAttStr(n.attrs,1);this.attr.text=a,t&&t.GetScore?(this.score.text="评分: "+t.GetScore(),this.powerLabel.text=t.GetScore()):(this.score.text="评分: "+ItemConfig.CalcAttrScoreValue(n.attrs),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(n.attrs)),t&&t.att&&t.att.length&&this.AddAttrTips("附加属性",t.att),egret.callLater(this.LaterUpdate,this)},t.prototype.AddAttrTips=function(e,t){var i=EquipUserDetailedWin.GetTipsGroup(),o=new eui.Label;o.x=this.attTitleLabel.x,o.y=this.attTitleLabel.y,o.style=this.attTitleLabel.style,o.text=e,i.addChild(o);var n=new eui.Label;n.x=this.attr.x,n.y=this.attr.y,n.style=this.attr.style,i.addChild(n),n.text=AttributeData.getAttStr(t,1),this.forgeGroup.addChild(i)},t.prototype.AddTips=function(e){var t=EquipUserDetailedWin.GetTipsGroup(),i=new eui.Label;i.style=this.attTitleLabel.style,i.x=this.attTitleLabel.x,i.y=this.attTitleLabel.y,i.style=this.attTitleLabel.style,i.textFlow=TextFlowMaker.generateTextFlow(e),t.addChild(i),this.forgeGroup.addChild(t)},t.prototype.LaterUpdate=function(){this.background.height=this.group.height+50},t}(BaseEuiView);__reflect(EquipDetailedWin.prototype,"EquipDetailedWin"),EquipDetailedWin.LAYER_LEVEL=LayerManager.UI_Popup;var EquipUserDetailedWin=function(e){function t(){var t=e.call(this)||this;return t._totalPower=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="EquipUserTipsSkin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],n=e[2];this.roleModel=e[3],this.mConfigId=o,this.mData=n,this.setData(i,o,n),this.AddClick(this,this.CloseSelf),this.AddClick(this.btnShow,this.OnShow);var a=GameGlobal.Config.ItemConfig[o],r=GameGlobal.UserRole.IsOrange(a.subType)?!0:!1;a&&a.quality<4&&GameGlobal.actorModel.level>=40||r?(this.orangeBtn.visible=!0,this.AddClick(this.orangeBtn,this.OnClickOrange),UIHelper.ShowRedPoint(this.orangeBtn,r)):this.orangeBtn.visible=!1},t.prototype.OnClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.CloseSelf,this)},t.prototype.OnClickOrange=function(){var e=GameGlobal.UserRole.IsOrange(GameGlobal.Config.ItemConfig[this.mConfigId].subType);if(!e){var t=40,i=GameGlobal.actorModel.level,o=Math.max(20*Math.floor(i/20),t);e=o}ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_EQUIP],e)},t.prototype.OnShow=function(){if(this.mData&&this.mData.itemConfig){var e=[],t={type:5,value:this.mData.configID,valueEx:this.mData.itemConfig.subType};e.push(t),GameGlobal.Chat.chatShareInfo(2,e)}},t.prototype._SetType=function(e){e&&(this.type.text="部位："+e)},t.prototype._SetLv=function(e,t){e&&t&&(this.lv.text=e+"："+t)},t.prototype.setData=function(e,t,i){var o=GlobalConfig.ins().ItemConfig[t];this.nameLabel.text=o.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[o.quality],this.imgTipRect.source=ResDataPath.ITEM_TIp_QUALITY[o.quality],this.itemIcon.setData(o),this._SetType(Role.getEquipNameByType(o.subType));var n=o.level+"级";this._SetLv("等级",n),this.career.text="职业："+Role.getJobNameByJob(o.job);var a=GlobalConfig.ins().EquipConfig[t],r=AttributeData.getAttStr(a.attrs,1);if(this.attr.text=r,this._totalPower=0,i&&i.GetScore&&(this._totalPower=i.GetScore(),this.score.text="评分: "+this._totalPower),this.roleModel)for(var s=this.roleModel.getEquipLen(),l=0;s>l;l++){var c=this.roleModel.getEquipByIndex(l);if(t&&c.item.configID==t){this.SetInjectSoulAttr(c,l),this.setForge(c,l);break}}this.powerLabel.text=this._totalPower,egret.callLater(this.LaterUpdate,this)},t.prototype.LaterUpdate=function(){this.background.height=this.group.height+50},t.prototype.setForge=function(e,t){for(var i=0;4>i;i++){var o=e.GetForgeValue(i);if(o>0){var n=GameGlobal.ForgeModel.GetForgeConfigByPos(t,o,i);if(n){this.addTips(n.attr,i,o);var a=Math.floor(UserBag.getAttrPower(n.attr));this._totalPower+=a}}}},t.GetTipsGroup=function(){var e=new eui.Group;e.percentWidth=100;var t=new eui.Image;return t.source="ui_bm_tipsfengexian",t.left=5,t.right=5,e.addChild(t),e},t.prototype.addTips=function(e,i,o){var n=t.GetTipsGroup(),a=new eui.Label;a.x=this.attTitleLabel.x,a.y=this.attTitleLabel.y,a.style=this.attTitleLabel.style,n.addChild(a);var r=new eui.Label;r.x=this.attr.x,r.y=this.attr.y,r.style=this.attr.style,n.addChild(r),this.forgeGroup.addChild(n);var s;switch(i){case ForgeType.BOOST:a.text="强化属性",s=AttributeData.getAttrStrAdd(e,11);break;case ForgeType.REFINE:a.text="精炼属性",s=AttributeData.getAttrStrAdd(e,11);break;case ForgeType.EXERCISE:a.text="锻炼属性",s=AttributeData.getAttrStrAdd(e,11);break;case ForgeType.GEM:a.text="宝石属性";for(var l="",c=1;5>c;c++){var u=new eui.Image;u.x=r.x,u.y=r.y+28*(c-1),u.width=u.height=24,n.addChild(u);var p=AttributeData.getAttrStrByType(e[0].type),h=ForgeGemPanel.GetLen(e);h>c?(l+="|C:0x2ECA22&T:Lv10|\n",o-=10,u.source=ForgeGemPanel.GetImg(e[0].type,10)):h==c?(l+=10==o?"|C:0x2ECA22&T:Lv10|\n":"Lv"+o,u.source=ForgeGemPanel.GetImg(e[0].type,o)):(5>c&&(l+="\n|C:0x909090&T:"),l+=p+"宝石 未激活|",u.source="bs_00")}r.lineSpacing=8;var d=new eui.Label;d.size=20,d.lineSpacing=8,d.x=r.x+26,d.y=r.y,d.textFlow=TextFlowMaker.generateTextFlow(l),n.addChild(d),r.x=d.x+58,r.height=d.height,s=AttributeData.getAttrStrAdd(e,15);for(var _=[],f=0;f<s.length;f++)s[f].value&&_.push(s[f]);s=_}r.text=AttributeData.getAttStr(s,1)},t.prototype.SetInjectSoulAttr=function(e,i){if(DeityEquipConst.IsDeityEquip(e.item.configID)&&0!=e.deityEquipData.injectLevel){var o=e.deityEquipData.injectLevel,n=GameGlobal.Config.DeitySpiritConfig[i][o-1];if(n){var a=t.GetTipsGroup(),r=new eui.Label;r.x=this.attTitleLabel.x,r.y=this.attTitleLabel.y,r.style=this.attTitleLabel.style,a.addChild(r);var s=new eui.Label;s.x=this.attr.x,s.y=this.attr.y,s.style=this.attr.style,a.addChild(s),this.forgeGroup.addChild(a),r.text="注灵属性",s.text=AttributeData.getAttStr(n.attrpower,1)}}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(EquipUserDetailedWin.prototype,"EquipUserDetailedWin");var ItemAuctionTipsWin=function(e){function t(){var t=e.call(this)||this;return t.itemid=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ItemAuctionTipsSkin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.itemid=e[1],this.AddClick(this.colorCanvas,this.CloseSelf),this.AddClick(this.useBtn,this.onTap),this.setData(i,this.itemid)},t.prototype.OnClose=function(){this.removeEvents()},t.prototype.onTap=function(e){UserBag.ins().sendUseItem(this.itemid,1)&&this.CloseSelf()},t.prototype.setData=function(e,t){var i=UserBag.ins().getBagGoodsByTypeAndId(e,t),o=GlobalConfig.ins().ItemConfig[t];this.nameLabel.text=o.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[o.quality],this.itemIcon.setData(o),this.num.text="数量："+i.count,this.description.textFlow=TextFlowMaker.generateTextFlow(o.desc)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ItemAuctionTipsWin.prototype,"ItemAuctionTipsWin");var ItemDetailedWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ItemTipsSkin",this.jobLabel1.visible=!1},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],n=e[2];this.addEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this),this.setData(i,o,n)},t.prototype.OnClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.otherClose=function(e){ViewManager.ins().close(this)},t.prototype.setData=function(e,t,i){var o="";if(void 0==i){var n=UserBag.ins().getBagGoodsByTypeAndId(e,t);n&&n.count&&(o=n.count+"")}else o=i+"";var a=GlobalConfig.ins().ItemConfig[t];if(a.name?this.nameLabel.text=a.name:this.nameLabel.text="",this.nameLabel.textColor=ItemBase.QUALITY_COLOR[a.quality],this.itemIcon.setData(a),a.level?this.lv.text="等级："+a.level+"级":this.lv.text="",a.type==ItemType.DESTINY){var r=a.desc+"\n",s=GameGlobal.Config.DestinyAttrsConfig[t];s&&(r+=AttributeData.getAttStr(s.attars,1,1,"+",!1,"00fc06&","        ")),this.description.textFlow=TextFlowMaker.generateTextFlow(r)}else this.description.textFlow=TextFlowMaker.generateTextFlow(a.desc);2==a.type||(this.power.text=""),this.num.text="数量："+o,""==this.power.text&&(this.powerLabel.visible=!1,this.powerLabel.y=0,this.lineImg.y=140),egret.callLater(this.LaterUpdate,this)},t.prototype.LaterUpdate=function(){this.group1.height=this.group2.height+37},t}(BaseEuiView);__reflect(ItemDetailedWin.prototype,"ItemDetailedWin"),ItemDetailedWin.LAYER_LEVEL=LayerManager.UI_Popup;var ItemUseTipsWin=function(e){function t(){var t=e.call(this)||this;return t.maxNum=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ItemUseTipsSkin",this.numLabel.restrict="0-9",this.addHeight=this.add.height},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.goodsId=o,this.AddClick(this.dialogMask,this.CloseSelf),this.minBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.maxBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.btnLessTen.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.btnAddTen.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.sub1Btn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.add1Btn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.useBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.observe(MessageDef.postUseItemSuccess,this.useSuccess),this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this.useNum=1,this.numLabel.text=this.useNum+"",this.setData(i,o)},t.prototype.OnClose=function(){this.minBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.maxBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.btnLessTen.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.btnAddTen.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.sub1Btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.add1Btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.useBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTap,this),this.numLabel.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this),MessageCenter.ins().removeAll(this)},t.prototype.onTxtChange=function(e){var t=Number(this.numLabel.text);t>this.maxNum&&(t=this.maxNum),this.useNum=t,this.numLabel.text=this.useNum+""},t.prototype.onTap=function(e){switch(e.target){case this.minBtn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.maxBtn:this.useNum+=1,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.btnLessTen:this.useNum=1;break;case this.btnAddTen:this.useNum=this.maxNum;break;case this.sub1Btn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:UserBag.ins().sendUseItem(this.goodsId,this.useNum)&&ViewManager.ins().close(t)}this.numLabel.text=this.useNum+""},t.prototype.useSuccess=function(){var e=UserBag.ins().getBagItemById(this.goodsId);e?(this.setData(0,this.goodsId),this.onTxtChange(null)):ViewManager.ins().close(t)},t.prototype.setData=function(e,t){var i="",o=UserBag.ins().getBagGoodsByTypeAndId(e,t);this.maxNum=o.count,i=o.count+"";var n=GlobalConfig.ins().ItemConfig[t];this.nameLabel.text=n.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[n.quality],this.itemIcon.setData(n),this.lv.text="等级："+n.level+"级",this.num.text="数量："+i,this.description.textFlow=TextFlowMaker.generateTextFlow(n.desc),egret.callLater(this._UpdateLayout,this)},t.prototype._UpdateLayout=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ItemUseTipsWin.prototype,"ItemUseTipsWin");var SmeltEquipItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.clear(),this.data instanceof ItemData?(this.itemConfig=this.data.itemConfig,this.itemIcon.setData(this.itemConfig),this.nameTxt.textColor=Color.l_normal,4==this.itemConfig.type?this.nameTxt.text=this.itemConfig.name:this.nameTxt.text=this.itemConfig.zsLevel>0?this.itemConfig.zsLevel+"阶":"lv."+this.itemConfig.level):this.itemIcon.setItemImg("ui_bt_plue3")},t.prototype.onClick=function(){},t.prototype.playEff=function(){this.data&&UIHelper.PlayBoomEff(this)},t.prototype.clear=function(){e.prototype.clear.call(this),this.itemIcon.setItemImg("ui_bt_plue3")},t}(ItemBase);__reflect(SmeltEquipItem.prototype,"SmeltEquipItem");var SmeltEquipNormalPanel=function(e){function t(){var t=e.call(this)||this;return t.viewIndex=0,t}return __extends(t,e),t.prototype.UpdateContent=function(){this.setItemData()},t.prototype.GetGuideTarget=function(){return e={},e[1]=this.smeltBtn2,e;var e},t.prototype.childrenCreated=function(){this.smeltEquips=[],this.smeltEquips.length=Const.SMELT_COUNT,this.itemList.itemRenderer=SmeltEquipItem,this.dataInfo=new eui.ArrayCollection(this.smeltEquips),this.itemList.dataProvider=this.dataInfo},t.prototype.OnOpen=function(){this.smeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.smeltBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this._AddItemClick(this.itemList,this.onListViewClick),this.autocheck.addEventListener(egret.Event.CHANGE,this.chage,this),this.group.visible=!0,this.observe(MessageDef.BAG_DEAL_SMELT,this.smeltComplete),this.observe(MessageDef.postEquipCheckList,this.setItemList),this.autocheck.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_BAG_RONG_LIAN)},t.prototype.OnClose=function(){this.smeltBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.smeltComplete=function(){for(var e=this.itemList.numChildren;e--;)this.itemList.getChildAt(e).playEff();this.setItemData()},t.prototype.setItemData=function(){this.smeltEquips=this.getSmeltData(),this.dataInfo.replaceAll(this.smeltEquips)},t.prototype.getSmeltData=function(e){void 0===e&&(e=1);var t=e||1,i=UserBag.ins().getOutEquips(),o=Const.SMELT_COUNT;return 2==t&&(o=Const.SMELT_LARGE_COUNT),i.length<o?this.creatListLength(i,o):i.length>o&&(i=i.slice(0,o)),i},t.prototype.creatListLength=function(e,t){if(e.length<t)for(var i=0;t>i;i++)void 0==e[i]&&(e[i]=null)},t.prototype.setItemList=function(e){this.dataInfo.replaceAll(e),this.itemList.dataProvider=this.dataInfo},t.prototype.chage=function(){Deblocking.Check(1)?FuncOpenModel.SetData(FuncOpenModel.SAVE_BAG_RONG_LIAN,this.autocheck.selected):this.autocheck.selected=!1},t.prototype.onListViewClick=function(e){var t=e.item;if(!t){var i=UserBag.ins().getBagSortQualityEquips(5,0,0);i.length>0?ViewManager.ins().open(BagMakeEx):UserTips.ins().showTips("|C:0xff0000&T:当前没有可熔炼的装备|")}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.smeltBtn:UserEquip.ins().sendSmeltEquip(this.smeltEquips);break;case this.smeltBtn2:UserEquip.ins().sendSmeltEquip(this.getSmeltData(2))}},t.NAME="普通装备",t}(BaseView);__reflect(SmeltEquipNormalPanel.prototype,"SmeltEquipNormalPanel",["ICommonWindowTitle"]);var SmeltEquipTotalWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="SmeltMainViewSkin",this.viewStack.tabChildren=[TabView.CreateTabViewData(SmeltEquipNormalPanel,{skinName:"SmeltMainSkin"})],this.commonWindowBg.SetViewStack(this.viewStack)},t.getSubViewByIndex=function(e){return ViewManager.ins().getView(t).getSubViewByIndex(e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.commonWindowBg.SetViewStack(this.viewStack),this.commonWindowBg.OnAdded(this,i),this.itemUpdate()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.itemUpdate=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.EQUIP=0,t.RONG_LU=1,t.HERO=2,t.PET=3,t}(BaseEuiView);__reflect(SmeltEquipTotalWin.prototype,"SmeltEquipTotalWin",["ICommonWindow"]),SmeltEquipTotalWin.LAYER_LEVEL=LayerManager.UI_Main;var SmeltItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.clear(),this.data instanceof ItemData?(this.itemConfig=this.data.itemConfig,this.itemIcon.setData(this.itemConfig),this.nameTxt.textColor=Color.l_normal,this.nameTxt.text=this.itemConfig.name,this.count.text=this.data.count+""):this.itemIcon.setItemImg("ui_bt_plue3")},t.prototype.onClick=function(){},t.prototype.playEff=function(){this.data&&UIHelper.PlayBoomEff(this)},t.prototype.clear=function(){e.prototype.clear.call(this),this.itemIcon.setItemImg("ui_bt_plue3")},t}(ItemBase);__reflect(SmeltItem.prototype,"SmeltItem");var SmeltItemNormalPanel=function(e){function t(){var t=e.call(this)||this;return t.viewIndex=0,t}return __extends(t,e),t.prototype.UpdateContent=function(){this.setItemData()},t.prototype.GetGuideTarget=function(){return e={},e[1]=this.smeltBtn2,e;var e},t.prototype.childrenCreated=function(){this.smeltEquips=[],this.smeltEquips.length=Const.RECYCLE_COUNT,this.itemList.itemRenderer=SmeltItem,this.dataInfo=new eui.ArrayCollection(this.smeltEquips),this.itemList.dataProvider=this.dataInfo},t.prototype.OnOpen=function(){this.smeltBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.smeltBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this._AddItemClick(this.itemList,this.onListViewClick),this.observe(MessageDef.BAG_DEAL_RECYCLE,this.smeltComplete),this.observe(MessageDef.postItemCheckList,this.setItemList)},t.prototype.OnClose=function(){this.smeltBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.smeltComplete=function(){for(var e=this.itemList.numChildren;e--;)this.itemList.getChildAt(e).playEff();this.setItemData()},t.prototype.setItemData=function(){this.smeltEquips=this.getRecycleData(),this.dataInfo.replaceAll(this.smeltEquips)},t.prototype.getRecycleData=function(e){void 0===e&&(e=1);var t=e||1,i=UserBag.ins().getOutItems(),o=Const.RECYCLE_COUNT;return 2==t&&(o=Const.SMELT_LARGE_COUNT),i.length<o?this.creatListLength(i,o):i.length>o&&(i=i.slice(0,o)),i},t.prototype.creatListLength=function(e,t){if(e.length<t)for(var i=0;t>i;i++)void 0==e[i]&&(e[i]=null)},t.prototype.setItemList=function(e){this.dataInfo.replaceAll(e),this.itemList.dataProvider=this.dataInfo},t.prototype.onListViewClick=function(e){var t=e.item;t||UserTips.ins().showTips("|C:0xff0000&T:当前没有可回收的道具|")},t.prototype.onTap=function(e){switch(e.currentTarget){case this.smeltBtn:UserEquip.ins().sendSmeltIteam(this.smeltEquips);break;case this.smeltBtn2:UserEquip.ins().sendSmeltIteam(this.getRecycleData(2))}},t.NAME="回收道具",t}(BaseView);__reflect(SmeltItemNormalPanel.prototype,"SmeltItemNormalPanel",["ICommonWindowTitle"]);var SmeltItemTotalWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="SmeltItemMainViewSkin",this.viewStack.tabChildren=[TabView.CreateTabViewData(SmeltItemNormalPanel,{skinName:"SmeltItemMainSkin"})],this.commonWindowBg.SetViewStack(this.viewStack)},t.getSubViewByIndex=function(e){return ViewManager.ins().getView(t).getSubViewByIndex(e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.commonWindowBg.SetViewStack(this.viewStack),this.commonWindowBg.OnAdded(this,i),this.itemUpdate()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.itemUpdate=function(){},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.EQUIP=0,t.RONG_LU=1,t.HERO=2,t.PET=3,t}(BaseEuiView);__reflect(SmeltItemTotalWin.prototype,"SmeltItemTotalWin",["ICommonWindow"]),SmeltItemTotalWin.LAYER_LEVEL=LayerManager.UI_Main;var SmeltSelectItem=function(e){function t(){var t=e.call(this)||this;return t.translate={hp:AttributeType.atMaxHp,atk:AttributeType.atAttack,def:AttributeType.atDef,crit:AttributeType.atCrit,tough:AttributeType.atTough},t.skinName="SmeltSeletctItemSkin",t.touchChildren=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dataChanged=function(){if(this.data instanceof ItemData){var e=this.data;if(this.itemConfig=e.itemConfig,this.arrowIcon.visible=!1,!this.itemConfig)return;this.itemIcon.setData(this.itemConfig),4==this.itemConfig.type?(this.updateWingEquip(),this.lvLabel.text=this.itemConfig.name):0==this.itemConfig.type?this.lvLabel.text=this.itemConfig.zsLevel?this.itemConfig.zsLevel+"阶":"lv."+this.itemConfig.level:this.lvLabel.text="",this.nameLabel.textColor=ItemBase.QUALITY_COLOR[this.itemConfig.quality],this.nameLabel.text=this.itemConfig.name,this.gradeLabel.text="评分："+ItemConfig.calculateBagItemScore(e),this.attrLabel.text=AttributeData.getAttrInfoByItemData(e)}},t.prototype.updateWingEquip=function(){},t}(eui.ItemRenderer);__reflect(SmeltSelectItem.prototype,"SmeltSelectItem");var SmeltSelectWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="SmeltSelectSkin",this.itemList.itemRenderer=SmeltSelectItem,this.itemScroller.viewport=this.itemList,this.checkList=[]},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.len=e[1],this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.itemList.dataProvider=new eui.ArrayCollection(e[0]),this.setSmeltEquipList(e[2])},t.prototype.OnClose=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.foolChecklist(),MessageCenter.ins().removeAll(this),GameGlobal.MessageCenter.dispatch(MessageDef.postEquipCheckList,this.checkList)},t.prototype.onItemTap=function(e){var i=e.itemRenderer;if(i.checkBoxs.selected||!(this.checkList.length>=this.len)){i.checkBoxs.selected=!i.checkBoxs.selected;var o=this.itemList.selectedItem;if(i.checkBoxs.selected){if(this.checkList[this.checkList.length]=o,this.checkList.length==this.len)return GameGlobal.MessageCenter.dispatch(MessageDef.postEquipCheckList,this.checkList),void ViewManager.ins().close(t)}else{var n=this.checkList.indexOf(o);if(0>n)return;this.checkList.splice(n,1)}this.setCountLabel(this.checkList.length)}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:GameGlobal.MessageCenter.dispatch(MessageDef.postEquipCheckList,this.checkList),ViewManager.ins().close(t)}},t.prototype.setSmeltEquipList=function(e){var t=this;this.checkList=e,this.checkListData(),this.setCountLabel(this.checkList.length),TimerManager.ins().doFrame(60,1,function(){for(var e=0;e<t.checkList.length;e++)for(var i=0;i<t.itemList.numElements;i++){var o=t.itemList.getElementAt(i);if(t.checkList[e]&&t.checkList[e].handle==o.data.handle){t.checkList.length<=t.len&&(t.checkList[e]=o.data,o.checkBoxs.selected=!0);break}}},this)},t.prototype.setCountLabel=function(e){this.countLabel.text=e+"/"+this.len},t.prototype.checkListData=function(){for(var e=this.checkList.length,t=e-1;t>=0;t--)null==this.checkList[t]&&this.checkList.splice(t,1)},t.prototype.foolChecklist=function(){for(var e=this.checkList.length,t=0;t<this.len;t++)t>=e&&this.checkList.push(null)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(SmeltSelectWin.prototype,"SmeltSelectWin");var Enum_BOSSTYPE;!function(e){e[e.field_boss=1]="field_boss",e[e.public_boss=2]="public_boss",e[e.person_boss=3]="person_boss",e[e.vip_boss=4]="vip_boss"}(Enum_BOSSTYPE||(Enum_BOSSTYPE={}));var BossModel=function(e){function t(){var t=e.call(this)||this;return t.m_FieldBossInfo=[],t.m_PublicBossInfo=[],t.m_VipBossInfo=[],t.pBossChallengenum=0,t.pBossRecovertiem=0,t.purchasecount=0,t.reborncount=0,t.m_OpenTime=null,t.mIsChallengeTime={mTime:-1e3,mIsChallenge:!1},t.mRedPoint=new BossModelRedPoint,t}return __extends(t,e),t.prototype.Init=function(){var e=GameGlobal.Config.FieldBossConfig;for(var t in e){var i=e[t],o=new FieldBossInfo;o.id=i.id,o.level=i.level,o.hp=0,o.ownerName="",o.ownerGuildName="",o.ownerHeadId=UIHelper.DEFUALT_HEAD_ID,o.status=FieldBossState.CLOSE,o.leftTime=0,this.m_FieldBossInfo.push(o)}e=GameGlobal.Config.PublicBossConfig;for(var t in e){var i=e[t],o=new PublicBossInfo;o.id=i.id,o.level=i.level,o.hp=0,o.status=FieldBossState.CLOSE,this.m_PublicBossInfo.push(o)}e=GameGlobal.Config.VipBossConfig;for(var n in e){var a=new VipBossInfo;a.initLocalData(e[n]),this.m_VipBossInfo.push(a)}SortTools.sortMap(this.m_PublicBossInfo,"id",!0),SortTools.sortMap(this.m_FieldBossInfo,"id",!0),this.regNetMsg(S2cProtocol.sc_field_boss_base_list,this._DoBossList),this.regNetMsg(S2cProtocol.sc_field_boss_update_one,this._UpdateFieldBoss),this.regNetMsg(S2cProtocol.sc_public_boss_base_list,this._DoPublicList),this.regNetMsg(S2cProtocol.sc_public_boss_update_one,this._DoUpdatePublicBossOne),this.regNetMsg(S2cProtocol.sc_public_boss_update_challenge,this._DoUpdatePublicBossChallenge),this.regNetMsg(S2cProtocol.sc_public_boss_record_attack,this._DoPublicBossRecord),this.regNetMsg(S2cProtocol.sc_public_boss_record_kill,this._DoPublicBossKillRecord),this.regNetMsg(S2cProtocol.sc_public_boss_challenge_fail,this._DoPublicBossChallengeResult),this.regNetMsg(S2cProtocol.sc_public_boss_update_attack,this._DoPublicBossUpdateAtk),this.regNetMsg(S2cProtocol.sc_vipboss_base_list,this.vipBossBase),this.regNetMsg(S2cProtocol.sc_vipboss_update_one,this.vipBossUpdateOne)},t.prototype.getRemindByIndex=function(e){return 1==(this.bossRemind>>e+1&1)},t.prototype.setRemind=function(e){this.bossRemind^=e,this.sendSaveRemind()},t.prototype.GetBossInfoById=function(e,t){if(e==Enum_BOSSTYPE.field_boss)for(var i=0,o=this.m_FieldBossInfo;i<o.length;i++){var n=o[i];
if(n.id==t)return n}else if(e==Enum_BOSSTYPE.public_boss)for(var a=0,r=this.m_PublicBossInfo;a<r.length;a++){var n=r[a];if(n.id==t)return n}return null},t.prototype.GetBossInfos=function(e){return e==Enum_BOSSTYPE.field_boss?this.m_FieldBossInfo:e==Enum_BOSSTYPE.public_boss?this.m_PublicBossInfo:void 0},t.prototype.getVipBossInfo=function(){return this.m_VipBossInfo},t.prototype.GetNextRefreshTime=function(){var e=this.GetOpenTime(),t=1e3*GameServer.serverTime;if(t>=e.mCloseStart&&t<=e.mCloseEnd){var i=GameGlobal.Config.FieldBossCommonConfig,o=i.refreshtime,n=parseInt(o[0]);return"0"+n+":00:00"}var a=new Date(1e3*GameServer.serverTime),r=a.getHours(),s=a.getMinutes();return 30>s?s=30:(r+=1,s=0),DateUtils.formatTimeNum(r)+":"+DateUtils.formatTimeNum(s)+":00"},t.prototype.GetRunTime=function(){var e=this.GetOpenTime(),t=1e3*GameServer.serverTime;if(t>=e.mCloseStart&&t<=e.mCloseEnd){var i=GameGlobal.Config.FieldBossCommonConfig,o=i.refreshtime,n=parseInt(o[0]);return"0"+n+":00:00"}var a=new Date(1e3*GameServer.serverTime),r=a.getHours(),s=a.getMinutes();return s=30>s?25:55,DateUtils.formatTimeNum(r)+":"+DateUtils.formatTimeNum(s)+":00"},t.prototype.OnDayTimer=function(){this.m_OpenTime=null},t.prototype.GetOpenTime=function(){if(null==this.m_OpenTime){var e=new Date(1e3*GameServer.serverTime);e.setHours(8,0,0,0);var t=new Date(1e3*GameServer.serverTime);t.setDate(t.getDate()+1),t.setHours(2,25,0,0);var i=new Date(1e3*GameServer.serverTime);i.setHours(2,25,0,0);var o=new Date(1e3*GameServer.serverTime);o.setHours(8,0,0,0),this.m_OpenTime={mStart:e.getTime(),mEnd:t.getTime(),mCloseStart:i.getTime(),mCloseEnd:o.getTime()}}return this.m_OpenTime},t.prototype.IsRun=function(){for(var e=0,t=this.m_FieldBossInfo;e<t.length;e++){var i=t[e];if(i.status==FieldBossState.RUN)return!0}return!1},t.prototype.GetRunLeftTime=function(){var e=1e3*GameServer.serverTime,t=new Date(e),i=t.getMinutes(),o=GameGlobal.Config.FieldBossCommonConfig;return 30>i?t.setMinutes(o.escapetime,0,0):t.setMinutes(o.escapetime+30,0,0),t.getTime()-e},t.prototype._IsChallengeTime=function(){this.mIsChallengeTime.mTime=egret.getTimer();var e=this.GetOpenTime(),t=1e3*GameServer.serverTime;if(t>=e.mCloseStart&&t<=e.mCloseEnd)return!1;var i=new Date(1e3*GameServer.serverTime),o=(i.getHours(),i.getMinutes()),n=GameGlobal.Config.FieldBossCommonConfig;return 30>o?o<n.escapetime:o<n.escapetime+30},t.prototype.IsChallengeTime=function(){var e=egret.getTimer(),t=this.mIsChallengeTime;return e-t.mTime>1e3&&(t.mTime=e,t.mIsChallenge=this._IsChallengeTime()),t.mIsChallenge},t.prototype.buyFunc=function(){var e="花费|C:0xd27701&T:"+GameGlobal.Config.PublicBossBaseConfig.cost+"元宝|购买|C:0x0fc06&T:"+GameGlobal.Config.PublicBossBaseConfig.income+"次|挑战次数\r";e+="剩余|C:0x0fc06&T:"+(GameGlobal.Config.VipChallengeTimesConfig[GameGlobal.actorModel.vipLv].buychasingtimes-this.purchasecount)+"|次\r";var t=GameGlobal.Config.VipChallengeTimesConfig[GameGlobal.actorModel.vipLv+1];t&&(e+="|C:0x0fc06&T:vip"+(GameGlobal.actorModel.vipLv+1)+"|每天可购买|C:0x0fc06&T:"+t.buychasingtimes+"|次"),WarnWin.show(e,this.onBuy,this)},t.prototype.onBuy=function(){return GameGlobal.Config.VipChallengeTimesConfig[GameGlobal.actorModel.vipLv].buychasingtimes-this.purchasecount<=0?void UserTips.InfoTip("购买次数已达上限"):void(Checker.Money(MoneyConst.yuanbao,GameGlobal.Config.PublicBossBaseConfig.cost,!0)&&GameGlobal.BossModel.sendBuyChallege())},t.prototype._DoBossList=function(e){for(var t=0,i=e.bossInfos;t<i.length;t++){var o=i[t],n=this.GetBossInfoById(Enum_BOSSTYPE.field_boss,o.id);n?(n.hp=o.hp,n.status=o.status,n.ownerId=o.ownerId,n.ownerName=o.ownerName,n.ownerHeadId=10*o.ownerJob+o.ownerSex,n.leftTime=o.time||0,n.ischallenge=o.ischallenge||!1):console.error("not boss id => "+o.id)}GameGlobal.MessageCenter.dispatch(MessageDef.FIELD_BOSS_UPDATE)},t.prototype._UpdateFieldBoss=function(e){var t=e.bossInfo,i=this.GetBossInfoById(Enum_BOSSTYPE.field_boss,t.id);i?(i.hp=t.hp,i.status=t.status,i.ownerId=t.ownerId,i.ownerName=t.ownerName,i.ownerHeadId=10*t.ownerJob+t.ownerSex,i.leftTime=t.time||0,i.ischallenge=t.ischallenge||!1):console.error("not boss id => "+t.id),GameGlobal.MessageCenter.dispatch(MessageDef.FIELD_BOSS_UPDATE)},t.prototype._DoPublicList=function(e){for(var t=0,i=e.bossInfos;t<i.length;t++){var o=i[t],n=this.GetBossInfoById(Enum_BOSSTYPE.public_boss,o.id);n?n.parser(o):console.error("not boss id => "+o.id)}GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_UPDATE)},t.prototype._DoUpdatePublicBossOne=function(e){var t=this.GetBossInfoById(Enum_BOSSTYPE.public_boss,e.bossInfo.id);t&&t.parser(e.bossInfo),GameGlobal.BossModel.getRemindByIndex(e.bossInfo.id-1)&&e.bossInfo.reborn&&GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_REBORN,e.bossInfo.id,!0),GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_UPDATE)},t.prototype._DoUpdatePublicBossChallenge=function(e){this.pBossChallengenum=e.challengenum,this.pBossRecovertiem=e.recovertiem,this.purchasecount=e.purchasecount,this.reborncount=e.reborncount,this.bossRemind=e.rebornmark,GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_UPDATE)},t.prototype._DoPublicBossRecord=function(e){SortTools.sortMap(e.attackinfos,"injure",!1),GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_RECORD,[e.rank,e.attackinfos])},t.prototype._DoPublicBossKillRecord=function(e){SortTools.sortMap(e.killinfos,"killtime",!1),GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_RECORD_KILL,e.killinfos)},t.prototype._DoPublicBossUpdateAtk=function(e){this.mPubBossAtkInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_UPDATE_ATK)},t.prototype.ClearPubBossAtkInfo=function(){this.mPubBossAtkInfo=null},t.prototype._DoPublicBossChallengeResult=function(e){UserTips.ErrorTip("挑战失败，BOSS已经死亡")},t.prototype.vipBossBase=function(e){for(var t in this.m_VipBossInfo){var i=this.m_VipBossInfo[t];for(var o in e.bossInfos)i.id==e.bossInfos[o].id&&i.updataDataByServer(e.bossInfos[o])}GameGlobal.MessageCenter.dispatch(MessageDef.VIP_BOSS_UPDATE)},t.prototype.vipBossUpdateOne=function(e){for(var t in this.m_VipBossInfo){var i=this.m_VipBossInfo[t];i.id==e.bossInfo.id&&i.updataDataByServer(e.bossInfo)}GameGlobal.MessageCenter.dispatch(MessageDef.VIP_BOSS_UPDATE)},t.prototype.sendCallFieldBossList=function(){this.Rpc(C2sProtocol.cs_field_boss_boss_list)},t.prototype.sendChallenge=function(e){var t=new Sproto.cs_field_boss_challenge_request;t.id=e,this.Rpc(C2sProtocol.cs_field_boss_challenge,t)},t.prototype.sendBuyChallege=function(){this.Rpc(C2sProtocol.cs_public_boss_buy_challenge)},t.prototype.sendPublicChallenge=function(e){var t=new Sproto.cs_public_boss_challenge_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_challenge,t)},t.prototype.sendPublicReBornChallenge=function(e){var t=new Sproto.cs_public_boss_challenge_reborn_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_challenge_reborn,t)},t.prototype.sendPublicRecord=function(e){var t=new Sproto.cs_public_boss_record_attack_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_record_attack,t)},t.prototype.sendPublicKillRecord=function(e){var t=new Sproto.cs_public_boss_record_kill_request;t.id=e,this.Rpc(C2sProtocol.cs_public_boss_record_kill,t)},t.prototype.sendSaveRemind=function(){var e=new Sproto.cs_public_boss_reborn_mark_request;e.rebornmark=this.bossRemind,this.Rpc(C2sProtocol.cs_public_boss_reborn_mark,e)},t.prototype.sendCallVipBossList=function(){this.Rpc(C2sProtocol.cs_vipboss_list)},t.prototype.sendVipbossChallenge=function(e){if(e){var t=new Sproto.cs_vipboss_challenge_request;t.id=e,this.Rpc(C2sProtocol.cs_vipboss_challenge,t)}},t.prototype.IsPublicBossNotice=function(){if(!Deblocking.IsDeblocking(DeblockingType.TYPE_45))return!1;if(this.pBossChallengenum<=0)return!1;for(var e=this.m_PublicBossInfo,t=0,i=e;t<i.length;t++){var o=i[t];if(GameGlobal.actorModel.level>=o.level&&!o.isKill)return!0}return!1},t.prototype.IsFieldBossNotice=function(){for(var e=this.m_FieldBossInfo,t=0,i=e;t<i.length;t++){var o=i[t],n=GameGlobal.Config.FieldBossConfig[o.id];if(!(n&&n.needbossprops&&GameGlobal.UserBag.GetCount(n.needbossprops.id)<n.needbossprops.count)&&GameGlobal.actorModel.level>=o.level&&o.status==FieldBossState.OPEN)return!0}return!1},t.prototype.IsVIPBossNotice=function(){for(var e=this.m_VipBossInfo,t=0,i=e;t<i.length;t++){var o=i[t],n=UserVip.ins().lv;if((GameGlobal.actorModel.level>=o.levelLimit||n>=o.viplvlimit)&&(o.vipCount[n]||1)-o.daycount>0&&Checker.Money(o.costgold.id,o.costgold.count,!1))return!0}return!1},t.prototype.IsRedPointBoss=function(e){return this.mRedPoint.IsRedAct(e)},t.prototype.IsRedPoint=function(){return this.mRedPoint.Get(BossModelRedPoint.INDEX_ACT),this.mRedPoint.IsRedAct(BossModelRedPoint.PERSONNAL_BOSS)||this.mRedPoint.IsRedAct(BossModelRedPoint.PUBLIC_BOSS)||this.mRedPoint.IsRedAct(BossModelRedPoint.FIELD_BOSS)},t}(BaseSystem);__reflect(BossModel.prototype,"BossModel");var BossModelRedPoint=function(e){function t(){var t=e.call(this)||this;return t.mRedPointMap={},t}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.FB_INFO_UPDATE,MessageDef.PUBLIC_BOSS_UPDATE,MessageDef.FIELD_BOSS_UPDATE,MessageDef.VIP_BOSS_UPDATE,MessageDef.VIP_LEVEL_CHANGE]},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e;var e},t.prototype.OnChange=function(e){e==t.INDEX_ACT&&GameGlobal.MessageCenter.dispatch(MessageDef.ALL_BOSS_NOTICE)},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mRedPointMap)if(this.mRedPointMap[e])return!0;return!1},t.prototype.DoActive=function(){this.mRedPointMap[t.PERSONNAL_BOSS]=GameGlobal.UserFb.IsPersonBossNotice(),this.mRedPointMap[t.PUBLIC_BOSS]=GameGlobal.BossModel.IsPublicBossNotice(),this.mRedPointMap[t.FIELD_BOSS]=GameGlobal.BossModel.IsFieldBossNotice(),this.mRedPointMap[t.VIP_BOSS]=GameGlobal.BossModel.IsVIPBossNotice()},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.mRedPointMap[e]},t.INDEX_ACT=0,t.PERSONNAL_BOSS=1,t.PUBLIC_BOSS=2,t.FIELD_BOSS=3,t.VIP_BOSS=4,t}(IRedPoint);__reflect(BossModelRedPoint.prototype,"BossModelRedPoint");var Sproto;!function(e){var t;!function(e){e[e.Begin=0]="Begin",e[e.Current=1]="Current",e[e.End=2]="End"}(t=e.SeekOrigin||(e.SeekOrigin={}));var i=function(){function e(){this.m_Data=new DataView(new ArrayBuffer(0))}return Object.defineProperty(e.prototype,"Position",{get:function(){return this.m_Position},set:function(e){this.m_Position=e,this.write_position=e>this.write_position?e:this.write_position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Buffer",{get:function(){return this.m_Data.buffer},set:function(e){this.m_Data=new DataView(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Length",{get:function(){return this.write_position},set:function(e){this.write_position=e;var t=new Uint8Array(new ArrayBuffer(e)),i=this.m_Data.buffer.byteLength;i>e&&(this.m_Position=e);var o=Math.min(i,e);t.set(new Uint8Array(this.m_Data.buffer,0,o)),this.Buffer=t.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mBytesAvailable",{get:function(){return this.m_Data.byteLength-this.m_Position},enumerable:!0,configurable:!0}),e.prototype.Seek=function(e,i){switch(i){case t.Begin:this.Position=e;break;case t.Current:this.Position+=e;break;case t.End:this.Position=this.Length+e}},e.prototype.WriteByte=function(e){this.ValidateBuffer(1),this.m_Data.setInt8(this.Position++,e)},e.prototype.ValidateBuffer=function(e,t){if(void 0===t&&(t=!1),this.write_position=e>this.write_position?e:this.write_position,e+=this.m_Position,this.m_Data.byteLength<e||t){var i=new Uint8Array(new ArrayBuffer(e)),o=Math.min(this.m_Data.buffer.byteLength,e);i.set(new Uint8Array(this.m_Data.buffer,0,o)),this.Buffer=i.buffer}},e.prototype.WriteBytes=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var o;if(!(0>t)&&!(0>i)&&(o=0==i?e.length-t:Math.min(e.length-t,i),o>0)){this.ValidateBuffer(o);for(var n=new DataView(e.buffer),a=o,r=4;a>r;a-=r)this.m_Data.setUint32(this.m_Position,n.getUint32(t)),this.Position+=r,t+=r;for(;a>0;a--)this.m_Data.setUint8(this.Position++,n.getUint8(t++))}},e.prototype.ReadBytes=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),0==i)i=this.mBytesAvailable;else if(!this.Validate(i))return null;for(var o=0;i>o;o++)e[o+t]=this.m_Data.getUint8(this.Position++)},e.prototype.Validate=function(e){return this.m_Data.byteLength>0&&this.m_Position+e<=this.m_Data.byteLength?!0:void egret.$error(1025)},e}();e.SByteArray=i,__reflect(i.prototype,"Sproto.SByteArray")}(Sproto||(Sproto={}));var PublicBossInfo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fightnum=0,t.replyTimes=0,t}return __extends(t,e),t.prototype.parser=function(e){this.id==e.id&&(this.hp=e.hp,this.isKill=e.iskill?1:0,this.status=FieldBossState.OPEN,this.reborntime=e.reborntime,this.fightnum=e.fightnum)},t.prototype.GetConfig=function(){return GameGlobal.Config.PublicBossConfig[this.id]},Object.defineProperty(t.prototype,"isDie",{get:function(){return 1==this.isKill},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Weight",{get:function(){return GameGlobal.actorModel.level<this.level?1e5*this.id:this.isKill?1e4*this.id:1e3-this.id},enumerable:!0,configurable:!0}),t}(IBossInfo);__reflect(PublicBossInfo.prototype,"PublicBossInfo");var VipBossInfo=function(){function e(){this.count=0,this.daycount=0,this.nLeftTime=0,this.nOpen=0}return e.prototype.initLocalData=function(e){this.id=e.id||0,this.cost=e.cost||[],this.costgold=e.costgold||[],this.needsuccess=e.needsuccess,this.vipCount=e.vipCount||[],this.levelLimit=e.levelLimit||0,this.fbid=e.fbid||0,this.suredropId=e.suredropId||0,this.dropId=e.dropId||0,this.bossid=e.bossid||0,this.uititle=e.uititle||"",this.showItem=e.showItem||[],this.viplvlimit=e.viplvlimit||0,this.nLeftTime=this.vipCount[0]},e.prototype.updataDataByServer=function(e){this.count=e.count||0,this.daycount=e.daycount||0},e.prototype.getOpenTime=function(){var e=UserVip.ins().lv||0;return(GameGlobal.actorModel.level>=this.levelLimit||e>=this.viplvlimit)&&(this.nOpen=1),this.nOpen},e.prototype.getLeftTime=function(){var e=UserVip.ins().lv||0;this.nLeftTime=this.vipCount[e]-this.daycount},e}();__reflect(VipBossInfo.prototype,"VipBossInfo");var BossHurtRecordPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossHurtRankSkin",t.list.itemRenderer=HurtBossRecordItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="伤害记录",this.observe(MessageDef.PUBLIC_BOSS_RECORD,this.updateContent),GameGlobal.BossModel.sendPublicRecord(parseInt(e[0]))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.updateContent=function(e){this.list.dataProvider=new eui.ArrayCollection(e[1]);var t=e[0];0==t?this.rank_txt.text="未上榜":this.rank_txt.text="第"+t+"名"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BossHurtRecordPanel.prototype,"BossHurtRecordPanel");var HurtBossRecordItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;this.bg.source=this.itemIndex%2==0?"ui_bm_xilianbg01":"ui_bm_xilianbg02",this.rank_txt.text=this.itemIndex+1+"",this.name_txt.text=e.name,this.fight_txt.text=e.injure+""},t}(eui.ItemRenderer);__reflect(HurtBossRecordItem.prototype,"HurtBossRecordItem");var BossKillRecordPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossKillRecordSkin",t.list.itemRenderer=KillBossRecordItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="击杀记录",this.observe(MessageDef.PUBLIC_BOSS_RECORD_KILL,this.updateContent),GameGlobal.BossModel.sendPublicKillRecord(parseInt(e[0]))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.updateContent=function(e){this.list.dataProvider=new eui.ArrayCollection(e)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BossKillRecordPanel.prototype,"BossKillRecordPanel");var KillBossRecordItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;this.bg.source=this.itemIndex%2==0?"ui_bm_xilianbg01":"ui_bm_xilianbg02",this.time_txt.text=DateUtils.format_6(1e3*e.killtime),this.name_txt.text=e.name,this.fight_txt.text=e.power+""},t}(eui.ItemRenderer);__reflect(KillBossRecordItem.prototype,"KillBossRecordItem");var BossMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(PersonBossPanel),TabView.CreateTabViewData(PublicBossPanel),TabView.CreateTabViewData(FieldBossPanel),TabView.CreateTabViewData(VipBossPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.FB_INFO_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.PUBLIC_BOSS_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.FIELD_BOSS_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.VIP_BOSS_UPDATE,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,GameGlobal.UserFb.IsPersonBossNotice()),this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.BossModel.IsPublicBossNotice()),this.commonWindowBg.ShowTalRedPoint(2,GameGlobal.BossModel.IsFieldBossNotice()),this.commonWindowBg.ShowTalRedPoint(3,GameGlobal.BossModel.IsVIPBossNotice())},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_44)},t.prototype.OnOpenIndex=function(e){return 1==e?Deblocking.Check(DeblockingType.TYPE_45):2==e?Deblocking.Check(DeblockingType.TYPE_46):!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(BossMainPanel.prototype,"BossMainPanel");var BossTipsPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossTipsSkin",t.list.itemRenderer=BossTipsItem,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonDialog.OnAdded(this),this.commonDialog.title="BOSS提醒"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=[],o=GameGlobal.Config.PublicBossConfig;for(var n in o)i.push(parseInt(n));this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BossTipsPanel.prototype,"BossTipsPanel");var BossTipsItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.showCheck.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){GameGlobal.BossModel.setRemind(1<<this.itemIndex+1)},t.prototype.dataChanged=function(){this.bg.source=this.itemIndex%2==0?"ui_bm_xilianbg01":"ui_bm_xilianbg02";var e=GameGlobal.Config.PublicBossConfig[this.data];this.name_txt.text=GameGlobal.Config.MonstersConfig[e.bossid][GameGlobal.Config.MonstersConfig_keys.name],this.lv_txt.text=GameGlobal.Config.MonstersConfig[e.bossid][GameGlobal.Config.MonstersConfig_keys.level]+"级",GameGlobal.actorModel.level>=e.level?this.open_txt.visible=!1:(this.open_txt.visible=!0,this.open_txt.text=e.level+"级可进入"),this.showCheck.visible=GameGlobal.actorModel.level>=e.level,this.showCheck.selected=GameGlobal.BossModel.getRemindByIndex(this.itemIndex)},t}(eui.ItemRenderer);__reflect(BossTipsItem.prototype,"BossTipsItem");var FieldBossDetailPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FieldBossDetailSkin",t.list1.itemRenderer=ItemBaseNotName,t.list2.itemRenderer=ItemBaseNotName,t.bar.labelFunction=function(e,t){return Math.floor(100*e/t)+"%"},t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_bossId=e[0],this.commonDialog.OnAdded(this),this.commonDialog.title="野外BOSS";var i=GameGlobal.Config.FieldBossConfig[this.m_bossId];this.petShowPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(i.bossid))),this.list1.dataProvider=new eui.ArrayCollection(i.fixedshowitem),this.list2.dataProvider=new eui.ArrayCollection(i.showitem);var o=GameGlobal.Config.MonstersConfig[i.bossid];this.bossName.text=o[GameGlobal.Config.MonstersConfig_keys.name]+"("+o[GameGlobal.Config.MonstersConfig_keys.level]+"级)";var n=GameGlobal.BossModel.GetBossInfoById(Enum_BOSSTYPE.field_boss,i.id);this.bar.maximum=o[GameGlobal.Config.MonstersConfig_keys.hp],this.bar.value=n.hp,this.challengeLabel.text=i.level+"级";var a=GameGlobal.actorModel.level>=i.level,r=0;if(!a||n.isDie||GameGlobal.BossModel.IsRun())n.isDie||GameGlobal.BossModel.IsRun()?(this.runLabel.text="Boss刷新后25分钟",this.runLabel.textColor=16711680):(r=this.m_LeftTime=GameGlobal.BossModel.GetRunLeftTime(),this.runLabel.text=DateUtils.format_3(r),this.runLabel.textColor=7222027),this.enterLabel.text="未满足",this.enterLabel.textColor=16711680;else{if(i.needbossprops){var s=GameGlobal.UserBag.getBagGoodsCountById(0,i.needbossprops.id);i.needbossprops.count>s&&(this.enterLabel.text="未满足",this.enterLabel.textColor=16711680)}else this.enterLabel.text="已满足",this.enterLabel.textColor=7222027;r=this.m_LeftTime=GameGlobal.BossModel.GetRunLeftTime(),this.runLabel.text=DateUtils.format_3(r),this.runLabel.textColor=7222027}if(n.ownerId&&n.leftTime>0?(this.m_owner=n.ownerName,this.m_ownerTime=n.leftTime,this.bossOwnerLabel.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T:BOSS当前归属：|C:0x2F6FF6&T:"+n.ownerName+"|C:0xd27701&T:("+n.leftTime+"s)|"),UIHelper.SetHeadByHeadId(this.headComp,n.ownerHeadId,!1),this.AddTimer(1e3,this.m_ownerTime,this.UpdateOwnTime)):(this.bossOwnerLabel.text="BOSS当前归属：无",UIHelper.SetHeadByHeadId(this.headComp,0,!1)),r&&this.AddTimer(1e3,Math.ceil(.001*r),this.UpdateTime),this.challengeCardGroup.visible=!n.ischallenge,i.needbossprops){var s=GameGlobal.UserBag.getBagGoodsCountById(0,i.needbossprops.id);this.challengeCard_txt.textFlow=TextFlowMaker.consumeLabel(s,i.needbossprops.count)}else this.challengeCardGroup.visible=!1;this.AddClick(this.goBtn,this.OnTap),this.AddClick(this.addBtn,this.OnTap)},t.prototype.OnClose=function(){GameGlobal.BossModel.sendCallFieldBossList(),this.commonDialog.OnRemoved(),TimerManager.ins().remove(this.UpdateTime,this)},t.prototype.UpdateOwnTime=function(){this.m_ownerTime&&(this.bossOwnerLabel.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T:BOSS当前归属：|C:0x2F6FF6&T:"+this.m_owner+"|C:0xd27701&T:("+this.m_ownerTime+"s)|"),this.m_ownerTime--,this.m_ownerTime<=0&&(TimerManager.ins().remove(this.UpdateOwnTime,this),this.m_ownerTime=0,this.bossOwnerLabel.text="BOSS当前归属：无"))},t.prototype.UpdateTime=function(){this.m_LeftTime&&(this.runLabel.text=DateUtils.format_3(this.m_LeftTime),this.m_LeftTime-=1e3,this.m_LeftTime<=0&&(TimerManager.ins().remove(this.UpdateTime,this),this.m_LeftTime=0,this.runLabel.text="已逃跑",this.runLabel.textColor=16711680))},t.prototype.OnTap=function(e){var t=GameGlobal.Config.FieldBossConfig[this.m_bossId];switch(e.target){case this.goBtn:var i=GameGlobal.BossModel.GetBossInfoById(Enum_BOSSTYPE.field_boss,t.id);if(!i&&i.hp<=0)return;if(GameGlobal.actorModel.level<t.level)return void UserTips.ErrorTip("主角等级不足");if(i.isDie)return void UserTips.ErrorTip("BOSS已击杀");if(i.IsClose())return void UserTips.ErrorTip("BOSS已关闭");if(GameGlobal.BossModel.IsRun())return void UserTips.ErrorTip("BOSS已逃跑");if(!i.ischallenge&&t.needbossprops){var o=GameGlobal.UserBag.getBagGoodsCountById(0,t.needbossprops.id);if(t.needbossprops.count>o)return void UserTips.ErrorTip(GameGlobal.Config.ItemConfig[t.needbossprops.id].name+"不足")}UserFb.FinishAndCheckFighting2()&&(GameGlobal.BossModel.sendChallenge(this.m_bossId),this.CloseSelf());break;case this.addBtn:UserWarn.ins().setBuyGoodsWarn(t.needbossprops.id,t.needbossprops.count)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FieldBossDetailPanel.prototype,"FieldBossDetailPanel");var FieldBossPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FieldBossSkin",t.list.itemRenderer=FieldBossItem,t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.FIELD_BOSS_UPDATE,this.UpdateContent),GameGlobal.BossModel.sendCallFieldBossList(),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){var e,t=GameGlobal.BossModel.GetBossInfos(Enum_BOSSTYPE.field_boss),i=[],o=t.length;for(e=0;o>e&&(i.push(t[e]),!(GameGlobal.actorModel.level<t[e].level));e++);SortTools.sortMap(i,"Weight",!0),this.list.dataProvider.replaceAll(i)},t.NAME="野外BOSS",t}(BaseView);__reflect(FieldBossPanel.prototype,"FieldBossPanel",["ICommonWindowTitle"]);var FieldBossItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.bar.labelFunction=function(e,t){return Math.floor(100*e/t)+"%"},this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data,t=e.GetConfig();ViewManager.ins().open(FieldBossDetailPanel,t.id)},t.prototype.dataChanged=function(){var e=this.data,t=e.GetConfig(),i=GameGlobal.Config.MonstersConfig[t.bossid];this.petShowPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(t.bossid))),this.bar.maximum=i[GameGlobal.Config.MonstersConfig_keys.hp],this.bar.value=e.hp,this.bossName.text=i[GameGlobal.Config.MonstersConfig_keys.name]+"("+i[GameGlobal.Config.MonstersConfig_keys.level]+"级)",GameGlobal.actorModel.level>=t.level?(this.goBtn.visible=!0,this.enterInfoLabel.visible=!1):(this.goBtn.visible=!1,this.enterInfoLabel.visible=!0,this.enterInfoLabel.text="主角"+t.level+"级可进入"),this.freshImg.visible=!this.enterInfoLabel.visible,this.nextTimeLabel.text=GameGlobal.BossModel.GetNextRefreshTime(),e.isDie?(this.runTime.text="Boss刷新后25分钟",this.runTime.textColor=104196,this.freshImg.source="ui_boss_bm_beijisha"):e.IsClose()?(this.runTime.text="已逃跑",this.runTime.textColor=16711680,this.freshImg.source="ui_boss_bm_yitaopao"):(this.runTime.text=GameGlobal.BossModel.GetRunTime(),this.runTime.textColor=104196,this.freshImg.source="ui_boss_bm_yishuaxin")},t}(eui.ItemRenderer);__reflect(FieldBossItem.prototype,"FieldBossItem");var PersonBossPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PersonBossSkin",t.list.itemRenderer=PersonBossItem,t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return this.list.validateNow(),e={},e[1]=this.list.getElementAt(0)?this.list.getElementAt(0).goBtn:null,e;var e},t.prototype.OnOpen=function(){this.observe(MessageDef.FB_INFO_UPDATE,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){this.removeObserve()},t.prototype.UpdateContent=function(){var e,t=GameGlobal.UserFb.getPersonBoss(),i=[],o=t.length;for(e=0;o>e&&(i.push(t[e]),!(GameGlobal.actorModel.level<t[e].levelLimit));e++);SortTools.sortMap(i,"personBossWeight",!0),this.list.dataProvider.replaceAll(i)},t.NAME="个人BOSS",t}(BaseView);__reflect(PersonBossPanel.prototype,"PersonBossPanel",["ICommonWindowTitle"]);var PersonBossItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.list.itemRenderer=ItemBaseNotName},t.prototype._OnClick=function(){UserFb.FinishAndCheckFighting()&&GameGlobal.UserFb.sendfbJoin(1,this.data.fbID)},t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.Config.DailyFubenConfig[e.fbID];if(t.bossid){var i=GameGlobal.Config.MonstersConfig[t.bossid];this.bossName.text=i[GameGlobal.Config.MonstersConfig_keys.name]+"("+i[GameGlobal.Config.MonstersConfig_keys.level]+"级)",this.petShowPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(t.bossid)))}var o=t.freeCount+e.vipBuyCount-e.useCount;if(GameGlobal.actorModel.level>=e.levelLimit){this.goBtn.visible=!0,this.enterInfoLabel.visible=!1;var n=!1;e.useCount>0&&(n=!0),this.dieImg.visible=n,this.goBtn.visible=!n,this.goBtn.label=e.totalCount<t.needsuccess?"挑 战":"免费扫荡"}else this.goBtn.visible=!1,this.enterInfoLabel.visible=!0,this.enterInfoLabel.text="主角"+t.levelLimit+"级可进入",this.dieImg.visible=!1;this.times_txt.text="剩余挑战："+o,this.list.dataProvider=new eui.ArrayCollection(t.showItem),UIHelper.ShowRedPoint(this.goBtn,o>0)},t}(eui.ItemRenderer);__reflect(PersonBossItem.prototype,"PersonBossItem");var PublicBossPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PublicBossSkin",t.list.itemRenderer=PublicBossItem,t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),UIHelper.SetLinkStyleLabel(this.tips_txt,"BOSS提醒设置")},t.prototype.OnOpen=function(){GameGlobal.MessageCenter.dispatch(MessageDef.PUBLIC_BOSS_REBORN,null,!1),this.observe(MessageDef.PUBLIC_BOSS_UPDATE,this.UpdateContent),this.AddClick(this.tips_txt,this.onTap),this.AddClick(this.buyBtn,this.onTap),this.AddTimer(1e3,0,this.timeReplyHandler),this.UpdateContent()},t.prototype.OnClose=function(){this.removeObserve(),TimerManager.ins().remove(this.timeReplyHandler,this)},t.prototype.UpdateContent=function(){var e,t=GameGlobal.BossModel.GetBossInfos(Enum_BOSSTYPE.public_boss),i=[],o=t.length;for(e=0;o>e&&(i.push(t[e]),!(GameGlobal.actorModel.level<t[e].level));e++);SortTools.sortMap(i,"Weight",!0),this.list.dataProvider.replaceAll(i);var n=GameGlobal.BossModel,a=GameGlobal.Config.PublicBossBaseConfig;this.num_txt.text=n.pBossChallengenum+"/"+a.maxCount,this.buyBtn.visible=n.pBossChallengenum<=0},t.prototype.timeReplyHandler=function(){var e=GameGlobal.BossModel;e.pBossChallengenum>=GameGlobal.Config.PublicBossBaseConfig.maxCount?this.replyTime_txt.text="--":this.replyTime_txt.text=DateUtils.format_3(1e3*(e.pBossRecovertiem-GameServer.serverTime));var t,i=this.list.numChildren;for(t=0;i>t;t++)this.list.getChildAt(t).updaterebirthTime()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.buyBtn:GameGlobal.BossModel.buyFunc();break;case this.tips_txt:ViewManager.ins().open(BossTipsPanel)}},t.NAME="全民BOSS",t}(BaseView);__reflect(PublicBossPanel.prototype,"PublicBossPanel",["ICommonWindowTitle"]);var PublicBossItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.bar.snapInterval=0,this.bar.labelFunction=function(e,t){return Math.floor(100*e/t)+"%"},this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.list.itemRenderer=ItemBaseNotName,this.record_txt.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.people_txt.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),UIHelper.SetLinkStyleLabel(this.record_txt,"查看击杀")},t.prototype._OnClick=function(e){var t=this.data,i=t.GetConfig();switch(e.currentTarget){case this.goBtn:if(!UserFb.CheckFighting())return;if(GameGlobal.actorModel.level<i.level)return void UserTips.ErrorTip("主角等级不足");if(0==GameGlobal.BossModel.pBossChallengenum)return void GameGlobal.BossModel.buyFunc();if(t.isKill)return GameGlobal.Config.VipChallengeTimesConfig[GameGlobal.actorModel.vipLv].purchasingtimes-GameGlobal.BossModel.reborncount<=0?void UserTips.InfoTip("复活次数已达上限"):void(this.goodsGroup.visible?UserFb.FinishAndCheckFighting()&&GameGlobal.BossModel.sendPublicReBornChallenge(t.id):1==Checker.Money(i.needmoney.id,i.needmoney.count,!0)&&UserFb.FinishAndCheckFighting()&&GameGlobal.BossModel.sendPublicReBornChallenge(t.id));
UserFb.FinishAndCheckFighting()&&GameGlobal.BossModel.sendPublicChallenge(t.id);break;case this.record_txt:ViewManager.ins().open(BossKillRecordPanel,t.id);break;case this.people_txt:ViewManager.ins().open(BossHurtRecordPanel,t.id)}},t.prototype.dataChanged=function(){var e=this.data,t=e.GetConfig();GameGlobal.actorModel.level>=t.level?(this.goBtn.visible=!0,this.enterInfoLabel.visible=!1):(this.goBtn.visible=!1,this.enterInfoLabel.visible=!0,this.enterInfoLabel.text="主角"+t.level+"级可进入"),this.list.dataProvider=new eui.ArrayCollection(t.showitem);var i=GameGlobal.Config.MonstersConfig[t.bossid];if(this.bossName.text=i[GameGlobal.Config.MonstersConfig_keys.name]+"("+i[GameGlobal.Config.MonstersConfig_keys.level]+"级)",this.petShowPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(t.bossid))),this.record_txt.visible=e.isDie,this.people_txt.visible=!e.isDie,UIHelper.SetLinkStyleLabel(this.people_txt,"争夺人数："+e.fightnum),this.rebirthTime_txt.visible=e.isDie,this.rebirthTimes_txt.visible=e.isDie,this.priceIcon.visible=!1,this.goodsGroup.visible=!1,this.goBtn.label=e.isKill?"复活并挑战":"挑战",UIHelper.ShowRedPoint(this.goBtn,GameGlobal.BossModel.pBossChallengenum>0&&!e.isKill),e.isDie){var o=GameGlobal.UserBag.getBagGoodsCountById(0,t.needprops.id);o>0?(this.goodsGroup.visible=!0,this.goodsNum_txt.text="x"+t.needprops.count,t.needprops.count>o?this.goodsNum_txt.textColor=16711680:this.goodsNum_txt.textColor=104196):(this.priceIcon.setType(t.needmoney.id),this.priceIcon.price=t.needmoney.count,this.priceIcon.setEnoughCount(GameGlobal.actorModel.yb),this.priceIcon.visible=!0),this.rebirthTimes_txt.text="剩余复活次数："+(GameGlobal.Config.VipChallengeTimesConfig[GameGlobal.actorModel.vipLv].purchasingtimes-GameGlobal.BossModel.reborncount),this.updaterebirthTime()}this.bar.value=e.hp},t.prototype.updaterebirthTime=function(){this.data.isDie&&(this.rebirthTime_txt.text=DateUtils.format_3(1e3*(this.data.reborntime-GameServer.serverTime))+"后复活")},t}(eui.ItemRenderer);__reflect(PublicBossItem.prototype,"PublicBossItem");var VipBossPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="VipBossSkin",t.list.itemRenderer=VipBossItem,t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.VIP_BOSS_UPDATE,this.UpdateContent),GameGlobal.BossModel.sendCallVipBossList(),this.UpdateContent()},t.prototype.OnClose=function(){this.removeObserve()},t.prototype.UpdateContent=function(){var e=GameGlobal.BossModel.getVipBossInfo();for(var t in e)e[t].getOpenTime(),e[t].getLeftTime();e.sort(function(e,t){return e.nOpen===t.nOpen?t.nLeftTime-e.nLeftTime:t.nOpen-e.nOpen});var i,o=[],n=e.length;for(i=0;n>i&&(o.push(e[i]),!(GameGlobal.actorModel.level<e[i].levelLimit));i++);var a,r=[],s=e.length;for(a=0;s>a&&(r.push(e[a]),!(GameGlobal.actorModel.vipLv<e[a].viplvlimit));a++);e=o.length>r.length?o:r,this.list.dataProvider.replaceAll(e)},t.NAME="至尊BOSS",t}(BaseView);__reflect(VipBossPanel.prototype,"VipBossPanel",["ICommonWindowTitle"]);var VipBossItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nState=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.list.itemRenderer=ItemBaseNotName},t.prototype._OnClick=function(){UserFb.FinishAndCheckFighting2()&&(1===this.nState?Checker.Money(this.data.costgold.id,this.data.costgold.count)&&GameGlobal.BossModel.sendVipbossChallenge(this.data.id):2===this.nState?UserTips.ErrorTip("今天次数已经用完"):GameGlobal.BossModel.sendVipbossChallenge(this.data.id))},t.prototype.dataChanged=function(){var e=this.data;if(e.bossid){var t=GameGlobal.Config.MonstersConfig[e.bossid];this.bossName.text=t[GameGlobal.Config.MonstersConfig_keys.name],this.petShowPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(e.bossid)))}var i=UserVip.ins().lv,o=e.vipCount[i]||1,n=o-e.daycount;if(e.nOpen){this.goBtn.visible=!0,this.enterInfoLabel.visible=!1;var a=!1;if(e.daycount>=o&&(a=!0),this.dieImg.visible=a,this.goBtn.visible=!a,this.gProp.visible=!a,a)this.lbMore.text="";else{var r=GameGlobal.UserBag.GetCount(e.cost.id);r&&r>=e.cost.count?(this.priceIcon.setPrice(e.cost.count),this.priceIcon.setType(e.cost.id),this.nState=0):(this.priceIcon.setPrice(e.costgold.count),this.priceIcon.setType(e.costgold.id),this.nState=1);var s="";e.vipCount[i+1]&&(s="VIP"+(i+1)+"可再挑战"+(e.vipCount[i+1]-e.vipCount[i])+"次"),1>n?this.lbMore.text=s:this.lbMore.text=""}this.goBtn.label=e.count<e.needsuccess?"挑 战":"扫 荡"}else this.goBtn.visible=!1,this.enterInfoLabel.visible=!0,this.enterInfoLabel.text=e.levelLimit+"级或VIP"+e.viplvlimit+"可挑战",this.dieImg.visible=!1,this.gProp.visible=!1,this.lbMore.text="";UIHelper.ShowRedPoint(this.goBtn,n>0&&Checker.Money(e.costgold.id,e.costgold.count,!1)),this.times_txt.text="剩余挑战："+n,this.list.dataProvider=new eui.ArrayCollection(e.showItem)},t}(eui.ItemRenderer);__reflect(VipBossItem.prototype,"VipBossItem");var BriberyBasePanel=function(e){function t(){var t=e.call(this)||this;return t.count=0,t.itemDic={},t.key=0,t.is=!0,t.dic={},t.skinName="briberyBaseSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.data=GameGlobal.FuliModel.FuliData,this.bonusBaseConfigTab=GameGlobal.Config.BonusBaseConfig},t.prototype.showItem=function(){this.key=this.data.briberyID,this.itemDic[this.key]=this.data.endtime,this.item()},t.prototype.item=function(){var e=this;this.is=!1;var i=!1,o=new BriberyItem;o.y=-149,o.x=Math.floor(585*Math.random()),this.addChild(o),o.visible=!0,o.itemDic=this.itemDic,o.key=this.key,this.dic[o.key]=o,o.x=Math.floor(585*Math.random()),o.y=-149;var n=o,a=n.itemDic[o.key]-GameServer.serverTime-this.bonusBaseConfigTab.falltime;egret.Tween.get(n).to({x:Math.floor(585*Math.random()),y:1131},1e3*this.bonusBaseConfigTab.falltime,egret.Ease.sineOut).wait(1e3*a).call(function(){n.itemDic[o.key]-GameServer.serverTime<2&&void 0!=e.dic[o.key]&&(e.dic[o.key].visible=!1),null!=n.parent&&n.parent.removeChild(n);for(var a in e.dic)i=e.dic[a].visible?!0:!1;0==i&&ViewManager.ins().close(t)},this)},t.prototype.Fun=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.FULI_GET_HAVEBRIBERY,this.showItem),0==this.is&&this.showItem()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BriberyBasePanel.prototype,"BriberyBasePanel");var BriberyItem=function(e){function t(){var t=e.call(this)||this;return t.itemDic={},t.key=0,t.skinName="briberyItem",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.img.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.itemDic={},this.key=0},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.img:ViewManager.ins().open(BriberyPanel,this.itemDic,this.key,this)}},t}(eui.Component);__reflect(BriberyItem.prototype,"BriberyItem");var BriberyOpenPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="briberyOpenSkin",t._AddClick(t,t.CloseSelf),t._AddClick(t.closeImg,t.CloseSelf),t._AddClick(t.okBtn,t._onclick),t._AddClick(t.com,t._onclick),t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.showItem(i)},t.prototype.showItem=function(e){1==e.ret&&(this.priceIcon.type=3,this.priceIcon.setColor(16766720),this.priceIcon.price=e.bybNum)},t.prototype._onclick=function(e){switch(e.currentTarget){case this.okBtn:ViewManager.ins().close(t);break;case this.com:ViewManager.ins().close(t)}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BriberyOpenPanel.prototype,"BriberyOpenPanel");var BriberyPanel=function(e){function t(){var t=e.call(this)||this;return t.briberyDic={},t.briberyId=0,t.skinName="briberySkin",t._AddClick(t.closeImg,t.CloseSelf),t._AddClick(t.okBtn,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(e,t,i){this.observe(MessageDef.FULI_GET_RECEIVEBRIBERY,this.OpenXXX),this.briberyDic=e,this.briberyId=t,this.item=i,this.lab.textFlow=(new egret.HtmlTextParser).parser("<a color=0xFFD700>【"+GameGlobal.FuliModel.FuliData.playerName+"】</a>给全服发了一波红包,快来拼手气!")},t.prototype.OnClose=function(){},t.prototype.OpenXXX=function(e){e.ret?ViewManager.ins().open(BriberyOpenPanel,e):(UserTips.ins().showTips("红包已被抢光"),this.item.visible=!1,null!=this.item.parent&&this.item.parent.removeChild(this.item)),ViewManager.ins().close(t)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.okBtn:this.briberyDic[this.briberyId]-GameServer.serverTime>2?(GameGlobal.FuliModel.ReceiveBribery(this.briberyId),this.item.visible=!1,null!=this.item.parent&&this.item.parent.removeChild(this.item)):UserTips.ins().showTips("红包已被抢光"),this.item.visible=!1,null!=this.item.parent&&this.item.parent.removeChild(this.item)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BriberyPanel.prototype,"BriberyPanel");var Chat=function(e){function t(){var t=e.call(this)||this;return t.chatInterval=5e3,t.charMax=50,t.miniChatMax=30,t.UpSpeak="",t.minichatList=new eui.ArrayCollection,t.worldchatList=new eui.ArrayCollection,t.guildchatList=new eui.ArrayCollection,t.miniChatOpenStatus=!1,t.isNoShowTipsPanel=!1,t.publicCD=0,t.regNetMsg(S2cProtocol.sc_chat_new_msg,t._DoNewChatMsg),t.regNetMsg(S2cProtocol.sc_chat_init_msg,t._DoInitChatMsg),t.regNetMsg(S2cProtocol.sc_chat_is_send_success,t.doIsSendSuccess),t.regNetMsg(S2cProtocol.sc_chat_filte_list,t._DoChatFilte),t.RegNetMsgs(S2cProtocol.sc_show_other_spellsRes,t.spellsRes),t.RegNetMsgs(S2cProtocol.sc_show_other_pet,t.pet),t.RegNetMsgs(S2cProtocol.sc_other_equip,t.item),t.RegNetMsgs(S2cProtocol.sc_other_xianlv,t.xianlv),t}return __extends(t,e),t.prototype.speakState=function(e){return 0},t.prototype.startupSpeakTime=function(e){},t.CanGuildChat=function(){return GameGlobal.actorModel.HasGuild()?!0:(UserTips.ins().showTips("请先加入帮会"),!1)},t.prototype.Init=function(){},t.ins=function(){return e.ins.call(this)},t.prototype.sendChatInfo=function(e,t){if(t.length<=0)return void UserTips.ins().showTips("|C:0xff0000&T:请输入聊天内容|");var i=new Sproto.cs_chat_send_info_request;i.str=t,i.type=e,this.Rpc(C2sProtocol.cs_chat_send_info,i)},t.prototype.SendGuildMessage=function(e){var t=new Sproto.cs_guild_sendchat_request;t.str=e,this.Rpc(C2sProtocol.cs_guild_sendchat,t)},t.prototype.chatShareInfo=function(e,t){var i=new Sproto.cs_chat_share_info_request;i.shareId=e,i.params=t,this.Rpc(C2sProtocol.cs_chat_share_info,i)},t.prototype.sendOtherPet=function(e,t){var i=new Sproto.cs_get_other_actor_pet_request;i.otherid=e,i.petid=t,this.Rpc(C2sProtocol.cs_get_other_actor_pet,i)},t.prototype.sendOtherSpells=function(e,t){var i=new Sproto.cs_get_other_actor_spellsRes_request;i.otherid=e,i.pos=t,this.Rpc(C2sProtocol.cs_get_other_actor_spellsRes,i)},t.prototype.sendOtherActorItem=function(e,t){var i=new Sproto.cs_get_other_actor_item_request;i.otherid=e,i.itemhandle=t,this.Rpc(C2sProtocol.cs_get_other_actor_item,i)},t.prototype.sendOtherActorEq=function(e,t){var i=new Sproto.cs_get_other_actor_equip_request;i.otherid=e,i.slot=t,this.Rpc(C2sProtocol.cs_get_other_actor_equip,i)},t.prototype.sendOtherXianlv=function(e,t){var i=new Sproto.cs_get_other_actor_xianlv_request;i.otherid=e,i.id=t,this.Rpc(C2sProtocol.cs_get_other_actor_xianlv,i)},t.prototype.DoGuildMessagess=function(e){e&&e.length&&e.sort(t.miniChatSortFunction);for(var i=[],o=0,n=e;o<n.length;o++){var a=n[o],r=new ChatInfoData(a);i.push(r),this.guildchatList.addItemAt(r,0)}this.SetMinichatDatas(i)},t.prototype.DoGuildMessages=function(e){var t=new ChatInfoData(e);this.guildchatList.length>=this.charMax&&this.guildchatList.removeItemAt(this.guildchatList.length-1),this.guildchatList.addItemAt(t,0),this.SetMinichatData(t)},t.prototype._DoInitChatMsg=function(e){if(t.DeblockingShow()){for(var i=[],o=0,n=e.chatDatas;o<n.length;o++){var a=n[o],r=new ChatInfoData(a);i.push(r),a.type!=ChatType.Public&&a.type!=ChatType.System&&this.worldchatList.addItemAt(r,0)}this.SetMinichatDatas(i)}},t.prototype._DoNewChatMsg=function(e){if(t.DeblockingShow()&&e&&e.chatData){var i=e.chatData.type;if(i==ChatType.Public||i==ChatType.System){var o=new ChatInfoData(e.chatData);this.DoSysChatMsg(o)}else{var n=new ChatInfoData(e.chatData);this.worldchatList.length>=this.charMax&&this.worldchatList.removeItemAt(this.worldchatList.length-1),this.worldchatList.addItemAt(n,0),this.SetMinichatData(n)}if(e.chatData&&e.chatData.share&&e.chatData.share.shareId){var a=GlobalConfig.ins().ChatTipsConfig[e.chatData.share.shareId];a&&a.notice&&(4==a.type?GameGlobal.Notice.StaticNotice(e.chatData.str):GameGlobal.Notice.Notice(e.chatData.str))}}},t.prototype.doIsSendSuccess=function(e){e.success&&GameGlobal.MessageCenter.dispatch(MessageDef.SEND_MSG_INFO_SUCCESS)},t.prototype._DoChatFilte=function(e){e&&this.RemoveChatByActors(e.filter||0)},t.prototype.spellsRes=function(e){if(e){var t=new TreasureData;t.initData(e.spellsNo,e.lv,[]),ViewManager.ins().open(TreasureArrInfo,t,null,!0)}},t.prototype.pet=function(e){if(e){var t=GameGlobal.Config.petBiographyConfig[e.petid];if(t){var i=CommonUtils.copyDataHandler(t);i.buffskill=[];for(var o=0,n=e.pet.buffs;o<n.length;o++){var a=n[o],r={};r.id=a,i.buffskill.push(r)}ViewManager.ins().open(PetInfoPanel,i,!1)}}},t.prototype.item=function(e){if(e.data){var t=new EquipsData;t.parser(e.data),ViewManager.ins().open(EquipDetailedWin,e.data.item.id,t)}},t.prototype.xianlv=function(e){if(e){var t=CommonUtils.copyDataHandler(GameGlobal.Config.partnerBiographyConfig[e.id]),i=GameGlobal.Config.partnerGiftConfig[t.quality][e.level-1],o=GameGlobal.Config.partnerAttrsConfig[e.id][e.star-1];t.attrs=AttributeData.sumArrValueAttr(t.attrs,AttributeData.sumArrValueAttr(i.attrs,o.attrs)),t.star=e.star,ViewManager.ins().open(XianLvInfoPanel,t)}},t.prototype.DoSysChatMsg=function(e){this.SetMinichatData(e)},t.prototype.DoInitSysChatMsg=function(e){this.SetMinichatDatas(e)},t.prototype.checkRepeatString=function(e){var t=e.length;return 10>=t?!0:!0},t.prototype.analyzeCn=function(e){var t=e,i="";if(!t)return"";if(!t.share)return"";var o=GlobalConfig.ins().ChatTipsConfig[t.share.shareId];if(o)if(o.des){var n='<a href="event:'+t.share.shareId+'"><u>'+o.des+"</u></a>";i="<font color = '0x27a02a'>"+n+"</font>"}else{var a="",r="0x27a02a";if(t.share.shareId){var s=t.share.shareId;if(1===s){var l=t.share.showInfo[0].value||0,c=GameGlobal.Config.petBiographyConfig[l];c&&(a=c.name||"",r=ItemBase.QUALITY_COLOR[c.quality]+"")}else if(2===s){var l=t.share.showInfo[0].value||0,u=GameGlobal.Config.ItemConfig[l];u&&(a=u.name||"",r=ItemBase.QUALITY_COLOR[u.quality]+"")}else if(3===s){var l=t.share.showInfo[0].value||0,p=t.share.showInfo[0].valueEx||0,h=new TreasureData;h.initData(l,p,[]),a=h.name||"",r=ItemBase.QUALITY_COLOR[h.quality]+""}else if(12===s){var l=t.share.showInfo[0].value||0,d=GameGlobal.Config.partnerBiographyConfig[l];d&&(a=d.name||"",r=ItemBase.QUALITY_COLOR[d.quality]+"")}}var n='<a href="event:'+t.share.shareId+'"><u>'+a+"</u></a>";i="<font color = '"+r+"'>"+n+"</font>"}return i},t.prototype.HandleChatShare=function(e,t){var i=e.text;if(i){var o=null,n=null;if(-1!=i.indexOf("itemId:")?(o=Number(i.replace("itemId:","")),isNaN(o)&&(o=null)):-1!=i.indexOf("spellsData:")&&(n=i.replace("spellsData:",""),n||(n=null)),o){var a=GameGlobal.Config.ItemConfig[o];a&&(ItemConst.OPEN_EQUIPS_TIPS[a.type]?ViewManager.ins().open(EquipDetailedWin,a.id):ViewManager.ins().open(ItemDetailedWin,0,a.id,1))}else if(n){var r=n.split(","),s=Number(r[0]);if(s&&!isNaN(s)){for(var l=[],c=1;c<r.length;c++){var u=Number(r[c]);isNaN(u)||l.push(u)}var p=new TreasureData;p.initData(s,1,l),ViewManager.ins().open(TreasureArrInfo,p,null,!0,t.name)}}else t.share&&Number(i)==t.share.shareId?GameGlobal.Chat.shareJump(t):ViewManager.ins().open(PlayerDetailsPanel,i)}},t.prototype.shareJump=function(e){var t=e;if(t){var i=GlobalConfig.ins().ChatTipsConfig[t.share.shareId];if(Deblocking.Check(i.openid)){if(t.share.player&&t.share.player.length){var o=t.share.player;if(9===t.share.shareId||10===t.share.shareId){var n=GameGlobal.actorModel.guildID;n?UserTips.ins().showTips("你已有帮会，不可申请"):(GameGlobal.GangModel.SendJoinGang(o[0].guildid),UserTips.ins().showTips("已申请加入"))}}var a=0;if(t.share.showInfo&&t.share.showInfo.length){var o=t.share.showInfo;for(var r in o){var s=o[r];if(1===s.type){var l=s;l&&l.value&&this.sendOtherPet(t.id,l.value)}else if(2===s.type){var l=s;if(l&&l.value&&l.valueEx){var c=new TreasureData,u=[];try{if(l.strvalue)for(var p=l.strvalue.split(","),h=0,d=p;h<d.length;h++){var _=d[h],f=Number(_);isNaN(f)||u.push(f)}}catch(m){}c.initData(l.value,l.valueEx,u),ViewManager.ins().open(TreasureArrInfo,c,null,!0,t.name)}}else if(3===s.type);else if(4===s.type)20===t.share.shareId?GameGlobal.UserFb.raidAssistPkboss(s.value,t.id):(a=s.value,s.value&&s.valueEx&&t.id!=GameLogic.ins().actorModel.actorID&&GameGlobal.CrossBattleTeamModel.SendJoin(s.value,t.id,s.valueEx));else if(5===s.type){var l=s;l&&l.value&&this.sendOtherActorEq(t.id,l.valueEx)}else if(6===s.type){var l=s;l&&l.value&&this.sendOtherXianlv(t.id,l.value)}}}if(t.share&&t.share.shareId){var g=GlobalConfig.ins().ChatTipsConfig[t.share.shareId];if(g.target){var v=null;15===t.share.shareId?(v=a,GameGlobal.TsumKoBaseModel.chatXiD=a,GameGlobal.TsumKoBaseModel.changeId(),1==GameGlobal.TsumKoBaseModel.IsOpenView()?ViewManager.ins().Guide(g.target,v):GameGlobal.TsumKoBaseModel.chatXiD=0):ViewManager.ins().Guide(g.target,v)}}}}},t.prototype.SetMinichatData=function(e){if(this.minichatList.length>=this.miniChatMax)for(var i=this.miniChatMax>>1;i--;)this.minichatList.removeItemAt(this.minichatList.length-1);e.str&&(this.minichatList.addItemAt(e,0),this.minichatList.source.sort(t.miniChatSortFunction),this.minichatList.refresh(),MiniChatPanel.Refresh())},t.prototype.SetMinichatDatas=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];this.minichatList.addItemAt(o,0)}for(this.minichatList.source.sort(function(e,t){return t.time-e.time});this.minichatList.length>this.miniChatMax;)this.minichatList.removeItemAt(this.minichatList.length-1);this.minichatList.refresh(),MiniChatPanel.Refresh()},t.miniChatSortFunction=function(e,t){return e&&t?t.time-e.time:0},t.prototype.setWorldchatData=function(e){this.worldchatList.length>=this.charMax&&this.worldchatList.removeItemAt(this.worldchatList.length-1),this.worldchatList.addItemAt(e,0)},t.prototype.OnSocketClose=function(){this.minichatList&&this.minichatList.removeAll(),this.worldchatList&&this.worldchatList.removeAll(),this.guildchatList&&this.guildchatList.removeAll()},t.DeblockingShow=function(){return Deblocking.Check(DeblockingType.TYPE_49,!0)||GameServer.IsMerge()},t.DeblockingSend=function(){return Deblocking.Check(DeblockingType.TYPE_49)},t.Send=function(e,i,o){void 0===o&&(o=null);var n=GameGlobal.Chat.speakState(e),a=function(){return i.length<1||"点击输入聊天内容"==i?(UserTips.ErrorTip("请输入聊天内容"),!1):(t.GUILD_TYPE==e?t.CanGuildChat()&&(GameGlobal.Chat.SendGuildMessage(i),GameGlobal.Chat.startupSpeakTime(e)):t.DeblockingSend()&&(GameGlobal.Chat.checkRepeatString(i)&&GameGlobal.Chat.sendChatInfo(1,i),GameGlobal.Chat.UpSpeak=i,GameGlobal.Chat.startupSpeakTime(e)),o&&o(),!0)};return 0>n?(UserTips.ins().showTips("通关"+Math.abs(n)+"关后可以在世界频道发言"),!1):n>0?0!=e?(UserTips.ins().showTips("|C:0xff0000&T:您发言太快了|"),!1):void 0:a()},t.prototype.RemoveChatByActors=function(e){e&&(this.RemoveChatByActor(this.minichatList,e),this.RemoveChatByActor(this.worldchatList,e),this.RemoveChatByActor(this.guildchatList,e))},t.prototype.RemoveChatByActor=function(e,t){var i=e.source;if(i&&i.length){for(var o=!1,n=i.length-1;n>=0;--n){var a=i[n];t==a.id&&(i.splice(n,1),o=!0)}o&&(e.replaceAll(i),e.refresh())}},t.ALL_TYPE=0,t.WORLD_TYPE=1,t.GUILD_TYPE=2,t}(BaseSystem);__reflect(Chat.prototype,"Chat");var ChatType;!function(e){e[e.Public=3]="Public",e[e.System=2]="System",e[e.Normal=1]="Normal",e[e.Guild=4]="Guild",e[e.NormalPublic=10]="NormalPublic"}(ChatType||(ChatType={}));var Sproto;!function(e){function t(e,t){for(var i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.session=e.ri();break;default:e.nod()}return t}function i(t,i,o){var n=e.SprotoCore.GetSerialize(o,i);return void 0!=t.type&&n.wi(t.type,0),void 0!=t.session&&n.wi(t.session,1),e.SprotoCore.CloseSerialize(n)}var o=function(){function e(){}return e}();e.Spackage=o,__reflect(o.prototype,"Sproto.Spackage",["Sproto.SprotoTypeBase"]),e._decode_Spackage=t,e._encode_Spackage=i}(Sproto||(Sproto={}));var ChatFaceView=function(e){function t(t){var i=e.call(this)||this;i.skinName="ChatFaceSkin",i.m_Callback=t;for(var o=0;o<i.faceGroup.numChildren;o++){var n=o+1,a=i.faceGroup.getChildAt(o);a.source="ui_fc"+DateUtils.formatTimeNum(n)}return i.touchEnabled=!0,i.touchChildren=!0,i.bg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i._OnCloseClick,i),i.faceGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,i._OnClick,i),i}return __extends(t,e),t.prototype._OnCloseClick=function(e){DisplayUtils.removeFromParent(this)},t.prototype._OnClick=function(e){var t=this.faceGroup.$children.indexOf(e.target);this.m_Callback&&(this.m_Callback(t+1),this.m_Callback=null),DisplayUtils.removeFromParent(this)},t.prototype.SetPos=function(e,t){this.posGroup.x=e,this.posGroup.y=t},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.m_Callback&&(this.m_Callback=null)},t}(eui.Component);__reflect(ChatFaceView.prototype,"ChatFaceView");var ChatInfoData=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;if(i.time=0,i.superMonthCard=0,!t)return i;if(t)if(egret.is(t,"Sproto.chat_data")){var o=t;i.type=o.type,i.id=o.id,i.name=o.name,i.job=o.job,i.sex=o.sex,i.vip=o.vip,i.share=o.share,i.str=o.str,i.serverid=o.serverid,i.time=o.time,i.headframe=o.headframe}else if(egret.is(t,"Sproto.guild_chat")){var n=t;i.name=n.name,i.type=ChatType.Guild,i.id=n.playerid,i.type2=t.type,i.job=t.job,i.sex=t.sex,i.str=n.content,i.vip=n.vip,i.monthCard=0,i.time=n.time,i.share=n.share,i.headframe=n.headframe}else console.log("not type => "+t);return i}return __extends(t,e),t.prototype.IsTipType=function(){return this.type==ChatType.Public||this.type==ChatType.System||this.type==ChatType.Guild&&0==this.type2},t}(ChatDataBase);__reflect(ChatInfoData.prototype,"ChatInfoData");var ChatSystemData=function(e){function t(t,i,o){var n=e.call(this)||this;return n.type=t,n.str=i,n.time=o||0,n}return __extends(t,e),t}(ChatDataBase);__reflect(ChatSystemData.prototype,"ChatSystemData");var ChatInputView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChatInputSkin",t.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnSend,t),t.biaoQingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.OnClick=function(){var e=this;if(this.faceGroup.numChildren>0)return void this.faceGroup.removeChildren();var t=new ChatFaceView(function(t){e.input.text+="["+t+"]"});t.SetPos(0,0),this.faceGroup.addChild(t)},t.prototype.SetCallback=function(e){this.m_Callback=e},t.prototype.SetText=function(e){this.input.text=e},t.prototype.OnSend=function(){this.m_Callback&&this.m_Callback(this.input.text)},t}(eui.Component);__reflect(ChatInputView.prototype,"ChatInputView");var ChatLabel=function(e){function t(){var t=e.call(this)||this;return t.imgList=[],t.skinName="ChatLabelSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"textColor",{set:function(e){this.label.textColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{set:function(e){this.label.maxWidth=e,egret.superSetter(t,this,"maxWidth",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{set:function(e){this.label.width=e,egret.superSetter(t,this,"width",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{set:function(e){this.SetText(null,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFlow",{set:function(e){this.RemoveImg(),this.label.textFlow=e,this.validateNow()},enumerable:!0,configurable:!0}),t.prototype.SetText=function(e,t){var i=10;this.label.text=" ",i=this.label.textWidth,this.label.text="",this.RemoveImg();for(var o=this.ReplaceFace(this.label,e,t,i),n=0,a=o;n<a.length;n++){var r=a[n];this.GetImg(r.x,r.y,r.face)}this.validateNow()},t.prototype.RemoveImg=function(){var e=this.group.numChildren;if(e){for(var t=0;e>t;t++)this.imgList.push(this.group.getChildAt(t));this.group.removeChildren()}},t.prototype.childrenCreated=function(){this.label.addEventListener(egret.TextEvent.LINK,this.onLinkText,this)},t.prototype.onLinkText=function(e){this.dispatchEvent(e)},t.prototype.ReplaceFace=function(e,t,i,o){var n=new RegExp("\\[\\d+?\\]","g"),a=i.match(n),r=[];if(null!=a){e.text="";for(var s=Math.ceil(40/o),l="",c=0;s>c;c++)l+=" ";var u=i.split(n),p=[];t&&(p=p.concat(t));for(var c=0;c<a.length;c++){var h=Number(a[c].match("\\d+")[0]);h>=0&&25>=h?(u[c]&&p.push({text:u[c],style:{}}),p.push({text:l,style:{faceId:h}})):p.push({text:u[c]+a[c],style:{}})}u[a.length]&&p.push({text:u[a.length],style:{}}),e.textFlow=p,e.validateNow();for(var d=0,_=0,f=e.$getLinesArr();_<f.length;_++){var m=f[_];d+=m.height;for(var g=0,v=0,y=m.elements;v<y.length;v++){var C=y[v];C.style&&C.style.faceId&&r.push({x:g,y:d,face:C.style.faceId}),g+=C.width}}}else if(t){var p=[];p=p.concat(t),p.push({text:i,style:{}}),e.textFlow=p}else e.text=i;return r},t.prototype.GetImg=function(e,t,i){var o=this.imgList.pop()||new eui.Image;return o.source="ui_fc"+DateUtils.formatTimeNum(i),o.x=e,o.y=t-32,this.group.addChild(o),o},t}(eui.Component);__reflect(ChatLabel.prototype,"ChatLabel",["eui.UIComponent","egret.DisplayObject"]);var ChatPanel=function(e){function t(){var t=e.call(this)||this;t.selectedIndex=0,t.skinName="ChatSkin";var i=new ceui.CVerticalLayout;return i.paddingLeft=3,i.paddingTop=6,i.gap=7,t.list.layout=i,t.list.itemRenderer=ChatItem,t.bar.dataProvider=new eui.ArrayCollection(["全 部","世 界","帮 会"]),t.input.SetCallback(function(e){t.OnSend(e)}),t._AddItemClick(t.bar,t._OnItemClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.PLAYER_COPY_NAME,this.setInputTxt),this.mCommonWindowBg.OnAdded(this),this.bar.selectedIndex=0,this._UpdateContent()},t.prototype.OnClose=function(){this.list.dataProvider=null,this.mCommonWindowBg.OnRemoved()},t.prototype.setInputTxt=function(e){this.input.SetText(e)},t.prototype._OnItemClick=function(){switch(this.bar.selectedIndex){case 0:break;case 1:break;case 2:if(!Chat.CanGuildChat())return void(this.bar.selectedIndex=this.selectedIndex)}this.selectedIndex=this.bar.selectedIndex,this._UpdateContent()},t.prototype._UpdateContent=function(){var e,t=this.bar.selectedIndex;e=1==t?GameGlobal.Chat.worldchatList:2==t?GameGlobal.Chat.guildchatList:GameGlobal.Chat.minichatList,this.list.dataProvider=e},t.prototype.OnSend=function(e){var t=this;Chat.Send(this.bar.selectedIndex,e,function(){t.input.SetText("")})},t.GetFlagImg=function(e){return e==ChatType.Guild?"ui_lt_bm_jiazu":e==ChatType.Normal||e==ChatType.NormalPublic?"ui_lt_bm_shijie":"ui_lt_bm_xitong"},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ChatPanel.prototype,"ChatPanel");var ChatItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;if(e.type)switch(e.type){case ChatType.Public:case ChatType.System:this.SetContent(3);break;case ChatType.Normal:case ChatType.Guild:case ChatType.NormalPublic:0==e.type2?this.SetContent(3):e.id==GameGlobal.actorModel.actorID?this.SetContent(2):this.SetContent(1)}},t.prototype.SetContent=function(e){var t=this["content"+e];t.parent||this.addChild(t),t.skinName||(t.skinName="ChatItem"+e+"Skin",t.roleNameTxt.addEventListener(egret.TextEvent.LINK,this.onLinkText,this),t.contentTxt&&t.contentTxt.addEventListener(egret.TextEvent.LINK,this.onLinkText,this)),this["SetData"+e](t,this.data);for(var i=1;3>=i;i++){var o=this["content"+i];i!=e&&DisplayUtils.removeFromParent(o)}},t.prototype.onLinkText=function(e){GameGlobal.Chat.HandleChatShare(e,this.data)},t.prototype.SetData1=function(e,t){this.SetChatData(e,t)},t.prototype.SetData2=function(e,t){this.SetChatData(e,t)},t.prototype.SetChatData=function(e,t){t.id==GameGlobal.actorModel.actorID?e.roleNameTxt.text=t.name:e.roleNameTxt.textFlow=TextFlowMaker.generateTextFlow("<u><a href='event:"+t.id+"'>"+t.name+"</a></u>"),t.headframe&&(e.head.imgFrame.source=ResDataPath.GetHeadFrameImgName(t.headframe)),UIHelper.SetHead(e.head,t.job,t.sex);var i=GameGlobal.Chat.analyzeCn(t);i||t.type==ChatType.NormalPublic?e.contentTxt.textFlow=TextFlowMaker.generateTextFlow(t.str+i):e.contentTxt.text=t.str,e.flagImg.source=ChatPanel.GetFlagImg(t.type)},t.prototype.SetData3=function(e,t){e.flagImg.source=ChatPanel.GetFlagImg(t.type);var i=GameGlobal.Chat.analyzeCn(t);e.roleNameTxt.textFlow=TextFlowMaker.generateTextFlow(t.str+i)},t}(eui.ItemRenderer);__reflect(ChatItem.prototype,"ChatItem");var ChatTipsWin=function(e){function t(){var t=e.call(this)||this;return t.time=0,t}return __extends(t,e),t.prototype.initUI=function(){this.skinName="ChatTipsWinSkin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.sureBtn,this.onTouch),this.AddClick(this.cancelBtn,this.onTouch),this.AddClick(this.checkbox,this.onTouch),this.time=e[0],this.callback=e[1],this.update()},t.prototype.onTouch=function(e){var t=GlobalConfig.ins().ChatConstConfig;switch(e.currentTarget){case this.sureBtn:GameLogic.ins().actorModel.yb<t.cost?UserTips.ins().showTips("|C:0xff0000&T:元宝不足|"):this.callback&&this.callback(),ViewManager.ins().close(this);break;case this.cancelBtn:GameGlobal.Chat.isNoShowTipsPanel=!1,ViewManager.ins().close(this);break;case this.checkbox:GameGlobal.Chat.isNoShowTipsPanel=this.checkbox.selected}},t.prototype.update=function(){this.time>0&&(TimerManager.ins().isExists(this.updateCD,this)||TimerManager.ins().doTimer(1e3,this.time,this.updateCD,this),this.show())},t.prototype.show=function(){var e=GlobalConfig.ins().ChatConstConfig;this.descTF.textFlow=TextFlowMaker.generateTextFlow1("世界频道每次发言需间隔"+e.worldChatCd+"秒，"+this.time+"秒后可以免费发言\n花费|C:0xEEEE00&T:"+e.cost+"元宝|即可立即发言")},t.prototype.updateCD=function(){this.time--,this.time<=0&&(TimerManager.ins().remove(this.updateCD,this),ViewManager.ins().close(this)),this.show()},t.prototype.OnClose=function(){TimerManager.ins().remove(this.updateCD,this)},t}(BaseEuiView);__reflect(ChatTipsWin.prototype,"ChatTipsWin"),ChatTipsWin.LAYER_LEVEL=LayerManager.UI_Popup;var MiniChatItemRender=function(e){function t(){var t=e.call(this)||this;return t.m_IsClickLink=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.roleNameTxt.addEventListener(egret.TextEvent.LINK,this.onLinkText,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._OnTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnTouchDown,this)},t.prototype._OnTouchBegin=function(){this.m_IsClickLink=!1},t.prototype._OnTouchDown=function(e){this.m_IsClickLink||e.target!=this.flagImg&&(this.m_Context||(this.m_Context=Util.GetParentByType(this,MiniChatPanel)),this.m_Context.OpenChatPanel())},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.width=MiniChatPanel.CANVAS_WIDTH,this.roleNameTxt.width=this.width-this.roleNameTxt.x;var i=this.data,o=i.type;if(null!=o){this.flagImg.source=ChatPanel.GetFlagImg(i.type);var n=GameGlobal.Chat.analyzeCn(this.data);if(i.IsTipType())this.roleNameTxt.textFlow=TextFlowMaker.generateTextFlow(i.str+n);else if(o==ChatType.Normal||o==ChatType.NormalPublic||o==ChatType.Guild){var a,r=t.filterContentStr(this.data.str);a=i.id==GameGlobal.GameLogic.actorModel.actorID?"<font color = '0x83dafe'><u>"+t.getNameStr(this.data.name)+"</u></font>":"<font color = '0x83dafe'><a href='event:"+i.id+"'><u>"+t.getNameStr(this.data.name)+"</u></a></font>",n||o==ChatType.NormalPublic?this.roleNameTxt.textFlow=TextFlowMaker.generateTextFlow(a+r+n):this.roleNameTxt.SetText(TextFlowMaker.generateTextFlow(a),r)
}this.validateNow()}},t.prototype.onLinkText=function(e){this.m_IsClickLink=!0,GameGlobal.Chat.HandleChatShare(e,this.data)},t.filterContentStr=function(e){var t="";if(e){t=e;for(var i="<",o="&lt;",n=t.indexOf(i,0);n>=0;)t=t.replace(i,o),n=t.indexOf(i,n+o.length)}return t},t.getImageSpaceStr=function(e,t){e.width;t.text=" ";for(var i="",o=t.textWidth,n=Math.ceil(e.width/o),a=0;n>a;a++)i+=" ";return i},t.getNameStr=function(e){return e?"["+e+"]":""},t.IMAGE_POS_X=-1,t}(eui.ItemRenderer);__reflect(MiniChatItemRender.prototype,"MiniChatItemRender");var MiniChatItemRenderStateType;!function(e){e[e.Normal=0]="Normal",e[e.Month=1]="Month",e[e.VIP1=2]="VIP1",e[e.VIP2=3]="VIP2",e[e.Both1=4]="Both1",e[e.Both2=5]="Both2"}(MiniChatItemRenderStateType||(MiniChatItemRenderStateType={}));var MiniChatPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedIndex=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;GameGlobal.MessageCenter.addListener(MessageDef.PLAYER_NEWMSG_SHOW_RED_POINT,this.newMsg,this),GameGlobal.MessageCenter.addListener(MessageDef.PLAYER_COPY_NAME,this.setInputTxt,this),this.input.SetCallback(function(t){e.OnSend(t)}),this.list.layout=new ceui.CVerticalLayout,this.list.itemRenderer=MiniChatItemRender,this.list.dataProvider=null,this.btnGp.selectedIndex=0,this.selectedIndex=0,this.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.btnClip.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.msgBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.btnGp.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnTabTap,this),GameGlobal.MessageCenter.addListener(MessageDef.MINICHATSCAL,this.onlyMini,this),GameGlobal.MessageCenter.addListener(MessageDef.MINICHATSCAL_ALL,this.onlyAll,this),t.IS_ZOOM?(this.currentState="all",this.scrollHeight=210):(this.currentState="simple",this.scrollHeight=104),this.validateNow(),t.CANVAS_WIDTH=this.GetCanvasWidth(),egret.setTimeout(function(){e.UpdatePos(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_CHAT_ZOOM)},this,200)},t.prototype.GetCanvasWidth=function(){var e=this.canvas;return e.left&&e.right?GameGlobal.StageUtils.GetWidth()-e.left-e.right:e.width},t.prototype.openPanel=function(){this._DoRefresh(),egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.closePanel=function(){egret.MainContext.instance.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onResize=function(){var e=this;t.CANVAS_WIDTH=this.GetCanvasWidth(),UIHelper.ListRefresh(this.list),egret.setTimeout(function(){e.UpdatePos(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_CHAT_ZOOM)},this,200)},t.prototype._OnTabTap=function(){switch(this.btnGp.selectedIndex){case 0:break;case 1:break;case 2:if(!Chat.CanGuildChat())return void(this.btnGp.selectedIndex=this.selectedIndex)}this.selectedIndex=this.btnGp.selectedIndex,this.UpdateChatList()},t.prototype._OnClick=function(e){switch(e.target){case this.btnClip:ViewManager.ins().isShow(GameCityPanel)?t.GAME_CITY_CLICK=!0:t.PLAY_FUNC_CLICK=!0,this.onScalingChat();break;case this.msgBtn:ViewManager.ins().open(PlayerChatpanel,GameGlobal.PlayerInfoModel.getUserDate(),"MiniChatPanel"),this.redPoint.visible=!1;break;case this.bg:this.OpenChatPanel()}},t.prototype.SetAll=function(){this.currentState="all",this.validateNow(),this.scrollHeight=210,this.upDateChat(!0)},t.prototype.SetSimple=function(){this.currentState="simple",this.validateNow(),this.scrollHeight=104,this.upDateChat(!1)},t.prototype.onScalingChat=function(){"all"==this.currentState?this.SetSimple():this.SetAll()},t.prototype.onlyMini=function(){"simple"!=this.currentState&&this.SetSimple()},t.prototype.onlyAll=function(){"all"!=this.currentState&&this.SetAll()},t.prototype.upDateChat=function(e){t.IS_ZOOM=e,this.UpdatePos(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_CHAT_ZOOM,e),this._DoRefresh()},t.prototype.OpenChatPanel=function(){ViewManager.ins().open(ChatPanel)},t.prototype.UpdatePos=function(){var e=0;t.IS_ZOOM||(e=158),this.localToGlobal(0,e,egret.$TempPoint),t.POS=egret.$TempPoint.y},t.prototype.UpdateChatList=function(){var e;e=1==this.btnGp.selectedIndex?GameGlobal.Chat.worldchatList:2==this.btnGp.selectedIndex?GameGlobal.Chat.guildchatList:GameGlobal.Chat.minichatList,this.list.dataProvider!=e&&(this.list.dataProvider=e)},t.prototype._DoRefresh=function(){this.UpdateChatList()},t.Refresh=function(){if(ViewManager.ins().isShow(GameSceneView)){var e=ViewManager.ins().getView(GameSceneView);e.miniChat._DoRefresh()}},t.prototype.newMsg=function(e,t){this.redPoint.visible=e,this.msgBtn.visible=t},t.prototype.setInputTxt=function(e,t){void 0===t&&(t=!1),this.input.SetText(e),t||GameGlobal.UserTips.showTips("已复制名称至聊天内容")},t.prototype.OnSend=function(e){Chat.Send(this.btnGp.selectedIndex,e)&&this.input.SetText("")},t.UpdateViewPos=function(e,i){void 0===i&&(i=null),i||(i=e.parent),i?(i.globalToLocal(0,t.POS,egret.$TempPoint),e.y=egret.$TempPoint.y):e.y=t.POS},t.GAME_CITY_CLICK=!1,t.PLAY_FUNC_CLICK=!1,t.IS_ZOOM=!0,t.POS=860,t.CANVAS_WIDTH=644,t}(eui.Component);__reflect(MiniChatPanel.prototype,"MiniChatPanel",["eui.UIComponent","egret.DisplayObject"]);var ChangeLinerWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChangeLinerSkin",t._AddClick(t.btnChange,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="切换线路",this.observe(MessageDef.CHANNEL_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.CHANNEL_UPDATE_LIST,this.UpdateList),GameGlobal.CommonRaidModel.SendGetChannelInfo(),this.list.itemRenderer=LinerItem,this.UpdateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.UpdateContent=function(){var e=GameGlobal.CommonRaidModel.mMainCityInfo;e&&(this.labLine.text=e.channelid+"线",this.imgPoint.source=GameGlobal.CommonRaidModel.GetPointSource(e.people),GameGlobal.CommonRaidModel.mRecordChannelId=e.channelid);var t=GameGlobal.CommonRaidModel.mChannelInfos;this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t.prototype._OnClick=function(e){var t=GameGlobal.CommonRaidModel.mMainCityInfo;if(t){var i=GameGlobal.CommonRaidModel.mRecordChannelId;if(i==t.channelid)return void this.CloseSelf();GameGlobal.CommonRaidModel.SendEnterCity(i),this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ChangeLinerWin.prototype,"ChangeLinerWin");var LinerItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClicked,this)},t.prototype.dataChanged=function(){var e=this.data;this.btn.label=e.id+"线",this.btn.enabled=e.id!=GameGlobal.CommonRaidModel.mRecordChannelId,this.imgPoint.source=GameGlobal.CommonRaidModel.GetPointSource(e.count)},t.prototype._OnBtnClicked=function(e){GameGlobal.CommonRaidModel.mRecordChannelId=this.data.id,GameGlobal.CommonRaidModel.RefreshChannelList()},t}(eui.ItemRenderer);__reflect(LinerItem.prototype,"LinerItem");var GameCityPanel=function(e){function t(){var t=e.call(this)||this;t.ruleList={},t.skinName="GameCityPanelSkin";for(var i=0,o=t.gGroup.$children;i<o.length;i++){var n=o[i];if(egret.is(n,"eui.Button")){var a=n.getChildByName("redPoint");a&&(a.visible=!1)}}t.SetFullType(),t._AddIconRule(t.fuliBtn,FuliIconRule),t._AddIconRule(t.kaifuBtn,KaiFuIconRule),t._AddIconRule(t.dailyChargeBtn,DailyChargeIconRule),t._AddIconRule(t.fightPetFBBtn,FightPetFBIconRule),t._AddIconRule(t.sevenDayBtn,SevenDayIconRule),t._AddIconRule(t.shootUpBtn,ShootUpIconRule),t._AddIconRule(t.treasureBtn,TreasureIconRule),t._AddIconRule(t.totemsDraw2Btn,TotemsDrawIconRule2),t._AddIconRule(t.totemsBtn,TotemsIconRule),t._AddIconRule(t.rebateBtn,RebateIconRule),t._AddIconRule(t.godPetAwardBtn,GodPetAwardIconRule),t._AddIconRule(t.godPetLotteryBtn,GodPetLotteryIconRule),t._AddIconRule(t.godXinJunLotteryBtn,GodXinJunLotteryIconRule),t._AddIconRule(t.godLotteryBtn,GodLotteryIconRule),t._AddIconRule(t.growupBtn,GrowUpIconRule),t._AddIconRule(t.investmentBtn,InvestmentIconRule),t._AddIconRule(t.jingCaiBtn,JingCaiIconRule),t._AddIconRule(t.xuannvBtn,XuannvBefallIconRule),t._AddIconRule(t.discountBtn,DiscountRule),t._AddIconRule(t.mysteryShopBtn,MysteryRule),t._AddIconRule(t.dailyChargeGiftBtn,DailyChargeGiftIconRule),t._AddIconRule(t.rechargeFeedbackBtn,RechargeFeedbackIconRule),t._AddIconRule(t.destinyBtn,DestinyIconRule),t._AddIconRule(t.auctionBtn,AuctionIconRule),t._AddIconRule(t.btnShop,ShopIconRule),t._AddIconRule(t.btnEquipSp,EquipSpIconRule),t._AddIconRule(t.btnMail,MailIconRule),t._AddIconRule(t.friendBtn,FriendRule),t._AddIconRule(t.btnKuaFu,KuaFuIconRule),t._AddIconRule(t.btnArena,ArenaIconRule),t._AddIconRule(t.btnBoss,BossIconRule),t._AddIconRule(t.btnFuBen,FubenIconRule),t._AddIconRule(t.btnRelation,RelationIconRule),t._AddIconRule(t.btnActive,ActivityIconRule),t._AddIconRule(t.yingYue,YingYuanIconRule),t._AddIconRule(t.gangBtn,GangIconRule);for(var r in t.ruleList){var s=t.ruleList[r];s.DoHide()}return XuannvBefallIconRule.AutoCheckShow()&&t.AddTimer(800,1,t.AutoShowXuannv),t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return this.validateNow(),this.rightGroup.validateNow(),e={},e[1]=this.btnFuBen,e;var e},t.prototype.SetFullType=function(){},t.prototype.AutoShowXuannv=function(){XuannvBefallIconRule.AutoShow()},t.prototype.destoryView=function(){},t.prototype._AddIconRule=function(e,t){return this.ruleList[e.hashCode]=new t(e),this._AddClick(e,this.onTap),this.ruleList[e.hashCode]},t.prototype.onTap=function(e){return this.ruleList[e.currentTarget.hashCode]?void this.ruleList[e.currentTarget.hashCode].tapExecute(e.target):void 0},t.prototype.OnOpen=function(){this.playerInfo.OnOpen(),this.observe(MessageDef.PLAYER_VIEW_ONCITYMAP,this.RecordViewPlayerId),MiniChatPanel.GAME_CITY_CLICK||GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL);var e=SubRoles.ins().GetRoleData();this.homeRoleShowPanel.SetAll(e),this.addRuleEvent(),this.updateRules(),this._AddClick(this.xuannvCard,this._Onclick),this.updateXuannvCard(),GameGlobal.StageUtils.GetStage().addEventListener(egret.Event.RESIZE,this.OnFullScreenResize,this,!1,999),this.OnFullScreenResize()},t.prototype.OnClose=function(){this.playerInfo.OnClose(),GameGlobal.StageUtils.GetStage().removeEventListener(egret.Event.RESIZE,this.OnFullScreenResize,this),this.removeRuleEvent()},t.prototype.updateXuannvCard=function(){Deblocking.Check(DeblockingType.TYPE_118,!0)&&((!Deblocking.Check(DeblockingType.TYPE_19,!0)||UserVip.ins().lv>=9&&!BitUtil.Has(UserVip.ins().otherreward,9))&&!t.firstShowXuanNv&&(this.xuannvCard.visible=GameGlobal.RechargeModel.xuanNvCard),UserVip.ins().lv>=9&&!BitUtil.Has(UserVip.ins().otherreward,9)&&ViewManager.ins().open(HavingTipsPanel)),t.firstShowXuanNv&&(GameGlobal.RechargeModel.xuanNvCard=!1),t.firstShowXuanNv=!1},t.prototype._Onclick=function(e){switch(e.currentTarget){case this.xuannvCard:this.xuannvCard.visible=!1,ViewManager.ins().open(HavingTipsPanel)}},t.prototype.RecordViewPlayerId=function(e){this.mRecordViewPlayerId=e},t.prototype.addRuleEvent=function(){var e;for(var t in this.ruleList)e=this.ruleList[t],e.updateMessage&&e.addEvent()},t.prototype.removeRuleEvent=function(){for(var e in this.ruleList){var t=this.ruleList[e];t&&t.updateMessage&&t.removeEvent()}},t.prototype.updateRules=function(){TimerManager.ins().doNext(this.startUpdateRule,this)},t.prototype.startUpdateRule=function(){for(var e in this.ruleList)this.ruleList[e].update()},t.openCheck=function(){return Deblocking.Check(DeblockingType.TYPE_95)},t.LAYER_LEVEL=LayerManager.UI_Main,t.firstShowXuanNv=!0,t}(BaseEuiView);__reflect(GameCityPanel.prototype,"GameCityPanel");var NpcDialogPopWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="NpcDialogSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=GameGlobal.Config.CityNpcConfig[i];o&&(this.imgIcon.source=o.icon,this.cmlabName.text=o.npcname,this.labDesc.text=this.GetRandomDesc(o.des))},t.prototype.OnClose=function(){},t.prototype.GetRandomDesc=function(e){if(!e||0==e.length)return"";var t=e.length,i=Math.floor(Math.random()*(t-.1));return e[i]},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(NpcDialogPopWin.prototype,"NpcDialogPopWin");var TheFirstPlayerTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="TheFirstPlayerTipSkin",t._AddClick(t.btnNormal,t._OnClick),t._AddClick(t.btnCost,t._OnClick),t._AddClick(t.btnHelp,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="战力第一";var i=GameGlobal.Config.CityBaseConfig.goldworship;this.price.type=i.id,this.price.price=i.count,this.btnCost.label=GameGlobal.actorModel.GetCurrencyName(i.id)+"膜拜",this.observe(MessageDef.MAIN_CITY_INFO,this.UpdateContent),this.observe(MessageDef.PALYER_INFO,this.UpdatePlayerInfo);var o=GameGlobal.CommonRaidModel.mMainCityInfo;if(o){GameGlobal.PlayerInfoModel.sendOtherId(o.championid);var n=GameGlobal.Config.CityBaseConfig.worshipreward;this.itemNormal.setItemAward(n.type,n.id,n.count);var a=GameGlobal.Config.CityBaseConfig.goldworshipreward;this.itemCost.setItemAward(a.type,a.id,a.count),this.UpdateContent()}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.UpdateContent=function(){var e=GameGlobal.CommonRaidModel.mMainCityInfo;e&&(this.labCharm.text=""+e.charismaNum,this.btnNormal.visible=0==e.worship,this.btnCost.visible=0==e.worship,this.imgNormal.visible=1==e.worship,this.imgCost.visible=2==e.worship)},t.prototype.UpdatePlayerInfo=function(e){this.labName.text=""+e.name,this.powerLabel.text=e.power,e.shows[RoleShowDataType.ROLE_TITLE]=1902,this.roleShowPanel.SetShowImage(e)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCost:var t=GameGlobal.Config.CityBaseConfig.goldworship;WarnWin.show("是否花费"+t.count+GameGlobal.actorModel.GetCurrencyName(t.id)+"膜拜？",function(){Checker.Money(t.id,t.count,!0,null,function(){GameGlobal.CommonRaidModel.SendWorship(2)})},this);break;case this.btnNormal:GameGlobal.CommonRaidModel.SendWorship(1);break;case this.btnHelp:ViewManager.ins().open(ActivityDescPanel,26,"规则说明")}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TheFirstPlayerTipWin.prototype,"TheFirstPlayerTipWin");var ActivityIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i.tar.redPoint=i.tar.getChildByName("redPoint"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(ActivityWin)},t}(RuleIconBase);__reflect(ActivityIconRule.prototype,"ActivityIconRule");var ArenaIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ARENA_INFO_DATA,MessageDef.ARENA_BUY_RESULT],i.tar.redPoint=i.tar.getChildByName("redPoint"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_42,!0)?GameGlobal.Arena.IsRedPoint()?!0:GameGlobal.Ladder.IsRedPoint()?!0:!1:!1},t.prototype.tapExecute=function(){ViewManager.ins().open(ArenaWin)},t}(RuleIconBase);__reflect(ArenaIconRule.prototype,"ArenaIconRule");var ArenaionSpIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_ARENA,ShopController.EN_SHOP_JINGJI,ShopController.EN_SHOP_QUJING,ShopController.EN_SHOP_DATI])},t}(RuleIconBase);__reflect(ArenaionSpIconRule.prototype,"ArenaionSpIconRule");var BossIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ALL_BOSS_NOTICE],i.tar.redPoint=i.tar.getChildByName("redPoint"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_44,!0)?GameGlobal.BossModel.IsRedPoint():!1},t.prototype.tapExecute=function(){ViewManager.ins().open(BossMainPanel)},t}(RuleIconBase);__reflect(BossIconRule.prototype,"BossIconRule");var DailyChargeGiftIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!Deblocking.Check(DeblockingType.TYPE_140,!0))return!1;var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(28);if(!e||!e.isOpenActivity()||e.AllGotten())return!1;var t=e.runday,i=e.GetConfig()[t-1];return this.tar.icon=i.icon,!0},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(28);return e&&e.hasReward()?!0:!1},t.prototype.tapExecute=function(){ViewManager.ins().open(DailyChargeGiftWin)},t}(RuleIconBase);__reflect(DailyChargeGiftIconRule.prototype,"DailyChargeGiftIconRule");var CircleLoading=function(){function e(){this.m_IsShow=!1,this.speed=.6,this.init()}return e.prototype.init=function(){var e=new eui.Group;this.content=e,e.percentWidth=100,e.percentHeight=100,e.touchEnabled=!0;var t=new eui.Image;t.percentWidth=100,t.percentHeight=100,e.addChild(t),this.uiImageContainer=new eui.Group,this.uiImageContainer.horizontalCenter=0,this.uiImageContainer.verticalCenter=0,e.addChild(this.uiImageContainer),this.label=new eui.Label,e.addChild(this.label),this.label.size=24,this.label.stroke=2,this.label.strokeColor=Color.Black,this.label.text="断线重连中",this.label.horizontalCenter=0,this.label.verticalCenter=90;var i=new eui.Image;i.source="load_Reel",i.x=.5*-i.width,i.y=.5*-i.height,this.uiImageContainer.addChild(i)},e.prototype.enterFrame=function(e){this.uiImageContainer.rotation+=this.speed*e},e.prototype._Show=function(){this.label&&(this.label.visible=!0),this.m_IsShow=!0,GameGlobal.StageUtils.GetUIStage().addChild(this.content),TimerManager.ins().doFrame(1,0,this.enterFrame,this)},e.prototype._Hide=function(){this.m_IsShow=!1,this.label&&(this.label.visible=!1),this.content&&this.content.parent&&(GameGlobal.StageUtils.GetUIStage().removeChild(this.content),this.uiImageContainer.rotation=0),TimerManager.ins().remove(this.enterFrame,this)},e}();__reflect(CircleLoading.prototype,"CircleLoading");var DestinyIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_144)},t.prototype.checkShowRedPoint=function(){return GameGlobal.DestinyController.mRedPoint.IsRedPoint()},t.prototype.tapExecute=function(){ViewManager.ins().open(DestinyUpWin,1)},t}(RuleIconBase);__reflect(DestinyIconRule.prototype,"DestinyIconRule");var EquipSpIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ITEM_COUNT_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_70,!0)},t.prototype.checkShowRedPoint=function(){return GameGlobal.UserBag.HasOrangeEquip()},t.prototype.tapExecute=function(){ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_EQUIP])},t}(RuleIconBase);__reflect(EquipSpIconRule.prototype,"EquipSpIconRule");var FashionSpIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_ZHUANGBAN,ShopController.EN_SHOP_PIFU,ShopController.EN_SHOP_YOUQING,ShopController.EN_SHOP_WEIWANG])},t}(RuleIconBase);__reflect(FashionSpIconRule.prototype,"FashionSpIconRule");var Sproto;!function(e){var t=function(){function t(){this.m_Buffer=new e.SByteArray,this.m_Tmp=new Uint8Array([0,0,0,0,0,0,0,0])}return t.prototype._Writeff=function(t,i,o,n){var a=n+7&-8,r=this.m_Buffer.Position;this.m_Buffer.Seek(o,e.SeekOrigin.Begin),this.m_Buffer.WriteByte(255),this.m_Buffer.WriteByte(a/8-1),this.m_Buffer.WriteBytes(t,i,n);for(var s=0;a-n>s;s++)this.m_Buffer.WriteByte(0);this.m_Buffer.Seek(r,e.SeekOrigin.Begin)},t.prototype.PackSeg=function(t,i,o){var n=0,a=0,r=this.m_Buffer.Position;this.m_Buffer.Seek(1,e.SeekOrigin.Current);for(var s=0;8>s;s++)0!=t[i+s]&&(a++,n|=1<<s,this.m_Buffer.WriteByte(t[i+s]));return(7==a||6==a)&&o>0&&(a=8),8==a?o>0?(this.m_Buffer.Seek(r,e.SeekOrigin.Begin),8):(this.m_Buffer.Seek(r,e.SeekOrigin.Begin),10):(this.m_Buffer.Seek(r,e.SeekOrigin.Begin),this.m_Buffer.WriteByte(n),this.m_Buffer.Seek(r,e.SeekOrigin.Begin),a+1)},t.prototype.Pack=function(t,i){void 0===i&&(i=0),this.Clear();for(var o=0==i?t.length:i,n=null,a=0,r=0,s=0,l=t,c=0,u=0;o>u;u+=8){c=u;var p=u+8-o;if(p>0){for(var h=0;8-p>h;h++)this.m_Tmp[h]=l[u+h];for(var h=0;p>h;h++)this.m_Tmp[7-h]=0;l=this.m_Tmp,c=0}var d=this.PackSeg(l,c,s);10==d?(n=l,a=c,r=this.m_Buffer.Position,s=1):8==d&&s>0?(++s,256==s&&(this._Writeff(n,a,r,2048),s=0)):s>0&&(this._Writeff(n,a,r,8*s),s=0),this.m_Buffer.Seek(d,e.SeekOrigin.Current)}if(1==s)this._Writeff(n,a,r,8);else if(s>1){var _=n==t?o:n.length;this._Writeff(n,a,r,_-a)}var f=(o+2047)/2048*2+o+2;f<this.m_Buffer.Position&&e.SprotoTypeSize.error("packing error, return size="+this.m_Buffer.Position);var m=new Uint8Array(this.m_Buffer.Position);return this.m_Buffer.Seek(0,e.SeekOrigin.Begin),this.m_Buffer.ReadBytes(m,0,m.length),m},t.prototype.Unpack=function(t,i){void 0===i&&(i=0),this.Clear(),i=0==i?t.length:i;for(var o=i;o>0;){var n=t[i-o];if(--o,255==n){0>o&&e.SprotoTypeSize.error("invalid unpack stream.");var a=8*(t[i-o]+1);a+1>o&&e.SprotoTypeSize.error("invalid unpack stream."),this.m_Buffer.WriteBytes(t,i-o+1,a),o-=a+1}else for(var r=0;8>r;r++){var s=n>>r&1;1==s?(0>o&&e.SprotoTypeSize.error("invalid unpack stream."),this.m_Buffer.WriteByte(t[i-o]),--o):this.m_Buffer.WriteByte(0)}}var l=new Uint8Array(this.m_Buffer.Position);return this.m_Buffer.Seek(0,e.SeekOrigin.Begin),this.m_Buffer.ReadBytes(l,0,l.length),l},t.prototype.Clear=function(){this.m_Buffer.Seek(0,e.SeekOrigin.Begin);for(var t=0;t<this.m_Tmp.length;t++)this.m_Tmp[t]=0},t}();e.SprotoPack=t,__reflect(t.prototype,"Sproto.SprotoPack")}(Sproto||(Sproto={}));var FubenIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.FB_REDPOINT_NOTICE],i.tar.redPoint=i.tar.getChildByName("redPoint"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return!0},t.prototype.checkShowRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_35,!0)?GameGlobal.UserFb.IsRedPoint():!1},t.prototype.tapExecute=function(){ViewManager.ins().open(FbLayer)},t}(RuleIconBase);__reflect(FubenIconRule.prototype,"FubenIconRule");var Sproto;!function(e){var t=function(){function e(){}return e.Init=function(t){e.m_RpcReqHandlerDict={},e.mProtocol=t},e.AddHandler=function(t,i,o){i&&(e.m_RpcReqHandlerDict[t]={HandlerFunc:i,thisObject:o})},e.AddHandlers=function(t,i,o){if(i){var n=e.m_RpcReqHandlerDict[t];null==n&&(n={},n.HandlerFunc=function(e){for(var t=0,i=this.list;t<i.length;t++){var o=i[t];o.func.call(o.obj,e)}},n.thisObject=n,n.list=[],e.m_RpcReqHandlerDict[t]=n),n.list.push({func:i,obj:o})}},e.HandlerType=function(t,i,o,n){var a=e.m_RpcReqHandlerDict[t];if(null==a)return console.log("无法处理消息",t),null;var r=e.mProtocol.GenRequest(t,o,n),s=a.HandlerFunc.call(a.thisObject,r);return null!=i?s:null},e}();e.SprotoReceiver=t,__reflect(t.prototype,"Sproto.SprotoReceiver")}(Sproto||(Sproto={}));var GangIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.GANG_ALL_NOTICE,MessageDef.GANG_EXIT_NOTICE],i.tar.redPoint=i.tar.getChildByName("redPoint"),i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return GameGlobal.GangModel.mRedPoint.IsRedPoint()},t.prototype.tapExecute=function(){GameGlobal.GangModel.HasGang()?ViewManager.ins().open(GangMainWin):ViewManager.ins().open(GangListWin)},t}(RuleIconBase);__reflect(GangIconRule.prototype,"GangIconRule");var Sproto;!function(e){var t=function(){function t(){}return t.Init=function(i){t.m_Session=0,t.m_RpcRspHandlerDict={},t.m_SessionDict={},t.m_SendPack=new e.SprotoPack,t.m_SendStream=new e.SprotoStream,t.m_Protocol=i},t.Pack=function(e,i,o,n){if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=null),null!=o){var a=++t.m_Session;return t.m_RpcRspHandlerDict[a]=n&&o.bind(n)||o,t.m_SessionDict[a]=t.m_Protocol.Get(e).ResponseType,t.SendData(i,a,e)}return t.SendData(i,null,e)},t.SendData=function(i,o,n){var a=new e.Spackage;a.type=n,null!=o&&(a.session=o);var r=t.m_SendStream;r.Seek(0,e.SeekOrigin.Begin);var s=e._encode_Spackage(a,2,r);null!=i&&(s+=e.ALL_DICT[t.m_Protocol.Get(n).RequestType].en(i,r));var l=t.m_SendPack.Pack(r.Buffer,s);return l.length>t.MAX_PACK_LEN?(console.log("data.Length > "+t.MAX_PACK_LEN+" => "+l.length),null):new egret.ByteArray(l.buffer)},t.HandlerSession=function(i,o,n){var a=t.m_SessionDict[i],r=t.m_RpcRspHandlerDict[i];if(a&&r){var s=e.SprotoCore.GetDeserialize(o,n,o.length),l=e.ALL_DICT[a].de(s);e.SprotoCore.CloseDeserialize(s),r(l)}else console.warn("SprotoSender.Handler not found => "+i);t.m_SessionDict[i]=null,t.m_RpcRspHandlerDict[i]=null,delete t.m_SessionDict[i],delete t.m_RpcRspHandlerDict[i]},t.MAX_PACK_LEN=65535,t}();e.SprotoSender=t,__reflect(t.prototype,"Sproto.SprotoSender")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){this.size=128,this.pos=0,this.buffer=new Uint8Array(this.size)}return Object.defineProperty(t.prototype,"Position",{get:function(){return this.pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Buffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),t.prototype._Expand=function(t){if(void 0===t&&(t=0),this.size-this.pos<t){for(var i=this.size;this.size-this.pos<t;)this.size=2*this.size;this.size>=e.SprotoTypeSize.ENCODE_MAX_SIZE&&e.SprotoTypeSize.error("object is too large (>"+e.SprotoTypeSize.ENCODE_MAX_SIZE+")");for(var o=new Uint8Array(this.size),n=0;i>n;n++)o[n]=this.buffer[n];this.buffer=o}},t.prototype.WriteByte=function(e){this._Expand(1),this.buffer[this.pos++]=e},t.prototype.Write=function(e,t,i){this._Expand(i);for(var o=0;i>o;o++)this.buffer[this.pos++]=e[t+o]},t.prototype.Seek=function(t,i){switch(i){case e.SeekOrigin.Begin:this.pos=t;break;case e.SeekOrigin.Current:this.pos+=t;break;case e.SeekOrigin.End:this.pos=this.size+t}return this._Expand(),this.pos},t.prototype.Read=function(e,t,i){for(var o=0;i>o;o++)e[t+o]=this.buffer[this.pos++]},t.prototype.MoveUp=function(e,t){if(!(0>=t)){for(var i=this.pos-e,o=0;i>o;o++)this.buffer[e-t+o]=this.buffer[e+o];this.pos-=t}},t.prototype.Get=function(e){return(0>e||e>=this.size)&&egret.error("invalid idx:"+e+"@get"),this.buffer[e]},t.prototype.Set=function(e,t){(0>e||e>=this.size)&&egret.error("invalid idx:"+e+"@set"),this.buffer[e]=t},t}();e.SprotoStream=t,__reflect(t.prototype,"Sproto.SprotoStream")}(Sproto||(Sproto={}));var GodXinJunLotteryIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.GODXINJUNACTIVE_LOTTERY_NOTICE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_146,!0)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(GodXinJunActiveLotteryWin)},t}(RuleIconBase);__reflect(GodXinJunLotteryIconRule.prototype,"GodXinJunLotteryIconRule");var Sproto;!function(e){var t=function(){function t(){this.tag=-1,this.reader=new e.SprotoTypeReader}return t.prototype.Init=function(e,t,i){this.Clear(),this.reader.Init(e,t,i),this._DoInit()},t.prototype._DoInit=function(){this.fn=this._ReadWord();var t=e.SprotoTypeSize.SIZEOF_HEADER+this.fn*e.SprotoTypeSize.SIZEOF_FIELD;this.begin_data_pos=t,this.cur_field_pos=this.reader.Position,this.reader.Length<t&&e.SprotoTypeSize.error("invalid decode header."),this.reader.Seek(this.begin_data_pos)},t.prototype._Expand64=function(e){var t=e;return 0!=(2147483648&t)&&(t|=0xffffffff00000000),t},t.prototype._ReadWord=function(){var e=this.reader.ReadByte(),t=this.reader.ReadByte();return Math.pow(2,8)*t+e},t.prototype._ReadDword=function(){var e=this.reader.ReadByte(),t=this.reader.ReadByte(),i=this.reader.ReadByte(),o=this.reader.ReadByte();return o*Math.pow(2,24)+i*Math.pow(2,16)+t*Math.pow(2,8)+e},t.prototype._ReadDouble=function(){var e=this.reader.ReadByte(),t=this.reader.ReadByte(),i=this.reader.ReadByte(),o=this.reader.ReadByte(),n=this.reader.ReadByte(),a=this.reader.ReadByte(),r=this.reader.ReadByte(),s=this.reader.ReadByte();return s*Math.pow(2,56)+r*Math.pow(2,48)+a*Math.pow(2,40)+n*Math.pow(2,32)+o*Math.pow(2,24)+i*Math.pow(2,16)+t*Math.pow(2,8)+e},t.prototype._ReadArraySize=function(){this.value>=0&&e.SprotoTypeSize.error("invalid array value.");var t=this._ReadDword();return 0>t&&e.SprotoTypeSize.error("error array size("+t+")"),t},t.prototype.rt=function(){var e=this.reader.Position;for(this.reader.Seek(this.cur_field_pos);this.reader.Position<this.begin_data_pos;){this.tag++;var t=this._ReadWord();if(0==(1&t))return this.cur_field_pos=this.reader.Position,this.reader.Seek(e),this.value=Math.floor(.5*t)-1,this.tag;this.tag+=Math.floor(.5*t)}return this.reader.Seek(e),-1},t.prototype.ri=function(){if(this.value>=0)return this.value;var i=this._ReadDword();if(i==t.sizeof_uint32){var o=this._Expand64(this._ReadDword());return o}return i==t.sizeof_uint64?this._ReadDouble():(e.SprotoTypeSize.error("read invalid integer size ("+i+")"),0)},t.prototype.ria=function(){var i=null,o=this._ReadArraySize();if(0==o)return[];var n=this.reader.ReadByte();if(o--,n==t.sizeof_uint32){o%t.sizeof_uint32!=0&&e.SprotoTypeSize.error("error array size("+o+")@sizeof(Uint32)"),i=[];for(var a=0;a<o/t.sizeof_uint32;a++){var r=this._Expand64(this._ReadDword());i.push(r)}}else if(n==t.sizeof_uint64){o%t.sizeof_uint64!=0&&e.SprotoTypeSize.error("error array size("+o+")@sizeof(Uint64)"),i=[];for(var a=0;a<o/t.sizeof_uint64;a++){var s=this._ReadDouble();i.push(s)}}else e.SprotoTypeSize.error("error intlen("+n+")");return i},t.prototype.rb=function(){return this.value<0?(e.SprotoTypeSize.error("read invalid boolean."),!1):0==this.value?!1:!0},t.prototype.rba=function(){for(var e=this._ReadArraySize(),t=[],i=0;e>i;i++){var o=0==this.reader.ReadByte()?!1:!0;t.push(o)}return t},t.prototype.rs=function(){var e=this._ReadDword(),t=new Uint8Array(e);return this.reader.Read(t,0,t.length),BitUtil.decodeUTF8(t)},t.prototype.rsa=function(){for(var t=this._ReadArraySize(),i=[],o=0;t>0;o++){t<e.SprotoTypeSize.SIZEOF_LENGTH&&e.SprotoTypeSize.error("error array size.");var n=this._ReadDword();t-=e.SprotoTypeSize.SIZEOF_LENGTH,n>t&&e.SprotoTypeSize.error("error array object.");var a=new Uint8Array(n);this.reader.Read(a,0,a.length);var r=BitUtil.decodeUTF8(a);i.push(r),t-=n}return i},t.prototype.ro=function(t){var i=this._ReadDword(),o=e.SprotoCore.GetDeserialize(this.reader.Buffer,this.reader.Offset,i);this.reader.Seek(this.reader.Position+i);var n=e.ALL_DICT[t].de(o);return e.SprotoCore.CloseDeserialize(o),n},t.prototype._ReadElement=function(t,i){var o=0;i<e.SprotoTypeSize.SIZEOF_LENGTH&&e.SprotoTypeSize.error("error array size.");var n=this._ReadDword();i-=e.SprotoTypeSize.SIZEOF_LENGTH,o+=e.SprotoTypeSize.SIZEOF_LENGTH,n>i&&e.SprotoTypeSize.error("error array object.");var a=e.SprotoCore.GetDeserialize(this.reader.Buffer,this.reader.Offset,n);
this.reader.Seek(this.reader.Position+n);var r=e.ALL_DICT[t].de(a);return e.SprotoCore.CloseDeserialize(a),o+=n,[r,o]},t.prototype.roa=function(e){for(var t=this._ReadArraySize(),i=[],o=0;t>0;o++){var n=this._ReadElement(e,t),a=n[0],r=n[1];i.push(a),t-=r}return i},t.prototype.ReadMap=function(e,t){for(var i=this._ReadArraySize(),o={},n=0;i>0;n++){var a=this._ReadElement(e,i),r=a[0],s=a[1],l=t(r);o[l]=r,i-=s}return o},t.prototype.nod=function(){if(this.value<0){var e=this._ReadDword();this.reader.Seek(e+this.reader.Position)}},t.prototype.Size=function(){return this.reader.Position},t.prototype.Clear=function(){this.fn=0,this.tag=-1,this.value=0,this.reader&&this.reader.Clear()},t.sizeof_uint64=8,t.sizeof_uint32=4,t}();e.SprotoTypeDeserialize=t,__reflect(t.prototype,"Sproto.SprotoTypeDeserialize")}(Sproto||(Sproto={}));var Sproto;!function(e){var t=function(){function t(){}return Object.defineProperty(t.prototype,"Buffer",{get:function(){return this.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Position",{get:function(){return this.pos-this.begin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Length",{get:function(){return this.size-this.begin},enumerable:!0,configurable:!0}),t.prototype.Init=function(e,t,i){this.begin=t,this.pos=t,this.buffer=e,this.size=t+i,this.check()},t.prototype.check=function(){(this.pos>this.size||this.begin>this.pos)&&e.SprotoTypeSize.error("invalid pos.")},t.prototype.ReadByte=function(){return this.check(),this.buffer[this.pos++]},t.prototype.Seek=function(e){this.pos=this.begin+e,this.check()},t.prototype.Read=function(e,t,i){var o=this.pos;this.pos+=i,this.check();for(var n=o;n<this.pos;n++)e[t+n-o]=this.buffer[n]},t.prototype.Clear=function(){this.pos=this.begin=0,this.buffer=null},t}();e.SprotoTypeReader=t,__reflect(t.prototype,"Sproto.SprotoTypeReader")}(Sproto||(Sproto={}));var JinJieRankIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!Deblocking.Check(DeblockingType.TYPE_9,!0))return!1;var e=GameServer.serverOpenDay;if(e<=GameGlobal.Config.ProgressCrazyBaseConfig.initialorder.length){var t=GameGlobal.Config.ProgressCrazyBaseConfig.rankbtn[GameGlobal.Config.ProgressCrazyBaseConfig.initialorder[e-1]-1];this.iconDisplay.source=t}else this.iconDisplay.source="";return e<=GameGlobal.Config.ProgressCrazyBaseConfig.initialorder.length},t.prototype.checkShowRedPoint=function(){return t.mIsFirst?!0:!1},t.prototype.tapExecute=function(){t.mIsFirst=!1,KaiFuActivityWin.Show(ActivityKaiFuFuncType.ACT_99991_JiJieRank,!1)},t.mIsFirst=!0,t}(RuleIconBase);__reflect(JinJieRankIconRule.prototype,"JinJieRankIconRule");var Sproto;!function(e){var t=function(){function t(){this.m_HeaderCap=e.SprotoTypeSize.SIZEOF_HEADER,this.m_Lasttag=-1,this.m_Index=0,this.m_DataView=new DataView(new ArrayBuffer(8))}return t.prototype._SetHeaderFn=function(e){this.m_Data.Set(this.m_HeaderIdx-2,255&e),this.m_Data.Set(this.m_HeaderIdx-1,e>>8&255)},t.prototype._WriteHeaderRecord=function(e){this.m_Data.Set(this.m_HeaderIdx+this.m_HeaderCap-2,255&e),this.m_Data.Set(this.m_HeaderIdx+this.m_HeaderCap-1,e>>8&255),this.m_HeaderCap+=2,this.m_Index++},t.prototype._WriteUint32ToUint64Sign=function(e){var t=e?255:0;this.m_Data.WriteByte(t),this.m_Data.WriteByte(t),this.m_Data.WriteByte(t),this.m_Data.WriteByte(t)},t.prototype._WriteTag=function(t,i){var o=t-this.m_Lasttag-1;o>0&&(o=2*(o-1)+1,o>65535&&e.SprotoTypeSize.error("tag is too big."),this._WriteHeaderRecord(o)),this._WriteHeaderRecord(i),this.m_Lasttag=t},t.prototype._WriteInt32=function(e){this.m_DataView.setInt32(0,e),this.m_Data.WriteByte(this.m_DataView.getUint8(3)),this.m_Data.WriteByte(this.m_DataView.getUint8(2)),this.m_Data.WriteByte(this.m_DataView.getUint8(1)),this.m_Data.WriteByte(this.m_DataView.getUint8(0))},t.prototype._WriteUint64=function(e){this.m_Data.WriteByte(255&e),this.m_Data.WriteByte(e/Math.pow(2,8)&255),this.m_Data.WriteByte(e/Math.pow(2,16)&255),this.m_Data.WriteByte(e/Math.pow(2,24)&255),this.m_Data.WriteByte(e/Math.pow(2,32)&255),this.m_Data.WriteByte(e/Math.pow(2,40)&255),this.m_Data.WriteByte(e/Math.pow(2,48)&255),this.m_Data.WriteByte(e/Math.pow(2,56)&255)},t.prototype._FillSize=function(t){0>t&&e.SprotoTypeSize.error("fill invaild size."),this._WriteInt32(t)},t.prototype._EncodeInteger=function(t){return this._FillSize(4),this._WriteInt32(t),e.SprotoTypeSize.SIZEOF_LENGTH+4},t.prototype._EncodeUint64=function(i){return this._FillSize(t.sizeof_uint64),this._WriteUint64(i),e.SprotoTypeSize.SIZEOF_LENGTH+t.sizeof_uint64},t.prototype._EncodeString=function(t){var i=BitUtil.encodeUTF8(t);return this._FillSize(i.length),this.m_Data.Write(i,0,i.length),e.SprotoTypeSize.SIZEOF_LENGTH+i.length},t.prototype._EncodeStruct=function(t,i){var o=this.m_Data.Position;this.m_Data.Seek(e.SprotoTypeSize.SIZEOF_LENGTH,e.SeekOrigin.Current);var n=e.ALL_DICT[t].en(i,this.m_Data),a=this.m_Data.Position;return this.m_Data.Seek(o,e.SeekOrigin.Begin),this._FillSize(n),this.m_Data.Seek(a,e.SeekOrigin.Begin),e.SprotoTypeSize.SIZEOF_LENGTH+n},t.prototype._Clear=function(){this.m_Index=0,this.m_HeaderIdx=2,this.m_Lasttag=-1,this.m_Data=null,this.m_HeaderCap=e.SprotoTypeSize.SIZEOF_HEADER},t.prototype.wi=function(i,o){this.m_DataView.setInt32(0,i);var n=this.m_DataView.getInt32(0)==i?t.sizeof_uint32:t.sizeof_uint64,a=0;if(n==t.sizeof_uint32){var r=i;0==r||1==r?(a=2*(r+1),n=2):n=this._EncodeInteger(r)}else if(n==t.sizeof_uint64){var r=i;n=this._EncodeUint64(r)}else e.SprotoTypeSize.error("invaild integer size.");this._WriteTag(o,a)},t.prototype.wia=function(i,o){if(!(null==i||i.length<=0)){var n=this.m_Data.Position;this.m_Data.Seek(n+e.SprotoTypeSize.SIZEOF_LENGTH,e.SeekOrigin.Begin);var a=this.m_Data.Position,r=t.sizeof_uint32;this.m_Data.Seek(a+1,e.SeekOrigin.Begin);for(var s=0;s<i.length;s++){var l=i[s],c=l;this.m_DataView.setInt32(0,c);var u=this.m_DataView.getInt32(0)==c?t.sizeof_uint32:t.sizeof_uint64;if(u==t.sizeof_uint32){if(this._WriteInt32(l),r==t.sizeof_uint64){var p=0==(2147483648&l)?!1:!0;this._WriteUint32ToUint64Sign(p)}}else if(u==t.sizeof_uint64){if(r==t.sizeof_uint32){this.m_Data.Seek(a+1,e.SeekOrigin.Begin);for(var h=0;s>h;h++){var d=i[h];this._WriteUint64(d)}r=t.sizeof_uint64}this._WriteUint64(l)}else e.SprotoTypeSize.error("invalid integer size("+u+")")}var _=this.m_Data.Position;this.m_Data.Seek(a,e.SeekOrigin.Begin),this.m_Data.WriteByte(r);var f=_-a;this.m_Data.Seek(n,e.SeekOrigin.Begin),this._FillSize(f),this.m_Data.Seek(_,e.SeekOrigin.Begin),this._WriteTag(o,0)}},t.prototype.wb=function(e,t){var i=e?1:0;this.wi(i,t)},t.prototype.wba=function(e,t){if(!(null==e||e.length<=0)){this._FillSize(e.length);for(var i=0;i<e.length;i++){var o=e[i]?1:0;this.m_Data.WriteByte(o)}this._WriteTag(t,0)}},t.prototype.ws=function(e,t){this._EncodeString(e),this._WriteTag(t,0)},t.prototype.wsa=function(t,i){if(!(null==t||t.length<=0)){var o=0;for(var n in t)o+=e.SprotoTypeSize.SIZEOF_LENGTH+BitUtil.UTF8ByteCount(n);this._FillSize(o);for(var n in t)this._EncodeString(n);this._WriteTag(i,0)}},t.prototype.wo=function(e,t,i){this._EncodeStruct(e,t),this._WriteTag(i,0)},t.prototype.WriteSet=function(t,i){var o=this.m_Data.Position;this.m_Data.Seek(e.SprotoTypeSize.SIZEOF_LENGTH,e.SeekOrigin.Current),t();var n=this.m_Data.Position,a=n-o-e.SprotoTypeSize.SIZEOF_LENGTH;this.m_Data.Seek(o,e.SeekOrigin.Begin),this._FillSize(a),this.m_Data.Seek(n,e.SeekOrigin.Begin),this._WriteTag(i,0)},t.prototype.woa=function(e,t,i){var o=this;if(!(null==t||t.length<=0)){var n=function(){for(var i=0,n=t;i<n.length;i++){var a=n[i];o._EncodeStruct(e,a)}};this.WriteSet(n,i)}},t.prototype.wod=function(e,t,i){var o=this;if(!(null==t||t.length<=0)){var n=function(){for(var i=0,n=t;i<n.length;i++){var a=n[i];o._EncodeStruct(e,t[a])}};this.WriteSet(n,i)}},t.prototype.Open=function(t,i){this._Clear(),this.m_HeaderSz=e.SprotoTypeSize.SIZEOF_HEADER+i*e.SprotoTypeSize.SIZEOF_FIELD,this.m_Data=t,this.m_HeaderIdx=t.Position+this.m_HeaderCap,this.m_DataIdx=this.m_Data.Seek(this.m_HeaderSz,e.SeekOrigin.Current)},t.prototype.Close=function(){this._SetHeaderFn(this.m_Index);var t=this.m_HeaderSz-this.m_HeaderCap;this.m_Data.MoveUp(this.m_DataIdx,t);var i=this.m_Data.Position-this.m_HeaderIdx+e.SprotoTypeSize.SIZEOF_HEADER;return this._Clear(),i},t.sizeof_uint64=8,t.sizeof_uint32=4,t}();e.SprotoTypeSerialize=t,__reflect(t.prototype,"Sproto.SprotoTypeSerialize")}(Sproto||(Sproto={}));var KuaFuIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.KF_BOSS_UPDATE_INFO],i.tar.redPoint=i.tar.getChildByName("redPoint"),i.imgDouble=i.tar.getChildByName("imgDouble"),i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_63,!0)?GameGlobal.CrossTeamModel.IsDoubleReward()?(this.imgDouble.visible=!0,!1):(this.imgDouble.visible=!1,GameGlobal.AcrossBossController.IsAcrossBossAct()):!1},t.prototype.checkShowIcon=function(){return!0},t.prototype.tapExecute=function(){ViewManager.ins().open(CrossMainPanel)},t}(RuleIconBase);__reflect(KuaFuIconRule.prototype,"KuaFuIconRule");var MonthIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return this.iconDisplay.source="ui_zc_bt_yueka",Deblocking.Check(DeblockingType.TYPE_127,!0)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){var e=GameGlobal.Config.LvRewardConfig,t=!0;for(var i in e)if(t=(GameGlobal.FuliModel.FuliData.lvMark&1<<e[i].id)<1)break;0==t?ViewManager.ins().open(FuliWin,3):ViewManager.ins().open(FuliWin,4)},t}(RuleIconBase);__reflect(MonthIconRule.prototype,"MonthIconRule");var PositionRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.POSITION_AWARD_CHANGE,MessageDef.LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=GameGlobal.Config.StationConfig,t=GameGlobal.PositionForeshowModel.position_info,i=!1;if(t)for(var o in t.data)if(3!=t.data[o].typ&&GameGlobal.actorModel.level>=e[parseInt(o)+1].showlv){this.iconDisplay.source="ui_zjm_bt_zw0"+(parseInt(o)+2),i=!0;break}return Deblocking.IsDeblocking(DeblockingType.TYPE_142)&&i},t.prototype.checkShowRedPoint=function(){return GameGlobal.PositionForeshowModel.isRedPoint()},t.prototype.tapExecute=function(){ViewManager.ins().open(PositionForeshowPanel)},t}(RuleIconBase);__reflect(PositionRule.prototype,"PositionRule");var Sproto;!function(e){var t=function(){function e(){}return e.error=function(e){egret.error(e)},e.SIZEOF_HEADER=2,e.SIZEOF_LENGTH=4,e.SIZEOF_FIELD=2,e.ENCODE_MAX_SIZE=16777216,e}();e.SprotoTypeSize=t,__reflect(t.prototype,"Sproto.SprotoTypeSize")}(Sproto||(Sproto={}));var RechargeFeedbackIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!Deblocking.Check(DeblockingType.TYPE_141,!0))return!1;var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(29);return e&&e.isOpenActivity()&&!e.AllGotten()?(this.setTime(1e3*e.endTime),!0):!1},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(29);return e&&e.hasReward()?!0:!1},t.prototype.tapExecute=function(){ViewManager.ins().open(RechargeFeedbackWin)},t}(RuleIconBase);__reflect(RechargeFeedbackIconRule.prototype,"RechargeFeedbackIconRule");var RelationIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_41,!0)},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.TeacherController.teacherInfo.messageData.length;return e>0},t.prototype.tapExecute=function(){var e=GameGlobal.Config.MasterBaseConfig.openid;Deblocking.Check(e)&&ViewManager.ins().open(RelationWin)},t}(RuleIconBase);__reflect(RelationIconRule.prototype,"RelationIconRule");var RmbGiftIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.effX=RuleIconBase.POS1_X,i.effY=RuleIconBase.POS1_Y,i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.ACTIVITY_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(9);if(e){var t=e.GetConfig();if(!t[e.reachday])return!1;if(this.tar.icon=t[e.reachday].icon,e.runday<e.reachday)return!1;if(e.runday==e.reachday&&!e.isLastDay())return!0;if(e.isOpenActivity()&&Deblocking.Check(DeblockingType.TYPE_104,!0))return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(9);return e?e.canGetRecordByIndex(e.reachday+1):!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(RmbGiftPanel)},t}(RuleIconBase);__reflect(RmbGiftIconRule.prototype,"RmbGiftIconRule");var AESUtil=function(){function e(){this.delta=2654435769}return e.getInstance=function(){return e.instance||(e.instance=new e,e.instance.initInstance()),this.instance},e.prototype.initInstance=function(){},e.prototype.toUint8Array=function(e,t){var i=e.length,o=i<<2;if(t){var n=e[i-1];if(o-=4,o-3>n||n>o)return null;o=n}for(var a=new Uint8Array(o),r=0;o>r;++r)a[r]=e[r>>2]>>((3&r)<<3);return a},e.prototype.toUint32Array=function(e,t){var i=e.length,o=i>>2;0!==(3&i)&&++o;var n;t?(n=new Uint32Array(o+1),n[o]=i):n=new Uint32Array(o);for(var a=0;i>a;++a)n[a>>2]|=e[a]<<((3&a)<<3);return n},e.prototype.mx=function(e,t,i,o,n,a){return(i>>>5^t<<2)+(t>>>3^i<<4)^(e^t)+(a[3&o^n]^i)},e.prototype.fixk=function(e){if(e.length<16){var t=new Uint8Array(16);t.set(e),e=t}return e},e.prototype.encryptUint32Array=function(e,t){var i,o,n,a,r,s,l=e.length,c=l-1;for(o=e[c],n=0,s=0|Math.floor(6+52/l);s>0;--s){for(n+=this.delta,a=n>>>2&3,r=0;c>r;++r)i=e[r+1],o=e[r]+=this.mx(n,i,o,r,a,t);i=e[0],o=e[c]+=this.mx(n,i,o,r,a,t)}return e},e.prototype.decryptUint32Array=function(e,t){var i,o,n,a,r,s,l=e.length,c=l-1;for(i=e[0],s=Math.floor(6+52/l),n=s*this.delta;0!==n;n-=this.delta){for(a=n>>>2&3,r=c;r>0;--r)o=e[r-1],i=e[r]-=this.mx(n,i,o,r,a,t);o=e[c],i=e[0]-=this.mx(n,i,o,r,a,t)}return e},e.prototype.toBytes=function(e){for(var t=e.length,i=new Uint8Array(3*t),o=0,n=0;t>n;n++){var a=e.charCodeAt(n);if(128>a)i[o++]=a;else if(2048>a)i[o++]=192|a>>6,i[o++]=128|63&a;else{if(!(55296>a||a>57343)){if(t>n+1){var r=e.charCodeAt(n+1);if(56320>a&&r>=56320&&57343>=r){var s=((1023&a)<<10|1023&r)+65536;i[o++]=240|s>>18,i[o++]=128|s>>12&63,i[o++]=128|s>>6&63,i[o++]=128|63&s,n++;continue}}throw new Error("Malformed string")}i[o++]=224|a>>12,i[o++]=128|a>>6&63,i[o++]=128|63&a}}return i.subarray(0,o)},e.prototype.toShortString=function(e,t){for(var i=new Uint16Array(t),o=0,n=0,a=e.length;t>o&&a>n;o++){var r=e[n++];switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i[o]=r;break;case 12:case 13:if(!(a>n))throw new Error("Unfinished UTF-8 octet sequence");i[o]=(31&r)<<6|63&e[n++];break;case 14:if(!(a>n+1))throw new Error("Unfinished UTF-8 octet sequence");i[o]=(15&r)<<12|(63&e[n++])<<6|63&e[n++];break;case 15:if(!(a>n+2))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;if(!(s>=0&&1048575>=s))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));i[o++]=s>>10&1023|55296,i[o]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+r.toString(16))}}return t>o&&(i=i.subarray(0,o)),String.fromCharCode.apply(String,i)},e.prototype.toLongString=function(e,t){for(var i=[],o=new Uint16Array(65535),n=0,a=0,r=e.length;t>n&&r>a;n++){var s=e[a++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o[n]=s;break;case 12:case 13:if(!(r>a))throw new Error("Unfinished UTF-8 octet sequence");o[n]=(31&s)<<6|63&e[a++];break;case 14:if(!(r>a+1))throw new Error("Unfinished UTF-8 octet sequence");o[n]=(15&s)<<12|(63&e[a++])<<6|63&e[a++];break;case 15:if(!(r>a+2))throw new Error("Unfinished UTF-8 octet sequence");var l=((7&s)<<18|(63&e[a++])<<12|(63&e[a++])<<6|63&e[a++])-65536;if(!(l>=0&&1048575>=l))throw new Error("Character outside valid Unicode range: 0x"+l.toString(16));o[n++]=l>>10&1023|55296,o[n]=1023&l|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}if(n>=65534){var c=n+1;i.push(String.fromCharCode.apply(String,o.subarray(0,c))),t-=c,n=-1}}return n>0&&i.push(String.fromCharCode.apply(String,o.subarray(0,n))),i.join("")},e.prototype.toString=function(e){var t=e.length;return 0===t?"":1e5>t?this.toShortString(e,t):this.toLongString(e,t)},e.prototype.encrypt=function(e,t){return"string"==typeof e&&(e=this.toBytes(e)),"string"==typeof t&&(t=this.toBytes(t)),void 0===e||null===e||0===e.length?e:this.toUint8Array(this.encryptUint32Array(this.toUint32Array(e,!0),this.toUint32Array(this.fixk(t),!1)),!1)},e.prototype.encryptToString=function(e,t){return this.encrypt(e,t).toString("base64")},e.prototype.decrypt=function(e,t){return"string"==typeof e&&(e=e.toString()),"string"==typeof t&&(t=this.toBytes(t)),void 0===e||null===e||0===e.length?e:this.toUint8Array(this.decryptUint32Array(this.toUint32Array(e,!1),this.toUint32Array(this.fixk(t),!1)),!0)},e.prototype.decryptToString=function(e,t){return this.toString(this.decrypt(e,t))},e}();__reflect(AESUtil.prototype,"AESUtil");var PointF=function(){function e(){}return e}();__reflect(PointF.prototype,"PointF");var Bezier=function(){function e(e){this.pos=e[0];var t=this.cx=3*(e[1].x-e[0].x),i=this.bx=3*(e[2].x-e[1].x)-t,o=(this.ax=e[3].x-e[0].x-t-i,this.cy=3*(e[1].y-e[0].y)),n=this.by=3*(e[2].y-e[1].y)-o;this.ay=e[3].y-e[0].y-o-n}return e.PointOnCubicBezier=function(e,t,i){var o,n,a,r,s,l,c,u;a=3*(e[1].x-e[0].x),n=3*(e[2].x-e[1].x)-a,o=e[3].x-e[0].x-a-n,l=3*(e[1].y-e[0].y),s=3*(e[2].y-e[1].y)-l,r=e[3].y-e[0].y-l-s,c=t*t,u=c*t,i.x=o*u+n*c+a*t+e[0].x,i.y=r*u+s*c+l*t+e[0].y},e.prototype.Get=function(e,t){var i=e*e,o=i*e;t.x=this.ax*o+this.bx*i+this.cx*e+this.pos.x,t.y=this.ay*o+this.by*i+this.cy*e+this.pos.y},e}();__reflect(Bezier.prototype,"Bezier");var ShopIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_66,!0)},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(ShopCommonPanel)},t}(RuleIconBase);__reflect(ShopIconRule.prototype,"ShopIconRule");var TianxianIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){ViewManager.ins().open(TianxianMainPanel)},t}(RuleIconBase);__reflect(TianxianIconRule.prototype,"TianxianIconRule");var TotemsDrawIconRule=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_137,!0)?!0:!1},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(TotemsGoodLuckMainWin,0)},t}(RuleIconBase);__reflect(TotemsDrawIconRule.prototype,"TotemsDrawIconRule");var TotemsDrawIconRule2=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_143)?!0:!1},t.prototype.checkShowRedPoint=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(TotemsGoodLuckMainWin,1)},t}(RuleIconBase);__reflect(TotemsDrawIconRule2.prototype,"TotemsDrawIconRule2");var TotemsIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.TOTEMS_REDPOINT_NOTICE,MessageDef.TOTEMS_UPDATEACTIVATION],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_119,!0)?!0:!1},t.prototype.checkShowRedPoint=function(){return GameGlobal.TotemsModel.mRedPoint.showRedPoint()?!0:!1},t.prototype.tapExecute=function(){ViewManager.ins().open(TotemsMainWin)},t}(RuleIconBase);__reflect(TotemsIconRule.prototype,"TotemsIconRule");var ColorMatrixFilter=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.$addTarget=function(e){},t.prototype.$removeTarget=function(e){},t.prototype.invalidate=function(){},t}(egret.ColorMatrixFilter);__reflect(ColorMatrixFilter.prototype,"ColorMatrixFilter");var Color=function(){function e(){}return e.GetStr=function(e){return"0x"+Number(e||0).toString(16)},e.GetFilter=function(){return this.grayFilters},e.Red=16711680,e.Green=65280,e.Blue=255,e.White=16777215,e.Black=0,e.Yellow=16771844,e.Cyan=65535,e.Magenta=16711935,e.Gray=8421504,e.GrayAttr=8158332,e.GrayLabel=5263440,e.l_green_1=104196,e.l_green_2=3014466,e.l_brown_2=6827776,e.l_gray=9738651,e.GREEN_LIGHT=3342080,e.l_normal=7222027,e.NameBlue=42495,e.TitleYellow=16109665,e.grayFilters=[new ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])],e.WhiteColor=15135220,e.White1Color=13486001,e.YellowWishColor=15392952,e.YellowColor=16764028,e.OrangeColor=16734720,e.RedColor=13440277,e.GreenColor=327440,e.BludColor=45553,e}();__reflect(Color.prototype,"Color");var UpLvIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(136,!0)},t.prototype.checkShowRedPoint=function(){return GameGlobal.UpLvWayModel.mRedPoint.showRedPoint()?!0:!1},t.prototype.tapExecute=function(){ViewManager.ins().open(UpLvWayMainWin)},t}(RuleIconBase);__reflect(UpLvIconRule.prototype,"UpLvIconRule");var CommonUtils=function(){function e(){}return e.CopyToClipboard=function(e){if(!e)return!1;var t=document.createElement("input");return t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t),!0},e.addLableStrokeColor=function(e,t,i){e.strokeColor=t,e.stroke=i},e.getObjectLength=function(e){var t=0;for(var i in e)t++;return t},e.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var i=Object.keys(e),o=0,n=i.length;n>o;o++){var a=i[o];t[a]=this.copyDataHandler(e[a])}return t},e.CopyTo=function(e,t){for(var i=Object.keys(e),o=0,n=i;o<n.length;o++){var a=n[o];t[a]=this.copyDataHandler(e[a])}},e.labelIsOverLenght=function(e,t){e.text=this.overLength(t)},e.overLength=function(e,t){if(void 0===t&&(t=!1),null==e)return"";var i=null;return 1e5>e?i=e:e>=1e8?e>=1e9?(e/=1e8,e=Math.floor(100*e)/100,i=e+"亿"):(i=Math.floor(e/1e8)+"亿",e%=1e8,e>1e4&&(i+=Math.floor(e/1e4)+"万")):(e/=1e4,e=Math.floor(10*e)/10,t&&(e=Math.floor(e)),i=e+"万"),i},e.GetArray=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!0),null==e)return[];var o=[];for(var n in e){var a=e[n];o.push(a)}if(t)try{i?o.sort(function(e,i){return e[t]-i[t]}):o.sort(function(e,i){return i[t]-e[t]})}catch(r){}return o},e.uintToVecBool=function(t,i){i>e.MAX_BIT_LEN&&(i=e.MAX_BIT_LEN);var o,n=[];for(o=0;i>o;o++)n[o]=(t&1<<o)>0;return n},e.vecBoolToUint=function(t){if(null==t)return 0;var i=t.length;if(0==i)return 0;i>e.MAX_BIT_LEN&&(i=e.MAX_BIT_LEN);var o,n,a=0;for(o=0;i>o;o++)n=1==t[o]?1:0,a|=n<<o;return t=null,a},e.ArrayEqual=function(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0},e.MAX_BIT_LEN=32,e}();__reflect(CommonUtils.prototype,"CommonUtils");var YingYuanIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.HOUSE_UPDATE_INFO],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_39,!0)||Deblocking.Check(DeblockingType.TYPE_41,!0)},t.prototype.checkShowRedPoint=function(){return GameGlobal.YingYuanModel.CanUpgrade()},t.prototype.tapExecute=function(){ViewManager.ins().open(YingYuanWin)},t}(RuleIconBase);__reflect(YingYuanIconRule.prototype,"YingYuanIconRule");var CrossGuildModel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(BaseSystem);__reflect(CrossGuildModel.prototype,"CrossGuildModel");var CrossGuildInfo=function(){function e(){this.reset()}return e.prototype.reset=function(){this.name="",this.power=this.score=0,this.state=3,this.isWaring=!1,this.isMySide=!0},e.prototype.updateInfo=function(e){},e}();__reflect(CrossGuildInfo.prototype,"CrossGuildInfo");var CrossGuildPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="CrossGuildSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBaseNotName,this.itemList.dataProvider=new eui.ArrayCollection},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.UpdateContent),this.AddClick(this.btnGo,this.onClick),this.AddClick(this.btnHelp,this.onClick)},t.prototype.onClick=function(e){e.target==this.btnHelp&&ViewManager.ins().open(CrossGuildTipPanel)},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve()},t.prototype.UpdateContent=function(){},t.NAME="帮会战",t}(BaseView);__reflect(CrossGuildPanel.prototype,"CrossGuildPanel",["ICommonWindowTitle"]);var CrossGuildTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="HavingSkillTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.childrenCreated=function(){var e="被动技能是由玄女法宝洗出技能后获得";this.descTxt.text=e},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(CrossGuildTipPanel.prototype,"CrossGuildTipPanel");var CrossGuildWarPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="CrossGuildWarSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.UpdateContent)},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){},t.NAME="帮会战",t}(BaseView);__reflect(CrossGuildWarPanel.prototype,"CrossGuildWarPanel",["ICommonWindowTitle"]);var CrossGuildCityItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.STATE_IMG=["xxx0","xxx1","xxx2","xxx3"],t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.tstate.visible=e.isWaring,this.stateImg.source=this.STATE_IMG[e.state],this.s1.visible=e.state>0,this.s2.visible=e.state>1,this.s3.visible=e.state>2,this.tname.textFlow=TextFlowMaker.generateTextFlow("0x0fc06"),this.tpower.textFlow=TextFlowMaker.generateTextFlow("战力：|C:0x000000&T:"+e.power+"|"),this.tscore.textFlow=TextFlowMaker.generateTextFlow("积分：|C:0x000000&T:"+e.score+"|")}},t}(eui.ItemRenderer);__reflect(CrossGuildCityItem.prototype,"CrossGuildCityItem");var CrossMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(CrossTeamPanel),TabView.CreateTabViewData(AcrossBossPanel),TabView.CreateTabViewData(TsumKoPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this,e[0]||0,e[1]),this.observe(MessageDef.KF_BOSS_UPDATE_INFO,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(0),this.mCommonWindowBg.CheckTalRedPoint(2)},t.prototype.OnOpenIndex=function(e){return 1==e?Deblocking.Check(DeblockingType.TYPE_64):2==e?Deblocking.Check(DeblockingType.TYPE_114):!0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 2==e[0]?Deblocking.Check(DeblockingType.TYPE_114):Deblocking.Check(DeblockingType.TYPE_63)},t.NAME="跨服",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(CrossMainPanel.prototype,"CrossMainPanel");var CrossTeamPanel=function(e){function t(){var t=e.call(this)||this;t.m_Model=GameGlobal.CrossTeamModel;GameGlobal.Config.CrossTeamConfig;return t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=GameGlobal.Config.CrossTeamConfig;this.teamBaseMemberView.SetTime(t.autoQuickTIme,t.autoFightTime)},t.prototype.InitInfo=function(){GameGlobal.CrossTeamModel.SendGetInfos(),this.observe(MessageDef.TEAM_FUBEN_INFO,this.UpdateInfo),this.UpdateInfo()},t.prototype.UpdateInfo=function(){var e=GameGlobal.Config.CrossTeamConfig;this.infoLabel.text=GameGlobal.CrossTeamModel.GetDesc(),this.teamBaseMemberView.SetCountLabel("剩余收益次数\n"+GameGlobal.CrossTeamModel.mCount+"/"+e.rewardCount)},t.prototype.GetFirstShowKey=function(){for(var e=this.m_Model.GetConfig(),t=null,i=0,o=e;i<o.length;i++){var n=o[i];if(!(GameGlobal.actorModel.level>=n.level))break;t=n.level}return t},t.RedPointCheck=function(){return GameGlobal.CrossTeamModel.IsDoubleReward()},t.NAME="跨服组队",t}(TeamBasePanel);__reflect(CrossTeamPanel.prototype,"CrossTeamPanel");var CommonFuHuoWin=function(e){function t(){var t=e.call(this)||this;return t.fuHuoTime=0,t.skinName="CommonFuHuSkin",t.percentWidth=100,t.percentHeight=100,t.fuhuoBnt.addEventListener(egret.TouchEvent.TOUCH_TAP,t.click,t),t}return __extends(t,e),t.prototype.SetData=function(e,t,i){this.mContext=this.parent,TimerManager.ins().removeAll(this),this.fuHuoTime=e,this.price=t,this.fun=i,this.fuhuoPrice.setType(this.price.id),this.fuhuoPrice.setPrice(this.price.count),this.fuhuoPrice.setColor(16777215),this.update(),TimerManager.ins().doTimer(1e3,this.fuHuoTime,this.update,this)},t.prototype.click=function(){Checker.Money(this.price.id,this.price.count,Checker.YUNBAO_FRAME)&&(this.fun&&this.fun(),DisplayUtils.removeFromParent(this))},t.prototype.OnClose=function(){TimerManager.ins().remove(this.update,this),DisplayUtils.removeFromParent(this)},t.prototype.update=function(){this.fuHuoTime--,this.fuhuoTime.text="复活倒计时："+this.fuHuoTime,this.fuHuoTime<=0&&(TimerManager.ins().remove(this.update,this),DisplayUtils.removeFromParent(this))},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.fun=null,TimerManager.ins().removeAll(this),this.mContext&&(this.mContext.mRebornView=null)},t}(eui.Component);__reflect(CommonFuHuoWin.prototype,"CommonFuHuoWin",["eui.UIComponent","egret.DisplayObject"]);var CrossBattleChargeWarn=function(e){function t(){var t=e.call(this)||this;return t.onTap=function(e){GameGlobal.CrossBattleModel.getBs()},t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CrossBattleChargeSkin"},t.prototype.OnOpen=function(){this.AddClick(this.sureBtn,this.onTap),this.commonDialog.OnAdded(this),this.commonDialog.setBgVisible(!0),this.updataView()},t.prototype.updataView=function(){this.petShowPanel.SetBodyId(300004)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeEvents()},t}(BaseEuiView);__reflect(CrossBattleChargeWarn.prototype,"CrossBattleChargeWarn"),CrossBattleChargeWarn.LAYER_LEVEL=LayerManager.UI_Popup;var CrossBattleCityInfomaTion=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CrossBattleCityInfomaTionSkin",this.list.itemRenderer=RoleHeadItem,this.jilulist.itemRenderer=jiLuItem},t.prototype.OnOpen=function(){this.CommonWindowBg.OnAdded(this),this.observe(MessageDef.KFZB_ONECITY_INFO,this.UpdateContent),this._AddClick(this.bloom,this.bloomOnTop),UIHelper.SetLinkStyleLabel(this.lvse),this._AddClick(this.lvse,this.lvseOntop),GameGlobal.MessageCenter.dispatch(MessageDef.UP_GROUP_SHOW,!1),this.AddLoopTimer(1e3,this.Update)
},t.prototype.bloomOnTop=function(){ViewManager.ins().open(CrossBattleTipPanel,4)},t.prototype.lvseOntop=function(){CrossBattleWin.SendGetPoint()},t.prototype.OnClose=function(){this.removeObserve(),this.removeEvents(),this.CommonWindowBg.OnRemoved(),GameGlobal.MessageCenter.dispatch(MessageDef.UP_GROUP_SHOW,!0)},t.prototype.Update=function(){if(GameGlobal.CrossBattleModel.oneCity){var e=GameServer.serverTime-GameGlobal.CrossBattleModel.oneCity.guardtime;this.scsjText.text="守城时间："+Math.max(e,0)+"秒"}},t.prototype.UpdateContent=function(){var e=GameGlobal.CrossBattleModel.oneCity;if(e){for(var t=e.guards.length;3>t;t++)e.guards.push(null);this.list.dataProvider=new eui.ArrayCollection(e.guards),this.pro.maximum=e.maxhp,this.pro.value=e.currhp,this.wcljText.text="累计王城积分："+e.point+"分（5/分）",this.jilulist.dataProvider=new eui.ArrayCollection(e.record)}},t.LAYER_LEVEL=LayerManager.UI_Main_2,t}(BaseEuiView);__reflect(CrossBattleCityInfomaTion.prototype,"CrossBattleCityInfomaTion");var jiLuItem=function(e){function t(){var t=e.call(this)||this;return t.TYPECOLOR=["#019704","#DB0000","#F77C67"],t.skinName="jiLuitemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data,t=GameServer.PanTaoHui(e.time)+"";t+='<font color = "'+this.TYPECOLOR[e.camp-1]+'">'+GameGlobal.CrossBattleModel.CITYNAME[e.camp]+"</font>";for(var i=0;i<e.names.length;i++)t+=e.names[i]+" ";t+="队伍攻城，被我方在3个回合击败，城池受到了"+e.changhp+"点伤害",this.text.textFlow=(new egret.HtmlTextParser).parser(t)},t}(eui.ItemRenderer);__reflect(jiLuItem.prototype,"jiLuItem");var CrossBattleCityInfoWarn=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CrossBattleCityInfoSkin",this.list.itemRenderer=RoleHeadItem,this.GwHeadItem.itemRenderer=GwHeadItem},t.prototype.OnOpen=function(){this.commonDialog.OnAdded(this),this.commonDialog.setBgVisible(!0),this.observe(MessageDef.KFZB_ONECITY_INFO,this.UpdateContent),this.AddClick(this.sureBtn,this.onTap),this.AddClick(this.bloom,this.bloomTap)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeEvents()},t.prototype.UpdateContent=function(){var e=GameGlobal.CrossBattleModel.oneCity;this.text.text=0==e.camp?"王城":"边城",e.currcamp==GameGlobal.CrossBattleModel.camp?(this.currentState="shou",this.all.visible=3==e.guards.length,this.sureBtn.visible=3!=e.guards.length):this.currentState="gong";for(var t=e.guards.length;3>t;t++)e.guards.push(null);for(var i=0,t=0;t<e.guards.length;t++)null!=e.guards[t]&&i++;0==i?(this.list.visible=!1,this.GwHeadItem.visible=!0):(this.list.visible=!0,this.GwHeadItem.visible=!1);for(var o=GameGlobal.Config.KingCityConfig[e.camp+1][10],n={bossicon:"",name:""},a=[],t=0;t<o.bossicon.length;t++)n.bossicon=o.bossicon[t],n.name=o.name[t],a.push(n);this.list.dataProvider=new eui.ArrayCollection(e.guards),this.GwHeadItem.dataProvider=new eui.ArrayCollection(a),this.pro.maximum=e.maxhp,this.pro.value=e.currhp,this.typeBuff.source=GameGlobal.CrossBattleModel.BUFFTYPE[e.currcamp],this.typeImg.source=GameGlobal.CrossBattleModel.ZHENGTYPE[e.currcamp],this.typeName.text=GameGlobal.CrossBattleModel.ZHENGNAME[e.currcamp]},t.prototype.bloomTap=function(){ViewManager.ins().open(CrossBattleTipPanel,4)},t.prototype.onTap=function(){var e=GameGlobal.CrossBattleModel.oneCity;if("gong"==this.currentState){if(1==GameGlobal.CrossBattleModel.status)return void UserTips.ErrorTip("无法攻击，处于准备状态");if(3==GameGlobal.CrossBattleModel.status)return void UserTips.ErrorTip("无法攻击，处于死亡状态");if(4==GameGlobal.CrossBattleModel.status)return void UserTips.ErrorTip("无法攻击，处于守城状态");GameGlobal.CrossBattleModel.attackCity(e.camp)}else{if(1==GameGlobal.CrossBattleModel.status)return void UserTips.ErrorTip("无法守城，处于准备状态");if(3==GameGlobal.CrossBattleModel.status)return void UserTips.ErrorTip("无法守城，处于死亡状态");if(4==GameGlobal.CrossBattleModel.status)return void UserTips.ErrorTip("无法守城，处于守城状态");GameGlobal.CrossBattleModel.fangShouCity(e.camp)}},t.prototype.buffShow=function(){},t.LAYER_LEVEL=LayerManager.UI_Main_2,t}(BaseEuiView);__reflect(CrossBattleCityInfoWarn.prototype,"CrossBattleCityInfoWarn");var CrossBattleJfView=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="争霸奖励",t.skinName="CrossBattleJfViewSkin",t.list.itemRenderer=CrossBattleJfItem,t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){GameGlobal.CrossBattleModel.getJfModel(),this.observe(MessageDef.JF_UPDATE_INFO,this.UpdateContent)},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.KingPointsRewardConfig,t=[];for(var i in e)t.push(i);var o=function(t){var i=Number(t);return GameGlobal.CrossBattleModel.commonpoint>e[i].partnerpoints&&-1==GameGlobal.CrossBattleModel.commonreward.indexOf(i)?-1e5+i:GameGlobal.CrossBattleModel.commonreward.indexOf(i)>-1?-1e3+i:GameGlobal.CrossBattleModel.commonpoint<e[i].partnerpoints?-1e4+i:void 0};t.sort(function(e,t){return o(e)-o(t)}),this.list.dataProvider=new eui.ArrayCollection(t)},t.NAME="个人贡献",t}(BaseView);__reflect(CrossBattleJfView.prototype,"CrossBattleJfView",["ICommonWindowTitle"]);var CrossBattleJfItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=Number(this.data),t=GameGlobal.Config.KingPointsRewardConfig;this.text.text="【贡献奖励】(个人贡献达"+t[e].partnerpoints+")",this.list.dataProvider=new eui.ArrayCollection(t[e].showItem),this.num.text=GameGlobal.CrossBattleModel.commonpoint+"/"+t[e].partnerpoints,this.wdc.visible=!1,this.ylq.visible=!1,this.bnt.visible=!1,GameGlobal.CrossBattleModel.commonpoint<t[e].partnerpoints?this.wdc.visible=!0:-1!=GameGlobal.CrossBattleModel.commonreward.indexOf(e)?this.ylq.visible=!0:this.bnt.visible=!0},t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase,this.bnt.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=Number(this.data);GameGlobal.CrossBattleModel.huoQuJiangLi(2,e)},t}(eui.ItemRenderer);__reflect(CrossBattleJfItem.prototype,"CrossBattleJfItem");var CrossBattleMJfView=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="争霸奖励",t.skinName="CrossBattleJfViewSkin",t.list.itemRenderer=CrossBattleMJfItem,t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){GameGlobal.CrossBattleModel.getJfModel(),this.observe(MessageDef.JF_UPDATE_INFO,this.UpdateContent)},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.KingWPointsRewardConfig,t=[];for(var i in e)t.push(i);var o=function(t){var i=Number(t);return GameGlobal.CrossBattleModel.citypoint>e[i].citypoints&&-1==GameGlobal.CrossBattleModel.cityreward.indexOf(i)?-1e5+i:GameGlobal.CrossBattleModel.cityreward.indexOf(i)>-1?-1e3+i:GameGlobal.CrossBattleModel.citypoint<e[i].citypoints?-1e4+i:void 0};t.sort(function(e,t){return o(e)-o(t)}),this.list.dataProvider=new eui.ArrayCollection(t)},t.NAME="王城积分",t}(BaseView);__reflect(CrossBattleMJfView.prototype,"CrossBattleMJfView",["ICommonWindowTitle"]);var CrossBattleMJfItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=Number(this.data),t=GameGlobal.Config.KingWPointsRewardConfig;this.text.text="【王城奖励】(王城积分达到"+t[e].citypoints+")",this.list.dataProvider=new eui.ArrayCollection(t[e].showItem),this.num.text=GameGlobal.CrossBattleModel.citypoint+"/"+t[e].citypoints,this.wdc.visible=!1,this.ylq.visible=!1,this.bnt.visible=!1,GameGlobal.CrossBattleModel.citypoint<t[e].citypoints?this.wdc.visible=!0:-1!=GameGlobal.CrossBattleModel.cityreward.indexOf(e)?this.ylq.visible=!0:this.bnt.visible=!0},t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase,this.bnt.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=Number(this.data);GameGlobal.CrossBattleModel.huoQuJiangLi(1,e)},t}(eui.ItemRenderer);__reflect(CrossBattleMJfItem.prototype,"CrossBattleMJfItem");var CrossBattleJfWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(CrossBattleJfView),TabView.CreateTabViewData(CrossBattleMJfView)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(CrossBattleJfWin.prototype,"CrossBattleJfWin");var CrossBattleModel=function(e){function t(){var t=e.call(this)||this;return t.UpGroup=!0,t.reborncout=1,t.players=[],t.citys=[],t.fighting=[],t.transform=[],t.camppoint=[],t.citypoint=0,t.commonpoint=0,t.cityreward=[],t.commonreward=[],t.actcountdown=0,t.CITYNAME=["王城","人族","仙族","魔族"],t.ZHENGNAME=["公共","人族阵营","仙族阵营","魔族阵营"],t.ZHENGTYPE=["","ui_hddt_bm_renzu","ui_hddt_bm_xianzu","ui_hddt_bm_mozu",""],t.BUFFTYPE=["","ui_hddt_bm_renzubuff","ui_hddt_bm_xianzubuff","ui_hddt_bm_mozibuff"],t.TYPECOLOR=[,"ui_hddt_bm_renzudian","ui_hddt_bm_xianzudian","ui_hddt_bm_mozudian"],t.MyShouCity=99,t.regNetMsg(S2cProtocol.sc_king_info,t.getKingInfo),t.regNetMsg(S2cProtocol.sc_king_begin_act,t.startKingBegin),t.regNetMsg(S2cProtocol.sc_king_city_data,t.getKingCityData),t.regNetMsg(S2cProtocol.sc_king_status_change,t.statusInfo),t.regNetMsg(S2cProtocol.sc_king_player_enter,t.goPlayer),t.regNetMsg(S2cProtocol.sc_king_player_leave,t.levelPlayer),t.regNetMsg(S2cProtocol.sc_king_transform_change,t.transformPlay),t.regNetMsg(S2cProtocol.sc_king_point_data,t.getModel),t.regNetMsg(S2cProtocol.sc_king_attack_result,t.AttackCityResult),t.regNetMsg(S2cProtocol.sc_king_pk_result,t.AttackPkResult),t.regNetMsg(S2cProtocol.sc_king_point_info,t.uudatePointInfo),t.regNetMsg(S2cProtocol.sc_king_reborn_countdown,t.fuHuoTime),t.regNetMsg(S2cProtocol.sc_king_my_guard_city,t.myGuardCity),t.regNetMsg(S2cProtocol.sc_king_update_city,t.upDateCity),t.regNetMsg(S2cProtocol.sc_king_info_update,t.kingCitysUpdata),t.regNetMsg(S2cProtocol.sc_king_fighting_change,t.kingFightingChange),t.regNetMsg(S2cProtocol.sc_king_report,t.getEndAwardPanelData),t}return __extends(t,e),t.prototype.getKingCityInfo=function(){var e=new Sproto.cs_king_city_data_request;e.camp=GameGlobal.GameLogic.actorModel.job,this.Rpc(C2sProtocol.cs_king_city_data,e)},t.prototype.getCityInfo=function(e){for(var t=0;t<this.citys.length;t++)if(this.citys[t].camp==e)return this.citys[t].guards},t.prototype.getKingInfo=function(e){this.camp=e.camp,this.status=e.status,this.reborncout=e.reborncout+GameServer.serverTime,this.players=e.players,this.citys=e.citys,this.camppoint=this.campPointPx(e.camppoint),this.transform=e.transform,this.actcountdown=e.actcountdown>0?e.actcountdown+GameServer.serverTime:0,this.addfightingIcon(),GameGlobal.MessageCenter.dispatch(MessageDef.SHOUCITY_UPDATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.KFZB_MAINJNFEN_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.CITYTYPE_UPDATE_INFO),ViewManager.ins().close(ActivityWin),ViewManager.ins().close(GameCityPanel)},t.prototype.bianShen=function(){for(var e=GameGlobal.RaidMgr.mMapRaid,t=0;t<this.transform.length;t++)e.mEntityList[this.transform[t]]&&e.ShapeShift(this.transform[t],"monster/warcar_001")},t.prototype.campPointPx=function(e){return e.sort(function(e,t){return t.point-e.point}),e},t.prototype.getPlayerStatus=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].dbid==e)return this.players[t].status;return 0},t.prototype.getPlayerCamp=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].dbid==e)return this.players[t].camp;return 0},t.prototype.DelayAddfightingIcon=function(){var e=this;TimerManager.ins().doTimer(200,1,function(){egret.is(GameGlobal.RaidMgr.mMapRaid,"MapRaidCrossBattle")&&e.addfightingIcon()},this)},t.prototype.addfightingIcon=function(){var e=GameGlobal.RaidMgr.mMapRaid.mEntityList;for(var t in e)e[t].ChageStatus(EntityStatusView.NONE);for(var i=0;i<this.fighting.length;i++){var o=this.fighting[i];e[o]&&e[o].ChageStatus(EntityStatusView.ATK)}for(var i=0;i<this.players.length;i++){var o=this.players[i],n=e[o.dbid];n&&(o.status==EntityStatusView.DIE&&e[o.dbid].ChageStatus(EntityStatusView.DIE),e[o.dbid].SetType(this.ZHENGTYPE[o.camp]))}GameGlobal.MessageCenter.dispatch(MessageDef.FUHUO_UPDATE_INFO)},t.prototype.getCitysInfo=function(e){for(var t=0;t<this.citys.length;t++)if(this.citys[t].camp==e)return this.citys[t]},t.prototype.getPerJf=function(){var e=GameGlobal.Config.KingPointsRewardConfig,t=[];for(var i in e)t.push(i);for(var o=0;o<t.length;o++){if(this.commonpoint<e[t[o]].partnerpoints)return this.commonpoint+"/"+e[t[o]].partnerpoints;if(-1==this.commonreward.indexOf(e[Number(t[o])].id))return this.commonpoint+"/"+e[t[o]].partnerpoints}return this.commonpoint+"/"+e[t[t.length-1]].partnerpoints},t.prototype.getBuff=function(){for(var e=[],t=1;4>t;t++){var i=this.getCitysInfo(t);i&&this.camp!=i.camp&&i.currcamp==this.camp&&e.push(i.camp)}return e},t.prototype.kingFightingChange=function(e){this.fighting=e.fighting,this.addfightingIcon()},t.prototype.kingPointInfo=function(e){},t.prototype.goPlayer=function(e){this.players.push(e.player),this.addfightingIcon()},t.prototype.levelPlayer=function(e){for(var t=0;t<this.players.length;t++)if(this.players[t].dbid==e.dbid)return void this.players.splice(t,1)},t.prototype.statusInfo=function(e){e.dbid==GameGlobal.GameLogic.actorModel.actorID&&(this.status=e.status,3!=e.status&&(this.reborncout=1,GameGlobal.MessageCenter.dispatch(MessageDef.FUHUO_UPDATE_INFO)));for(var t=0;t<this.players.length;t++)if(this.players[t].dbid==e.dbid){this.players[t].status=e.status,this.addfightingIcon();break}GameGlobal.MessageCenter.dispatch(MessageDef.SHOUCITY_UPDATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.FUHUO_UPDATE_INFO)},t.prototype.startKingBegin=function(){console.log("活动开始")},t.prototype.SendRecruit=function(){this.Rpc(C2sProtocol.cs_king_team_recruit)},t.prototype.sendKingCityData=function(e){var t=new Sproto.cs_king_city_data_request;t.camp=e,this.Rpc(C2sProtocol.cs_king_city_data,t)},t.prototype.getKingCityData=function(e){this.oneCity=e,this.oneCity.guardtime=GameServer.serverTime-this.oneCity.guardtime,1==this.status&&UserTips.InfoTip("活动还未开始"),e.currcamp==this.camp&&this.getRoleBool(e.guards)?ViewManager.ins().open(CrossBattleCityInfomaTion):ViewManager.ins().open(CrossBattleCityInfoWarn),GameGlobal.MessageCenter.dispatch(MessageDef.KFZB_ONECITY_INFO)},t.prototype.getRoleBool=function(e){for(var t=0;t<e.length;t++)if(e[t].dbid==GameGlobal.GameLogic.actorModel.actorID)return!0;return!1},t.prototype.attackCity=function(e){var t=new Sproto.cs_king_city_attack_request;t.camp=e,this.Rpc(C2sProtocol.cs_king_city_attack,t),GameGlobal.ViewManager.close(CrossBattleCityInfoWarn)},t.prototype.fangShouCity=function(e){var t=new Sproto.cs_king_city_guard_request;t.camp=e,this.Rpc(C2sProtocol.cs_king_city_guard,t),GameGlobal.ViewManager.close(CrossBattleCityInfoWarn)},t.prototype.freePk=function(e){var t=new Sproto.cs_king_pk_request;t.targetid=e,this.Rpc(C2sProtocol.cs_king_pk,t)},t.prototype.transformPlay=function(e){this.chageBianShen(e)},t.prototype.chageBianShen=function(e){var t=GameGlobal.RaidMgr.mMapRaid;t.mEntityList[e.dbid]&&(e.istransform?(this.transform.push(e.dbid),t.ShapeShift(e.dbid,"monster/warcar_001")):(this.transform.splice(this.transform.indexOf(e.dbid),1),t.replyShapeShift(e.dbid)))},t.prototype.listMoveMap=function(e){var t=GameGlobal.Config.KingBaseConfig.citypos;switch(e){case 0:t=GameGlobal.Config.KingBaseConfig.citypos;break;case 1:t=GameGlobal.Config.KingBaseConfig.rcitypos;break;case 2:t=GameGlobal.Config.KingBaseConfig.mcitypos;break;case 3:t=GameGlobal.Config.KingBaseConfig.xcitypos}GameGlobal.RaidMgr.mMapRaid.MoveOrder(e,t[0],t[1])},t.prototype.fuHuo=function(){this.Rpc(C2sProtocol.cs_king_pay_revive)},t.prototype.getModel=function(e){if(this.citypoint!=e.citypoint){var t=e.citypoint-this.citypoint;if(0>=t)return;UserTips.InfoTip("王城积分+"+t)}if(this.commonpoint!=e.commonpoint){var t=e.commonpoint-this.commonpoint;if(0>=t)return;UserTips.InfoTip("贡献+"+t)}this.citypoint=e.citypoint,this.commonpoint=e.commonpoint,this.cityreward=e.cityreward,this.commonreward=e.commonreward,GameGlobal.MessageCenter.dispatch(MessageDef.JF_UPDATE_INFO)},t.prototype.getCity=function(e,t){(e==MoveTeam.NONE_ORDER||GameGlobal.GameLogic.actorModel.actorID==t)&&this.sendKingCityData(e)},t.prototype.getJfModel=function(){this.Rpc(C2sProtocol.cs_king_point_data)},t.prototype.huoQuJiangLi=function(e,t){var i=new Sproto.cs_king_get_point_reward_request;i.pointtype=e,i.index=t,this.Rpc(C2sProtocol.cs_king_get_point_reward,i)},t.prototype.getBs=function(){return GameGlobal.CrossBattleTeamModel.mTeamInfo.HasTeam()?void UserTips.ErrorTip("处于组队中，无法变身"):(ViewManager.ins().close(CrossBattleChargeWarn),void this.Rpc(C2sProtocol.cs_king_transform))},t.prototype.AttackCityResult=function(e){var t=GameGlobal.RaidMgr.mBattleRaid;if(t){var i=new CrossFinishData;i.iswin=e.iswin,i.commonpoint=e.commonpoint,t.SetFinishAction(i)}},t.prototype.AttackPkResult=function(e){var t=GameGlobal.RaidMgr.mBattleRaid;if(t){var i=new CrossFinishData;i.iswin=e.iswin,i.commonpoint=e.commonpoint,t.SetFinishAction(i)}},t.prototype.uudatePointInfo=function(e){this.camppoint=this.campPointPx(e.camppoint),GameGlobal.MessageCenter.dispatch(MessageDef.KFZB_MAINJNFEN_INFO)},t.prototype.fuHuoTime=function(e){this.reborncout=e.reborncout+GameServer.serverTime,GameGlobal.MessageCenter.dispatch(MessageDef.FUHUO_UPDATE_INFO)},t.prototype.GetDeadTime=function(){return this.reborncout?Math.max(this.reborncout-GameServer.serverTime,0):0},t.prototype.upDateCity=function(e){this.citys=e.citys,GameGlobal.MessageCenter.dispatch(MessageDef.CITYTYPE_UPDATE_INFO)},t.prototype.kingLeave=function(){this.Rpc(C2sProtocol.cs_king_leave)},t.prototype.myGuardCity=function(e){this.MyShouCity=e.city,GameGlobal.MessageCenter.dispatch(MessageDef.SEND_CITY)},t.prototype.myGuardCityCs=function(){this.Rpc(C2sProtocol.cs_king_my_guard_city)},t.prototype.kingCitysUpdata=function(e){for(var t=0;t<this.citys.length;t++)if(this.citys[t].camp==e.citys.camp){this.citys.splice(t,1),this.citys.push(e.citys);break}GameGlobal.MessageCenter.dispatch(MessageDef.CITYTYPE_UPDATE_INFO)},t.prototype.getEndAwardPanelData=function(e){if(e){var t=new activityEndAwardData;t.award=e.rewards,t.paneltitle="跨服争霸";var i=0;for(var o in e.sharedata.rank)if(e.sharedata.rank[o]==e.persondetail.camp){i=parseInt(o)+1;break}t.rankTxt="我方阵营排名：第"+i+"名",e.sharedata.rank||(t.rankTxt="本次跨服争霸无人胜出");var n={titleName:"",name:"",iconSrc:"",iconBgSrc:"",banghuiTxt:null};n.titleName="本届跨服争霸胜方",1==e.persondetail.camp?(n.name="人族阵营",n.iconSrc="ui_hddt_bm_renzu"):2==e.persondetail.camp?(n.name="仙族阵营",n.iconSrc="ui_hddt_bm_xianzu"):3==e.persondetail.camp&&(n.name="魔族阵营",n.iconSrc="ui_hddt_bm_mozu"),t.icon1=n,ViewManager.ins().open(ActivityEndAwardPanel,t)}},t}(BaseSystem);__reflect(CrossBattleModel.prototype,"CrossBattleModel");var CrossBattleResultFailWin=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(ResultFailPanel);__reflect(CrossBattleResultFailWin.prototype,"CrossBattleResultFailWin");var CrossBattleResultWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="CrossBattleResultWinSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.SetBtnLabel("领取奖励"),this.SetTitleLabel("获得奖励"),this.SetCloseFunc(t[1]),e.prototype.OnOpen.call(this);var o=t[0];this.jf.text="积分："+o;var n=t[2];null!=n?0==n?(this.bmStar0.visible=!1,this.bmStar1.visible=!1,this.bmStar2.visible=!1):1==n?(this.bmStar0.visible=!1,this.bmStar2.visible=!1):2==n&&(this.bmStar1.visible=!1,this.bmStar0.x=233,this.bmStar2.x=400):(this.bmStar0.visible=!1,this.bmStar1.visible=!1,this.bmStar2.visible=!1)},t}(ResultBasePanel);__reflect(CrossBattleResultWin.prototype,"CrossBattleResultWin");var CrossBattleTeamModel=function(e){function t(){return e.call(this,UserFb.FB_TYPE_KING_CITY)||this}return __extends(t,e),t.prototype._DoTeamInfo=function(t){var i=this.mTeamInfo.HasTeam();e.prototype._DoTeamInfo.call(this,t),!i&&this.mTeamInfo.HasTeam()&&ViewManager.ins().open(CrossBattleTeamPanel)},t.prototype._DoTeamList=function(t){e.prototype._DoTeamList.call(this,t)},t.prototype._ChageTeam=function(t){e.prototype._ChageTeam.call(this,t)},t.prototype.SendQuickJoin=function(e){var t=new Sproto.cs_team_quick_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_quick,t,this._DoQuickJoin,this)},t.prototype.SendCreateTeam=function(e){var t=new Sproto.cs_team_create_request;t.raidtype=this.mRaidType,t.level=e,this.Rpc(C2sProtocol.cs_team_create,t,this._DoCreate,this)},t.prototype.SendJoin=function(e,t,i){if(void 0===i&&(i=this.mRaidType),UserFb.CheckFighting()){var o=new Sproto.cs_team_join_request;o.raidtype=i,o.level=e,o.leaderid=t,this.Rpc(C2sProtocol.cs_team_join,o,this._DoJoin,this)}},t}(TeamBaseModel);__reflect(CrossBattleTeamModel.prototype,"CrossBattleTeamModel");var CrossBattleTeamPanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.CrossBattleTeamModel,t}return __extends(t,e),t.prototype.onClickHandler=function(e){switch(e.target){case this.exitBtn:this.CloseSelf(),this.model.SendLeave(1);break;case this.zaomuBtn:this.model.mTeamInfo.IsMyTeam()?(GameGlobal.CrossBattleModel.SendRecruit(),UserTips.InfoTip("已经发布招募信息")):GameGlobal.UserTips.showTips("您不是队长没有权限操作");break;case this.setUpBtn:this.model.mTeamInfo.IsMyTeam()?this.model.SendGetTeamCondition(GameGlobal.CrossBattleModel.camp,parseInt(this.tpower.text)):(this.tpower.text=this.model.mTeamInfo.needpower+"",GameGlobal.UserTips.showTips("您不是队长没有权限操作"))}},t}(GangMineMyTeamPanel);__reflect(CrossBattleTeamPanel.prototype,"CrossBattleTeamPanel");var CrossBattleTeamWin=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.CrossBattleTeamModel,t}return __extends(t,e),t.prototype.initData=function(){this.list.itemRenderer=CrossBattleTeamItem,this.list.dataProvider=null},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddClick(this.createBtn,this.onClickHandler),this.observe(MessageDef.UPDATE_TEAM_LIST,this.updateContent),this.observe(MessageDef.UPDATE_TEAM_MYINFO,this.showMyTeamPanel),this.model.SendGetTeamList(GameGlobal.CrossBattleModel.camp)},t.prototype.updateContent=function(){this.list.dataProvider=new eui.ArrayCollection(this.model.mTeamList[GameGlobal.CrossBattleModel.camp])},t.prototype.onClickHandler=function(e){GameGlobal.CrossBattleTeamModel.SendCreateTeam(GameGlobal.CrossBattleModel.camp)},t.prototype.showMyTeamPanel=function(){this.CloseSelf()},t}(GangMineTeamPanel);__reflect(CrossBattleTeamWin.prototype,"CrossBattleTeamWin");var CrossBattleTeamItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onClickHandler=function(e){return this.needPower>GameGlobal.actorModel.power?void GameGlobal.UserTips.showTips("战力不足，不能加入"):this.memberLen>=3?void GameGlobal.UserTips.showTips("队伍满员，不能加入"):4==GameGlobal.CrossBattleModel.status?void GameGlobal.UserTips.showTips("守城状态中，不能加入"):void GameGlobal.CrossBattleTeamModel.SendJoin(GameGlobal.CrossBattleModel.camp,this.leaderId)},t}(GangMineTeamItem);__reflect(CrossBattleTeamItem.prototype,"CrossBattleTeamItem");var CrossBattleTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="CrossBattleTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i="";switch(e[0]){case 1:i="与人族阵营战斗时,减伤20%  激活条件：占领人族边城激活";break;case 2:i="与仙族阵营战斗时,减伤20%  激活条件：占领仙族边城激活";break;case 3:i="与魔族阵营战斗时,减伤20%  激活条件：占领魔族边城激活";break;case 4:i="Tip:占领守城都阵营的边城  守城者每30秒掉血1%"}this.text.text=i},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(CrossBattleTipPanel.prototype,"CrossBattleTipPanel");var CrossBattleWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="CrossBattleMainSkin",t.list.itemRenderer=CityTypeItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.MINI_MAP_UPDATE_LIST,this.UpdateMiniMap),this.observe(MessageDef.KFZB_MAINJNFEN_INFO,this.kingPointInfo),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this.observe(MessageDef.TEAM_UPDATE_MAP_LIST,this.TeamInfo),this.observe(MessageDef.JF_UPDATE_INFO,this.taskTraceBtnUpdate),this.observe(MessageDef.MOVE_UPDATE_INFO,this.showBnt),this.observe(MessageDef.CITYTYPE_UPDATE_INFO,this.UpdateMiniCity),this.observe(MessageDef.UP_GROUP_SHOW,this.upGroupShow),this.observe(MessageDef.SHOUCITY_UPDATE_INFO,this.ShowShouCity),this.observe(MessageDef.SEND_CITY,this.SendShouCity),this.observe(MessageDef.JF_UPDATE_INFO,this.taskTraceBtnUpdate),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.clickList,this),this._AddClick(this.fuhuoBnt,this._click),this._AddClick(this.change,this._click),this._AddClick(this.taskTraceBtn,this._click),this._AddClick(this.team,this._click),this._AddClick(this.shouChen,this._click),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this.groupAdaptation.touchEnabled=!1,GameGlobal.CrossBattleModel.getJfModel();for(var i=1;4>i;i++)this._AddClick(this["buf"+i],this._bufclick);GameGlobal.CrossBattleModel.addfightingIcon(),this.UpdateContent(),this.ShowShouCity(),this.mapCityData()},t.prototype.mapCityData=function(){for(var e=0;4>e;e++){var t=GameGlobal.CrossBattleModel.getCityInfo(e);GameMap.GetMap().MainCityView.setRoleHead(e,t)}},t.prototype.clickList=function(){GameGlobal.CrossBattleModel.listMoveMap(this.list.selectedIndex)},t.prototype.ShowShouCity=function(){this.shouChen.visible=4==GameGlobal.CrossBattleModel.status},t.prototype._bufclick=function(e){switch(e.currentTarget){case this.buf1:ViewManager.ins().open(CrossBattleTipPanel,1);break;case this.buf2:ViewManager.ins().open(CrossBattleTipPanel,2);break;case this.buf3:ViewManager.ins().open(CrossBattleTipPanel,3)}},t.prototype.showBnt=function(e,t){var i,o=GameGlobal.CrossBattleModel.camp;switch(o){case 1:i=GameGlobal.Config.KingBaseConfig.rbronpos;break;case 2:i=GameGlobal.Config.KingBaseConfig.xcitypos;break;case 3:i=GameGlobal.Config.KingBaseConfig.mcitypos}i&&(e>i[0][0]&&e<i[1][0]&&t>i[0][1]&&t<i[1][1]?(this.change.visible=!0,this.team.visible=!1):(this.change.visible=!1,this.team.visible=!0),-1!=GameGlobal.CrossBattleModel.transform.indexOf(GameGlobal.actorModel.actorID)&&(this.team.visible=!1,this.change.visible=!1))},t.prototype._click=function(e){switch(e.currentTarget){case this.change:ViewManager.ins().open(CrossBattleChargeWarn);break;case this.fuhuoBnt:var i=GameGlobal.Config.KingBaseConfig;Checker.Money(i.revivecost.id,i.revivecost.count,Checker.YUNBAO_FRAME)&&GameGlobal.CrossBattleModel.fuHuo();break;case this.taskTraceBtn:t.SendGetPoint();break;case this.team:GameGlobal.CrossBattleTeamModel.mTeamInfo.HasTeam()?ViewManager.ins().open(CrossBattleTeamPanel):ViewManager.ins().open(CrossBattleTeamWin);break;case this.shouChen:GameGlobal.CrossBattleModel.myGuardCityCs()}},t.prototype.SendShouCity=function(){99!=GameGlobal.CrossBattleModel.MyShouCity&&GameGlobal.CrossBattleModel.sendKingCityData(GameGlobal.CrossBattleModel.MyShouCity)},t.prototype.TeamInfo=function(){var e=GameGlobal.RaidMgr.mMapRaid;egret.is(e,"MapRaidCrossBattle")&&e.DelayUpdateTeam()},t.prototype.upGroupShow=function(e){this.groupAdaptation.visible=e},t.prototype.OnClose=function(){this.removeObserve()},t.prototype.UpdateContent=function(){this.list.dataProvider=new eui.ArrayCollection([1,2,3,4]),this.UpdateMiniMap(),this.kingPointInfo(),this.buffShow(),this.UpdateMiniCity(),this.AdaptationGroup(),this.taskTraceBtnUpdate(),this.buffShow(),GameGlobal.CrossBattleModel.addfightingIcon(),GameGlobal.CrossBattleModel.bianShen(),this.mapCityData()},t.prototype.taskTraceBtnUpdate=function(){var e=t.GetPointIndex();e?this.taskTraceText.textFlow=ConsumeLabel.GetValueColor2(GameGlobal.CrossBattleModel.citypoint,GameGlobal.Config.KingWPointsRewardConfig[e].citypoints,Color.GREEN_LIGHT):this.taskTraceText.text="全部领取"},t.SendGetPoint=function(){var e=this.GetPointIndex();if(e)return GameGlobal.CrossBattleModel.citypoint<GameGlobal.Config.KingWPointsRewardConfig[e].citypoints?void UserTips.InfoTip("积分不足"):void GameGlobal.CrossBattleModel.huoQuJiangLi(1,e)},t.GetPointIndex=function(){for(var e=CommonUtils.GetArray(GameGlobal.Config.KingWPointsRewardConfig,"id"),t=(GameGlobal.CrossBattleModel.citypoint,0),i=e;t<i.length;t++){var o=i[t],n=o.id;if(-1==GameGlobal.CrossBattleModel.cityreward.indexOf(n))return n}return null},t.prototype.kingPointInfo=function(){this.startTimer=TimerManager.ins().doTimer(1e3,0,this.kingPointInfo,this);for(var e=GameGlobal.CrossBattleModel.camppoint,t=0;t<e.length;t++)this["title"+(t+1)].text=GameGlobal.CrossBattleModel.CITYNAME[e[t].camp]+"阵营   王城积分 ："+e[t].point;this.title1.textColor=15236647,this.mydata.text="我的王城积分："+GameGlobal.CrossBattleModel.citypoint,GameGlobal.CrossBattleModel.actcountdown>0&&(1==GameGlobal.CrossBattleModel.status?this.time.text="活动开始倒计时"+(GameGlobal.CrossBattleModel.actcountdown-GameServer.serverTime)+"秒":this.time.text="活动结束倒计时"+(GameGlobal.CrossBattleModel.actcountdown-GameServer.serverTime)+"秒")},t.prototype.UpdateMiniMap=function(){var e=GameGlobal.RaidMgr.mMapRaid;this.miniMap._setBg("resource/assets/map/map311/pk_preview.jpg"),this.miniMap._removeAll();for(var t in e.cTeam)this.miniMap._setRole(e.cTeam[t])},t.prototype.UpdateMiniCity=function(){for(var e=0;4>e;e++)this.miniMap.citySet(e)},t.prototype.AdaptationGroup=function(){MiniChatPanel.UpdateViewPos(this.groupAdaptation),this.groupAdaptation.y-=211},t.prototype.buffShow=function(){for(var e=GameGlobal.CrossBattleModel.getBuff(),t=1;4>t;t++)this["buf"+t].filters=Color.GetFilter();for(var i=0;i<e.length;i++)this["buf"+e[i]].filters=[]},t.NAME="跨服争霸",t.LAYER_LEVEL=LayerManager.UI_GAME_MAP,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(CrossBattleWin.prototype,"CrossBattleWin");var CityTypeItem=function(e){function t(){var t=e.call(this)||this;return t.CITYNAME=["王城","人族边城","仙族边城","魔族边城"],t.skinName="CityTypeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.Config.KingCityConfig[e][10];this.cityName.text=this.CITYNAME[t.id-1],this.title.text="每分钟 + "+t.citypoints+"积分",t.type==GameGlobal.CrossBattleModel.camp?(this.title0.textColor=104196,this.title0.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>前往守卫</u></a>')):(this.title0.textColor=16711680,this.title0.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>前往攻击</u></a>'))},t}(eui.ItemRenderer);__reflect(CityTypeItem.prototype,"CityTypeItem");var Chest=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"_boxName",{set:function(e){this.boxName.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_title",{set:function(e){this.title.text=e},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(Chest.prototype,"Chest",["eui.UIComponent","egret.DisplayObject"]);var RoleHeadItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RoleHeadSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;e&&(this.typeImg.source=GameGlobal.CrossBattleModel.ZHENGTYPE[GameGlobal.CrossBattleModel.oneCity.currcamp],this.typeName.text=GameGlobal.CrossBattleModel.ZHENGNAME[GameGlobal.CrossBattleModel.oneCity.currcamp],this.username.text=e.name,this.deal.visible=e.isdead,this.face.face.source=ResDataPath.GetHeadImgName(e.job,e.sex))
},t}(eui.ItemRenderer);__reflect(RoleHeadItem.prototype,"RoleHeadItem");var GwHeadItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GwHeadSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;e&&(this.head.source=e.bossicon,this.username.text=e.name)},t}(eui.ItemRenderer);__reflect(GwHeadItem.prototype,"GwHeadItem");var HeadItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GwHeadSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;e&&(this.head.source=ResDataPath.GetHeadImgName(e.job,e.sex),this.username.text=e.name)},t}(eui.ItemRenderer);__reflect(HeadItem.prototype,"HeadItem");var MiniMap=function(e){function t(){var t=e.call(this)||this;return t.imgList=[],t}return __extends(t,e),t.prototype._setBg=function(e){this.bg.source=e},t.prototype._setRole=function(e){var t=e.mMember[0];if(!t)return void console.warn("not found mem => ");var i=this.imgList.pop()||new eui.Image;i.visible=!0,i.x=t.mTarget.x/15,i.y=t.mTarget.y/15;var o=GameGlobal.CrossBattleModel.TYPECOLOR[GameGlobal.CrossBattleModel.getPlayerCamp(e.mMasterHandle)];i.source=o,i.name=e.mMasterHandle.toString(),this.all.addChild(i)},t.prototype._removeRole=function(e){DisplayUtils.removeFromParent(this.getChildByName(e.mMasterHandle.toString()))},t.prototype._removeAll=function(){for(var e=0,t=this.all.$children;e<t.length;e++){var i=t[e];i.visible=!1,this.imgList.push(i)}this.all.removeChildren()},t.prototype.citySet=function(e){for(var t=0;4>t;t++){var i=this["city"+t];i.citySet(t)}},t}(eui.Component);__reflect(MiniMap.prototype,"MiniMap",["eui.UIComponent","egret.DisplayObject"]);var MiniMapCityInfoItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MiniMapCityInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.pro.labelDisplay.visible=!1},t.prototype.citySet=function(e){var t=GameGlobal.CrossBattleModel.getCitysInfo(e);t&&(this.typeImg.source=GameGlobal.CrossBattleModel.ZHENGTYPE[t.currcamp],this.pro.maximum=t.maxhp,this.pro.value=t.currhp)},t}(eui.Component);__reflect(MiniMapCityInfoItem.prototype,"MiniMapCityInfoItem",["eui.UIComponent","egret.DisplayObject"]);var MapCity=function(e){function t(){var t=e.call(this)||this;return t.skinName="MapCitySkin",t.list.itemRenderer=HeadItem,t}return __extends(t,e),t.prototype.citySrc=function(e){this.cityName.source=e},t.prototype.cityHead=function(e){this.list.dataProvider=new eui.ArrayCollection(e)},t}(eui.Component);__reflect(MapCity.prototype,"MapCity",["eui.UIComponent","egret.DisplayObject"]);var RechargeModel=function(e){function t(){var t=e.call(this)||this;return t.reward={},t.firsttime=0,t.rechargeNum=0,t.rewardState=[],t.dailyRechare=0,t.dailyReward=0,t.dailyId=0,t.totalRechargeNum=0,t.choicerechare=0,t.finish={},t.xuanNvCard=!1,t.regNetMsg(S2cProtocol.sc_recharge_double,t._DoUpdateDoublechargeInfo),t.regNetMsg(S2cProtocol.sc_recharge_first_info,t._DoUpdateFirstChargeInfo),t.regNetMsg(S2cProtocol.sc_recharge_dailyrechare,t._DoUpdateReChargDaily),t.regNetMsg(S2cProtocol.sc_recharge_count,t._DoUpdateReChargeCount),t}return __extends(t,e),t.prototype.GetFirstRewardState=function(e){for(var t=0,i=this.rewardState;t<i.length;t++){var o=i[t];if(o==e)return!0}return!1},t.prototype.getPayItemsConfig=function(){return PayItemsConfig.GetConfig()},t.prototype.getVipConfig=function(){return GameGlobal.Config.VipConfig},t.prototype.getListItemDate=function(){var e=this.getPayItemsConfig(),t=[];for(var i in e){var o=e[i];if(1==o.show){if(o.vipLv&&GameGlobal.actorModel.vipLv<o.vipLv)continue;t.push(o)}}SortTools.sortMap(t,"reorder");for(var n=GameGlobal.FuliModel.FuliData.week,a=GameGlobal.FuliModel.FuliData.month,r=GameGlobal.FuliModel.FuliData.foreverFlag,s=t.length-1;s>=0;s--){var o=t[s];2==o.type&&a>0||3==o.type&&n>0||6==o.type&&r?t.splice(s,1):o.condId&&!this.finish[o.condId]&&t.splice(s,1)}return t},t.prototype.sendRecharge=function(e){var i=t.GetYbOrderInfo(e);if(!i)return void console.error("not found recharge id => ",e);var o=document.domain;window.open("http://www.56ziyuan.com/pay/index.html?userRoleName="+i.userRoleName+"&serverid="+i.userServer+"&uid="+i.userRoleId+"&account="+i.username+"&money="+i.amount+"&pay_orderid="+i.cpOrderNo+"&rechargeid="+i.rechargeid)},t.prototype._DoUpdateDoublechargeInfo=function(e){this.reward={};for(var t=0,i=e.reward||[];t<i.length;t++){var o=i[t];this.reward[o]=!0}this.finish={};for(var n=0,a=e.finish||[];n<a.length;n++){var o=a[n];this.finish[o]=!0}this.choicerechare=e.choicerechare,MessageCenter.ins().dispatch(MessageDef.RECHARGE_UPDATE,e.reward)},t.prototype.sendRechargeFirstReward=function(e){var t=new Sproto.cs_recharge_first_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_recharge_first_reward,t)},t.prototype.sendRechargeDailyReward=function(e){var t=new Sproto.cs_recharge_get_dailyrecharge_reward_request;t.rewardid=e,this.Rpc(C2sProtocol.cs_recharge_get_dailyrecharge_reward,t)},t.prototype._DoUpdateFirstChargeInfo=function(e){this.rechargeNum=e.rechargeNum,this.rewardState=e.reward,this.firsttime=e.firsttime,MessageCenter.ins().dispatch(MessageDef.RECHARGE_FIRST_UPDATE)},t.prototype._DoUpdateReChargDaily=function(e){this.dailyRechare=e.dailyrechare,this.dailyReward=e.rewardmark,this.dailyId=e.dailyid,this.xuanNvCard=!0,MessageCenter.ins().dispatch(MessageDef.RECHARGE_DAILY_UPDATE)},t.prototype._DoUpdateReChargeCount=function(e){this.totalRechargeNum=e.total,MessageCenter.ins().dispatch(MessageDef.PLAYER_RECHARGE_UPDATE)},t.prototype.sendGiftAward=function(){if(this.choicerechare>0){var e=new Sproto.cs_recharge_get_choice_reward_request;this.Rpc(C2sProtocol.cs_recharge_get_choice_reward,e)}},t.GetBaseInfo=function(){var e={};return e.productCode="0",e.uid=Main.Instance.UserName,e.username=Main.Instance.mToken||"",e.userRoleId=GameGlobal.actorModel.actorID+"",e.userRoleName=GameGlobal.actorModel.name+"",e.userServer=Main.Instance.mConnectServerData.id+"",e.userLevel=GameGlobal.actorModel.level+"",e.count=1,e.rechargeid=0,e.quantifier="个",e.callbackUrl="http://zzby.mjh5.com:8501",e.extrasParams=Main.Instance.mConnectServerData.id+","+GameGlobal.actorModel.actorID,e.vipLevel=UserVip.ins().lv||0,e},t.GetYbOrderInfo=function(e){var i=GameGlobal.Config.PayItemsConfig,o=null;for(var n in i)if(i[n].id==e){o=i[n];break}if(!o)return void console.log("not found pay id",e);var a=t.GetBaseInfo();return a.cpOrderNo="orderno"+DateUtils.formatMiniDateTime(new Date),a.amount=o.cash+"",a.subject=o.itemName+"",a.desc=o.itemName+"",a.goodsId=this.GetGoodsId(RechargeGoodsType.YUAN_BAO,e),a.rechargeid=o.reorder,a.extrasParams+=","+this.GetGoodsId(RechargeGoodsType.YUAN_BAO,e),a},t.GetGoodsId=function(e,t){switch(e){case RechargeGoodsType.YUAN_BAO:return t;case RechargeGoodsType.MONTY_CARD:return 1e4+t;case RechargeGoodsType.INVEST:return 2e4+t;case RechargeGoodsType.GOD_01:return 101e4+t;case RechargeGoodsType.GOD_02:return 102e4+t;case RechargeGoodsType.RED_BAG:return t}return t},t.prototype._Pay=function(e){window.__REC__?this.Rpc(C2sProtocol.cs_recharge_get_order_number,null,function(t){var i=t;e.cpNo=i.order_number+"",window.__REC__(e)}):console.error("not recharge !!!")},t.MAX_VIPLV=20,t}(BaseSystem);__reflect(RechargeModel.prototype,"RechargeModel");var RechargeGoodsType;!function(e){e[e.YUAN_BAO=0]="YUAN_BAO",e[e.MONTY_CARD=1]="MONTY_CARD",e[e.INVEST=2]="INVEST",e[e.GOD_01=3]="GOD_01",e[e.GOD_02=4]="GOD_02",e[e.RED_BAG=5]="RED_BAG"}(RechargeGoodsType||(RechargeGoodsType={}));var RechargeAwardPanel=function(e){function t(){var t=e.call(this)||this;return t._resources=["ui_czth_bm_biaotou","chongzhitehui_json","ui_czth_bm_tupian02","ui_czth_bm_tupian01"],t.skinName="RechargeAwardSkin",t.list.itemRenderer=RechargeAwardItem,t.commonDialog.notClickMask=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=CommonUtils.GetArray(GameGlobal.Config.DiscountBaseConfig.itemid);this.list.dataProvider=new eui.ArrayCollection(e);var t;t=3==LocationProperty.GetRechargeId()?GameGlobal.Config.DiscountBaseConfig.textdes2:GameGlobal.Config.DiscountBaseConfig.textdes;for(var i=0,o=0,n=t;o<n.length;o++){var a=n[o],r=this["btn"+i];r.getTxt.text=a.des,r.tipsTxt.text="充值"+GameGlobal.Config.PayItemsConfig[a.id].amount/100+"元",r.rechargeId=a.id,r.tipsImg.visible=t[i].taget,this._AddClick(r.rechargeBtn,this.tap),i++}this.AddClick(this.giftBtn,this.gift)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.observe(MessageDef.RECHARGE_UPDATE,this.updataContent),this.updataContent()},t.prototype.updataContent=function(){var e=GameGlobal.Config.DiscountBaseConfig;0==e.showtype?this.titelImg.source=GameGlobal.Config.TitleConf[e.titlpid].icon:this.petShowpanel.SetBody(AppearanceConfig.GetUIPath(e.titlpid)),this.btnGroup.visible=0==GameGlobal.RechargeModel.choicerechare,this.giftBtn.visible=GameGlobal.RechargeModel.choicerechare>0,this.getImg.visible=GameGlobal.RechargeModel.choicerechare<0},t.prototype.tap=function(e){for(var t=e.currentTarget;"RechargeAwardBtnSkin"!=t.skinName&&t.parent;)t=t.parent;var i=GameGlobal.Config.DiscountBaseConfig;if(LocationProperty.NotRechargeGood()&&(i.rechargegood=null),i.rechargegood&&t.rechargeId!=i.rechargegood){var o=GameGlobal.Config.PayItemsConfig,n={};for(var a in o)parseInt(a)==t.rechargeId&&(n.btnName="充值"+o[a].cash+"元"),parseInt(a)==i.rechargegood&&(n.btnName2="充值"+o[a].cash+"元");n.closeExecuteCallFun2=!1,WarnWin.show(i.des,function(){t.rechargeId&&GameGlobal.RechargeModel.sendRecharge(t.rechargeId)},this,function(){GameGlobal.RechargeModel.sendRecharge(i.rechargegood)},this,"normal",n)}else t.rechargeId&&GameGlobal.RechargeModel.sendRecharge(t.rechargeId)},t.prototype.gift=function(){GameGlobal.RechargeModel.sendGiftAward()},t.NAME="特惠充值",t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RechargeAwardPanel.prototype,"RechargeAwardPanel");var RechargeAwardItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RechargeAwardItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.item.data=this.data,this.tipsImg.visible=this.data.taget},t}(ItemRenderer);__reflect(RechargeAwardItem.prototype,"RechargeAwardItem");var RechargeRebateMainPanel=function(e){function t(){var t=e.call(this)||this;t.selectBtnType=0,t.skinName="RechargeRebateMainSkin",t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,130);var i=GameGlobal.Config.ActivitySumBtnConfig;t.dataList=[],t.listIcon=[];var o=[];for(var n in i)if(5==i[Number(n)].openId){var a=GameGlobal.ActivityKaiFuModel.GetActivityDataById(Number(n));a&&a.openState&&(t.dataList.push(Number(n)),o.push(TabView.CreateTabViewData({type:1,cls:RechargeRebatePanel,icon:"ui_bm_chongzhifanli"}.cls)),t.listIcon.push({type:1,id:Number(n),cls:RechargeRebatePanel,icon:"ui_bm_chongzhifanli"}))}return t.tabEuiView.tabChildren=o,t.list.itemRenderer=RechargeBtnItem,t.list.dataProvider=new eui.ArrayCollection(t.listIcon),t._AddItemClick(t.list,t.OnClickMenu),t}return __extends(t,e),t.prototype.OnClickMenu=function(e){this.openPage(e.itemIndex)},t.prototype.openPage=function(e){var t=this.dataList[e];this.index=e,t&&this.tabEuiView.OpenIndex(this.index,t)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.index=0,this.list.selectedIndex=this.index,this.mListLRBtnCtrl.OnRefresh(),this.mCommonWindowBg.OnAdded(this),this.openPage(this.index),this.UpdateListRedPoint()},t.prototype.OnClose=function(){this.tabEuiView.CloseView(),this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateListRedPoint=function(){for(var e=0;e<this.list.numChildren;++e){var t=this.list.getChildAt(e);t&&t.UpdateRedPoint&&t.UpdateRedPoint()}},t.LAYER_LEVEL=LayerManager.UI_Main,t.WelfareIcon=[{type:1,cls:RechargeRebatePanel,icon:"ui_bm_chongzhifanli"}],t}(BaseEuiView);__reflect(RechargeRebateMainPanel.prototype,"RechargeRebateMainPanel",["ICommonWindow"]);var DateUtils=function(){function e(){}return e.FormatTimeString=function(e){if(!e)return 0;var t=e.split(":"),i=t[0]||0,o=t[1]||0,n=t[2]||0,a=new Date(1e3*GameServer.serverTime);return a.setHours(Number(i),Number(o),Number(n)),a.getTime()},e.formatMiniDateTime=function(t){return e.MINI_DATE_TIME_BASE+(2147483647&t)*e.MS_PER_SECOND},e.formatServerTime=function(t){return(t-e.MINI_DATE_TIME_BASE)/e.MS_PER_SECOND},e.GetFormatSecond=function(t,i){return void 0===i&&(i=1),e.getFormatBySecond(t,i)},e.getFormatBySecond=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=2);var o="",n=1e3*e;switch(t){case this.TIME_FORMAT_1:o=this.format_1(n);break;case this.TIME_FORMAT_2:o=this.format_2(n);break;case this.TIME_FORMAT_3:o=this.format_3(n);break;case this.TIME_FORMAT_4:o=this.format_4(n);break;case this.TIME_FORMAT_5:o=this.format_5(n,i);break;case this.TIME_FORMAT_6:o=this.format_6(n);break;case this.TIME_FORMAT_7:o=this.format_7(n);break;case this.TIME_FORMAT_8:o=this.format_8(n);break;case this.TIME_FORMAT_9:o=this.format_9(n);break;case this.TIME_FORMAT_11:o=this.format_11(n);break;case this.TIME_FORMAT_14:o=this.format_14(n);break;case this.TIME_FORMAT_15:o=this.format_15(n)}return o},e.format_1=function(t){var i=0,o="##:##:##";return i=Math.floor(t/e.MS_PER_HOUR),o=o.replace("##",e.formatTimeNum(i)),i&&(t-=i*e.MS_PER_HOUR),i=Math.floor(t/e.MS_PER_MINUTE),o=o.replace("##",e.formatTimeNum(i)),i&&(t-=i*e.MS_PER_MINUTE),i=Math.floor(t/1e3),o=o.replace("##",e.formatTimeNum(i))},e.format_2=function(e){e-=this.TIME_ZONE_OFFSET;var t=new Date(e),i=t.getFullYear(),o=t.getMonth()+1,n=t.getDate(),a=t.getHours(),r=t.getMinutes(),s=t.getSeconds();return i+"-"+o+"-"+n+" "+a+":"+r+":"+s},e.format_3=function(e){var t=this.format_1(e),i=t.split(":");return i[1]+":"+i[2]},e.format_4=function(e){return e<this.MS_PER_HOUR?Math.floor(e/this.MS_PER_MINUTE)+"分钟前":e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"小时前":Math.floor(e/this.MS_PER_DAY)+"天前"},e.format_5=function(e,t){return void 0===t&&(t=2),this.FormatType5(e,t,null)},e.format_12=function(e,t){void 0===t&&(t=2);var i="";if(t>=4){var o=Math.floor(e/this.MS_PER_DAY);o>0&&(e-=o*this.MS_PER_DAY,i+=(i.length>0?this.formatTimeNum(o):o)+"天")}if(t>=3){var n=Math.floor(e/this.MS_PER_HOUR);n>0&&(e-=n*this.MS_PER_HOUR,i+=(i.length>0?this.formatTimeNum(n):n)+"小时")}var a=Math.floor(e/this.MS_PER_MINUTE);return a>0&&(e-=a*this.MS_PER_MINUTE,i+=(i.length>0?this.formatTimeNum(a):a)+"分"),i},e.format_13=function(e,t){return void 0===t&&(t=2),this.FormatType5(e,t,":")},e.FormatType5=function(e,t,i){void 0===t&&(t=2),void 0===i&&(i=null);var o="";if(t>=4){var n=Math.floor(e/this.MS_PER_DAY);n>0&&(e-=n*this.MS_PER_DAY,o+=(o.length>0?this.formatTimeNum(n):n)+(i?i:"天"))}if(t>=3){var a=Math.floor(e/this.MS_PER_HOUR);a>0&&(e-=a*this.MS_PER_HOUR,o+=(o.length>0?this.formatTimeNum(a):a)+(i?i:"小时"))}if(t>=2){var r=Math.floor(e/this.MS_PER_MINUTE);r>0&&(e-=r*this.MS_PER_MINUTE,o+=(o.length>0?this.formatTimeNum(r):r)+(i?i:"分"))}var s=Math.floor(e/1e3);return o+=this.formatTimeNum(s)+(i?"":"秒")},e.format_6=function(e){e-=this.TIME_ZONE_OFFSET;var t=new Date(e),i=t.getHours(),o=t.getMinutes(),n=t.getSeconds();return this.formatTimeNum(i)+":"+this.formatTimeNum(o)+":"+this.formatTimeNum(n)},e.format_7=function(e){return e<this.MS_PER_HOUR?"&lt;1小时":e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"小时":Math.floor(e/this.MS_PER_DAY)+"天"},e.format_8=function(e){e-=this.TIME_ZONE_OFFSET;var t=new Date(e),i=t.getFullYear(),o=t.getMonth()+1,n=t.getDate(),a=t.getHours(),r=t.getMinutes();return i+"-"+o+"-"+n+" "+a+":"+r},e.format_14=function(e){var t=new Date(e||0),i=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();t.getHours(),t.getMinutes();return i+"年"+o+"月"+n+"日"},e.format_15=function(e){var t=new Date(e||0),i=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();t.getHours(),t.getMinutes();return i+"-"+o+"-"+n},e.format_16=function(t,i){var o;if(t>=e.MS_PER_DAY){var n=Math.floor(t/e.MS_PER_DAY),a=Math.floor(t%e.MS_PER_DAY/e.MS_PER_HOUR);if(o=n+"天"+a+"时",i){var r=Math.floor(t%e.MS_PER_HOUR/60);o+=r+"分"}return o}return this.format_1(t)},e.format_17=function(t){var i;if(t>=e.MS_PER_DAY){var o=Math.floor(t/e.MS_PER_DAY),n=Math.floor(t%e.MS_PER_DAY/e.MS_PER_HOUR),a=Math.floor(t%e.MS_PER_HOUR/e.MS_PER_MINUTE),r=Math.floor(t%e.MS_PER_MINUTE/e.MS_PER_SECOND);return i=o+"天"+n+"时"+a+"分"+r+"秒"}return this.format_1(t)},e.format_9=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var i=Math.floor(e/this.MS_PER_MINUTE);e-=i*this.MS_PER_MINUTE;var o=Math.floor(e/1e3);return t+"小时"+i+"分钟"+o+"秒"},e.format_11=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);var o=Math.floor(e/this.MS_PER_HOUR);e-=o*this.MS_PER_HOUR;var n=Math.floor(e/this.MS_PER_MINUTE);e-=n*this.MS_PER_MINUTE;var a=Math.floor(e/1e3),r=10>o&&i?"0"+o:o,s=10>n&&i?"0"+n:n,l=10>a&&i?"0"+a:a;return t?r+":"+s+":"+l:0==o?s+":"+l:void 0},e.formatTimeNum=function(e){return e>=10?e.toString():"0"+e},e.StrToDate=function(e){if(null==e)return null;if(this.m_StrToDate[e])return this.m_StrToDate[e];try{var t=e.split("-");if(t){var i=t[0],o=t[1],n=new Date(0);if(i){var a=i.split(".");a&&(a[0]&&n.setFullYear(Number(a[0])),a[1]&&n.setMonth(Number(a[1])-1),a[2]&&n.setDate(Number(a[2])))}if(o){var r=o.split(":");r&&(r[0]&&n.setHours(Number(r[0])),r[1]&&n.setMinutes(Number(r[1])),r[2]&&n.setSeconds(Number(r[2])))}return this.m_StrToDate[e]=n,n}}catch(s){}return console.log("invalid date => "+e),null},e.GetDay=function(e){return 0==e.getDay()?7:e.getDay()},e.getGMT8Date=function(t){var i,o=new Date(t),n=-480;return i=(n-o.getTimezoneOffset())*e.MS_PER_MINUTE,o=new Date(t-i)},e.compareOneDayTime=function(e,t,i,o){var n=e.split(":"),a=n[0],r=n[1],s=3==n.length?n[2]:0,l=parseInt(this.formatTimeNum(t)+this.formatTimeNum(i)+this.formatTimeNum(o||0)),c=parseInt(this.formatTimeNum(a)+this.formatTimeNum(r)+this.formatTimeNum(s||0));return l-c},e.m_StrToDate={},e.TIME_FORMAT_1=1,e.TIME_FORMAT_2=2,e.TIME_FORMAT_3=3,e.TIME_FORMAT_4=4,e.TIME_FORMAT_5=5,e.TIME_FORMAT_6=6,e.TIME_FORMAT_7=7,e.TIME_FORMAT_8=8,e.TIME_FORMAT_9=9,e.TIME_FORMAT_11=11,e.TIME_FORMAT_14=14,e.TIME_FORMAT_15=15,e.DAYS_OF_WEEK=7,e.HOURS_PER_DAY=24,e.SECONDS_PER_HOUR=3600,e.MS_PER_SECOND=1e3,e.MS_PER_MINUTE=6e4,e.MS_PER_HOUR=36e5,e.MS_PER_DAY=864e5,e.MS_PER_MONTH=30*e.MS_PER_DAY,e.MS_PER_YEAR=12*e.MS_PER_MONTH,e.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*e.MS_PER_MINUTE,e.TIME_ZONE_OFFSET=0,e}();__reflect(DateUtils.prototype,"DateUtils");var RechargeWin=function(e){function t(){var t=e.call(this)||this;return t.observe(MessageDef.FULI_MONTH_WEEK_CHANGE,t.initData),t}return __extends(t,e),t.Open=function(){GameGlobal.RechargeModel.choicerechare>=0?ViewManager.ins().open(RechargeAwardPanel):ViewManager.ins().open(t)},t.OpenMonthCard=function(){ViewManager.ins().open(t)},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RechargeWinSkin",this.commonWindowBg.SetTitle("充值")},t.prototype.initData=function(){this.itemList.itemRenderer=RechargeListItem,this.itemList.dataProvider=new eui.ArrayCollection(GameGlobal.RechargeModel.getListItemDate())},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this._AddItemClick(this.itemList,this.itemClick),this._AddClick(this.vipTeQuanBtn,this.onClick),this.observe(MessageDef.UPDATA_VIP_EXP,this.UpdateContent),this.observe(MessageDef.RECHARGE_UPDATE,this.UpdateList),this.UpdateContent()},t.prototype.onClick=function(e){switch(e.target){case this.vipTeQuanBtn:ViewManager.ins().open(VipMainPanel)}},t.prototype.itemClick=function(e){GameGlobal.RechargeModel.sendRecharge(this.itemList.selectedItem.id)},t.prototype.UpdateList=function(){this.itemList.dataProvider.replaceAll(GameGlobal.RechargeModel.getListItemDate())},t.prototype.UpdateContent=function(){if(GameGlobal.actorModel.vipLv<RechargeModel.MAX_VIPLV){this.bar.maximum=GameGlobal.RechargeModel.getVipConfig()[GameGlobal.actorModel.vipLv+1].needYb;var e=this.bar.maximum-UserVip.ins().exp;this.nextVIPTxt.textFlow=TextFlowMaker.generateTextFlow("再充值|C:0xFFED21&T:"+e+"|元可成为|C:0xFFED21&T:VIP"+(GameGlobal.actorModel.vipLv+1)+"|"),CommonUtils.addLableStrokeColor(this.nextVIPTxt,4587529,3)}else this.bar.maximum=UserVip.ins().exp,this.bar.value=UserVip.ins().exp,this.nextVIPTxt.text="VIP等级已满";this.bar.value=UserVip.ins().exp,this.curVipTxt.text=""+GameGlobal.actorModel.vipLv},t.NAME="充值",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RechargeWin.prototype,"RechargeWin");var RechargeListItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RechargeItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.ybTxt.text=this.data.itemName,this.RMBTxt.text=this.data.cash+"元",this.SCZSTxt.text=this.data.award,this.centreImage.source=this.data.icon,this.otherTxt.text=this.data.exDesc,this.tipsImg.source=this.data.tipsicon,1==this.data.type?this.currentState="normal":this.currentState="other",this.SCGroup.visible=GameGlobal.RechargeModel.reward[this.data.id]?!1:!0},t}(eui.ItemRenderer);__reflect(RechargeListItem.prototype,"RechargeListItem");var DailyModel=function(e){function t(){var t=e.call(this)||this;return t.mFindCount=0,t.mRedPoint=new DailyModelRedPoint(t),t.mBaseInfo=new DailyBaseInfo,t.mTeamActionInfo=new OtherActiveInfo,t.mPeaceActionInfo=new OtherActiveInfo,t.monsterInfo=new MonsterInfo,t.regNetMsg(S2cProtocol.sc_dailyTask_info,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_dailyTask_update,t._DoUpdate),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype._DoInitInfo=function(e){this.mBaseInfo.UpdateInfo(e),this.mTeamActionInfo.UpdateInfo(e.teamFB),this.mPeaceActionInfo.UpdateInfo(e.chapterWar),this.monsterInfo.UpdateInfo(e.monster),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_FOMALHAUT_MONSTERID),this.mTaskList=new Array,this._UpdateTaskInfoList(this.mTaskList,e.today),this.mYesterdayTaskMap={},this._UpdateTaskInfoMap(this.mYesterdayTaskMap,e.yesterday),this.mRetrieveExpMap={},this._UpdateTaskInfoMap(this.mRetrieveExpMap,e.findExp),this.mRetrieveResMap={},this._UpdateTaskInfoMap(this.mRetrieveResMap,e.findItem),e.find>this.mFindCount&&(this.mFindCount=e.find,this.mViewExp=!1,this.mViewRes=!1,this.mViewBindGoldRes=!1,this.mViewGoldRes=!1,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_UPDATE_RETREVE_VIEW))},t.prototype._DoUpdate=function(e){e.lv&&(this.mBaseInfo.mLevel=e.lv),e.exp&&(this.mBaseInfo.mExp=e.exp,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_MEDAL_UPDATE)),e.active&&(this.mBaseInfo.mCurActive=e.active,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_ACTIVE_UPDATE)),e.activeReward&&(this.mBaseInfo.mActiveReward=e.activeReward),e.find&&(this.mBaseInfo.mFindFlag=0!=e.find),e.teamFB&&(this.mTeamActionInfo.UpdateInfo(e.teamFB),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_TEAM_UPDATE)),e.chapterWar&&(this.mPeaceActionInfo.UpdateInfo(e.chapterWar),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_PEACE_UPDATE)),e.today&&(this.mTaskList=new Array,this._UpdateTaskInfoList(this.mTaskList,e.today),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_TASKLIST_UPDATE)),e.yesterday&&(this.mYesterdayTaskMap={},this._UpdateTaskInfoMap(this.mYesterdayTaskMap,e.yesterday)),e.findExp&&(this.mRetrieveExpMap={},this._UpdateTaskInfoMap(this.mRetrieveExpMap,e.findExp),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_RETRIEVELIST_UPDATE)),e.findItem&&(this.mRetrieveResMap={},this._UpdateTaskInfoMap(this.mRetrieveResMap,e.findItem),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_RETRIEVELIST_UPDATE)),e.monster&&(this.monsterInfo.UpdateInfo(e.monster),GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_FOMALHAUT_MONSTERID))},t.prototype._UpdateTaskInfoList=function(e,t){for(var i=0,o=t;i<o.length;i++){var n=o[i],a=new DailyTaskInfo;a.UpdateInfo(n),e.push(a)}},t.prototype._UpdateTaskInfoMap=function(e,t){for(var i=0,o=t;i<o.length;i++){var n=o[i],a=new DailyTaskInfo;a.UpdateInfo(n),e[n.no]=a}},t.prototype.SendGainAward=function(e,t){var i=new Sproto.cs_dailyTask_otherActivity_reward_request;i.otherActivity=e,i.reward=t,this.Rpc(C2sProtocol.cs_dailyTask_otherActivity_reward,i)},t.prototype.SendQuilkDone=function(e){var t=new Sproto.cs_dailyTask_otherActivity_complete_request;t.otherActivity=e,this.Rpc(C2sProtocol.cs_dailyTask_otherActivity_complete,t)},t.prototype.SendUpgradeMedal=function(){var e=this,t=new Sproto.cs_dailyTask_up_level_request;this.Rpc(C2sProtocol.cs_dailyTask_up_level,t,function(t){t.ret&&(e.mBaseInfo.mLevel=t.lv,e.mBaseInfo.mExp=t.exp,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_MEDAL_UPDATE))},this)},t.prototype.SendGainActiveAward=function(e){var t=this,i=new Sproto.cs_dailyTask_activity_reward_request;i.rewardNo=e,this.Rpc(C2sProtocol.cs_dailyTask_activity_reward,i,function(e){e.ret&&(t.mBaseInfo.mActiveReward=e.activityReward,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_ACTIVE_UPDATE))},this)},t.prototype.SendRetrieve=function(e,t,i,o){var n=this,a=new Sproto.cs_dailyTask_activity_find_request;a.activityNo=e,a.cashtype=t,a.findType=i,a.num=o,this.Rpc(C2sProtocol.cs_dailyTask_activity_find,a,function(e){if(e.ret){if(n.mBaseInfo.mExp=e.exp,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_MEDAL_UPDATE),e.findType==DailyConst.TASK_RETRIEVE_TYPE_EXP){var t=n.mRetrieveExpMap[e.activityNo];t||(t=new DailyTaskInfo,t.mTaskId=e.activityNo,n.mRetrieveExpMap[e.activityNo]=t),t.mCount=e.num,UserTips.ins().showTips("已找回"+(e.findExpNum||0)+"点历练经验")}else{var i=n.mRetrieveResMap[e.activityNo];i||(i=new DailyTaskInfo,i.mTaskId=e.activityNo,n.mRetrieveResMap[e.activityNo]=i),i.mCount=e.num}GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_RETRIEVELIST_UPDATE)}},this)},t.prototype.SendRetrieveExp=function(){var e=new Sproto.cs_dailyTask_activity_find_all_exp_request;this.Rpc(C2sProtocol.cs_dailyTask_activity_find_all_exp,e,function(e){e.ret&&UserTips.ins().showTips("已找回"+(e.findExpNum||0)+"点历练经验")},this)},t.prototype.SendKoMonster=function(e){var t=new Sproto.cs_dailyTask_otherActivity_monster_request;t.no=e,this.Rpc(C2sProtocol.cs_dailyTask_otherActivity_monster,t)},t.prototype.SendUpStar=function(e){var t=new Sproto.cs_dailyTask_up_monster_request;t.no=e,this.Rpc(C2sProtocol.cs_dailyTask_up_monster,t)},Object.defineProperty(t.prototype,"peaceInfo",{get:function(){return this.mPeaceActionInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"teamInfo",{get:function(){return this.mTeamActionInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseInfo",{get:function(){return this.mBaseInfo},enumerable:!0,configurable:!0}),t.prototype.IsGetItem=function(){return this.monsterInfo.reward>0},t.prototype.IsTeamTargetDone=function(){return this.mTeamActionInfo.mCurValue>=GameGlobal.Config.DailyBaseConfig.teamFB},t.prototype.HasGainedTeamReward=function(){return this.mTeamActionInfo.mReward>0},t.prototype.IsPeaceTargetDone=function(e){return this.mPeaceActionInfo.mCurValue>=e},t.prototype.HasGainedPeaceReward=function(e){return(this.mPeaceActionInfo.mReward&Math.pow(2,e))>0},t.prototype.IsActiveTargetDone=function(e){return this.mBaseInfo.mCurActive>=e},t.prototype.HasGainedActiveReward=function(e){return(this.mBaseInfo.mActiveReward&Math.pow(2,e))>0},t.prototype.RecordResRetrieveFlag=function(e,t){if(e==DailyConst.TASK_RETRIEVE_COST_BINDGOD){if(t&&!this.mViewGoldRes)return;this.mViewBindGoldRes=t}else this.mViewGoldRes=t;GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_UPDATE_RETREVE_VIEW)},t.prototype.RecordExpFlag=function(e){this.mViewExp=e,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_UPDATE_RETREVE_VIEW)},t.prototype.RecordResFlag=function(e){this.mViewRes=e,GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_UPDATE_RETREVE_VIEW)},t.prototype.GetMonsterList=function(){for(var e=[],t=this.monsterInfo.monsterList,i=0,o=t;i<o.length;i++){var n=o[i],a=DailyConst.GetMonsterId(n);e.push(a)}return e},t.prototype.GetTaskIndex=function(e){for(var t=0,i=0,o=this.monsterInfo.monsterList;i<o.length;i++){var n=o[i];if(e==DailyConst.GetMonsterId(n))return t;t++}return-1},t.prototype.GetTimeReach=function(e){var t=this.mBaseInfo.mLevel,i=0;for(var o in GameGlobal.Config.DailyAttrsConfig){var n=GameGlobal.Config.DailyAttrsConfig[o];n.level>t&&n.level<=e+1&&(i+=n.proexp)}var a=DailyConst.GetMaxExpPerDay();return Math.ceil((i-this.mBaseInfo.mExp)/a)},t.prototype.GetTaskCount=function(e){for(var t=0,i=this.mTaskList;t<i.length;t++){var o=i[t];if(o.mTaskId==e)return o.mCount}return 0},t.prototype.GetRetrieveExpList=function(){if(!this.mBaseInfo.mFindFlag)return[];for(var e=new Array,t=CommonUtils.GetArray(GameGlobal.Config.DailyProgressConfig,"id"),i=0,o=t;i<o.length;i++){var n=o[i],a=this.mYesterdayTaskMap[n.id],r=a?a.mCount:0,s=this.mRetrieveExpMap[n.id],l=s?s.mCount:0,c=n.maxtimes-r-l,u=DailyConst.GetRetrieveConfig(n.id,DailyConst.TASK_RETRIEVE_COST_GOD,DailyConst.TASK_RETRIEVE_TYPE_EXP);if(u&&c>0){var p=new DailyTaskInfo;p.mTaskId=n.id,p.mCount=c,e.push(p)}}return e},t.prototype.HasFomalhautReward=function(){return this.monsterInfo.num<GameGlobal.Config.DailyBaseConfig.monster?!1:!this.IsGetItem()},t.prototype.HasMonsterAtk=function(){return this.monsterInfo.monsterList.length>0},t.prototype.GetRetrieveResList=function(){if(!this.mBaseInfo.mFindFlag)return[];for(var e=new Array,t=CommonUtils.GetArray(GameGlobal.Config.DailyProgressConfig,"id"),i=0,o=t;i<o.length;i++){var n=o[i],a=this.mYesterdayTaskMap[n.id],r=a?a.mCount:0,s=this.mRetrieveResMap[n.id],l=s?s.mCount:0,c=n.maxtimes-r-l,u=DailyConst.GetRetrieveConfig(n.id,DailyConst.TASK_RETRIEVE_COST_GOD,DailyConst.TASK_RETRIEVE_TYPE_RES),p=DailyConst.GetRetrieveConfig(n.id,DailyConst.TASK_RETRIEVE_COST_BINDGOD,DailyConst.TASK_RETRIEVE_TYPE_RES);if((u||p)&&c>0){var h=new DailyTaskInfo;h.mTaskId=n.id,h.mCount=c,e.push(h)}}return e},t.prototype.GetRetrieveResListByType=function(e){for(var t=this.GetRetrieveResList(),i=[],o=0,n=t;o<n.length;o++){var a=n[o],r=DailyConst.GetRetrieveConfig(a.mTaskId,e,DailyConst.TASK_RETRIEVE_TYPE_RES);r&&i.push(a)}return i},t.prototype.GetRetrieveExpCost=function(){for(var e={id:0,count:0,exp:0},t=this.GetRetrieveExpList(),i=0,o=t;i<o.length;i++){var n=o[i],a=DailyConst.GetRetrieveConfig(n.mTaskId,DailyConst.TASK_RETRIEVE_COST_GOD,DailyConst.TASK_RETRIEVE_TYPE_EXP),r=GameGlobal.Config.DailyProgressConfig[n.mTaskId];e.id=a.cost[0].id,e.count+=a.cost[0].count*n.mCount,e.exp+=r.exp*n.mCount}return e},t.prototype.CanMedalUpgrade=function(){return DailyConst.CanMedalUpgrade(this.mBaseInfo.mLevel,this.mBaseInfo.mExp)},t.prototype.HasBoxReward=function(){for(var e=CommonUtils.GetArray(GameGlobal.Config.DailyActiveConfig,"id"),t=0,i=e;t<i.length;t++){var o=i[t];if(this.IsActiveTargetDone(o.target)&&!this.HasGainedActiveReward(o.id))return!0}return!1},t.prototype.HasPeaceReward=function(){for(var e=DailyConst.GetPeaceList(),t=0,i=e;t<i.length;t++){var o=i[t];if(this.IsPeaceTargetDone(o.target)&&!this.HasGainedPeaceReward(o.reward))return!0}return!1},t.prototype.HasTeamReward=function(){return this.IsTeamTargetDone()&&!this.HasGainedTeamReward()},t.prototype.IsRedPointDaily=function(e){return this.mRedPoint.IsRedAct(e)},t.prototype.IsRedPoint=function(){return this.mRedPoint.Get(DailyModelRedPoint.INDEX_ACT),this.mRedPoint.IsRedPoint()},t}(BaseSystem);__reflect(DailyModel.prototype,"DailyModel");var DailyModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mRedPointMap={},i.mModel=t,i}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.DAILY_MEDAL_UPDATE,MessageDef.DAILY_ACTIVE_UPDATE,MessageDef.DAILY_RETRIEVELIST_UPDATE,MessageDef.DAILY_PEACE_UPDATE,MessageDef.DAILY_TEAM_UPDATE,MessageDef.DAILY_FOMALHAUT_MONSTERID,MessageDef.DAILY_UPDATE_RETREVE_VIEW,MessageDef.TEAM_FUBEN_INFO]},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e;var e},t.prototype.OnChange=function(e){e==t.INDEX_ACT&&GameGlobal.MessageCenter.dispatch(MessageDef.DAILY_REDPOINT_NOTICE)
},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mRedPointMap)if(this.mRedPointMap[e])return!0;return!1},t.prototype.DoActive=function(){this.mRedPointMap[t.MEDAL_UPGRADE]=this.mModel.CanMedalUpgrade(),this.mRedPointMap[t.ACTIVE_BOX_REWARD]=this.mModel.HasBoxReward(),this.mRedPointMap[t.RES_RETRIEVE]=this.mModel.GetRetrieveResList().length>0&&!this.mModel.mViewRes,this.mRedPointMap[t.EXP_RETRIEVE]=this.mModel.GetRetrieveExpList().length>0&&!this.mModel.mViewExp,this.mRedPointMap[t.PEACE_REWARD]=this.mModel.HasPeaceReward(),this.mRedPointMap[t.TEAM_REWARD]=this.mModel.HasTeamReward()||GameGlobal.CrossTeamModel.GetCount()>0,this.mRedPointMap[t.FOMALHAUT_NOTICE]=this.mModel.HasFomalhautReward()||this.mModel.HasMonsterAtk()},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.mRedPointMap[e]},t.INDEX_ACT=0,t.MEDAL_UPGRADE=1,t.ACTIVE_BOX_REWARD=2,t.RES_RETRIEVE=3,t.EXP_RETRIEVE=4,t.PEACE_REWARD=5,t.TEAM_REWARD=6,t.FOMALHAUT_NOTICE=7,t}(IRedPoint);__reflect(DailyModelRedPoint.prototype,"DailyModelRedPoint");var DailyConst=function(){function e(){}return e.GetPeaceList=function(){var t=[],i=GameGlobal.Config.DailyBonusConfig[e.TYPE_PEACE];for(var o in i){var n=i[o],a=this._GetConfig(n);a&&t.push(a)}return t},e.GetTeamConfig=function(){var t=GameGlobal.Config.DailyBonusConfig[e.TYPE_TEAM][0];return this._GetConfig(t)},e._GetConfig=function(e){var t=GameGlobal.actorModel.level;for(var i in e){var o=e[i];if(t>=o.level[0]&&t<=(o.level[1]||999))return o}},e.GetMedalId=function(e){var t;for(var i in GameGlobal.Config.DailyMedalConfig){var o=GameGlobal.Config.DailyMedalConfig[i];if(o.level>e)return t;t=o.id}return t},e.HasPrevMedal=function(e){var t=GameGlobal.Config.DailyMedalConfig[e-1];return null!=t},e.HasNextMedal=function(e){var t=GameGlobal.Config.DailyMedalConfig[e+1];return null!=t},e.GetMaxExpPerDay=function(){var e=0;for(var t in GameGlobal.Config.DailyProgressConfig){var i=GameGlobal.Config.DailyProgressConfig[t];e+=i.exp*i.maxtimes}return e},e.GetRetrieveConfig=function(e,t,i){var o=this._GetRetrieveConfig(e,t,i);if(o){var n=GameGlobal.actorModel.level,a=GameGlobal.Config.DailyLevelRetrieveConfig[o.index];for(var r in a){var s=a[r];if(n>=s.level[0]&&n<=(s.level[1]||999))return s}}},e.CanMedalUpgrade=function(e,t){var i=GameGlobal.Config.DailyAttrsConfig[e+1];return i?i.proexp<=t:!1},e.GetMonsterId=function(e){var t=GameGlobal.Config.DailyExpDungeonStar[e];return t?t.showid:0},e._GetRetrieveConfig=function(e,t,i){var o=GameGlobal.Config.DailyRetrieveConfig[e][t];for(var n in o){var a=o[n];if(a.restype==i)return a}},e.TYPE_PEACE=2,e.TYPE_TEAM=3,e.TASK_TYPE_PERSONALBOSS=1,e.TASK_TYPE_PUBLICBOSS=2,e.TASK_TYPE_EQUIPSMELT=3,e.TASK_TYPE_ARENA=4,e.TASK_TYPE_MATERIALCOPY=5,e.TASK_TYPE_ESCORT=6,e.TASK_TYPE_TEAMCOPY=7,e.TASK_TYPE_PERLOGIN=8,e.TASK_TYPE_PERCHARGE=9,e.TASK_RETRIEVE_COST_GOD=2,e.TASK_RETRIEVE_COST_BINDGOD=3,e.TASK_RETRIEVE_TYPE_RES=1,e.TASK_RETRIEVE_TYPE_EXP=2,e}();__reflect(DailyConst.prototype,"DailyConst");var DailyBaseInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mLevel=e.lv,this.mExp=e.exp,this.mCurActive=e.active,this.mActiveReward=e.activeReward,this.mFindFlag=0!=e.find},e}();__reflect(DailyBaseInfo.prototype,"DailyBaseInfo");var DailyTaskInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mTaskId=e.no,this.mCount=e.num},e}();__reflect(DailyTaskInfo.prototype,"DailyTaskInfo");var OtherActiveInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mCurValue=e.num,this.mReward=e.reward},e}();__reflect(OtherActiveInfo.prototype,"OtherActiveInfo");var MonsterInfo=function(){function e(){this.monsterList=[]}return e.prototype.UpdateInfo=function(e){this.monsterList=e.monsterList,this.num=e.num,this.timeout=e.time,this.reward=e.reward},e}();__reflect(MonsterInfo.prototype,"MonsterInfo");var DailyAwardView=function(e){function t(){var t=e.call(this)||this;return t.skinName="DailyAwardSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="奖励展示";var i=e[0],o=e[1];this.labText.text="活跃度达到"+o+"的奖励";for(var n=1,a=0,r=i;a<r.length;a++){var s=r[a];this["item"+n]&&(this["item"+n].visible=!0,this["item"+n].setItemAward(s.type,s.id,s.count)),n++}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DailyAwardView.prototype,"DailyAwardView");var DailyBoxItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.imgBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBoxClick,this)},t.prototype.setBoxInfo=function(e){this.imgBox.name=e.id,this.imgBox.source="ui_xyll_bm_xiangzi0"+e.quality,this.labActiveNum.text=e.target,this.imgGained.visible=GameGlobal.DailyModel.HasGainedActiveReward(e.id),this.redPoint.visible=GameGlobal.DailyModel.IsActiveTargetDone(e.target)&&!this.imgGained.visible},t.prototype._OnBoxClick=function(e){var t=parseInt(e.currentTarget.name);if(!GameGlobal.DailyModel.HasGainedActiveReward(t)){var i=GameGlobal.Config.DailyActiveConfig[t];return GameGlobal.DailyModel.IsActiveTargetDone(i.target)?void GameGlobal.DailyModel.SendGainActiveAward(t):void ViewManager.ins().open(DailyAwardView,i.reward,i.target)}},t}(eui.Component);__reflect(DailyBoxItem.prototype,"DailyBoxItem",["eui.UIComponent","egret.DisplayObject"]);var DailyExpRetrieveWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="DailyExpRetrieveSkin",t.commonWindowBg.SetTitle("历练找回"),t._AddClick(t.btnOneKey,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ExpRetrieveItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.DAILY_RETRIEVELIST_UPDATE,this.UpdateContent),this.commonWindowBg.OnAdded(this),this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnOneKey:var t=GameGlobal.DailyModel.GetRetrieveExpCost();WarnWin.show("是否花费"+t.count+"元宝找回"+t.exp+"点历练经验",function(){Checker.Money(t.id,t.count)&&GameGlobal.DailyModel.SendRetrieveExp()},this)}},t.prototype.UpdateContent=function(){var e=GameGlobal.DailyModel.GetRetrieveExpList();this.list.dataProvider=new eui.ArrayCollection(e),this.btnOneKey.visible=e.length>0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DailyExpRetrieveWin.prototype,"DailyExpRetrieveWin",["ICommonWindow"]);var ExpRetrieveItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnRetrieve.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnRetrieveBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.imgBg.visible=this.itemIndex%2==0;var t=GameGlobal.Config.DailyProgressConfig[e.mTaskId];this.labName.text=t.name,this.labCount.text="可找回"+e.mCount+"次",this.labPerTip.text=t.exp+"点";var i=DailyConst.GetRetrieveConfig(this.data.mTaskId,DailyConst.TASK_RETRIEVE_COST_GOD,DailyConst.TASK_RETRIEVE_TYPE_EXP),o=i.cost[0].id,n=GameGlobal.actorModel.GetCurrencyName(o);this.labCost.text=""+i.cost[0].count+n},t.prototype._OnRetrieveBtnClick=function(){ViewManager.ins().open(DailyRetrievePopWin,this.data,DailyConst.TASK_RETRIEVE_COST_GOD,DailyConst.TASK_RETRIEVE_TYPE_EXP)},t}(eui.ItemRenderer);__reflect(ExpRetrieveItem.prototype,"ExpRetrieveItem");var DailyFomalhautMainPanel=function(e){function t(){var t=e.call(this)||this;t.index=0,t.playLv=0,t.playLv=GameGlobal.actorModel.level;for(var i=GameGlobal.Config.DailyBonusConfig[1][0],o=1,n=0;n<i.length;n++){var a=i[n].level;if(2==a.length){if(t.playLv>=a[0]&&t.playLv<=a[1]){o=n;break}}else if(t.playLv>=a[0]){o=n;break}}return t.dailyBonusConfigTab=GameGlobal.Config.DailyBonusConfig[1][0][o],t.dailyBaseConfigTab=GameGlobal.Config.DailyBaseConfig,t.monsterInfo=GameGlobal.DailyModel.monsterInfo,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.taskBtn,e;var e},t.prototype.childrenCreated=function(){this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.getIndex),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.updateShow),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.updateBtn),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.updateTimeLabel),this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this._AddClick(this.taskBtn,this._OnClick),this._AddClick(this.oneKeyBtn,this._OnClick),this._AddClick(this.labBtn,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.itemList.dataProvider=new eui.ArrayCollection(this.dailyBonusConfigTab.itemid),this.labBtn.visible=!1,this.updateShow(),this.updateBtn(),this.updateTimeLabel()},t.prototype.UpdateContent=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.oneKeyBtn:if(this.monsterInfo.num>=this.dailyBaseConfigTab.monster)this.oneKeyBtn.label="领取奖励",GameGlobal.DailyModel.SendGainAward(1,this.dailyBonusConfigTab.reward);else{this.oneKeyBtn.label="一键完成";var t=this.dailyBaseConfigTab.monstercost[0],i=this.dailyBaseConfigTab.monster-this.monsterInfo.num,o=t.count*i;WarnWin.show("是否花费"+o+" 元宝快速完成？",function(){Checker.Money(t.id,o)&&GameGlobal.DailyModel.SendQuilkDone(1)},this)}break;case this.taskBtn:ViewManager.ins().open(DailyFomalhautTaskPanel,this.index);break;case this.labBtn:UserTips.ins().showTips("目前地图已无妖魔,请等待下次刷新")}},t.prototype.getIndex=function(){return 0},t.prototype.updateShow=function(){this.progressBar.value=this.monsterInfo.num,this.progressBar.maximum=this.dailyBaseConfigTab.monster,this.tabLab.text="完成次数:"+this.monsterInfo.num+"/"+this.dailyBaseConfigTab.monster,this.monstersCountLabel.text=GameGlobal.DailyModel.monsterInfo.monsterList.length+"/"+this.dailyBaseConfigTab.monlimit},t.prototype.updateBtn=function(){this.monsterInfo.num>=this.dailyBaseConfigTab.monster?(this.oneKeyBtn.label="领取奖励",1==GameGlobal.DailyModel.IsGetItem()&&(this.oneKeyBtn.enabled=!1)):this.oneKeyBtn.label="一键完成",0==GameGlobal.DailyModel.monsterInfo.monsterList.length?(this.taskBtn.enabled=!1,this.labBtn.visible=!0):(this.taskBtn.enabled=!0,this.labBtn.visible=!1)},t.prototype.updateTimeLabel=function(){var e=this;if(GameGlobal.DailyModel.monsterInfo.monsterList.length!=this.dailyBaseConfigTab.monlimit){var t=this.monsterInfo.timeout-GameServer.serverTime;0>=t?this.refreshTimeLabel.text=DateUtils.format_1(0):this.refreshTimeLabel.text=DateUtils.format_1(1e3*t),TimerManager.ins().doTimer(1e3,0,function(){return t=e.monsterInfo.timeout-GameServer.serverTime,0>=t?e.refreshTimeLabel.text=DateUtils.format_1(0):e.refreshTimeLabel.text=DateUtils.format_1(1e3*t),GameServer.serverTime>=e.monsterInfo.timeout?void TimerManager.ins().removeAll(e):void 0},this)}else this.refreshTimeLabel.text=DateUtils.format_1(0)},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="师门任务",t}(BaseView);__reflect(DailyFomalhautMainPanel.prototype,"DailyFomalhautMainPanel",["ICommonWindowTitle"]);var DailyFomalhautTaskPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.id=1,t.skinName="DailyFomalhautTaskSkin",t.dailyExpDungeonStarTab=GameGlobal.Config.DailyExpDungeonStar,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.challengeBtn,e;var e},t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this._AddClick(this.addBtn,this._OnClick),this._AddClick(this.challengeBtn,this._OnClick),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.GetStar),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.updateItemList),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.updateMonster)},t.prototype.OnOpen=function(e){this.index=e,this.id=GameGlobal.DailyModel.monsterInfo.monsterList[this.index],this.itemList.dataProvider=new eui.ArrayCollection(this.dailyExpDungeonStarTab[this.id].reward),this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("师门任务"),this.extraPanel.SetBodyId(MonstersConfig.GetAppId(this.dailyExpDungeonStarTab[this.id].showid));var t=this.GetPosName();this.positionLaber.text=t,this.GetStar(),this.dailyExpDungeonStarTab[this.id].star<7&&(this.refreshcost=this.dailyExpDungeonStarTab[this.id].refreshcost[0])},t.prototype.UpdateContent=function(){},t.prototype._OnClick=function(e){var t=this;switch(e.currentTarget){case this.addBtn:this.dailyExpDungeonStarTab[this.id].star<7?WarnWin.show("是否花费"+this.refreshcost.count+"绑元提升到满星？",function(){1==Checker.Money(t.refreshcost.id,t.refreshcost.count)&&GameGlobal.DailyModel.SendUpStar(t.index+1)},this):UserTips.ins().showTips("无法继续升星");break;case this.challengeBtn:UserFb.CheckFighting()&&GameGlobal.DailyModel.SendKoMonster(this.index+1)}},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.GetPosName=function(){var e="",t=GameGlobal.UserFb;t.chapterId;var i=GameGlobal.Config.ChaptersRewardConfig[t.chapterId].mapid;return e=GameGlobal.Config.ChaptersMapConfig[i].name},t.prototype.Getround=function(e){var t=0,i=GameGlobal.Config.ChaptersRewardConfig[e].dungeon;return t=GameGlobal.Config.ChaptersRewardConfig[i].totalTime},t.prototype.GetStar=function(){this.id=GameGlobal.DailyModel.monsterInfo.monsterList[this.index];for(var e=this.dailyExpDungeonStarTab[this.id].star,t=0;t<this.starGroup.numChildren;t++){var i=this.starGroup.getChildAt(t);i.source=e>t?"ui_bm_star022":"ui_bm_star021"}},t.prototype.updateItemList=function(){var e=GameGlobal.DailyModel.monsterInfo.monsterList[this.index];this.itemList.dataProvider=new eui.ArrayCollection(this.dailyExpDungeonStarTab[e].reward)},t.prototype.updateMonster=function(){this.id=GameGlobal.DailyModel.monsterInfo.monsterList[this.index],this.extraPanel.SetBodyId(MonstersConfig.GetAppId(this.dailyExpDungeonStarTab[this.id].showid))},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DailyFomalhautTaskPanel.prototype,"DailyFomalhautTaskPanel",["ICommonWindow"]);var DailyInfoPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnUpgrade,this._OnClick),this._AddClick(this.btnPrev,this._OnClick),this._AddClick(this.btnNext,this._OnClick),this._AddClick(this.btnResRetrieve,this._OnClick),this._AddClick(this.btnExpRetrieve,this._OnClick),this.list.itemRenderer=DailyTaskItem,this.SetTaskList(),this.SetRetrieveBtn(),this.SetMedalInfo(),this.SetActiveNumInfo()},t.prototype.UpdateContent=function(){},t.prototype.OnOpen=function(){this.observe(MessageDef.DAILY_ACTIVE_UPDATE,this.SetActiveNumInfo),this.observe(MessageDef.DAILY_MEDAL_UPDATE,this.SetMedalInfo),this.observe(MessageDef.DAILY_TASKLIST_UPDATE,this.SetTaskList),this.observe(MessageDef.DAILY_RETRIEVELIST_UPDATE,this.SetRetrieveBtn),this.observe(MessageDef.DAILY_UPDATE_RETREVE_VIEW,this.SetRetrieveBtn)},t.prototype.OnClose=function(){},t.prototype.SetRetrieveBtn=function(){UIHelper.ShowRedPoint(this.btnExpRetrieve,GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.EXP_RETRIEVE)),UIHelper.ShowRedPoint(this.btnResRetrieve,GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.RES_RETRIEVE))},t.prototype.SetTaskList=function(){var e=CommonUtils.GetArray(GameGlobal.Config.DailyProgressConfig,"id"),t=function(e){var t=e.id;GameGlobal.DailyModel.GetTaskCount(t)>=e.maxtimes&&(t+=1e3);var i=GameGlobal.actorModel.level;return i<e.openlv&&(t+=500),t};e.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.SetActiveNumInfo=function(){var e=GameGlobal.DailyModel.baseInfo;this.labActiveNum.text=e.mCurActive.toString();var t=GameGlobal.Config.DailyBaseConfig.activeupnum;this.progActive.maximum=GameGlobal.Config.DailyBaseConfig.activeupnum,this.progActive.value=e.mCurActive;for(var i=CommonUtils.GetArray(GameGlobal.Config.DailyActiveConfig,"id"),o=1,n=0,a=i;n<a.length;n++){var r=a[n];this["boxItem"+o]&&(this["boxItem"+o].visible=!0,this["boxItem"+o].$setX(r.target/t*500-36),this["boxItem"+o].setBoxInfo(r)),o++}},t.prototype.SetMedalInfo=function(){var e=GameGlobal.DailyModel.baseInfo;this.mMedalId=DailyConst.GetMedalId(e.mLevel),this.SetMedal(this.mMedalId),this.labLevel.text="Lv."+e.mLevel;var t=GameGlobal.Config.DailyAttrsConfig[e.mLevel];this.powerLabel.text=ItemConfig.CalcAttrScoreValue(t.attrpower),UIHelper.ShowRedPoint(this.btnUpgrade,GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.MEDAL_UPGRADE));for(var i=1,o=0,n=t.attrpower;o<n.length;o++){var a=n[o];this["labPropName"+i]&&(this["labPropName"+i].text=AttributeData.getAttrStrByType(a.type)+"：",this["labPropNum"+i].text=a.value),i++}var r=GameGlobal.Config.DailyAttrsConfig[e.mLevel+1];if(r){this.progExp.maximum=r.proexp,this.progExp.value=e.mExp,this.labLvExp.text=e.mExp+"/"+r.proexp;for(var s=1,l=0,c=r.rewards;l<c.length;l++){var u=c[l];this["item"+s]&&(this["item"+s].visible=!0,this["item"+s].setItemAward(u.type,u.id,u.count)),s++}}else{this.progExp.maximum=999,this.progExp.value=999,this.labLvExp.text="",this.btnUpgrade.filters=Color.GetFilter(),this.btnUpgrade.enabled=!1;for(var p=1,h=0,d=t.rewards;h<d.length;h++){var u=d[h];this["item"+p]&&(this["item"+p].visible=!0,this["item"+p].setItemAward(u.type,u.id,u.count)),p++}}},t.prototype.SetMedal=function(e){this.mChooseMedalId=e;var t=GameGlobal.Config.DailyMedalConfig[e];if(t&&(this.imgIcon.source=t.icon,this.imgQuality.source="ui_xyll_bm_"+t.grade,this.btnPrev.visible=DailyConst.HasPrevMedal(e),this.btnNext.visible=DailyConst.HasNextMedal(e)&&e<=this.mMedalId,this.labUpgradeTip.visible=e>this.mMedalId,e>this.mMedalId)){var i=GameGlobal.DailyModel.GetTimeReach(t.level),o="|C:0x019704&T:"+t.level+"|C:0x6e330b&T:级激活(约|C:0x019704&T:"+i+"|C:0x6e330b&T:天后)|";this.labUpgradeTip.textFlow=TextFlowMaker.generateTextFlow(o)}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnUpgrade:var t=GameGlobal.DailyModel.baseInfo,i=GameGlobal.Config.DailyAttrsConfig[t.mLevel+1];i.proexp<=t.mExp&&GameGlobal.DailyModel.SendUpgradeMedal();break;case this.btnPrev:this.SetMedal(this.mChooseMedalId-1);break;case this.btnNext:this.SetMedal(this.mChooseMedalId+1);break;case this.btnExpRetrieve:GameGlobal.DailyModel.RecordExpFlag(!0),ViewManager.ins().open(DailyExpRetrieveWin);break;case this.btnResRetrieve:GameGlobal.DailyModel.RecordResFlag(!0),ViewManager.ins().open(DailyResRetrieveWin)}},t.NAME="西游历练",t}(BaseView);__reflect(DailyInfoPanel.prototype,"DailyInfoPanel",["ICommonWindowTitle"]);var DailyTaskItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnGoto.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnGotoBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.imgBg.visible=this.itemIndex%2==0,this.btnGoto.name=e.id,this.labTaskName.text=e.name,this.labCount.text=GameGlobal.DailyModel.GetTaskCount(e.id)+"/"+e.maxtimes,this.labActiveTip.text=e.exp+"点/次";var t=GameGlobal.actorModel.level;return GameGlobal.DailyModel.GetTaskCount(e.id)<e.maxtimes?(this.btnGoto.visible=t>=e.openlv,this.labTip.visible=t<e.openlv,this.labTip.text=e.openlv+"级开启",void(this.labTip.textColor=Color.Red)):(this.btnGoto.visible=!1,this.labTip.visible=!0,this.labTip.text="已完成",void(this.labTip.textColor=Color.l_green_1))},t.prototype._OnGotoBtnClick=function(e){var t=parseInt(e.currentTarget.name);switch(t){case DailyConst.TASK_TYPE_PERSONALBOSS:ViewManager.ins().open(BossMainPanel);break;case DailyConst.TASK_TYPE_PUBLICBOSS:ViewManager.ins().openIndex(BossMainPanel,1);break;case DailyConst.TASK_TYPE_EQUIPSMELT:ViewManager.ins().open(SmeltEquipTotalWin);break;case DailyConst.TASK_TYPE_ARENA:ViewManager.ins().open(ArenaWin);break;case DailyConst.TASK_TYPE_MATERIALCOPY:ViewManager.ins().open(FbLayer);break;case DailyConst.TASK_TYPE_ESCORT:ViewManager.ins().open(QujingMainWin);break;case DailyConst.TASK_TYPE_TEAMCOPY:ViewManager.ins().open(CrossMainPanel);break;case DailyConst.TASK_TYPE_PERCHARGE:RechargeWin.Open()}ViewManager.ins().close(DailyMainWin)},t}(eui.ItemRenderer);__reflect(DailyTaskItem.prototype,"DailyTaskItem");var DailyMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="DailyMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.viewStack.tabChildren=[TabView.CreateTabViewData(DailyInfoPanel,{skinName:"DailyInfoSkin"}),TabView.CreateTabViewData(DailyFomalhautMainPanel,{skinName:"DailyFomalhautMainSkin"}),TabView.CreateTabViewData(DailyPeacePanel,{skinName:"DailyPeaceSkin"}),TabView.CreateTabViewData(DailyTeamPanel,{skinName:"DailyTeamSkin"})],this.commonWindowBg.SetViewStack(this.viewStack)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_48)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.DAILY_MEDAL_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_ACTIVE_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_RETRIEVELIST_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_TEAM_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_PEACE_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_UPDATE_RETREVE_VIEW,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.UpdateTabBtnRedPoint=function(){var e=GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.MEDAL_UPGRADE)||GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.ACTIVE_BOX_REWARD)||GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.RES_RETRIEVE)||GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.EXP_RETRIEVE);this.commonWindowBg.ShowTalRedPoint(0,e),this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.FOMALHAUT_NOTICE)),this.commonWindowBg.ShowTalRedPoint(2,GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.PEACE_REWARD)),this.commonWindowBg.ShowTalRedPoint(3,GameGlobal.DailyModel.IsRedPointDaily(DailyModelRedPoint.TEAM_REWARD))},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DailyMainWin.prototype,"DailyMainWin",["ICommonWindow"]);var DailyPeacePanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnOneKey,this._OnClick),this.list.itemRenderer=DailyPeaceItem;var e=DailyConst.GetPeaceList();this.list.dataProvider=new eui.ArrayCollection(e),this.SetWaveInfo()},t.prototype.SetWaveInfo=function(){var e=GameGlobal.DailyModel.peaceInfo,t=GameGlobal.Config.DailyBaseConfig.chapterWar;this.labWaveCount.textFlow=TextFlowMaker.generateTextFlow("|C:0x019704&T:"+e.mCurValue+"||C:0x6e330b&T:/"+t+"|"),this.btnOneKey.enabled=!GameGlobal.DailyModel.IsPeaceTargetDone(t)},t.prototype.UpdateContent=function(){this.SetWaveInfo(),UIHelper.ListRefresh(this.list)},t.prototype.OnOpen=function(){this.observe(MessageDef.DAILY_PEACE_UPDATE,this.UpdateContent)},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnOneKey:var t=GameGlobal.DailyModel.peaceInfo,i=GameGlobal.Config.DailyBaseConfig.chapterWar,o=i-t.mCurValue,n=GameGlobal.Config.DailyBaseConfig.chapterWarcost[0];WarnWin.show("是否花费"+n.count*o+"元宝快速完成？",function(){Checker.Money(n.id,n.count*o)&&GameGlobal.DailyModel.SendQuilkDone(DailyConst.TYPE_PEACE)},this)}},t.NAME="每日300",t}(BaseView);__reflect(DailyPeacePanel.prototype,"DailyPeacePanel",["ICommonWindowTitle"]);var DailyPeaceItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnGain.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnGainBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.btnGain.name=e.reward,this.labText.text="消灭"+e.target+"波奖励",this.imgGained.visible=GameGlobal.DailyModel.HasGainedPeaceReward(e.reward),this.btnGain.visible=!GameGlobal.DailyModel.HasGainedPeaceReward(e.reward);var t=GameGlobal.DailyModel.IsPeaceTargetDone(e.target)&&!GameGlobal.DailyModel.HasGainedPeaceReward(e.reward);UIHelper.ShowRedPoint(this.btnGain,t);for(var i=1,o=0,n=e.itemid;o<n.length;o++){var a=n[o],r="item"+i;this[r]&&(this[r].visible=!0,this[r].setItemAward(a.type,a.id,a.count)),i++}},t.prototype._OnGainBtnClick=function(e){var t=parseInt(e.currentTarget.name);return GameGlobal.DailyModel.IsPeaceTargetDone(this.data.target)?void GameGlobal.DailyModel.SendGainAward(DailyConst.TYPE_PEACE,t):void UserTips.ins().showTips("目标未达成，不可领取！")},t}(eui.ItemRenderer);__reflect(DailyPeaceItem.prototype,"DailyPeaceItem");var DailyResRetrieveGoldPanel=function(e){function t(){var t=e.call(this)||this;return t.mType=DailyConst.TASK_RETRIEVE_COST_GOD,t}return __extends(t,e),t.NAME="元宝找回",t}(DailyResRetrievePanel);__reflect(DailyResRetrieveGoldPanel.prototype,"DailyResRetrieveGoldPanel");var ccode=ccode||{};ccode.getByte=function(e){for(var t=e.length,i=new Array,o=0;t>o;o++)i[o]=e.charCodeAt(o);return i},ccode.getChar=function(e){var t=new String;for(var i in e)t+=String.fromCharCode(e[i]);return t},ccode.encrypt=function(e,t){for(var i=ccode.getByte(e),o=ccode.getByte(t),n=new Array,a=i.length,r=o.length,s=0;a>s;s++)n[s]=(255&i[s])+(255&o[s%r]);return n.join("@")},ccode.decrypt=function(e,t){for(var i=e.split("@"),o=ccode.getByte(t),n=new Array,a=i.length,r=o.length,s=0;a>s;s++)n[s]=i[s]-(255&o[s%r]);return ccode.getChar(n)};var DailyResRetrieveWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(DailyResRetrievePanel),TabView.CreateTabViewData(DailyResRetrieveGoldPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.mCommonWindowBg.OnAdded(this,i),this.observe(MessageDef.DAILY_RETRIEVELIST_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.DAILY_UPDATE_RETREVE_VIEW,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){var e=GameGlobal.DailyModel.GetRetrieveResListByType(DailyConst.TASK_RETRIEVE_COST_BINDGOD).length>0;e=e&&!GameGlobal.DailyModel.mViewBindGoldRes,this.mCommonWindowBg.ShowTalRedPoint(0,e),e=GameGlobal.DailyModel.GetRetrieveResListByType(DailyConst.TASK_RETRIEVE_COST_GOD).length>0,e=e&&!GameGlobal.DailyModel.mViewGoldRes,this.mCommonWindowBg.ShowTalRedPoint(1,e)},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DailyResRetrieveWin.prototype,"DailyResRetrieveWin");var DailyRetrievePopWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="DailyRetrieveCountSkin",t._AddClick(t.btnRetrieve,t._OnClick),t._AddClick(t.btnMinues,t._OnClick),t._AddClick(t.btnAdd,t._OnClick),t.sliderRetrieve.addEventListener(egret.Event.CHANGE,t._OnSliderChange,t),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.mTaskInfo=e[0],this.mCostType=e[1],this.mRetrieveType=e[2],this.commonDialog.title=this.mRetrieveType==DailyConst.TASK_RETRIEVE_TYPE_RES?"找回资源":"找回历练";var i=GameGlobal.Config.DailyProgressConfig[this.mTaskInfo.mTaskId];this.labNameTip.textFlow=TextFlowMaker.generateTextFlow("|C:0x6e330b&T:"+i.name+" （可找回|C:0x019704&T:"+this.mTaskInfo.mCount+"|C:0x6e330b&T:次）|"),this.sliderRetrieve.maximum=this.mTaskInfo.mCount;var o=DailyConst.GetRetrieveConfig(this.mTaskInfo.mTaskId,this.mCostType,this.mRetrieveType),n=GameGlobal.actorModel.GetNum(o.cost[0].id),a=Math.floor(n/o.cost[0].count);this.sliderRetrieve.value=Math.min(this.mTaskInfo.mCount,a),this.SetCostInfo()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnSliderChange=function(){this.SetCostInfo()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRetrieve:var i=this.sliderRetrieve.value;if(i>0){var o=DailyConst.GetRetrieveConfig(this.mTaskInfo.mTaskId,this.mCostType,this.mRetrieveType);Checker.Money(o.cost[0].id,o.cost[0].count*i)&&GameGlobal.DailyModel.SendRetrieve(this.mTaskInfo.mTaskId,this.mCostType,this.mRetrieveType,i)}ViewManager.ins().close(t);break;case this.btnMinues:this.changeSlider(-1);break;case this.btnAdd:this.changeSlider(1)}},t.prototype.SetCostInfo=function(){var e=this.sliderRetrieve.value,t=DailyConst.GetRetrieveConfig(this.mTaskInfo.mTaskId,this.mCostType,this.mRetrieveType),i=this.mCostType==DailyConst.TASK_RETRIEVE_COST_BINDGOD?"绑定元宝":"元宝",o="|C:0x6e330b&T:总价：|C:0x019704&T:"+e*t.cost[0].count+"|C:0x6e330b&T:"+i+"（找回|C:0x019704&T:"+e+"|C:0x6e330b&T:次）|";this.labCostTip.textFlow=TextFlowMaker.generateTextFlow(o)},t.prototype.changeSlider=function(e){var t=this.sliderRetrieve.value,i=Math.min(Math.max(t+e,0),this.mTaskInfo.mCount);this.sliderRetrieve.value=i,this.SetCostInfo()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DailyRetrievePopWin.prototype,"DailyRetrievePopWin");var DailyTeamPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnGoTo,this._OnClick),this._AddClick(this.btnOneKey,this._OnClick),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.DailyModel.teamInfo,t=GameGlobal.Config.CrossTeamConfig.rewardCount;this.labCount.text=GameGlobal.CrossTeamModel.GetCount()+"/"+t,this.labTip.text=GameGlobal.CrossTeamModel.GetDescForDaily();var i=GameGlobal.Config.DailyBaseConfig.teamFB;this.labAmbitionTip.text="完成"+i+"次任意组队副本可获得以下额外奖励",this.imgDouble.visible=GameGlobal.CrossTeamModel.IsDoubleReward(),this.prog.maximum=i,this.prog.value=e.mCurValue,this.btnOneKey.label=GameGlobal.DailyModel.IsTeamTargetDone()?"领取奖励":"一键完成",this.btnOneKey.enabled=!GameGlobal.DailyModel.HasGainedTeamReward();var o=GameGlobal.DailyModel.IsTeamTargetDone()&&!GameGlobal.DailyModel.HasGainedTeamReward();UIHelper.ShowRedPoint(this.btnOneKey,o),GameGlobal.DailyModel.HasGainedTeamReward()&&(this.btnOneKey.label="已领取");for(var n=DailyConst.GetTeamConfig(),a=1,r=0,s=n.itemid;r<s.length;r++){var l=s[r],c="item"+a;this[c]&&(this[c].visible=!0,this[c].setItemAward(l.type,l.id,l.count)),a++}},t.prototype.OnOpen=function(){this.observe(MessageDef.DAILY_TEAM_UPDATE,this.UpdateContent)},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnGoTo:ViewManager.ins().open(CrossMainPanel),ViewManager.ins().close(DailyMainWin);break;case this.btnOneKey:if(GameGlobal.DailyModel.IsTeamTargetDone()){var t=DailyConst.GetTeamConfig();GameGlobal.DailyModel.SendGainAward(DailyConst.TYPE_TEAM,t.reward)}else{var i=GameGlobal.Config.DailyBaseConfig.teamFBcost[0];WarnWin.show("是否花费"+i.count+"元宝快速完成？",function(){Checker.Money(i.id,i.count)&&GameGlobal.DailyModel.SendQuilkDone(DailyConst.TYPE_TEAM)},this)}}},t.NAME="组队历练",t}(BaseView);__reflect(DailyTeamPanel.prototype,"DailyTeamPanel",["ICommonWindowTitle"]);var DeityEquipRedPoint=function(e){function t(){var t=e.call(this)||this;return t.mRedPointMap={},t}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.CHANGE_EQUIP,MessageDef.DEITYEQUIP_INIT,MessageDef.ITEM_COUNT_CHANGE]},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e;var e},t.prototype.OnChange=function(e){e==t.INDEX_ACT&&GameGlobal.MessageCenter.dispatch(MessageDef.DEITYEQUIP_ALL_NOTICE)},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mRedPointMap)if(this.mRedPointMap[e])return!0;
return!1},t.prototype.DoActive=function(){this.mRedPointMap[t.AWAKE]=GameGlobal.UserEquip.HasDeityEquipAwake(),this.mRedPointMap[t.INJECT]=GameGlobal.UserEquip.HasDeityEquipInject(),this.mRedPointMap[t.RESOLVE]=GameGlobal.UserEquip.HasDeityEquipResolve()},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.mRedPointMap[e]},t.INDEX_ACT=0,t.AWAKE=1,t.INJECT=2,t.RESOLVE=3,t}(IRedPoint);__reflect(DeityEquipRedPoint.prototype,"DeityEquipRedPoint");var DeityEquipConst=function(){function e(){}return e.IsDeityEquip=function(e){if(!e)return!1;var t=GameGlobal.Config.ItemConfig[e];return t?t.quality>=5:!1},e.GetNextDeityEquipId=function(e,t){if(this.IsDeityEquip(e)){var i=GameGlobal.Config.DeityAwakeConfig[e];return i?i.attrpower:-1}var o=GameGlobal.Config.DeityComposeConfig[t];return o?o.id:-1},e.GetAwakeCost=function(e,t){if(this.IsDeityEquip(e)){var i=GameGlobal.Config.DeityAwakeConfig[e];return i?i.cost[0]:null}var o=GameGlobal.Config.DeityComposeConfig[t];return o?o.cost[0]:null},e.GetEquipAttrText=function(e){var t=[],i=GameGlobal.Config.EquipConfig[e];if(!i)return t;for(var o=0,n=i.attrs||[];o<n.length;o++){var a=n[o];t.push(AttributeData.getAttrStrByType(a.type)+"+"+a.value)}return t},e.GetInjectCost=function(e,t){var i=GameGlobal.Config.DeitySpiritConfig[e][t-1];return i?i.cost[0]:null},e.GetInjectProgInfo=function(e,t){var i=GameGlobal.Config.DeitySpiritConfig[e][t-1];return i?[i.exp,i.proexp]:[0,1]},e.GetInjectAttrText=function(e,t){var i,o=[],n=GameGlobal.Config.DeitySpiritConfig[e][t-1];if(!n)return[o,i];for(var a in n.attrpower||[]){var r=parseInt(a),s=n.attrpower[r];3>r?o.push(AttributeData.getAttrStrByType(s.type)+"+"+s.value):i=AttributeData.getAttrStrByType(s.type)+"+"+s.value}return[o,i]},e.GetRateText=function(e){var t,i=GameGlobal.Config.DeityBaseConfig.value,o=GameGlobal.Config.DeityBaseConfig.des;for(var n in i){var a=i[n];if(!(e>=a))break;t=parseInt(n)}return o[t]},e.IsMaxInjectLevel=function(e,t){if(0==t)return!1;var i=GameGlobal.Config.DeitySpiritConfig[e][t];return null==i},e.IsMaxAwakeLevel=function(e){if(!e)return!1;var t=GameGlobal.Config.DeityAwakeConfig[e];return t?null==t.attrpower:!1},e.GetCurInjectConfig=function(e){var t=GameGlobal.Config.DeityResonateConfig[1];for(var i in GameGlobal.Config.DeityResonateConfig){var o=GameGlobal.Config.DeityResonateConfig[i];if(!(e>=o.level))break;t=o}return t},e.GetNextInjectConfig=function(e){for(var t in GameGlobal.Config.DeityResonateConfig){var i=GameGlobal.Config.DeityResonateConfig[t];if(e<i.level)return 1==parseInt(t)?null:i}},e.GetDeityEquipActTextList=function(e){var t=[];for(var i in GameGlobal.Config.DeityActConfig){for(var o=GameGlobal.Config.DeityActConfig[i],n=e>=o.level?Color.Green:Color.White,a="",r=0,s=o.attrpower;r<s.length;r++){var l=s[r];a=""+a+AttributeData.getAttrStrByType(l.type)+": |C:"+n+"&T:"+l.value+"| "}a+=e<o.level?"(需"+o.level+"件)":"",t.push(a)}return t},e.GetDeltaNum=function(e,t,i,o,n){var a=GameGlobal.Config.DeitySpiritConfig[e][i],r=o*a.exp;return n>i&&(r=a.proexp),r-t*a.exp},e}();__reflect(DeityEquipConst.prototype,"DeityEquipConst");var DeityEquipAwakePanel=function(e){function t(){var t=e.call(this)||this;return t.mCurChooseIdx=0,t.mAwakeFlag=!1,t.skinName="DeityEquipAwakeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=0;10>e;e++)this["item"+e].name=""+e,this["item"+e].UnshowDetail(),this._AddClick(this["item"+e],this._OnItemClick);this.itemCur.UnshowDetail(),this._AddClick(this.btnAwake,this._OnClicked),this._AddClick(this.labResolve,this._OnTap)},t.prototype.UpdateContent=function(){this.SetEquipList(),this.ChooseEquip(),this.UpdateRedPoint(),this.ShowAwakeEff()},t.prototype.OnOpen=function(){this.observe(MessageDef.CHANGE_EQUIP,this.UpdateContent),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),UIHelper.SetLinkStyleLabel(this.labResolve)},t.prototype.OnClose=function(){},t.prototype.SetEquipList=function(){for(var e=GameGlobal.SubRoles.GetRoleData(),t=0;10>t;t++){var i=e.getEquipByIndex(t);this["item"+t].SetItemInfo(i,t)}},t.prototype.ChooseEquip=function(){this["item"+this.mCurChooseIdx].ChooseItem(!0);var e=GameGlobal.SubRoles.GetRoleData(),t=e.getEquipByIndex(this.mCurChooseIdx);this.itemCur.SetItemInfo(t,this.mCurChooseIdx,!0),this.itemCur.SetModel(e);var i=t.item.configID,o=DeityEquipConst.IsDeityEquip(i),n=DeityEquipConst.GetEquipAttrText(i);if(this.labCurAttr1.text=o?n[0]||"":"未觉醒",this.labCurAttr2.text=o?n[1]||"":"未觉醒",this.labCurAttr3.text=o?n[2]||"":"未觉醒",this.labCurAttr1.textColor=o?16773150:Color.White,this.labCurAttr2.textColor=o?16773150:Color.White,this.labCurAttr3.textColor=o?16773150:Color.White,DeityEquipConst.IsMaxAwakeLevel(i))return this.groupCur.x=284,this.labMax.visible=!0,void(this.groupUpgrade.visible=!1);this.groupCur.x=151,this.labMax.visible=!1,this.groupUpgrade.visible=!0;var a=DeityEquipConst.GetNextDeityEquipId(i,this.mCurChooseIdx);this.itemNext.SetItemConfigId(a);var r=DeityEquipConst.GetEquipAttrText(a);this.labNextAttr1.text=r[0]||"",this.labNextAttr2.text=r[1]||"",this.labNextAttr3.text=r[2]||"",this.btnAwake.label=DeityEquipConst.IsDeityEquip(i)?"觉醒":"合成";var s=DeityEquipConst.GetAwakeCost(i,this.mCurChooseIdx);s&&(this.needItemView.SetItemId(s.id,s.count),this.getwayLabel.SetId(s.id))},t.prototype._OnItemClick=function(e){this["item"+this.mCurChooseIdx].ChooseItem(!1),this.mCurChooseIdx=parseInt(e.currentTarget.name),this.ChooseEquip()},t.prototype.UpdateRedPoint=function(){this.imgRed.visible=GameGlobal.UserEquip.HasDeityEquipResolve();for(var e=0;10>e;e++)UIHelper.ShowRedPoint(this["item"+e],GameGlobal.UserEquip.CanTheDeityEquipAwake(e))},t.prototype.ShowAwakeEff=function(){if(this.mAwakeFlag){var e=new MovieClip;e.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_jiexi001"),!0,1),this.groupEff.addChild(e),this.mAwakeFlag=!1}},t.prototype._OnTap=function(){ViewManager.ins().open(DeityEquipResolveWin)},t.prototype._OnClicked=function(){var e=GameGlobal.SubRoles.GetRoleData(),t=e.getEquipByIndex(this.mCurChooseIdx),i=t.item.configID,o=DeityEquipConst.GetNextDeityEquipId(i,this.mCurChooseIdx),n=GameGlobal.Config.ItemConfig[o];if(n&&n.level>GameGlobal.actorModel.level)return void UserTips.ins().showTips("等级不足，不可以觉醒该装备");var a=DeityEquipConst.GetAwakeCost(i,this.mCurChooseIdx);Checker.Data(a)&&(DeityEquipConst.IsDeityEquip(i)?(this.mAwakeFlag=!0,GameGlobal.UserEquip.SendDeityEquipAwake(this.mCurChooseIdx)):GameGlobal.UserEquip.SendComposeDeityEquip(this.mCurChooseIdx))},t.NAME="觉醒",t}(BaseView);__reflect(DeityEquipAwakePanel.prototype,"DeityEquipAwakePanel",["ICommonWindowTitle"]);var DeityEquipDetailWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="DeityEquipDetailSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.SetInjectInfo(),this.SetNextInjectInfo(),this.SetDeityEquipNumInfo()},t.prototype.OnClose=function(){},t.prototype.SetInjectInfo=function(){var e=GameGlobal.UserEquip.GetDeityEquipInjectLevel(),t=DeityEquipConst.GetCurInjectConfig(e),i="注灵总等级："+e+"/"+t.level+"级";i+=e>=t.level?"(已激活)":"(未激活)",this.labAttrTotal.text=i;for(var o=t.attrpower,n=0;4>n;n++){var a=o[n];this["labInjectAttr"+n].visible=null!=a,a&&(this["labInjectAttr"+n].text=AttributeData.getAttrStrByType(a.type)+": "+a.value)}},t.prototype.SetNextInjectInfo=function(){var e=GameGlobal.UserEquip.GetDeityEquipInjectLevel(),t=DeityEquipConst.GetNextInjectConfig(e);if(!t)return this.groupNext.visible=!1,void(this.groupNum.y=this.groupNext.y+15);this.labNextTotalAttr.text="下一级: 需"+t.level+"级";for(var i=t.attrpower,o=0;4>o;o++){var n=i[o];this["labInjectNextAttr"+o].visible=null!=n,n&&(this["labInjectNextAttr"+o].text=AttributeData.getAttrStrByType(n.type)+": "+n.value)}},t.prototype.SetDeityEquipNumInfo=function(){for(var e=GameGlobal.UserEquip.GetDeityEquipNum(),t=DeityEquipConst.GetDeityEquipActTextList(e),i=0;10>i;i++){var o=t[i];this["labAwake"+i].visible=null!=o,o&&(this["labAwake"+i].textFlow=TextFlowMaker.generateTextFlow(o))}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DeityEquipDetailWin.prototype,"DeityEquipDetailWin");var DeityEquipInjectPanel=function(e){function t(){var t=e.call(this)||this;return t.mCurChooseIdx=0,t.skinName="DeityEquipInjectSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=0;10>e;e++)this["item"+e].name=""+e,this["item"+e].UnshowDetail(),this._AddClick(this["item"+e],this._OnItemClick);this.showItem.UnshowDetail(),this._AddClick(this.btnInject,this._OnClicked),this.mCurChooseIdx=GameGlobal.UserEquip.GetDeityEquipPos()},t.prototype.UpdateContent=function(){this.SetEquipList(),this.ChooseEquip(),this.UpdateRedPoint()},t.prototype.OnOpen=function(){this.observe(MessageDef.CHANGE_EQUIP,this.UpdateInfo),this.InitProgEff()},t.prototype.OnClose=function(){},t.prototype.UpdateInfo=function(){this.ChooseEquip(),this.UpdateRedPoint()},t.prototype.SetEquipList=function(){for(var e=GameGlobal.SubRoles.GetRoleData(),t=0;10>t;t++){var i=e.getEquipByIndex(t);this["item"+t].SetItemInfo(i,t)}},t.prototype.ChooseEquip=function(){this.SetPopTip(),this["item"+this.mCurChooseIdx].ChooseItem(!0);var e=GameGlobal.SubRoles.GetRoleData(),t=e.getEquipByIndex(this.mCurChooseIdx);this.showItem.SetItemInfo(t,this.mCurChooseIdx,!0),this.showItem.SetModel(e);var i=t.deityEquipData.injectLevel,o=DeityEquipConst.GetInjectProgInfo(this.mCurChooseIdx,i+1),n=o[0],a=o[1];this.SetProg(Math.floor(t.deityEquipData.injectNum*n*100/a));var r=DeityEquipConst.GetRateText(t.deityEquipData.injectNum);this.labRateInfo.textFlow=TextFlowMaker.generateTextFlow(r);var s=DeityEquipConst.GetInjectAttrText(this.mCurChooseIdx,i),l=s[0],c=s[1];if(this.labCurAttr1.text=0==i?"未激活":l[0]||"",this.labCurAttr2.text=0==i?"未激活":l[1]||"",this.labCurAttr3.text=0==i?"未激活":l[2]||"",this.labCurAttr1.textColor=0==i?Color.White:16773150,this.labCurAttr2.textColor=0==i?Color.White:16773150,this.labCurAttr3.textColor=0==i?Color.White:16773150,this.labCurProp.text=i>0?"+"+i+" 当前属性":"当前属性",this.groupCurSpecial.visible=null!=c,this.labCurSpecAttr.text=c||"",DeityEquipConst.IsMaxInjectLevel(this.mCurChooseIdx,i))return this.groupCur.x=284,this.groupUpgrade.visible=!1,void(this.labMax.visible=!0);this.groupCur.x=164,this.groupUpgrade.visible=!0,this.labMax.visible=!1;var u=DeityEquipConst.GetInjectAttrText(this.mCurChooseIdx,i+1),p=u[0],h=u[1];this.labNextAttr1.text=p[0]||"",this.labNextAttr2.text=p[1]||"",this.labNextAttr3.text=p[2]||"",this.labNextProp.text="+"+(i+1)+" 下级属性",this.groupNextSpecial.visible=null!=h,this.labNextSpecAttr.text=h||"";var d=DeityEquipConst.GetInjectCost(this.mCurChooseIdx,i+1);d&&(this.needItemView.SetItemId(d.id,d.count),this.getwayLabel.SetId(d.id))},t.prototype.UpdateRedPoint=function(){for(var e=0;10>e;e++)UIHelper.ShowRedPoint(this["item"+e],GameGlobal.UserEquip.CanTheDeityEquipInject(e))},t.prototype._OnItemClick=function(e){var t=parseInt(e.currentTarget.name),i=GameGlobal.SubRoles.GetRoleData(),o=i.getEquipByIndex(t),n=o.item.configID;return DeityEquipConst.IsDeityEquip(n)?(this["item"+this.mCurChooseIdx].ChooseItem(!1),this.mCurChooseIdx=t,this.mTempInjectLv=null,this.mTempInjectNum=null,void this.ChooseEquip()):void UserTips.ins().showTips("穿戴神装才可以进行注灵")},t.prototype._OnClicked=function(){var e=GameGlobal.SubRoles.GetRoleData(),t=e.getEquipByIndex(this.mCurChooseIdx),i=(t.item.configID,t.deityEquipData.injectLevel),o=DeityEquipConst.GetInjectCost(this.mCurChooseIdx,i+1);Checker.Data(o)&&GameGlobal.UserEquip.SendDeityEquipInjectSoul(this.mCurChooseIdx,0)},t.prototype.SetPopTip=function(){var e=this,t=GameGlobal.SubRoles.GetRoleData(),i=t.getEquipByIndex(this.mCurChooseIdx),o=i.deityEquipData.injectNum,n=i.deityEquipData.injectLevel;if(!this.mTempInjectNum)return this.mTempInjectLv=n,void(this.mTempInjectNum=o);var a=DeityEquipConst.GetDeltaNum(this.mCurChooseIdx,this.mTempInjectNum,this.mTempInjectLv,o,n);this.mTempInjectLv=n,this.mTempInjectNum=o,0==o&&this.ShowUpLvEff();var r=new eui.Label;r.text="+"+a,r.textColor=Color.Green,r.x=110,r.y=100,this.groupProg.addChild(r);var s=egret.Tween.get(r);s.to({y:30},300).wait(200).to({alpha:0},100).call(function(){e.groupProg.removeChild(r)})},t.prototype.InitProgEff=function(){if(!this.mProgEff){var e=new egret.Shape;e.graphics.beginFill(16777215,1),e.graphics.drawCircle(121,97,49),e.graphics.endFill(),this.groupProg.addChild(e),this.mProgEff=new MovieClip,this.mProgEff.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_jiexi002"),!0,-1),this.mProgEff.x=121,this.mProgEff.y=210,this.mProgEff.mask=e,this.groupProg.addChild(this.mProgEff)}},t.prototype.SetProg=function(e){this.mProgEff.y=210-e},t.prototype.ShowUpLvEff=function(){var e=new MovieClip;e.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_jiexi003"),!0,1),e.x=121,e.y=97,this.groupProg.addChild(e)},t.NAME="注灵",t}(BaseView);__reflect(DeityEquipInjectPanel.prototype,"DeityEquipInjectPanel",["ICommonWindowTitle"]);var DeityEquipItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_END,this.OpenEquipDetails,this)},t.prototype.SetItemInfo=function(e,t,i){return void 0===i&&(i=!1),this.mPos=t,this.item.data=e.item,e.item.configID&&DeityEquipConst.IsDeityEquip(e.item.configID)?(this.item.data=e.item,void(i?(this.labLv.text=e.item.itemConfig.name,this.labDesc.text="Lv."+e.item.itemConfig.level,this.labLv.textColor=ItemBase.GetColorByQuality(e.item.itemConfig.quality)):this.labLv.text="Lv."+e.item.itemConfig.level)):(this.item.clear(),this.item.setItemImg(ResDataPath.GetEquipDefaultGreyIcon(t)),this.labLv.text="",this.labDesc.text="",void this.item.setItemCount(!1))},t.prototype.SetItemConfigId=function(e){this.item.data=e;var t=GameGlobal.Config.ItemConfig[e];this.labLv.text=t?t.name:"",this.labDesc.text=t?"Lv."+t.level:"",t&&(this.labLv.textColor=ItemBase.GetColorByQuality(t.quality))},t.prototype.UnshowDetail=function(){this.item.destruct()},t.prototype.ChooseItem=function(e){this.item.imgChoose.visible=e},t.prototype.SetModel=function(e){this.mModel=e},t.prototype.OpenEquipDetails=function(){this.mModel&&this.item.data.configID&&DeityEquipConst.IsDeityEquip(this.item.data.configID)&&ViewManager.ins().open(EquipUserDetailedWin,this.item.data.handle,this.item.data.configID,this.item.data,this.mModel)},t}(eui.Component);__reflect(DeityEquipItem.prototype,"DeityEquipItem",["eui.UIComponent","egret.DisplayObject"]);var DeityEquipResolveWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopResolveSkin",t.listView.itemRenderer=ShopResolveItem,t.gainWayLabel0.visible=!1,t.gainWayLabel1.visible=!1,t.gainWayLabel2.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="神装分解",this.observe(MessageDef.ITEM_COUNT_CHANGE,this.updateContent),this.labTip.text="分解神装百分百返还神装碎片",this.priceIcon.setType(MoneyConst.DEITYEQUIP_PIECE),this.updateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.updateContent=function(){this.priceIcon.setPrice(CommonUtils.overLength(ShopController.ins().getBuyItemNums(MoneyConst.DEITYEQUIP_PIECE)));var e=UserBag.ins().getBagEquipByLevelSort(ITEM_QUALITY.RED_QUALITY);this.listView.dataProvider.replaceAll(e)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DeityEquipResolveWin.prototype,"DeityEquipResolveWin");var DeityEquipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="DeityEquipMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(DeityEquipAwakePanel),TabView.CreateTabViewData(DeityEquipInjectPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.mCommonWindowBg.OnAdded(this,i),this._AddClick(this.btnDetail,this._OnClicked),this.observe(MessageDef.CHANGE_EQUIP,this.UpdateTabBtnRedPoint),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.UserEquip.HasDeityEquipAwake()||GameGlobal.UserEquip.HasDeityEquipResolve()),this.mCommonWindowBg.ShowTalRedPoint(1,GameGlobal.UserEquip.HasDeityEquipInject())},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_32)},t.prototype.OnOpenIndex=function(e){return 1==e&&-1==GameGlobal.UserEquip.GetDeityEquipPos()?(UserTips.ins().showTips("穿戴神装之后才可前往注灵"),!1):!0},t.prototype._OnClicked=function(){ViewManager.ins().open(DeityEquipDetailWin)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DeityEquipWin.prototype,"DeityEquipWin");var DestinyRedPoint=function(e){function t(){var t=e.call(this)||this;return t.m_Upgrade={},t}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_UPGRADE]=this.GetIndexEquip,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.DESTINY_CHANGE,MessageDef.DESTINY_UP_ITEM]},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.DESTINY_RP)},t.prototype.GetIndexEquip=function(){this.m_Upgrade={};for(var e=GameGlobal.DestinyController.getUseDestinyData()||[],t=0,i=0,o=e;i<o.length;i++){var n=o[i],a=t++;if(n&&n.level&&n.id){var r=GameGlobal.Config.DestinyResolveConfig[n.type][n.level-1];if(!r)continue;var s=GameGlobal.Config.DestinyBaseConfig.uplevelitemid,l=GameGlobal.UserBag.GetCount(s);l>=r.promotestar&&(this.m_Upgrade[a]=!0)}}for(var c in this.m_Upgrade)if(this.m_Upgrade[c])return!0;return!1},t.prototype.IsRedUp=function(e){return this.m_Upgrade[e]},t.INDEX_UPGRADE=0,t}(IRedPoint);__reflect(DestinyRedPoint.prototype,"DestinyRedPoint");var DestinyConst=function(){function e(){}return e.GetLockLevel=function(e){if(!this.LOCK){var t=this.LOCK={},i=GameGlobal.Config.DestinyBaseConfig.openlevel1;for(var o in i){var n=Number(o),a=i[n];t[a]?n<t[a]&&(t[a]=n):t[a]=n}}return this.LOCK[e+1]+1},e}();__reflect(DestinyConst.prototype,"DestinyConst");var DestinyController=function(e){function t(){var t=e.call(this)||this;return t.tUseDestinyData=[],t.tDestinyBagData=[],t.tSelectList={1:!0,2:!1,3:!1,4:!1,5:!1},t.bShowResolveTip=!0,t.mRedPoint=new DestinyRedPoint,t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.DestinyBaseConfig.uplevelitemid,MessageDef.DESTINY_UP_ITEM)},t.prototype.getUseDestinyData=function(){return this.tUseDestinyData},t.prototype.getDestBagList=function(){return this.tDestinyBagData},t.prototype.getShowDestinyData=function(){var e={},t=GlobalConfig.ins().DestinyAttrsConfig;for(var i in t){var o=t[i].sort;e[o]||(e[o]=[],e[o].push(t[i]))}return e},t.prototype.getServerInfo=function(){return this.tDestinyServerInfo},t.prototype.babyStarGet=function(e){this.tDestinyServerInfo.star=e.star,this.tDestinyServerInfo.msgData=e.msgData},t.prototype.babyStartLight=function(e){this.tDestinyServerInfo.star=5},t.prototype.babyStartUse=function(e){this.updateDestinyData(e.pos,e.no)},t.prototype.babyStartUpLv=function(e){this.updateDestinyData(e.pos,e.no)},t.prototype.updateDestinyData=function(e,t){var i=this.tUseDestinyData[e-1];if(i&&t){var o=GlobalConfig.ins().DestinyAttrsConfig[t];i.item?i.initLocalData(o):(i=new DestinyData,i.initLocalData(o),this.tUseDestinyData[e-1]=i)}},t.prototype.doBabyStar=function(e){this.tDestinyServerInfo=e,this.tUseDestinyData=[];for(var t in e.data){var i={};if(e.data[t]){var o=GlobalConfig.ins().DestinyAttrsConfig[e.data[t]],n=new DestinyData;n.initLocalData(o),i=n}this.tUseDestinyData.push(i)}},t.prototype.GetPower=function(){var e=0,t=this.tUseDestinyData||[];for(var i in t){var o=t[i];o.attars&&(e+=ItemConfig.CalcAttrScoreValue(o.attars))}return e},t}(BaseSystem);__reflect(DestinyController.prototype,"DestinyController");var DestinyData=function(){function e(){}return e.prototype.initLocalData=function(e){e&&(this.item=e.item,this.sort=e.sort,this.type=e.type,this.level=e.level,this.id=e.id,this.attars=e.attars,this.buffid=e.buffid,this.skillName=e.skillName,this.desc=e.desc)},e.prototype.updataDataByServer=function(e){},e}();__reflect(DestinyData.prototype,"DestinyData");var DestinyManage=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_baby_star_init,t.doBabyStar),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.babyStartGet=function(e){var t=new Sproto.cs_baby_start_get_request;t.num=e,this.Rpc(C2sProtocol.cs_baby_start_get,t,function(e){var t=e;t.ret&&(GameGlobal.DestinyController.babyStarGet(t),MessageCenter.ins().dispatch(MessageDef.DESTINY_CHANGE),MessageCenter.ins().dispatch(MessageDef.DESTINY_GET_REWARD,t))})},t.prototype.babyStartUse=function(e,t){var i=new Sproto.cs_baby_start_use_request;i.id=e,i.pos=t,this.Rpc(C2sProtocol.cs_baby_start_use,i,function(e){var t=e;t.ret?(GameGlobal.DestinyController.babyStartUse(t),MessageCenter.ins().dispatch(MessageDef.DESTINY_CHANGE),UserTips.InfoTip("装备成功")):UserTips.InfoTip("装备失败")})},t.prototype.babyStartUpLv=function(e){var t=new Sproto.cs_baby_start_up_lv_request;t.pos=e,this.Rpc(C2sProtocol.cs_baby_start_up_lv,t,function(e){var t=e;t.ret&&(GameGlobal.DestinyController.babyStartUpLv(t),MessageCenter.ins().dispatch(MessageDef.DESTINY_CHANGE))})},t.prototype.babyStartSmelt=function(e){var t=new Sproto.cs_baby_start_smelt_request;t.idList=e,this.Rpc(C2sProtocol.cs_baby_start_smelt,t,this.DoStarSmelt,this)},t.prototype.DoStarSmelt=function(e){e.ret?MessageCenter.ins().dispatch(MessageDef.DESTINY_SMELT):UserTips.InfoTip("分解失败")},t.prototype.babyStartLight=function(){var e=new Sproto.cs_baby_start_light_request;this.Rpc(C2sProtocol.cs_baby_start_light,e,function(e){var t=e;t.ret&&(GameGlobal.DestinyController.babyStartLight(t),MessageCenter.ins().dispatch(MessageDef.DESTINY_CHANGE))})},t.prototype.doBabyStar=function(e){GameGlobal.DestinyController.doBabyStar(e),GameGlobal.MessageCenter.dispatch(MessageDef.DESTINY_CHANGE)},t}(BaseSystem);__reflect(DestinyManage.prototype,"DestinyManage");var DestinyArrDescPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="DestinyArrTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.Show=function(e,i,o){var n=ViewManager.ins().open(t);n.SetDesc(e,i,o)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.SetDesc(e[0]||"",e[1]||"",e[2]||"属性加成")},t.prototype.SetDesc=function(e,t,i){this.tdescL.multiline=this.tdescL.wordWrap=!0,this.tdescR.multiline=this.tdescR.wordWrap=!0,this.tdescL.textFlow=TextFlowMaker.generateTextFlow(e),this.tdescR.textFlow=TextFlowMaker.generateTextFlow(t),i&&(this.title.text=i)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DestinyArrDescPanel.prototype,"DestinyArrDescPanel");var DestinyEquipItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="DestinyEquipItemSkin",t.buy.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){this.data.itemConfig.name&&(this.nameLabel.text=this.data.itemConfig.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[this.data.itemConfig.quality]),this.itemIcon.setDataByConfig(this.data.itemConfig),this.itemIcon.isShowName(!1),this.itemIcon.setItemCount(!1);var e=GlobalConfig.ins().DestinyAttrsConfig[this.data.configID];e.attars?(this.lbFight.text="战力+"+ItemConfig.CalcAttrScoreValue(e.attars),e.attars[0]?this.lbInfo0.text=AttributeData.getAttStrByType(e.attars[0],0,": ",!1,"#682f00"):this.lbInfo0.text="",e.attars[1]?this.lbInfo1.text=AttributeData.getAttStrByType(e.attars[1],0,": ",!1,"#682f00"):this.lbInfo1.text=""):(this.lbFight.text="",this.lbInfo0.text=e.skillName||"",this.lbInfo1.text=e.desc||"")}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.buy:GameGlobal.MessageCenter.dispatch(MessageDef.DESTINY_EQUIP_REWARD,this.data.configID)}},t}(eui.ItemRenderer);__reflect(DestinyEquipItem.prototype,"DestinyEquipItem");var DestinyEquipLayer=function(e){function t(){var t=e.call(this)||this;return t.nPos=0,t.skinName="DestinyEquipDlgSkin",t.listView.itemRenderer=DestinyEquipItem,t.listView.dataProvider=new eui.ArrayCollection,UIHelper.SetLinkStyleLabel(t.lbGo,"前往获取命格"),t.cEquip.buy.label="升级",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.pDestinyData=e[0],this.nPos=e[1],(this.cEquip.buy.visible=e[2])&&UIHelper.ShowRedPoint(this.cEquip.buy,GameGlobal.DestinyController.mRedPoint.IsRedUp(this.nPos)),this.observe(MessageDef.CHANGE_ITEM,this.UpdateContent),this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.observe(MessageDef.DESTINY_EQUIP_REWARD,this.equipItem),this.AddClick(this.lbGo,this.onClick),this.AddClick(this.cEquip.buy,this.onUpClick),this.UpdateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.DestinyAttrsConfig,t=-1;this.pDestinyData&&this.pDestinyData.item&&e[this.pDestinyData.item]&&(t=e[this.pDestinyData.item].sort);for(var i={},o=[],n=GameGlobal.DestinyController.getUseDestinyData()||[],a=0,r=n;a<r.length;a++){var s=r[a];if(s.item){var l=e[s.item];l&&l.sort!=t&&(i[l.sort]=!0)}}var c=GameGlobal.UserBag.GetBagStarList();for(var u in c){var p=c[u];e[p.configID]&&!i[e[p.configID].sort]&&o.push(p)}var h=function(e){var t=GameGlobal.Config.DestinyAttrsConfig[e];return t?ItemConfig.CalcAttrScoreValue(t.attars):0};o.sort(function(e,t){return h(t.configID)-h(e.configID)}),this.tLayerData=o,this.listView.dataProvider.replaceAll(this.tLayerData),this.tLayerData.length?this.currentState="have":this.currentState="kong",this.pDestinyData&&this.pDestinyData.item?(this.cEquip.visible=!0,this.upEquip(),this.scroller.height=491,this.equipGroup.visible=!0):(this.cEquip.visible=!1,this.scroller.height=658,this.equipGroup.visible=!1)},t.prototype.upEquip=function(){if(this.pDestinyData){var e=GlobalConfig.ins().ItemConfig[this.pDestinyData.item];e.name&&(this.cEquip.nameLabel.text=e.name,this.cEquip.nameLabel.textColor=ItemBase.QUALITY_COLOR[e.quality]),this.cEquip.itemIcon.setDataByConfig(e),this.cEquip.itemIcon.isShowName(!1),this.cEquip.itemIcon.setItemCount(!1),this.pDestinyData.attars?(this.cEquip.lbFight.text="战力+"+ItemConfig.CalcAttrScoreValue(this.pDestinyData.attars),this.cEquip.lbInfo0.text=AttributeData.getAttStrByType(this.pDestinyData.attars[0],0,": ",!1,"#682f00"),this.pDestinyData.attars[1]?this.cEquip.lbInfo1.text=AttributeData.getAttStrByType(this.pDestinyData.attars[1],0,": ",!1,"#682f00"):this.cEquip.lbInfo1.text=""):(this.cEquip.lbFight.text="",this.cEquip.lbInfo0.text=this.pDestinyData.skillName||"",this.cEquip.lbInfo1.text=this.pDestinyData.desc||"")}},t.prototype.equipItem=function(e){e&&GameGlobal.DestinyManage.babyStartUse(e,this.nPos+1)},t.prototype.onClick=function(){this.CloseSelf(),ViewManager.ins().openIndex(DestinyUpWin,1)},t.prototype.onUpClick=function(){this.CloseSelf(),ViewManager.ins().open(DestinyUpWin,0,this.nPos)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DestinyEquipLayer.prototype,"DestinyEquipLayer");var DestinyInfoRect=function(e){function t(){var t=e.call(this)||this;t.tListLb=[],t.skinName="DestinyRectInfoSkin";for(var i=0;4>i;i++)t.tListLb[i]=t["lbArr"+i];return t}return __extends(t,e),t.prototype.onUpdate=function(e){if(e){this.tListLb[0].textColor=ItemBase.QUALITY_COLOR[e.quality];for(var t in this.tListLb){var i=e.list[t]||"";this.tListLb[t].text=i}}},t}(BaseView);__reflect(DestinyInfoRect.prototype,"DestinyInfoRect");var DestinyItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="DestinyItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.onUpdate=function(e){if(this.data=e,null!=e.data){this.imgAdd.visible=!e.data,this.lbLock.text=" ";var t=e.data;if(t.level){this.lbLv.text="Lv."+t.level,this.imgIcon.visible=!0;var i=GlobalConfig.ins().ItemConfig[t.item];this.imgIcon.source=ResDataPath.GetItemFullPath(i.icon),this.imgBg.source=ResDataPath.GetItemQualityName(i.quality)}else this.imgBg.source=ResDataPath.GetItemQualityName(0),this.imgIcon.visible=!1,this.imgAdd.visible=!0,this.lbLv.text=""}else{this.imgAdd.visible=!1;var o=DestinyConst.GetLockLevel(e.num);this.lbLock.text=o+"阶\n解锁",this.imgBg.source=ResDataPath.GetItemQualityName(0),this.imgIcon.visible=!1,this.lbLv.text=""}this.imgSelect.visible=e.index,this.imgRed.visible=GameGlobal.DestinyController.mRedPoint.IsRedUp(e.num)},t.prototype.onClick=function(e){MessageCenter.ins().dispatch(MessageDef.DESTINY_CLICK,this.data.num)},t}(eui.Component);__reflect(DestinyItem.prototype,"DestinyItem");var DestinyNiPanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.tImgGet=[],t.tRankLabel=[],t.nType=0,t.mWindowHelpId=37,t.skinName="DestinyNiSkin",t.listView.itemRenderer=ItemBaseNotName,t.list.itemRenderer=ItemBase,t.gInfoLabel.text="",t.showType(),t}return __extends(t,e),t.prototype.childrenCreated=function(){UIHelper.SetLinkStyleLabel(this.lbMore,"更多奖励");for(var e=0;5>e;e++)this.tRankLabel[e]=this["lb"+e];for(var e=0;5>e;e++)this.tImgGet[e]=this["imgGet"+e]},t.prototype.showType=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.observe(MessageDef.DESTINY_GET_REWARD,this.upDataReward),this.listView.dataProvider=new eui.ArrayCollection(GlobalConfig.ins().DestinyBaseConfig.rewardView),this._AddClick(this.btnBuy0,this.onClick),this._AddClick(this.btnBuy1,this.onClick),this._AddClick(this.btnBuy2,this.onClick),this._AddClick(this.lbMore,this.onClick),this.initInfo()},t.prototype.initInfo=function(){},t.prototype.UpdateContent=function(){this.setData();for(var e in this.tRankLabel){var t=this.tRankLabel[e],i=this.tDestinyServerInfo.msgData||{},o=i[e];if(i&&o){var n=GameGlobal.Config.ItemConfig[o.id],a=n.name||"";t.textFlow=TextFlowMaker.generateTextFlow("|C:0x0054ff&T:"+o.name+"|获得|C:"+Color.GetStr(ItemBase.QUALITY_COLOR[n.quality])+"&T:"+a+"|")}else t.text=""}var r=["ui_mg_bm_sanxian_01","ui_mg_bm_tianxian_01","ui_mg_bm_jinxian_01","ui_mg_bm_daluo_01","ui_mg_bm_huenyuan_01"],s=["ui_mg_bm_sanxian","ui_mg_bm_tianxian","ui_mg_bm_jinxian","ui_mg_bm_daluo","ui_mg_bm_huenyuan"];for(var e in this.tImgGet)this.tImgGet[e].source=r[e];var l=this.tDestinyServerInfo.star||1;this.tImgGet[l-1].source=s[l-1]||"",5==l?(this.effect||(this.effect=new MovieClip),this.effect.LoadByUrl(ResDataPath.GetUIEffePath("eff_ui_zb_003"),-1,!0),this.effGroup.addChild(this.effect)):this.effect&&DisplayUtils.removeFromParent(this.effect);var c=GlobalConfig.ins().DestinyBaseConfig.fourpay[0],u=GlobalConfig.ins().DestinyDrawConfig[l].starCoins;this.priceIcon0.setConfigData(c),this.priceIcon1.setConfigData(u)},t.prototype.upDataReward=function(e){if(e){this.gInfoLabel.text="共逆命 "+e.num+" 次，总共消耗银两 "+e.cost;for(var t=[],i=0,o=e.data;i<o.length;i++){var n=o[i],a={type:1,id:n.id,count:n.count};t.push(a)}this.list.dataProvider=new eui.ArrayCollection(t),this.list.visible=!1,this._SetTick()}},t.prototype._SetTick=function(){this.m_StartTime=egret.getTimer(),TimerManager.ins().remove(this._DoUpdate,this),TimerManager.ins().doFrame(1,0,this._DoUpdate,this)},t.prototype._DoUpdate=function(){this.list.visible=!0;for(var e=egret.getTimer()-this.m_StartTime,i=t.DELAY,o=t.DURATION,n=0;n<this.list.numChildren;++n){var a=this.list.getChildAt(n),r=a.itemIndex,s=MathUtils.Clamp((e-r*i)/o,0,1);a.alpha=s}e>this.list.dataProvider.length*i+o&&TimerManager.ins().remove(this._DoUpdate,this)},t.prototype.setData=function(){this.tDestinyServerInfo=GameGlobal.DestinyController.getServerInfo()
},t.prototype.onClick=function(e){var t=0;switch(e.target){case this.btnBuy0:t=1;break;case this.btnBuy1:t=50;break;case this.lbMore:ViewManager.ins().open(DestinyShow);break;case this.btnBuy2:if(this.tDestinyServerInfo.star>=5)return void UserTips.InfoTip("已经点亮混元，请点击逆命按钮");var i=GlobalConfig.ins().DestinyBaseConfig.fourpay[0];Checker.Data(i)&&GameGlobal.DestinyManage.babyStartLight()}var o=this.tDestinyServerInfo.star||1,n=GlobalConfig.ins().DestinyDrawConfig[o].starCoins;t&&Checker.Data(n)&&GameGlobal.DestinyManage.babyStartGet(t)},t.NAME="逆命",t.DURATION=200,t.DELAY=50,t}(BaseView);__reflect(DestinyNiPanel.prototype,"DestinyNiPanel",["ICommonWindowTitle"]);var DestinyNiWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t.mCommonWindowBg.title="逆命",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(DestinyNiPanel)])},t.prototype.OnOpen=function(){this.mCommonWindowBg.OnAdded(this),this.UpdateContent()},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateContent=function(){GameGlobal.LingtongAttrModel.IsActive()&&this.mCommonWindowBg.GetCurViewStackElement().UpdateContent()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DestinyNiWin.prototype,"DestinyNiWin",["ICommonWindow"]);var DestinyPanel=function(e){function t(){var t=e.call(this)||this;t.tPanelData=[],t.tItemList=[],t.tBagList=[],t.nIndex=0,t.tDestinyList=[],t.bUp=!1,t.m_Count=0,t.skinName="DestinySkin";for(var i=0;6>i;i++)t.tItemList.push(t["item"+i]);return UIHelper.SetLinkStyleLabel(t.lbGoto1,"前往获取命格"),t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.nIndex=e[0]||0,this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.observe(MessageDef.DESTINY_CLICK,this.onItem),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateMeatialCount),this.observe(MessageDef.DESTINY_RP,this.setData),this._AddClick(this.btnResolve,this.onClick),this._AddClick(this.btnShow,this.onClick),this._AddClick(this.btnUp,this.onClick),this._AddClick(this.btnEquip,this.onClick),this._AddClick(this.goToEquip,this.onClick),this._AddClick(this.lbGoto1,this.onClick),this._AddClick(this.powerLabel,this.onClick)},t.prototype.UpdateContent=function(){this.setData(),this.onSelectChange(),this.powerLabel.text=GameGlobal.DestinyController.GetPower()},t.prototype.getAttrInfoLb=function(){var e={strL:"",strR:""},t=0;for(var i in this.tBagList){var o=this.tBagList[i];if(o.attars)for(var n in o.attars){var a=o.attars[n];t++;t%2==1?e.strL=e.strL+AttributeData.getAttStrByType(a,0,"+",!1,"#682f00")+"\n":e.strR=e.strR+AttributeData.getAttStrByType(a,0,"+",!1,"#682f00")+"\n"}}return e},t.prototype.setData=function(){this.tBagList=GameGlobal.DestinyController.getUseDestinyData();for(var e=0;6>e;e++){var t={index:this.nIndex==e,data:this.tBagList[e],num:e};this.tItemList[e].onUpdate(t)}},t.prototype.onClick=function(e){switch(e.target){case this.btnResolve:ViewManager.ins().open(DestinyResovePanel);break;case this.btnShow:ViewManager.ins().open(DestinyShow);break;case this.btnUp:this.bUp?GameGlobal.DestinyManage.babyStartUpLv(this.nIndex+1):UserTips.ins().showTips("物品不足");break;case this.btnEquip:this.ShowDestinyEquipLayer(this.nIndex);break;case this.goToEquip:this.ShowDestinyEquipLayer(this.nIndex);break;case this.lbGoto1:ViewManager.ins().openIndex(DestinyUpWin,1);break;case this.powerLabel:ViewManager.ins().open(DestinyArrDescPanel,this.getAttrInfoLb().strL,this.getAttrInfoLb().strR)}},t.prototype.onItem=function(e){if(this.tBagList=GameGlobal.DestinyController.getUseDestinyData(),this.tBagList[e]){var t=this.nIndex==e,i=!0;this.tBagList[e].level&&(i=t),this.nIndex=e||0,this.setData(),this.onSelectChange(),i&&this.ShowDestinyEquipLayer(e)}else UserTips.ins().showTips("灵童达到"+DestinyConst.GetLockLevel(e)+"阶解锁")},t.prototype.ShowDestinyEquipLayer=function(e){ViewManager.ins().open(DestinyEquipLayer,this.tBagList[e],this.nIndex,!1)},t.prototype.onSelectChange=function(){var e=this.tBagList[this.nIndex];if(e.item){if(e)if(e.id){this.gRect0.visible=!1,this.gRect1.visible=!0,this.gRect2.visible=!1;var t=this.getArrInfoList(e);this.info0.onUpdate(t);var i=GlobalConfig.ins().DestinyAttrsConfig[e.id];if(i){var o=this.getArrInfoList(i);this.info1.onUpdate(o)}this.showUpMeatial(GlobalConfig.ins().DestinyResolveConfig[e.type][e.level-1].promotestar)}else{this.gRect0.visible=!1,this.gRect1.visible=!1,this.gRect2.visible=!0;var t=this.getArrInfoList(e);this.info2.onUpdate(t)}}else this.gRect0.visible=!0,this.gRect1.visible=!1,this.gRect2.visible=!1},t.prototype.showUpMeatial=function(e){this.m_Count=e,this.UpdateMeatialCount()},t.prototype.UpdateMeatialCount=function(){if(null==this.m_Count)return void(this.lbGetItemNe.text="");var e=this.m_Count,t="",i=GlobalConfig.ins().DestinyBaseConfig.uplevelitemid,o=UserBag.ins().GetCount(i),n=GameGlobal.Config.ItemConfig[i],a=o+"/"+e;o>=e?(t="|C:0x6e330b&T:消耗: |C:0x6e330b&T:"+n.name+"|C:0x019704&T:"+a+"|",this.bUp=!0):(this.bUp=!1,t="|C:0x6e330b&T:消耗: |C:0x6e330b&T:"+n.name+"|C:0xdb0000&T:"+a+"|"),this.lbGetItemNe.textFlow=TextFlowMaker.generateTextFlow(t)},t.prototype.getArrInfoList=function(e){var t={},i=[];if(t.list=i,e){var o=GlobalConfig.ins().ItemConfig[e.item];t.quality=o.quality,i[0]=o.name;var n="",a="",r="";e.attars&&(n="战力+"+ItemConfig.CalcAttrScoreValue(e.attars),e.attars[0]&&(a=AttributeData.getAttStrByType(e.attars[0],0,"+",!1,"#682f00")),e.attars[1]&&(r=AttributeData.getAttStrByType(e.attars[1],0,"+",!1,"#682f00"))),i[1]=n,e.desc&&(a=e.desc),i[2]=a,i[3]=r}return t},t.NAME="命格",t}(BaseView);__reflect(DestinyPanel.prototype,"DestinyPanel",["ICommonWindowTitle"]);var DestinyResolveHandleItem=function(e){function t(){var t=e.call(this)||this;return t._totalNum=0,t.skinName="DestinyResolveHandleItemSkin",t.countTxt.addEventListener(egret.Event.CHANGE,t.onTxtChange,t),t.decBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.checkBox1.addEventListener(egret.Event.CHANGE,t.chage,t),t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){this.data.itemConfig.name&&(this.nameLabel.text=this.data.itemConfig.name,this.nameLabel.textColor=ItemBase.QUALITY_COLOR[this.data.itemConfig.quality]),this._totalNum=this.data.count||0,this.itemIcon.setDataByConfig(this.data.itemConfig),this.itemIcon.setCount(this._totalNum);var e=GlobalConfig.ins().DestinyAttrsConfig[this.data.configID];e.attars?(this.lbFight.text="战力+"+ItemConfig.CalcAttrScoreValue(e.attars),e.attars[0]?this.lbInfo0.text=AttributeData.getAttStrByType(e.attars[0],0,": ",!1,"#682f00"):this.lbInfo0.text="",e.attars[1]?this.lbInfo1.text=AttributeData.getAttStrByType(e.attars[1],0,": ",!1,"#682f00"):this.lbInfo1.text=""):(this.lbFight.text="",this.lbInfo0.text=e.skillName||"",this.lbInfo1.text=e.desc||""),this.countTxt.text=this.data.count||0}},t.prototype.onTxtChange=function(e){var t=Number(this.countTxt.text);this.setTotalPrice(t)},t.prototype.setTotalPrice=function(e){var t=UserBag.ins().getBagGoodsByHandle(UserBag.BAG_TYPE_ASTROLABE,this.data.handle).count;t>e?this._totalNum=e:this._totalNum=t,this._totalNum<1&&(this._totalNum=1),this.data.count=this._totalNum,this.countTxt.text=this._totalNum+""},t.prototype.onTap=function(e){switch(e.currentTarget){case this.decBtn:this.setTotalPrice(this._totalNum-1);break;case this.addBtn:this.setTotalPrice(this._totalNum+1)}},t.prototype.chage=function(){this.data.bSelect=this.checkBox1.selected,this.data&&this.data.itemConfig&&this.data.itemConfig.quality>3&&this.data.bSelect&&GameGlobal.DestinyController.bShowResolveTip&&ViewManager.ins().open(TipByBox,null,GameGlobal.DestinyController.bShowResolveTip)},t}(eui.ItemRenderer);__reflect(DestinyResolveHandleItem.prototype,"DestinyResolveHandleItem");var DestinyResolveItem=function(e){function t(){var t=e.call(this)||this;return t._totalNum=0,t.skinName="DestinyResolveItemSkin",t.countTxt.addEventListener(egret.Event.CHANGE,t.onTxtChange,t),t.decBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.imgBg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.imgAdd.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t}return __extends(t,e),t.prototype.PlayEff=function(){UIHelper.PlayBoomEff(this.effGroup)},t.prototype.dataChanged=function(){if(this.data){this.currentState="item",this.data.itemConfig.name&&(this.lbNe.text=this.data.itemConfig.name,this.lbNe.textColor=ItemBase.QUALITY_COLOR[this.data.itemConfig.quality]),this._totalNum=this.data.count||0,this.item.num=this.data.count,this.item.setDataByConfig(this.data.itemConfig);var e=GlobalConfig.ins().DestinyAttrsConfig[this.data.configID],t=GlobalConfig.ins().DestinyResolveConfig[e.type][e.level-1],i=1,o="";t&&(i=t.resolvestar||t.resolvecoin,o=t.resolvestar?"碎片: ":"银两: "),this.lbInfo.text=o+CommonUtils.overLength(this.data.count*i),this.countTxt.text=this.data.count||0}else this.currentState="add"},t.prototype.onTxtChange=function(e){var t=Number(this.countTxt.text);this.setTotalPrice(t)},t.prototype.setTotalPrice=function(e){var t=UserBag.ins().getBagGoodsByHandle(UserBag.BAG_TYPE_ASTROLABE,this.data.handle).count;t>e?this._totalNum=e:this._totalNum=t,this._totalNum<1&&(this._totalNum=1),this.data.count=this._totalNum,this.countTxt.text=this._totalNum+""},t.prototype.onTap=function(e){switch(e.currentTarget){case this.decBtn:this.setTotalPrice(this._totalNum-1);break;case this.addBtn:this.setTotalPrice(this._totalNum+1);break;case this.imgBg:"add"==this.currentState&&ViewManager.ins().open(DestinyResolvelHandleLayer);break;case this.imgAdd:"add"==this.currentState&&ViewManager.ins().open(DestinyResolvelHandleLayer)}},t}(eui.ItemRenderer);__reflect(DestinyResolveItem.prototype,"DestinyResolveItem");var DestinyResolvelHandleLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="DestinyResolveHandleDlgSkin",t.listView.itemRenderer=DestinyResolveHandleItem,t.commonDialog.dialogReturnBtn.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this._AddClick(this.btn,this.onResolve),this.observe(MessageDef.CHANGE_ITEM,this.UpdateContent),this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.onResolve=function(){this.getResolveData().length&&GameGlobal.DestinyManage.babyStartSmelt(this.getResolveData())},t.prototype.UpdateContent=function(){this.tLayerData=CommonUtils.copyDataHandler(UserBag.ins().GetBagStarBySort()),this.listView.dataProvider=new eui.ArrayCollection(this.tLayerData)},t.prototype.getResolveData=function(){var e=[];this.tLayerData;for(var t in this.tLayerData){var i=this.tLayerData[t];if(i.bSelect){var o={id:0,num:0};o.id=i.configID,o.num=i.count,e.push(o)}}return e},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DestinyResolvelHandleLayer.prototype,"DestinyResolvelHandleLayer");var DestinyResovePanel=function(e){function t(){var t=e.call(this)||this;return t.tHave=[],t.tCheckBox=[],t.skinName="DestinyResolveSkin",t.listView.itemRenderer=DestinyResolveItem,t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=1;6>e;e++){var t=this["checkBox"+e];t.labelDisplay.textColor=ItemBase.QUALITY_COLOR[e],this.tCheckBox[e]=t,t.addEventListener(egret.Event.CHANGE,this.chage,this),t.selected=GameGlobal.DestinyController.tSelectList[e]}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.observe(MessageDef.DESTINY_SMELT,this.SmeltUpdate),this._AddClick(this.btnDress,this.onClick),this.UpdateContent()},t.prototype.SmeltUpdate=function(){for(var e=0,t=0,i=this.tHave;t<i.length;t++){var o=i[t];if(null!=o){var n=this.listView.getChildAt(e);n&&egret.is(n,"DestinyResolveItem")&&n.PlayEff()}++e}this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tHave)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.chage=function(){for(var e in this.tCheckBox){var t=this.tCheckBox[e];if(GameGlobal.DestinyController.tSelectList[e]=t.selected,parseInt(e)>3&&t.selected&&GameGlobal.DestinyController.bShowResolveTip)return void this.showTip(Number(e))}this.UpdateContent()},t.prototype.showTip=function(e){var t=this;ViewManager.ins().open(TipByBox,null,GameGlobal.DestinyController.bShowResolveTip,null,null,function(i){i?(GameGlobal.DestinyController.tSelectList[e]=!0,t.tCheckBox[e].selected=!0,t.UpdateContent()):(GameGlobal.DestinyController.tSelectList[e]=!1,t.tCheckBox[e].selected=!1)})},t.prototype.setData=function(){this.tHave=[];var e=UserBag.ins().GetBagStarBySort(),t={},i=GameGlobal.DestinyController.tSelectList;for(var o in e){var n=e[o];t[n.itemConfig.quality]||(t[n.itemConfig.quality]=[]),t[n.itemConfig.quality].push(CommonUtils.copyDataHandler(n))}var a=0;for(var o in t){var r=t[o];for(var s in r){var n=r[s];i[n.itemConfig.quality]&&9>a&&(this.tHave[a]=n,a++)}}for(var l=0;9>l;l++)this.tHave[l]||(this.tHave[l]=null)},t.prototype.getResolveData=function(){var e=[],t=this.tHave;for(var i in this.tCheckBox){var o=this.tCheckBox[i];if(o.selected)for(var n in t)if(t[n]&&t[n].itemConfig.quality==i){var a={id:0,num:0};a.id=t[n].configID,a.num=t[n].count,e.push(a)}}return e},t.prototype.onClick=function(e){switch(e.target){case this.btnDress:this.getResolveData().length&&GameGlobal.DestinyManage.babyStartSmelt(this.getResolveData())}},t.RedPointCheck=function(){return!1},t.LAYER_LEVEL=LayerManager.UI_Main_2,t.NAME="分解命格",t}(BaseEuiView);__reflect(DestinyResovePanel.prototype,"DestinyResovePanel",["ICommonWindow"]);var DestinyShow=function(e){function t(){var t=e.call(this)||this;return t.skinName="DestinyShowSkin",t.listView.itemRenderer=DestinyShowRectItem,t.commonDialog.dialogReturnBtn.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.observe(MessageDef.DESTINY_CHANGE,this.UpdateContent),this.AddItemClick(this.listView,this.onList),this.UpdateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.onList=function(e){e.item.bSelect;e.item.bSelect?e.item.bSelect=!1:e.item.bSelect=!0,this.listView.dataProvider.replaceAll(this.tLayerData),this.listView.validateNow()},t.prototype.UpdateContent=function(){var e=GameGlobal.DestinyController.getShowDestinyData();this.tLayerData=[];for(var t in e){var i={bSelect:!1,tList:[]};i.tList=e[t],this.tLayerData.push(i)}this.listView.dataProvider=new eui.ArrayCollection(this.tLayerData)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(DestinyShow.prototype,"DestinyShow");var DestinyShowInfoItem=function(e){function t(){var t=e.call(this)||this;return t._totalNum=0,t.skinName="DestinyShowInfoSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){this.nameLabel.text=this.data.name||"";var e="",t="",i="";this.data.attars&&(e="战力+"+ItemConfig.CalcAttrScoreValue(this.data.attars),this.data.attars[0]&&(t=AttributeData.getAttStrByType(this.data.attars[0],0,"+",!1,"#682f00")),this.data.attars[1]&&(i=AttributeData.getAttStrByType(this.data.attars[1],0,"+",!1,"#682f00"))),this.lbFight.text=e,this.data.desc&&(t=this.data.desc),this.lbInfo0.text=t,this.lbInfo1.text=i}},t}(eui.ItemRenderer);__reflect(DestinyShowInfoItem.prototype,"DestinyShowInfoItem");var DestinyShowRectItem=function(e){function t(){var t=e.call(this)||this;return t._totalNum=0,t.skinName="DestinyShowRectSkin",t.listView.itemRenderer=DestinyShowInfoItem,t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.nameLabel.text=this.data.tList[0].name||"",this.imgIcon.source=ResDataPath.GetItemFullPath(this.data.tList[0].icon||"")),this.data.bSelect?(this.currentState="show",this.listView.dataProvider=new eui.ArrayCollection(this.data.tList)):(this.currentState="nor",this.listView.dataProvider=new eui.ArrayCollection([]))},t}(eui.ItemRenderer);__reflect(DestinyShowRectItem.prototype,"DestinyShowRectItem");var DestinySItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="DestinyItemSkin",t.imgSelect.visible=!1,t.lbLock.visible=!1,t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.onUpdate=function(e,t){if(this.index=e,this.data=t,this.imgAdd.visible=!t||!t.level,this.imgAdd.visible)this.lbLv.text="",this.imgIcon.visible=!1,this.imgBg.source=ResDataPath.GetItemQualityName(0);else{this.lbLv.text="Lv."+t.level,this.imgIcon.visible=!0;var i=GlobalConfig.ins().ItemConfig[t.item];this.imgIcon.source=ResDataPath.GetItemFullPath(i.icon),this.imgBg.source=ResDataPath.GetItemQualityName(i.quality)}this.imgRed.visible=GameGlobal.DestinyController.mRedPoint.IsRedUp(e)},t.prototype.onClick=function(e){ViewManager.ins().open(DestinyEquipLayer,this.data,this.index,!0)},t}(eui.Component);__reflect(DestinySItem.prototype,"DestinySItem");var DestinyUpWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t.mCommonWindowBg.title="命格",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(DestinyPanel),TabView.CreateTabViewData(DestinyNiPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this,e[0],e[1]),this.observe(MessageDef.DESTINY_RP,this.UpdateRedPoint),this.UpdateRedPoint()},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.DestinyController.mRedPoint.IsRedPoint())},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(DestinyUpWin.prototype,"DestinyUpWin",["ICommonWindow"]);var TipByBox=function(e){function t(){var t=e.call(this)||this;return t.sure=!1,t.skinName="TipByboxSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.AddClick(this.sureBtn,this.OnSure),this.AddClick(this.notBtn,this.CloseSelf),this.AddClick(this.checkBox1,this.OnCheckBox),this.warnLabel.text=e[0]||"您选择分解的命格中存在高品质命格，是否确认分解？",this.bSelect=e[1],this.checkBox1.selected=!this.bSelect,this.commonDialog.title=e[2]||"提 示",this.lbBoxTip.text=e[3]||"本次登录不再提示",this.callback=e[4]},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve(),this.callback&&this.callback(this.sure),this.callback=null},t.prototype.OnSure=function(){this.sure=!0,this.CloseSelf()},t.prototype.OnCheckBox=function(){this.bSelect=!this.checkBox1.selected,GameGlobal.DestinyController.bShowResolveTip=this.bSelect},t.prototype.updateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TipByBox.prototype,"TipByBox");var ExchangeModel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.exchange=function(){var e=new Sproto.cs_exchange_gold_perform_request;this.Rpc(C2sProtocol.cs_exchange_gold_perform,e,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.EXCHANGE_COUNT,e)},this)},t.prototype.exchangeInfo=function(){var e=new Sproto.cs_exchange_gold_info_request;this.Rpc(C2sProtocol.cs_exchange_gold_info,e,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.EXCHANGE_COUNT,e)},this)},t}(BaseSystem);__reflect(ExchangeModel.prototype,"ExchangeModel");var XiuWeiModel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.exchange=function(){var e=new Sproto.cs_rolefly_add_xiuwei_request;e.type=0,e.id=9,this.Rpc(C2sProtocol.cs_rolefly_add_xiuwei,e,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.XIUWEIEXCHANGE,e),GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_UPDATE_FLYUP)},this)},t.prototype.exchangeInfo=function(){var e=new Sproto.cs_rolefly_get_addnum_request;this.Rpc(C2sProtocol.cs_rolefly_get_addnum,e,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.XIUWEIEXCHANGE_COUNT,e)},this)},t}(BaseSystem);__reflect(XiuWeiModel.prototype,"XiuWeiModel");var ExchangeMoneyWin=function(e){function t(){var t=e.call(this)||this;return t.moneyCount="0",t.endCount=1,t.skinName="exchangeMoneySkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="银两兑换",this.chaptersCommonConfigTab=GameGlobal.Config.ChaptersCommonConfig,this.vipPrivilegeConfigTab=GameGlobal.Config.VipPrivilegeConfig,GameGlobal.ExchangeModel.exchangeInfo()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.gotoVip,this.onClick),this.AddClick(this.exchangeBtn,this.onClick),this.observe(MessageDef.EXCHANGE_COUNT,this.surplus),this.observe(MessageDef.EXCHANGE_COUNT,this.updateItem);var i=this.chaptersCommonConfigTab.itemid,o=UserVip.ins(),n=this.vipPrivilegeConfigTab[o.lv].silvertime;this.endCount=n,this.surplusCount.text="剩余"+n+"次",this.moneyLab.text=this.moneyCount;var a=GameGlobal.UserBag.GetCount(i);this.itemCount.text=a+"/1";var r=this.vipPrivilegeConfigTab[o.lv+1];this.vipGroup.visible=r,r&&(this.vipbuy_txt.text="VIP"+r.vipid+"每天可再购买"+(r.silvertime-this.vipPrivilegeConfigTab[o.lv].silvertime)+"次"),UIHelper.PlayPanelTween(this.animGroup)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.update=function(){},t.prototype.onClick=function(e){switch(e.currentTarget){case this.gotoVip:ViewManager.ins().close(this),ViewManager.ins().open(VipMainPanel);break;case this.exchangeBtn:var t=this.chaptersCommonConfigTab.itemid;if(this.checkItem(t,1))this.endCount>0?GameGlobal.ExchangeModel.exchange():UserTips.ins().showTips("剩余兑换次数不足");else if(this.endCount>0){var i=this.chaptersCommonConfigTab.gold;WarnWin.show("是否花费"+i+"元宝兑换银两？",function(){Checker.Money(2,i)&&GameGlobal.ExchangeModel.exchange()},this)}else UserTips.ins().showTips("剩余兑换次数不足")}},t.prototype.checkItem=function(e,t){var i=GameGlobal.UserBag.GetCount(e);return i>=t?!0:!1},t.prototype.surplus=function(e){if(null!=e.exchangeCount&&void 0!=e.exchangeCount){var t=UserVip.ins(),i=this.vipPrivilegeConfigTab[t.lv].silvertime;i-=e.exchangeCount,this.endCount=i,this.surplusCount.text="剩余"+i+"次"}null!=e.goldnum&&void 0!=e.goldnum&&(this.moneyCount=e.goldnum.toString(),this.moneyLab.text=this.moneyCount)},t.prototype.updateItem=function(e){var t=this.chaptersCommonConfigTab.itemid,i=GameGlobal.UserBag.GetCount(t);this.itemCount.text=i+"/1"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ExchangeMoneyWin.prototype,"ExchangeMoneyWin",["ICommonWindow"]);var ExchangeXiuWeiWin=function(e){function t(){var t=e.call(this)||this;return t.moneyCount=10,t.endCount=1,t.skinName="exchangeXiuWeiSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="获取修为",GameGlobal.XiuWeiModel.exchangeInfo()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.exchangeBtn,this.onClick),this.observe(MessageDef.XIUWEIEXCHANGE,this.updateItem),this.observe(MessageDef.XIUWEIEXCHANGE_COUNT,this.update),this.icon.setItemImg("ui_zjm_exp"),this.surplusCount.text="剩余:"+this.endCount+"次",UIHelper.PlayPanelTween(this.animGroup)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.update=function(e){e.ret&&(this.endCount=this.moneyCount-e.number,this.surplusCount.text="剩余:"+this.endCount+"次")},t.prototype.onClick=function(e){switch(e.currentTarget){case this.exchangeBtn:this.endCount>0?(GameGlobal.XiuWeiModel.exchange(),this.endCount=this.endCount-1,this.surplusCount.text="剩余:"+this.endCount+"次"):UserTips.ins().showTips("剩余兑换次数不足")}},t.prototype.updateItem=function(e){e.ret&&(GameGlobal.RoleFlyModel.XiuWei=e.xiuWei)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ExchangeXiuWeiWin.prototype,"ExchangeXiuWeiWin",["ICommonWindow"]);var FateShowModelType;!function(e){e[e.LogoImg=0]="LogoImg",e[e.Role=1]="Role",e[e.Pet=2]="Pet",e[e.FairyTale=3]="FairyTale",e[e.FemaleDeva=4]="FemaleDeva",e[e.GodOfHeaven=5]="GodOfHeaven",e[e.SpiritualChild=8]="SpiritualChild",e[e.Mounts=10]="Mounts",e[e.Wing=11]="Wing",e[e.TheFairy=12]="TheFairy",e[e.DivineTroops=13]="DivineTroops",e[e.Fashion=14]="Fashion",e[e.Title=15]="Title",e[e.PetPsyche=20]="PetPsyche",e[e.PetAnimalSoul=21]="PetAnimalSoul",e[e.FairyTaleNormalArray=30]="FairyTaleNormalArray",e[e.FairyTaleImmortalPosition=31]="FairyTaleImmortalPosition",e[e.FemaleDevaWeapons=40]="FemaleDevaWeapons",e[e.FemaleDevaFlower=41]="FemaleDevaFlower",e[e.FemaleDevaO2=42]="FemaleDevaO2",e[e.MagicProps=16]="MagicProps"}(FateShowModelType||(FateShowModelType={}));var FateEff=function(){function e(){}return e.isShowEff=function(t){if(0!=e.IDED2)switch(GameGlobal.Config.FuncNoticeConfig[e.IDED2].type){case FateShowModelType.Mounts:case FateShowModelType.Title:case FateShowModelType.Fashion:case FateShowModelType.TheFairy:case FateShowModelType.DivineTroops:case FateShowModelType.Wing:case FateShowModelType.MagicProps:var i=t.roleBtn;UIHelper.SetBtnEffe(i,"ui_zhy001",!0,1,1,55,55);break;case FateShowModelType.FairyTale:case FateShowModelType.FairyTaleNormalArray:case FateShowModelType.FairyTaleImmortalPosition:case FateShowModelType.FemaleDeva:case FateShowModelType.FemaleDevaFlower:case FateShowModelType.FemaleDevaWeapons:case FateShowModelType.FemaleDevaO2:var o=t.xiannvBtn;UIHelper.SetBtnEffe(o,"ui_zhy001",!0,1,1,55,55);break;case FateShowModelType.Pet:case FateShowModelType.PetPsyche:case FateShowModelType.PetAnimalSoul:var n=t.petBtn;UIHelper.SetBtnEffe(n,"ui_zhy001",!0,1,1,55,55)}},e.isShowEff2=function(t){if(1==e.isShow){if(0!=e.IDED2)switch(GameGlobal.Config.FuncNoticeConfig[e.IDED2].type){case FateShowModelType.Title:UIHelper.SetBtnEffe(t.roleTitle,"ui_yhy002",!0,1.2,1.2,47,45);break;case FateShowModelType.Fashion:UIHelper.SetBtnEffe(t.dressBtn,"ui_yhy002",!0,1.2,1.2,47,45);break;case FateShowModelType.TheFairy:UIHelper.SetBtnEffe(t.list.getChildAt(0),"ui_yhy002",!0,1.2,1.2,47,45);break;case FateShowModelType.DivineTroops:UIHelper.SetBtnEffe(t.list.getChildAt(0),"ui_yhy002",!0,1.2,1.2,47,45);break;case FateShowModelType.MagicProps:UIHelper.SetBtnEffe(t.bless,"ui_yhy002",!0,1.2,1.2,47,45)}e.isShow=!1}},e.isShowEff3=function(t){if(1==e.isShow3){if(0!=e.IDED2)switch(GameGlobal.Config.FuncNoticeConfig[e.IDED2].type){case FateShowModelType.Mounts:UIHelper.SetBtnEffe(t.commonWindowBg.tabBar.getChildAt(2),"ui_fhy002",!0,1,1,70,45);break;case FateShowModelType.Wing:UIHelper.SetBtnEffe(t.commonWindowBg.tabBar.getChildAt(3),"ui_fhy002",!0,1,1,70,45)}e.isShow3=!1}},e.IDED2=0,e.isShow=!1,e.isShow3=!1,e}();__reflect(FateEff.prototype,"FateEff");var FateFadeView=function(e){function t(){var t=e.call(this)||this;return t.ID=0,t.skinName="FateFadeViewSkin",t.mCount=5,t._AddClick(t,t.CloseSelf),t._AddClick(t.enterBtn,t._onClick),t}return __extends(t,e),t.prototype.OnOpen=function(e){this.fateModelItem.typeView=1,this.funcNoticeConfigTab=GameGlobal.Config.FuncNoticeConfig,this.fateModelItem.scaleX=this.fateModelItem.scaleY=1.5,this.ID=e,this.showEff(),this.showModel(),this.describe(),this.showItem(),this.AddTimer(1e3,5,this._DoUpdate)},t.prototype.OnClose=function(){},t.prototype.showModel=function(){var e=this.funcNoticeConfigTab[this.ID].type,t=this.funcNoticeConfigTab[this.ID].pid;void 0!=t&&(void 0!=t[1]?this.fateModelItem.showModelType(e,this.funcNoticeConfigTab[this.ID].pid[0],this.funcNoticeConfigTab[this.ID].pid[1]):void 0!=t[0]?this.fateModelItem.showModelType(e,this.funcNoticeConfigTab[this.ID].pid[0]):this.fateModelItem.showModelType(e,this.funcNoticeConfigTab[this.ID].pid))},t.prototype._DoUpdate=function(){this.mCount--,this.enterBtn.label="确定("+this.mCount.toString()+"s)",0==this.mCount&&ViewManager.ins().close(this)},t.prototype.showEff=function(){var e=new MovieClip;e.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_hht_001"),!0,0),e.x=this.pointImg.x,e.y=this.pointImg.y,e.scaleX=2.3,e.scaleY=2.3,this.group.addChild(e)},t.prototype.describe=function(){this.describeLabel.text="",this.describeLabel.text="解锁"+this.funcNoticeConfigTab[this.ID].des4},t.prototype.showItem=function(){this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemList.dataProvider=new eui.ArrayCollection(this.funcNoticeConfigTab[this.ID].reward)},t.prototype._onClick=function(e){switch(e.currentTarget){case this.enterBtn:ViewManager.ins().close(this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FateFadeView.prototype,"FateFadeView");var FateItemView=function(e){function t(){var t=e.call(this)||this;return t.ID=0,t.IDED=0,t}return __extends(t,e),t.prototype.OnOpen=function(){this.funcNoticeConfigTab=GameGlobal.Config.FuncNoticeConfig,this.IDED=this.obtainID(),FateEff.IDED2=this.IDED,this.observe(MessageDef.GUANQIA_CHANGE,this.UpdateContent),this.observe(MessageDef.LEVEL_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.getTabID=function(){return this.ID},t.prototype.obtainID=function(){var e=0,t=GameGlobal.UserFb;for(var i in this.funcNoticeConfigTab){var o=this.funcNoticeConfigTab[i].openLv[1];if(1==this.funcNoticeConfigTab[i].openLv[0]){if(void 0!=this.funcNoticeConfigTab[i].showlevel&&GameGlobal.actorModel.level<this.funcNoticeConfigTab[i].showlevel)break;if(t.guanqiaID<o){e=this.funcNoticeConfigTab[i].index;break}}else if(2==this.funcNoticeConfigTab[i].openLv[0]){if(void 0!=this.funcNoticeConfigTab[i].showlevel&&GameGlobal.actorModel.level<this.funcNoticeConfigTab[i].showlevel)break;if(GameGlobal.actorModel.level<o){e=this.funcNoticeConfigTab[i].index;break}}else{if(3!=this.funcNoticeConfigTab[i].openLv[0]){e=0;break}if(void 0!=this.funcNoticeConfigTab[i].showlevel&&GameGlobal.actorModel.level<this.funcNoticeConfigTab[i].showlevel)break;if(void 0!=GameGlobal.UserTask.mainTaskData[0]&&void 0!=GameGlobal.UserTask.mainTaskData[0].id){var n=GameGlobal.UserTask.mainTaskData[0].id;if(void 0!=n&&n<this.funcNoticeConfigTab[i].openLv[1]){e=this.funcNoticeConfigTab[i].index;break}}}}return e},t.prototype.openOtherView=function(){0!=this.ID&&this.ID!=this.IDED&&(0==this.IDED&&(this.IDED=this.ID),this.IDED>this.ID&&(this.IDED=this.ID),ViewManager.ins().open(FateFadeView,this.IDED),FateEff.IDED2=this.IDED,this.IDED=this.ID,FateEff.isShow=!0,FateEff.isShow3=!0,GameGlobal.MessageCenter.dispatch(MessageDef.SHOWFATEEFF))},t.prototype.UpdateContent=function(){if(this.deficiencyLabel.text="",this.objectiveLabel.text="",GameGlobal.actorModel.level>=80&&this.openOtherView(),this.ID=this.obtainID(),0==this.ID)return void(this.visible=!1);this.visible=!0;var e=this.funcNoticeConfigTab[this.ID].openLv,t=this.funcNoticeConfigTab[this.ID].des1,i=this.funcNoticeConfigTab[this.ID].des2;if(1==e[0]){var o=e[1];this.deficiencyLabel.text=t.replace("%s",o),this.objectiveLabel.text=i.replace("%s",o)}else if(2==e[0]){var o=e[1];this.deficiencyLabel.text=t.replace("%s",o),this.objectiveLabel.text=i.replace("%s",o)}else if(3==e[0]){var o=0;void 0!=GameGlobal.UserTask.mainTaskData&&void 0!=GameGlobal.UserTask.mainTaskData[0]&&void 0!=GameGlobal.UserTask.mainTaskData[0].id&&(o=e[1]),this.deficiencyLabel.text=t.replace("%s",o),this.objectiveLabel.text=i.replace("%s",o)}var n=this.funcNoticeConfigTab[this.ID].type,a=this.funcNoticeConfigTab[this.ID].pid;this.fateModelItem.typeView=0,void 0!=a&&(void 0!=a[1]?this.fateModelItem.showModelType(n,this.funcNoticeConfigTab[this.ID].pid[0],this.funcNoticeConfigTab[this.ID].pid[1]):void 0!=a[0]?this.fateModelItem.showModelType(n,this.funcNoticeConfigTab[this.ID].pid[0]):this.fateModelItem.showModelType(n,this.funcNoticeConfigTab[this.ID].pid)),GameGlobal.actorModel.level<80&&this.openOtherView()
},t.isShowEff=!1,t}(BaseView);__reflect(FateItemView.prototype,"FateItemView",["eui.UIComponent","egret.DisplayObject"]);var FateModelItemPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typeView=0,t}return __extends(t,e),t.prototype.otherComConcealment=function(e,t){this.extraPanel.visible=!1,this.logoImg.visible=!1,this.rideShowPanel.visible=!1,this.roleShowPanel.visible=!1,this.petShowPanel.visible=!1,this.petShowPanel2.visible=!1,this.soulImg.visible=!1,this.immortalPositionImg.visible=!1,void 0!=e&&(e.visible=!0),void 0!=t&&(t.visible=!0)},t.prototype.showModelType=function(e,t,i){var o=this;switch(this.petShowPanel.skewY=180,this.petShowPanel2.skewY=180,this.rideShowPanel.skewY=180,this.roleShowPanel.skewY=180,this.petShowPanel.scaleX=this.petShowPanel.scaleY=.7,this.petShowPanel2.scaleX=this.petShowPanel2.scaleY=.7,this.petShowPanel.x=94,this.petShowPanel.y=152,this.roleShowPanel.y=152,this.roleShowPanel.x=94,e){case FateShowModelType.LogoImg:this.otherComConcealment(this.logoImg),this.logoImg.source=t;break;case FateShowModelType.Role:this.otherComConcealment(this.roleShowPanel),this.roleShowPanel.mScale=.8,this.roleShowPanel.SetAll(SubRoles.ins().GetRoleData()),this.roleShowPanel.SetTianx(""),this.roleShowPanel.SetTitle("");break;case FateShowModelType.Pet:this.otherComConcealment(this.petShowPanel),this.petShowPanel.SetBodyId(t);break;case FateShowModelType.FairyTale:this.otherComConcealment(this.petShowPanel),this.petShowPanel.SetBodyId(t);break;case FateShowModelType.FemaleDeva:this.otherComConcealment(this.petShowPanel),this.petShowPanel.SetBodyId(t);break;case FateShowModelType.GodOfHeaven:this.otherComConcealment(this.petShowPanel),this.petShowPanel.SetBodyId(t);break;case FateShowModelType.SpiritualChild:this.otherComConcealment(this.petShowPanel),this.petShowPanel.SetBodyId(t);break;case FateShowModelType.Mounts:this.otherComConcealment(this.rideShowPanel),this.rideShowPanel.SetBodyId(t);break;case FateShowModelType.Wing:this.otherComConcealment(this.petShowPanel),this.petShowPanel.SetBody(RoleShowPanel.GetPath(t)),this.petShowPanel.skewY=360,this.petShowPanel.y=240,this.petShowPanel.x=115;break;case FateShowModelType.TheFairy:this.otherComConcealment(this.roleShowPanel),this.roleShowPanel.mScale=.8,this.roleShowPanel.SetTitle(""),this.roleShowPanel.y=212,this.roleShowPanel.x=24,this.roleShowPanel.ClearCache(),this.roleShowPanel.SetTianx(RoleShowPanel.GetPath(t)),TimerManager.ins().doNext(function(){o.roleShowPanel.SetTianxPos(-60,-120)},this);break;case FateShowModelType.DivineTroops:this.otherComConcealment(this.roleShowPanel),this.roleShowPanel.mScale=.8,this.roleShowPanel.SetAll(SubRoles.ins().GetRoleData()),this.roleShowPanel.SetWeapon(RoleShowPanel.GetPath(t)),this.roleShowPanel.SetTianx(""),this.roleShowPanel.SetTitle("");break;case FateShowModelType.Fashion:this.otherComConcealment(this.roleShowPanel),this.roleShowPanel.mScale=.8;var n=new RoleShowData;n.job=GameGlobal.actorModel.job,n.sex=GameGlobal.actorModel.sex,n.clothID=t,n.rideId=SubRoles.ins().GetRoleData().GetRideId(),this.roleShowPanel.SetAll(n),this.roleShowPanel.SetTianx(""),this.roleShowPanel.SetTitle("");break;case FateShowModelType.Title:this.otherComConcealment(this.immortalPositionImg),this.immortalPositionImg.source=t,this.immortalPositionImg.y=93;break;case FateShowModelType.PetPsyche:this.otherComConcealment(this.petShowPanel,this.petShowPanel2),this.petShowPanel.scaleX=this.petShowPanel.scaleY=.5,this.petShowPanel.SetBodyId(t),this.petShowPanel2.SetBodyId(i);break;case FateShowModelType.PetAnimalSoul:this.otherComConcealment(this.petShowPanel,this.petShowPanel2),this.petShowPanel.scaleX=this.petShowPanel.scaleY=1.3,this.petShowPanel.SetBodyId(t),this.petShowPanel2.SetBodyId(i),this.petShowPanel.x=144,this.petShowPanel.y=12;break;case FateShowModelType.FairyTaleNormalArray:this.otherComConcealment(this.petShowPanel,this.petShowPanel2),this.petShowPanel.y=142,this.petShowPanel.SetBodyId(t),this.petShowPanel2.SetBodyId(i);break;case FateShowModelType.FairyTaleImmortalPosition:this.otherComConcealment(this.petShowPanel,this.immortalPositionImg),this.petShowPanel.SetBodyId(i),this.immortalPositionImg.source=t,this.immortalPositionImg.y=-40;break;case FateShowModelType.FemaleDevaWeapons:this.otherComConcealment();break;case FateShowModelType.FemaleDevaFlower:this.otherComConcealment(this.petShowPanel,this.petShowPanel2),this.petShowPanel.SetBodyId(t),this.petShowPanel2.SetBodyId(i);break;case FateShowModelType.FemaleDevaO2:this.otherComConcealment(this.petShowPanel,this.soulImg),this.petShowPanel.SetBodyId(i),this.soulImg.height=35,this.soulImg.width=90,this.soulImg.x=35,this.soulImg.y=-50,this.soulImg.source=t;break;case FateShowModelType.MagicProps:this.otherComConcealment(this.soulImg),this.soulImg.height=90,this.soulImg.width=90,this.soulImg.x=20,this.soulImg.y=20,this.soulImg.source=t}},t}(eui.Component);__reflect(FateModelItemPanel.prototype,"FateModelItemPanel");var FateMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FateMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="功能预告",this._AddClick(this.exchangeBtn,this.onClick),this.funcNoticeConfigTab=GameGlobal.Config.FuncNoticeConfig},t.prototype.OnOpen=function(e){if(this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this.describeLab.text="",0!=e){0!=e&&(this.itemList.dataProvider=new eui.ArrayCollection(this.funcNoticeConfigTab[e].reward));var t=this.funcNoticeConfigTab[e].openLv,i=this.funcNoticeConfigTab[e].des3;1==t[0]?this.describeLab.text=i.replace("%s",t[1]):2==t[0]?this.describeLab.text=i.replace("%s",t[1]):3==t[0]&&(this.describeLab.text=i.replace("%s",t[1]))}this.fateModelItem.typeView=1;var o=this.funcNoticeConfigTab[e].type,n=this.funcNoticeConfigTab[e].pid;void 0!=n&&(void 0!=n[1]?this.fateModelItem.showModelType(o,this.funcNoticeConfigTab[e].pid[0],this.funcNoticeConfigTab[e].pid[1]):void 0!=n[0]?this.fateModelItem.showModelType(o,this.funcNoticeConfigTab[e].pid[0]):this.fateModelItem.showModelType(o,this.funcNoticeConfigTab[e].pid))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.update=function(){},t.prototype.onClick=function(e){switch(e.currentTarget){case this.exchangeBtn:ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FateMainPanel.prototype,"FateMainPanel",["ICommonWindow"]);var FbModel=function(){function e(){this.useCount=0,this.vipBuyCount=0,this.totalCount=0,this.levelLimit=0}return e.prototype.parser=function(e,t,i){this.useCount=t||0,this.vipBuyCount=i||0,this.totalCount=e||0},e.prototype.getCount=function(){var e=GlobalConfig.ins().DailyFubenConfig[this.fbID];return GameLogic.ins().actorModel.level<e.levelLimit?0:GlobalConfig.ins().DailyFubenConfig[this.fbID].freeCount+this.vipBuyCount-this.useCount},e.prototype.GetUseCount=function(){return this.useCount},Object.defineProperty(e.prototype,"personBossWeight",{get:function(){return GameGlobal.actorModel.level<this.levelLimit?1e4*this.fbID:this.useCount>0?1e3*this.fbID:this.fbID},enumerable:!0,configurable:!0}),e}();__reflect(FbModel.prototype,"FbModel");var FbModelRedPoint=function(e){function t(){var t=e.call(this)||this;return t.mRedPointMap={},t}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.FB_INFO_UPDATE,MessageDef.FB_CBT_UPDATE,MessageDef.FB_CBT_UPDATE_REWARD,MessageDef.FB_TIANTING_UPDATE]},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e;var e},t.prototype.OnChange=function(e){e==t.INDEX_ACT&&GameGlobal.MessageCenter.dispatch(MessageDef.FB_REDPOINT_NOTICE)},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mRedPointMap)if(this.mRedPointMap[e])return!0;return!1},t.prototype.DoActive=function(){this.mRedPointMap[t.CAILIAO_FB]=GameGlobal.UserFb.IsCailiaoNotice(),this.mRedPointMap[t.CANGBAOTU_FB]=!1,this.mRedPointMap[t.TIANTING_FB]=GameGlobal.UserFb.IsTianshilianNotice()},t.prototype.IsRedAct=function(e){return this.Get(DailyModelRedPoint.INDEX_ACT),this.mRedPointMap[e]},t.INDEX_ACT=0,t.CAILIAO_FB=1,t.CANGBAOTU_FB=2,t.TIANTING_FB=3,t}(IRedPoint);__reflect(FbModelRedPoint.prototype,"FbModelRedPoint");var LingLongTaModel=function(){function e(){this.hard=1}return e.prototype.parser=function(e,t){this.hard=e,this.layer=t},e}();__reflect(LingLongTaModel.prototype,"LingLongTaModel");var UserFb=function(e){function t(){var t=e.call(this)||this;return t.fbModel={},t.bossIndex=0,t._guanqiaID=-1,t.waveCD=0,t.guanqiaReward=1,t.worldReward=1,t.worldGuanQias=[],t.rankType=0,t.appealtime=0,t.helptime=0,t.mAuto=!1,t.tFbCbtGetReward=[],t.bCbtCanSwap=!0,t.bCbtAutoFight=!1,t.bCbtAcross=!1,t.bTianTingAutoFight=!1,t.m_KillMonsterCount=0,t.lastData={},t.mRedPoint=new FbModelRedPoint,t.regNetMsg(S2cProtocol.sc_raid_chapter_init_info,t.doGuanqiaInfo),t.regNetMsg(S2cProtocol.sc_raid_chapter_wave_data,t.doWaveData),t.regNetMsg(S2cProtocol.sc_raid_chapter_reward,t.doGuanqiaReward),t.regNetMsg(S2cProtocol.sc_raid_chapter_world_reward,t.doGuanqiaWroldReward),t.regNetMsg(S2cProtocol.sc_raid_chapter_offline_reward,t.doOfflineReward),t.regNetMsg(S2cProtocol.sc_raid_chapter_collaborate,t.raidChapterCollaborate),t.regNetMsg(S2cProtocol.sc_fuben_treasuremap_info,t.doCangbaotu),t.regNetMsg(S2cProtocol.sc_fuben_treasuremap_star_reward,t.doCangbaoGetReward),t.regNetMsg(S2cProtocol.sc_fuben_material_info,t.doMaterialInfo),t.regNetMsg(S2cProtocol.sc_fuben_heavenFb_info,t.doTianting),t.regNetMsg(S2cProtocol.sc_fuben_heavenFb_reward,t.doUpdaeTianting),t.regNetMsg(S2cProtocol.sc_fuben_wildgeeseFb_info,t.doLinglongTaInfo),t}return __extends(t,e),Object.defineProperty(t.prototype,"Desc",{get:function(){var e="";return this.config&&this.config.desc&&(e=this.config.desc),e},enumerable:!0,configurable:!0}),t.prototype.doLinglongTaInfo=function(e){this.lltModel||(this.lltModel=new LingLongTaModel),this.lltModel.parser(e.hard,e.layer),MessageCenter.ins().dispatch(MessageDef.TA_INFO_UPDATE)},t.prototype.GetLinglongLayer=function(){return this.lltModel?this.lltModel.layer:0},t.prototype.Init=function(){this.m_personBossArr=[];var e=GameGlobal.Config.DailyFubenConfig;for(var t in e){var i=e[t];if(i.kind){var o=new FbModel;o.fbID=i.id,o.levelLimit=i.levelLimit,this.fbModel[o.fbID]=o}else{var o=new FbModel;o.fbID=i.id,o.levelLimit=i.levelLimit,this.m_personBossArr.push(o)}}SortTools.sortMap(this.m_personBossArr,"fbID",!0),this.tFbCbtData=[];var n=GameGlobal.Config.TreasureMapConfig;for(var a in n){var i=n[a],r=new FbcbtData,s=this.getFbExData(i.fbId);r.initLocalData(i,s),this.tFbCbtData.push(r)}this.tFbTiantingData=[];var l=GameGlobal.Config.HeavenFbConfig;for(var a in l){var c=new FbTiantingData;c.initLocalData(l[a]),this.tFbTiantingData.push(c)}},t.prototype.getPersonBoss=function(){return this.m_personBossArr},t.prototype.getFbExData=function(e){var t,i={name:"",desc:""};return t=GameGlobal.Config.InstanceConfig,t&&(i.name=t[e][GameGlobal.Config.InstanceConfig_keys.name],i.desc=t[e][GameGlobal.Config.InstanceConfig_keys.desc]),i},t.prototype.getPersonBossById=function(e){var t,i=this.m_personBossArr.length;for(t=0;i>t;t++)if(this.m_personBossArr[t].fbID==e)return this.m_personBossArr[t];return null},t.prototype.doMaterialInfo=function(e){var t,i=e.fuben_data?e.fuben_data.length:0;for(t=0;i>t;t++){var o=GameGlobal.Config.DailyFubenConfig[e.fuben_data[t].fubenNo],n=void 0;n=0!=o.kind?this.fbModel[e.fuben_data[t].fubenNo]:this.getPersonBossById(e.fuben_data[t].fubenNo),n&&n.parser(e.fuben_data[t].clearanceNum,e.fuben_data[t].todayNum,e.fuben_data[t].buyNum)}MessageCenter.ins().dispatch(MessageDef.FB_INFO_UPDATE)},t.prototype.doFbBossIndex=function(e){this.bossIndex=e.mybossTop,MessageCenter.ins().dispatch(MessageDef.FB_COUNT_UPDATE)},t.prototype.doCangbaotu=function(e){var t=e,i=!1;for(var o in this.tFbCbtData){var n=this.tFbCbtData[o];for(var a in t.data){var r=t.data[a];!i&&r.star>0&&0==r.todayNum&&(i=!0,this.bCbtCanSwap=!0),r.fubenNo===n.id&&n.updataDataByServer(r)}}i||(this.bCbtCanSwap=!1),this.tFbCbtGetReward=t.starReward,MessageCenter.ins().dispatch(MessageDef.FB_CBT_UPDATE)},t.prototype.doCangbaoGetReward=function(e){this.tFbCbtGetReward=e.starReward,MessageCenter.ins().dispatch(MessageDef.FB_CBT_UPDATE_REWARD)},t.prototype.getCbtCanSwap=function(){return UserVip.ins().lv<GameGlobal.Config.TreasureMapBaseConfig.viplevel&&UserTips.ins().showTips("Vip"+GameGlobal.Config.TreasureMapBaseConfig.viplevel+"可扫荡"),this.bCbtCanSwap},t.prototype.doTianting=function(e){this.tFbTiantingServerData=e,MessageCenter.ins().dispatch(MessageDef.FB_TIANTING_UPDATE)},t.prototype.doUpdaeTianting=function(e){this.tFbTiantingServerData.rewardNo=e.rewardNo,MessageCenter.ins().dispatch(MessageDef.FB_TIANTING_UPDATE)},t.prototype.getTiantingStarReward=function(e){var t=!1;for(var i in this.tFbTiantingServerData.rewardNo){var o=this.tFbTiantingServerData.rewardNo[i];if(e==o){t=!0;break}}return t},t.prototype.getTianTingRewardList=function(){var e=[];for(var t in this.tFbTiantingData)this.tFbTiantingData[t].firstAward&&this.tFbTiantingData[t].firstAward.length>0&&e.push(this.tFbTiantingData[t].firstAward);return e},t.prototype.getTianTingLvData=function(){return this.tFbTiantingData},t.prototype.getCbtStarReward=function(e,t){var i=!1;for(var o in this.tFbCbtGetReward){var n=this.tFbCbtGetReward[o];n.no===e&&(n.reward&1<<t)>0&&(i=!0)}return i},t.prototype.getCbtStarRewardPage=function(e){for(var t in this.tFbCbtGetReward){var i=this.tFbCbtGetReward[t];if(i.no===e&&i.reward)return i.reward}return 0},t.prototype.getCbtPageData=function(){var e={};for(var t in this.tFbCbtData){var i=this.tFbCbtData[t].page;e[i]||(e[i]=[]),i&&e[i].push(this.tFbCbtData[t])}return e},t.prototype.CanHardCbt=function(){var e=!0;for(var t in this.tFbCbtData){var i=this.tFbCbtData[t],o=i.page;if(32==o&&i.star<=0){e=!1;break}}return e},t.prototype.sendCallBossPlay=function(e){var t=new Sproto.cs_raid_call_boss_play_request;t.id=e,this.Rpc(C2sProtocol.cs_raid_call_boss_play,t)},t.prototype.raidAssistPkboss=function(e,t){var i=new Sproto.cs_raid_assist_pkboss_request;i.chapterlevel=e,i.playerid=t,this.Rpc(C2sProtocol.cs_raid_assist_pkboss,i)},t.prototype.raidChapterCollaborate=function(e){this.appealtime=e.appealtime,this.helptime=e.helptime,MessageCenter.ins().dispatch(MessageDef.FUBEN_CHANGE)},t.prototype.sendfbJoin=function(e,t){void 0===t&&(t=0);var i=new Sproto.cs_fuben_join_request;t&&(i.fubenNo=t),i.fubenType=e,this.Rpc(C2sProtocol.cs_fuben_join,i)},t.prototype.sendfbSweep=function(e){var t=new Sproto.cs_fuben_sweep_request;t.fubenType=e,this.Rpc(C2sProtocol.cs_fuben_sweep,t)},t.prototype.sendfbHard=function(){var e=new Sproto.cs_fuben_wildgeeseFb_hard_request;this.Rpc(C2sProtocol.cs_fuben_sweep,e)},t.prototype.getCbtReward=function(e,t){var i=new Sproto.cs_fuben_star_reward_request;i.mapNo=e,i.reward=t,this.Rpc(C2sProtocol.cs_fuben_star_reward,i)},t.prototype.getTianTingReward=function(e){var t=new Sproto.cs_fuben_heaven_reward_request;t.fubenNo=e,this.Rpc(C2sProtocol.cs_fuben_heaven_reward,t)},Object.defineProperty(t.prototype,"guanqiaID",{get:function(){return this._guanqiaID},set:function(e){this._guanqiaID!=e&&(this._guanqiaID=e,this.bossIsChallenged=!1)},enumerable:!0,configurable:!0}),t.prototype.isReceiveBox=function(e){return-1==this.worldGuanQias.indexOf(e)?!1:!0},Object.defineProperty(t.prototype,"killMonsterCount",{get:function(){return this.m_KillMonsterCount},set:function(e){this.m_KillMonsterCount!=e&&(this.m_KillMonsterCount=e,GameGlobal.MessageCenter.dispatch(MessageDef.RAID_KILL_MONSTER_COUNT),FuncOpenEffPanel.checkNeedOpen())},enumerable:!0,configurable:!0}),t.prototype.isShowBossPK=function(){return-1==this.guanqiaID?!1:this.m_KillMonsterCount>=this.config.bossNeedWave&&0==BattleMap.mFbId},t.prototype.getNeedWave=function(){return-1!=this.guanqiaID?Math.max(this.config.bossNeedWave-this.m_KillMonsterCount,0):void 0},t.prototype.checkGuanKaMax=function(){return GlobalConfig.ins().ChaptersCommonConfig.maxNum},t.prototype.doGuanqiaInfo=function(e){var i=this.guanqiaID;this.config&&(this.lastData.goldEff=this.config.goldEff,this.lastData.expEff=this.config.expEff),this.guanqiaID=e.cid,this.killMonsterCount=e.killMonsterCount,this.config=e,this.config&&this.config.sid>12&&(this.config.sid=12),t.MonDict={};for(var o=0,n=e.waveMonsterId;o<n.length;o++){var a=n[o];t.MonDict[a.id]=a}var r=e.bossId;r&&(t.MonDict[r.configId]={id:r.configId,name:r.name,level:r.level,avatar:r.avatar,talk:r.talk}),-1!=i&&this.guanqiaID!=i&&GameGlobal.PlotModel.OnChapterExit(this.guanqiaID),GameGlobal.MessageCenter.dispatch(MessageDef.GUANQIA_CHANGE),Deblocking.Update(Deblocking.CHECK_TYPE_01);var s=new GameMapData;s.fubenID=this.config.sid;var l=!BattleMap.mFbType||BattleMap.mFbType>=t.FB_TYPE_CATCH_PET||BattleMap.mFbType==t.FB_TYPE_GUANQIABOSS;GameGlobal.RaidMgr.EnterNewMapRaid(s,l),Main.Instance.ShowGame()},t.prototype.sendWaveComplete=function(){var e=new Sproto.cs_raid_wave_complete_request;e.killCount=0,this.Rpc(C2sProtocol.cs_raid_wave_complete,e)},t.prototype.sendWaveMonster=function(){this.sendWaveComplete()},t.prototype.CheckAutoPKBoss=function(){return this.killMonsterCount>=this.config.bossNeedWave&&this.mAuto&&!this.config.nextmap?(this.sendPKBoss(),!0):!1},t.prototype.CanPkBoss=function(){return this.killMonsterCount>=this.config.bossNeedWave},t.prototype.sendPKBoss=function(){this.bossIsChallenged=!0,this.Rpc(C2sProtocol.cs_raid_pk_boss,new Sproto.cs_raid_pk_boss_request)},t.prototype.sendSetAuto=function(){var e=new Sproto.cs_raid_open_auto_request;e.auto=this.mAuto,this.Rpc(C2sProtocol.cs_raid_open_auto,e)},t.prototype.doWaveData=function(e){this.killMonsterCount=e.wave},t.prototype.sendExitFb=function(){this.Rpc(C2sProtocol.cs_raid_exit_raid,new Sproto.cs_raid_exit_raid_request)},t.prototype.sendGetAward=function(){this.Rpc(C2sProtocol.cs_raid_get_award,new Sproto.cs_raid_get_award_request)},t.prototype.doGuanqiaReward=function(e){this.guanqiaReward=e.result,this.worldReward=this.getWroldGuanQianCount(this.guanqiaReward)},t.prototype.senddoGuanqiaWroldReward=function(e){var t=new Sproto.cs_raid_get_world_award_request;t.pass=e,this.Rpc(C2sProtocol.cs_raid_get_world_award,t)},t.prototype.doGuanqiaWroldReward=function(e){this.worldGuanQias=[];for(var t=0;t<e.isReceive.length;++t){var i=e.isReceive[t];0==i&&t+1<this.worldReward&&this.worldGuanQias.push(t+1)}},t.prototype.doOfflineReward=function(e){ViewManager.ins().isShow(WelComeLandingPanel)||ViewManager.ins().open(OfflineRewardWin,e)},t.prototype.getWorldGuanQia=function(){return this.worldGuanQias.length>0?this.worldGuanQias[this.worldGuanQias.length]:0},t.prototype.getWroldGuanQianCount=function(e){var t=1;return t},t.prototype.GetWaveMonsterCount=function(){return this.config.bossNeedWave},t.CheckFighting=function(e){return void 0===e&&(e=!0),GameGlobal.UserFb.IsFighting()?(e&&UserTips.ErrorTip("副本战斗中..."),!1):!0},t.FinishAndCheckFighting=function(e){return void 0===e&&(e=!0),BattleMap.mFbType==t.FB_TYPE_GUANQIABOSS?(GameGlobal.RaidMgr.FinishRewardChapterBattle(),!0):this.CheckFighting(e)},t.FinishAndCheckFighting2=function(e){return void 0===e&&(e=!0),BattleMap.mFbType==t.FB_TYPE_GUANQIABOSS?(GameGlobal.RaidMgr.FinishRewardChapterBattle(),!0):this.CheckActMap(e)},t.CheckActMap=function(e){return void 0===e&&(e=!0),this.CheckFighting(e)?GameGlobal.UserFb.IsActMap()?(e&&UserTips.ErrorTip("活动副本中..."),!1):!0:!1},t.prototype.IsFighting=function(){return BattleMap.mFbId>0&&BattleMap.mFbType>0},t.prototype.IsActMap=function(){return GameMap.fbType>0},Object.defineProperty(t.prototype,"chapterId",{get:function(){return this.config.chapterid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chapterRewardList",{get:function(){return this.config.chapterreward},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextMap",{get:function(){return this.config?this.config.nextmap:!1},enumerable:!0,configurable:!0}),t.prototype.gainChapterReward=function(e){var t=new Sproto.cs_raid_get_chapter_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_raid_get_chapter_reward,t,this.doGainChapterReward,this)},t.prototype.doGainChapterReward=function(e){e.ret},t.prototype.IsPersonBossNotice=function(){for(var e=this.getPersonBoss(),t=0,i=e;t<i.length;t++){var o=i[t];if(GameGlobal.actorModel.level>=o.levelLimit){var n=GameGlobal.Config.DailyFubenConfig[o.fbID];if(n.freeCount+o.vipBuyCount-o.useCount>0)return!0}}return!1},t.prototype.IsCailiaoNotice=function(){for(var e in this.fbModel){var t=this.fbModel[e],i=GameGlobal.Config.DailyFubenConfig[t.fbID];if(GameGlobal.actorModel.level>=i.levelLimit&&i.freeCount>t.useCount)return!0}return!1},t.prototype.IsTianshilianNotice=function(){return this.tFbTiantingServerData?this.tFbTiantingServerData.todayLayer<this.tFbTiantingServerData.layer:!1},t.prototype.IsRedPointFB=function(e){return this.mRedPoint.IsRedAct(e)},t.prototype.IsRedPoint=function(){return this.mRedPoint.Get(FbModelRedPoint.INDEX_ACT),this.mRedPoint.IsRedPoint()},t.MonDict={},t.FB_TYPE_GUANQIABOSS=1,t.FB_TYPE_PERSONAL_BOSS=2,t.FB_TYPE_PUBLIC_BOSS=3,t.FB_TYPE_FIELD_BOSS=4,t.FB_TYPE_LIFE_DEATH_PLUNDER=5,t.FB_TYPE_MATERIAL=6,t.FB_TYPE_TREASURE=7,t.FB_TYPE_TOWER=8,t.FB_TYPE_TOWER2=9,t.FB_TYPE_ARENA=10,t.FB_TYPE_CROSSTEAMFB=11,t.FB_TYPE_GUILDSPRITE=12,t.FB_TYPE_GUILDFB=13,t.FB_TYPE_ESCORT=14,t.FB_TYPE_GANG_BOSS=15,t.FB_TYPE_VIP_BOSS=16,t.FB_TYPE_KING_CITY=17,t.FB_TYPE_KING_PK=18,t.FB_TYPE_GANGMINE=19,t.KF_BOSS=20,t.FB_TYPE_GUILD_WAR=21,t.FB_TYPE_GUILD_WAR_PK=22,t.FB_TYPE_CLOUD_NINE=25,t.FB_TYPE_XIANDAO=26,t.FB_TYPE_FOMALHAUT=27,t.FB_TYPE_GANGMAP=29,t.FB_TYPE_MAINMAP=30,t.FB_TYPE_ACTIVITY_PET_FIGHT=31,t.FB_TYPE_LADDER=32,t.FB_TYPE_CATCH_PET=9998,t}(BaseSystem);__reflect(UserFb.prototype,"UserFb");var FbcbtData=function(){function e(){this.todayNum=0,this.star=0}return e.prototype.initLocalData=function(e,t){this.id=e.id,this.page=e.page,this.dod=e.dod,this.fbId=e.fbId,this.firstAwardSw=e.firstAwardSw||[],this.dayAward=e.dayAward||[],this.item=e.item,this.caption=e.caption,this.name=t.name||"",this.desc=t.desc||""},e.prototype.updataDataByServer=function(e){this.todayNum=e.todayNum,this.star=e.star},e}();__reflect(FbcbtData.prototype,"FbcbtData");var FbTiantingData=function(){function e(){this.id=0,this.fbId=0,this.bossId=0,this.firstAward=[],this.specialAwardshow=[],this.uishow=0,this.caption1="",this.caption2=""}return e.prototype.initLocalData=function(e){this.id=e.id,this.fbId=e.fbId,this.bossId=e.bossId,this.firstAward=e.firstAward,this.specialAwardshow=e.specialAwardshow,this.uishow=e.uishow,this.caption1=e.caption1,this.caption2=e.caption2},e}();__reflect(FbTiantingData.prototype,"FbTiantingData");var CaiLiaoFbPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="CaiLiaoFBSkin",t.itemList.itemRenderer=CaiLiaoFBItem,t.itemList.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return this.itemList.validateNow(),e={},e[1]=this.itemList.getElementAt(0)?this.itemList.getElementAt(0).saodangBtn:null,e;var e},t.prototype.UpdateContent=function(){var e=GameGlobal.UserFb.fbModel,t=[];for(var i in e){t.push(e[i]);var o=GlobalConfig.ins().DailyFubenConfig;if(GameLogic.ins().actorModel.level<o[e[i].fbID].levelLimit)break}this.itemList.dataProvider.replaceAll(t)},t.prototype.OnOpen=function(){this.observe(MessageDef.FB_INFO_UPDATE,this.UpdateContent),this.UpdateContent(),this.AddClick(this.cailiaoShop,this.onTap)},t.prototype.OnClose=function(){this.removeObserve(),this.removeEvents()},t.prototype.onTap=function(){ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_CAILIAO])},t.NAME="材料副本",t}(BaseView);__reflect(CaiLiaoFbPanel.prototype,"CaiLiaoFbPanel",["ICommonWindowTitle"]);var CaiLiaoFBItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="CaiLiaoItemSkin",t.itemList.itemRenderer=ItemBaseNotName,t.saodangBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t}return __extends(t,e),t.prototype.onTap=function(e){if(UserFb.FinishAndCheckFighting()){var t=GlobalConfig.ins().DailyFubenConfig[this.data.fbID],i=t.vipBuyCount[GameLogic.ins().actorModel.vipLv];if(this.data.useCount<t.freeCount)return void GameGlobal.UserFb.sendfbJoin(1,this.data.fbID);if(this.data.vipBuyCount<i)GameLogic.ins().actorModel.yb>=t.buyPrice[i]?GameGlobal.UserFb.sendfbJoin(1,this.data.fbID):UserTips.ins().showTips("元宝不足");else{var o=CommonUtils.getObjectLength(t.vipBuyCount)-1+"",n=0;for(var a in t.vipBuyCount){var r=t.vipBuyCount[a];if(r>this.data.useCount-t.freeCount){o=a,n=r-this.data.useCount+t.freeCount;break}}UserTips.ins().showTips("VIP"+o+"可再扫荡"+n+"次")}}else;},t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.ins().DailyFubenConfig;if(this.titleName.text=t[e.fbID].uititle,this.itemList.dataProvider=new eui.ArrayCollection(t[e.fbID].showItem),GameLogic.ins().actorModel.level<t[e.fbID].levelLimit)this.group1.visible=!1,this.tipsTxt2.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T: 角色等级|C:0x4fcd4c&T:"+t[e.fbID].levelLimit+"|C:0x6E330B&T:级开启|"),this.tipsTxt2.visible=!0;else{this.group1.visible=!0,this.tipsTxt2.visible=!1;var i=CommonUtils.getObjectLength(t[e.fbID].vipBuyCount)-1+"",o=0;for(var n in t[e.fbID].vipBuyCount){var a=t[e.fbID].vipBuyCount[n];if(a>e.useCount-t[e.fbID].freeCount){i=n,o=a-e.useCount+t[e.fbID].freeCount;break}}t[e.fbID].needsuccess>e.totalCount?e.useCount>=t[e.fbID].freeCount?(this.tipstxt1.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T: VIP|C:0x6E330B&T:"+i+"|C:0x6E330B&T: 可再扫荡|C:0x4fcd4c&T:"+o+"|C:0x6E330B&T: 次|"),this.saodangBtn.labelDisplay.text="扫荡",this.redPoint.visible=!1,this.moneyTxt.visible=!0,this.moneyTxt.text=t[e.fbID].buyPrice[e.vipBuyCount]):(this.tipstxt1.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T: 今日可挑战次数：|C:0x4fcd4c&T:"+t[e.fbID].freeCount+"|"),this.saodangBtn.labelDisplay.text="挑战",this.redPoint.visible=!0,this.moneyTxt.visible=!1):e.useCount>=t[e.fbID].freeCount?(this.tipstxt1.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T: VIP|C:0x6E330B&T:"+i+"|C:0x6E330B&T: 可再扫荡|C:0x4fcd4c&T:"+o+"|C:0x6E330B&T: 次|"),this.saodangBtn.labelDisplay.text="扫荡",this.redPoint.visible=!1,this.moneyTxt.visible=!0,this.moneyTxt.text=t[e.fbID].buyPrice[e.vipBuyCount]):(this.tipstxt1.textFlow=TextFlowMaker.generateTextFlow("|C:0x6E330B&T:今日可扫荡次数：|C:0x4fcd4c&T:"+t[e.fbID].freeCount+"|"),this.saodangBtn.labelDisplay.text="免费扫荡",this.redPoint.visible=!0,this.moneyTxt.visible=!1),this.bGray()?this.saodangBtn.filters=null:this.saodangBtn.filters=Color.GetFilter()}},t.prototype.bGray=function(){var e=!1,t=GlobalConfig.ins().DailyFubenConfig[this.data.fbID],i=t.vipBuyCount[GameLogic.ins().actorModel.vipLv];return this.data.vipBuyCount<i&&(e=!0),e},t}(eui.ItemRenderer);__reflect(CaiLiaoFBItem.prototype,"CaiLiaoFBItem");var FbCbtPanel=function(e){function t(){var t=e.call(this)||this;return t.tSpReward=[],t.tGem=[],t.tReward=[],t.tItem=[],t.tCbtData=[],t.tStarRewardData=[],t.nNewLvNum=1,t.nIndex=1,t.nSelect=0,t.nMaxStar=1,t.tStarList=[],t.nNowStar=0,t.nDownTime=10,t.nReward=1,t.skinName="CangbaotuSkin",t.bar1.labelDisplay.visible=!1,t.bar2.labelDisplay.visible=!1,t.bar3.labelDisplay.visible=!1,t.bar1.slideDuration=0,t.bar2.slideDuration=0,t.bar3.slideDuration=0,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.challageBtn,e;var e},t.prototype.childrenCreated=function(){for(var e=1;6>=e;e++){var t=this["pPop"+e];this.tGem[e]=t,this._AddClick(t,this.onClickGem)}for(var e=0;1>=e;e++){var t=this["pReward"+(e+1)];this.tReward[e]=t,this.tReward[e].listView.itemRenderer=ItemBase,this._AddClick(t,this.onClick)}for(var e=0;2>=e;e++){var t=this["pItem"+(e+1)];this.tItem[e]=t,this._AddClick(t,this.onClickItem)}},t.prototype.OnOpen=function(){this.observe(MessageDef.FB_CBT_UPDATE,this.updateServer),this.observe(MessageDef.FB_CBT_UPDATE_REWARD,this.UpdateContent),this._AddClick(this.oneKeyBtn,this.onClick),this._AddClick(this.challageBtn,this.onClick),this._AddClick(this.prevBtn,this.onClick),this._AddClick(this.nextBtn,this.onClick),this._AddClick(this.btnHard,this.onClick),UIHelper.ShowRedPoint(this.challageBtn,!0),this.checkBox.addEventListener(egret.Event.CHANGE,this.chage,this),this.initStarData(),this.checkBox.selected=GameGlobal.UserFb.bCbtAutoFight,this.nDownTime=10,this.checkBox.labelDisplay.text="自动挖宝",this.AddTimer(1e3,0,this.startUpdateTime),this.updateServer()},t.prototype.chage=function(){this.nDownTime=10,this.checkBox.selected||(this.checkBox.labelDisplay.text="自动挖宝"),GameGlobal.UserFb.bCbtAutoFight=this.checkBox.selected},t.prototype.upDataSelectRect=function(){var e="自动挖宝";e=this.nDownTime>=10||this.nDownTime<0?"自动挖宝":this.nDownTime+"S后自动挖宝",this.checkBox.labelDisplay.text=e},t.prototype.startUpdateTime=function(){if(this.checkBox.selected){if(this.nDownTime>0)this.nDownTime=this.nDownTime-1;else if(0===this.nDownTime){var e=this.getNowLvData();GameGlobal.UserFb.sendfbJoin(2,e.id),this.nDownTime=this.nDownTime-1}this.upDataSelectRect()}},t.prototype.updateServer=function(){this.setData(),this.locateNewLevel(),this.UpdateContent()},t.prototype.initStarData=function(){this.tStarRewardData=GameGlobal.Config.TreasureMapStarConfig},t.prototype.locateNewLevel=function(e){void 0===e&&(e=!0);for(var t in this.tCbtData){var i=this.tCbtData[t];for(var o in i)if(0===i[o].todayNum)return e&&(this.nIndex=parseInt(t)+1),void(this.nSelect=parseInt(o))}},t.prototype.GetArrowRedPoint=function(e,t){void 0===t&&(t=null);var i=GameGlobal.UserFb.getCbtStarRewardPage(e);if(i>=14)return!1;if(null==t){t=0;for(var o=0,n=this.tCbtData[e-1];o<n.length;o++){var a=n[o];t+=a.star}}for(var r=0;3>r;r++)if(!BitUtil.Has(i,r+1)){var s=this.tStarRewardData[this.nIndex][r];if(t>=s.star)return!0}return!1},t.prototype.showLeftArrow=function(){if(this.prevBtn.visible=this.tStarRewardData[this.nIndex-1]){for(var e=!1,t=this.nIndex-1;t>=1;--t)if(this.GetArrowRedPoint(t)){e=!0;break}UIHelper.ShowRedPoint(this.prevBtn,e)}},t.prototype.showRightArrow=function(){var e=this.tCbtData[this.nIndex-1],t=0;for(var i in e)t+=e[i].star;if(t>0&&this.tCbtData[this.nIndex]){this.nextBtn.visible=!0;for(var o=!1,n=this.nIndex+1;99>=n;++n){var a=this.tCbtData[n-1];if(!a)break;var r=0;for(var i in a)r+=a[i].star;if(!r)break;if(this.GetArrowRedPoint(n,r)){o=!0;break}}UIHelper.ShowRedPoint(this.nextBtn,o)}else this.nextBtn.visible=!1},t.prototype.setData=function(){this.tCbtData=[],this.tSpReward=[];var e=GameGlobal.UserFb.getCbtPageData();for(var t in e)this.tCbtData.push(e[t]);var i=GameGlobal.Config.TreasureMapConfig;for(var t in i)if(i[t].item){var o={lv:i[t].id,item:i[t].item,caption:i[t].caption};this.tSpReward.push(o)}this.nNowStar=0;var n=this.tCbtData[this.nIndex-1];for(var t in n)this.nNowStar=this.nNowStar+n[t].star;this.nNewLvNum=this.getLastNum(),this.tStarList=[]},t.prototype.getLastNum=function(){for(var e in this.tCbtData){var t=this.tCbtData[e];for(var i in t)if(0===t[i].star)return t[i].id}return 1},t.GetLastNum=function(){var e=[],t=GameGlobal.UserFb.getCbtPageData();for(var i in t)e.push(t[i]);for(var i in e){var o=e[i];for(var n in o)if(0===o[n].star)return o[n].id}return 1},t.prototype.onClick=function(e){var t=this.getNowLvData();switch(e.target){case this.oneKeyBtn:GameGlobal.UserFb.getCbtCanSwap()?GameGlobal.UserFb.sendfbSweep(1):UserTips.ins().showTips("无法扫荡");break;case this.challageBtn:UserFb.FinishAndCheckFighting2()&&(GameGlobal.UserFb.bCbtAcross=t.star,GameGlobal.UserFb.bCbtAutoFight=!0,GameGlobal.UserFb.sendfbJoin(2,t.id));break;case this.prevBtn:this.nIndex>=1&&(this.nIndex=this.nIndex-1,this.UpdateContent(),this.locateNewLevel(!1));break;case this.nextBtn:this.nIndex<this.tCbtData.length&&(this.nIndex=this.nIndex+1,this.UpdateContent(),this.locateNewLevel(!1));break;case this.btnHard:}},t.prototype.onClickItem=function(e){var t;switch(e.currentTarget){case this.pItem1:t=this.tStarRewardData[this.nIndex][0],this.nReward=1;
break;case this.pItem2:t=this.tStarRewardData[this.nIndex][1],this.nReward=2;break;case this.pItem3:t=this.tStarRewardData[this.nIndex][2],this.nReward=3}var i="第"+this.nIndex+"关",o=t.star+"星",n=GameGlobal.UserFb.getCbtStarReward(this.nIndex,this.nReward),a=!1;this.nNowStar>=t.star&&!n&&(a=!0),WarnWin.showReward("|C:0x6E330B&T: 通关藏宝图第|C:0x4fcd4c&T:"+i+"|C:0x6E330B&T:获得|C:0x4fcd4c&T:"+o+"|C:0x6E330B&T:奖励|",this.getRewrd,this,null,null,"reward",{title:"通关奖励",reward:t.starAward,btnName:"领取奖励",bHideSureBtn:!a})},t.prototype.getRewrd=function(){GameGlobal.UserFb.getCbtReward(this.nIndex,this.nReward)},t.prototype.onClickGem=function(e){var t=this.tGem.indexOf(e.currentTarget);this.nSelect=t-1,this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData();var e=0;for(var t in this.tGem){var i=this.tGem[t];this.upDataGem(i,e),e+=1}for(var t in this.tReward)this.upDateReward(this.tReward[t],parseInt(t));for(var t in this.tItem)this.upDateItem(this.tItem[t],parseInt(t));this.updateInfo()},t.prototype.updateInfo=function(){var e=this.getNowLvData();if(this.lbTitle.text="藏宝图"+this.nIndex,this.lbLv.text="第"+e.id+"关",this.bar1.value=0,this.bar2.value=0,this.bar3.value=0,this.tStarList.length>=3)if(this.nNowStar<=this.tStarList[0])this.bar1.value=this.nNowStar/this.tStarList[0]*100;else if(this.nNowStar<=this.tStarList[1]){this.bar1.value=100;var t=this.nNowStar;t-=this.tStarList[0],this.bar2.value=t/(this.tStarList[1]-this.tStarList[0])*100}else{this.bar1.value=100,this.bar2.value=100;var t=this.nNowStar;t-=this.tStarList[1],this.bar3.value=t/(this.tStarList[2]-this.tStarList[1])*100}this.lbVip.text="vip"+GlobalConfig.ins().TreasureMapBaseConfig.viplevel+"开启";var i;for(var o in this.tSpReward)if(this.tSpReward[o].lv>=this.nNewLvNum){i=this.tSpReward[o];break}i?(this.pGroupRewar.visible=!0,this.itemBaee.setItemData(i.item),this.lbPassLvReward.text=i.caption):this.pGroupRewar.visible=!1,this.showLeftArrow(),this.showRightArrow()},t.prototype.getNowLvData=function(){var e;return e=this.tCbtData[this.nIndex-1][this.nSelect]},t.prototype.getNowPageReward=function(){},t.prototype.upDataGem=function(e,t){var i=this.tCbtData[this.nIndex-1][t];switch(this.nSelect===t?e.imgSelect.visible=!0:e.imgSelect.visible=!1,i.star>0?e.imgReward.source="ui_fb_bm_baoxiang03":e.imgReward.source="ui_fb_bm_baoxiang02",e.imgGet.visible=i.todayNum>0,i.star){case 0:e.imgStar1.filters=Color.GetFilter(),e.imgStar2.filters=Color.GetFilter(),e.imgStar3.filters=Color.GetFilter();break;case 1:e.imgStar1.filters=null,e.imgStar2.filters=Color.GetFilter(),e.imgStar3.filters=Color.GetFilter();break;case 2:e.imgStar1.filters=null,e.imgStar2.filters=null,e.imgStar3.filters=Color.GetFilter();break;case 3:e.imgStar1.filters=null,e.imgStar2.filters=null,e.imgStar3.filters=null}},t.prototype.upDateItem=function(e,t){var i=this.tStarRewardData[this.nIndex][t],o=i.star||1;e.lbStar.text=o,this.tStarList.push(o),2==t&&(this.nMaxStar=o),this.nNowStar>=o?e.imgRed.visible=!0:e.imgRed.visible=!1;var n=GameGlobal.UserFb.getCbtStarReward(this.nIndex,t+1);n?(e.imgRed.visible=!1,e.imgGet.visible=!0):e.imgGet.visible=!1},t.prototype.upDateReward=function(e,t){var i=this.getNowLvData(),o=[];0===t?(i.star>0?e.imgGet.visible=!0:e.imgGet.visible=!1,o=i.firstAwardSw):(e.lbNe.text="通关奖励",i.todayNum>0?e.imgGet.visible=!0:e.imgGet.visible=!1,o=i.dayAward),e.listView.dataProvider=new eui.ArrayCollection(o)},t.prototype.onListViewClick=function(e){},t.NAME="藏宝图",t}(BaseView);__reflect(FbCbtPanel.prototype,"FbCbtPanel",["ICommonWindowTitle"]);var FbLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tShopData=[],t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[3]=this.commonWindowBg.tabBar.getChildAt(2),e[2]=this.commonWindowBg.tabBar.getChildAt(1),e;var e},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="FubenSkin",this.commonWindowBg.SetViewStack(this.viewStack),this.viewStack.tabChildren=[TabView.CreateTabViewData(CaiLiaoFbPanel),TabView.CreateTabViewData(FbCbtPanel),TabView.CreateTabViewData(LingLongTaPanel),TabView.CreateTabViewData(TianshilianPanel)]},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.viewStack.UpdateTabShowState(this.viewStack.length,!1),this.commonWindowBg.OnAdded(this,i),this.uiBg1.visible=!0,this.uiBg2.visible=!1,this.observe(MessageDef.FB_INFO_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.FB_CBT_UPDATE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.FB_CBT_UPDATE_REWARD,this.UpdateTabBtnRedPoint),this.observe(MessageDef.FB_TIANTING_UPDATE,this.UpdateTabBtnRedPoint),this.mCommonWindowBg.ShowTalRedPoint(1,!0),this.mCommonWindowBg.ShowTalRedPoint(2,!0),this.UpdateTabBtnRedPoint();var o=GameGlobal.UserTask.mainTaskData[0];o&&o.state==TaskState.GET&&1034==o.id&&GameGlobal.GuideUtil.Finish(this,this.commonWindowBg.returnBtn)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.UserFb.mRedPoint.IsRedAct(FbModelRedPoint.CAILIAO_FB)),this.mCommonWindowBg.ShowTalRedPoint(3,GameGlobal.UserFb.mRedPoint.IsRedAct(FbModelRedPoint.TIANTING_FB))},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){switch(e){case 0:this.uiBg1.visible=!0,this.uiBg2.visible=!1;break;case 1:this.uiBg1.visible=!1,this.uiBg2.visible=!1;break;case 2:this.uiBg1.visible=!1,this.uiBg2.visible=!1;break;case 3:this.uiBg1.visible=!1,this.uiBg2.visible=!1}return!0},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FbLayer.prototype,"FbLayer",["ICommonWindow","ICommonWindowTitle"]);var GuanQiaRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuaQiaRankSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonDialog.OnAdded(this),this.commonDialog.title="关卡排行榜"},t.prototype.initData=function(){this.list.itemRenderer=GuanQiaRankItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.RankingModel.sendRank(RankingModel.RANK_TYPE_FB),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,this.UpdateContent)},t.prototype.UpdateContent=function(){var e=GameGlobal.RankingModel.ranks[RankingModel.RANK_TYPE_FB];this.list.dataProvider=new eui.ArrayCollection(e.datas),this.guanQiaTxt.text=GameGlobal.UserFb.guanqiaID+"关";for(var t,i=0,o=e.datas;i<o.length;i++){var n=o[i];n.id==GameGlobal.actorModel.actorID&&(t=!0)}t?this.isMeTxt.text=""+e.selfRank:this.isMeTxt.text="未上榜"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GuanQiaRankPanel.prototype,"GuanQiaRankPanel");var GuanQiaRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuaQiaRankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.itemIndex%2==0?this.currentState="state1":this.currentState="state2",this.rankTxt.textColor=7090442,this.nameTxt.textColor=7090442,1==this.data.pos?(this.rankTxt.textColor=16734464,this.nameTxt.textColor=16734464):2==this.data.pos?(this.rankTxt.textColor=11479991,this.nameTxt.textColor=11479991):3==this.data.pos&&(this.rankTxt.textColor=5926631,this.nameTxt.textColor=5926631),this.rankTxt.text=this.data.pos,this.nameTxt.text=this.data.name,this.guanQiaTxt.text=this.data.chapterlevel+"关",this.powerTxt.text=this.data.power},t}(eui.ItemRenderer);__reflect(GuanQiaRankItem.prototype,"GuanQiaRankItem");var GuanQiaRewardPanel=function(e){function t(){var t=e.call(this)||this;return t.boxPass=0,t.guideHand=null,t.guideFrame=null,t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.challengeBtn,e;var e},t.prototype.childrenCreated=function(){this.challengeBtn.visible=!1,this.bar.value=0},t.prototype.OnOpen=function(){this.AddClick(this.showRankTxt,this.onTouchTap),this.AddClick(this.challengeBtn,this.onTouchTap),this.AddClick(this.btn_help,this.onTouchTap),this.observe(MessageDef.FUBEN_CHANGE,this.upDataGuanqia),GameGlobal.RankingModel.sendRank(RankingModel.RANK_TYPE_FB),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,this.UpdateContent),this.UpdateContent(),TimerManager.ins().doTimer(100,1,this.startUpdateRule,this)},t.prototype.OnClose=function(){t.CLICK_TASK_COMEIN=!1},t.prototype.startUpdateRule=function(){},t.prototype.onTouchTap=function(e){switch(e.currentTarget){case this.challengeBtn:UserBag.ins().getSurplusCount()<UserBag.BAG_ENOUGH?BagFullTipsPanel.Open():GameGlobal.UserFb.sendPKBoss();break;case this.showRankTxt:ViewManager.ins().open(GuanQiaRankPanel);break;case this.btn_help:Deblocking.Check(DeblockingType.TYPE_49)&&Deblocking.Check(DeblockingType.TYPE_115)&&(GameGlobal.UserFb.isShowBossPK()?(GameGlobal.Chat.chatShareInfo(20,null),UserTips.InfoTip("已发送求助信息到世界聊天")):UserTips.ins().showTips("请先击杀剩余怪物"))}},t.prototype.upDataGuanqia=function(){this.UpdateContent()},t.prototype.upDateGuanqiaWroldReward=function(){this.boxPass=GameGlobal.UserFb.getWorldGuanQia()},t.prototype.getPassIndex=function(e){var i;return i=e%t.BOSS_HEAD_COUNT==0?e-t.BOSS_HEAD_COUNT+1:e-e%t.BOSS_HEAD_COUNT+1},t.prototype.UpdateContent=function(){var e=GameGlobal.RankingModel.ranks[RankingModel.RANK_TYPE_FB];if(e)for(var t=0,i=e.datas;t<i.length;t++){var o=i[t];1==o.pos?this.lb_r0.text=o.pos+"  "+o.name+"  "+o.chapterlevel+"关":2==o.pos?this.lb_r1.text=o.pos+"  "+o.name+"  "+o.chapterlevel+"关":3==o.pos&&(this.lb_r2.text=o.pos+"  "+o.name+"  "+o.chapterlevel+"关")}var n=(GameGlobal.UserFb.guanqiaID,GameGlobal.UserFb.config.showAward),a=GlobalConfig.ins().ChaptersCommonConfig.appealtime||0,r=GlobalConfig.ins().ChaptersCommonConfig.helptime||0;this.lb_helpNum.text="已求助次数："+GameGlobal.UserFb.appealtime+"/"+a,this.lb_beHelpNum.text="可协助次数："+GameGlobal.UserFb.helptime+"/"+r;var s=GameGlobal.UserFb.guanqiaID-1,l=GameGlobal.Config.ChaptersRewardConfig[Math.floor(s/10)+1];this.gchapreward.data=l.rewards[0],this.bar.maximum=10,this.bar.value=s%10,this.showPanel.SetBodyId(Number(GameGlobal.UserFb.config.bossId.avatar)),this.mapNameTxt.text="第"+GameGlobal.UserFb.guanqiaID+"关 "+GameGlobal.UserFb.Desc;for(var c,u=0;u<this.itemGroup.numChildren;u++)c=this.itemGroup.getChildAt(u),n[u]?c.data=n[u]:DisplayUtils.removeFromParent(c);GameGlobal.UserFb;this.updateChallenge(),this.showChallengeGuide()},t.prototype.updateChallenge=function(){t.CLICK_TASK_COMEIN&&GameGlobal.UserFb.guanqiaID<GameGlobal.Config.GuideBaseConfig.chapterid?this.challengeBtn.visible=!0:this.challengeBtn.visible=GameGlobal.UserFb.isShowBossPK(),this.needWave.visible=!this.challengeBtn.visible,this.needWave.text="再击杀"+GameGlobal.UserFb.getNeedWave()+"波怪物可挑战",GameGlobal.UserFb.guanqiaID>=GameGlobal.UserFb.checkGuanKaMax()&&(this.challengeBtn.visible=!1,this.needWave.visible=!0,this.needWave.text="恭喜通关所有关卡")},t.prototype.showChallengeGuide=function(){},t.NAME="关卡",t.BOSS_HEAD_COUNT=10,t}(BaseView);__reflect(GuanQiaRewardPanel.prototype,"GuanQiaRewardPanel",["ICommonWindowTitle"]);var GuanQiaRewardWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CheckRewardSkin",this.commonWindowBg.SetTabView([TabView.CreateTabViewData(GuanQiaRewardPanel,{skinName:"GuanqiajiangliSkin"})])},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){e.prototype.OnClose.call(this),this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GuanQiaRewardWin.prototype,"GuanQiaRewardWin",["ICommonWindow"]);var LingLongRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuaQiaRankSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonDialog.OnAdded(this),this.commonDialog.title="玲珑塔排行榜"},t.prototype.initData=function(){this.list.itemRenderer=LingLongRankItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.RankingModel.sendRank(RankingModel.RANK_TYPE_LLT),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,this.UpdateContent),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.RankingModel.ranks[RankingModel.RANK_TYPE_LLT];this.list.dataProvider=new eui.ArrayCollection(e.datas),this.guanQiaTxt.text=GameGlobal.UserFb.lltModel.layer+"层";for(var t,i=0,o=e.datas;i<o.length;i++){var n=o[i];n.id==GameGlobal.actorModel.actorID&&(t=!0)}t?this.isMeTxt.text=""+e.selfRank:this.isMeTxt.text="未上榜"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(LingLongRankPanel.prototype,"LingLongRankPanel");var LingLongRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuaQiaRankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.itemIndex%2==0?this.currentState="state1":this.currentState="state2",this.rankTxt.textColor=7090442,this.nameTxt.textColor=7090442,1==this.data.pos?(this.rankTxt.textColor=16734464,this.nameTxt.textColor=16734464):2==this.data.pos?(this.rankTxt.textColor=11479991,this.nameTxt.textColor=11479991):3==this.data.pos&&(this.rankTxt.textColor=5926631,this.nameTxt.textColor=5926631),this.rankTxt.text=this.data.pos,this.nameTxt.text=this.data.name,this.guanQiaTxt.text=this.data.chapterlevel+"层",this.powerTxt.text=this.data.power},t}(eui.ItemRenderer);__reflect(LingLongRankItem.prototype,"LingLongRankItem");var LingLongTaItemCom=function(e){function t(){var t=e.call(this)||this;return t.totalLayer=400,t.skinName="LingLongTaItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemList.itemRenderer=ItemBaseNotName},t.prototype.onUpdate=function(e,t){var i,o=e.layer||0,n=3*Math.floor(o/3);i=GameGlobal.Config.WildgeeseFbConfig[n+t],i&&i.id<=e.layer?this.pass_img.visible=!0:this.pass_img.visible=!1,i?(this.visible=!0,this.lvTxt.text="第"+i.id+"层",this.itemList.dataProvider=new eui.ArrayCollection(i.firstAwardshow),this.showPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(i.monsterId)))):this.visible=!1},t}(eui.Component);__reflect(LingLongTaItemCom.prototype,"LingLongTaItemCom");var LingLongTaPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="LingLongTaSkin",t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.tiaozhanBtn,e;var e},t.prototype.UpdateContent=function(){var e=GameGlobal.UserFb.lltModel;this.item0.onUpdate(),this.item1.onUpdate(e,1),this.item2.onUpdate(e,2),this.item3.onUpdate(e,3)},t.prototype.OnOpen=function(){GameGlobal.UserFb.rankType=RankingModel.RANK_TYPE_LLT,GameGlobal.RankingModel.sendRank(RankingModel.RANK_TYPE_LLT),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,this.UpdateContent),this.AddClick(this.cailiaoShop,this.onTap),this.AddClick(this.tiaozhanBtn,this.onTap),UIHelper.ShowRedPoint(this.tiaozhanBtn,!0),this.UpdateContent()},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve()},t.prototype.onTap=function(e){switch(e.target){case this.cailiaoShop:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_DAYAN]);break;case this.tiaozhanBtn:UserFb.FinishAndCheckFighting2()&&GameGlobal.UserFb.sendfbJoin(3,0)}},t.NAME="玲珑宝塔",t}(BaseView);__reflect(LingLongTaPanel.prototype,"LingLongTaPanel",["ICommonWindowTitle"]);var FBRankCom=function(e){function t(){var t=e.call(this)||this;return t.skinName="FbRankSkin",t.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t}return __extends(t,e),t.prototype.onUpdate=function(){var e=GameGlobal.RankingModel.ranks[GameGlobal.UserFb.rankType];if(e)for(var t=0,i=e.datas;t<i.length;t++){var o=i[t];1==o.pos?(this.name01.text=""+o.name,this.ca01.text=" "+o.chapterlevel+"层"):2==o.pos?(this.name02.text=""+o.name,this.ca02.text=" "+o.chapterlevel+"层"):3==o.pos&&(this.name03.text=""+o.name,this.ca03.text=" "+o.chapterlevel+"层")}},t.prototype.onTap=function(){GameGlobal.UserFb.rankType==RankingModel.RANK_TYPE_LLT&&ViewManager.ins().open(LingLongRankPanel),GameGlobal.UserFb.rankType==RankingModel.RANK_TYPE_TT&&ViewManager.ins().open(TianshilianRankPanel)},t}(eui.Component);__reflect(FBRankCom.prototype,"FBRankCom");var TianshilianPanel=function(e){function t(){var t=e.call(this)||this;return t.tViewData=[],t.tReward=[],t.tNowLyData=[],t.tSpReward=[],t.nSpLv=-1,t.tRewardItem=[],t.tLayoutItem=[],t.tBoxObj=[],t.nRewardPage=0,t.DOWNTIME=GameGlobal.Config.HeavenFbBaseConfig.time,t.nDownTime=10,t.nReward=1,t.skinName="TianshilianSkin",t._AddClick(t.oneKeyBtn,t._OnClick),t._AddClick(t.challageBtn,t._OnClick),t._AddClick(t.prevBtn,t._OnClick),t._AddClick(t.nextBtn,t._OnClick),t.showReward.scaleX=.7,t.showReward.scaleY=.7,t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=0;2>=e;e++){var t=this["pItemReward"+(e+1)];this.tRewardItem[e]=t,this._AddClick(t,this.onClickRw)}for(var e=0;2>=e;e++){var t=this["pLayout"+(e+1)];this.tLayoutItem[e]=t,this._AddClick(t,this.onClickLy)}},t.prototype.OnOpen=function(){var e=this;GameGlobal.UserFb.rankType=RankingModel.RANK_TYPE_TT,GameGlobal.RankingModel.sendRank(RankingModel.RANK_TYPE_TT),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,function(){e.item0.onUpdate()}),this.observe(MessageDef.FB_TIANTING_UPDATE,this.UpdateContent),this.checkBox.addEventListener(egret.Event.CHANGE,this.chage,this),this.AddTimer(1e3,0,this.startUpdateTime),this.checkBox.selected=GameGlobal.UserFb.bTianTingAutoFight,this.nDownTime=this.DOWNTIME,this.checkBox.labelDisplay.text="自动挑战关卡",this.item0.onUpdate()},t.prototype.chage=function(){this.nDownTime=this.DOWNTIME,this.checkBox.selected||(this.checkBox.labelDisplay.text="自动挑战关卡"),GameGlobal.UserFb.bTianTingAutoFight=this.checkBox.selected},t.prototype.upDataSelectRect=function(){var e="自动挑战关卡";e=this.nDownTime>=this.DOWNTIME||this.nDownTime<0?"自动挑战关卡":this.nDownTime+"S后自动挑战关卡",this.checkBox.labelDisplay.text=e},t.prototype.startUpdateTime=function(){this.checkBox.selected&&(this.nDownTime>0?this.nDownTime=this.nDownTime-1:0===this.nDownTime&&(GameGlobal.UserFb.sendfbJoin(4),this.nDownTime=this.nDownTime-1),this.upDataSelectRect())},t.prototype.setData=function(){this.tReward=GameGlobal.UserFb.getTianTingRewardList(),this.tServer=GameGlobal.UserFb.tFbTiantingServerData,this.tViewData=GameGlobal.UserFb.getTianTingLvData(),this.tSpReward=[],this.nSpLv=-1,this.tNowLyData=[];var e=3*Math.floor(this.tServer.todayLayer/3);1>e&&(e=0);for(var t in this.tViewData)if(this.tViewData[t].uishow){var i={lv:this.tViewData[t].id,boss:this.tViewData[t].uishow,caption1:this.tViewData[t].caption1,caption2:this.tViewData[t].caption2};this.tSpReward.push(i)}for(var o=e;e+3>=o;o++)this.tViewData[o]&&this.tNowLyData.push(this.tViewData[o]);this.tBoxObj=[];var n=[];for(var t in this.tViewData){var a=this.tViewData[t],r={firstAward:[],id:0};a.firstAward&&a.firstAward.length>0&&(r.firstAward=a.firstAward,r.id=a.id,n.push(r))}for(var o=0;o<n.length;o++){var s=Math.floor(o/3);this.tBoxObj[s]||(this.tBoxObj[s]=[]),this.tBoxObj[s].push(n[o])}},t.prototype.UpdateContent=function(){UIHelper.ShowRedPoint(this.oneKeyBtn,GameGlobal.UserFb.IsTianshilianNotice()),this.setData();for(var e in this.tLayoutItem)this.upDataLyCn(this.tLayoutItem[e],e);this.updateRewardItem(),this.upDateInfo(),this.showLeftArrow(),this.showRightArrow()},t.prototype.updateRewardItem=function(){for(var e in this.tRewardItem)this.updateRewardCn(this.tRewardItem[e],e)},t.prototype.showLeftArrow=function(){this.tBoxObj[this.nRewardPage-1]?this.prevBtn.visible=!0:this.prevBtn.visible=!1},t.prototype.showRightArrow=function(){this.tBoxObj[this.nRewardPage+1]?this.nextBtn.visible=!0:this.nextBtn.visible=!1},t.prototype.upDateInfo=function(){var e;for(var t in this.tSpReward)if(this.tSpReward[t].lv>this.tServer.layer){e=this.tSpReward[t];break}if(e?(this.pGroupRewar.visible=!0,this.showReward.SetBody(AppearanceConfig.GetUIPath(e.boss)),this.lbPassLvReward.text=e.caption1,this.lbReName.text=e.caption2):this.pGroupRewar.visible=!1,this.tServer.layer>0){var i="|C:0x6E330B&T:最大通关: |C:0x019704&T:"+this.tServer.layer+"|C:0x6E330B&T: 层|";this.maxLabel.textFlow=TextFlowMaker.generateTextFlow(i)}var o=[0,5,10,15,22,35,50,65,78,85,90,95,100],n=this.tServer.layer-9*this.nRewardPage;n>12&&(n=12),this.bar.value=o[n]||0,this.bar.labelDisplay.visible=!1},t.prototype.upDataLyCn=function(e,t){var i=-1;for(var o in this.tNowLyData)o===t&&(i=this.tNowLyData[o].id,e.layerLabel.text="第"+i+"层",this.tNowLyData[o].bossId&&e.showPanel.SetBody(AppearanceConfig.GetUIPath(MonstersConfig.GetAppId(this.tNowLyData[o].bossId))));i>0?i<=this.tServer.todayLayer?(e.arrowImg.visible=!1,e.goImg.visible=!0):i===this.tServer.todayLayer+1?(e.arrowImg.visible=!0,e.goImg.visible=!1):i>this.tServer.todayLayer+1&&(e.goImg.visible=!1,e.arrowImg.visible=!1):(e.goImg.visible=!1,e.arrowImg.visible=!1)},t.prototype.updateRewardCn=function(e,t){var i=this.tBoxObj[this.nRewardPage];if(i[t])if(e.visible=!0,e.layerLabel.text=i[t].id+"层",this.tServer.layer>=i[t].id){e.stateImg.filters=null;var o=GameGlobal.UserFb.getTiantingStarReward(i[t].id);o?(e.redImg.visible=!1,e.getImg.visible=!0):(e.redImg.visible=!0,e.getImg.visible=!1)}else e.stateImg.filters=Color.GetFilter(),e.redImg.visible=!1,e.getImg.visible=!1;else e.visible=!1},t.prototype.OnClose=function(){},t.prototype.onClickRw=function(e){var t;switch(e.currentTarget){case this.pItemReward1:t=this.tBoxObj[this.nRewardPage][0];break;case this.pItemReward2:t=this.tBoxObj[this.nRewardPage][1];break;case this.pItemReward3:t=this.tBoxObj[this.nRewardPage][2]}if(t){var i="第"+t.id+"层";this.nReward=t.id;var o=GameGlobal.UserFb.getTiantingStarReward(this.nReward),n=!1;this.tServer.layer>=t.id&&!o&&(n=!0),WarnWin.showReward("|C:0x6E330B&T: 通关勇闯天庭|C:0x4fcd4c&T:"+i+"|C:0x6E330B&T:奖励|",this.getRewrd,this,null,null,"reward",{title:"通关奖励",reward:t.firstAward,btnName:"领取奖励",bHideSureBtn:!n})}},t.prototype.getRewrd=function(){GameGlobal.UserFb.getTianTingReward(this.nReward)},t.prototype.onClickLy=function(e){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.oneKeyBtn:UserVip.ins().lv<GameGlobal.Config.HeavenFbBaseConfig.viplv?UserTips.ins().showTips("Vip"+GameGlobal.Config.HeavenFbBaseConfig.viplv+"可扫荡"):this.tServer.todayLayer<this.tServer.layer?GameGlobal.UserFb.sendfbSweep(2):UserTips.ins().showTips("无法扫荡");break;case this.challageBtn:UserFb.FinishAndCheckFighting2()&&GameGlobal.UserFb.sendfbJoin(4);break;case this.prevBtn:this.nRewardPage>0&&(this.nRewardPage=this.nRewardPage-1),this.updateRewardItem(),this.showLeftArrow(),this.showRightArrow(),this.upDateInfo();break;case this.nextBtn:this.nRewardPage<this.tBoxObj.length-1&&(this.nRewardPage=this.nRewardPage+1),this.updateRewardItem(),this.showLeftArrow(),this.showRightArrow(),this.upDateInfo()}},t.NAME="勇闯天庭",t}(BaseEuiView);__reflect(TianshilianPanel.prototype,"TianshilianPanel",["ICommonWindow","ICommonWindowTitle"]);var TianshilianRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuaQiaRankSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonDialog.OnAdded(this),this.commonDialog.title="天庭排行榜"},t.prototype.initData=function(){this.list.itemRenderer=LingLongRankItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.RankingModel.sendRank(RankingModel.RANK_TYPE_TT),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,this.UpdateContent),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.RankingModel.ranks[RankingModel.RANK_TYPE_TT];this.list.dataProvider=new eui.ArrayCollection(e.datas),this.guanQiaTxt.text=GameGlobal.UserFb.tFbTiantingServerData.todayLayer+"层";for(var t,i=0,o=e.datas;i<o.length;i++){var n=o[i];n.id==GameGlobal.actorModel.actorID&&(t=!0)}t?this.isMeTxt.text=""+e.selfRank:this.isMeTxt.text="未上榜"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TianshilianRankPanel.prototype,"TianshilianRankPanel");var TianshilianRankItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GuaQiaRankItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.itemIndex%2==0?this.currentState="state1":this.currentState="state2",this.rankTxt.textColor=7090442,this.nameTxt.textColor=7090442,1==this.data.pos?(this.rankTxt.textColor=16734464,this.nameTxt.textColor=16734464):2==this.data.pos?(this.rankTxt.textColor=11479991,this.nameTxt.textColor=11479991):3==this.data.pos&&(this.rankTxt.textColor=5926631,this.nameTxt.textColor=5926631),this.rankTxt.text=this.data.pos,this.nameTxt.text=this.data.name,this.guanQiaTxt.text=this.data.chapterlevel+"层",this.powerTxt.text=this.data.power},t}(eui.ItemRenderer);__reflect(TianshilianRankItem.prototype,"TianshilianRankItem");var RoleFlyModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_ROLEFLY)||this;return t.mMsgDefUpdate=MessageDef.ROLE_UPDATE_FLYUP,t.MAX_LEVEL=100,t.XiuWei=10,t.mRedPoint=new RoleFlyRedPoint(t),t.regNetMsg(S2cProtocol.sc_rolefly_init,t._DoRoleFlyInfo),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.roleFlyupbaseConfig,this.SkillConfig=GameGlobal.Config.roleFlyupskillconfig,this.AttrsConfig=GameGlobal.Config.PsychicAttrsConfig,this.ProgressConfig=GameGlobal.Config.PsychicProgressConfig,this.SkinConfig=GameGlobal.Config.PsychicSkinConfig,this.MAX_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.roleFlyupFlyupproConfig)-1,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this)},t.prototype._DoRoleFlyInfo=function(e){this.mLevel=e.lv,this.mSkills=e.skillList;for(var t=0;t<e.equipList.length;t++){var i=e.equipList[t];i.id&&this.mEquip[t].ParserByEquipData(i)}this.XiuWei=e.xiuWei,GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_UPDATE_FLYUP)},t.prototype.SendFlyLevel=function(){var e=this,t=new Sproto.cs_rolefly_up_request;this.Rpc(C2sProtocol.cs_rolefly_up,t,function(t){t.ret?(e.mLevel=t.lv,e.mSkills=t.skillList,e.XiuWei=t.xiuWei,GameGlobal.MessageCenter.dispatch(MessageDef.ROLE_UPDATE_FLYUP)):UserTips.ErrorTip("飞升失败")},this)},t.prototype.GetAllPower=function(){var e=0,t=this.GetFlyAttrs();t&&(e+=ItemConfig.CalcAttrScoreValue(t));var i=this.GetFlySkillAttrs();return i&&(e+=ItemConfig.CalcAttrScoreValue(i)),e},t.prototype.GetFlyAttrs=function(){var e=GameGlobal.Config.roleFlyupFlyupproConfig[this.mLevel];return e?AttributeData.AttrAddition([],e.attrpower):[]},t.prototype.GetFlySkillAttrs=function(){var e=this.BaseConfig,t=[];for(var i in this.mSkills)if(!isNaN(this.mSkills[i])){var o=e.skilllist[this.mSkills[i]],n=this.SkillConfig[o][this.mSkills[i]];t=AttributeData.AttrAddition(t,n.attrs)}return t},t}(UserTemplate);__reflect(RoleFlyModel.prototype,"RoleFlyModel");var RoleFlyRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(RoleFlyRedPoint.prototype,"RoleFlyRedPoint");var RoleFlyAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="RoleFlyAttrSkin",t.mModel=GameGlobal.RoleFlyModel,t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this);GameGlobal.SubRoles.GetRoleData();this.levelAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.RoleFlyModel.GetFlyAttrs()),this.skillAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.RoleFlyModel.GetFlySkillAttrs()),this.powerLabel.text=GameGlobal.RoleFlyModel.GetAllPower(),this.lbLev.text=this.mModel.mLevel+"\n阶";var i=SubRoles.ins().GetRoleData().GetSubRoleData();this.roleShowPanel.SetAll(i)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RoleFlyAttrPanel.prototype,"RoleFlyAttrPanel");var RoleFlyPanel=function(e){function t(){var t=e.call(this)||this;return t.m_SkillIconList=[],t.mSkillItems=[],t.skinName="RoleFlyPanelSkin",t.mModel=GameGlobal.RoleFlyModel,t.mModelRedPoint=GameGlobal.RoleFlyModel.mRedPoint,t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.powerLabel,this._OnClick),this._AddClick(this.btnFly,this._OnClick),this._AddClick(this.getXiuWei,this._OnClick);for(var e=0;5>e;e++){var t=this["skill"+e];t&&(t.touchEnabled=!0,t.touchChildren=!1,this.mSkillItems[e]=t,t.name=e+"",t.item.nameTxt.visible=!0,t.item.nameTxt.size=25,t.item.nameTxt.bold=!0,t.item.count.visible=!1,this._AddClick(t,this._OnSkillClick))}this.tdesc.visible=!1,this.haveExp.textColor=Color.l_green_1,this.lbLev.text=this.mModel.mLevel+"\n阶";for(var i=this.mModel.BaseConfig.skilllist,o=this.mModel.SkillConfig,n=[],a=0,r=i;a<r.length;a++){var s=r[a];n.push(o[s][0].skillitem)}this.SetSkillIconList(n)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.powerLabel:ViewManager.ins().open(RoleFlyAttrPanel);break;case this.getXiuWei:ViewManager.ins().open(ExchangeXiuWeiWin);break;case this.btnFly:this.SendFly()}},t.prototype._OnSkillClick=function(e){var t=parseInt(e.currentTarget.name);ViewManager.ins().open(JsFlyupSkillWin,this.mModel,t,this.m_SkillIconList)},t.prototype.SetSkillIconList=function(e){this.m_SkillIconList=e;for(var t=0;t<e.length;t++){var i=this.mSkillItems[t];if(i){i.item.setItemImg(e[t]);var o=this.mModel.IsOpen(t);i.item.setItemImgGray(o?!1:!0);var n=this.mModel.mSkills[t];o?(i.item.nameTxt.text="Lv."+n,i.item.nameTxt.textColor=Color.l_green_1):(i.item.nameTxt.text=this.mModel.GetOpenLevel(t)+"阶激活",i.item.nameTxt.textColor=Color.Red)}}},t.prototype.OnOpen=function(){this.UpdateContent(),this.UpdateRedPoint(),this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.observe(this.mModel.GetItemRpUpdateMsg(),this.UpdateRedPoint)},t.prototype.UpdateRedPoint=function(){for(var e=0;e<this.mSkillItems.length;e++){var t=this.mSkillItems[e];t.item.IsShowRedPoint(this.mModelRedPoint.IsRedSkill(e))}},t.prototype.UpdateContent=function(){var e=GameGlobal.RoleFlyModel,t=SubRoles.ins().GetRoleData();this.roleShowPanel.SetAll(t.GetSubRoleData()),this.powerLabel.text=GameGlobal.RoleFlyModel.GetAllPower(),this.lbLev.text=e.mLevel+"\n阶";for(var i=0;i<this.mSkillItems.length;i++){var o=this.mSkillItems[i],n=e.IsOpen(i),a=e.mSkills[i];n?(o.item.nameTxt.text="Lv."+a,o.item.nameTxt.textColor=Color.l_green_1):(o.item.nameTxt.text=e.GetOpenLevel(i)+"阶激活",o.item.nameTxt.textColor=Color.Red),o.item.setItemImgGray(n?!1:!0)}var r=GameGlobal.Config.roleFlyupFlyupproConfig[this.mModel.mLevel];if(r){var s=e.XiuWei>=r.cost?Color.l_green_1:Color.Red;this.needExp.textFlow=TextFlowMaker.generateTextFlow("消耗修为: |C:0x009000&T:"+r.cost+"|"),this.haveExp.textFlow=TextFlowMaker.generateTextFlow("|C:0x682f00&T:拥有修为: |C:"+s+"&T:"+e.XiuWei+"|")}else this.tdesc.visible=!0,this.exp.visible=!1},t.prototype.SendFly=function(){var e=GameGlobal.RoleFlyModel,t=GameGlobal.Config.roleFlyupFlyupproConfig[this.mModel.mLevel];return t?e.XiuWei>=t.cost?(e.SendFlyLevel(),!0):(UserTips.InfoTip("修为不足，不可飞升"),!1):!1},t.NAME="飞升",t}(BaseView);__reflect(RoleFlyPanel.prototype,"RoleFlyPanel",["ICommonWindowTitle"]);var RoleFlyWin=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tShopData=[],t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_183)?!0:!1},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RoleFlyMainSkin",this.commonWindowBg.SetViewStack(this.viewStack),this.viewStack.tabChildren=[TabView.CreateTabViewData(RoleFlyPanel)]},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];
var i=e[0]||0;this.viewStack.UpdateTabShowState(this.viewStack.length,!1),this.commonWindowBg.OnAdded(this,i),this.observe(MessageDef.RP_TREASURE,this.UpdateRedPoint),this.UpdateRedPoint()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.OnBackClick=function(e){return 0},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(1),this.mCommonWindowBg.CheckTalRedPoint(2),this.mCommonWindowBg.CheckTalRedPoint(3)},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RoleFlyWin.prototype,"RoleFlyWin",["ICommonWindow","ICommonWindowTitle"]);var ForgeModel=function(e){function t(){var t=e.call(this)||this;return t.TYPE_TO_NAME=(i={},i[ForgeType.BOOST]="强化",i[ForgeType.REFINE]="精炼",i[ForgeType.EXERCISE]="锻炼",i[ForgeType.GEM]="镶嵌",i),t.mRedPoint=new ForgeModelRedPoint,t.regNetMsg(S2cProtocol.sc_equip_forge,t.doForgeUpdata),t;var i}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.RefineCostConfig[1].cost.id,MessageDef.FORGE_ITEM_01_UPDATE),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.AnnealCostConfig[1].cost.id,MessageDef.FORGE_ITEM_02_UPDATE),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.GemCostConfig[1].cost.id,MessageDef.FORGE_ITEM_03_UPDATE)},t.prototype.doForgeUpdata=function(e){SubRoles.ins().GetRoleData().parseForgeChange(e,e.forgeType),GameGlobal.MessageCenter.dispatch(MessageDef.FORGE_UPDATE,e.forgeType)},t.prototype.SendUpGrade=function(e){var t=new Sproto.cs_equip_forge_request;t.forgeType=e,GameSocket.ins().Rpc(C2sProtocol.cs_equip_forge,t)},t.prototype.GetForgeConfigByPos=function(e,t,i){var o,n=this.GetConfig(i);for(var a in n)if(o=n[a],o.posId==e&&o.level==t)return o;return null},t.prototype.GetConfig=function(e){var t;switch(e){case ForgeType.BOOST:t=GlobalConfig.ins().EnhanceAttrConfig;break;case ForgeType.REFINE:t=GlobalConfig.ins().RefineAttrConfig;break;case ForgeType.EXERCISE:t=GlobalConfig.ins().AnnealAttrConfig;break;case ForgeType.GEM:t=GlobalConfig.ins().GemAttrConfig}return t},t.prototype.GetCostConfig=function(e){var t;switch(e){case ForgeType.BOOST:t=GlobalConfig.ins().EnhanceCostConfig;break;case ForgeType.REFINE:t=GlobalConfig.ins().RefineCostConfig;break;case ForgeType.EXERCISE:t=GlobalConfig.ins().AnnealCostConfig;break;case ForgeType.GEM:t=GlobalConfig.ins().GemCostConfig}return t},t.prototype.GetMasterConfig=function(e){var t;switch(e){case ForgeType.BOOST:t=GlobalConfig.ins().EnhanceSuitConfig;break;case ForgeType.REFINE:t=GlobalConfig.ins().RefineSuitConfig;break;case ForgeType.EXERCISE:t=GlobalConfig.ins().AnnealSuitConfig;break;case ForgeType.GEM:t=GlobalConfig.ins().GemSuitConfig}return t},t.prototype.GetConfigCostData=function(e,t){var i,o=this.GetCostConfig(e);for(i in o){var n=o[i];if(n.level==t)return n}return null},t.prototype.GetForgeMasterLevel=function(e){var t=GameGlobal.ForgeModel.GetMasterConfig(e),i=GameGlobal.SubRoles.GetRoleData();if(!i)return null;var o,n=i.GetMinEquipIndexAndLevel(e),a=(n[0],n[1]);for(var r in t)a>=t[r].level&&(o=r);return o?t[o]:null},t}(BaseSystem);__reflect(ForgeModel.prototype,"ForgeModel");var ForgeModelRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_BOOST]=this.GetIndexBoost,e[t.INDEX_REFINE]=this.GetIndexRefine,e[t.INDEX_EXERCISE]=this.GetIndexExercise,e[t.INDEX_GEM]=this.GetIndexGem,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.FORGE_UPDATE,MessageDef.GOLD_CHANGE,MessageDef.FORGE_ITEM_01_UPDATE,MessageDef.FORGE_ITEM_02_UPDATE,MessageDef.FORGE_ITEM_03_UPDATE]},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.RP_FORGE)},t.prototype.OnMessage=function(i){if(i==MessageDef.GOLD_CHANGE)this.ClearFlag(t.INDEX_BOOST);else if(i==MessageDef.FORGE_ITEM_01_UPDATE)this.ClearFlag(t.INDEX_REFINE);else if(i==MessageDef.FORGE_ITEM_02_UPDATE)this.ClearFlag(t.INDEX_EXERCISE);else{if(i!=MessageDef.FORGE_ITEM_03_UPDATE)return e.prototype.OnMessage.call(this,i);this.ClearFlag(t.INDEX_GEM)}return!0},t.prototype.GetCost=function(e){var t=GameGlobal.SubRoles.GetRoleData();if(!t)return null;var i=t.GetMinEquipIndexAndLevel(e),o=(i[0],i[1]),n=GameGlobal.ForgeModel.GetConfigCostData(e,o+1),a=null;return n&&(a=n.cost),a?Checker.Data(a,!1):null},t.prototype.GetIndexBoost=function(){return this.GetCost(ForgeType.BOOST)},t.prototype.GetIndexRefine=function(){return this.GetCost(ForgeType.REFINE)},t.prototype.GetIndexExercise=function(){return this.GetCost(ForgeType.EXERCISE)},t.prototype.GetIndexGem=function(){return this.GetCost(ForgeType.GEM)},t.INDEX_BOOST=0,t.INDEX_REFINE=1,t.INDEX_EXERCISE=2,t.INDEX_GEM=3,t}(IRedPoint);__reflect(ForgeModelRedPoint.prototype,"ForgeModelRedPoint");var ForgeEquipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ForgeEquipSkin",t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.mContext.equipComp.onKeyBtn,e;var e},t.prototype.UpdateSel=function(t){e.prototype.UpdateSel.call(this,t);var i=GameGlobal.SubRoles.GetRoleData(),o=i.getEquipByIndex(t),n=this.GetForgeValue(o);if(n){var a=GameGlobal.ForgeModel.GetForgeConfigByPos(t,n,this.mForgeType);this.text_1.textFlow=AttributeData.GetAttrTabString(a.attr,"\n")}else this.text_1.text="未激活";var r=GameGlobal.ForgeModel.GetForgeConfigByPos(t,n+1,this.mForgeType);r&&(this.text_2.textFlow=AttributeData.GetAttrTabString(r.attr,"\n"));var s=r?!1:!0;UIHelper.SetVisible(this.arrowImg,!s),UIHelper.SetVisible(this.text_2,!s)},t}(ForgePanel);__reflect(ForgeEquipPanel.prototype,"ForgeEquipPanel");var ForgeqhPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mForgeType=ForgeType.BOOST,t}return __extends(t,e),t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.equipComp.onKeyBtn.label="一键强化",this.equipComp.masterBtn.masterBtn.icon="ui_bt_qhds",UIHelper.SetLinkStyleLabel(this.equipComp.getwayLabel,"获取银两")},t.prototype.GetForgeValue=function(e){return e.strengthen},t.RedPointCheck=function(){return GameGlobal.ForgeModel.mRedPoint.Get(ForgeModelRedPoint.INDEX_BOOST)},t.NAME="强化",t}(ForgeEquipPanel);__reflect(ForgeqhPanel.prototype,"ForgeqhPanel");var ForgejlPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mForgeType=ForgeType.REFINE,t}return __extends(t,e),t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.equipComp.onKeyBtn.label="一键精炼",this.equipComp.masterBtn.masterBtn.icon="ui_bt_jlds"},t.prototype.GetForgeValue=function(e){return e.refine},t.RedPointCheck=function(){return GameGlobal.ForgeModel.mRedPoint.Get(ForgeModelRedPoint.INDEX_REFINE)},t.NAME="精炼",t}(ForgeEquipPanel);__reflect(ForgejlPanel.prototype,"ForgejlPanel");var ForgedlPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mForgeType=ForgeType.EXERCISE,t}return __extends(t,e),t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.equipComp.onKeyBtn.label="一键锻炼",this.equipComp.masterBtn.masterBtn.icon="ui_bt_dlds"},t.prototype.GetForgeValue=function(e){return e.exercise},t.prototype.GetConsumeTypeId=function(){return 200002},t.RedPointCheck=function(){return GameGlobal.ForgeModel.mRedPoint.Get(ForgeModelRedPoint.INDEX_EXERCISE)},t.NAME="锻炼",t}(ForgeEquipPanel);__reflect(ForgedlPanel.prototype,"ForgedlPanel");var ForgeGemPanel=function(e){function t(){var t=e.call(this)||this;t.m_GemLabel=[],t.mForgeType=ForgeType.GEM,t.skinName="ForgeGemSkin";for(var i=0;i<t.attGroup.numChildren;i++)t.m_GemLabel[i]=t.attGroup.getChildAt(i);return t}return __extends(t,e),t.GetImg=function(e,t){return"resource/assets/image/item_single/2000003.png"},t.GetLen=function(e){for(var t=0,i=0,o=e;i<o.length;i++){var n=o[i];n.value&&++t}return t},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.equipComp.onKeyBtn.label="一键镶嵌",this.equipComp.masterBtn.masterBtn.icon="ui_bt_bsds"},t.prototype.GetForgeValue=function(e){return e.gem},t.prototype.GetConsumeTypeId=function(){return 200002},t.prototype.SetAttrData=function(e,i){var o="",n=this.lv;if(e){var a=AttributeData.getAttrStrAdd(e.attr,15);o=AttributeData.getAttrStrByType(e.attr[0].type);for(var r=1;r<=this.m_GemLabel.length;++r){var s=this.m_GemLabel[r-1],l=t.GetLen(e.attr);if(r>l)this.SetGemLabel(s,"bs_00",o,null);else{var c=n;l>r&&(c=10,n-=10);var u=t.GetImg(e.attr[0].type,c);this.SetGemLabel(s,u,o,a[r-1].value)}}}else{o=AttributeData.getAttrStrByType(i.attr[0].type);for(var r=0;r<this.m_GemLabel.length;++r){var s=this.m_GemLabel[r];this.SetGemLabel(s,"bs_00",o,null)}}},t.prototype.SetGemLabel=function(e,t,i,o){e.img.source=t||"bs_00",o?(e.attName.text=i,e.attName.textColor=Color.l_brown_2,e.attValue.text="+"+o,e.attValue.textColor=Color.l_green_1):(e.attName.text=i+"宝石",e.attValue.text="未激活")},t.RedPointCheck=function(){return GameGlobal.ForgeModel.mRedPoint.Get(ForgeModelRedPoint.INDEX_GEM)},t.NAME="宝石",t}(ForgePanel);__reflect(ForgeGemPanel.prototype,"ForgeGemPanel");var ForgeMasterTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ForgeMasterTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=null,n=ForgeViewHelper.UpdateMasterBtn(i,this.masterBtn),a=GameGlobal.ForgeModel.GetMasterConfig(i);if(n){var r=GameGlobal.SubRoles.GetRoleData(),s=r.GetMinEquipIndexAndLevel(i),l=(s[0],s[1]);this.effName.text="全身"+GameGlobal.ForgeModel.TYPE_TO_NAME[i]+"+"+l.toString(),this.curLabel.text=AttributeData.getAttStr(a[n].attrs,0),a[n+1]?(this.currentState="active",this.nextLabel.text=AttributeData.getAttStr(a[n+1].attrs,0),o=ItemConfig.CalcAttrScoreValue(a[n+1].attrs)-ItemConfig.CalcAttrScoreValue(a[n].attrs)):this.currentState="full"}else this.currentState="none",this.nextLabel.text=AttributeData.getAttStr(a[1].attrs,0),o=ItemConfig.CalcAttrScoreValue(a[1].attrs);null!=o?this.effLabel.text="可提升"+o+"战力":this.effLabel.text=""},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ForgeMasterTipPanel.prototype,"ForgeMasterTipPanel");var DirUtil=function(){function e(){}return e.Get8DirBy2Point=function(e,t){var i=MathUtils.getAngle(MathUtils.getRadian2(e.x,e.y,t.x,t.y));return this.Gngle2dir(i)},e.dir2angle=function(e){return e*=45,e-=90},e.Gngle2dir=function(e){return-90>e&&(e+=360),e+=90,80>=e?1:e>80&&190>=e?3:e>190&&280>=e?5:7},e.DirOpposit=function(e){return 4>e?e+4:e-4},e.Get5DirBy8Dir=function(e){var t=2*(e-4);return 0>t&&(t=0),e-t},e.GetGridByDir=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=null);var o=this.dir2angle(this.DirOpposit(e)),n=i||new egret.Point;return MathUtils.getDirMove(o,t*MapGrid.CELL_SIZE,n),n},e.GetDir=function(e,t,i,o){return this.Gngle2dir(MathUtils.getAngle(MathUtils.getRadian2(e,t,i,o)))},e}();__reflect(DirUtil.prototype,"DirUtil");var ForgeViewHelper=function(){function e(){}return e.InitItemGroup=function(e){for(var t=0;t<e.itemGroup.numChildren;t++){var i=e.itemGroup.getChildAt(t);i.imgIcon.source=ResDataPath.GetEquipDefaultIcon(t)}},e.UpdateMasterBtn=function(e,t){var i,o=GameGlobal.ForgeModel.GetMasterConfig(e),n=GameGlobal.SubRoles.GetRoleData(),a=n.GetMinEquipIndexAndLevel(e),r=(a[0],a[1]);for(var s in o)r>=o[s].level&&(i=s);var l;i&&(l=o[i]);var c=0;l?(t.rankLabel.visible=!0,t.rankLabel.text=l.suitLv+"阶",c=l.suitLv,o[l.suitLv+1]?t.masterLabel.text="("+r+"/"+o[l.suitLv+1].level+")":t.masterLabel.text="",t.masterBtn.iconDisplay.filters=null):(t.masterBtn.iconDisplay.filters=Color.GetFilter(),t.rankLabel.visible=!1,t.masterLabel.text="("+r+"/"+o[1].level+")");var u="";return u=e==ForgeType.BOOST?"ui_bt_qhds":e==ForgeType.REFINE?"ui_bt_jlds":e==ForgeType.EXERCISE?"ui_bt_dlds":"ui_bt_bsds",t.masterBtn.icon=u,c},e}();__reflect(ForgeViewHelper.prototype,"ForgeViewHelper");var ForgeWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="ForgeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){ForgeViewHelper.InitItemGroup(this.equipComp);var e={mContext:this,equipComp:this.equipComp};this.viewStack.tabChildren=[TabView.CreateTabViewData(ForgeqhPanel,e),TabView.CreateTabViewData(ForgejlPanel,e),TabView.CreateTabViewData(ForgedlPanel,e),TabView.CreateTabViewData(ForgeGemPanel,e)],this.commonWindowBg.SetViewStack(this.viewStack),this._AddClick(this.equipComp.getwayLabel,this._OnClick),this._AddClick(this.equipComp.onKeyBtn,this._OnClick),this._AddClick(this.equipComp.masterBtn,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e.length?e[0]:0),this.observe(MessageDef.FORGE_UPDATE,this.UpdateForge),this.observe(MessageDef.RP_FORGE,this.UpdateRedPoint),this.UpdateRedPoint()},t.prototype.OnClose=function(){MainBottomPanel.CloseNav(this)},t.prototype._OnClick=function(e){var t=this.commonWindowBg.GetCurViewStackElement();switch(e.currentTarget){case this.equipComp.onKeyBtn:if(t.CheckUpgrade())t.SendUpgrade();else if(t.mForgeType===ForgeType.BOOST);else{var i=t.GetConsumeValue();i&&UserWarn.ins().setBuyGoodsWarn(i.id)}break;case this.equipComp.masterBtn:ViewManager.ins().open(ForgeMasterTipPanel,t.mForgeType);break;case this.equipComp.getwayLabel:UserWarn.ins().BuyGoodsWarn(this.equipComp.consumeLabel.consumeItemId)}},t.prototype.UpdateForge=function(e){var t=this.commonWindowBg.GetCurViewStackElement();e==t.mForgeType&&t.UpdateForge()},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(0),this.mCommonWindowBg.CheckTalRedPoint(1),this.mCommonWindowBg.CheckTalRedPoint(2),this.mCommonWindowBg.CheckTalRedPoint(3)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ForgeWin.prototype,"ForgeWin");var FormationModel=function(e){function t(){var t=e.call(this)||this;return t.MAX_LEVEL=10,t.MAX_SOUL_LEVEL=10,t.mFormationMap={},t.mRedPoint=new FormationModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_formation_info,t._DoInitInfo),t}return __extends(t,e),t.prototype.Init=function(){},Object.defineProperty(t.prototype,"useDrugNum",{get:function(){return this.mUseDrugNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usedFomationId",{get:function(){return this.mUsedFormationId},enumerable:!0,configurable:!0}),t.prototype._DoInitInfo=function(e){this.mUsedFormationId=e.use,this.mUseDrugNum=e.drugNum;for(var t=0,i=e.infoList;t<i.length;t++){var o=i[t],n=this.mFormationMap[o.no];n||(n=new FormationInfo,this.mFormationMap[o.no]=n),n.UpdateInfo(o)}},t.prototype.SendActiveFormation=function(e){var t=this,i=new Sproto.cs_formation_activation_request;i.no=e,this.Rpc(C2sProtocol.cs_formation_activation,i,function(e){var i=new FormationInfo;i.UpdateInfo(e),t.mFormationMap[e.no]=i,GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_ACTIVE),GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_UPDATE_INFO)},this)},t.prototype.SendUseDrug=function(e){var t=this,i=new Sproto.cs_formation_drug_request;i.useNum=e,this.Rpc(C2sProtocol.cs_formation_drug,i,function(e){e.ret&&(t.mUseDrugNum=e.drugNum,GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_USE_DRUG))},this)},t.prototype.SendUpgradeFormation=function(e,t){var i=this,o=new Sproto.cs_formation_add_exp_request;o.no=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_formation_add_exp,o,function(e){if(e.ret){var t=i.mFormationMap[e.no];t.UpdateExp(e),GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_UPDATE_EXP)}},this)},t.prototype.SendUpgradeFormationSoul=function(e,t){var i=this,o=new Sproto.cs_formation_soul_add_exp_request;o.no=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_formation_soul_add_exp,o,function(e){if(e.ret){var t=i.mFormationMap[e.no];t.UpdateSoulExp(e),GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_UPDATE_SOUL_EXP)}},this)},t.prototype.SendUseFormation=function(e){var t=this,i=new Sproto.cs_formation_use_request;i.no=e,this.Rpc(C2sProtocol.cs_formation_use,i,function(e){e.ret&&(t.mUsedFormationId=e.use,GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_UPDATE_INFO))},this)},t.prototype.SendUpgradeSkill=function(e){var t=this,i=new Sproto.cs_formation_skill_up_request;i.no=e,this.Rpc(C2sProtocol.cs_formation_skill_up,i,function(i){if(i.ret){var o=t.mFormationMap[e];o.mSkillId=i.skillNo,GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_UPDATE_SKILL_INFO)}},this)},t.prototype.GetFormationInfo=function(e){return this.mFormationMap[e]},t.prototype.GetSkillId=function(e){var t=this.mFormationMap[e];return t?t.mSkillId:FormationConst.GetSkillId(e)},t.prototype.HasFormation=function(e){return null!=this.mFormationMap[e]},t.prototype.IsUsed=function(e){return this.mUsedFormationId==e},t.prototype.IsMaxLv=function(e){var t=this.GetFormationInfo(e);return t?t.mLevel>=this.MAX_LEVEL:!1},t.prototype.IsMaxSoulLv=function(e){var t=this.GetFormationInfo(e);return t?t.mSoulLv>=this.MAX_SOUL_LEVEL:!1},t.prototype.GetCurDrugAttr=function(){var e=CommonUtils.copyDataHandler(GameGlobal.Config.FormationBaseConfig.attredata),t=this.mUseDrugNum;for(var i in e)e[i].value*=t;return e},t.prototype.GetCurSoulAttr=function(e){var t=this.GetFormationInfo(e);return t?FormationConst.GetFormationSoulAttr(e,t.mSoulLv,t.mSoulUpNum):FormationConst.GetFormationSoulAttr(e,1,0)},t.prototype.GetCurAttr=function(e){var t=this.GetFormationInfo(e);return t?FormationConst.GetFormationAttr(e,t.mLevel,t.mUpNum):FormationConst.GetFormationBaseAttr(e,1)},t.prototype.GetAllAttr=function(){var e={};for(var t in this.mFormationMap)for(var i=parseInt(t),o=this.GetCurAttr(i),n=0,a=o;n<a.length;n++){var r=a[n];e[r.type]=e[r.type]||0,e[r.type]+=r.value}var s=[];for(var l in e)s.push({type:parseInt(l),value:e[l]});return s},t.prototype.GetAllSoulAttr=function(){var e={};for(var t in this.mFormationMap)for(var i=parseInt(t),o=this.GetCurSoulAttr(i),n=0,a=o;n<a.length;n++){var r=a[n];e[r.type]=e[r.type]||0,e[r.type]+=r.value}var s=[];for(var l in e)s.push({type:parseInt(l),value:e[l]});return s},t.prototype.GetAllPower=function(){var e=0;for(var t in this.mFormationMap)e+=this.GetPower(parseInt(t));return e+=ItemConfig.CalcAttrScoreValue(this.GetCurDrugAttr())},t.prototype.GetPower=function(e){var t=this.GetFormationInfo(e);if(!t)return FormationConst.GetPower(e);var i=0;i+=ItemConfig.CalcAttrScoreValue(this.GetCurAttr(e)),i+=ItemConfig.CalcAttrScoreValue(this.GetCurSoulAttr(e));var o=t.mSkillId;if(o&&0!=o){var n=GameGlobal.Config.EffectsConfig[o];n&&(i+=n[GameGlobal.Config.EffectsConfig_keys.skillpower]||0)}return i},t.prototype.CanFormationUpgrade=function(e){var t=this.GetFormationInfo(e),i=FormationConst.GetFormationLevelConfig(e,t.mLevel);if(!i)return!1;for(var o=0,n=i.cost;o<n.length;o++){var a=n[o];if(!Checker.Data(a,!1))return!1}return!0},t.prototype.CanFormationSoulUpgrade=function(e){var t=this.GetFormationInfo(e),i=FormationConst.GetFormationSoulConfig(e,t.mSoulLv);return i?Checker.Data(i.cost,!1):!1},t.prototype.CanSkillUpgrade=function(e){var t=FormationConst.GetSkillUpgradeCost(e);return t?Checker.Data(t,!1):!1},t}(BaseSystem);__reflect(FormationModel.prototype,"FormationModel");var FormationModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mActiveMap={},i.mLevelMap={},i.mSoulMap={},i.mSkillMap={},i.mModel=t,i}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e[t.INDEX_LEVEL]=this.GetIndexLevel,e[t.INDEX_SOUL]=this.GetIndexSoul,e[t.INDEX_SKILL]=this.GetIndexSkill,e[t.INDEX_DRUG]=this.GetIndexDrug,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.FORMATION_ACTIVE,MessageDef.FORMATION_UPDATE_INFO,MessageDef.FORMATION_UPDATE_EXP,MessageDef.FORMATION_UPDATE_SOUL_EXP,MessageDef.FORMATION_USE_DRUG,MessageDef.FORMATION_UPDATE_SKILL_INFO]},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.FORMATION_ALL_NOTICE)},t.prototype.GetIndexLevel=function(){this.mLevelMap={};for(var e in GameGlobal.Config.FormationListConfig){var t=parseInt(e);this.mModel.IsMaxLv(t)||this.mModel.HasFormation(t)&&this.mModel.CanFormationUpgrade(t)&&(this.mLevelMap[t]=!0)}for(var e in this.mLevelMap)return!0;return!1},t.prototype.GetIndexSoul=function(){this.mSoulMap={};for(var e in GameGlobal.Config.FormationListConfig){var t=parseInt(e);this.mModel.IsMaxSoulLv(t)||this.mModel.HasFormation(t)&&this.mModel.CanFormationSoulUpgrade(t)&&(this.mSoulMap[t]=!0)}for(var e in this.mSoulMap)return!0;return!1},t.prototype.GetIndexSkill=function(){this.mSkillMap={};for(var e in GameGlobal.Config.FormationListConfig){var t=parseInt(e);if(FormationConst.HasBuffSkill(t)){var i=FormationConst.GetSkillId(t);FormationConst.IsMaxSkillLv(i)||this.mModel.HasFormation(t)&&this.mModel.CanSkillUpgrade(i)&&(this.mSkillMap[t]=!0)}}for(var e in this.mSkillMap)return!0;return!1},t.prototype.GetIndexDrug=function(){var e=GameGlobal.Config.FormationBaseConfig.attreitemid;return this.mDrug=GameGlobal.UserBag.GetCount(e)>0,this.mDrug},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mActiveMap)return!0;return!1},t.prototype.DoActive=function(){this.mActiveMap={};for(var e in GameGlobal.Config.FormationListConfig){var t=parseInt(e);if(!this.mModel.HasFormation(t)){var i=GameGlobal.Config.FormationListConfig[t];GameGlobal.UserBag.GetCount(i.material.id)>=i.material.count&&(this.mActiveMap[t]=!0)}}},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),1==this.mActiveMap[e]},t.prototype.IsRedLevel=function(e){return this.Get(t.INDEX_LEVEL),1==this.mLevelMap[e]},t.prototype.IsRedSoul=function(e){return this.Get(t.INDEX_SOUL),1==this.mSoulMap[e]},t.prototype.IsRedSkill=function(e){return this.Get(t.INDEX_SKILL),1==this.mSkillMap[e]},t.prototype.IsRedDrug=function(e){return this.Get(t.INDEX_DRUG),this.mDrug},t.INDEX_ACT=0,t.INDEX_LEVEL=1,t.INDEX_SOUL=2,t.INDEX_SKILL=3,t.INDEX_DRUG=4,t}(IRedPoint);__reflect(FormationModelRedPoint.prototype,"FormationModelRedPoint");var FormationConst=function(){function e(){}return e.GetSkin=function(e){var t=GameGlobal.Config.FormationListConfig[e];if(!t)return"";var i=t.pid;return AppearanceConfig.GetUIPath(i)},e.GetPower=function(e){var t=GameGlobal.Config.FormationListConfig[e];return t?ItemConfig.CalcAttrScoreValue(t.attrs):0},e.HasBuffSkill=function(e){var t=GameGlobal.Config.FormationListConfig[e];return t?null!=t.buffskill:!1},e.GetSkillId=function(e){var t=GameGlobal.Config.FormationListConfig[e];return t?t.buffskill:0},e.GetFormationName=function(e){var t=GameGlobal.Config.FormationListConfig[e];return t?t.name:""},e.GetFormationUpgradeMaterial=function(e){var t=GameGlobal.Config.FormationListConfig[e];if(t)return t.material},e.GetNextSkillId=function(e){var t=GameGlobal.Config.FormationSkillConfig[e];return t?t.nextid:0},e.IsMaxSkillLv=function(e){return!this.GetNextSkillId(e)},e.GetSkillUpgradeCost=function(e){var t=GameGlobal.Config.FormationSkillConfig[e];if(t)return t.cost},e.GetFormationSoulConfig=function(e,t){return GameGlobal.Config.FormationSoulConfig[e][t-1]},e.GetFormationLevelConfig=function(e,t){var i=GameGlobal.Config.FormationListConfig[e];if(i)return GameGlobal.Config.FormationLvproConfig[i.quality][t-1]},e.GetFormationBaseAttr=function(e,t){var i=GameGlobal.Config.FormationProgressConfig[e][t-1];if(i)return i.attrs},e.GetFormationUpgradeAttr=function(e,t,i){var o=GameGlobal.Config.FormationListConfig[e];return this._GetAddAttr(GameGlobal.Config.FormationLvproConfig,o.quality,t,i)},e.GetFormationSoulAttr=function(e,t,i){return this._GetAddAttr(GameGlobal.Config.FormationSoulConfig,e,t,i)},e.GetFormationAttr=function(e,t,i){var o=this.GetFormationBaseAttr(e,t),n=this.GetFormationUpgradeAttr(e,t,i),a=function(e,t){for(var i=0,o=e;i<o.length;i++){var n=o[i];if(n.type==t)return n.value}return 0},r=new Array;return o.forEach(function(e){var t={type:e.type,value:e.value};r.push(t)}),r.forEach(function(e){e.value=e.value+a(n,e.type)}),r},e._GetAddAttr=function(e,t,i,o){var n=e[t][0],a=new Array;n.attrs.forEach(function(e){var t={type:e.type,value:0};a.push(t)});for(var r=function(e,t){for(var i=0,o=e;i<o.length;i++){var n=o[i];if(n.type==t)return n.value}return 0},s=function(){var n=e[t][l-1],s=n.attrs,c=l==i?o:n.proexp/n.exp;a.forEach(function(e){e.value=e.value+r(s,e.type)*c})},l=1;i>=l;++l)s();return a},e}();__reflect(FormationConst.prototype,"FormationConst");var FormationInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mFormationId=e.no,this.mSkillId=e.skillNo,this.mLevel=e.lv,this.mUpNum=e.upNum,this.mSoulLv=e.soulLv,this.mSoulUpNum=e.soulUpNum},e.prototype.UpdateExp=function(e){this.mLevel=e.lv,this.mUpNum=e.upNum},e.prototype.UpdateSoulExp=function(e){this.mSoulLv=e.soulLv,this.mSoulUpNum=e.soulUpNum},e}();__reflect(FormationInfo.prototype,"FormationInfo");var FormationAllAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FormationAllAttrSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.labLevelAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.FormationModel.GetAllAttr()),this.labSoulAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.FormationModel.GetAllSoulAttr()),this.labDrugAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.FormationModel.GetCurDrugAttr()),this.powerLabel.text=GameGlobal.FormationModel.GetAllPower(),this.showPanel.SetBody(FormationConst.GetSkin(GameGlobal.FormationModel.usedFomationId))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FormationAllAttrPanel.prototype,"FormationAllAttrPanel");var FormationDetailPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FormationDetailSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="阵型详情";var i=e[0],o=GameGlobal.FormationModel;this.powerLabel.text=o.GetPower(i),this.showPanel.SetBody(FormationConst.GetSkin(i)),this.levelAttr.textFlow=AttributeData.GetAttrTabString(o.GetCurAttr(i)),this.medicineAttr.textFlow=AttributeData.GetAttrTabString(o.GetCurDrugAttr()),this.soulAttr.textFlow=AttributeData.GetAttrTabString(o.GetCurSoulAttr(i))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FormationDetailPanel.prototype,"FormationDetailPanel");var FormationDrugPanel=function(e){function t(){var t=e.call(this)||this;return t.useNum=0,t.skinName="RoleRideDrugSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.numLabel.text=this.useNum+"",this.numLabel.inputType=egret.TextFieldInputType.TEL,this.numLabel.restrict="0-9";var e=GameGlobal.Config.FormationBaseConfig.attreitemid;this.numLabel.text=GameGlobal.UserBag.GetCount(e).toString(),this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this._AddClick(this.minBtn,this._OnClick),this._AddClick(this.maxBtn,this._OnClick),this._AddClick(this.btnLessTen,this._OnClick),this._AddClick(this.btnAddTen,this._OnClick),this._AddClick(this.getwayLabel,this._OnClick),this._AddClick(this.useBtn,this._OnClick),UIHelper.SetLinkStyleLabel(this.getwayLabel)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.minBtn:this.ChangeCount(-1);break;case this.maxBtn:this.ChangeCount(1);break;case this.btnLessTen:this.ChangeCount(-10);break;case this.btnAddTen:this.ChangeCount(10);break;case this.getwayLabel:break;case this.useBtn:var t=GameGlobal.Config.FormationBaseConfig.attreitemid,i=GameGlobal.UserBag.GetCount(t);i>0?this.mModel.SendUseDrug(this.useNum):UserTips.ins().showTips("|C:0xff0000&T:属性丹数量不足，无法使用|")}},t.prototype.onTxtChange=function(e){var t=parseInt(this.numLabel.text);this.useNum=0,this.ChangeCount(t)},t.prototype.ChangeCount=function(e){var t=GameGlobal.Config.FormationBaseConfig.attreitemid;this.useNum=MathUtils.Clamp(this.useNum+e,0,GameGlobal.UserBag.GetCount(t)),this.numLabel.text=this.useNum+""},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.FormationBaseConfig.attreitemid,t=GameGlobal.Config.ItemConfig[e];this.item.data=e,this.matLabel.text=t.name;var i=this.mModel.useDrugNum;UIHelper.SetLabelText(this.countLabel,"当前背包拥有：",GameGlobal.UserBag.GetCount(e)+"个"),UIHelper.SetLabelText(this.useCountLabel,"已使用：",i+"个");var o=this.mModel.GetCurDrugAttr();this.attrLabel.textFlow=AttributeData.GetAttrTabString(o)},t.prototype.UpdateDrug=function(){this.useNum=0,this.ChangeCount(0)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0],this.observe(MessageDef.FORMATION_USE_DRUG,this.UpdateContent),this.observe(MessageDef.FORMATION_USE_DRUG,this.UpdateDrug),this.UpdateContent(),this.commonDialog.OnAdded(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FormationDrugPanel.prototype,"FormationDrugPanel");var FormationInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FormationInfoSkin",t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动升级"}),t.mRoleSendCheckData=new RoleSendCheckData(function(e){GameGlobal.FormationModel.SendUpgradeFormation(t.mFormationId,e)},function(){var e=GameGlobal.FormationModel.GetFormationInfo(t.mFormationId),i=FormationConst.GetFormationLevelConfig(t.mFormationId,e.mLevel);if(i){var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]}return[null]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t._AddClick(t.btnSC,t._OnClick),t._AddClick(t.btnFS,t._OnClick),t._AddClick(t.btnUse,t._OnClick),t._AddClick(t.btnAdd,t._OnClick),t._AddClick(t.btnCulture,t._OnClick),t._AddClick(t.skillComp,t._OnClick),t._AddClick(t.powerLabel,t._OnClick),t._AddClick(t.btnActive,t._OnClick),t._AddClick(t.showAllAttr,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.FORMATION_UPDATE_INFO,this.UpdateInfo),this.observe(MessageDef.FORMATION_UPDATE_EXP,this.UpdateExpInfo)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateContent=function(e){this.mFormationId=e;var t=GameGlobal.FormationModel;GameGlobal.Config.FormationListConfig[e];return this.SetSkillInfo(),this.showAllAttr.visible=t.GetAllPower()>0,UIHelper.SetLabelText(this.lbPower,"阵型总战力：",t.GetAllPower()+""),this.petShowPanel.SetBody(FormationConst.GetSkin(e)),this.groupUnGain.visible=!t.HasFormation(e),this.groupUplv.visible=t.HasFormation(e),this.groupLv.visible=t.HasFormation(e),this.btnFS.visible=t.HasFormation(e),this.btnSC.visible=t.HasFormation(e),this.imgUsed.source="ui_zx_bm_shiyongzhong",this.imgUsed.visible=t.IsUsed(e),this.btnUse.visible=t.HasFormation(e)&&!t.IsUsed(e),UIHelper.ShowRedPoint(this.btnSC,GameGlobal.FormationModel.mRedPoint.IsRedDrug(this.mFormationId)),UIHelper.ShowRedPoint(this.btnFS,GameGlobal.FormationModel.mRedPoint.IsRedSoul(this.mFormationId)),UIHelper.ShowRedPoint(this.btnActive,GameGlobal.FormationModel.mRedPoint.IsRedAct(this.mFormationId)),UIHelper.ShowRedPoint(this.skillComp,GameGlobal.FormationModel.mRedPoint.IsRedSkill(this.mFormationId)),t.HasFormation(e)?void this.UpdateExp():void this.SetActiveInfo(e)},t.prototype.UpdateInfo=function(){this.UpdateContent(this.mFormationId)},t.prototype.UpdateExpInfo=function(){GameGlobal.FormationModel.IsMaxLv(this.mFormationId)?this.mRoleAutoSendData.Stop():this.mRoleAutoSendData.Continue(),this.UpdateExp()},t.prototype.UpdateExp=function(){var e=GameGlobal.FormationModel,t=this.mFormationId;this.powerLabel.text=e.GetPower(t);var i=e.GetFormationInfo(t);if(this.lbLev.text=i.mLevel+"级",this.groupDuration.visible=!e.IsMaxLv(t),this.groupMaxLv.visible=e.IsMaxLv(t),!e.IsMaxLv(t)){var o=FormationConst.GetFormationLevelConfig(t,i.mLevel);
this.bar.maximum=o.proexp,this.bar.value=i.mUpNum*o.exp,this.consumeLabel.Set(o.cost)}},t.prototype.SetActiveInfo=function(e){var t=FormationConst.GetFormationUpgradeMaterial(e);if(t){this.needItemView.SetItemId(t.id,t.count);var i=GameGlobal.UserBag.GetCount(t.id)>=t.count;this.btnActive.visible=i,(this.getwayLabel.visible=!i)&&(this.getwayLabel.textFlow=(new egret.HtmlTextParser).parser("<font>获取：</font><a href=\"event:\"><font color='#019704'><u>阵型商店</u></font></a>"))}},t.prototype.SetSkillInfo=function(){this.groupSkill.visible=FormationConst.HasBuffSkill(this.mFormationId),FormationConst.HasBuffSkill(this.mFormationId)&&PetSkillIconItem.SetContent(this.skillComp,GameGlobal.FormationModel.GetSkillId(this.mFormationId),2)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnSC:ViewManager.ins().open(FormationDrugPanel,GameGlobal.FormationModel);break;case this.btnFS:ViewManager.ins().open(FormationSoulPanel,this.mFormationId);break;case this.btnAdd:this._SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle();break;case this.powerLabel:ViewManager.ins().open(FormationDetailPanel,this.mFormationId);break;case this.skillComp:ViewManager.ins().open(FormationSkillPanel,this.mFormationId);break;case this.btnActive:GameGlobal.FormationModel.SendActiveFormation(this.mFormationId);break;case this.btnUse:GameGlobal.FormationModel.SendUseFormation(this.mFormationId);break;case this.showAllAttr:ViewManager.ins().open(FormationAllAttrPanel)}},t.prototype._SendUp=function(){return this.mRoleSendCheckData.SendUp()},t}(BaseView);__reflect(FormationInfoPanel.prototype,"FormationInfoPanel");var FormationSkillPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FormationSkillSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.upBtn,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.title="技能",this.commonDialog.OnAdded(this),this.observe(MessageDef.FORMATION_UPDATE_SKILL_INFO,this.UpdateContent),this.mFormationId=e[0],this.UpdateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){var t=FormationConst.GetSkillUpgradeCost(this.mSkillId);Checker.CheckItem(t.id,t.count,!1)&&GameGlobal.FormationModel.SendUpgradeSkill(this.mFormationId)},t.prototype.UpdateContent=function(){this.mSkillId=GameGlobal.FormationModel.GetSkillId(this.mFormationId),PetSkillIconItem.SetContent(this.skillComp,this.mSkillId,2);var e=PetConst.GetPassSkillName(this.mSkillId),t=GameGlobal.Config.FormationSkillConfig[this.mSkillId];if(t){if(this.skillName.textFlow=TextFlowMaker.generateTextFlow(e+("|C:0x019704&T: Lv."+t.lv+"|")),this.curDesc.text=PetConst.GetPassSkillDesc(this.mSkillId),this.unActiveImg.visible=!1,FormationConst.IsMaxSkillLv(this.mSkillId))return this.groupNextDesc.visible=!1,this.groupMaxLv.visible=!0,void(this.upGroup.visible=!1);var i=FormationConst.GetNextSkillId(this.mSkillId);if(this.nextDesc.text=PetConst.GetPassSkillDesc(i),!GameGlobal.FormationModel.HasFormation(this.mFormationId))return this.unActiveImg.visible=!0,this.groupMaxLv.visible=!1,void(this.upGroup.visible=!1);var o=FormationConst.GetSkillUpgradeCost(this.mSkillId);o&&this.needItemView.SetItemId(o.id,o.count)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FormationSkillPanel.prototype,"FormationSkillPanel",["ICommonWindowTitle"]);var FormationSoulPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FormationSoulSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTitle("阵魂"),this._AddClick(this.btnInjection,this._OnCkick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.FORMATION_UPDATE_SOUL_EXP,this.UpdateExpInfo),this.mFormationId=e[0],this.UpdateContent()},t.prototype._OnCkick=function(e){this._SendUpgrade()},t.prototype._SendUpgrade=function(){var e=GameGlobal.FormationModel,t=e.GetFormationInfo(this.mFormationId),i=t.mSoulLv,o=FormationConst.GetFormationSoulConfig(this.mFormationId,i),n=o.cost;Checker.CheckItem(n.id,n.count,!1)&&GameGlobal.FormationModel.SendUpgradeFormationSoul(this.mFormationId,0)},t.prototype.UpdateExpInfo=function(){this.SetUpgradeInfo(),this.SetPropInfo()},t.prototype.UpdateContent=function(){this.showPanel.SetBody(FormationConst.GetSkin(this.mFormationId)),this.soulName.text=FormationConst.GetFormationName(this.mFormationId)+"阵魂属性",this.UpdateExpInfo()},t.prototype.SetPropInfo=function(){var e=GameGlobal.FormationModel;this.upPropGroup.visible=!e.IsMaxSoulLv(this.mFormationId),this.maxProp.visible=e.IsMaxSoulLv(this.mFormationId);var t=e.GetFormationInfo(this.mFormationId),i=FormationConst.GetFormationSoulAttr(this.mFormationId,t.mSoulLv,t.mSoulUpNum);if(e.IsMaxSoulLv(this.mFormationId))this.maxProp.textFlow=AttributeData.GetAttrTabString(i,"\n\n");else{this.curProp.textFlow=AttributeData.GetAttrTabString(i,"\n\n");var o=FormationConst.GetFormationSoulAttr(this.mFormationId,t.mSoulLv+1,0);this.nextProp.textFlow=AttributeData.GetAttrTabString(o,"\n\n")}},t.prototype.SetUpgradeInfo=function(){var e=GameGlobal.FormationModel;if(this.powerLabel.text=e.GetPower(this.mFormationId),this.groupUpLv.visible=!e.IsMaxSoulLv(this.mFormationId),this.groupMaxLv.visible=e.IsMaxSoulLv(this.mFormationId),!e.IsMaxSoulLv(this.mFormationId)){var t=e.GetFormationInfo(this.mFormationId),i=t.mSoulLv,o=FormationConst.GetFormationSoulConfig(this.mFormationId,i),n=o.cost;this.needItemView.SetItemId(n.id,n.count),this.UpdateExp()}},t.prototype.UpdateExp=function(){var e=GameGlobal.FormationModel,t=e.GetFormationInfo(this.mFormationId),i=t.mSoulLv,o=FormationConst.GetFormationSoulConfig(this.mFormationId,i);this.lbLev.text=i.toString()+"级",this.bar.maximum=o.proexp,this.bar.value=t.mSoulUpNum*o.exp},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FormationSoulPanel.prototype,"FormationSoulPanel",["ICommonWindow"]);var FormationWin=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.mFormationList=[],t.skinName="FormationMainSkin",t.commonWindowBg.SetTitle("阵型"),t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,112),t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_113)},t.prototype.childrenCreated=function(){this.list.itemRenderer=FormationItem,this.mFormationList=CommonUtils.GetArray(GameGlobal.Config.FormationListConfig,"id");var e=GameGlobal.FormationModel,t=function(t){var i=t.id;return e.IsUsed(i)?i-1e5:e.HasFormation(i)?i-1e4:i};this.mFormationList.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mFormationList),this.list.selectedIndex=this.mSelectIndex,this._AddItemClick(this.list,this._OnItemTap)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.FORMATION_UPDATE_INFO,this.UpdateList),this.commonWindowBg.OnAdded(this),this.mListLRBtnCtrl.OnRefresh(),this.UpdateContent()},t.prototype.OnClose=function(){this._CloseFormationView()},t.prototype._OnItemTap=function(e){var t=e.itemIndex;this.mSelectIndex=t,this.UpdateContent()},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t.prototype.UpdateContent=function(){this.UpdateInfoView()},t.prototype.UpdateInfoView=function(){var e=this.mFormationList[this.mSelectIndex].id;this.mFormationInfoPanel||(this.mFormationInfoPanel=new FormationInfoPanel),this.mFormationInfoPanel.parent||(this.group.addChild(this.mFormationInfoPanel),this.mFormationInfoPanel.DoOpen([])),this.mFormationInfoPanel.UpdateContent(e)},t.prototype._CloseFormationView=function(){this.mFormationInfoPanel&&this.mFormationInfoPanel.parent&&(this.mFormationInfoPanel.DoClose(),DisplayUtils.removeFromParent(this.mFormationInfoPanel))},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FormationWin.prototype,"FormationWin",["ICommonWindow"]);var FormationItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data,i=GameGlobal.FormationModel;i.IsUsed(e.id)?this.imgBattle.source="ui_zx_bm_xuanyon":this.imgBattle.source="",t.SetContent(this,e),this.UpdateRedPoint()},t.SetContent=function(e,t){e.lbName.text=t.name,e.lbName.textColor=ItemBase.GetColorByQuality(t.quality),e.lbLev.text="",e.item.SetQuality(t.quality),e.item.setItemImg(t.item),e.item.setGray(!GameGlobal.FormationModel.HasFormation(t.id))},t.prototype.UpdateRedPoint=function(){this.redPoint.visible=GameGlobal.FormationModel.mRedPoint.IsRedAct(this.data.id)||GameGlobal.FormationModel.mRedPoint.IsRedLevel(this.data.id)||GameGlobal.FormationModel.mRedPoint.IsRedSkill(this.data.id)||GameGlobal.FormationModel.mRedPoint.IsRedSoul(this.data.id)||GameGlobal.FormationModel.mRedPoint.IsRedDrug(this.data.id)&&GameGlobal.FormationModel.HasFormation(this.data.id)},t}(eui.ItemRenderer);__reflect(FormationItem.prototype,"FormationItem");var FriendModel=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_friend_follow_data,t.getFriendsData),t.regNetMsg(S2cProtocol.sc_friend_funs_data,t.getFansData),t.regNetMsg(S2cProtocol.sc_friend_black_list,t.getBlackListData),t.regNetMsg(S2cProtocol.sc_friend_follow_nominate_list,t.getReferrerData),t.regNetMsg(S2cProtocol.sc_friend_follow_update,t.getFriendUpdate),t.regNetMsg(S2cProtocol.sc_friend_funs_update,t.getAddFans),t.regNetMsg(S2cProtocol.sc_friend_blacklist_update,t.getBlacklistUpdate),t.regNetMsg(S2cProtocol.sc_friend_gift_receive_info,t.getCoinInfo),t.regNetMsg(S2cProtocol.sc_friend_funs_remove,t.getDelFans),t.FriendData=new FriendData,t}return __extends(t,e),t.prototype.isFriend=function(e){for(var t=0,i=this.FriendData.friendsDate;t<i.length;t++){var o=i[t];if(o.friendInfo.dbid==e)return!0}return!1},t.prototype.isBlacklist=function(e){for(var t=0,i=this.FriendData.blacklistData;t<i.length;t++){var o=i[t];if(o.dbid==e)return!0}return!1},Object.defineProperty(t.prototype,"friendsNum",{get:function(){return this.FriendData.friendsDate.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blacklistNum",{get:function(){return this.FriendData.blacklistData.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fansNum",{get:function(){return this.FriendData.fansData.length},enumerable:!0,configurable:!0}),t.prototype.checkRedPoint=function(){if(this.FriendData.takeCoinNum<GameGlobal.Config.FriendBaseConfig.receivecoin)for(var e=0,t=this.FriendData.fansData;e<t.length;e++){var i=t[e];if(i.gift&&!i.receive)return!0}return!1},t.prototype.arrDispose=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var o=[],n=[],a=0;a<e.length;a++)1==t.length?0==e[a][t[0]]?o.push(e[a]):n.push(e[a]):2==t.length&&(0==e[a][t[0]][t[1]]?o.push(e[a]):n.push(e[a]));return 1==t.length?SortTools.sortMap1(n,!1,t[0]):2==t.length&&SortTools.sortMap1(n,!1,t[0],t[1]),o.concat(n)},t.prototype.arrUpdate=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];for(var n=!1,a=0;a<e.length;a++)if(1==i.length){if(e[a][i[0]]==t[i[0]]){e[a]=t,n=!0;break}}else if(2==i.length&&e[a][i[0]][i[1]]==t[i[0]][i[1]]){e[a]=t,n=!0;break}n||e.push(t)},t.prototype.delItem=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];for(var n=0;n<e.length;n++)if(1==i.length){if(e[n][i[0]]==t){e.splice(n,1);break}}else if(2==i.length&&e[n][i[0]][i[1]]==t){e.splice(n,1);break}MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH)},t.prototype.refreshList=function(e){for(var t=0;t<this.FriendData.friendsDate.length;t++)this.FriendData.friendsDate[t].friendInfo.dbid==e&&this.FriendData.friendsDate.splice(t,1);for(var t=0;t<this.FriendData.fansData.length;t++)this.FriendData.fansData[t].dbid==e&&this.FriendData.fansData.splice(t,1);for(var t=0;t<this.FriendData.referrerDate.length;t++)this.FriendData.referrerDate[t].dbid==e&&this.FriendData.referrerDate.splice(t,1)},t.prototype.sentAllFollow=function(){for(var e=GameGlobal.Config.VipPrivilegeConfig,t=0;t<this.FriendData.referrerDate.length;)this.friendsNum<e[GameGlobal.actorModel.vipLv].friendnum?(this.sendAddFriend(this.FriendData.referrerDate[t].dbid),this.FriendData.referrerDate.splice(t,1)):t++},t.prototype.sentTakeAllCoin=function(){if(this.FriendData.takeCoinNum<GameGlobal.Config.FriendBaseConfig.receivecoin)for(var e=GameGlobal.Config.FriendBaseConfig,t=0;t<this.FriendData.fansData.length;)this.FriendData.takeCoinNum<e.receivecoin&&this.FriendData.fansData[t].gift&&!this.FriendData.fansData[t].receive?(this.sentTakeGive(this.FriendData.fansData[t].funsInfo.dbid),this.FriendData.fansData.splice(t,1)):t++;else GameGlobal.UserTips.showTips("今天接收次数已达上限")},t.prototype.getFriendsData=function(e){this.FriendData.friendsDate=this.arrDispose(e.friendlist,"friendInfo","offlineTime")},t.prototype.getFansData=function(e){SortTools.sortMap1(e.funslist,!1,"gifttime"),this.FriendData.fansData=e.funslist},t.prototype.getBlackListData=function(e){SortTools.sortMap1(e.blacklist,!1,"power"),this.FriendData.blacklistData=e.blacklist},t.prototype.sendReferrer=function(){var e=new Sproto.cs_friend_follow_nominate_request;this.Rpc(C2sProtocol.cs_friend_follow_nominate,e)},t.prototype.getReferrerData=function(e){this.FriendData.referrerDate=this.arrDispose(e.playerinfos,"offlineTime"),MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH)},t.prototype.getFriendUpdate=function(e){this.arrUpdate(this.FriendData.friendsDate,e.friendinfo,"friendInfo","dbid"),this.FriendData.friendsDate=this.arrDispose(this.FriendData.friendsDate,"friendInfo","offlineTime"),MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH)},t.prototype.getAddFans=function(e){this.arrUpdate(this.FriendData.fansData,e.funsinfo,"funsInfo","dbid"),SortTools.sortMap1(this.FriendData.fansData,!1,"gifttime"),MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH),MessageCenter.ins().dispatch(MessageDef.FRIEND_RED_POINT_CHANGE)},t.prototype.getDelFans=function(e){GameGlobal.FriendModel.delItem(GameGlobal.FriendModel.FriendData.fansData,e.dbid,"funsInfo","dbid"),MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH)},t.prototype.getBlacklistUpdate=function(e){this.arrUpdate(this.FriendData.blacklistData,e.blackdata,"dbid"),SortTools.sortMap1(this.FriendData.blacklistData,!1,"power"),this.refreshList(e.blackdata.dbid),MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH)},t.prototype.sentGive=function(e){if(GameGlobal.FriendModel.FriendData.curCoinNum<GameGlobal.Config.FriendBaseConfig.givecoin){var t=new Sproto.cs_friend_gift_friendcoin_request;t.targetid=e,this.Rpc(C2sProtocol.cs_friend_gift_friendcoin,t),GameGlobal.UserTips.showTips("赠送成功")}else GameGlobal.UserTips.showTips("今天赠送次数已用完")},t.prototype.sentTakeGive=function(e){if(this.FriendData.takeCoinNum<GameGlobal.Config.FriendBaseConfig.receivecoin){var t=new Sproto.cs_friend_receive_friendcoin_request;t.targetid=e,this.Rpc(C2sProtocol.cs_friend_receive_friendcoin,t),GameGlobal.UserTips.showTips("接收成功"),MessageCenter.ins().dispatch(MessageDef.FRIEND_RED_POINT_CHANGE)}else GameGlobal.UserTips.showTips("今天接收次数已达上限")},t.prototype.getCoinInfo=function(e){this.FriendData.takeCoinNum=e.receivetime,this.FriendData.curCoinNum=e.gifttime},t.prototype.sentAllGive=function(){if(this.FriendData.curCoinNum<GameGlobal.Config.FriendBaseConfig.givecoin)for(var e=GameGlobal.Config.FriendBaseConfig.givecoin,t=0;t<this.FriendData.friendsDate.length;t++)e-this.FriendData.curCoinNum>0&&(this.FriendData.friendsDate[t].gift||this.sentGive(this.FriendData.friendsDate[t].friendInfo.dbid));else GameGlobal.UserTips.showTips("今天赠送次数已用完")},t.prototype.sendDleFriend=function(e){var t=new Sproto.cs_friend_del_follow_request;t.targetid=e,this.Rpc(C2sProtocol.cs_friend_del_follow,t),GameGlobal.FriendModel.delItem(GameGlobal.FriendModel.FriendData.friendsDate,e,"friendInfo","dbid")},t.prototype.sendAddFriend=function(e){if(GameGlobal.FriendModel.friendsNum<GameGlobal.Config.VipPrivilegeConfig[GameGlobal.actorModel.vipLv].friendnum){var t=new Sproto.cs_friend_add_follow_request;t.targetid=e,this.targetId=e,this.Rpc(C2sProtocol.cs_friend_add_follow,t,this.addSuccess,this)}else GameGlobal.UserTips.showTips("关注列表已满")},t.prototype.addSuccess=function(e){e.ret?(GameGlobal.UserTips.showTips("已关注"),GameGlobal.FriendModel.delItem(GameGlobal.FriendModel.FriendData.referrerDate,this.targetId,"dbid"),GameGlobal.FriendModel.delItem(GameGlobal.FriendModel.FriendData.blacklistData,this.targetId,"dbid"),MessageCenter.ins().dispatch(MessageDef.FRIEND_DATA_REFRESH)):GameGlobal.UserTips.showTips("对方粉丝已满")},t.prototype.sendAddBlacklist=function(e){if(this.blacklistNum<GameGlobal.Config.FriendBaseConfig.blacklist){var t=new Sproto.cs_friend_add_blacklist_request;t.targetid=e,this.Rpc(C2sProtocol.cs_friend_add_blacklist,t)}else GameGlobal.UserTips.showTips("黑名单已达上限，无法拉黑")},t.prototype.sendRemoveBlacklist=function(e){var t=new Sproto.cs_friend_del_blacklist_request;t.targetid=e,this.Rpc(C2sProtocol.cs_friend_del_blacklist,t),GameGlobal.FriendModel.delItem(GameGlobal.FriendModel.FriendData.blacklistData,e,"dbid")},t.MAX_COUNT=6,t}(BaseSystem);__reflect(FriendModel.prototype,"FriendModel");var FriendData=function(){function e(){this.friendsDate=[],this.blacklistData=[],this.referrerDate=[],this.fansData=[],this.curCoinNum=0,this.takeCoinNum=0}return e}();__reflect(FriendData.prototype,"FriendData");var BlacklistPanel=function(e){function t(){var t=e.call(this)||this;return t.curPage=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=FriendItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.FriendModel.FriendData.curState="blacklist",this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.changePage),this.observe(MessageDef.FRIEND_DATA_REFRESH,this.UpdateContent),this.dataProvider=new eui.ArrayCollection(GameGlobal.FriendModel.FriendData.blacklistData),this.list.dataProvider=this.dataProvider,this.pageBtn.setPage(1),this.recoverTouchPos(),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.FriendModel.FriendData.blacklistData.length/FriendModel.MAX_COUNT;this.pageBtn.setMax(Math.ceil(e)),this.curPage>Math.ceil(e)&&this.changePage(Math.ceil(e)),this.dataProvider.replaceAll(GameGlobal.FriendModel.FriendData.blacklistData);var t=GameGlobal.Config.FriendBaseConfig;this.blacklistTxt.text=GameGlobal.FriendModel.blacklistNum+"/"+t.blacklist},t.prototype.changePage=function(e){this.SetPos((e-1)*this.scroller.width),this.curPage=e},t.prototype.SetPos=function(e){var t=this.scroller.$Scroller[8];t.maxScrollPos=this.list.contentWidth,t.throwTo(e)},t.prototype.recoverTouchPos=function(){var e=this.scroller.$Scroller[8];e.maxScrollPos=this.list.contentWidth,e.currentScrollPos=0},t.NAME="黑名单",t}(BaseView);__reflect(BlacklistPanel.prototype,"BlacklistPanel",["ICommonWindowTitle"]);var FansPanel=function(e){function t(){var t=e.call(this)||this;return t.curPage=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=FriendItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.FriendModel.FriendData.curState="fans",this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.changePage),this.observe(MessageDef.FRIEND_DATA_REFRESH,this.UpdateContent),this._AddClick(this.allGiveBtn,this.onClick),this.dataProvider=new eui.ArrayCollection(GameGlobal.FriendModel.FriendData.fansData),this.list.dataProvider=this.dataProvider,this.pageBtn.setPage(1),this.recoverTouchPos(),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.FriendModel.FriendData.fansData.length/FriendModel.MAX_COUNT;this.pageBtn.setMax(Math.ceil(e)),this.curPage>Math.ceil(e)&&this.changePage(Math.ceil(e)),this.dataProvider.replaceAll(GameGlobal.FriendModel.FriendData.fansData),this.dataProvider.length>0?null:this.list.dataProvider=new eui.ArrayCollection([]);var t=GameGlobal.Config.FriendBaseConfig,i=GameGlobal.FriendModel.FriendData;this.giveCountTxt.text=i.takeCoinNum+"/"+t.receivecoin,this.fansCountTxt.text=GameGlobal.FriendModel.fansNum+"/"+t.fanscount,this.allGiveBtn.visible=GameGlobal.FriendModel.FriendData.takeCoinNum<GameGlobal.Config.FriendBaseConfig.receivecoin},t.prototype.changePage=function(e){this.SetPos((e-1)*this.scroller.width),this.curPage=e},t.prototype.SetPos=function(e){var t=this.scroller.$Scroller[8];t.maxScrollPos=this.list.contentWidth,t.throwTo(e)},t.prototype.recoverTouchPos=function(){var e=this.scroller.$Scroller[8];e.maxScrollPos=this.list.contentWidth,e.currentScrollPos=0},t.prototype.onClick=function(e){switch(e.target){case this.allGiveBtn:GameGlobal.FriendModel.sentTakeAllCoin()}},t.NAME="我的粉丝",t}(BaseView);__reflect(FansPanel.prototype,"FansPanel",["ICommonWindowTitle"]);var FriendItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="FriendItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.deleteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtnClick,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this),this.btn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtn0Click,this),this.playerAvatar.addEventListener(egret.TouchEvent.TOUCH_TAP,this.iconClick,this),this.currentState=GameGlobal.FriendModel.FriendData.curState,this.btn0.visible=!1},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t;if(egret.is(this.data,"Sproto.player_whole_data"))t=this.data;else for(var i in this.data)if(egret.is(this.data[i],"Sproto.player_whole_data")){t=this.data[i];break}if(null!=t){this.info=t,this.playerAvatar.face.source=ResDataPath.GetHeadImgName(t.job,t.sex),this.playerAvatar.imgFrame.source=ResDataPath.GetHeadFrameImgName(t.headframe),this.nameTxt.text=t.name,this.lvTxt.text=t.level,this.gangNameTxt.text=t.guildName,this.powerText.text=t.power;var o=DateUtils.format_4(1e3*(GameServer.serverTime-t.offlineTime));this.onLineTxt.textFlow=TextFlowMaker.generateTextFlow(0==t.offlineTime?"在线":"|C:"+Color.Red+"&T:"+o+"在线"),this.vipIcon.setVipLv(t.vip,!0),"friend"==this.currentState&&(this.btn.visible=!this.data.gift),"fans"==this.currentState&&(this.fansChange(),this.data.receive?(this.btn.visible=!1,this.giveTxt.visible=!0):(this.btn.visible=this.data.gift,this.giveTxt.visible=!1))}},t.prototype.onBtnClick=function(){switch(this.currentState){case"friend":GameGlobal.FriendModel.sentGive(this.info.dbid);break;case"fans":GameGlobal.FriendModel.sentTakeGive(this.info.dbid);break;case"blacklist":GameGlobal.FriendModel.sendRemoveBlacklist(this.info.dbid);break;case"referrer":GameGlobal.FriendModel.sendAddFriend(this.info.dbid);break;case"delete":ViewManager.ins().open(FriendTipsPanel,this.info)}},t.prototype.onBtn0Click=function(){GameGlobal.FriendModel.sendAddFriend(this.info.dbid)},t.prototype.iconClick=function(){ViewManager.ins().open(PlayerDetailsPanel,this.info.dbid)},t.prototype.onDeleteBtnClick=function(){ViewManager.ins().open(FriendTipsPanel,this.info)},t.prototype.fansChange=function(){"fans"==this.currentState&&(this.btn0.visible=!GameGlobal.FriendModel.isFriend(this.info.dbid))},t}(eui.ItemRenderer);__reflect(FriendItem.prototype,"FriendItem");var FriendMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FriendMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(FriendsPanel,{skinName:"MyFriendSkin",mContext:this}),TabView.CreateTabViewData(FansPanel,{skinName:"FansSkin",mContext:this}),TabView.CreateTabViewData(BlacklistPanel,{skinName:"FriendBlacklistSkin",mContext:this}),TabView.CreateTabViewData(ReferrerPanel,{skinName:"ReferrerSkin",mContext:this})])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.btnShop,this.tap),e[0]?this.commonWindowBg.OnAdded(this,e[0]):GameGlobal.FriendModel.friendsNum>0?this.commonWindowBg.OnAdded(this,0):this.commonWindowBg.OnAdded(this,3),this.observe(MessageDef.FRIEND_RED_POINT_CHANGE,this.showRedPoint),this.showRedPoint()},t.prototype.OnClose=function(){},t.prototype.tap=function(){ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_YOUQING])},t.prototype.showRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.FriendModel.checkRedPoint())},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FriendMainPanel.prototype,"FriendMainPanel",["ICommonWindow"]);var FriendsPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="好友",t.curPage=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=FriendItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.currentState="normal",GameGlobal.FriendModel.FriendData.curState="friend",this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.changePage),this.observe(MessageDef.FRIEND_DATA_REFRESH,this.UpdateContent),this._AddClick(this.allGiveBtn,this.onClick),this._AddClick(this.deleteBtn,this.onClick),this.pageBtn.setPage(1),this.dataProvider=new eui.ArrayCollection(GameGlobal.FriendModel.FriendData.friendsDate.slice()),this.list.dataProvider=this.dataProvider,this.recoverTouchPos(),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.FriendModel.FriendData.friendsDate.length/FriendModel.MAX_COUNT;if(this.pageBtn.setMax(Math.ceil(e)),this.curPage>Math.ceil(e)&&this.changePage(Math.ceil(e)),"normal"==this.currentState)this.dataProvider.replaceAll(GameGlobal.FriendModel.FriendData.friendsDate.slice()),this.allGiveBtn.visible=GameGlobal.FriendModel.friendsNum>0,this.deleteBtn.visible=GameGlobal.FriendModel.friendsNum>0;else{var t=GameGlobal.FriendModel.FriendData.friendsDate.slice();this.dataProvider.replaceAll(t.reverse())}this.list.dataProvider=this.dataProvider.length>0?this.dataProvider:new eui.ArrayCollection([]);var i=GameGlobal.Config.FriendBaseConfig,o=GameGlobal.FriendModel.FriendData,n=GameGlobal.Config.VipPrivilegeConfig;this.giveCountTxt.text=o.curCoinNum+"/"+i.givecoin,this.friendsTxt.text=GameGlobal.FriendModel.friendsNum+"/"+n[GameGlobal.actorModel.vipLv].friendnum},t.prototype.changePage=function(e){this.SetPos((e-1)*this.scroller.width),this.curPage=e},t.prototype.SetPos=function(e){var t=this.scroller.$Scroller[8];t.maxScrollPos=this.list.contentWidth,t.throwTo(e)},t.prototype.recoverTouchPos=function(){var e=this.scroller.$Scroller[8];e.maxScrollPos=this.list.contentWidth,e.currentScrollPos=0},t.prototype.onClick=function(e){switch(e.target){case this.deleteBtn:this.currentState="delete",GameGlobal.FriendModel.FriendData.curState="delete";var t=GameGlobal.FriendModel.FriendData.friendsDate.slice();this.list.dataProvider=new eui.ArrayCollection(t.reverse()),this.pageBtn.setPage(1),this.recoverTouchPos(),this.UpdateContent();break;case this.allGiveBtn:"delete"==this.currentState?(this.currentState="normal",GameGlobal.FriendModel.FriendData.curState="friend",this.list.dataProvider=new eui.ArrayCollection(GameGlobal.FriendModel.FriendData.friendsDate),this.pageBtn.setPage(1),this.recoverTouchPos(),this.UpdateContent()):GameGlobal.FriendModel.sentAllGive()}},t.NAME="我的关注",t}(BaseView);__reflect(FriendsPanel.prototype,"FriendsPanel",["ICommonWindowTitle"]);var FriendTipsPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.skinName="FriendTipsSkin",this.commonDialog.title="提示"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this._AddClick(this.affirmBtn,this.onClick),this._AddClick(this.cancelBtn,this.onClick),this.data=e[0],this.UpdateContent()},t.prototype.UpdateContent=function(){this.playerAvatar.setItemImg(ResDataPath.GetHeadImgName(this.data.job,this.data.sex)),this.nameTxt.text=this.data.name,this.lvTxt.text=this.data.level,this.gangNameTxt.text=this.data.guildNames,this.vipTxt.visible=this.data.vip>0,this.tipsTxt.text="确认要取消对【"+this.data.name+"】的关注？"},t.prototype.onClick=function(e){switch(e.target){case this.affirmBtn:GameGlobal.FriendModel.sendDleFriend(this.data.dbid),ViewManager.ins().close(t);break;case this.cancelBtn:ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FriendTipsPanel.prototype,"FriendTipsPanel");var ReferrerPanel=function(e){function t(){var t=e.call(this)||this;return t.curPage=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=FriendItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.FriendModel.FriendData.curState="referrer",this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.changePage),this.observe(MessageDef.FRIEND_DATA_REFRESH,this.UpdateContent),GameGlobal.FriendModel.sendReferrer(),this.dataProvider=new eui.ArrayCollection(GameGlobal.FriendModel.FriendData.referrerDate),this.list.dataProvider=this.dataProvider,this._AddClick(this.btn,this.onClick),this.pageBtn.setPage(1),this.recoverTouchPos(),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.FriendModel.FriendData.referrerDate.length/FriendModel.MAX_COUNT;this.pageBtn.setMax(Math.ceil(e)),e&&this.curPage>Math.ceil(e)&&this.changePage(Math.ceil(e)),this.dataProvider.replaceAll(GameGlobal.FriendModel.FriendData.referrerDate),this.list.dataProvider=this.dataProvider.length>0?this.dataProvider:new eui.ArrayCollection([]);var t=GameGlobal.Config.VipPrivilegeConfig;this.friendsTxt.text=GameGlobal.FriendModel.friendsNum+"/"+t[GameGlobal.actorModel.vipLv].friendnum},t.prototype.changePage=function(e){this.SetPos((e-1)*this.scroller.width),this.curPage=e},t.prototype.SetPos=function(e){var t=this.scroller.$Scroller[8];t.maxScrollPos=this.list.contentWidth,t.throwTo(e)},t.prototype.recoverTouchPos=function(){var e=this.scroller.$Scroller[8];e.maxScrollPos=this.list.contentWidth,e.currentScrollPos=0},t.prototype.onClick=function(e){GameGlobal.FriendModel.sentAllFollow()},t.NAME="关注推荐",t}(BaseView);__reflect(ReferrerPanel.prototype,"ReferrerPanel",["ICommonWindowTitle"]);var FuliModel=function(e){function t(){var t=e.call(this)||this;return t.FuliData=new FuliData,t.mRedPoint=new FuliRedPoint(t),t.regNetMsg(S2cProtocol.sc_welfare_info,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_welfare_signin_info,t.getSignInInfo),t.regNetMsg(S2cProtocol.sc_welfare_bonus_add,t._briberyInfo),t.regNetMsg(S2cProtocol.sc_accu_login,t._giveGoldInfo),t.regNetMsg(S2cProtocol.sc_cashCow_info,t._GoldTreeInfo),t}return __extends(t,e),t.prototype.IsRedPoint=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_125)?this.mRedPoint.signShowRedPoint()||this.mRedPoint.lvShowRedPoint()||this.mRedPoint.PracticeShowRedPoint()||this.mRedPoint.GoldShowRedPoint()||this.mRedPoint.IsGoldTree()||this.mRedPoint.IsGodTreeBox():!1},t.prototype.sendSignIn=function(e){if(2==e&&GameGlobal.actorModel.vipLv<GameGlobal.Config.WelfareBaseConfig.viplv)return void GameGlobal.UserTips.showTips("VIP等级不足，请提升VIP等级");if(3==e&&GameGlobal.RechargeModel.dailyRechare<=0)return void WarnWin.show("未充值任意金额，请前往充值",function(){RechargeWin.Open()},this);var t=new Sproto.cs_welfare_signin_req_request;t.rewardType=e,this.Rpc(C2sProtocol.cs_welfare_signin_req,t,this.signInSuccess,this)},t.prototype.signInSuccess=function(e){e.ret&&(GameGlobal.UserTips.showTips("领取成功"),GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_GIFT_SUCCEED))},t.prototype.getSignInInfo=function(e){this.FuliData.dailyId=e.dailyId||1,this.FuliData.nextGiftDay=e.totalDay+1||1,this.FuliData.accDay=e.totalDay||1,this.FuliData.rewardMark=e.rewardMark||0},t.prototype.sendLvGiftBag=function(e){var t=new Sproto.cs_welfare_lv_reward_request;
t.no=e,this.Rpc(C2sProtocol.cs_welfare_lv_reward,t,this.getLvGiftBag,this)},t.prototype.getLvGiftBag=function(e){e.ret&&(GameGlobal.UserTips.showTips("领取成功"),this.FuliData.lvMark=e.lvReward,GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_GIFT_SUCCEED))},t.prototype._DoInitInfo=function(e){this.FuliData.month=e.month,this.FuliData.week=e.week,this.FuliData.firstMonth=e.firstMonth,this.FuliData.foreverFlag=e.forever>0,this.FuliData.lvMark=e.lvReward,this.FuliData.welfareReward=e.welfareReward,this.FuliData.rankData=e.rankData,this.FuliData.avgLv=e.avgLv,GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_GIFT_SUCCEED),(e.month>0||e.week>0||e.forever>0)&&MessageCenter.ins().dispatch(MessageDef.FULI_MONTH_WEEK_CHANGE)},t.prototype._briberyInfo=function(e){this.FuliData.briberyID=e.id,this.FuliData.playerName=e.name,this.FuliData.endtime=e.endtime,0==ViewManager.ins().isShow(BriberyBasePanel)&&ViewManager.ins().open(BriberyBasePanel),GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_HAVEBRIBERY,e)},t.prototype._giveGoldInfo=function(e){this.FuliData.addDayCount=e.count,this.FuliData.recordEdIndex=e.record,GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GIVEGOLD_INFO)},t.prototype._GoldTreeInfo=function(e){this.FuliData.level=e.level,this.FuliData.exp=e.exp,this.FuliData.odds=e.odds,this.FuliData.shake=e.shake,this.FuliData.drawBin=e.drawBin,this.FuliData.amplitude=e.amplitude,GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GOLDTREE_INFO)},t.prototype.SendRedeemCode=function(e){var t=new Sproto.cs_welfare_redeemcode_request;t.redeemcode=e,this.Rpc(C2sProtocol.cs_welfare_redeemcode,t,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_REDEEMCODE,e)},this)},t.prototype.ReceiveItem=function(e){var t=this,i=new Sproto.cs_welfare_reward_request;i.no=e,this.Rpc(C2sProtocol.cs_welfare_reward,i,function(e){e.ret&&(t.FuliData.welfareReward=e.welfareReward,GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_RECEIVEITEMSIGN,e))},this)},t.prototype.isReceive=function(e){return(this.FuliData.welfareReward&Math.pow(2,e))>0},t.prototype.ReceiveBribery=function(e){var t=new Sproto.cs_welfare_bonus_open_request;t.id=e,this.Rpc(C2sProtocol.cs_welfare_bonus_open,t,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.FULI_GET_RECEIVEBRIBERY,e)},this)},t.prototype.GiveGold=function(e){var t=new Sproto.cs_accu_login_get_request;t.index=e,this.Rpc(C2sProtocol.cs_accu_login_get,t)},t.prototype.isReceiveGold=function(e){return(this.FuliData.recordEdIndex&Math.pow(2,e))>0},t.prototype.playGold=function(){var e=new Sproto.cs_cashCow_shake_request;this.Rpc(C2sProtocol.cs_cashCow_shake,e)},t.prototype.playGoldBox=function(e){var t=new Sproto.cs_cashCow_box_rewards_request;t.boxid=e,this.Rpc(C2sProtocol.cs_cashCow_box_rewards,t)},t}(BaseSystem);__reflect(FuliModel.prototype,"FuliModel");var FuliRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mModel=t,i}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_UP_SIGN]=this.signShowRedPoint,e[t.INDEX_UP_LEVEL]=this.lvShowRedPoint,e[t.INDEX_UP_PRA]=this.PracticeShowRedPoint,e[t.INDEX_UP_GOLD]=this.GoldShowRedPoint,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.FULI_GET_GIFT_SUCCEED,MessageDef.FULI_GET_RECEIVEITEMSIGN,MessageDef.FULI_GIVEGOLD_INFO,MessageDef.DAILY_ACTIVE_UPDATE,MessageDef.LEVEL_CHANGE,MessageDef.RECHARGE_DAILY_UPDATE]},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.RP_SIGN_UPDATE)},t.prototype.signShowRedPoint=function(){for(var e=!1,t=UserVip.ins().lv,i=0;4>i&&(GameGlobal.Config.WelfareBaseConfig.viplv>t&&1==i||GameGlobal.RechargeModel.dailyRechare<=0&&2==i||!(e=!BitUtil.Has(this.mModel.FuliData.rewardMark,i)));i++);return e},t.prototype.lvShowRedPoint=function(){var e=!1,t=GameGlobal.Config.LvRewardConfig;for(var i in t)if(GameGlobal.actorModel.level>=t[i].level&&(e=!BitUtil.Has(this.mModel.FuliData.lvMark,Object.keys(t).indexOf(i)+1)))break;return e},t.prototype.PracticeShowRedPoint=function(){if(Deblocking.IsDeblocking(GameGlobal.Config.WelfareBaseConfig.opentype)){var e=!1,t=GameGlobal.DailyModel.baseInfo,i=t.mCurActive,o=GameGlobal.Config.WelfareBaseConfig.score;for(var n in o)if(i>=o[n]&&(e=!this.mModel.isReceive(parseInt(n)+1)))break;return e}return!1},t.prototype.GoldShowRedPoint=function(){var e=!1,t=GameGlobal.Config.PresentGoldConfig;for(var i in t)if(this.mModel.FuliData.addDayCount>=t[i].days&&(e=!this.mModel.isReceiveGold(t[i].id)))break;return e},t.prototype.IsGoldTree=function(){var e=GameGlobal.Config.CashCowBasicConfig[GameGlobal.FuliModel.FuliData.shake+1];return e?0==e.yuanbao:!1},t.prototype.IsGodTreeBox=function(){var e=GameGlobal.FuliModel.FuliData.drawBin;if(e&&e.length){for(var t=0;t<e.length;t++)if(2==e[t]||3==e[t]){var i=GameGlobal.Config.CashCowBoxConfig[t+1];if(!i)continue;var o=i.time;if(o<=GameGlobal.FuliModel.FuliData.shake)return!0}return!1}},t.INDEX_UP_SIGN=0,t.INDEX_UP_LEVEL=1,t.INDEX_UP_PRA=2,t.INDEX_UP_GOLD=3,t}(IRedPoint);__reflect(FuliRedPoint.prototype,"FuliRedPoint");var MoneyTreeModel=function(e){function t(){var t=e.call(this)||this;return t.isOpen=[],t.playNum=0,t.boxOn=0,t.addCoefficient=1,t.exp=0,t.boxInfo=0,t.mRechargeDay=0,t.regNetMsg(S2cProtocol.sc_money_tree_info,t.doMoneyTreeInfo),t.regNetMsg(S2cProtocol.sc_money_tree_play_info,t.doPalyBack),t.regNetMsg(S2cProtocol.sc_money_tree_reward_info,t.doGetRewardBack),t}return __extends(t,e),t.prototype.sendPlayYaoYao=function(){this.Rpc(C2sProtocol.cs_money_tree_play)},t.prototype.sendGetCaseReward=function(e){var t=new Sproto.cs_money_tree_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_money_tree_reward,t)},t.prototype.doMoneyTreeInfo=function(e){this.playNum=e.playNum,this.boxOn=e.boxOn,this.addCoefficient=e.addCoefficient,this.exp=e.exp,this.boxInfo=e.boxInfo,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_INFO_CHANGE)},t.prototype.doPalyBack=function(e){this.playNum=e.playNum,this.boxOn=e.boxOn,this.addCoefficient=e.addCoefficient,this.exp=e.exp,this.baoji=e.baoji,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_INFO_CHANGE,!1,this.baoji)},t.prototype.doGetRewardBack=function(e){this.boxInfo=e.boxInfo,GameGlobal.MessageCenter.dispatch(MessageDef.MONEY_INFO_CHANGE)},t.ins=function(){return e.ins.call(this)},t.prototype.getOrderByIndex=function(e){void 0===e&&(e=0);var t=this.boxInfo>>e&1;return t},t.prototype.getNowCoefficientinfo=function(e){void 0===e&&(e=0);var t=GameGlobal.Config.CashCowAmplitudeConfig;for(var i in t)if(t[i].level==this.addCoefficient+e)return t[i];return null},Object.defineProperty(t.prototype,"maxNum",{get:function(){return this.checkCashCowBasicLenght(UserVip.MAX_LV)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cruMaxNum",{get:function(){return this.checkCashCowBasicLenght()},enumerable:!0,configurable:!0}),t.prototype.getIndexCost=function(){var e=GameGlobal.Config.CashCowBasicConfig;for(var t in e)if(e[t].time==this.boxOn+1)return e[t];return null},t.prototype.getBoxInfoByIndex=function(e){var t=GameGlobal.Config.CashCowBoxConfig;for(var i in t)if(t[i].index==e)return t[i];return null},t.prototype.checkCashCowBasicLenght=function(e){void 0===e&&(e=0),0==e&&(e=GameGlobal.actorModel.vipLv);var t=GameGlobal.Config.CashCowLimitConfig;for(var i in t)if(t[i].vip==e)return t[i].maxTime;return 0},t.prototype.checkBoxIsCanget=function(e){var t=this.getBoxInfoByIndex(e);return t.time<=this.playNum&&this.getOrderByIndex(e-1)<=0?!0:!1},t.prototype.isHaveReward=function(){if(GameServer.serverOpenDay<2)return!1;for(var e=1;4>e;e++)if(this.checkBoxIsCanget(e))return!0;return this.HasFreeCountForMoneyTree()},t.GetTodayRecharge=function(){return 0},t.prototype.HasFreeCountForMoneyTree=function(){var e=t.ins().getIndexCost(),i=0==e.yuanbao?!0:!1;return i},t.CheckOpen=function(e){return void 0===e&&(e=!1),!0},t}(BaseSystem);__reflect(MoneyTreeModel.prototype,"MoneyTreeModel");var FuliData=function(){function e(){this.accDay=1,this.nextGiftDay=1,this.dailyId=1,this.rewardMark=1,this.lvMark=1}return e.prototype.IsMonth=function(){return this.month?!0:!1},e}();__reflect(FuliData.prototype,"FuliData");var DisplayUtils=function(){function e(){}return e.removeFromParent=function(e){e&&null!=e.parent&&e.parent.removeChild(e)},e.drawCir=function(e,t,i,o){return null==e&&(e=new egret.Shape),e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(0,0),e.graphics.lineTo(t,0),e.graphics.drawArc(0,0,t,0,i*Math.PI/180,o),e.graphics.lineTo(0,0),e.graphics.endFill(),e},e.drawLine=function(e,t,i,o,n,a,r){return null==e&&(e=new egret.Shape),e.graphics.clear(),e.graphics.lineStyle(a,r),e.graphics.moveTo(t,i),e.graphics.lineTo(o,n),e.graphics.endFill(),e},e.shakeIt=function(t,i,o,n,a){if(void 0===n&&(n=1),void 0===a&&(a=null),null==a&&(a=e.EMPTY_FUNC),t&&t.$stage&&n>=1&&a()){var r=e.shakingList[t.hashCode];if(!r){e.shakingList[t.hashCode]=!0;var s=[{anchorOffsetX:0,anchorOffsetY:-i},{anchorOffsetX:-i,anchorOffsetY:0},{anchorOffsetX:i,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:i},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var l=o/5;egret.Tween.get(t).to(s[0],l).to(s[1],l).to(s[2],l).to(s[3],l).to(s[4],l).call(function(){delete e.shakingList[t.hashCode],e.shakeIt(t,i,o,--n)},this)}}},e.prototype.flashingObj=function(e,t,i){void 0===i&&(i=300);var o=function(){if(t){e.visible=!0;var n=1==e.alpha?0:1;egret.Tween.removeTweens(e),egret.Tween.get(e).to({alpha:n},i).call(o)}else egret.Tween.removeTweens(e),e.alpha=1,e.visible=!1};o()},e.SetParent=function(t,i){if(t&&i){var o=e.POINT,n=t.parent;n?(n.localToGlobal(t.x,t.y,o),n.removeChild(t)):(o.x=t.x,o.y=t.y),i.globalToLocal(o.x,o.y,o),i.addChild(t),null!=t.bottom?(t.x=o.x,t.bottom=i.height-o.y-t.height):(t.x=o.x,t.y=o.y)}},e.ChangeParent=function(e,t){e&&t&&(e.parent&&e.parent.removeChild(e),t.addChild(e))},e.GetGlobalPos=function(e,t){e&&(e.parent?e.parent.localToGlobal(e.x,e.y,t):(t.x=e.x,t.y=e.y))},e.ConvertPos=function(e,t){if(e&&t){var i=egret.$TempPoint;return this.GetGlobalPos(e,i),t.globalToLocal(i.x,i.y,i),i}},e.shakingList={},e.EMPTY_FUNC=function(){return!0},e.POINT=new egret.Point,e}();__reflect(DisplayUtils.prototype,"DisplayUtils");var RechargeBtnItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.icon.source=this.data.icon,this.UpdateRedPoint()},t.prototype.UpdateRedPoint=function(){if(null!=this.$stage&&null!=this.redPoint){var e=!1;this.data.cls&&this.data.cls&&this.data.cls.CheckRedPoint&&(e=this.data.cls.CheckRedPoint(this.data.id)),this.redPoint.visible=e}},t}(eui.ItemRenderer);__reflect(RechargeBtnItem.prototype,"RechargeBtnItem");var FuliBtnItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.icon.source=this.data.icon,this.UpdateRedPoint()},t.prototype.UpdateRedPoint=function(){null!=this.$stage&&null!=this.redPoint&&(this.redPoint.visible=this.data.__redPoint__)},t}(eui.ItemRenderer);__reflect(FuliBtnItem.prototype,"FuliBtnItem");var FuliFAQPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliFAQSkin",t}return __extends(t,e),t.CheckRedPoint=function(){return!1},t}(BaseView);__reflect(FuliFAQPanel.prototype,"FuliFAQPanel");var GetGameUtil=function(){function e(){this["true"]=!0}return e.prototype.Init=function(){this.initHttp()},e.prototype.initHttp=function(){location.hostname},e.prototype.onGetComplete=function(e){var t=e.currentTarget,i=JSON.parse(t.response);this["true"]=i["true"]},e}();__reflect(GetGameUtil.prototype,"GetGameUtil");var __ref_field__=DeviceUtils,KeyboardUtils=function(e){function t(){var t=e.call(this)||this;if(t.key_ups=new Array,t.key_downs=new Array,DeviceUtils.IsHtml5){var i=t;document.addEventListener("keyup",function(e){for(var t=0,o=i.key_ups.length;o>t;t++){var n=i.key_ups[t][0],a=i.key_ups[t][1];a?n.call(a,e.keyCode):n(e.keyCode)}}),document.addEventListener("keydown",function(e){for(var t=0,o=i.key_downs.length;o>t;t++){var n=i.key_downs[t][0],a=i.key_downs[t][1];a?n.call(a,e.keyCode):n(e.keyCode)}})}return t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addKeyUp=function(e,t){this.key_ups.push([e,t])},t.prototype.addKeyDown=function(e,t){this.key_downs.push([e,t])},t.prototype.removeKeyUp=function(e,t){for(var i=0;i<this.key_ups.length;i++)this.key_ups[i][0]==e&&this.key_ups[i][1]==t&&(this.key_ups.splice(i,1),i--)},t.prototype.removeKeyDown=function(e,t){for(var i=0;i<this.key_downs.length;i++)this.key_downs[i][0]==e&&this.key_downs[i][1]==t&&(this.key_downs.splice(i,1),i--)},t}(BaseClass);__reflect(KeyboardUtils.prototype,"KeyboardUtils");var FuliGoldTreeItemPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliGoldTreeItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.okBtn,this._OnClick),this.Tab_CashCowBoxConfig=GameGlobal.Config.CashCowBoxConfig,this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(e,t){this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="金币宝箱",this.describeLabel2.visible=!1;var i=this.Tab_CashCowBoxConfig[e+1].box;this.Tab_CashCowBoxConfig[e+1].time;this.describeLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>今日使用摇钱树</a><a color=0x00AD00>"+t+"次</a><a color=0x6E330B>,可额外获得:</a>"),0>=t&&(this.describeLabel.visible=!1),4==GameGlobal.FuliModel.FuliData.drawBin[2]&&(this.describeLabel2.visible=!0),this.itemList.dataProvider=new eui.ArrayCollection(i)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.okBtn:ViewManager.ins().close(t)}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FuliGoldTreeItemPanel.prototype,"FuliGoldTreeItemPanel");var LocationProperty=function(){function e(){}return e.init=function(){this.urlParam={};var e=new RegExp("(.*?)=(.*)"),t=window.location.search;if(t){var i=t.indexOf("?");if(-1!=i)for(var o=t.slice(i+1).split("&"),n=0;n<o.length;n++){var a=o[n].match(e);a&&(this.urlParam[a[1]]=a[2])}}},e.prototype.getPara=function(e,t){if(egret.Capabilities.runtimeType==egret.MainContext.RUNTIME_NATIVE)return null;var i=t||location.href,o=i.indexOf("?");if(-1!=o){var n="&"+i.slice(o+1),a=new RegExp("&"+e+"=.*?(?:&|$)"),r=a.exec(n);if(r){var s=r[0];return s.split("&")[1].split("=")[1]}}return null},e.prototype.hasProperty=function(e,t){var i=t||location.href,o="&"+i.split("?")[1];return-1!=o.indexOf("&"+e+"=")},e.VerPlat=function(){return window.__CONFIG__.__GAME_ID__||999999},e.UploadUserData=function(){return null==this.m_UploadUserData&&(this.m_UploadUserData=window.UPLOAD_USER_DATA?!0:!1),this.m_UploadUserData},e.Reload=function(){window.ReloadFunc?window.ReloadFunc():location.reload()},e.HasClientConfig=function(e){return BitUtil.Has(window.__CONFIG__.__CLIENT_CONFIG__||0,e)},e.NotGuideRaid=function(){return this.HasClientConfig(0)},e.NotCustionServer=function(){return this.HasClientConfig(2)},e.GetRechargeId=function(){return window.__CONFIG__.__RECHARGE_ID__||1},e.NotRechargeGood=function(){try{var e=window.__CONFIG__.__NOT_RECHARGE_GOOD__;if(e){if("function"==typeof e)return e();console.error("__NOT_RECHARGE_GOOD__ not function !!!")}}catch(t){console.error(t)}return!1},e.m_UploadUserData=null,e}();__reflect(LocationProperty.prototype,"LocationProperty");var FuliGoldTreeVipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="FuliGoldTreeVIPCountSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.okBtn,this._OnClick),this._AddClick(this.goBtn,this._OnClick)},t.prototype.OnOpen=function(e){this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="提 示",this.describeLabel.textFlow=(new egret.HtmlTextParser).parser(e)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.okBtn:ViewManager.ins().close(t);break;case this.goBtn:ViewManager.ins().close(t),ViewManager.ins().open(RechargeWin)}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FuliGoldTreeVipPanel.prototype,"FuliGoldTreeVipPanel");var MathUtils=function(){function e(){}return e.getAngle=function(e){return 180*e/Math.PI},e.getRadian=function(e){return e/180*Math.PI},e.getRadian2=function(e,t,i,o){var n=i-e,a=o-t;return Math.atan2(a,n)},e.getDistance=function(e,t,i,o){var n=i-e,a=o-t,r=n*n+a*a;return Math.sqrt(r)},e.GetDisSqrt=function(e,t,i,o){var n=i-e,a=o-t;return n*n+a*a},e.GetDisSqrt2=function(e,t){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o},e.getDirMove=function(e,t,i){return i=i||new egret.Point,i.x=Math.cos(e*Math.PI/180)*t,i.y=Math.sin(e*Math.PI/180)*t,i},e.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var i=t-e;return e+Math.random()*i},e.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},e.RandomArrayData=function(e,t){var i=e.length;if(t>=i)return e;for(var o=[],n=0;t>n;n++){var a=Math.floor(Math.random()*i)%i;--i,o[n]=e[a],e[a]=e[i]}return o},e.RandomArr=function(e,t,i){var o=t-e+1;if(e>t||i>o)return[];for(var n=[],a=e;e+o>a;a++)n[a-e]=a;return this.RandomArrayData(n,i)},e.Clamp=function(e,t,i){return t>e?t:e>i?i:e},e.GetRandomSign=function(){return this.RAN_SIGN[e.limitInteger(0,1)]},e.Normalize=function(e,t,i){var o=Math.sqrt(e*e+t*t);o>99e-7?(i.x=e/o,i.y=t/o):(i.x=0,i.y=0)},e.Lerp=function(e,t,i,o,n,a){n>1?n=1:0>n&&(n=0),a.x=e+(i-e)*n,a.y=t+(o-t)*n},e.VectorMagnitude=function(e,t,i,o){this.Normalize(e,t,this.TEMP_POS),o.x=Math.round(this.TEMP_POS.x*i),o.y=Math.round(this.TEMP_POS.y*i)},e.VectorExtension=function(e,t,i,o,n,a){this.VectorMagnitude(i-e,o-t,n,a),a.x+=i,a.y+=o},e.RAN_SIGN=[-1,1],e.TEMP_POS=new egret.Point,e}();__reflect(MathUtils.prototype,"MathUtils");var md5=function(){function e(){}return e.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},e.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var o=Array(16),n=Array(16),a=0;16>a;a++)o[a]=909522486^i[a],n[a]=1549556828^i[a];var r=this.binl_md5(o.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(n.concat(r),640))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",a=0;a<e.length;a++)i=e.charCodeAt(a),n+=o.charAt(i>>>4&15)+o.charAt(15&i);return n},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",n=e.length,a=0;n>a;a+=3)for(var r=e.charCodeAt(a)<<16|(n>a+1?e.charCodeAt(a+1)<<8:0)|(n>a+2?e.charCodeAt(a+2):0),s=0;4>s;s++)o+=8*a+6*s>8*e.length?this.b64pad:i.charAt(r>>>6*(3-s)&63);return o},e.rstr2any=function(e,t){var i,o,n,a,r,s=t.length,l=Array(Math.ceil(e.length/2));for(i=0;i<l.length;i++)l[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),u=Array(c);for(o=0;c>o;o++){for(r=Array(),a=0,i=0;i<l.length;i++)a=(a<<16)+l[i],n=Math.floor(a/s),a-=n*s,(r.length>0||n>0)&&(r[r.length]=n);u[o]=a,l=r}var p="";for(i=u.length-1;i>=0;i--)p+=t.charAt(u[i]);return p},e.str2rstr_utf8=function(e){for(var t,i,o="",n=-1;++n<e.length;)t=e.charCodeAt(n),i=n+1<e.length?e.charCodeAt(n+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),n++),127>=t?o+=String.fromCharCode(t):2047>=t?o+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?o+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(o+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return o},e.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},e.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},e.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},e.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,o=-271733879,n=-1732584194,a=271733878,r=0;r<e.length;r+=16){var s=i,l=o,c=n,u=a;i=this.md5_ff(i,o,n,a,e[r+0],7,-680876936),a=this.md5_ff(a,i,o,n,e[r+1],12,-389564586),n=this.md5_ff(n,a,i,o,e[r+2],17,606105819),o=this.md5_ff(o,n,a,i,e[r+3],22,-1044525330),i=this.md5_ff(i,o,n,a,e[r+4],7,-176418897),a=this.md5_ff(a,i,o,n,e[r+5],12,1200080426),n=this.md5_ff(n,a,i,o,e[r+6],17,-1473231341),o=this.md5_ff(o,n,a,i,e[r+7],22,-45705983),i=this.md5_ff(i,o,n,a,e[r+8],7,1770035416),a=this.md5_ff(a,i,o,n,e[r+9],12,-1958414417),n=this.md5_ff(n,a,i,o,e[r+10],17,-42063),o=this.md5_ff(o,n,a,i,e[r+11],22,-1990404162),i=this.md5_ff(i,o,n,a,e[r+12],7,1804603682),a=this.md5_ff(a,i,o,n,e[r+13],12,-40341101),n=this.md5_ff(n,a,i,o,e[r+14],17,-1502002290),o=this.md5_ff(o,n,a,i,e[r+15],22,1236535329),i=this.md5_gg(i,o,n,a,e[r+1],5,-165796510),a=this.md5_gg(a,i,o,n,e[r+6],9,-1069501632),n=this.md5_gg(n,a,i,o,e[r+11],14,643717713),o=this.md5_gg(o,n,a,i,e[r+0],20,-373897302),i=this.md5_gg(i,o,n,a,e[r+5],5,-701558691),a=this.md5_gg(a,i,o,n,e[r+10],9,38016083),n=this.md5_gg(n,a,i,o,e[r+15],14,-660478335),o=this.md5_gg(o,n,a,i,e[r+4],20,-405537848),i=this.md5_gg(i,o,n,a,e[r+9],5,568446438),a=this.md5_gg(a,i,o,n,e[r+14],9,-1019803690),n=this.md5_gg(n,a,i,o,e[r+3],14,-187363961),o=this.md5_gg(o,n,a,i,e[r+8],20,1163531501),i=this.md5_gg(i,o,n,a,e[r+13],5,-1444681467),a=this.md5_gg(a,i,o,n,e[r+2],9,-51403784),n=this.md5_gg(n,a,i,o,e[r+7],14,1735328473),o=this.md5_gg(o,n,a,i,e[r+12],20,-1926607734),i=this.md5_hh(i,o,n,a,e[r+5],4,-378558),a=this.md5_hh(a,i,o,n,e[r+8],11,-2022574463),n=this.md5_hh(n,a,i,o,e[r+11],16,1839030562),o=this.md5_hh(o,n,a,i,e[r+14],23,-35309556),i=this.md5_hh(i,o,n,a,e[r+1],4,-1530992060),a=this.md5_hh(a,i,o,n,e[r+4],11,1272893353),n=this.md5_hh(n,a,i,o,e[r+7],16,-155497632),o=this.md5_hh(o,n,a,i,e[r+10],23,-1094730640),i=this.md5_hh(i,o,n,a,e[r+13],4,681279174),a=this.md5_hh(a,i,o,n,e[r+0],11,-358537222),n=this.md5_hh(n,a,i,o,e[r+3],16,-722521979),o=this.md5_hh(o,n,a,i,e[r+6],23,76029189),i=this.md5_hh(i,o,n,a,e[r+9],4,-640364487),a=this.md5_hh(a,i,o,n,e[r+12],11,-421815835),n=this.md5_hh(n,a,i,o,e[r+15],16,530742520),o=this.md5_hh(o,n,a,i,e[r+2],23,-995338651),i=this.md5_ii(i,o,n,a,e[r+0],6,-198630844),a=this.md5_ii(a,i,o,n,e[r+7],10,1126891415),n=this.md5_ii(n,a,i,o,e[r+14],15,-1416354905),o=this.md5_ii(o,n,a,i,e[r+5],21,-57434055),i=this.md5_ii(i,o,n,a,e[r+12],6,1700485571),a=this.md5_ii(a,i,o,n,e[r+3],10,-1894986606),n=this.md5_ii(n,a,i,o,e[r+10],15,-1051523),o=this.md5_ii(o,n,a,i,e[r+1],21,-2054922799),i=this.md5_ii(i,o,n,a,e[r+8],6,1873313359),a=this.md5_ii(a,i,o,n,e[r+15],10,-30611744),n=this.md5_ii(n,a,i,o,e[r+6],15,-1560198380),o=this.md5_ii(o,n,a,i,e[r+13],21,1309151649),i=this.md5_ii(i,o,n,a,e[r+4],6,-145523070),a=this.md5_ii(a,i,o,n,e[r+11],10,-1120210379),n=this.md5_ii(n,a,i,o,e[r+2],15,718787259),o=this.md5_ii(o,n,a,i,e[r+9],21,-343485551),i=this.safe_add(i,s),o=this.safe_add(o,l),n=this.safe_add(n,c),a=this.safe_add(a,u)}return[i,o,n,a]},e.md5_cmn=function(e,t,i,o,n,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(o,a)),n),i)},e.md5_ff=function(e,t,i,o,n,a,r){return this.md5_cmn(t&i|~t&o,e,t,n,a,r)},e.md5_gg=function(e,t,i,o,n,a,r){return this.md5_cmn(t&o|i&~o,e,t,n,a,r)},e.md5_hh=function(e,t,i,o,n,a,r){return this.md5_cmn(t^i^o,e,t,n,a,r)},e.md5_ii=function(e,t,i,o,n,a,r){return this.md5_cmn(i^(t|~o),e,t,n,a,r)},e.safe_add=function(e,t){var i=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(i>>16);return o<<16|65535&i},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(md5.prototype,"md5");var ObjectPool=function(){function e(){this._objs=new Array}return e.GetColorMat=function(){var e=this.COLOR_MAT.pop();return e||(e=[new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0])]),e},e.SetColorMat=function(e){this.COLOR_MAT.push(e)},e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e._content[t]||(e._content[t]=[]);var n=e._content[t];if(n.length){var a=n.pop();return a}var r=egret.getDefinitionByName(t),s=i.length,l=void 0;return 0==s?l=new r:1==s?l=new r(i[0]):2==s?l=new r(i[0],i[1]):3==s?l=new r(i[0],i[1],i[2]):4==s?l=new r(i[0],i[1],i[2],i[3]):5==s&&(l=new r(i[0],i[1],i[2],i[3],i[4])),l.ObjectPoolKey=t,l},e.popWithExtraKey=function(t,i){e._content[t]||(e._content[t]=[]);var o,n=e._content[t];if(n.length)for(var a=0;a<n.length;a++)if(n[a].extraKey==i){o=n[a],n.splice(a,1);break}if(!o){var r=egret.getDefinitionByName(t);o=new r(i),o.extraKey=i,o.ObjectPoolKey=t}return o},e.push=function(t){if(null==t)return!1;var i=t.ObjectPoolKey;return!e._content[i]||e._content[i].indexOf(t)>-1?!1:(e._content[i].push(t),!0)},e.clear=function(){e._content={}},e.clearClass=function(t,i){void 0===i&&(i=null);var o=e._content[t];if(null!=o){for(;o&&o.length;){var n=o.pop();i&&n[i](),n=null}e._content[t]=null,delete e._content[t]}},e.dealFunc=function(t,i){var o=e._content[t];if(null!=o){var n=0,a=o.length;for(n;a>n;n++)o[n][i]()}},e.COLOR_MAT=[],e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._groupIndex=0,t._configs=new Array,t._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,i,o){this._groups[e]=[t,i,o],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,i,o,n){RES.createGroup(e,t,!0),this.loadGroup(e,i,o,n)},t.prototype.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var i="pilferer_"+e;t||(t=[e]),RES.createGroup(i,t,!0),RES.loadGroup(i,-1)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][0],o=this._groups[t][2];null!=i&&i.call(o),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var i=this._groups[t][1],o=this._groups[t][2];null!=i&&i.call(o,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(e){console.log(e.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(e)},t.prototype.loadResource=function(e,t,i,o,n){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=null);var a=e.concat(t),r="loadGroup"+this._groupIndex++;RES.createGroup(r,a,!0),this._groups[r]=[i,o,n],RES.loadGroup(r)},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var ResVersionManager=function(e){function t(){var t=e.call(this)||this;return t.tempDict={},t.__base_ver__=1,t.resVersionData=window.verData,t.__base_ver__=t.resVersionData.__base_ver__||1,t.res_loadByVersion(),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._GetVer=function(e){if(null==e||0==e.length||null==this.resVersionData)return 1;var t=this.tempDict[e];if(null==t){for(var i=e.split("/"),o=this.resVersionData,n=0,a=i;n<a.length;n++){var r=a[n];if(o=o[r],null==o)break}t=null==o||"number"!=typeof o?this.__base_ver__:o,this.tempDict[e]=t}return t},t.prototype.res_loadByVersion=function(){var e=this,t=LocationProperty.VerPlat();if(window.__LOCAL_RES__){if(1==window.__LOCAL_RES__){var i=WindowData._GetResAddr();RES.web.Html5VersionController.prototype.getVirtualUrl=function(e){return i+e}}}else{var o=(this.resVersionData,WindowData._GetResAddr());RES.web.Html5VersionController.prototype.getVirtualUrl=function(i){if(-1==i.indexOf("http")){var n=1;if(-1!=i.indexOf("resource/assets/map/")){var a="resource/assets/map/"+i.split("/")[3]+"/small.jpg";n=e._GetVer(a)}else n=e._GetVer(i);if(t){var r=i.split(".");i=""+o+n+"/"+r[0]+"_"+t+"_"+n+"."+r.slice(1).join(".")}else i=o+n+"/"+i}return i}}},t}(BaseClass);__reflect(ResVersionManager.prototype,"ResVersionManager");var FuliWeeklyCardPanel=function(e){function t(){var t=e.call(this)||this;return t.labArr=[],t.skinName="FuliWeeklyCardSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tab=GameGlobal.Config.WelfareBaseConfig,this.labArr=[this.lab0,this.lab1,this.lab2,this.lab3],this._AddClick(this.buyBtn,this._OnClick),this.observe(MessageDef.FULI_MONTH_WEEK_CHANGE,this.updateBtnTOLabel)},t.prototype.OnOpen=function(){for(var e=0;4>e;e++){var t="";t=2>e?this.tab["tips0"+(e+8)]:this.tab["tips"+(e+8)],this.labArr[e].textFlow=TextFlowMaker.generateTextFlow(t),this.labArr[e].parent.visible=""!=this.labArr[e].text}var i=GameGlobal.FuliModel.FuliData.week;this.dayLabel.textFlow=(new egret.HtmlTextParser).parser("<font>剩余有效期<a color=0x019704>"+i+"</a>天</font>"),void 0!=i&&null!=i&&(0==i?(this.buyBtn.visible=!0,this.dayLabel.visible=!1):(this.buyBtn.visible=!1,this.dayLabel.visible=!0))},t.prototype.UpdateContent=function(){},t.prototype.updateBtnTOLabel=function(){var e=GameGlobal.FuliModel.FuliData.week;e>0&&(this.buyBtn.visible=!1,this.dayLabel.visible=!0,this.dayLabel.textFlow=(new egret.HtmlTextParser).parser("剩余有效期<a color=0x019704>"+e+"天</a>"))},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.buyBtn:RechargeWin.OpenMonthCard()}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(FuliWeeklyCardPanel.prototype,"FuliWeeklyCardPanel");var FuliWin=function(e){function t(){var i=e.call(this)||this;i.selectBtnType=0,i.mWList=[],i.index=0,i.skinName="FuliMainSkin",i.mListLRBtnCtrl=new ListLRBtnCtrl(i.list,i.leftBtn,i.rightBtn,130);var o=GameGlobal.Config.LvRewardConfig,n=!0;for(var a in o)if(n=(GameGlobal.FuliModel.FuliData.lvMark&1<<o[a].id)<1)break;var r=i.mWList=t.WelfareIcon.slice();if(!n)for(var s=0;s<r.length;s++)if(r[s].cls==FuliLvGiftBagPanel){r.splice(s,1);break}if(!Deblocking.Check(GameGlobal.Config.WelfareBaseConfig.opentype,!0))for(var s=0;s<r.length;s++)if(r[s].cls==FuliPracticePanel){r.splice(s,1);
break}for(var l=[],c=0,u=r;c<u.length;c++){var p=u[c];l.push(TabView.CreateTabViewData(p.cls))}return i.tabEuiView.tabChildren=l,i.list.itemRenderer=FuliBtnItem,i.list.dataProvider=new eui.ArrayCollection(r),i._AddItemClick(i.list,i.OnClickMenu),i}return __extends(t,e),t.prototype.OnClickMenu=function(e){if(this.tabEuiView.GetElementCls(e.itemIndex)==FuliPracticePanel){var t=GameGlobal.Config.WelfareBaseConfig.opentype;1==Deblocking.Check(t)&&(this.index=e.itemIndex,this.tabEuiView.selectedIndex=this.index)}else this.index=e.itemIndex,this.tabEuiView.selectedIndex=this.index},t.prototype.OnOpen=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.observe(MessageDef.RP_SIGN_UPDATE,this.UpdateListRedPoint),this.observe(MessageDef.FULI_GOLDTREE_INFO,this.UpdateListRedPoint),this.selectBtnType=e[0]||0;var o=0;if(this.selectBtnType)for(var n=0,a=0,r=t.WelfareIcon;a<r.length;a++){var s=r[a];if(s.type==this.selectBtnType){o=n;break}++n}this.tabEuiView.selectedIndex=o,this.list.selectedIndex=o,this.mCommonWindowBg.OnAdded(this),this.UpdateListRedPoint()},t.prototype.OnClose=function(){this.tabEuiView.CloseView(),this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateListRedPoint=function(){for(var e=[],t=0,i=this.mWList;t<i.length;t++){var o=i[t],n=!1;o.cls&&o.cls&&o.cls.CheckRedPoint&&(n=o.cls.CheckRedPoint(o.id)),o.__redPoint__=n,e.push(n)}UIHelper.ListRefresh(this.list),this.mListLRBtnCtrl.SetRedPointList(e),this.mListLRBtnCtrl.OnRefresh()},t.LAYER_LEVEL=LayerManager.UI_Main,t.WelfareIcon=[{type:1,cls:FuliSignBoardPnael,icon:"ui_fldt_bt_qiandao"},{type:2,cls:FuliGiveGoldMainPanel,icon:"ui_fldt_bt_songbaiwanyuanbao"},{type:3,cls:FuliLvGiftBagPanel,icon:"ui_fldt_bt_libao"},{type:10,cls:FuliGoldTreePanel,icon:"ui_fldt_bt_yaoqianshu"},{type:4,cls:FuliMonthlyCardPanel,icon:"ui_fldt_bt_yueka"},{type:9,cls:FuliForeverCardPanel,icon:"ui_fldt_bt_zhongshenka"},{type:6,cls:FuliPracticePanel,icon:"ui_fldt_bt_fuli"},{type:7,cls:FuliActivationCodePanel,icon:"ui_fldt_bt_jihuoma"},{type:8,cls:FuliNoticePanel,icon:"ui_fldt_bt_youxigonggao"}],t}(BaseEuiView);__reflect(FuliWin.prototype,"FuliWin",["ICommonWindow"]);var MoneyTreeBoxWin=function(e){function t(){var t=e.call(this)||this;return t.dataList=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MoneyTreeBoxSkin",this.list.itemRenderer=ItemBase},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.AddClick(this.sure,this.onTap),this.index=e[0];var i=MoneyTreeModel.ins().getBoxInfoByIndex(this.index);this.desc.text="今日使用聚宝盆"+i.time+"次，可额外获得：",this.creatRewardList(i.box),this.list.dataProvider=new eui.ArrayCollection(this.dataList),this.sure.label="领取",this.sure.enabled=!1,MoneyTreeModel.ins().playNum>=i.time&&(0==MoneyTreeModel.ins().getOrderByIndex(this.index-1)?this.sure.enabled=!0:this.sure.label="已领取")},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.creatRewardList=function(e){for(var t,i=0;3>i;i++)this.dataList[i]?t=this.dataList[i]:(t=new RewardData,t.type=0,t.id=1,this.dataList.push(t)),t.count=e[i]},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sure:MoneyTreeModel.ins().sendGetCaseReward(this.index),ViewManager.ins().close(t)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(MoneyTreeBoxWin.prototype,"MoneyTreeBoxWin");var MoneyTreePanel=function(e){function t(){var t=e.call(this)||this;t.posY=690;var i=50;return t.skinName="MoneyTreeSkin",t.mc1=new MovieClip,t.mc1.x=120,t.mc1.y=i,t.mc2=new MovieClip,t.mc2.x=280,t.mc2.y=i,t.mc3=new MovieClip,t.mc3.x=560,t.mc3.y=i,t.rect=new egret.Rectangle(-35,0,70,60),t.baojiMc=new MovieClip,t.baojiMc.x=207,t.baojiMc.y=270,t.movieExp=new MovieClip,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.MONEY_INFO_CHANGE,this.refushInfo),this.AddClick(this.goUpBtn,this.onTap),this.AddClick(this.image1,this.onTap),this.AddClick(this.image2,this.onTap),this.AddClick(this.image3,this.onTap),this.AddClick(this.depictLabel2,this.onTap),this.refushInfo(!0)},t.prototype.OnClose=function(){},t.prototype.onTap=function(e){switch(e.currentTarget){case this.goUpBtn:if(MoneyTreeModel.ins().playNum>=MoneyTreeModel.ins().cruMaxNum)return void(GameGlobal.actorModel.vipLv>=10?UserTips.ins().showTips("|C:0xff0000&T:今日次数已用完|"):UserTips.ins().showTips("|C:0xff0000&T:提高vip等级，获得更多次数|"));if(GameGlobal.actorModel.yb>=this.costNum)return void MoneyTreeModel.ins().sendPlayYaoYao();UserTips.ins().showTips("|C:0xff0000&T:元宝不足|");break;case this.image1:ViewManager.ins().open(MoneyTreeBoxWin,1);break;case this.image2:ViewManager.ins().open(MoneyTreeBoxWin,2);break;case this.image3:ViewManager.ins().open(MoneyTreeBoxWin,3);break;case this.depictLabel2:ViewManager.ins().open(VipMainPanel)}},t.prototype.refushInfo=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var i=MoneyTreeModel.ins(),o=i.getIndexCost(),n=i.getNowCoefficientinfo(),a=i.getNowCoefficientinfo(1),r=o.yuanbao+"";if(0==o.yuanbao)r="本次免费";else{o.yuanbao+""}this.bar.maximum=55,i.playNum==i.maxNum?(this.depictLabel1.visible=!1,this.playNum.visible=!1,this.cost.visible=!1,this.getNum.text="今日次数\n已全部用完"):(this.depictLabel1.visible=!0,this.playNum.visible=!0,this.cost.visible=!0,this.playNum.text="（今日使用："+i.playNum+"/"+i.cruMaxNum+"）",this.costNum=o.yuanbao,this.cost.setText(r),this.getNum.text="立即获得\n"+CommonUtils.overLength(Math.floor(o.gold*n.rate/100))+"金币"),this.add.text="加成："+(n.rate-100)+"%",this.bar.value=i.playNum,e||this.moveExpMc();var s=0;null==a?(this.addPoint.text="已满级",this.mc_img.height=76):(this.addPoint.text=i.exp+"/"+a.needExp,s=60*(.5-i.exp/a.needExp),this.mc_img.height=76/a.needExp*i.exp),this.rect.y=s,this.refushBoxInfo(),t>1&&(this.baojiMc.loadFile(ResDataPath.GetUIEffePath("moneytreecrit"),!0,1),this.addChild(this.baojiMc))},t.prototype.moveExpMc=function(){this.movieExp.x=189,this.movieExp.y=257,this.movieExp.loadFile(ResDataPath.GetUIEffePath("moneytreeexp"),!0,1),this.addChild(this.movieExp);var e=egret.Tween.get(this.movieExp);e.to({y:140,x:48},420)},t.prototype.refushBoxInfo=function(){for(var e=MoneyTreeModel.ins(),t=1;4>t;t++){var i=this["mc"+t];e.checkBoxIsCanget(t)?this.playEffect(i):i.parent&&DisplayUtils.removeFromParent(i)}},t.prototype.playEffect=function(e){e.loadFile(ResDataPath.GetUIEffePath("taskBox"),!0,100),this.addChild(e)},t}(BaseView);__reflect(MoneyTreePanel.prototype,"MoneyTreePanel");var FuncOpenEffPanel=function(e){function t(){var t=e.call(this)||this;t.skinName="FuncOpenEffSkin",t._AddClick(t.goBtn,t._OnClick);var i=new MovieObject;return i.LoadByUrl(ResDataPath.GetUIEffePath("eff_ui_hyui_001")),t.effGroup.addChild(i),t}return __extends(t,e),t.setOpenId=function(e){this._NEED_OPEN_ID=e,this.checkNeedOpen()},t.checkNeedOpen=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i={};this.m_Type=e[0];var o=i[e[0]];if(this.tip1Img.source=o[0],this.tip2Img.source=o[1],this.tip3Img.source=o[2],"number"==typeof o[3]);else{var n=new MovieObject;n.LoadByUrl(o[3]),this.effGroup2.addChild(n)}3==e[0]?this.effGroup2.y=480:4==e[0]&&(this.effGroup2.horizontalCenter=100,this.effGroup2.y=540),this.AddTimer(5e3,1,this._OnClick)},t.prototype.OnClose=function(){TimerManager.ins().removeAll(this),4==this.m_Type?ViewManager.ins().open(RoleWin,2):2==this.m_Type&&ViewManager.ins().open(RoleWin,1),egret.setTimeout(function(){var e=ViewManager.ins().getView(PlayFunView);e&&e.isShow()},this,500)},t.prototype._OnClick=function(){this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(FuncOpenEffPanel.prototype,"FuncOpenEffPanel");var FuncOpenModel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.SendGetFuncOpen=function(e){var t=new Sproto.cs_get_gongnengyugao_reward_request;t.index=e,this.Rpc(C2sProtocol.cs_get_gongnengyugao_reward,t,function(e){var t=e;0==t.index?UserTips.ins().showTips("领取错误"):GameGlobal.actorModel.mFuncOpen=BitUtil.Set(GameGlobal.actorModel.mFuncOpen,t.index,!0)})},Object.defineProperty(t.prototype,"m_Reward",{get:function(){return GameGlobal.actorModel.mFuncOpen},enumerable:!0,configurable:!0}),t.prototype.GetNextIndex=function(){var e=GameGlobal.Config.FuncNoticeConfig,i=t.MAX_COUNT,o=-1,n=0;for(i;i>n;i--){var a=e[i];if(a&&0==BitUtil.Has(this.m_Reward,i)){var r=t.ins().GetRewardState(i);if(r==RewardState.CanGet){o=i;break}r==RewardState.NotReached&&(o=i)}}return o},t.prototype.CanReward=function(e){return this.GetRewardState(e)==RewardState.CanGet},t.prototype.GetRewardState=function(e){var i=GameGlobal.Config.FuncNoticeConfig[e];return i?t.CheckByData(i.openLv)?BitUtil.Has(this.m_Reward,e)?RewardState.Gotten:RewardState.CanGet:RewardState.NotReached:RewardState.Undo},t.prototype.HasReward=function(){for(var e=1;e<=t.MAX_COUNT;++e)if(this.CanReward(e))return!0;return!1},t.Check=function(e,t){switch(e){case 1:return GameGlobal.UserFb.guanqiaID>=t;case 2:return GameGlobal.actorModel.level>=t;case 4:return GameServer.serverOpenDay>=t;case 5:return GameServer.loginDay>=t}return!1},t.CheckByData=function(e){var i,o=e.length;for(i=0;o>i;i++)if(0==t.Check(e[i][0],e[i][1]))return!1;return!0},t.GetTipStrByData=function(e,t){var i,o="",n=e.length;for(i=0;n>i;i++)t&&""!=o&&(o+=t),o+=this.GetTipStr(e[i][0],e[i][1]);return o},t.GetTipStr=function(e,t){switch(e){case 1:return"通过第"+t+"关";case 2:return t>=1e3?"角色"+Math.floor(t/1e3)+"阶":"角色等级达到"+t+"级";case 4:return"开服第"+t+"天";case 5:return"登陆第"+t+"天"}return""},t.Send=function(){var e=new Sproto.cs_set_clientvalue_request;e.value=GameGlobal.actorModel.mSaveData,e.list=GameGlobal.actorModel.mSaveDataList,GameSocket.ins().Rpc(C2sProtocol.cs_set_clientvalue,e)},t.HasSaveData=function(e){return BitUtil.Has(GameGlobal.actorModel.mSaveData,e)},t.SetData=function(e,t){GameGlobal.actorModel.mSaveData=BitUtil.Set(GameGlobal.actorModel.mSaveData,e,t),this.Send()},t.GetValue=function(e){var i=GameGlobal.actorModel.mSaveDataList[e];return null==i&&(i=t.DEF_VALUE[e]),i||0},t.SetValue=function(e,t){var i=GameGlobal.actorModel.mSaveDataList[e];i!=t&&(GameGlobal.actorModel.mSaveDataList[e]=t,this.Send())},t.MAX_COUNT=31,t.SAVE_GAME_OTHER_PLAYER=1,t.SAVE_GAME_BLOOD_VIEW=2,t.SAVE_BAG_RONG_LIAN=3,t.SAVE_SYSTEM_SETTING_SY=4,t.SAVE_SYSTEM_SETTING_YX=5,t.SAVE_SYSTEM_SETTING_CB=6,t.SAVE_SYSTEM_SETTING_CH=7,t.SAVE_SYSTEM_SETTING_TX=8,t.SAVE_SYSTEM_SETTING_XW=9,t.SAVE_SYSTEM_SETTING_FZ=10,t.SAVE_SYSTEM_SETTING_TL=11,t.SAVE_SYSTEM_SETTING_SH=12,t.SAVE_SYSTEM_SETTING_OTHER_PLAYER=13,t.SAVE_SYSTEM_SETTING_ZDSD2=15,t.SAVE_SYSTEM_SETTING_ZDSD3=16,t.SAVE_SYSTEM_SHOW_XUANNV=17,t.SAVE_GOD_PIE=18,t.SAVE_DATA_FALG=!1,t.SAVE_VAL_SOUND=0,t.DEF_VALUE=(_a={},_a[t.SAVE_VAL_SOUND]=.5,_a),t}(BaseSystem);__reflect(FuncOpenModel.prototype,"FuncOpenModel");var _a,CreateRoleScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),ViewManager.ins().open(CreateDefaultRoleView)},t.prototype.onExit=function(){e.prototype.onExit.call(this)},t}(BaseScene);__reflect(CreateRoleScene.prototype,"CreateRoleScene");var MainScene=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),ViewManager.ins().open(GameSceneView),ViewManager.ins().open(MainTopPanel),ViewManager.ins().open(MainTop2Panel),ViewManager.ins().open(MainBottomPanel),ViewManager.ins().open(TipsView)},t}(BaseScene);__reflect(MainScene.prototype,"MainScene");var BloodView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_Cache={},t.m_ImgList=[],t}return __extends(t,e),t.prototype._GetBitmapLabel=function(e){var t=null,i=this.m_Cache[e.__name__];return i&&(t=i.pop()),t||(t=new BloodItem(e)),t.visible=!0,this.addChild(t),t},t.prototype.BuffBitmapLabel=function(e,t){var i=null;e[0]=t;var o=this.m_Cache[e.__name__];return o&&(i=o.pop()),i||(i=new BloodItem(e)),i.visible=!0,this.addChild(i),i},t.prototype._CacheBitmapLabel=function(e){if(e){var t=e.name,i=this.m_Cache[t];i||(i=this.m_Cache[t]=[]),e.visible=!1,e.alpha=1,i.push(e),e.parent==this&&this.removeChild(e)}},t.prototype.Clear=function(){for(var e=this.numChildren-1;e>=0;--e){var t=this.getChildAt(e);egret.Tween.removeTweens(t),egret.is(t,"BloodItem")?this._CacheBitmapLabel(t):egret.is(t,"eui.Image")?(DisplayUtils.removeFromParent(t),this.m_ImgList.push(t)):console.log("not bloodview type")}this.removeChildren()},t.prototype.Show=function(e,t,i,o,n,a){if(n=i[2]?i[2](o,n):n){var r=this._GetBitmapLabel(i);if(r){r.text=n,r.x=e,r.y=t-90;var s=egret.Tween.get(r);a(s),s.call(this._CacheBitmapLabel,this,[r])}}},t.prototype.ShowBuffEffText=function(e,i,o,n){var a,r;if(o?(a=t.Type.OTHER_BUFF_TEXT,r=this.BuffBitmapLabel(a,o+"_fnt")):(a=t.Type.BUFF_TEXT,r=this._GetBitmapLabel(a)),r){r.text=n,r.x=e,r.y=i-50;var s=egret.Tween.get(r);t.TweenType1(s),s.call(this._CacheBitmapLabel,this,[r])}},t.prototype.ShowWord=function(e,i,o){var n;0==o?n=t.Type.JINHUA:console.warn("not ShowWord type => "+o),n&&this.Show(e,i,n,0,"",t.TweenType1)},t.prototype.ShowBuffAct=function(e,i,o,n){var a=t.SHOW_BUFF_ACT[o]||t.Type.EFFE3;this.Show(e,i,a,o,n,t.TweenType1)},t.prototype.ShowBuffHp=function(e,i,o,n){var a,r=t.Type.NORMAL;a=0>n?-1*n+"":n+"",o?o==BuffType.TYPE_11?r=t.Type.HUIXUE:(r=o==BuffType.TYPE_8||o==BuffType.TYPE_6?t.Type.EFFE2:t.Type.EFFE1,a=n):r=0>n?t.Type.NORMAL:t.Type.BUFF_HP,this.Show(e,i,r,o,a,t.TweenType1)},t.prototype.ShowSkillName=function(e,i,o){var n=t.Type.SKILL_NAME;this.Show(e,i,n,0,o,t.TweenType2)},t.prototype.ShowBlood=function(e,i,o,n,a){if(!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_GAME_BLOOD_VIEW)){var r,s=0>a?-1*a:a;if(n==DamageTypes.HIT){if(r=t.Type.NORMAL,!a)return}else if(n==DamageTypes.CRIT){if(r=t.Type.CRIT,!a)return}else r=n==DamageTypes.Evade?t.Type.EVADE:n==DamageTypes.BUFF_TYPE_10||n==DamageTypes.BUFF_TYPE_5?t.Type.LIAN_JI:t.Type.NORMAL;var l=this._GetBitmapLabel(r);if(l){l.text=r[2]?r[2](n,s):s,l.x=i,l.y=o-90;var c=egret.Tween.get(l);t.TweenType1(c),c.call(this._CacheBitmapLabel,this,[l])}}},t.prototype.ShowBuffImg=function(e,i,o,n){var a=this,r=this.m_ImgList.pop()||new eui.Image;r.scaleX=r.scaleY=1,r.x=o,r.y=n,r.alpha=1,r.source=e,this.addChild(r);var s=egret.Tween.get(r);r.x=o-23,0==i?s.to({y:n-100},1e3):t.TweenType1(s),s.call(function(){DisplayUtils.removeFromParent(r),a.m_ImgList.push(r)})},t.prototype.repositionNumPic=function(e){var t,i=1;for(i;i<e.numChildren;i++)t=e.getChildAt(i),t.y=20},t.TweenType1=function(e){var t=e._target;e.to({y:t.y-20,scaleX:1.5,scaleY:1.5,alpha:.9},100,egret.Ease.sineIn).wait(200).to({y:t.y-20,scaleX:1,scaleY:1,alpha:1},200,egret.Ease.sineIn).to({y:t.y-60,alpha:.3},350,egret.Ease.sineIn)},t.TweenType2=function(e){var t=e._target;t.scaleX=1.5,t.scaleY=1.5,t.y=t.y-20,t.alpha=.3,e.to({y:t.y+20,scaleX:1,scaleY:1,alpha:1},100,egret.Ease.sineIn).wait(350).to({y:t.y-20,alpha:.3},300,egret.Ease.sineIn)},t.SetFont=function(e,t){var i=this.GetFont(t);i?e.font=i:(null==this.m_Callback&&(this.m_Callback=[]),this.m_Callback.push([e,t]))},t.GetFont=function(e){if(e){if(this.m_Load){var t=this.m_Data;return t.mTex&&t.mJson?(t.mFnt[e]||(t.mFnt[e]=new egret.BitmapFont(t.mTex,t.mJson[e])),t.mFnt[e]):null}this.m_Load=!0,RES.getResByUrl("resource/assets/image/font/shanghai.json",this._CreateByUrl,this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl("resource/assets/image/font/shanghai.png",this._CreateByUrl,this,RES.ResourceItem.TYPE_IMAGE)}},t._CreateByUrl=function(e,t){if(e){if(egret.is(e,"egret.Texture")?this.m_Data.mTex=e:this.m_Data.mJson=e,!this.m_Data.mTex||!this.m_Data.mJson)return null;var i=this.m_Callback;this.m_Callback=null;for(var o=0,n=i;o<n.length;o++){var a=n[o],r=this.GetFont(a[1]);r&&(a[0].font=r)}}},t.BUFF_TYPE=(_a={},_a[6]="反伤",_a[8]="吸血",_a[10]="连击",_a[11]="回血",_a[12]="中毒",_a[17]="破防",_a),t.BUFF_TYPE2=(_b={},_b[9]="",_b[13]="净化",_b),t.BUFF_TYPE3=(_c={},_c[1]="昏迷",_c[2]="封印",_c[3]="冰冻",_c[4]="沉睡",_c[14]="复仇",_c),t.Type={NORMAL:["font_pth_fnt","",function(e,t){return t},-5],BUFF_HP:["font_ui_gongjizhe01_fnt",""],CRIT:["font_ui_baoji_fnt","",function(e,t){return"暴击"+t},-10],EVADE:["font_ui_gongjizhe02_fnt","",function(e,t){return"闪避"}],HUIXUE:["font_ui_gongjizhe01_fnt","",function(e,t){return"回血+"+t},-5],JINHUA:["font_ui_gongjizhe01_fnt","",function(e,t){return"净化"},-5],EFFE1:["font_ui_gongjizhe02_fnt","ui_zd_bm_hongseBG",function(e,i){return t.BUFF_TYPE[e]||""}],LIAN_JI:["font_ui_gongjizhe02_fnt","",function(e,t){return e==DamageTypes.BUFF_TYPE_10?"连击"+t:e==DamageTypes.BUFF_TYPE_5?"反击"+t:t}],EFFE2:["font_ui_gongjizhe02_fnt","",function(e,i){var o=t.BUFF_TYPE[e]||"";return o+=i>0?"+"+i:i}],EFFE3:["font_ui_gongjizhe01_fnt","",function(e,i){return t.BUFF_TYPE2[e]||""},-5],EFFE4:["font_ui_beigongjizhe_fnt","",function(e,i){return t.BUFF_TYPE3[e]||""},-5],SKILL_NAME:["font_ui_jinengmingcheng_fnt","ui_zd_bm_jinengmingBG"],BUFF_TEXT:["font_ui_putongshanghai_fnt","",function(e,t){return t}],OTHER_BUFF_TEXT:["","",function(e,t){return t}]},t.SHOW_BUFF_ACT=(_d={},_d[9]=t.Type.EFFE3,_d[13]=t.Type.EFFE3,_d[1]=t.Type.EFFE4,_d[2]=t.Type.EFFE4,_d[3]=t.Type.EFFE4,_d[4]=t.Type.EFFE4,_d[14]=t.Type.EFFE4,_d),t.OFFSET=60,t.m_Load=!1,t.m_Data={mTex:null,mJson:null,mFnt:{}},t}(egret.DisplayObjectContainer);__reflect(BloodView.prototype,"BloodView");for(var k in BloodView.Type)BloodView.Type[k].__name__=k;var BloodItem=function(e){function t(t){var i=e.call(this)||this;i.type=0,i.width=0,i.height=0;var o=new eui.Group;o.width=0,o.height=0,i.addChild(o),i.name=t.__name__,t[1]&&(i.image=new eui.Image,o.addChild(i.image),i.image.verticalCenter=0,i.image.horizontalCenter=0,i.image.source=t[1]);var n=new eui.BitmapLabel;return n.verticalCenter=0,n.horizontalCenter=0,BloodView.SetFont(n,t[0]),t[3]&&(n.letterSpacing=t[3]),i.label=n,o.addChild(n),i}return __extends(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this.label.text=e},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(BloodItem.prototype,"BloodItem");var _a,_b,_c,_d,BottomSelectPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="BottomSelectPanelSkins",t.navBtn=[t.tianvBtn,t.xiannvBtn0,t.tianshenBtn,t.lingtongBtn,t.xingxiuBtn],t.navBind=[HavingMainPanel,XianlvMainPanel,TianShenMainPanel,LingtongMainPanel,XianJunMainPanel],t}return __extends(t,e),t.prototype.destoryView=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.parent.globalToLocal(0,GameGlobal.StageUtils.GetHeight()-130,egret.$TempPoint),this.conGroup.y=egret.$TempPoint.y,this.ShowCount();for(var i=0;i<this.navBtn.length;i++)this.navBtn[i].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);this.observe(GameGlobal.XianlvFzModel.GetItemRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(GameGlobal.XianlvFzModel.GetItemEquipRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(GameGlobal.XianlvXwModel.GetItemRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(GameGlobal.XianlvXwModel.GetItemEquipRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(MessageDef.RP_BAG_XIANLV_ACT_ITEM,this.UpdateXianlvRedPoint),this.observe(MessageDef.RP_XIANLV,this.UpdateXianlvRedPoint),this.observe(MessageDef.YUANFEN_ALL_NOTICE,this.UpdateXianlvRedPoint),this.UpdateXianlvRedPoint(),this.observe(GameGlobal.HavingModel.GetItemRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingModel.GetItemEquipRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingHuanModel.GetItemRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingHuanModel.GetItemEquipRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingLingqModel.GetItemRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingLingqModel.GetItemEquipRpUpdateMsg(),this.UpdateTiannvRedPoint),this.UpdateTiannvRedPoint(),this.observe(MessageDef.RP_BAG_TIANSHEN_ACT_ITEM,this.UpdateTiansRedPoint),this.observe(MessageDef.RP_TIANSHEN,this.UpdateTiansRedPoint),this.observe(MessageDef.YUANFEN_ALL_NOTICE,this.UpdateTiansRedPoint),this.UpdateTiansRedPoint(),this.observe(GameGlobal.LingtongModel.GetItemRpUpdateMsg(),this.UpdateLigntongRedPoint),this.observe(GameGlobal.LingtongModel.GetItemEquipRpUpdateMsg(),this.UpdateLigntongRedPoint),this.observe(MessageDef.RP_LINGTONG,this.UpdateLigntongRedPoint),this.UpdateLigntongRedPoint(),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.anim.play(0)},t.prototype.OnClose=function(){},t.prototype.ShowCount=function(){var e=Deblocking.Check(DeblockingType.TYPE_23,!0);UIHelper.SetVisible(this.tianshenBtn,e),UIHelper.SetVisible(this.tianshenBtnline,e);var t=Deblocking.Check(DeblockingType.TYPE_19,!0);UIHelper.SetVisible(this.tianvBtn,t),UIHelper.SetVisible(this.tianvBtnline,t);var i=Deblocking.Check(DeblockingType.TYPE_116,!0);UIHelper.SetVisible(this.lingtongBtn,i),UIHelper.SetVisible(this.lingtongBtnline,i);var o=Deblocking.Check(DeblockingType.TYPE_145,!0);UIHelper.SetVisible(this.xingxiuBtn,o),UIHelper.SetVisible(this.xingjunBtnline,o),UIHelper.SetVisible(this.xiannvBtn0,!0),this.btnGroup.horizontalCenter=t&&i&&o?-175:0;var n=e||t||i||o;return n},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.tianvBtn,[ActivityKaiFuJiJieType.tiannv_nimbus,ActivityKaiFuJiJieType.tiannv_flower]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.xiannvBtn0,[ActivityKaiFuJiJieType.xianlv_circle,ActivityKaiFuJiJieType.xianlv_position])},t.prototype.onClick=function(e){var t=this.navBtn.indexOf(e.currentTarget),i=this.navBind[t];i&&(ViewManager.ins().isShow(i)?ViewManager.ins().close(i):(ViewManager.ins().open(i),ViewManager.ins().close(this)))},t.prototype.GetXianlvRedPoint=function(){return GameGlobal.XianlvModel.mRedPoint.IsRedPoint()?!0:GameGlobal.XianlvFzModel.mRedPoint.IsRedPoint()?!0:GameGlobal.XianlvXwModel.mRedPoint.IsRedPoint()?!0:GameGlobal.YuanfenModel.IsRedPoint()?!0:!1},t.prototype.UpdateXianlvRedPoint=function(){UIHelper.ShowRedPoint(this.xiannvBtn0,this.GetXianlvRedPoint())},t.prototype.GetTiannvRedPoint=function(){return GameGlobal.HavingModel.mRedPoint.IsRedPoint()?!0:GameGlobal.HavingHuanModel.mRedPoint.IsRedPoint()?!0:GameGlobal.HavingLingqModel.mRedPoint.IsRedPoint()?!0:!1},t.prototype.UpdateTiannvRedPoint=function(){UIHelper.ShowRedPoint(this.tianvBtn,this.GetTiannvRedPoint())},t.prototype.UpdateTiansRedPoint=function(){UIHelper.ShowRedPoint(this.tianshenBtn,GameGlobal.TianShenModel.mRedPoint.IsRedPoint()||GameGlobal.YuanfenModel.IsRedPoint())},t.prototype.UpdateLigntongRedPoint=function(){UIHelper.ShowRedPoint(this.lingtongBtn,GameGlobal.LingtongAttrModel.IsRedPoint())},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BottomSelectPanel.prototype,"BottomSelectPanel");var CreateDefaultRoleView=function(e){function t(){var t=e.call(this)||this;return t.timeNum=60,t.m_RoleImg=[["ui_cjjs_bm_juese","ui_cjjs_bm_nvjuese"],["ui_cjjs_xianzhu_nan","ui_cjjs_xianzhu_nv"],["ui_cjjs_mozhu_nan","ui_cjjs_mozhu_nv"]],t.m_CurImgIndex=1,t.m_Index=-1,t.m_Job=1,t.m_Sex=0,t.m_IsRandom=!0,t.mSelImg=[],t.m_Count=0,t.m_TexList=[],t.skinName="CreateRolSkin",t.nameLabel.type=egret.TextFieldType.INPUT,t.nameLabel.addEventListener(egret.TouchEvent.FOCUS_IN,t._DoFocus,t),t.sel1.visible=!0,t.sel2.visible=!1,t.m_Job=1,t.m_Sex=0,t}return __extends(t,e),t.prototype._DoFocus=function(){this.m_IsRandom=!1},t.prototype.OnOpen=function(){this.AddClick(this.leftBtn,this.OnClick),this.AddClick(this.rightBtn,this.OnClick),this.AddClick(this.sex1,this.OnClick),this.AddClick(this.sex2,this.OnClick),this.AddClick(this.randomName,this.OnClick),this.AddClick(this.gotBtn,this.OnClick);for(var e=0;e<this.selGroup.numChildren;++e)this.AddClick(this.selGroup.getChildAt(e),this.OnSelect);this.mSelImg=this.selGroupImg.$children,this.Select(1),this.AddTimer(1e3,0,this.timeShow);for(var t=["_ui_xzjs_h1","_ui_xzjs_h2","_ui_xzjs_h3",,"_ui_xzjs_h4"],i=0,o=t;i<o.length;i++){var n=o[i];RES.getResAsync(n,this._Load,this)}},t.prototype._Load=function(e){this.m_TexList&&(e&&this.m_TexList.push(e),++this.m_Count>=4&&WeatherFactory.getFlower().playWeather(this.m_TexList))},t.prototype.timeShow=function(){if(0==this.timeNum){TimerManager.ins().remove(this.timeShow,this);var e=this.nameLabel.text;return null==e||""==e?void alert("名称不能为空"):(RoleMgr.ins().sendCreateRole(e,this.GetSex(),this.GetJob()),void(this.time.text=""))}this.time.text=this.timeNum+"s后自动进入服务器",this.timeNum--},t.prototype.OnClose=function(){WeatherFactory.getFlower().stopWeather(),this.removeObserve(),this.removeEvents(),TimerManager.ins().removeAll(this),this.m_TexList=null},t.prototype.OnSelect=function(e){this.Select(this.selGroup.getChildIndex(e.target))},t.prototype.Select=function(e){this.m_Job=e+1,this.UpdateSel()},t.prototype.UpdateSel=function(){var e=this.m_Index;this.m_Index=2*(this.m_Job-1)+this.m_Sex;for(var t=this.m_Job-1,i=0;i<this.mSelImg.length;i++)this.mSelImg[i].visible=i==t;this.sel1.visible=0==this.m_Sex,this.sel2.visible=1==this.m_Sex;var o=(this["roleImg"+this.m_CurImgIndex],this["roleGroup"+this.m_CurImgIndex]);if(e!=this.m_Index){var n=this.m_Index>e?-1:1,a=600;egret.Tween.removeTweens(o),egret.Tween.get(o).to({x:n*a,alpha:0},350,egret.Ease.circOut),this.m_CurImgIndex=(this.m_CurImgIndex+1)%2;var r=this["roleImg"+this.m_CurImgIndex],s=this["roleGroup"+this.m_CurImgIndex];r.source=this.m_RoleImg[this.m_Job-1][this.m_Sex],s.x=-1*n*a,s.alpha=0,egret.Tween.removeTweens(s),egret.Tween.get(s).wait(150).to({x:0,alpha:1},350,egret.Ease.circOut),this.m_IsRandom&&this.GetRandomName()}},t.prototype.GetSex=function(){return this.m_Sex},t.prototype.GetJob=function(){return this.m_Job},t.prototype.doRandom=function(e){0==e.result&&(this.nameLabel.text=e.actorname)},t.prototype.GetRandomName=function(){var e=new Sproto.RandName_request;e.sex=this.GetSex(),GameSocket.ins().Rpc(C2sProtocol.RandName,e,this.doRandom,this)},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.sex1:this.m_Sex=0,this.UpdateSel();break;case this.sex2:this.m_Sex=1,this.UpdateSel();break;case this.randomName:this.m_IsRandom=!1,this.GetRandomName();break;case this.gotBtn:var t=this.nameLabel.text;if(null==t||""==t)return void alert("名称不能为空");RoleMgr.ins().sendCreateRole(t,this.GetSex(),this.GetJob());break;case this.leftBtn:this.UpdateIndex(this.m_Index-1);break;case this.rightBtn:this.UpdateIndex(this.m_Index+1)}},t.prototype.UpdateIndex=function(e){0>e&&(e=5),e>5&&(e=0),this.m_Sex=e%2,this.m_Job=Math.floor(e/2)+1,this.UpdateSel()},t.LAYER_LEVEL=LayerManager.UI_Main_2,t}(BaseEuiView);__reflect(CreateDefaultRoleView.prototype,"CreateDefaultRoleView");var CrossGameMapPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnClickExitRaid=function(){WarnWin.show(this.leaveDlgStr,function(){GameGlobal.CommonRaidModel.MapLeave()},this)},t}(GameMapPanel);__reflect(CrossGameMapPanel.prototype,"CrossGameMapPanel");var GameBattleManualPanel=function(e){function t(t){var i=e.call(this)||this;return i.selectTypeIndex=EntityType.Role,i.battleManual={},i.mIsAuto=!0,i.mIgnoreTime=!1,i.mIsPlay=!1,i.mState=0,i.USE_SORT=(o={},o[EntityType.Role]=EntityType.Pet,o[EntityType.Pet]=null,o),i.m_Timer=0,i.m_IsUpdate=!1,i.skinName="GameBattleManualSkin",i.m_Context=t,i.skillList.itemRenderer=GameBattleBtn2Item,i._AddClick(i.autoBtn,i._OnClick),i._AddClick(i.petBtn,i._OnClick),i._AddClick(i.roleBtn,i._OnClick),i.roleBtn.typeIcon.source="ui_bm_juesebiaoji",i.petBtn.typeIcon.source="ui_bm_chongwubiaoji",i;var o}return __extends(t,e),t.prototype.OnOpen=function(){this.timeLabel.visible=!1,this.autoBtnGroup.visible=!1,this.mIsAuto=!0,this.mIgnoreTime=!1,this.mIsPlay=!1,this.observe(MessageDef.BATTLE_TURN,this.StartTurn),this.observe(MessageDef.BATTLE_TURN_START,this.StartTurnStart),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdatePos),this.StartManual(),this._UpdatePos()},t.prototype._UpdatePos=function(){MiniChatPanel.UpdateViewPos(this.bottomGroup)},t.prototype.OnClose=function(){this.ClearUpdateTimer()},t.prototype.SelectNextSkill=function(){var e=this.battleManual[this.selectTypeIndex];return e?void this.UpdateSelSkillGroup(!0,this.selectTypeIndex):(this.UpdateSelSkillGroup(!1),void this.UseSelSkill())},t.prototype.StartTurn=function(){this.mIsPlay=!1},t.prototype.StartTurnStart=function(){this.mIsPlay=!0,this.selSkillGroup.visible=!1,this.ShowTimeGroup(!1),this.SetBtnIcon()},t.prototype.ShowTimeGroup=function(e){this.timeLabel.visible=e},t.prototype._OnItemClick=function(e){var i=this.battleManual[e.type];i&&(i.skillId=e.skillId,this.UpdateSelSkillGroup(!1),this.m_Context.SelectTarget(e.type,e.skillId),this.autoBtn.icon=t.IMG.RETURN)},t.prototype.SelectTarget=function(e,t,i){var o=this.battleManual[e];return o?(o.targets=i,this.selectTypeIndex=this.USE_SORT[e],void this.SelectNextSkill()):void console.error("SelectTarget error roleType => "+e)},t.prototype.UseSelSkill=function(){var e=[];for(var t in this.battleManual){var i=this.battleManual[t];if(i){var o=new GameBattleManualData;o.skillId=i.skillId,o.handle=i.handle,o.targets=i.targets,e.push(o),i.skillId=0,i.targets=[]}}GameGlobal.RaidMgr.mBattleRaid.UseSkill(e)},t.prototype._OnClick=function(e){switch(e.target){case this.autoBtn:this.mIsAuto?(this.mIsAuto=!1,this.ClearUpdateTimer(),this.mIsPlay||this.mIgnoreTime?UserTips.InfoTip("下回合开始手动释放技能"):(this.selectTypeIndex=EntityType.Role,this.SelectNextSkill()),this.mIgnoreTime=!0,this.SetBtnIcon(),GameGlobal.RaidMgr.mBattleRaid.SendSetAuto(!1)):this.autoBtn.icon==t.IMG.RETURN?(this.m_Context.CancelSelectTarget(),this.selectTypeIndex=EntityType.Role,this.SelectNextSkill()):this.autoBtn.icon==t.IMG.AUTO&&(this.mIsAuto=!0,this.UpdateSelSkillGroup(!1),GameGlobal.RaidMgr.mBattleRaid.SendSetAuto(!0),this.SetBtnIcon());break;case this.roleBtn:this.UpdateSelSkillGroup(!0,EntityType.Role);break;case this.petBtn:this.UpdateSelSkillGroup(!0,EntityType.Pet)}},t.prototype.UpdateContent=function(){this.UpdateSkillBtn()},t.prototype.UpdateSkillBtn=function(){this.battleManual={};for(var e=GameGlobal.RaidMgr.mBattleRaid,t=e.mEntityDatas[e.mMySide-1],i=0,o=t;i<o.length;i++){var n=o[i],a=null,r=e.GetEntity(n.handle);if(r&&!r.mAI.IsDead()&&(n.type==EntityType.Role?a=!0:n.type==EntityType.Pet&&-1!=n.posIndex&&(a=!0),a)){var s=new GameBattleManualData;s.handle=n.handle,s.skillId=n.GetSkillIDs()[0]||0,this.battleManual[n.type]=s}}this.UpdateSkillBtnDesc()},t.prototype.UpdateSkillBtnDesc=function(){this.battleManual[EntityType.Role]?this.roleBtn.icon=SkillsConfig.GetSkillIcon(this.battleManual[EntityType.Role].skillId):UIHelper.SetVisible(this.roleBtn,!1),this.battleManual[EntityType.Pet]?this.petBtn.icon=SkillsConfig.GetSkillIcon(this.battleManual[EntityType.Pet].skillId):UIHelper.SetVisible(this.petBtn,!1)},t.prototype.UpdateSelSkillGroup=function(e,i){if(void 0===i&&(i=-1),this.selSkillGroup.visible=e,!(0>i)){var o=this.battleManual[i];if(o){var n=GameGlobal.RaidMgr.mBattleRaid.mEntityList[o.handle];if(n){var a=n.GetInfo();if(a){this.autoBtn.icon=t.IMG.AUTO;var r="",s=o.skillId||0;r=a.type==EntityType.Role?"角色技能":a.type==EntityType.Pet?"宠物技能":"未知技能",this.label.text=r;for(var l=[],c=0,u=a.GetSkillIDs();c<u.length;c++){var p=u[c];l.push({handle:a.handle,type:a.type,skillId:p,selId:s})}this.skillList.dataProvider=new eui.ArrayCollection(l)}}}}},t.prototype.StartManual=function(e){if(void 0===e&&(e=null),this.UpdateSkillBtn(),this.mEntitySkill=null,e){for(var t={},i=0,o=e;i<o.length;i++){var n=o[i];if(n.skills){for(var a={},r=0,s=n.skills;r<s.length;r++){var l=s[r];a[l]=!0}t[n.handler]=a}}this.mEntitySkill=t}return this.mIsAuto?(this.SetBtnIcon(),void(this.mIgnoreTime||this.m_IsUpdate||(this.ShowTimeGroup(!0),this.m_Timer=3,this.m_IsUpdate=!0,this._UpdateTimer(),this.AddTimer(700,5,this._UpdateTimer)))):(this.SetBtnIcon(),this.selectTypeIndex=EntityType.Role,void this.SelectNextSkill())
},t.prototype.SetAuto=function(e){this.mIsAuto=e,e||(this.mIgnoreTime=!0),this.SetBtnIcon()},t.prototype.SetBtnIcon=function(){var e=this.mIsAuto;e?this.autoBtn.icon=t.IMG.MANUAL:this.autoBtn.icon=t.IMG.AUTO},t.prototype.ClearUpdateTimer=function(){this.ShowTimeGroup(!1),this.m_IsUpdate&&(this.m_IsUpdate=!1,TimerManager.ins().remove(this._UpdateTimer,this))},t.prototype._UpdateTimer=function(){this.timeLabel.text=this.m_Timer--+"",this.m_Timer<0&&this.ClearUpdateTimer()},t.IMG={RETURN:"ui_bm_fanhui",AUTO:"ui_bm_zidong",MANUAL:"ui_zd_bt_shoudong"},t.STATE_AUTO=0,t.STATE_MANUAL=1,t}(BaseView);__reflect(GameBattleManualPanel.prototype,"GameBattleManualPanel");var GameBattleManualData=function(){function e(){this.targets=[]}return e}();__reflect(GameBattleManualData.prototype,"GameBattleManualData");var GameBattleBtn2Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){return this.IsCool()?void UserTips.InfoTip("技能冷却中"):void Util.GetParentByType(this,GameBattleManualPanel)._OnItemClick(this.data)},t.prototype.IsCool=function(){var e=Util.GetParentByType(this,GameBattleManualPanel),t=this.data.skillId,i=this.data.handle;return null==e.mEntitySkill?!1:e.mEntitySkill[i]&&e.mEntitySkill[i][t]?!1:!0},t.prototype.dataChanged=function(){var e=(this.data.selId,this.data.skillId),t=(this.data.handle,SkillsConfig.GetSkillIcon(e));this.skillIcon.source=t,this.coolLabel.visible=this.IsCool()},t}(eui.ItemRenderer);__reflect(GameBattleBtn2Item.prototype,"GameBattleBtn2Item");var GameBattlePanel=function(e){function t(){var t=e.call(this)||this;return t.mChildView=[],t.showFinishTurn=null,t.m_IsTip=!1,t.mShowType=0,t.skinName="GameBattleSkin",t.timeLabel.visible=!1,t._AddClick(t.finishBtn,t._OnClick),t._AddClick(t.speedBtn,t._OnClick),t}return __extends(t,e),t.prototype.destoryView=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.mShowType=e[0],this.caName.text=BattleMap.mFbName,this.lbDes.text=BattleMap.mFbDesc,this.observe(MessageDef.BATTLE_TURN,this.UpdateContent),this.observe(MessageDef.BATTLE_TURN_START,this.TurnStart),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdatePos),this._UpdatePos(),this.UpdateSpdBtn(),this.showFinishTurn=null,this.m_IsTip=!1,this.finishBtn.visible=!1,BattleMap.IsNoramlLevel())this.battleInfo.visible=!1,this.treasureInfo.visible=!1;else{var i=!1;if(this.battleInfo.visible=!0,BattleMap.IsGuanQiaBoss()){var o=GameGlobal.RaidModel.mChapterData.fbcfg;this.treasureInfo.visible=!1,this.showFinishTurn=o.jbutton}else{var o=GameGlobal.Config.InstanceConfig[BattleMap.mFbId];this.showFinishTurn=o[GameGlobal.Config.InstanceConfig_keys.jbutton],i=o[GameGlobal.Config.InstanceConfig_keys.skipbattle],BattleMap.IsCangBaoTu()?(this.bossInfo.visible=!1,this.treasureInfo.visible=!0,UserVip.ins().lv>=GameGlobal.Config.TreasureMapBaseConfig.roundviplevel&&GameGlobal.UserFb.bCbtAcross&&(this.showFinishTurn=1)):(this.bossInfo.visible=!0,this.treasureInfo.visible=!1)}this.showFinishTurn&&i&&GameGlobal.FuliModel.FuliData.IsMonth()&&(this.showFinishTurn=1)}GameGlobal.RaidMgr.mBattleRaid.mIsManual?(this.mManualPanel||(this.mManualPanel=new GameBattleManualPanel(this)),this.addChild(this.mManualPanel),this.mManualPanel.DoOpen(),this.mManualPanel.UpdateContent()):this.mManualPanel&&this.mManualPanel.parent&&DisplayUtils.removeFromParent(this.mManualPanel),this.UpdateContent()},t.prototype._UpdatePos=function(){MiniChatPanel.UpdateViewPos(this.groupAdaptation)},t.prototype.StartManual=function(e,t){e&&(this.timeLabel.visible=!0,this.timeLabel.text=e+"",this.AddTimer(1e3,e,this._UpdateTime)),this.mManualPanel&&this.mManualPanel.StartManual(t)},t.prototype.SetAuto=function(e){this.mManualPanel&&this.mManualPanel.SetAuto(e)},t.prototype._UpdateTime=function(){var e=Math.max(Number(this.timeLabel.text)-1,0);this.timeLabel.text=e+""},t.prototype.TurnStart=function(){!this.m_IsTip&&BattleMap.IsGuanQiaBoss()&&(LayerManager.UI_Main_2.addChild(new BossComeToAttackView),this.m_IsTip=!0),this.timeLabel.visible&&(this.timeLabel.visible=!1,TimerManager.ins().remove(this._UpdateTime,this)),this.mSelectPanel&&this.mSelectPanel.CancelSelectTarget()},t.prototype.AddChildBaseView=function(e){this.mChildView.push(e),this.addChildAt(e,0),e.DoOpen(null)},t.prototype.OnClose=function(){for(var e=0,t=this.mChildView;e<t.length;e++){var i=t[e];DisplayUtils.removeFromParent(i),i.DoClose()}this.mChildView=[],this.mManualPanel&&this.mManualPanel.parent&&(this.mManualPanel.DoClose(),DisplayUtils.removeFromParent(this.mManualPanel))},t.prototype._OnClick=function(e){switch(e.target){case this.finishBtn:GameGlobal.RaidMgr.mBattleRaid.FinishBattle();break;case this.speedBtn:var t=SystemSettingPanel.GetSpeed();t>1.5?(FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD3,!1),FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2,!1)):t>1?GameGlobal.actorModel.vipLv>=9?FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD3,!0):(UserTips.InfoTip("达到VIP9，开启3倍速度"),FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD3,!1),FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2,!1)):FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2,!0),this.UpdateSpdBtn()}},t.prototype.UpdateSpdBtn=function(){var e=SystemSettingPanel.GetSpeed();e>1.5?this.speedBtn.icon=t.SPPED_ICON[2]:e>1?this.speedBtn.icon=t.SPPED_ICON[1]:this.speedBtn.icon=t.SPPED_ICON[0]},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.InstanceConfig[BattleMap.mFbId],t=e?e[GameGlobal.Config.InstanceConfig_keys.totalTime]||5:5,i=GameGlobal.RaidMgr.mBattleRaid.GetTurnId();i=t>=i?i:t,this.turnLabel.text=i+"/"+t,GameGlobal.RaidMgr.mBattleRaid.mIsVideo?this.finishBtn.visible=!0:this.showFinishTurn&&(this.finishBtn.visible=i>=this.showFinishTurn),BattleMap.IsCangBaoTu()&&(this.lbMax.text=t,this.lbMid.text=GameGlobal.Config.TreasureMapBaseConfig.onestar,this.lbMin.text=GameGlobal.Config.TreasureMapBaseConfig.twostar,this.progress.labelDisplay.visible=!1,this.progress.maximum=t,this.progress.value=t-i)},t.prototype.CancelSelectTarget=function(){this.mSelectPanel&&this.mSelectPanel.CancelSelectTarget()},t.prototype.SelectTarget=function(e,t){this.mSelectPanel||(this.mSelectPanel=new GameBattleSelectPanel(this)),this.selGroup.addChild(this.mSelectPanel),this.mSelectPanel.SelectTarget(e,t)},t.prototype.SelectDone=function(e,t,i){this.mManualPanel?this.mManualPanel.SelectTarget(e,t,i):console.error("not mManualPanel")},t.LAYER_LEVEL=LayerManager.UI_BATTLE,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t.SPPED_ICON=["ui_bm_sp_1","ui_bm_sp_2","ui_bm_sp_3"],t}(BaseEuiView);__reflect(GameBattlePanel.prototype,"GameBattlePanel");var GameBattlePubBossView=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameGattlePubBossSkin",t.percentWidth=100,t.bar.labelFunction=function(e,t){return"BOSS血量："+e+"/"+t},t._AddClick(t.arrBtn,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.PUBLIC_BOSS_UPDATE_ATK,this._UpdateContent),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdatePos),this._UpdateContent(),this._UpdatePos()},t.prototype.OnClose=function(){GameGlobal.BossModel.ClearPubBossAtkInfo()},t.prototype._OnClick=function(){var e=this.infoGroup.visible=!this.infoGroup.visible;this.arrBtn.icon=e?"ui_zd_bt_shousuo":"ui_zd_bt_zhankai"},t.prototype._UpdatePos=function(){this.globalToLocal(0,MiniChatPanel.POS,egret.$TempPoint),this.group.y=egret.$TempPoint.y},t.prototype._UpdateContent=function(){var e=GameGlobal.BossModel.mPubBossAtkInfo;this.UpdateRank(e)},t.prototype.UpdateHp=function(e,t){e||t?this.bar.visible=!0:this.bar.visible=!1,this.bar.maximum=t,this.bar.value=e},t.prototype.UpdateRank=function(e){if(e){for(var t=[],i=[],o=e.attackinfos||[],n=0;3>n;n++){var a=o[n],r=n+1+" ";a?(r+=a.name,i.push(a.injure)):(r+="暂无",i.push(0)),t.push(r)}this.rankLabel.text=t.join("\n"),this.rankValue.text=i.join("\n"),this.myRank.text="我的："+(e.myattackinfo?e.myattackinfo.injure:0)}},t}(BaseView);__reflect(GameBattlePubBossView.prototype,"GameBattlePubBossView");var GameBattleSelectPanel=function(e){function t(t){var i=e.call(this)||this;return i.mSelectView=[],i.mSelectCount=0,i.mTarget=[],i.m_Context=t,i}return __extends(t,e),t.prototype.CancelSelectTarget=function(){this.mRoleType=0,this.mSkillId=0,this.mSelectCount=0,this.mTarget=[],this.removeChildren(),DisplayUtils.removeFromParent(this)},t.prototype.SelectTarget=function(e,t){this.mRoleType=e,this.mSkillId=t,this.mSelectCount=0,this.mTarget=[];var i=GameGlobal.Config.SkillsConfig[t];if(!i)return void this.SelectDone();var o=i[GameGlobal.Config.SkillsConfig_keys.ttype],n=(i[GameGlobal.Config.SkillsConfig_keys.targetType],GameGlobal.RaidMgr.mBattleRaid);if(1==o||2==o||4==o)return void this.SelectDone();var a=3==o?1:0;this.mSelectCount=1;for(var r=n.mEntityDatas[a],s=0,l=r;s<l.length;s++){var c=l[s],u=n.GetEntity(c.handle);u&&u.mAI&&u.mAI.IsTarget()&&this.AddSelectView(c.handle,a,c.posIndex)}},t.prototype.AddSelectView=function(e,t,i){var o=this.mSelectView[t];if(o||(o=this.mSelectView[t]=[]),!o[i]){var n=o[i]=new GameBattleSelectItem,a=BattleCtrl.POS_EM[i],r=egret.$TempPoint;GameMap.GetBattleView().GetEntityGlobal(a[0],a[1],r),this.globalToLocal(r.x,r.y,r),n.x=r.x,n.y=r.y,this._AddClick(n,this._OnSelClick)}this.addChild(o[i]),o[i].SetData(e)},t.prototype.SelectDone=function(){this.m_Context.SelectDone(this.mRoleType,this.mSkillId,this.mTarget)},t.prototype._OnSelClick=function(e){var t=e.currentTarget;DisplayUtils.removeFromParent(t),this.mTarget.push(t.mHandle),(this.mTarget.length>=this.mSelectCount||this.numChildren<1)&&(this.SelectDone(),this.CancelSelectTarget())},t}(BaseView);__reflect(GameBattleSelectPanel.prototype,"GameBattleSelectPanel");var GameBattleSelectItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameBattleSelectSkin",t.group.x=t.group.y=0,t}return __extends(t,e),t.prototype.SetData=function(e){this.mHandle=e},t}(eui.Component);__reflect(GameBattleSelectItem.prototype,"GameBattleSelectItem");var GameCatchPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameCatchSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdatePos),this.AddClick(this.catchPet,this._OnClick),this._UpdatePos()},t.prototype._UpdatePos=function(){MiniChatPanel.UpdateViewPos(this.groupAdaptation)},t.prototype._OnClick=function(){GameGlobal.CatchPetModel.SendPetCatch()},t.prototype.Catch=function(){this.catchPet.visible=!1},t.LAYER_LEVEL=LayerManager.UI_BATTLE,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(GameCatchPanel.prototype,"GameCatchPanel");var ArraySort;!function(e){e[e.UPPER=1]="UPPER",e[e.LOWER=0]="LOWER"}(ArraySort||(ArraySort={}));var SortTools=function(){function e(){}return e.MoreKeysSorter=function(e,t,i){var o=0,n=function(e,a){var r=t[o],s=i[o];return e[r]==a[r]?(o+=1,o>t.length?(o=0,0):n(e,a)):(o=0,s==ArraySort.UPPER?e[r]-a[r]:a[r]-e[r])};e.sort(n)},e.sortMap=function(e,t,i){void 0===i&&(i=!0),e&&e.sort(function(e,o){return i?e[t]-o[t]:o[t]-e[t]})},e.sortMap1=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];e.sort(function(e,o){if(t){if(1==i.length)return e[i[0]]-o[i[0]];if(2==i.length)return e[i[0]][i[1]]-o[i[0]][i[1]];if(3==i.length)return e[i[0]][i[1]][i[2]]-o[i[0]][i[1]][i[2]]}else{if(1==i.length)return o[i[0]]-e[i[0]];if(2==i.length)return o[i[0]][i[1]]-e[i[0]][i[1]];if(3==i.length)return o[i[0]][i[1]][i[2]]-e[i[0]][i[1]][i[2]]}})},e}();__reflect(SortTools.prototype,"SortTools");var GameSceneView=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameFightSceneSkin",t.touchEnabled=!1,t.touchChildren=!0,KeyboardUtils.ins().addKeyDown(t.TestKeyDown,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"input",{get:function(){return this._input||(this._input=new eui.TextInput,this._input.width=250,this._input.visible=!1,this._input.prompt="点我输入命令",this._input.y=300,LayerManager.UI_Tips.addChild(this._input)),this._input},enumerable:!0,configurable:!0}),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.miniChat.input.sendBtn,e;var e},t.Show=function(){},t.prototype.TestKeyDown=function(e){ActorModel.IsGM()&&(e==Keyboard.BACK_QUOTE&&(this._input&&!this._input.isFocus&&this._input.visible?this._input.visible=!1:this.input.visible=!0),e==Keyboard.ENTER&&this.input.visible&&GameLogic.SendGM(this.input.text))},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.miniChat.openPanel()},t.prototype.OnClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];MessageCenter.ins().removeAll(this),this.miniChat.closePanel()},t.prototype.destoryView=function(){},t.prototype.onTap=function(e){e.currentTarget},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(GameSceneView.prototype,"GameSceneView");var BossComeToAttackView=function(e){function t(){var t=e.call(this)||this;return t.skinName="BossComeToAttackSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.y=400;try{var o=SystemSettingPanel.GetSpeed();if(o>1)for(var n=0,a=this.startTween.items;n<a.length;n++)for(var r=a[n],s=0,l=r.paths;s<l.length;s++){var c=l[s],u=c;u.duration&&(u.duration=Math.floor(u.duration/o))}}catch(p){}this.startTween.once("complete",this.Close,this),this.startTween.play()},t.prototype.Close=function(){DisplayUtils.removeFromParent(this)},t}(eui.Component);__reflect(BossComeToAttackView.prototype,"BossComeToAttackView");var MainBottomPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.fightBtn,e[2]=this.fightBtn,e;var e},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainBottomPanelSkin",this.touchEnabled=!1,this.expBar.slideDuration=0,this.expBar.labelDisplay.visible=!1,this.expBar.labelDisplay=this.expBarLabel,this.navBtn=[this.fightBtn,this.cityBtn,this.roleBtn,this.forgingBtn,this.xiannvBtn,this.petBtn],this.navBind=[null,GameCityPanel,RoleWin,ForgeWin,null,PetMainPanel],this.bossUpdateGroup.visible=!1,this.bossUpdateGroup.touchEnabled=!1;for(var t=0;t<this.navBtn.length;t++)this.navBtn[t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);this.AddClick(this.bossUpdateGroup,function(){ViewManager.ins().open(BossMainPanel,1)}),this.ShowCount(),ActivityKaiFuModel.pushJiJieBtn(this.roleBtn)},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.OnOpen.call(this,t),this.observe(MessageDef.INIT_ACTOR,this._DoInitInfo),this.observe(MessageDef.ALL_BOSS_NOTICE,this.UpdateCityRedPoint),this.observe(MessageDef.FB_REDPOINT_NOTICE,this.UpdateCityRedPoint),this.observe(MessageDef.KF_BOSS_UPDATE_INFO,this.UpdateCityRedPoint),this.observe(MessageDef.ARENA_INFO_DATA,this.UpdateCityRedPoint),this.observe(MessageDef.ARENA_BUY_RESULT,this.UpdateCityRedPoint),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateCityRedPoint),this.observe(MessageDef.HOUSE_UPDATE_INFO,this.UpdateCityRedPoint),this.observe(MessageDef.GODPETACTIVE_UPDATE_INFO,this.UpdateCityRedPoint),this.observe(MessageDef.GODPETACTIVE_LOTTERY_NOTICE,this.UpdateCityRedPoint),this.observe(MessageDef.FRIEND_RED_POINT_CHANGE,this.UpdateCityRedPoint),this.UpdateCityRedPoint(),this.observe(MessageDef.PUBLIC_BOSS_REBORN,this.bossReborn),this.observe(MessageDef.RP_FORGE,this.UpdateForgeRedPoint),this.UpdateForgeRedPoint(),this.observe(MessageDef.EXP_CHANGE,this._DoExpChange),this.observe(MessageDef.LEVEL_CHANGE,this._DoExpChange),this._DoExpInit(),this.observe(MessageDef.ROLE_HINT,this.showRoleBtnRedPoint),this.observe(MessageDef.RP_ROLE_HINT,this.showRoleBtnRedPoint),this.observe(MessageDef.RP_SKILL_UPGRADE,this.showRoleBtnRedPoint),this.observe(MessageDef.RP_TREASURE,this.showRoleBtnRedPoint),this.observe(GameGlobal.UserRide.GetItemRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.UserRide.GetItemEquipRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.UserWing.GetItemRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.UserWing.GetItemEquipRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.TianxModel.GetItemRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.TianxModel.GetItemEquipRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.SwordModel.GetItemRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(GameGlobal.SwordModel.GetItemEquipRpUpdateMsg(),this.showRoleBtnRedPoint),this.observe(MessageDef.FORMATION_ALL_NOTICE,this.showRoleBtnRedPoint),this.observe(MessageDef.DEITYEQUIP_ALL_NOTICE,this.showRoleBtnRedPoint),this.showRoleBtnRedPoint(),this.observe(MessageDef.RP_BAG_PET_ACT_ITEM,this.UpdatePetRedPoint),this.observe(MessageDef.RP_PET,this.UpdatePetRedPoint),this.observe(GameGlobal.PetTonglModel.GetItemRpUpdateMsg(),this.UpdatePetRedPoint),this.observe(GameGlobal.PetTonglModel.GetItemEquipRpUpdateMsg(),this.UpdatePetRedPoint),this.observe(GameGlobal.PetShouhModel.GetItemRpUpdateMsg(),this.UpdatePetRedPoint),this.observe(GameGlobal.PetShouhModel.GetItemEquipRpUpdateMsg(),this.UpdatePetRedPoint),this.observe(MessageDef.YUANFEN_ALL_NOTICE,this.UpdatePetRedPoint),this.UpdatePetRedPoint(),this.observe(GameGlobal.XianlvFzModel.GetItemRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(GameGlobal.XianlvFzModel.GetItemEquipRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(GameGlobal.XianlvXwModel.GetItemRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(GameGlobal.XianlvXwModel.GetItemEquipRpUpdateMsg(),this.UpdateXianlvRedPoint),this.observe(MessageDef.RP_BAG_XIANLV_ACT_ITEM,this.UpdateXianlvRedPoint),this.observe(MessageDef.RP_XIANLV,this.UpdateXianlvRedPoint),this.observe(MessageDef.YUANFEN_ALL_NOTICE,this.UpdateXianlvRedPoint),this.UpdateXianlvRedPoint(),this.observe(GameGlobal.HavingModel.GetItemRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingModel.GetItemEquipRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingHuanModel.GetItemRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingHuanModel.GetItemEquipRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingLingqModel.GetItemRpUpdateMsg(),this.UpdateTiannvRedPoint),this.observe(GameGlobal.HavingLingqModel.GetItemEquipRpUpdateMsg(),this.UpdateTiannvRedPoint),this.UpdateTiannvRedPoint(),this.observe(MessageDef.RP_BAG_TIANSHEN_ACT_ITEM,this.UpdateTiansRedPoint),this.observe(MessageDef.RP_TIANSHEN,this.UpdateTiansRedPoint),this.observe(MessageDef.YUANFEN_ALL_NOTICE,this.UpdateTiansRedPoint),this.UpdateTiansRedPoint(),this.observe(GameGlobal.LingtongModel.GetItemRpUpdateMsg(),this.UpdateLigntongRedPoint),this.observe(GameGlobal.LingtongModel.GetItemEquipRpUpdateMsg(),this.UpdateLigntongRedPoint),this.observe(MessageDef.RP_LINGTONG,this.UpdateLigntongRedPoint),this.UpdateLigntongRedPoint(),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng)},t.prototype._DoInitInfo=function(){this._DoExpInit(),this.ShowCount()},t.prototype.ShowCount=function(){var e=Deblocking.Check(DeblockingType.TYPE_23,!0),t=Deblocking.Check(DeblockingType.TYPE_19,!0),i=Deblocking.Check(DeblockingType.TYPE_116,!0),o=e||t||i;return this.xiannvBtn.icon=o?"ui_bm_helpwar":"ui_bm_xianlv",o},t.prototype.UpdateForgeRedPoint=function(){this.forgingBtn.redPoint.visible=GameGlobal.ForgeModel.mRedPoint.IsRedPoint()},t.prototype.showRoleBtnRedPoint=function(){this.roleBtn.redPoint.visible=this.GetRoleRedPoint()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.roleBtn,[ActivityKaiFuJiJieType.ride,ActivityKaiFuJiJieType.wing,ActivityKaiFuJiJieType.fairy,ActivityKaiFuJiJieType.weapon]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.petBtn,[ActivityKaiFuJiJieType.pet_psychic,ActivityKaiFuJiJieType.pet_soul]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.xiannvBtn,[ActivityKaiFuJiJieType.xianlv_circle,ActivityKaiFuJiJieType.xianlv_position,ActivityKaiFuJiJieType.tiannv_nimbus,ActivityKaiFuJiJieType.tiannv_flower])},t.prototype.UpdateFateEff=function(){FateEff.isShowEff(this)},t.prototype.GetRoleRedPoint=function(){return GameGlobal.UserRole.IsRedPoint()?!0:GameGlobal.UserRole.IsRedEquip()?!0:GameGlobal.UserRide.mRedPoint.IsRedPoint()?!0:GameGlobal.UserWing.mRedPoint.IsRedPoint()?!0:GameGlobal.UserSkill.mRedPoint.IsRedPoint()?!0:GameGlobal.TianxModel.mRedPoint.IsRedPoint()?!0:GameGlobal.SwordModel.mRedPoint.IsRedPoint()?!0:GameGlobal.FormationModel.mRedPoint.IsRedPoint()?!0:GameGlobal.TreasureModel.mRedPoint.IsRedPoint()?!0:GameGlobal.UserEquip.mDeityEquipRP.IsRedPoint()?!0:!1},t.prototype.UpdatePetRedPoint=function(){var e=GameGlobal.PetModel.mRedPoint.IsRedPoint();e||(e=GameGlobal.PetTonglModel.mRedPoint.IsRedPoint()),e||(e=GameGlobal.PetShouhModel.mRedPoint.IsRedPoint()),e||(e=GameGlobal.YuanfenModel.IsRedPoint()),UIHelper.ShowRedPoint(this.petBtn,e)},t.prototype.GetXianlvRedPoint=function(){return GameGlobal.XianlvModel.mRedPoint.IsRedPoint()?!0:GameGlobal.XianlvFzModel.mRedPoint.IsRedPoint()?!0:GameGlobal.XianlvXwModel.mRedPoint.IsRedPoint()?!0:GameGlobal.YuanfenModel.IsRedPoint()?!0:!1},t.prototype.UpdateXianlvMainRedPoint=function(){UIHelper.ShowRedPoint(this.xiannvBtn,this.GetXianlvRedPoint()||this.GetTiannvRedPoint()||GameGlobal.TianShenModel.mRedPoint.IsRedPoint()||GameGlobal.LingtongAttrModel.IsRedPoint())},t.prototype.UpdateXianlvRedPoint=function(){this.UpdateXianlvMainRedPoint()},t.prototype.GetTiannvRedPoint=function(){return GameGlobal.HavingModel.mRedPoint.IsRedPoint()?!0:GameGlobal.HavingHuanModel.mRedPoint.IsRedPoint()?!0:GameGlobal.HavingLingqModel.mRedPoint.IsRedPoint()?!0:!1},t.prototype.UpdateTiannvRedPoint=function(){this.UpdateXianlvMainRedPoint()},t.prototype.UpdateTiansRedPoint=function(){this.UpdateXianlvMainRedPoint()},t.prototype.UpdateLigntongRedPoint=function(){this.UpdateXianlvMainRedPoint()},t.prototype.UpdateCityRedPoint=function(){if(Deblocking.Check(DeblockingType.TYPE_95,!0)){var e=GameGlobal.BossModel.IsRedPoint()||GameGlobal.UserFb.IsRedPoint()||GameGlobal.YingYuanModel.CanUpgrade()||GameGlobal.AcrossBossController.IsAcrossBossAct()||GameGlobal.Arena.IsRedPoint()||GameGlobal.UserBag.HasOrangeEquip()||GameGlobal.FuliModel.IsRedPoint()||GameGlobal.GodPetActiveModel.mRedPoint||GameGlobal.GodPetActiveModel.CanLottery()||GameGlobal.FriendModel.checkRedPoint();UIHelper.ShowRedPoint(this.cityBtn,e)}},t.prototype.onClick=function(e){for(var t=this.navBtn.indexOf(e.currentTarget),i=0;i<this.navBtn.length;i++)t!=i&&this.navBtn[i].visible&&this.closeWindow(i);if(4==t)return void(this.ShowCount()?ViewManager.ins().isShow(BottomSelectPanel)?ViewManager.ins().close(BottomSelectPanel):ViewManager.ins().open(BottomSelectPanel):ViewManager.ins().isShow(XianlvMainPanel)?ViewManager.ins().close(XianlvMainPanel):ViewManager.ins().open(XianlvMainPanel));ViewManager.ins().close(BottomSelectPanel),0==t&&ViewManager.ins().closePartPanel();var o=this.navBind[t];o&&(ViewManager.ins().isShow(o)?ViewManager.ins().close(o):ViewManager.ins().open(o))},t.prototype.closeWindow=function(e){this.navBind[e]&&ViewManager.ins().isShow(this.navBind[e])&&ViewManager.ins().close(this.navBind[e])},t.prototype._DoExpInit=function(){var e=GlobalConfig.ins().ExpConfig[GameGlobal.actorModel.level];if(e){var t=e.exp;this.expBar.maximum=t,this.expBar.value=GameGlobal.actorModel.exp}},t.prototype._DoExpChange=function(){var e=this,t=GlobalConfig.ins().ExpConfig[GameGlobal.actorModel.level];if(t){var i=t.exp;egret.Tween.removeTweens(this.expBar);var o=egret.Tween.get(this.expBar);return this.expBar.maximum!=i?void o.to({value:this.expBar.maximum},500).wait(200).call(function(){e.expBar.maximum=i,e.expBar.value=0,e._DoExpChange()},this):void o.to({value:GameGlobal.actorModel.exp},500)}},t.CloseNav=function(e){var i=Util.GetClass(e);if(i){var o=ViewManager.ins().getView(t);if(o){o.navBind.indexOf(i)}}},t.prototype.bossReborn=function(e,t){var i;null!=e&&(i=GameGlobal.Config.MonstersConfig[GameGlobal.Config.PublicBossConfig[e].bossid][GameGlobal.Config.MonstersConfig_keys.name],this.bossNameTxt.textFlow=TextFlowMaker.generateTextFlow("|C:"+Color.Green+"&T:"+i+"|复活了")),this.bossUpdateGroup.visible=t,this.bossUpdateGroup.touchEnabled=t},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t.VIEW_LAYER_LEVEL=ViewLayerLevel.TOP,t.BUTTON_TYPE_FIGHT=0,t.BUTTON_TYPE_CITY=1,t}(BaseEuiView);__reflect(MainBottomPanel.prototype,"MainBottomPanel");var MainPlayerInfoView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.face.source="",this.face.touchEnabled=!0,this.XinWulist.itemRenderer=ItemBaseNotName},t.prototype.RefreshHeadImg=function(){var e=SubRoles.ins().GetRoleData();e&&(this.face.source=ResDataPath.GetHeadImgName(e.job,e.sex))},t.prototype.OnOpen=function(){this.AddClick(this.face,this.onClick),this.AddClick(this.rankBtn,this.onClick),this.AddClick(this.rechargeBtn,this.onClick),this.observe(MessageDef.SUB_ROLE_CHANGE,this.UpdateContent),this.observe(MessageDef.LEVEL_CHANGE,this.UpdateContent),this.observe(MessageDef.UPDATA_VIP_EXP,this.changeExpBtn),this.observe(MessageDef.UPDATA_VIP_AWARDS,this.showVipRedPoint),this.observe(MessageDef.VIP_LEVEL_CHANGE,this.UpdateContent),this.observe(MessageDef.POWER_CHANGE,this.UpdateContent),this.observe(MessageDef.NAME_CHANGE,this.UpdateContent),this.observe(MessageDef.IS_MARRY_INFO,this.ShowXinWu),this.observe(MessageDef.PHB_REPOINT_UPDATE,this.showRankRedPoint),this.observe(MessageDef.LEVEL_CHANGE,this.showRankRedPoint),this.showRankRedPoint(),this.showVipRedPoint(),this.UpdateContent(),this.ShowXinWu()},t.prototype.UpdateContent=function(){this.RefreshHeadImg(),this.powerLabel.text=GameLogic.ins().actorModel.power.toString();var e=GameGlobal.actorModel.level||0;this.lbLev.text="Lv."+e,this.lbName.text=GameGlobal.actorModel.name,this.pingjiLabel.text=RoleShowData.GetPingJiAppId(GameGlobal.actorModel.pingji),this.JJName.text=RoleShowData.GetJinJieAppId(GameGlobal.actorModel.pingji),this.JJicon.source=ResDataPath.GetRealmIcon(GameGlobal.actorModel.pingji),this.vipBtn.setVipLv(GameGlobal.actorModel.vipLv),this.changeExpBtn()},t.prototype.showRankRedPoint=function(){UIHelper.ShowRedPoint(this.rankBtn,GameGlobal.RankingModel.isRedPoint()&&Deblocking.Check(DeblockingType.TYPE_86,!0))},t.prototype.showVipRedPoint=function(){this.redPointImg.visible=UserVip.ins().CheckRedPoint()},t.prototype.changeExpBtn=function(){this.vipBtn.setVipLv(GameGlobal.actorModel.vipLv)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.face:ViewManager.ins().open(PlayerDetailsPanel,GameGlobal.GameLogic.actorModel.actorID);break;case this.rechargeBtn:RechargeWin.Open();break;case this.rankBtn:ViewManager.ins().open(RankingWin)}},t.prototype.ShowXinWu=function(){if(this.XinWu.visible=GameGlobal.YingYuanModel.iSMarry(),this.XinWu.visible){var e=GameGlobal.Config.MarryConfig[GameGlobal.YingYuanModel.marryInfo.grade];this.XinWulist.dataProvider=new eui.ArrayCollection([e.id[0]])}},t}(BaseView);__reflect(MainPlayerInfoView.prototype,"MainPlayerInfoView");var MainTop2Panel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainTop2PanelSkin",t}return __extends(t,e),t.prototype.destoryView=function(){},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.prototype.OnOpen.call(this,t),this.playerInfo.OnOpen()},t.prototype.OnClose=function(){this.playerInfo.OnClose()},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(MainTop2Panel.prototype,"MainTop2Panel");var MainTopPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.destoryView=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MainTopPanelSkin",this.touchEnabled=!1,this._AddClick(this.god,this.onClick),this._AddClick(this.yb,this.onClick),this._AddClick(this.byb,this.onClick)},t.prototype.initData=function(){this.updateData()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GOLD_CHANGE,this.initData),this.observe(MessageDef.YB_CHANGE,this.initData),this.observe(MessageDef.BYB_CHANGE,this.initData),this.observe(MessageDef.postInitActorInfo,this.updateData),this.initData()},t.prototype.updateData=function(){this.god.label=CommonUtils.overLength(GameGlobal.actorModel.gold),GameGlobal.actorModel.yb>=1e8?this.yb.label=CommonUtils.overLength(GameGlobal.actorModel.yb):this.yb.label=GameGlobal.actorModel.yb+"",GameGlobal.actorModel.byb>=1e8?this.byb.label=CommonUtils.overLength(GameGlobal.actorModel.byb):this.byb.label=GameGlobal.actorModel.byb+""},t.prototype.onClick=function(e){switch(e.currentTarget){case this.god:ViewManager.ins().open(ExchangeMoneyWin);break;case this.yb:RechargeWin.Open();break;case this.byb:ViewManager.ins().open(ShopGoodsWarn).setData(MoneyConst.byb,1)}},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(MainTopPanel.prototype,"MainTopPanel");var GangBossModel=function(e){function t(){var t=e.call(this)||this;return t.tRankLast=null,t.status=0,t.changetime=0,t.shieldvalue=0,t.hp=0,t.hpperc=0,t.mCurRank=null,t.mBox={},t.mCollectNow={},t.mPlayerDead=0,t.regNetMsg(S2cProtocol.sc_guildboss_info,t.doInfo),t.regNetMsg(S2cProtocol.sc_guildboss_update_info,t.doUpdateInfo),t.regNetMsg(S2cProtocol.sc_guildboss_box_all,t.doBoxAll),t.regNetMsg(S2cProtocol.sc_guildboss_box_one,t.doBoxOne),t.regNetMsg(S2cProtocol.sc_guildboss_player_dead,t.doPlayerDead),t.regNetMsg(S2cProtocol.sc_guildboss_rank_now,t.doRankNow),t.regNetMsg(S2cProtocol.sc_guildboss_rewards,t.doRewards),t.regNetMsg(S2cProtocol.sc_guildboss_rank_last,t.doRankLast),t.regNetMsg(S2cProtocol.sc_guildboss_collect_all,t.doCollentAll),t.regNetMsg(S2cProtocol.sc_guildboss_collect_now,t.doCollentNow),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.OnDayTimer=function(){this.m_EndTime=null},t.prototype.doInfo=function(e){this.status=e.status,this.changetime=e.changetime,this.status==AcrossBossState.BOSS?PlayFunView.GameNotice(MainGameNoticeView.TYPE_GANG_BOSS,600,MainGameNoticeView.SHOW_TYPE_GOTO):PlayFunView.RemoveGameNotice(MainGameNoticeView.TYPE_GANG_BOSS),GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_UPDATE_INFO)},t.prototype.getEndTime=function(){if(!this.m_EndTime){var e=GameGlobal.Config.GuildBossBaseConfig.opentime[1],t=e.split(":"),i=new Date(1e3*GameServer.serverTime);i.setHours(Number(t[0]),Number(t[1]),Number(t[2]),0),this.m_EndTime=Math.floor(i.getTime()/1e3)}return Math.max(this.m_EndTime-GameServer.serverTime,0)},t.prototype.getBossRebornTime=function(){if(this.status!=AcrossBossState.REBORNING)return 0;var e=GameGlobal.Config.GuildBossBaseConfig.bossrevivetime;return Math.max(this.changetime+e-GameServer.serverTime,0)},t.prototype.doUpdateInfo=function(e){this.shieldvalue=e.shieldvalue,this.hp=e.hp,this.hpperc=e.hpperc,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_UPDATE_HP)},t.prototype.doBoxAll=function(e){this.mBox={};for(var t=0,i=e.boxinfos;t<i.length;t++){var o=i[t];this.mBox[o.id]=o}GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_BOX)},t.prototype.doBoxOne=function(e){var t=e.boxinfo.id;delete this.mCollectNow[t],delete this.mBox[t],GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_BOX)},t.prototype.doPlayerDead=function(e){this.mPlayerDead=e.deadtime+GameGlobal.Config.GuildBossBaseConfig.revivecd,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_DEAD)},t.prototype.doRankNow=function(e){this.mCurRank=e,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_RANK_NOW)},t.prototype.doRewards=function(e){GameGlobal.RaidModel.OnCrossBossResult(e)
},t.prototype.doRankLast=function(e){this.tRankLast=e,GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_CHANGE)},t.prototype.doCollentNow=function(e){var t=e.info;if(t.time)this.mCollectNow[t.boxid]||(this.mCollectNow[t.boxid]=[]),this.mCollectNow[t.boxid].push(t);else{var i=this.mCollectNow[t.boxid];if(i){for(var o=0;o<i.length;o++)if(i[o].playerid==t.playerid){i.splice(o,1);break}i.length||delete this.mCollectNow[t.boxid]}}GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_BOX_COLLENT)},t.prototype.doCollentAll=function(e){this.mCollectNow={};for(var t=0,i=e.infos;t<i.length;t++){var o=i[t];this.mCollectNow[o.boxid]||(this.mCollectNow[o.boxid]=[]),this.mCollectNow[o.boxid].push(o)}GameGlobal.MessageCenter.dispatch(MessageDef.GANGBOSS_BOX_COLLENT)},t.prototype.GetDeadTime=function(){return this.mPlayerDead?Math.max(this.mPlayerDead-GameServer.serverTime,0):0},t.prototype.ClearData=function(){this.mBox={},this.mCollectNow={},this.mPlayerDead=0},t.prototype.IsGangBossAct=function(){return Deblocking.IsDeblocking(DeblockingType.TYPE_50)&&GameGlobal.GangModel.HasGang()?0!=this.status&&4!=this.status:!1},t.prototype.enterMap=function(){this.Rpc(C2sProtocol.cs_guildboss_entermap)},t.prototype.sendChallenge=function(e){var t=new Sproto.cs_guildboss_challenge_request;t.challengeid=e,this.Rpc(C2sProtocol.cs_guildboss_challenge,t)},t.prototype.sendCollectBox=function(e){var t=new Sproto.cs_guildboss_collect_box_start_request;t.boxid=e,this.Rpc(C2sProtocol.cs_guildboss_collect_box_start,t)},t.prototype.RemoveCollentBox=function(){this.Rpc(C2sProtocol.cs_guildboss_collect_box_cancel)},t.prototype.sendRelive=function(){this.Rpc(C2sProtocol.cs_guildboss_relive)},t.prototype.sendGetLastRank=function(){this.Rpc(C2sProtocol.cs_guildboss_getranks)},t.prototype.sendGetRewards=function(e){this.Rpc(C2sProtocol.cs_guildboss_get_rewards,null,function(e){})},t}(BaseSystem);__reflect(GangBossModel.prototype,"GangBossModel");var GangMapModel=function(e){function t(){var t=e.call(this)||this;return t.mTaskInfoMap={},t.mRobotList=[],t.regNetMsg(S2cProtocol.sc_guild_map_reward,t._DoGangMapReward),t.regNetMsg(S2cProtocol.sc_guild_map_one_update,t._DoUpdateGangMapInfo),t.regNetMsg(S2cProtocol.sc_guild_robot_datas,t._DoGetRobotList),t}return __extends(t,e),t.prototype._DoGangMapReward=function(e){for(var t=0,i=e.reward;t<i.length;t++){var o=i[t];UserTips.ins().showTips("获得 "+GangMapConst.GetGangMapItemName(o.id)+"*"+o.count)}this.mGMExchangeInfo.UpdateBagInfo(e.reward),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO)},t.prototype._DoUpdateGangMapInfo=function(e){this._UpdateTaskInfo(e)},t.prototype._DoGetRobotList=function(e){this.mRobotList=e.robotlist||[]},t.prototype._UpdateTaskInfo=function(e){this.mTaskInfoMap[e.id]&&(this.mTaskInfoMap[e.id].UpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_TASKINFO),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_UPDATEENTITY))},t.prototype.SendGetMapTaskInfo=function(){var e=this,t=new Sproto.cs_guild_map_task_info_request;this.Rpc(C2sProtocol.cs_guild_map_task_info,t,function(t){for(var i=0,o=t.taskInfo;i<o.length;i++){var n=o[i],a=e.mTaskInfoMap[n.id];a||(a=new GangMapTaskInfo,e.mTaskInfoMap[n.id]=a),a.UpdateInfo(n)}GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_TASKINFO),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_MAPENTITY_INIT)},this)},t.prototype.SendFinishTask=function(e){var t=new Sproto.cs_guild_map_task_complete_request;t.taskId=e,this.Rpc(C2sProtocol.cs_guild_map_task_complete,t)},t.prototype.SendResetTask=function(e){var t=this,i=new Sproto.cs_guild_map_task_reset_request;i.taskId=e,this.Rpc(C2sProtocol.cs_guild_map_task_reset,i,function(e){e.ret&&(t._UpdateTaskInfo(e.taskInfo),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_RESET_MAPENTITY))},this)},t.prototype.SendOneKeyFinish=function(e){var t=this;GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_ONEKEYFINISH);var i=new Sproto.cs_guild_map_task_quick_request;i.taskId=e,this.Rpc(C2sProtocol.cs_guild_map_task_quick,i,function(e){e.ret&&t._UpdateTaskInfo(e.taskInfo)},this)},t.prototype.SendGainReward=function(e){var t=new Sproto.cs_guild_map_reward_request;t.taskId=e,this.Rpc(C2sProtocol.cs_guild_map_reward,t,function(e){e.ret})},t.prototype.SendGetExchange=function(){var e=this,t=new Sproto.cs_guild_map_exchange_info_request;this.Rpc(C2sProtocol.cs_guild_map_exchange_info,t,function(t){e.mGMExchangeInfo=new GangMapExchangInfo,e.mGMExchangeInfo.UpdateInfo(t.exchangeInfo),e.StartTimer(t.exchangeInfo.refreshTime||0),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO)},this)},t.prototype.SendRefreshExchange=function(){var e=this,t=new Sproto.cs_guild_map_exchange_refresh_request;this.Rpc(C2sProtocol.cs_guild_map_exchange_refresh,t,function(t){e.mGMExchangeInfo.UpdateInfo(t.exchangeInfo),e.StartTimer(t.exchangeInfo.refreshTime||0),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO)},this)},t.prototype.SendExchange=function(e){var t=this,i=new Sproto.cs_guild_map_exchange_pay_request;i.id=e,this.Rpc(C2sProtocol.cs_guild_map_exchange_pay,i,function(e){t.mGMExchangeInfo.UpdateInfo(e.exchangeInfo),GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO)},this)},t.prototype.GetTaskInfo=function(e){return this.mTaskInfoMap[e]},t.prototype.IsTaskDone=function(e){var t=this.mTaskInfoMap[e];if(!t)return!1;var i=GameGlobal.Config.GuildMapTaskConfig[t.mTaskId];return i?i.number<=t.mCount:!1},t.prototype.HasGainTaskReward=function(e){var t=this.mTaskInfoMap[e];return t?t.mRewardStatus:!1},t.prototype.CanResetTask=function(e){var t=this.mTaskInfoMap[e];if(!t)return!1;var i=GameGlobal.actorModel.vipLv,o=GameGlobal.Config.VipPrivilegeConfig[i];return o?t.mResetCount<o.buyreset:!1},Object.defineProperty(t.prototype,"gangMapExchangeInfo",{get:function(){return this.mGMExchangeInfo},enumerable:!0,configurable:!0}),t.prototype.GetGangMapItemNum=function(e){return this.mGMExchangeInfo.GetGangMapItemNum(e)},t.prototype.HasExchangeItem=function(e){return this.mGMExchangeInfo.HasExchangeItem(e)},t.prototype.CanItemExchange=function(){return GameGlobal.GangModel.HasGang()&&this.mGMExchangeInfo?this.mGMExchangeInfo.CanItemExchange():!1},t.prototype.StartPickPlantNotice=function(){GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_START_PICKPLANT_NOTICY)},t.prototype.SetAutoTask=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_AUTO_TASK,e)},t.prototype.HidePickProgressNoticy=function(){GameGlobal.MessageCenter.dispatch(MessageDef.GANGMAP_HIDEPICKPROGRESS)},t.prototype.StartTimer=function(e){TimerManager.ins().removeAll(this);var t=Math.max(e-GameServer.serverTime,0);TimerManager.ins().doTimer(1e3*t,1,this.SendGetExchange,this)},t}(BaseSystem);__reflect(GangMapModel.prototype,"GangMapModel");var GangModel=function(e){function t(){var t=e.call(this)||this;return t.mGangId=0,t.mAppliedMap={},t.mMemberList=[],t.mSkillMap={},t.gangRecordInfo=new GangRecordInfo,t.gangProtectorTaskInfo=[],t.mAppliedCount=0,t.mGangBossInfo=new GangBossInfo,t.panTaoHuiList=[],t.panTaoHuiExp=0,t.rewardMark=0,t.getPantao=!1,t.mRedPoint=new GangModelRedPoint,t.mMyGangInfo=new MyGangInfo,t.regNetMsg(S2cProtocol.sc_guild_info,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_guild_list,t._RecvGetBangList),t.regNetMsg(S2cProtocol.sc_guild_create_ret,t._RecvCreateGang),t.regNetMsg(S2cProtocol.sc_guild_apply_list,t._RecvAppliedGangList),t.regNetMsg(S2cProtocol.sc_guild_playerinfo,t._RecvMyOtherInfo),t.regNetMsg(S2cProtocol.sc_guild_apply,t._RecvApplicantList),t.regNetMsg(S2cProtocol.sc_guild_notice_apply,t._RecvNoticeJionGang),t.regNetMsg(S2cProtocol.sc_guild_autoadd_ret,t._RecvSetAutoJoin),t.regNetMsg(S2cProtocol.sc_guild_skill_info,t._RecvSeSkillData),t.regNetMsg(S2cProtocol.sc_guild_skill_learn_ret,t._RecvSeLearnSkillData),t.regNetMsg(S2cProtocol.sc_guild_members,t._RecvMemberList),t.regNetMsg(S2cProtocol.sc_guild_change_office_ret,t._RecvOfficeChange),t.regNetMsg(S2cProtocol.sc_guild_kick_ret,t._RecvKickOut),t.regNetMsg(S2cProtocol.sc_guild_fund,t._RecvCapitalChange),t.regNetMsg(S2cProtocol.sc_guild_join_info,t._RecvJoinInfo),t.RegNetMsgs(S2cProtocol.player_guild_change,t._RecvGuildChange),t.regNetMsg(S2cProtocol.sc_guild_change_notice_ret,t._RecvNoticeChange),t.regNetMsg(S2cProtocol.sc_guild_rename_ret,t._RecvChangeGangName),t.regNetMsg(S2cProtocol.sc_guild_record_data,t._RecvRecordInfo),t.regNetMsg(S2cProtocol.sc_guild_record_add,t._RecvAddRecordInfo),t.regNetMsg(S2cProtocol.sc_guild_donate_ret,t._RecvDonateData),t.regNetMsg(S2cProtocol.sc_guild_donate_info,t._RecvContributeCount),t.regNetMsg(S2cProtocol.sc_guild_protector_info,t._RecvProtectorData),t.regNetMsg(S2cProtocol.sc_guild_boss_info,t._RecvGangBossData),t.regNetMsg(S2cProtocol.sc_guild_peach_info,t._panTaoInfo),t.regNetMsg(S2cProtocol.sc_guild_peach_record,t._panTaoTol),t.regNetMsg(S2cProtocol.sc_guild_peach_record_add,t._addPantaoInfo),t.regNetMsg(S2cProtocol.sc_guild_protector_task_info,t._RecvProtectorTaskData),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype.SendGetPanTaoHuiInfo=function(){this.Rpc(C2sProtocol.cs_guild_peach_info)},t.prototype._panTaoInfo=function(e){this.rewardMark=e.rewardMark,this.getPantao=e.eatStatus,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_PANTAOINFO)},t.prototype._panTaoTol=function(e){this.panTaoHuiList=e.eatRecord,this.panTaoHuiExp=e.peachExp,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_PANTAOINFO)},t.prototype._addPantaoInfo=function(e){this.panTaoHuiList.push(e.eatRecord),this.panTaoHuiExp=e.peachExp,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_PANTAOINFO)},t.prototype.panTaoeatPeach=function(e){var t=GlobalConfig.ins().GuildPeachConfig[e];if(Checker.Money(t.cost.id,t.cost.count,Checker.YUNBAO_FRAME)){if(this.getPantao)return void UserTips.ins().showTips("今日已使用过该物品");var i=new Sproto.cs_guild_peach_eat_request;i.id=e,this.Rpc(C2sProtocol.cs_guild_peach_eat,i)}},t.prototype.getGangLv=function(){var e=0;return this.myGangInfo&&this.myGangInfo.mLevel&&(e=this.myGangInfo.mLevel),e},t.prototype.getPanTaoRed=function(e){return BitUtil.Has(this.rewardMark,e-1)?GlobalConfig.ins().GuildPeachRewardConfig[e].exp>this.panTaoHuiExp?1:2:!1},t.prototype.getPanTaoJl=function(e){return BitUtil.Has(this.rewardMark,e-1)?GlobalConfig.ins().GuildPeachRewardConfig[e].exp>this.panTaoHuiExp?(UserTips.ins().showTips("未达到所需蟠桃值"),1):2:(UserTips.ins().showTips("奖励已领取"),!1)},t.prototype.panTaoBoxPeach=function(e){if(!BitUtil.Has(this.rewardMark,e-1))return void UserTips.ins().showTips("奖励已领取");if(GlobalConfig.ins().GuildPeachRewardConfig[e].exp>this.panTaoHuiExp)return void UserTips.ins().showTips("未达到所需蟠桃值");var t=new Sproto.cs_guild_peach_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_guild_peach_reward,t)},t.prototype._DoInitInfo=function(e){this.mGangId=e.id,this.mGangName=e.name,this.mMyGangInfo.UpdateInfo(e.summary,e.variable),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_INIT),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_BASE_INFO)},t.prototype._RecvGetBangList=function(e){this.mReceiveCount=e.receiveCount;e.guilds;this.mGangList=new Array;for(var t=1,i=0,o=e.guilds;i<o.length;i++){var n=o[i],a=new GangInfo;a.UpdateInfo(n,t),this.mGangList.push(a),t++}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_LIST)},t.prototype._RecvCreateGang=function(e){0==e.result&&(this.mGangId=e.id,this.Rpc(C2sProtocol.cs_guild_getinfo),GameGlobal.GangModel.SendGetPanTaoHuiInfo(),GameGlobal.GangModel.sendGetSkillInfos(),GameGlobal.GangModel.sendGetProtectorInfo(),GameGlobal.GangMapModel.SendGetExchange(),GameGlobal.GuildTeamModel.SendGetInfos(),GameGlobal.GangModel.sendGetGangBossInfo(),this._GangIdChange())},t.prototype._RecvAppliedGangList=function(e){this.mAppliedMap={},this.mAppliedCount=e.guilds.length;for(var t=0,i=e.guilds;t<i.length;t++){var o=i[t],n=this.mAppliedMap[o.id];n||(this.mAppliedMap[o.id]=o.id)}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_APPLIED_LIST)},t.prototype._RecvMyOtherInfo=function(e){this.mMyGangInfo&&this.mMyGangInfo.UpdateOtherInfo(e)},t.prototype._RecvApplicantList=function(e){this.mApplicantList=new Array;for(var t=0,i=e.applyinfo;t<i.length;t++){var o=i[t],n=new ApplicantInfo;n.UpdateInfo(o),this.mApplicantList.push(n)}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_APPLICANT_LIST)},t.prototype._RecvNoticeJionGang=function(e){return 0==e.result?(this.mGangId=0,void ViewManager.ins().close(GangListWin)):(this.mGangId=e.id,this.Rpc(C2sProtocol.cs_guild_getinfo),GameGlobal.GangModel.SendGetPanTaoHuiInfo(),GameGlobal.GangModel.sendGetSkillInfos(),GameGlobal.GangModel.sendGetProtectorInfo(),GameGlobal.GangMapModel.SendGetExchange(),GameGlobal.GuildTeamModel.SendGetInfos(),GameGlobal.GangModel.sendGetGangBossInfo(),void this._GangIdChange())},t.prototype._RecvSetAutoJoin=function(e){this.mMyGangInfo.UpdateAutoJoinInfo(e.autoJoin,e.needPower),UserTips.ins().showTips("设置成功")},t.prototype._RecvSeSkillData=function(e){for(var t=e.skillInfos,i=0,o=t;i<o.length;i++){var n=o[i],a=this.mSkillMap[n.posId];a||(a=new GangSkillInfo,this.mSkillMap[n.posId]=a),a.UpdateInfo(n)}t=t.sort(GangConst.sortSkill),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_SKILL_UP,t)},t.prototype._RecvSeLearnSkillData=function(e){var t=e.skillInfo,i=this.mSkillMap[t.posId];i&&i.UpdateInfo(t),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_SKILL_LEARN_UP,t)},t.prototype._RecvMemberList=function(e){this.mMemberList=new Array;for(var t=0,i=e.members;t<i.length;t++){var o=i[t],n=new GangMemberInfo;n.UpdateInfo(o),this.mMemberList.push(n)}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_MEMBER_LIST)},t.prototype._RecvOfficeChange=function(e){var t=e.playerid,i=e.office;t==GameGlobal.actorModel.actorID&&(this.myGangInfo.mOffice=i);for(var o=0,n=this.mMemberList;o<n.length;o++){var a=n[o];if(a.mPlayerId==t){a.mOffice=i;break}}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_MEMBER_LIST),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_MEMBER_INFO)},t.prototype._RecvKickOut=function(e){for(var t=e.playerid,i=0,o=0,n=this.mMemberList;o<n.length;o++){var a=n[o];if(a.mPlayerId==t){this.mMemberList.splice(i,1);break}i++}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_MEMBER_LIST)},t.prototype._RecvCapitalChange=function(e){this.myGangInfo&&(this.myGangInfo.mCapital=e.fund,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_BASE_INFO))},t.prototype._RecvJoinInfo=function(){this.SendGetApplicantList()},t.prototype._RecvGuildChange=function(e){var t=this.mGangId;this.mGangId=e.guildID,this.mGangName=e.guildName,t&&this.resetInfo(),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_EXIT_NOTICE)},t.prototype._RecvNoticeChange=function(e){this.mMyGangInfo.mNotice=e.text,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_BASE_INFO)},t.prototype._RecvChangeGangName=function(e){return e.errorInfo?void UserTips.ins().showTips(e.errorInfo):(this.mMyGangInfo.mGangName=e.newGuildName,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_BASE_INFO),void GameGlobal.MessageCenter.dispatch(MessageDef.GANG_CHANGE_NAME))},t.prototype._RecvRecordInfo=function(e){var t=e.records,i=[];if(null!=t)for(var o=0;o<t.length;o++){var n=t[o].type;n==GangRecordInfo.History?this.gangRecordInfo.addRecordToString(t[o]):n==GangRecordInfo.Chat&&i.push(t[o].chatRecord)}i.length&&GameGlobal.Chat.DoGuildMessagess(i),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATA_RECORD)},t.prototype._RecvAddRecordInfo=function(e){var t=e.record.type;t==GangRecordInfo.History?(this.gangRecordInfo.addRecordToString(e.record),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATA_RECORD)):t==GangRecordInfo.Chat&&GameGlobal.Chat.DoGuildMessages(e.record.chatRecord)},t.prototype._RecvDonateData=function(e){e.result&&(this.mCoutributeCount=e.totalNum,UserTips.ins().showTips("捐献成功"),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_CONTRIBUTECOUNT))},t.prototype._RecvContributeCount=function(e){this.mCoutributeCount=e.totalNum,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_CONTRIBUTECOUNT)},t.prototype._RecvProtectorData=function(e){this.mProtectorInfo=new GangProtectorInfo,this.mProtectorInfo.parser(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATA_PROTECTOR_INFO,e)},t.prototype._RecvProtectorTaskData=function(e){null!=e.taskinfos&&(this.gangProtectorTaskInfo=e.taskinfos,GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATA_PROTECTOR_TASK_INFO,e))},t.prototype._RecvGangBossData=function(e){this.mGangBossInfo.UpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATA_GANG_BOSS_INFO,e)},t.prototype._GangIdChange=function(){GameGlobal.MessageCenter.dispatch(MessageDef.GANG_ID_CHANGE)},t.prototype.SendGetPlayerInfo=function(){this.Rpc(C2sProtocol.cs_guild_getplayerinfo)},t.prototype.SendGetGangBaseInfo=function(){this.Rpc(C2sProtocol.cs_guild_getinfo)},t.prototype.SendCreateGang=function(e,t){var i=new Sproto.cs_guild_create_request;i.id=e,i.name=t,this.Rpc(C2sProtocol.cs_guild_create,i)},t.prototype.sendChangeName=function(e){var t=new Sproto.cs_guild_rename_request;t.guildName=e,this.Rpc(C2sProtocol.cs_guild_rename,t)},t.prototype.sendGetSkillInfos=function(){var e=new Sproto.cs_guild_skill_info_request;this.Rpc(C2sProtocol.cs_guild_skill_info,e)},t.prototype.sendLearnGangSkill=function(){var e=new Sproto.cs_guild_skill_learn_request;this.Rpc(C2sProtocol.cs_guild_skill_learn,e)},t.prototype.SendGetGangList=function(){this.Rpc(C2sProtocol.cs_guild_getlist)},t.prototype.SendGetApplyList=function(){this.Rpc(C2sProtocol.cs_guild_apply_list)},t.prototype.SendJoinGang=function(e){var t=new Sproto.cs_guild_join_request;t.id=e,this.Rpc(C2sProtocol.cs_guild_join,t)},t.prototype.SendSetApply=function(e,t){var i=new Sproto.cs_guild_setapply_request;i.playerid=e,i.result=t?1:0,this.Rpc(C2sProtocol.cs_guild_setapply,i)},t.prototype.SendAutoJoin=function(e,t){var i=new Sproto.cs_guild_setautoadd_request;i.auto=e,i.power=t,this.Rpc(C2sProtocol.cs_guild_setautoadd,i)},t.prototype.SendGetApplicantList=function(){this.Rpc(C2sProtocol.cs_guild_getapply)},t.prototype.SendGetMemberList=function(){this.Rpc(C2sProtocol.cs_guild_getmembers)},t.prototype.SendExchangOffice=function(e,t){var i=new Sproto.cs_guild_change_office_request;i.playerid=e,i.office=t,this.Rpc(C2sProtocol.cs_guild_change_office,i)},t.prototype.SendKickOutMember=function(e){var t=new Sproto.cs_guild_kick_request;t.playerid=e,this.Rpc(C2sProtocol.cs_guild_kick,t)},t.prototype.SendExit=function(){this.Rpc(C2sProtocol.cs_guild_quit)},t.prototype.SendModifyNotice=function(e){var t=new Sproto.cs_guild_change_notice_request;t.text=e,this.Rpc(C2sProtocol.cs_guild_change_notice,t)},t.prototype.SendGetJuanXuanList=function(e){var t=new Sproto.cs_guild_donate_request;t.id=e,this.Rpc(C2sProtocol.cs_guild_donate,t)},t.prototype.sendGetProtectorInfo=function(){var e=new Sproto.cs_guild_protector_info_request;this.Rpc(C2sProtocol.cs_guild_protector_info,e)},t.prototype.sendProtectorUpLv=function(){var e=new Sproto.cs_guild_protector_uplevel_request;this.Rpc(C2sProtocol.cs_guild_protector_uplevel,e)},t.prototype.sendGetProtectorEveryDataAward=function(e){var t=new Sproto.cs_guild_protector_everyday_reward_request;t.rewardId=e,this.Rpc(C2sProtocol.cs_guild_protector_everyday_reward,t)},t.prototype.sendGetGangBossInfo=function(){var e=new Sproto.cs_guild_boss_info_request;this.Rpc(C2sProtocol.cs_guild_boss_info,e)},t.prototype.sendPKGangBoss=function(){var e=new Sproto.cs_guild_boss_pk_request;this.Rpc(C2sProtocol.cs_guild_boss_pk,e)},t.prototype.sendGetGangBossAward=function(){var e=new Sproto.cs_guild_boss_reward_request;this.Rpc(C2sProtocol.cs_guild_boss_reward,e)},t.prototype.SendRecruitMember=function(){var e=new Sproto.cs_guild_member_recruit_request;this.Rpc(C2sProtocol.cs_guild_member_recruit,e)},t.prototype.resetInfo=function(){this.mMyGangInfo=new MyGangInfo,this.mGangList=null,this.mAppliedMap={},this.mApplicantList=null,this.mMemberList=[],this.mSkillMap={},this.mProtectorInfo=null,this.gangRecordInfo=new GangRecordInfo,this.gangProtectorTaskInfo=[],this.panTaoHuiList=[],this.panTaoHuiExp=0,this.rewardMark=0,this.getPantao=!1,this.mGangBossInfo=new GangBossInfo,this._GangIdChange()},Object.defineProperty(t.prototype,"gangList",{get:function(){return this.mGangList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myGangInfo",{get:function(){return this.mMyGangInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applicantList",{get:function(){return this.mApplicantList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"memberList",{get:function(){return this.mMemberList},enumerable:!0,configurable:!0}),t.prototype.IsApplied=function(e){return null!=this.mAppliedMap[e]},t.prototype.HasGang=function(){return this.mGangId>0},Object.defineProperty(t.prototype,"protectorInfo",{get:function(){return this.mProtectorInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"receiveCount",{get:function(){return this.mReceiveCount},enumerable:!0,configurable:!0}),t.prototype.HandleApplicant=function(e){for(var t=0,i=0,o=this.mApplicantList;i<o.length;i++){var n=o[i];if(n.mPlayerId==e){this.mApplicantList.splice(t,1);break}t++}GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_APPLICANT_LIST)},t.prototype.GetMemberInfoByPlayerId=function(e){for(var t=0,i=this.mMemberList;t<i.length;t++){var o=i[t];if(o.mPlayerId==e)return o}},t.prototype.GetDeputyCount=function(){for(var e=0,t=0,i=this.mMemberList;t<i.length;t++){var o=i[t];o.mOffice==GangConst.DEPUTY_OFFICE&&e++}return e},t.prototype.HasPantao=function(){return this.HasGang()?!this.getPantao:!1},t.prototype.HasPanTaoAward=function(){if(!this.HasGang())return!1;for(var e in GameGlobal.Config.GuildPeachRewardConfig){var t=parseInt(e),i=GameGlobal.Config.GuildPeachRewardConfig[e];if(BitUtil.Has(this.rewardMark,t-1)&&i.exp<=this.panTaoHuiExp)return!0}return!1},t.prototype.CanGangSkillUpgrade=function(){if(!this.HasGang())return!1;for(var e in this.mSkillMap){var t=this.mSkillMap[e];if(t.CanUpgrade())return!0}return!1},t.prototype.CanGangProtectorUpgrade=function(){if(!this.HasGang()||!this.mProtectorInfo)return!1;var e=GangConst.GetProtectorUpgradeExp(this.mProtectorInfo.protectorLv+1);return-1==e?!1:this.mProtectorInfo.totalActive>=e},t.prototype.HasDailyAward=function(){if(!this.HasGang()||!this.mProtectorInfo)return!1;for(var e in GameGlobal.Config.GuildEverydayConfig){var t=GameGlobal.Config.GuildEverydayConfig[e];if(t.exp<=this.mProtectorInfo.todayActive&&(this.mProtectorInfo.rewardMark&Math.pow(2,t.id-1))>0)return!0}return!1},t.prototype.HasContributeAward=function(){if(!this.HasGang()||null==this.mCoutributeCount)return!1;if(this.mCoutributeCount>=GameGlobal.Config.GuildConfig.maxcount)return!1;for(var e in GameGlobal.Config.GuildDonateConfig){var t=GameGlobal.Config.GuildDonateConfig[e],i=t.cost;if(Checker.Data(i,!1))return!0}return!1},t.prototype.HasGangBoss=function(){return this.HasGang()?this.mGangBossInfo.mHasAward||1==this.mGangBossInfo.mStatus:!1},t.prototype.HasApplicant=function(){return this.HasGang()&&this.mApplicantList?this.mApplicantList.length>0:!1},t.prototype.IsGangBattleOpen=function(){return this.HasGang()?GameGlobal.ActivityModel.GetActivityOpenFlag(ActivityModel.TYPE_GANG_BATTLE):!1},t.prototype.OpenGangView=function(){GameGlobal.GangModel.HasGang()?ViewManager.ins().open(GangMainWin):ViewManager.ins().open(GangListWin)},t}(BaseSystem);__reflect(GangModel.prototype,"GangModel");var GangModelRedPoint=function(e){function t(){var t=e.call(this)||this;return t.mRedPointMap={},t}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.GANG_UPDATE_BASE_INFO,MessageDef.GANG_UPDATE_APPLICANT_LIST,MessageDef.GANG_UPDATE_PANTAOINFO,MessageDef.GANG_SKILL_UP,MessageDef.GANG_SKILL_LEARN_UP,MessageDef.GANG_UPDATA_PROTECTOR_INFO,MessageDef.GANGMAP_UPDATE_EXCHANGEINFO,MessageDef.GUILD_CONTRIB_UPDATE,MessageDef.ITEM_COUNT_CHANGE,MessageDef.GANG_EXIT_NOTICE,MessageDef.GANG_UPDATE_FBCOUNT,MessageDef.GANGBOSS_UPDATE_INFO,MessageDef.GANG_UPDATE_CONTRIBUTECOUNT,MessageDef.ACTIVITY_LIST_INFO,MessageDef.GANG_ID_CHANGE]},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e;var e},t.prototype.OnChange=function(e){e==t.INDEX_ACT&&GameGlobal.MessageCenter.dispatch(MessageDef.GANG_ALL_NOTICE)},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mRedPointMap)if(this.mRedPointMap[e])return!0;return!1},t.prototype.DoActive=function(){this.mRedPointMap[t.VIEW_APPILICANT]=GameGlobal.GangModel.HasApplicant(),this.mRedPointMap[t.CONTRIBUTE]=GameGlobal.GangModel.HasContributeAward(),this.mRedPointMap[t.GUARD_UPGRADE]=GameGlobal.GangModel.CanGangProtectorUpgrade(),this.mRedPointMap[t.DAILY_AWARD]=GameGlobal.GangModel.HasDailyAward(),this.mRedPointMap[t.SKILL_UPGRADE]=GameGlobal.GangModel.CanGangSkillUpgrade(),this.mRedPointMap[t.EAT_PEACH]=GameGlobal.GangModel.HasPantao(),this.mRedPointMap[t.PEACH_AWARD]=GameGlobal.GangModel.HasPanTaoAward(),this.mRedPointMap[t.GANG_MONSTER]=GameGlobal.GangBossModel.IsGangBossAct(),this.mRedPointMap[t.GANG_MAP_ASSEMBLED]=GangConst.IsGangMapAssembledTIme(),this.mRedPointMap[t.GANG_EXCHANGE]=GameGlobal.GangMapModel.CanItemExchange(),this.mRedPointMap[t.GANG_BATTLE]=GameGlobal.GangModel.IsGangBattleOpen(),this.mRedPointMap[t.GANG_FUBEN]=GameGlobal.GuildTeamModel.GetProfitCount()>0,this.mRedPointMap[t.NO_GANG]=!GameGlobal.GangModel.HasGang()},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.mRedPointMap[e]},t.INDEX_ACT=0,t.VIEW_APPILICANT=1,t.CONTRIBUTE=2,t.GUARD_UPGRADE=3,t.DAILY_AWARD=4,t.SKILL_UPGRADE=5,t.EAT_PEACH=6,t.PEACH_AWARD=7,t.GANG_MONSTER=8,t.GANG_MAP_ASSEMBLED=9,t.GANG_EXCHANGE=10,t.GANG_BATTLE=11,t.GANG_FUBEN=12,t.NO_GANG=13,t}(IRedPoint);__reflect(GangModelRedPoint.prototype,"GangModelRedPoint");var GangConst=function(){function e(){}return e.GetMaxMemberCount=function(e){var t=GameGlobal.Config.GuildLevelConfig[e];return t?t.people||0:0},e.GetMaxCapital=function(e){var t=GameGlobal.Config.GuildLevelConfig[e];return t?t.upExp||0:0},e.GetAuditingRight=function(e){return 0!=GameGlobal.Config.GuildConfig.examine[e]},e.GetKickOutRight=function(e){return 0!=GameGlobal.Config.GuildConfig.expel[e]},e.GetModifyNoticeRight=function(e){return 0!=GameGlobal.Config.GuildConfig.notice[e]},e.sortSkill=function(e,t){return e.posId>t.posId?1:e.posId<t.posId?-1:0},e.GetFuBenBossSkin=function(e){return AppearanceConfig.GetUIPath(e)},e.GetSkillIcon=function(e,t){void 0===t&&(t=0);var i=GameGlobal.Config.GuildCommonSkillConfig[t][e];if(i)return ResDataPath.GetItemFullPath(i.icon)},e.GetProtectorUpgradeExp=function(e){var t=GameGlobal.Config.GuildActiveConfig[e];return t?t.exp:-1},e.IsGangMapAssembledTIme=function(){if(!GameGlobal.GangModel.HasGang())return!1;var e=new Date(1e3*GameServer.serverTime),t=e.getHours(),i=e.getMinutes(),o=GameGlobal.Config.GuideConfig.doubletime;if(!o)return!1;var n=o.star.split(":"),a=parseInt(n[0]),r=parseInt(n[1]);n=o.ends.split(":");var s=parseInt(n[0]),l=parseInt(n[1]);return t==a?i>=r:t==s?l>=i:t>a&&s>t?!0:!1},e.OFFICE_TO_TEXT=(_a={},_a[0]="成员",_a[1]="副帮主",_a[2]="帮主",_a),e.MASTER_OFFICE=2,e.DEPUTY_OFFICE=1,e.MEMBER_OFFICE=0,e}();__reflect(GangConst.prototype,"GangConst");var _a,MyGangInfo=function(){function e(){this.mGangId=0,this.mLevel=0,this.mMemberCount=0,this.mGangName="",this.mGangMasterName="",this.mNeedPower=0,this.mTotalPower=0,this.mCapital=0,this.mNotice="",this.mAutoJoin=0,this.mOffice=0,this.mCurContribute=0,this.mContribute=0}return e.prototype.UpdateInfo=function(e,t){e&&(this.mGangId=e.id,this.mLevel=t.level,this.mMemberCount=e.playercount,this.mGangName=e.name,this.mGangMasterName=e.leaderinfo.playername,this.mTotalPower=e.totalpower,this.mCapital=t.fund,this.mNotice=t.notice,this.mAutoJoin=t.autoJoin,this.mNeedPower=t.needPower)},e.prototype.UpdateOtherInfo=function(e){this.mOffice=e.office,this.mCurContribute=e.curcontribute,this.mContribute=e.contribute},e.prototype.UpdateAutoJoinInfo=function(e,t){this.mAutoJoin=e,this.mNeedPower=t},e}();__reflect(MyGangInfo.prototype,"MyGangInfo");var GangInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e,t){void 0===t&&(t=0),this.mGangId=e.id,this.mLevel=e.level,this.mMemberCount=e.playercount,this.mGangName=e.name,this.mGangMasterName=e.leaderinfo.playername,this.mNeedPower=e.needPower,this.mTotalPower=e.totalpower,this.mSex=e.leaderinfo.sex,this.mJob=e.leaderinfo.job,this.mIdx=t},e}();__reflect(GangInfo.prototype,"GangInfo");var GangMemberInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mPlayerId=e.playerid,this.mPlayerName=e.playername,this.mOffice=e.office,this.mJob=e.job,this.mSex=e.sex,this.mVipLevel=e.vip,this.mContribute=e.contribute,this.mTodayContribute=e.todayContri,this.mPower=e.power,this.mLogoutTime=e.logouttime},e}();__reflect(GangMemberInfo.prototype,"GangMemberInfo");var ApplicantInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mPlayerId=e.playerid,this.mVipLevel=e.vip,this.mJob=e.job,this.mSex=e.sex,this.mPower=e.power,this.mPlayerName=e.playername,this.mLevel=e.level,this.mLogoutTime=e.logouttime},e}();__reflect(ApplicantInfo.prototype,"ApplicantInfo");var GangSkillInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mPosId=e.posId,this.mLevel=e.level},e.prototype.CanUpgrade=function(){var e=GameGlobal.Config.GuildCommonSkillConfig[this.mLevel+1];if(!e)return!1;var t=e[this.mPosId];if(!t||!t.cost)return!1;var i=t.cost;return Checker.Money(i.id,i.count,!1)},e}();__reflect(GangSkillInfo.prototype,"GangSkillInfo");var GangProtectorInfo=function(){function e(){this.todayActive=0,this.totalActive=0,this.protectorLv=0}return e.prototype.parser=function(e){this.todayActive=e.todayActive||0,this.totalActive=e.totalActive||0,this.protectorLv=e.protectorLv||0,this.rewardMark=e.rewardMark},e}();__reflect(GangProtectorInfo.prototype,"GangProtectorInfo");var GangBossInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mStatus=e.status,this.mHasAward=e.canreward},e}();__reflect(GangBossInfo.prototype,"GangBossInfo");var GangRecordInfo=function(){function e(){this.chatRecords=[],this.historyRecords=[]}return e.prototype.addRecordToString=function(t){t.type==e.History?this.historyRecords.unshift(t.historyRecord):t.type==e.History&&this.chatRecords.unshift(t.chatRecord)},e.prototype.getTypeName=function(e,t,i){var o="",n="|C:0x019704&T:",a="|C:0xdb0000&T:",r=1e3*t,s=new Date(r),l=s.getHours()<10?"0"+s.getHours():s.getHours(),c=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes();switch(o=s.getMonth()+1+"月"+s.getDate()+"日"+l+":"+c,o+="   [|C:0x2f6ff6&T:"+i+"|] ",e){case 1:o+=n+"加入了| 帮会";break;case 2:o+=n+"离开了| 帮会";break;case 3:o+=a+"被踢出了| 帮会";break;case 4:o+="被任命为副会长";break;case 5:o+="成为新的会长"}return o},e.History=1,e.Chat=2,e}();__reflect(GangRecordInfo.prototype,"GangRecordInfo");var GangMapConst=function(){function e(){}return e.GetGangMapItemName=function(e){var t=GameGlobal.Config.GuildGitemConfig[e];return t?t.name:""},e.GetGangMapEntityId=function(e){var t=this.GetGangMapMonsterConfig(e);return t?t.pid:0},e.GetGangMapTaskId=function(e){for(var t in GameGlobal.Config.GuildMapTaskConfig){var i=GameGlobal.Config.GuildMapTaskConfig[t];if(i.type==e)return i.id}},e.GetGangMapMonsterConfig=function(e){var t,i=GameGlobal.actorModel.level;for(var o in GameGlobal.Config.GuildMonsterConfig){var n=GameGlobal.Config.GuildMonsterConfig[o];if(t=n[e],t.level>i)break}return t},e.TYPE_MONSTER=0,e.TYPE_PLANT=1,e}();__reflect(GangMapConst.prototype,"GangMapConst");var StartMain=function(){function e(){var t=this;this.mIsPauseApp=!1,this.UpErrorLog(),egret.lifecycle.onPause=function(){t.mIsPauseApp=!0,GameGlobal.SoundManager.UpdateBgOn()},egret.lifecycle.onResume=function(){t.mIsPauseApp=!1,GameGlobal.SoundManager.UpdateBgOn()},e.instance=this,LocationProperty.init(),GameSocket.ins(),this.Init()
}return e.prototype.UpErrorLog=function(){if(!window.closeError){window.submitError||(window.submitError=this.SubmitError),window.submitTime=0,window.errorstr="";var e="main.*.min\\.js";window.onerror=function(){var t=arguments[1]||"";if(null!=t.match(e)){var i=arguments[4]?arguments[4].stack:"";-1==window.errorstr.indexOf(i)&&(""!=window.errorstr&&(window.errorstr+="^^^"),window.errorstr+=i),egret.getTimer()-window.submitTime>5e3&&window.submitError()}return!1}}},e.prototype.SubmitError=function(){try{if(!window.errorstr)return;var e=GameGlobal.actorModel?GameGlobal.actorModel.actorID:0,t=GameGlobal.actorModel?GameGlobal.actorModel.name:"",i=void 0;i=WindowData._GetPlatformId()+"|"+Main.Instance.playerServerData.data.player.username+"|"+e+"|"+t+"|"+Main.Instance.mConnectServerData.id+"|"+GameGlobal.actorModel.level,i+="||"+window.errorstr;var o=window.__CONFIG__.__ERROR_UP_URL__||"https://sdk.api.mjh5.com/sdk/into_log",n=new egret.HttpRequest;n.open(o,egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("gameid="+LocationProperty.VerPlat()+"&platformid="+WindowData._GetPlatformId()+"&title=error&content="+ccode.encrypt(encodeURI(i),"123")),window.submitTime=egret.getTimer(),window.errorstr=""}catch(a){console.error(a)}},e.RunGame=function(){new e},e.prototype.Init=function(){egret.MainContext.instance.stage.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.MainContext.instance.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),Sproto.SprotoCore.Init(),Sproto.SprotoSender.Init((new C2sProtocol).GetProtocol()),Sproto.SprotoReceiver.Init((new S2cProtocol).GetProtocol()),GameGlobal.initModule(),ResVersionManager.ins(),RedPointMgr.Init(),ResMgr.Init(),ResMgr.GmInit(),e.LoadResVersionComplate()},e.LoadResVersionComplate=function(){Main.Instance.UpdateLoadingUI(!1,"加载配置文件",.4,1,5e3),ResourceUtils.ins().addConfig("resource/default.res.json","resource/"),ResourceUtils.ins().loadConfig(e.instance.onConfigComplete,e.instance)},e.prototype.onConfigComplete=function(){Main.Instance.UpdateLoadingUI(!1,"加载主题文件",.6,1,5e3);var e=new eui.Theme("resource/default.thm.json",egret.MainContext.instance.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){RES.destroyRes("resource/default.thm.json");new GameApp(function(){Main.Instance.UpdateLoadingUI(!1,"进入游戏",1,1,5),GameSocket.ins().login(Main.Instance.mConnectServerData.ip)})},e}();__reflect(StartMain.prototype,"StartMain");var MainTestLogin=function(){function e(){}return e.GetLoginView=function(e){var t=this,i=new eui.Group;i.width=480,i.height=800;var o=new eui.Rect;o.fillColor=Color.White,o.width=480,o.height=800,o.touchEnabled=!1,i.addChild(o);var n=new eui.Rect;n.fillColor=Color.Black,n.alpha=.5,n.horizontalCenter=0,n.verticalCenter=0,n.width=300,n.height=50,o.touchEnabled=!1,i.addChild(n);var a=new eui.EditableText;a.horizontalCenter=n.horizontalCenter,a.verticalCenter=n.verticalCenter,a.width=n.width,a.height=n.height,a.textAlign="center",a.verticalAlign=egret.VerticalAlign.MIDDLE,a.text=egret.localStorage.getItem("account"),i.addChild(a);var r=new eui.Rect;r.fillColor=Color.Black,r.horizontalCenter=0,r.verticalCenter=100,r.width=150,r.height=50,r.touchEnabled=!1,i.addChild(r);var s=new eui.Label;s.text="开始游戏",s.horizontalCenter=r.horizontalCenter,s.verticalCenter=r.verticalCenter,s.width=r.width,s.height=r.height,s.textAlign="center",s.verticalAlign=egret.VerticalAlign.MIDDLE,i.addChild(s);var l=function(){LocationProperty.urlParam.token=a.text,egret.localStorage.setItem("account",a.text),i.parent.removeChild(i),s.removeEventListener(egret.TouchEvent.TOUCH_TAP,l,t),KeyboardUtils.ins().removeKeyDown(c,t),e&&e()},c=function(e){e==Keyboard.ENTER&&l()};return s.addEventListener(egret.TouchEvent.TOUCH_TAP,l,this),KeyboardUtils.ins().addKeyDown(c,this),i},e}();__reflect(MainTestLogin.prototype,"MainTestLogin");var GangApplyListWin=function(e){function t(){var t=e.call(this)||this;t.skinName="GangApplyListSkin",t.commonWindowBg.SetTitle("申请列表"),t._AddClick(t.btnSet,t._OnClick),GameGlobal.GangModel.SendGetApplicantList();var i=GameGlobal.GangModel.myGangInfo;return GangConst.GetAuditingRight(i.mOffice)||(t.groupSetting.visible=!1),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.listApply.itemRenderer=GangApplyItem,this.input.restrict="0-9"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANG_UPDATE_APPLICANT_LIST,this.UpdateContent),this.commonWindowBg.OnAdded(this),this.UpdateSettingInfo()},t.prototype.OnClose=function(){MainBottomPanel.CloseNav(this)},t.prototype._OnClick=function(e){var t=parseInt(this.input.text);if(0/0==t)return void UserTips.ins().showTips("请输入正确的战斗力");var i=this.checkBox.selected?1:0;GameGlobal.GangModel.SendAutoJoin(i,t)},t.prototype.UpdateContent=function(){var e=GameGlobal.GangModel.applicantList;this.listApply.dataProvider=new eui.ArrayCollection(e)},t.prototype.UpdateSettingInfo=function(){var e=GameGlobal.GangModel.myGangInfo;this.checkBox.selected=1==e.mAutoJoin,this.input.text=e.mNeedPower.toString()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangApplyListWin.prototype,"GangApplyListWin",["ICommonWindow"]);var GangApplyItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnAgree.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnAgreeBtnClick,this),this.btnRefuse.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnRefuseBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.btnAgree.name=e.mPlayerId,this.btnRefuse.name=e.mPlayerId,this.imgFace.source=ResDataPath.GetHeadImgName(e.mJob,e.mSex),this.labRoleName.text="名字："+e.mPlayerName,this.labLevel.text="等级："+e.mLevel,this.labPower.text="战力："+e.mPower,this.SetLogoutTimeInfo(e.mLogoutTime)},t.prototype._OnAgreeBtnClick=function(e){var t=parseInt(e.currentTarget.name);this._sendHandleApplicant(t,!0)},t.prototype._OnRefuseBtnClick=function(e){var t=parseInt(e.currentTarget.name);this._sendHandleApplicant(t,!1)},t.prototype._sendHandleApplicant=function(e,t){GameGlobal.GangModel.SendSetApply(e,t),GameGlobal.GangModel.HandleApplicant(e)},t.prototype.SetLogoutTimeInfo=function(e){if(0==e)this.labLogoutTime.text="在线",this.labLogoutTime.textColor=Color.l_green_1;else{var t=GameServer.serverTime-e;if(this.labLogoutTime.textColor=Color.Red,60>t)return void(this.labLogoutTime.text="离线少于1分钟");if(3600>t)return void(this.labLogoutTime.text="离线"+Math.floor(t/60)+"分钟");this.labLogoutTime.text="离线"+Math.floor(t/3600)+"小时"}},t}(eui.ItemRenderer);__reflect(GangApplyItem.prototype,"GangApplyItem");var GangBossPanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.nStatus=0,t.nCountTime=0,t.skinName="GangBossPanelSkin",t.commonWindowBg.SetTitle("帮会BOSS"),t.listBoss.itemRenderer=ItemBaseNotName,t.listHave.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.oConfig=GameGlobal.Config.GuildBossBaseConfig},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GANGBOSS_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.GANGBOSS_CHANGE,this.UpdateContent),this.observe(MessageDef.GANGBOSS_RANK_NOW,this.UpdateContent),this._AddClick(this.btnOpen,this.onClick),this._AddClick(this.btnInfo,this.showTip),this._AddClick(this.btnShowAward,this.showAward),this.btnShowAward.icon=ActivityModel.ICONSOURCE_MAP[ActivityModel.TYPE_GANG_BOSS],GameGlobal.GangBossModel.sendGetLastRank(),this.showPanel.SetBodyId(MonstersConfig.GetAppId(this.oConfig.bossid)),this.AddLoopTimer(1e3,this.upTime),this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData(),this.listBoss.dataProvider=new eui.ArrayCollection(this.oConfig.showItem1),this.listHave.dataProvider=new eui.ArrayCollection(this.oConfig.showItem2),this.upInfo()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return GameGlobal.GangModel.HasGang()?Deblocking.Check(DeblockingType.TYPE_50):(UserTips.ins().showTips("您还没有帮会，请先加入帮会"),!1)},t.prototype.upInfo=function(){var e="",t="";this.nStatus?(this.btnOpen.label="挑战",this.lbShowTitle.text="当前所属",GameGlobal.GangBossModel.mCurRank&&GameGlobal.GangBossModel.mCurRank.playerranks&&GameGlobal.GangBossModel.mCurRank.playerranks[0]&&(e=GameGlobal.GangBossModel.mCurRank.playerranks[0].name,t=GameGlobal.GangBossModel.mCurRank.playerranks[0].serverid+"")):(this.btnOpen.label="未开始",this.lbShowTitle.text="上次归属",GameGlobal.GangBossModel.tRankLast&&GameGlobal.GangBossModel.tRankLast.firstinfo&&(e=GameGlobal.GangBossModel.tRankLast.firstinfo.name,t=GameGlobal.GangBossModel.tRankLast.firstinfo.serverid+"")),this.lbPlayerName.text=e||"",this.lbUnionName.text=""},t.prototype.setPower=function(e){if(e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+"万"}return e},t.prototype.upTime=function(){if(this.nStatus){var e=this.nStatus==AcrossBossState.REBORNING?GameGlobal.GangBossModel.getBossRebornTime():GameGlobal.GangBossModel.getEndTime();this.labTimeText.text=this.nStatus==AcrossBossState.REBORNING?"复活时间:":"结束时间:",this.lbTime.text=DateUtils.getFormatBySecond(e)}else this.labTimeText.text="挑战时间:",this.oConfig.opentime&&this.oConfig.opentime.length&&(this.lbTime.text=this.oConfig.opentime[0]+"~"+this.oConfig.opentime[1])},t.prototype.setData=function(){this.nStatus=GameGlobal.GangBossModel.status,this.nCountTime=GameGlobal.GangBossModel.changetime},t.prototype.onClick=function(e){if(this.nStatus){var i=GlobalConfig.ins().GuildBossBaseConfig.guildlv||0,o=GameGlobal.GangModel.getGangLv();o>=i?(GameGlobal.GangBossModel.enterMap(),ViewManager.ins().close(GangMainWin),ViewManager.ins().close(t)):UserTips.FormatTip(GameGlobal.Config.GuildBossBaseConfig.kfboss_tips01,i)}else UserTips.ins().showTips("未开始")},t.prototype.showTip=function(e){ViewManager.ins().open(ActivityDescPanel,31)},t.prototype.showAward=function(){ActivityRewardShowWin.Open(ActivityModel.TYPE_GANG_BOSS)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangBossPanel.prototype,"GangBossPanel",["ICommonWindow"]);var GangChangeNameView=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangChangeNameSkin",t._AddClick(t.btnRename,t._OnClick),t._AddClick(t.btnCancel,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANG_CHANGE_NAME,this.upDataGangName),this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="帮会改名";var i=GameGlobal.GangModel.myGangInfo;this.input.textColor=7691855,this.input.text=i.mGangName,this.input.maxChars=6;var o=GameGlobal.Config.GuildConfig.renamecost.id,n=GameGlobal.Config.GuildConfig.renamecost.count;this.price.setType(o),this.price.setPrice(n)},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve(),this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRename:this.HandleRename();break;case this.btnCancel:ViewManager.ins().close(this)}},t.prototype.HandleRename=function(){var e=GameGlobal.GangModel.myGangInfo,t=this.input.text;return""==t?void UserTips.ins().showTips("帮会名字不可为空"):t==e.mGangName?void UserTips.ins().showTips("不能与帮会原名相同"):void(Checker.Money(GameGlobal.Config.GuildConfig.renamecost.id,GameGlobal.Config.GuildConfig.renamecost.count)&&GameGlobal.GangModel.sendChangeName(t))},t.prototype.upDataGangName=function(){UserTips.ins().showTips("修改帮会名字成功"),ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangChangeNameView.prototype,"GangChangeNameView");var GangCreateItemView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.SetItemInfo=function(e){this.mIdx=e;var t=GameGlobal.Config.GuildCreateConfig[e];this.labTitle.text=e+"级帮会",this.labMaxMemTip.text="帮会成员上限："+GangConst.GetMaxMemberCount(e)+"人",this.labCopyTip.text=e>1?"开启"+e+"级副本":"",this.labLevelTip.text="1.等级达到"+t.level+"级",this.labVipLevelTip.text="2.VIP等级达到"+t.vipLv+"级",this.priceIcon.type=t.cost.id,this.priceIcon.price=t.cost.count},t.prototype.SetDoubleImg=function(e){this.imgDouble.visible=e},t.prototype.SetChooseInfo=function(e){this.imgChoose.visible=this.mIdx==e},t}(eui.Component);__reflect(GangCreateItemView.prototype,"GangCreateItemView");var GangCreateView=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangCreateSkin",t._AddClick(t.item1,t._OnClick),t._AddClick(t.item2,t._OnClick),t._AddClick(t.btnCreate,t._OnClick),t.list.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANG_INIT,this.InitGang),this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="创建帮会",this.input.textColor=7691855,this.input.text="",UIHelper.SetInputMaxChar(this.input,12),this.item1.SetItemInfo(1),this.item2.SetItemInfo(2),this.ChooseItem(1);var i=GameGlobal.GangModel.receiveCount,o=GameGlobal.Config.GuildConfig.creatrewardcount;this.item1.SetDoubleImg(o>i),this.item2.SetDoubleImg(o>i);var n=GameGlobal.Config.GuildConfig.des;this.labTip.text=n.replace("%s",""+o),this.labCount.text="帮会数量："+i+"/"+o,this.list.dataProvider=new eui.ArrayCollection(GameGlobal.Config.GuildConfig.creatreward)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.ChooseItem=function(e){this.mChooseIdx=e,this.item1.SetChooseInfo(this.mChooseIdx),this.item2.SetChooseInfo(this.mChooseIdx)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCreate:var t=this.input.text;if(""==t)return void UserTips.ins().showTips("帮会名字不可为空");var i=GameGlobal.Config.GuildCreateConfig[this.mChooseIdx],o=i.level,n=i.vipLv;if(!Checker.Level(null,o))return;if(!Checker.VipLevel(n))return;if(!Checker.Money(i.cost.id,i.cost.count))return;GameGlobal.GangModel.SendCreateGang(this.mChooseIdx,t);break;case this.item1:this.ChooseItem(1);break;case this.item2:this.ChooseItem(2)}},t.prototype.InitGang=function(){UserTips.ins().showTips("创建帮会成功"),ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangCreateView.prototype,"GangCreateView");var GangFuBenPanel=function(e){function t(){var t=e.call(this)||this;t.m_Model=GameGlobal.GuildTeamModel;GameGlobal.Config.GuildFubenBaseConfig;return t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);var t=GameGlobal.Config.GuildFubenBaseConfig;this.teamBaseMemberView.SetTime(t.aotuteam,t.fubenaotu)},t.prototype.InitInfo=function(){GameGlobal.GuildTeamModel.SendGetInfos(),this.observe(MessageDef.TEAM_FUBEN_INFO,this.UpdateInfo),this.UpdateInfo()},t.prototype.GetFirstShowKey=function(){for(var e=this.m_Model.GetConfig(),t=null,i=0,o=e;i<o.length;i++){var n=o[i];if(!(GameGlobal.GangModel.myGangInfo.mLevel>=n.needlv))break;t=n.id}return t},t.prototype.UpdateInfo=function(){var e=GameGlobal.Config.GuildFubenBaseConfig;GameGlobal.GuildTeamModel.mDungeonInfo;this.infoLabel.text="协助他人通关副本，可获得协助奖励，每天协助次数("+GameGlobal.GuildTeamModel.GetAssistCount()+"/"+e.assistcount+")",this.teamBaseMemberView.SetCountLabel("剩余收益次数\n"+GameGlobal.GuildTeamModel.GetProfitCount()+"/"+e.profitCount)},t.NAME="帮会副本",t}(TeamBasePanel);__reflect(GangFuBenPanel.prototype,"GangFuBenPanel");var GangInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.iconBindList=[{id:1,icon:"ui_bh_bt_shouhu"},{id:2,icon:"ui_bh_bt_shangdian"},{id:3,icon:"ui_bh_bt_ditu"},{id:4,icon:"ui_bh_bt_boss"},{id:5,icon:"ui_bh_bt_bangzhan"}],t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnRename,this._OnClick),this._AddClick(this.imgRecruit,this._OnClick),this._AddClick(this.labRecord,this._OnClick),this._AddClick(this.btnMember,this._OnClick),this._AddClick(this.btnDonation,this._OnClick),this._AddClick(this.btnList,this._OnClick),this._AddClick(this.btnApplyList,this._OnClick),this._AddItemClick(this.iconList,this.itemClick),this._AddClick(this.labModify,this._OnClick),this.iconList.itemRenderer=GangButtonItem,this.iconList.dataProvider=new eui.ArrayCollection(this.iconBindList),GameGlobal.GangModel.SendGetGangBaseInfo(),GameGlobal.GangModel.SendGetPlayerInfo(),this.labRecord.textFlow=(new egret.HtmlTextParser).parser("<font color='#019704'><u>帮会记录</u></font>"),this.labModify.textFlow=(new egret.HtmlTextParser).parser("<font color='#019704'><u>修改公告</u></font>"),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.GangModel.myGangInfo;this.labAbbreviated.text=e.mGangName.substr(0,1),this.labGangName.text=e.mGangName,this.labRoleName.text=e.mGangMasterName,this.labMemberCount.text=e.mMemberCount+"/"+GangConst.GetMaxMemberCount(e.mLevel),this.labCapital.text=e.mCapital+"/"+GangConst.GetMaxCapital(e.mLevel),this.labGangLevel.text=e.mLevel.toString(),this.labText.text=e.mNotice},t.prototype.OnOpen=function(){this.observe(MessageDef.GANG_UPDATE_BASE_INFO,this.UpdateContent),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateRedPoint),this.observe(MessageDef.GANG_UPDATE_APPLICANT_LIST,this.UpdateRedPoint),this.observe(MessageDef.GANG_UPDATE_CONTRIBUTECOUNT,this.UpdateRedPoint),this.observe(MessageDef.GANGBATTLE_OPEN_GATEVIEW,this._DoOpenGBattleView),this.observe(MessageDef.GANG_ALL_NOTICE,this._UpdateList),this.observe(MessageDef.GANG_UPDATA_PROTECTOR_INFO,this._UpdateList),this.observe(MessageDef.GANGBOSS_UPDATE_INFO,this._UpdateList),this.observe(MessageDef.ACTIVITY_LIST_INFO,this._UpdateList),this.UpdateRedPoint()},t.prototype.OnClose=function(){},t.prototype._UpdateList=function(){UIHelper.ListRefresh(this.iconList)},t.prototype.UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.btnDonation,GameGlobal.GangModel.HasContributeAward()),UIHelper.ShowRedPoint(this.btnApplyList,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.VIEW_APPILICANT))},t.prototype.itemClick=function(e){if(0==e.itemIndex)ViewManager.ins().open(GangProtectorMainWin);else if(1==e.itemIndex)ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_BLACK]);else if(2==e.itemIndex){if(!UserFb.CheckFighting())return;GameGlobal.CommonRaidModel._MapGo(GameGlobal.Config.GuildConfig.mapid),ViewManager.ins().close(GangMainWin)}else if(3==e.itemIndex)ViewManager.ins().open(GangBossPanel);else if(4==e.itemIndex){if(!Deblocking.Check(DeblockingType.TYPE_56))return;GameGlobal.GangBattleModel.SendEnterBattle()}},t.prototype._DoOpenGBattleView=function(){ViewManager.ins().close(GangMainWin)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRename:this.HandleRename();break;case this.imgRecruit:this.HandleRecruit();break;case this.labRecord:ViewManager.ins().open(GangRecordListWin);break;case this.btnMember:ViewManager.ins().open(GangMemberListWin);break;case this.btnDonation:ViewManager.ins().open(GangJuanXianListWin);break;case this.btnList:ViewManager.ins().open(GangListWin);break;case this.btnApplyList:this.HandleApplyList();break;case this.labModify:this.HandleModify()}},t.prototype.HandleRecruit=function(){var e=GameGlobal.GangModel.myGangInfo;e.mOffice!=GangConst.MEMBER_OFFICE?GameGlobal.GangModel.SendRecruitMember():UserTips.ins().showTips("你没有招收权限")},t.prototype.HandleApplyList=function(){var e=GameGlobal.GangModel.myGangInfo;GangConst.GetAuditingRight(e.mOffice)?ViewManager.ins().open(GangApplyListWin):UserTips.ins().showTips("你没有审核权限")},t.prototype.HandleModify=function(){var e=GameGlobal.GangModel.myGangInfo;GangConst.GetModifyNoticeRight(e.mOffice)?ViewManager.ins().open(GangModifyNoticeView):UserTips.ins().showTips("你没有修改公告权限")},t.prototype.HandleRename=function(){var e=GameGlobal.GangModel.myGangInfo;return e.mOffice!=GangConst.MASTER_OFFICE?void UserTips.ins().showTips("你没有这个权限"):void ViewManager.ins().open(GangChangeNameView)},t.NAME="帮会大厅",t}(BaseView);__reflect(GangInfoPanel.prototype,"GangInfoPanel",["ICommonWindowTitle"]);var GangButtonItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.iconDisplay.source=this.data.icon,this.UpdateRedPoint()},t.prototype.UpdateRedPoint=function(){1==this.data.id?this.redPoint.visible=GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GUARD_UPGRADE)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.DAILY_AWARD):2==this.data.id||(3==this.data.id?this.redPoint.visible=GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GANG_MAP_ASSEMBLED)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GANG_EXCHANGE):4==this.data.id?this.redPoint.visible=GameGlobal.GangBossModel.IsGangBossAct():5==this.data.id&&(this.redPoint.visible=GameGlobal.GangModel.IsGangBattleOpen()))},t}(eui.ItemRenderer);__reflect(GangButtonItem.prototype,"GangButtonItem");var GangJuanXianListWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangJuanXianListSkin",t.commonWindowBg.SetTitle("帮会捐献"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.listGang.itemRenderer=GangJanXianItem,this.listGang.dataProvider=new eui.ArrayCollection([]),this.get_txt1.text="帮会副本",this.get_txt2.text="帮会地图"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.AddClick(this.get_txt1,this.openGetWin),this.AddClick(this.get_txt2,this.openGetWin),this.observe(MessageDef.BAG_ITEM_COUNT_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.openGetWin=function(e){if(e.target==this.get_txt1)return ViewManager.ins().close(this),void ViewManager.ins().openIndex(GangMainWin,1);if(e.target==this.get_txt2){if(!UserFb.CheckFighting())return;GameGlobal.CommonRaidModel._MapGo(GameGlobal.Config.GuildConfig.mapid),ViewManager.ins().close(this),ViewManager.ins().close(GangMainWin)}},t.prototype.UpdateContent=function(){var e=[],t=GameGlobal.Config.GuildDonateConfig;for(var i in t)e.push(t[i]);this.listGang.dataProvider.replaceAll(e)},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangJuanXianListWin.prototype,"GangJuanXianListWin",["ICommonWindow"]);var GangJanXianItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnApply.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data.cost,t=GameGlobal.Config.ItemConfig[e.id];this.itemName.text=t.name,this.imgIcon.isShowName(!1),this.imgIcon.setDataByConfig(t),this.imgIcon.setCount(""),this.desc_txt.text=t.desc;var i=GameGlobal.UserBag.GetCount(e.id);this.had_txt.text="（拥有："+i+"）"},t.prototype._OnBtnClick=function(e){if(GameGlobal.GangModel.mCoutributeCount>=GameGlobal.Config.GuildConfig.maxcount)return void UserTips.ins().showTips("捐献次数已达上限,每天可捐献"+GameGlobal.Config.GuildConfig.maxcount+"次");var t=this.data.id;Checker.Data(this.data.cost)&&GameGlobal.GangModel.SendGetJuanXuanList(t)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.btnApply&&this.btnApply.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t}(eui.ItemRenderer);__reflect(GangJanXianItem.prototype,"GangJanXianItem");var GangListWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangListSkin",t.commonWindowBg.SetTitle("帮会列表"),t.commonWindowBg.helpBtn.visible=!0,t.commonWindowBg.setHelp(21,"规则说明"),t._AddClick(t.btnCreate,t._OnClick),GameGlobal.GangModel.SendGetGangList(),t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_50)},t.prototype.childrenCreated=function(){this.listGang.itemRenderer=GangItem,this.btnCreate.visible=!GameGlobal.GangModel.HasGang()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANG_UPDATE_LIST,this.UpdateContent),this.observe(MessageDef.GANG_UPDATE_APPLIED_LIST,this.UpdateList),this.observe(MessageDef.GANG_INIT,this.InitGang),this.commonWindowBg.OnAdded(this)},t.prototype.UpdateContent=function(){var e=GameGlobal.GangModel.gangList;e.sort(function(e,t){return t.mMemberCount-e.mMemberCount}),this.listGang.dataProvider=new eui.ArrayCollection(e),GameGlobal.GangModel.SendGetApplyList()},t.prototype.InitGang=function(){ViewManager.ins().open(GangMainWin),ViewManager.ins().close(this)},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){ViewManager.ins().open(GangCreateView)},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.listGang)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangListWin.prototype,"GangListWin",["ICommonWindow"]);var GangItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnApply.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.btnApply.name=e.mGangId,this.imgFace.source=ResDataPath.GetHeadImgName(e.mJob,e.mSex),this.labListNo.text=""+(this.itemIndex+1),this.labBangName.text=e.mGangName+"（Lv."+e.mLevel+"）",this.labBangMaster.text="【帮主】："+e.mGangMasterName,this.labMemberCount.text="人数："+e.mMemberCount+"/"+GangConst.GetMaxMemberCount(e.mLevel);var t=e.mNeedPower>=1e4?Math.floor(e.mNeedPower/1e4)+"万":e.mNeedPower;return this.labPowerTip.text="需战力："+t,this.labPowerTip.visible=e.mNeedPower>0,GameGlobal.GangModel.HasGang()?(this.btnApply.visible=!1,void(this.labPowerTip.visible=!1)):void(GameGlobal.GangModel.IsApplied(e.mGangId)?(this.btnApply.label="已申请",null==this.btnApply.filters&&(this.btnApply.filters=Color.GetFilter())):(this.btnApply.label="申请",this.btnApply.filters=null))},t.prototype._OnBtnClick=function(e){var t=parseInt(e.currentTarget.name);if(!GameGlobal.GangModel.IsApplied(t)){var i=this.data;return i.mMemberCount>=GangConst.GetMaxMemberCount(i.mLevel)?void UserTips.ins().showTips("该帮会人数已满，不可申请"):i&&i.mNeedPower&&GameGlobal.actorModel.power<i.mNeedPower?void UserTips.ins().showTips("战力不足"):GameGlobal.GangModel.mAppliedCount>=GameGlobal.Config.GuildConfig.applycount?void UserTips.ins().showTips("最多可同时向"+GameGlobal.Config.GuildConfig.applycount+"个帮会申请"):void GameGlobal.GangModel.SendJoinGang(t)}},t}(eui.ItemRenderer);__reflect(GangItem.prototype,"GangItem");var GangMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMainSkin",t.observe(MessageDef.GANG_EXIT_NOTICE,t.HandleExit),t.observe(MessageDef.GANG_UPDATE_PANTAOINFO,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANG_SKILL_UP,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANG_SKILL_LEARN_UP,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANG_UPDATA_PROTECTOR_INFO,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GUILD_CONTRIB_UPDATE,t.UpdateTabBtnRedPoint),t.observe(MessageDef.ITEM_COUNT_CHANGE,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANG_UPDATE_APPLICANT_LIST,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANG_UPDATE_FBCOUNT,t.UpdateTabBtnRedPoint),t.observe(MessageDef.GANGBOSS_UPDATE_INFO,t.UpdateTabBtnRedPoint),t.observe(MessageDef.ACTIVITY_LIST_INFO,t.UpdateTabBtnRedPoint),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.viewStack.tabChildren=[TabView.CreateTabViewData(GangInfoPanel,{skinName:"GangInfoSkin"}),TabView.CreateTabViewData(GangFuBenPanel),TabView.CreateTabViewData(GangSkillListView,{skinName:"GangSkillListSkin"}),TabView.CreateTabViewData(GangPantaoYuanPanel,{skinName:"GangPangTaoHuiSkin"})],this.commonWindowBg.SetViewStack(this.viewStack)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.commonWindowBg.OnAdded(this,i),this.UpdateTabBtnRedPoint()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return GameGlobal.GangModel.HasGang()?Deblocking.Check(DeblockingType.TYPE_50):(UserTips.ins().showTips("您还没有帮会，请先加入帮会"),!1)},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.VIEW_APPILICANT)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.CONTRIBUTE)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GUARD_UPGRADE)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.DAILY_AWARD)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GANG_MAP_ASSEMBLED)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GANG_EXCHANGE)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GANG_BATTLE)||GameGlobal.GangBossModel.IsGangBossAct()||GameGlobal.GangModel.IsGangBattleOpen()),this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GANG_FUBEN)),this.commonWindowBg.ShowTalRedPoint(2,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.SKILL_UPGRADE)),this.commonWindowBg.ShowTalRedPoint(3,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.EAT_PEACH)||GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.PEACH_AWARD))},t.prototype.OnClose=function(){MainBottomPanel.CloseNav(this)},t.prototype.HandleExit=function(){ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Main,t.GANG_INFO_PANEL=0,t.GANG_FUBEN_PANEL=1,t.GANG_SKILL_PANEL=2,t.GANG_PANTAOHUI_PANEL=3,t}(BaseEuiView);__reflect(GangMainWin.prototype,"GangMainWin",["ICommonWindow"]);var GangMemberInfoView=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMemberInfoSkin",t._AddClick(t.btnChat,t._OnClick),t._AddClick(t.btnConcern,t._OnClick),t._AddClick(t.btnOffice,t._OnClick),t._AddClick(t.btnKickOut,t._OnClick),t._AddClick(t.imgVIp,t._OnClick),t._AddClick(t.imgMouthVip,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mPlayerId=e[0],this.commonDialog.OnAdded(this),this.commonDialog.title="玩家信息",this.observe(MessageDef.GANG_UPDATE_MEMBER_INFO,this.UpdateContent),this.observe(MessageDef.PALYER_INFO,this.UpdatePlayerInfo),this.observe(MessageDef.FRIEND_DATA_REFRESH,this.HandleAddFriend),this.UpdateContent(),GameGlobal.PlayerInfoModel.sendOtherId(this.mPlayerId)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.UpdateContent=function(){var e=GameGlobal.GangModel.GetMemberInfoByPlayerId(this.mPlayerId);this.labOffice.text="职位："+GangConst.OFFICE_TO_TEXT[e.mOffice],this.labContribute.text="贡献："+e.mContribute;var t=GameGlobal.GangModel.myGangInfo;return t.mOffice==GangConst.MASTER_OFFICE?void(this.btnOffice.label=e.mOffice==GangConst.DEPUTY_OFFICE?"降职":"升职"):(this.btnOffice.visible=!1,t.mOffice==GangConst.DEPUTY_OFFICE?void this.btnKickOut.$setX(this.btnOffice.$getX()):void(this.btnKickOut.visible=!1))},t.prototype.UpdatePlayerInfo=function(e){this.imgFace.source=ResDataPath.GetHeadImgName(e.job,e.sex),this.labPlayerName.text="昵称："+e.name,this.labSex.text="性别："+(1==e.sex?"女":"男"),this.labLevel.text="等级："+e.level,this.powerLabel.text=e.power,this.userChatData=new Sproto.chat_data,this.userChatData.id=this.mPlayerId,this.userChatData.job=e.job,this.userChatData.sex=e.sex,this.userChatData.name=e.name,this.imgVIp.filters=e.vip>0?null:Color.GetFilter(),this.imgMouthVip.filters=GameGlobal.FuliModel.FuliData.month>0?null:Color.GetFilter(),this.roleShowPanel.SetShowImage(e)},t.prototype.HandleAddFriend=function(){UserTips.ins().showTips("关注成功")},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnChat:ViewManager.ins().open(PlayerChatpanel,this.userChatData);break;case this.btnConcern:if(GameGlobal.FriendModel.isFriend(this.mPlayerId))return void UserTips.ins().showTips("你们已经是好友了");GameGlobal.FriendModel.sendAddFriend(this.mPlayerId);
break;case this.btnOffice:this.HandleExchangOffice();break;case this.btnKickOut:this.HandleKickOutMember();break;case this.imgVIp:ViewManager.ins().open(VipMainPanel,this.mPlayerId),ViewManager.ins().close(t);break;case this.imgMouthVip:for(var i=0,o=FuliWin.WelfareIcon;i<o.length;i++){var n=o[i];if(n.cls==FuliMonthlyCardPanel){ViewManager.ins().open(FuliWin,n.type),ViewManager.ins().close(t);break}}}},t.prototype.HandleExchangOffice=function(){var e=GameGlobal.GangModel.GetMemberInfoByPlayerId(this.mPlayerId),t=e.mOffice==GangConst.DEPUTY_OFFICE?GangConst.MEMBER_OFFICE:GangConst.DEPUTY_OFFICE;return t==GangConst.DEPUTY_OFFICE&&GameGlobal.GangModel.GetDeputyCount()>=GameGlobal.Config.GuildConfig.management?void UserTips.ins().showTips("副帮主只有"+GameGlobal.Config.GuildConfig.management+"位"):void GameGlobal.GangModel.SendExchangOffice(this.mPlayerId,t)},t.prototype.HandleKickOutMember=function(){var e=this,t=GameGlobal.GangModel.myGangInfo;if(!GangConst.GetKickOutRight(t.mOffice))return void UserTips.ins().showTips("你没有这个权限");var i=GameGlobal.GangModel.GetMemberInfoByPlayerId(this.mPlayerId);return i.mOffice!=GangConst.MEMBER_OFFICE?void UserTips.ins().showTips("不可踢出管理人员"):void WarnWin.show("是否要将该成员踢出帮会？",function(){GameGlobal.GangModel.SendKickOutMember(e.mPlayerId),ViewManager.ins().close(e)},this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangMemberInfoView.prototype,"GangMemberInfoView");var GangMemberListWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMemberListSkin",t.commonWindowBg.SetTitle("成员列表"),t._AddClick(t.btnExit,t._OnClick),t._AddClick(t.labContributeTIp,t._OnClick),t._AddClick(t.labPowerTip,t._OnClick),GameGlobal.GangModel.SendGetMemberList(),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.listMember.itemRenderer=GangMemberItem,this.labContributeTIp.textFlow=(new egret.HtmlTextParser).parser("<font color='#6e330b'><u>历史贡献</u></font>"),this.labPowerTip.textFlow=(new egret.HtmlTextParser).parser("<font color='#6e330b'><u>战力</u></font>");var e=GameGlobal.GangModel.myGangInfo,t=GangConst.OFFICE_TO_TEXT[e.mOffice];this.labOffice.text="我的职位："+t,this.labContribute.text="历史贡献："+CommonUtils.overLength(e.mContribute)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANG_UPDATE_MEMBER_LIST,this.UpdateContent),this.observe(MessageDef.GANG_EXIT_NOTICE,this.HandleExit),this.commonWindowBg.OnAdded(this)},t.prototype.UpdateContent=function(){this.ResortByPower()},t.prototype.ResortByContribute=function(){var e=GameGlobal.GangModel.memberList;e.sort(function(e,t){return t.mContribute==e.mContribute?t.mOffice-e.mOffice:t.mContribute-e.mContribute}),this.listMember.dataProvider=new eui.ArrayCollection(e)},t.prototype.ResortByPower=function(){var e=GameGlobal.GangModel.memberList;e.sort(function(e,t){return t.mPower==e.mPower?t.mOffice-e.mOffice:t.mPower-e.mPower}),this.listMember.dataProvider=new eui.ArrayCollection(e)},t.prototype.OnClose=function(){},t.prototype.HandleExit=function(){ViewManager.ins().close(this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnExit:WarnWin.show("是否要退出帮会？",function(){GameGlobal.GangModel.SendExit()},this);break;case this.labContributeTIp:this.ResortByContribute();break;case this.labPowerTip:this.ResortByPower()}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangMemberListWin.prototype,"GangMemberListWin",["ICommonWindow"]);var GangMemberItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnAffair.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.btnAffair.name=e.mPlayerId,this.imgFace.source=ResDataPath.GetHeadImgName(e.mJob,e.mSex),this.labOfficeName.text="【"+GangConst.OFFICE_TO_TEXT[e.mOffice]+"】",this.labPlayerName.text=e.mPlayerName,this.labContribute.text=e.mContribute,this.labPower.text=e.mPower,this.SetLogoutTimeInfo(e.mLogoutTime),this.btnAffair.visible=e.mPlayerId!=GameGlobal.actorModel.actorID},t.prototype.SetLogoutTimeInfo=function(e){if(0==e)this.labLogoutTime.text="在线",this.labLogoutTime.textColor=Color.l_green_1;else{var t=GameServer.serverTime-e;if(this.labLogoutTime.textColor=Color.Red,60>t)return void(this.labLogoutTime.text="离线少于1分钟");if(3600>t)return void(this.labLogoutTime.text="离线"+Math.floor(t/60)+"分钟");this.labLogoutTime.text="离线"+Math.floor(t/3600)+"小时"}},t.prototype._OnBtnClick=function(e){var t=parseInt(e.currentTarget.name);ViewManager.ins().open(GangMemberInfoView,t)},t}(eui.ItemRenderer);__reflect(GangMemberItem.prototype,"GangMemberItem");var GangModifyNoticeView=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangModifyNoticeSkin",t._AddClick(t.btnComfirn,t._OnClick),t._AddClick(t.btnCancel,t._OnClick),t.labInput.addEventListener(egret.Event.CHANGE,t._OnChang,t),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="公告",this.labInput.type="input",this.labInput.multiline=this.labInput.wordWrap=!0,this.labInput.maxChars=150},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnChang=function(e){this.labNumTip.text=e.target.text.length+"/150"},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnComfirn:var t=this.labInput.text;GameGlobal.GangModel.SendModifyNotice(t),ViewManager.ins().close(this);break;case this.btnCancel:ViewManager.ins().close(this)}},t.prototype.InitGang=function(){UserTips.ins().showTips("创建帮会成功"),ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangModifyNoticeView.prototype,"GangModifyNoticeView");var GangPanTaoHuiListItem=function(e){function t(){var t=e.call(this)||this;return t.TYPECOLOR=["#019704","#DB0000","#F77C67"],t.TYPENAME=["百年桃","万年桃","千年桃"],t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=GameServer.PanTaoHui(e.time)+"   ";t+='[<font color = "#00A2FF">'+e.playerName+"</font>]   ",t+='食用了<font color = "'+this.TYPECOLOR[e.peachId-1]+'">'+this.TYPENAME[e.peachId-1]+"</font>",this.info.textFlow=(new egret.HtmlTextParser).parser(t)},t}(eui.ItemRenderer);__reflect(GangPanTaoHuiListItem.prototype,"GangPanTaoHuiListItem");var GangPantaoYuanPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GangPanTaoHuiListItem},t.prototype.UpdateContent=function(){UIHelper.ShowRedPoint(this.bnt0,GameGlobal.GangModel.HasPantao()),UIHelper.ShowRedPoint(this.bnt1,GameGlobal.GangModel.HasPantao()),UIHelper.ShowRedPoint(this.bnt2,GameGlobal.GangModel.HasPantao());for(var e=0;3>e;e++)this["redPoint"+e].visible=2==GameGlobal.GangModel.getPanTaoRed(e+1),this["baoXian"+e].filters=1==GameGlobal.GangModel.getPanTaoRed(e+1)?Color.GetFilter():null;for(var e=0;3>e;e++){var t=GlobalConfig.ins().GuildPeachConfig[e+1];this["PriceIcon"+e].setType(t.cost.id),this["PriceIcon"+e].setPrice(t.cost.count),this["qd"+e].visible=!BitUtil.Has(GameGlobal.GangModel.rewardMark,e),this["attr"+e].text="+"+t.exp+"帮会资金 \n+"+t.reward.count+MoneyConstToName[t.reward.id]+" \n+"+t.peachvalue+"蟠桃值"}this.exp.text="今日进度： "+GameGlobal.GangModel.panTaoHuiExp+"/60",this.pro.maximum=60,this.pro.value=GameGlobal.GangModel.panTaoHuiExp;for(var e=0;3>e;e++)GameGlobal.GangModel.getPantao?this["bnt"+e].currentState="disabled":this["bnt"+e].currentState="up";this.updateList()},t.prototype.updateList=function(){this.list.dataProvider=new eui.ArrayCollection(GameGlobal.GangModel.panTaoHuiList.reverse())},t.prototype.OnOpen=function(){GameGlobal.GangModel.SendGetPanTaoHuiInfo();for(var e=0;3>e;e++)this.AddClick(this["bnt"+e],this._OnClick),this.AddClick(this["baoXian"+e],this._OnClick);this.observe(MessageDef.GANG_UPDATE_PANTAOINFO,this.UpdateContent)},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){var t="蟠桃会奖励",i=GlobalConfig.ins().GuildPeachRewardConfig;switch(e.currentTarget){case this.bnt0:GameGlobal.GangModel.panTaoeatPeach(MoneyConst.gold);break;case this.bnt1:GameGlobal.GangModel.panTaoeatPeach(MoneyConst.yuanbao);break;case this.bnt2:GameGlobal.GangModel.panTaoeatPeach(MoneyConst.byb);break;case this.baoXian0:ViewManager.ins().open(CommonRewardsPanel,t,i[1].reward,function(){GameGlobal.GangModel.panTaoBoxPeach(1)});break;case this.baoXian1:ViewManager.ins().open(CommonRewardsPanel,t,i[1].reward,function(){GameGlobal.GangModel.panTaoBoxPeach(2)});break;case this.baoXian2:ViewManager.ins().open(CommonRewardsPanel,t,i[1].reward,function(){GameGlobal.GangModel.panTaoBoxPeach(3)})}},t.NAME="蟠桃会",t}(BaseView);__reflect(GangPantaoYuanPanel.prototype,"GangPantaoYuanPanel",["ICommonWindowTitle"]);var GangRecordListWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangRecordListSkin",t.commonWindowBg.SetTitle("帮会记录"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.recordlist.itemRenderer=GangRecordItem,this.recordlist.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.GangModel.gangRecordInfo.historyRecords;this.recordlist.dataProvider.replaceAll(e)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GangRecordListWin.prototype,"GangRecordListWin",["ICommonWindow"]);var GangRecordItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){if(this.itemIndex%2==0?this.bg_image.visible=!1:this.bg_image.visible=!0,this.data){var e=this.data;this.desc_txt.textFlow=TextFlowMaker.generateTextFlow(GameGlobal.GangModel.gangRecordInfo.getTypeName(e.type,e.time,e.name1))}},t}(eui.ItemRenderer);__reflect(GangRecordItem.prototype,"GangRecordItem");var GangSkillListView=function(e){function t(){var t=e.call(this)||this;return t.mItems=[],t.nSelectIndex=0,t.skillInfoData=[],t.allPower=0,t.AttrName=["生命+0","攻击+0","防御+0","速度+0","暴击+0","抗暴+0","命中+0","闪避+0"],t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=0;7>=e;e++){var t=this["g"+e];t.currentState="open",t.nameGroup.visible=!1,this.mItems[e]=t,this._AddClick(t,this._OnItemClick);var i={posId:e,level:0};this.skillInfoData.push(i)}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.btnUp,this.onCkick),this.observe(MessageDef.GANG_SKILL_UP,this.UpdateSkillInfo),this.observe(MessageDef.GUILD_CONTRIB_UPDATE,this.upDateInfo),this.observe(MessageDef.GANG_SKILL_LEARN_UP,this.UpdateLearnSkillInfo),GameGlobal.GangModel.sendGetSkillInfos()},t.prototype.UpdateSkillInfo=function(e){null!=e&&(this.skillInfoData=e),this.nSelectIndex=this.getNextUpSkillData(),this.UpdateContent()},t.prototype.UpdateLearnSkillInfo=function(e){if(null!=e)for(var t=0;t<this.skillInfoData.length;t++)if(this.skillInfoData[t].posId==e.posId){this.skillInfoData[t].level=e.level;break}this.nSelectIndex=this.getNextUpSkillData(),this.UpdateContent()},t.prototype.onCkick=function(e){var t=this.getNextUpSkillData(),i=this.skillInfoData[t].level,o=this.getNextNeedCostByPosAndLv(i,this.nSelectIndex);null!=o&&(GameGlobal.actorModel.contrib>=o.cost.count?GameGlobal.GangModel.sendLearnGangSkill():UserWarn.ins().BuyGoodsWarn(o.cost.id))},t.prototype.getNextUpSkillData=function(){for(var e=0,t=1e3,i=0;i<this.skillInfoData.length;i++)this.skillInfoData[i].level<t&&(t=this.skillInfoData[i].level,e=this.skillInfoData[i].posId);return e},t.prototype.getNextNeedCostByPosAndLv=function(e,t,i){void 0===i&&(i=!0),i&&(e+=1);var o=GameGlobal.Config.GuildCommonSkillConfig[e];return null==o?null:o[t]},t.prototype.UpdateContent=function(){var e=GameGlobal.GangModel.myGangInfo.mLevel,t=GameGlobal.Config.GuildLevelConfig[e];this.lvMax_label.text=this.skillInfoData[0].level+"/"+t.skilllv,this.upDateInfo(),this.allPower=0,this.setAllSkillAttrs(),this.powerLabel.text=this.allPower},t.prototype.upDateInfo=function(){for(var e=this.nSelectIndex,t=0;t<this.mItems.length;t++){var i=this.mItems[t];i.img_select.visible=t==e,this.UpdateItem(t)}var o=this.skillInfoData[this.nSelectIndex].level,n=this.getNextNeedCostByPosAndLv(o,this.nSelectIndex,!1),a=this.getNextNeedCostByPosAndLv(o,this.nSelectIndex);if(this.nextImage.visible=!0,this.setCurSkllAttrs(n),this.setNextSkllAttrs(a),null!=a){var r=a.cost;this.price.setType(r.id),this.price.setPrice(r.count),this.price.setMyCount(GameGlobal.actorModel.contrib)}},t.prototype.getCurAllSkillLv=function(){for(var e=0,t=0;t<this.skillInfoData.length;t++)e+=this.skillInfoData[t].level;return e},t.prototype.UpdateItem=function(e){var t=this.mItems[e];8>e&&(t.img_icon.source=GangConst.GetSkillIcon(e));var i=this.skillInfoData[e].level;t.lb_level.text=i,t.lb_name.textColor=6827776},t.prototype._OnItemClick=function(e){for(var t=0;t<this.mItems.length;t++)t==this.nSelectIndex?this.mItems[t].currentState="down":this.mItems[t].currentState="up"},t.prototype.OnClose=function(){GameGlobal.MessageCenter.removeAll(this),this.removeEvents()},t.prototype.setCurSkllAttrs=function(e){if(this.curAttr_label.text="",null==e)return void(this.nextImage.visible=!1);for(var t=e.attrpower,i=0;i<t.length;i++)this.curAttr_label.text+=AttributeData.getAttStrByType(t[i],0,"+",!1,"#682f00"),i%2!=0?this.curAttr_label.text+="\n":this.curAttr_label.text+="         "},t.prototype.setNextSkllAttrs=function(e){if(this.nextAttrs_label.text="",null==e)return void(this.nextImage.visible=!1);this.nextImage.visible=!0;for(var t=e.attrpower,i=0;i<t.length;i++)this.nextAttrs_label.text+=AttributeData.getAttStrByType(t[i],0,"+",!1,"#682f00"),i%2!=0?this.nextAttrs_label.text+="\n":this.nextAttrs_label.text+="         "},t.prototype.setAllSkillAttrs=function(){var e,t=0,i=new Object;for(t=0;t<this.skillInfoData.length;t++){var o=this.skillInfoData[t].level;if(e=GameGlobal.Config.GuildCommonSkillConfig[o],null!=e){var n=e[t].attrpower;this.allPower+=ItemConfig.CalcAttrScoreValue(n);for(var a=0;a<n.length;a++)null==i[n[a].type]&&(i[n[a].type]=0),i[n[a].type]+=n[a].value}}for(var r=0;8>r;r++)this["totalAttr"+r].text=this.AttrName[r];var s=0;for(var l in i){var c=new AttributeData;c.type=parseInt(l),c.value=i[l],c?this["totalAttr"+s].text=AttributeData.getAttStrByType(c,0,"+",!1,"#682f00"):this["totalAttr"+s].text="",s++}},t.NAME="帮会技能",t}(BaseView);__reflect(GangSkillListView.prototype,"GangSkillListView",["ICommonWindowTitle"]);var GangBossSceneView=function(e){function t(t){var i=e.call(this)||this;i.tCheckBox=[],i.m_Raid=t,i.skinName="AcrossBossFightSkin",i.list.itemRenderer=GangBossNowRankItem,i._AddClick(i.btnArrow,i._OnClick),i._AddClick(i.laRank,i._OnClick),i._AddClick(i.checkBox0,i._OnClick),i._AddClick(i.checkBox1,i._OnClick),i._AddClick(i.checkBox2,i._OnClick),i.barProtect.thumb.source="ui_kf_bm_lansetiao",i.barProtect.maximum=100,i.barProtect.labelFunction=function(e,t){return e+"%"},i.barBlood.maximum=100,i.barBlood.labelFunction=function(e,t){return e+"%"};for(var o=0;3>o;o++){var n=i["checkBox"+o];i.tCheckBox[o]=n}return i}return __extends(t,e),t.prototype.OnOpen=function(){var e=ViewManager.ins().getView(GameMapPanel);e&&e.SetReturnBtn(-239),this.checkBox0.selected=this.m_Raid.mSelList[0],this.checkBox2.selected=this.m_Raid.mSelList[2],this.checkBox3.selected=this.m_Raid.IsIsAutoReborn(),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdatePos),this.observe(MessageDef.GANGBOSS_RANK_NOW,this._UpdateRank),this.observe(MessageDef.GANGBOSS_UPDATE_HP,this._UpdateHp),this.observe(MessageDef.PLAYER_CHANGE_SYSTEM_SETTING,this._UpdatePlayerSetting),this._UpdatePlayerSetting(),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this._UpdatePos(),this._UpdateHp(),this._UpdateTime(),this.AddTimer(1e3,0,this._UpdateTime),this.OnChange(null)},t.prototype._UpdatePlayerSetting=function(){this.checkBox1.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER)},t.prototype.OnChange=function(e){for(var t=this.m_Raid,i=[],o=0;o<this.tCheckBox.length;o++)i.push(this.tCheckBox[o].selected);t.UpdateSel(e,i)},t.prototype._UpdatePos=function(){MiniChatPanel.UpdateViewPos(this.groupAll)},t.prototype.OnClose=function(){this.removeObserve(),TimerManager.ins().removeAll(this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnArrow:var t=this.list.visible=!this.list.visible;this.btnArrow.icon=t?"ui_zd_bt_zhankai":"ui_zd_bt_shousuo";break;case this.laRank:GameGlobal.GangBossModel.mCurRank&&GameGlobal.GangBossModel.mCurRank.playerranks&&GameGlobal.GangBossModel.mCurRank.playerranks.length?ViewManager.ins().open(RankWin,RankDataType.TYPE_GANG_BOSS_PERSON):UserTips.ins().showTips("赶紧冲榜吧");break;case this.checkBox0:this.OnChange(0);break;case this.checkBox1:SystemSettingPanel.ChangeShowOther(this.checkBox1.selected);break;case this.checkBox2:this.OnChange(2)}},t.prototype._UpdateTime=function(){var e=GameGlobal.GangBossModel.status;if(e==AcrossBossState.KILL){this.titleLabel.text=t.LABEL.OUT_TIME;var i=GameServer.serverTime-GameGlobal.GangBossModel.changetime,o=GameGlobal.Config.GuildBossBaseConfig.leavetime-i;this.lbTime.text=DateUtils.format_1(Math.max(1e3*o,0))}else if(e==AcrossBossState.WAIT){this.titleLabel.text=t.LABEL.BOSS;var i=GameServer.serverTime-GameGlobal.GangBossModel.changetime,o=GameGlobal.Config.GuildBossBaseConfig.readytime-i;this.lbTime.text=DateUtils.format_1(Math.max(1e3*o,0))}else e==AcrossBossState.REBORNING?(this.titleLabel.text=t.LABEL.BOSSREBORNING,this.lbTime.text=DateUtils.format_1(1e3*GameGlobal.GangBossModel.getBossRebornTime())):(this.titleLabel.text=t.LABEL.OUT_TIME,this.lbTime.text=DateUtils.format_1(1e3*GameGlobal.GangBossModel.getEndTime()))},t.prototype._UpdateHp=function(){if(GameGlobal.GangBossModel.status<AcrossBossState.BOSS)this.barProtect.value=100,this.barBlood.value=100;else if(GameGlobal.GangBossModel.status==AcrossBossState.KILL)this.barBlood.value=0;else{var e=GameGlobal.GangBossModel;this.barProtect.value=Math.ceil(e.shieldvalue/GameGlobal.Config.GuildBossBaseConfig.shieldvalue*100),this.barBlood.value=e.hpperc}},t.prototype._UpdateRank=function(){var e=GameGlobal.GangBossModel.mCurRank;return e?void(this.list.dataProvider=new eui.ArrayCollection(e.playerranks)):void(this.list.dataProvider=new eui.ArrayCollection([]))},t.LABEL={OUT_TIME:"场景关闭倒计时",BOSS:"BOSS降临倒计时",BOSSREBORNING:"BOSS复活倒计时"},t}(BaseView);__reflect(GangBossSceneView.prototype,"GangBossSceneView");var GangBossNowRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.lbName.text=e.name,this.lbRank.text=this.itemIndex+1+"",this.lbLv.text="",UIHelper.SetHead(this.head,e.job,e.sex,!1),this.lbHave.visible=0==this.itemIndex},t.prototype.childrenCreated=function(){},t}(eui.ItemRenderer);__reflect(GangBossNowRankItem.prototype,"GangBossNowRankItem");var GangMapExchangeWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMapExchangeSkin",t._AddClick(t.btnRefresh,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="帮会兑换",this.list.itemRenderer=GangMapExchangeItem,this.list.dataProvider=new eui.ArrayCollection([]),this.observe(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO,this.UpdateContent),GameGlobal.GangMapModel.SendGetExchange();var i=GameGlobal.Config.GuildConfig.buycost;this.priceicon.type=i.id,this.priceicon.price=i.count,this.durationLab.SetColor(104196)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.UpdateContent=function(){var e=GameGlobal.GangMapModel.gangMapExchangeInfo;this.durationLab.SetCallbackFunc(function(){GameGlobal.GangMapModel.SendGetExchange()}),this.durationLab.SetEndTime(e.mRefreshTime||0,DurationLabel.TIMETEXT_TYPE_HHMMSS),this.labCount.text=""+(GameGlobal.Config.GuildConfig.number-e.mRefreshCount);var t=e.mExchangeList;this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRefresh:var t=GameGlobal.Config.GuildConfig.buycost;WarnWin.show("是否花费"+t.count+GameGlobal.actorModel.GetCurrencyName(t.id)+"刷新？",function(){Checker.Money(t.id,t.count,!0,null,function(){GameGlobal.GangMapModel.SendRefreshExchange()})},this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangMapExchangeWin.prototype,"GangMapExchangeWin");var GangMapExchangeItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEnoughFlag=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.labMaterial1.text="",this.labMaterial2.text="",this.btnExchange.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClicked,this)},t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.Config.GuildMapBuyConfig[e];this.itemIcon.setItemAward(t.icon.type,t.icon.id,t.icon.count);var i=t.cost[0];if(i){var o=GangMapConst.GetGangMapItemName(i.id),n=GameGlobal.GangMapModel.GetGangMapItemNum(i.id),a=n>=i.count?104196:14352384,r=o+" |C:"+a+"&T:"+n+"/"+i.count+"|";this.labMaterial1.textFlow=TextFlowMaker.generateTextFlow(r),this.mEnoughFlag=n<i.count?!1:this.mEnoughFlag}var s=t.cost[1];if(s){var l=GangMapConst.GetGangMapItemName(s.id),n=GameGlobal.GangMapModel.GetGangMapItemNum(s.id),a=n>=i.count?104196:14352384,r=l+" |C:"+a+"&T:"+n+"/"+s.count+"|";this.labMaterial2.textFlow=TextFlowMaker.generateTextFlow(r),this.mEnoughFlag=n<s.count?!1:this.mEnoughFlag}this.btnExchange.filters=GameGlobal.GangMapModel.HasExchangeItem(e)?Color.GetFilter():null},t.prototype._OnBtnClicked=function(e){return this.mEnoughFlag?void GameGlobal.GangMapModel.SendExchange(this.data):void UserTips.ins().showTips("物品不足")},t}(eui.ItemRenderer);__reflect(GangMapExchangeItem.prototype,"GangMapExchangeItem");var GangMapResetTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMapTaskResetTipSkin",t._AddClick(t.btnConfirm,t._OnClick),t._AddClick(t.btnCancel,t.CloseSelf),t._AddClick(t.labToVIp,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="任务重置",UIHelper.SetLinkStyleLabel(this.labToVIp),this.mConfig=e[0];var i=this.mConfig.resetcost;this.priceicon.type=i.id,this.priceicon.price=i.count;var o=0==this.mConfig.type?"帮会怪物":"帮会采集";this.labTip.text="重置"+o+"任务？";var n=GameGlobal.actorModel.vipLv,a=GameGlobal.Config.VipPrivilegeConfig[n],r=GameGlobal.GangMapModel.GetTaskInfo(this.mConfig.id),s=a.buyreset-r.mResetCount;this.labCount.text=s+"次";var l=GameGlobal.Config.VipPrivilegeConfig[n+1];if(!l)return void(this.groupVip.visible=!1);var c="|C:0x019704&T:VIP"+(n+1)+"|可再购买|C:0x019704&T:"+(l.buyreset-a.buyreset)+"|次";this.labVipTip.textFlow=TextFlowMaker.generateTextFlow(c)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){var t=this;switch(e.currentTarget){case this.btnConfirm:var i=this.mConfig.resetcost;Checker.Money(i.id,i.count,!0,null,function(){GameGlobal.GangMapModel.SendResetTask(t.mConfig.id)}),this.CloseSelf();break;case this.labToVIp:ViewManager.ins().open(VipMainPanel)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangMapResetTipWin.prototype,"GangMapResetTipWin");var GangMapScieneWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangMapSceneSkin",t._AddClick(t.btnArr,t._OnClicked),t._AddClick(t.btnExchange,t._OnClicked),t.cbAuto.addEventListener(egret.Event.CHANGE,t._OnCbAutoChange,t),GameGlobal.GangMapModel.SendGetMapTaskInfo(),GameGlobal.GangMapModel.SendGetExchange(),t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this.observe(MessageDef.GANGMAP_UPDATE_TASKINFO,this.UpdateItem),this.observe(MessageDef.GANGMAP_START_PICKPLANT_NOTICY,this._StartPickPlant),this.observe(MessageDef.GANGMAP_ONEKEYFINISH,this._UpdateCheckBox),this.observe(MessageDef.GANGMAP_HIDEPICKPROGRESS,this._HidePickProgress),this.observe(MessageDef.GANGMAP_UPDATE_EXCHANGEINFO,this.UpdateRedPoint),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this.bar.maximum=10*GameGlobal.Config.GuildConfig.collectiontime;var e=GameGlobal.Config.GuildConfig.doubletime;this.labTip.text="召集时间： "+e.star+"-"+e.ends+"在帮会进行任务可获得多倍经验",this.groupPick.visible=!1,this.AdaptationGroup(!1),this.UpdateRedPoint()},t.prototype.UpdateItem=function(){var e=CommonUtils.GetArray(GameGlobal.Config.GuildMapTaskConfig,"id");this.item1.SetTaskInfo(1,e[0]),this.item2.SetTaskInfo(2,e[1]),this.UpdateRedPoint()},t.prototype.OnClose=function(){TimerManager.ins().removeAll(this)},t.prototype.UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.btnExchange,GameGlobal.GangMapModel.CanItemExchange())},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.btnArr:this.ShowTaskView(-1!=this.btnArr.$getScaleX());break;case this.btnExchange:ViewManager.ins().open(GangMapExchangeWin)}},t.prototype._StartPickPlant=function(){this.groupPick.visible=!0,this.mPickTime=0;var e=GameGlobal.Config.GuildConfig.collectiontime;this.AddTimer(100,10*e,this._UpdateBar)},t.prototype._UpdateCheckBox=function(){this.cbAuto.selected=!1,GameGlobal.GangMapModel.SetAutoTask(!1)},t.prototype._HidePickProgress=function(){this.groupPick.visible=!1,this.bar.value=0,TimerManager.ins().removeAll(this),this._UpdateCheckBox()},t.prototype._UpdateBar=function(){this.mPickTime++,this.bar.value=this.mPickTime,this.mPickTime==10*GameGlobal.Config.GuildConfig.collectiontime&&(this.groupPick.visible=!1,this.bar.value=0)},t.prototype._OnCbAutoChange=function(){GameGlobal.GangMapModel.SetAutoTask(this.cbAuto.selected)},t.prototype.AdaptationGroup=function(e){MiniChatPanel.UpdateViewPos(this.groupAdaptation),this.groupAdaptation.y-=160,this.ShowTaskView(!e)},t.prototype.ShowTaskView=function(e){this.btnArr.$setScaleX(e?-1:1),this.groupTask.visible=e},t.LAYER_LEVEL=LayerManager.UI_GAME_MAP,t.VIEW_LAYER_LEVEL=ViewLayerLevel.BOTTOM,t}(BaseEuiView);__reflect(GangMapScieneWin.prototype,"GangMapScieneWin");var GangMapTaskItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btnGain.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClicked,this)},t.prototype.SetTaskInfo=function(e,t){this.mConfig=t,this.groupType1.visible=1==e,this.groupType2.visible=2==e;var i=GameGlobal.GangMapModel.GetTaskInfo(t.id);this.labName.text=(0==t.type?"帮会怪物":"帮会采集")+"("+Math.min(i.mCount,t.number)+"/"+t.number+")",this.list.dataProvider=new eui.ArrayCollection(t.reward),this.priceicon.setColor(Color.White),GameGlobal.GangMapModel.IsTaskDone(t.id)?(this.btnGain.label=GameGlobal.GangMapModel.HasGainTaskReward(t.id)?"重置":"领取",this.priceicon.type=t.resetcost.id,this.priceicon.price=t.resetcost.count,this.priceicon.visible=GameGlobal.GangMapModel.HasGainTaskReward(t.id)):(this.priceicon.type=t.onekeycost.id,this.priceicon.price=t.onekeycost.count,this.priceicon.visible=!0,this.btnGain.label="一键完成")},t.prototype._OnBtnClicked=function(e){var t=this;if(this.mConfig){if(!GameGlobal.GangMapModel.IsTaskDone(this.mConfig.id)){var i=this.mConfig.onekeycost;return void WarnWin.show("是否花费"+i.count+GameGlobal.actorModel.GetCurrencyName(i.id)+"直接完成任务？",function(){Checker.Money(i.id,i.count,!0,null,function(){GameGlobal.GangMapModel.SendOneKeyFinish(t.mConfig.id)})},this)}return GameGlobal.GangMapModel.HasGainTaskReward(this.mConfig.id)?GameGlobal.GangMapModel.CanResetTask(this.mConfig.id)?void ViewManager.ins().open(GangMapResetTipWin,this.mConfig):void UserTips.ins().showTips("重置次数不足"):void GameGlobal.GangMapModel.SendGainReward(this.mConfig.id)}},t}(eui.Component);__reflect(GangMapTaskItem.prototype,"GangMapTaskItem",["eui.UIComponent","egret.DisplayObject"]);var GangDefendPanel=function(e){function t(){var t=e.call(this)||this;return t.defendInfo=new GangProtectorInfo,t.maxLv=0,t.nextLv=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.renWuList.itemRenderer=GangDefendItem,this.renWuList.dataProvider=new eui.ArrayCollection([]),this.exp_bar.slideDuration=0,this.exp_bar.labelFunction=this.expFuncLabel;for(var e in GameGlobal.Config.GuildActiveConfig)this.maxLv++;this.lbName.text=GameGlobal.Config.GuildConfig.activename},t.prototype.expFuncLabel=function(e,t){return e+"/"+t},t.prototype.OnOpen=function(){this.observe(MessageDef.GANG_UPDATA_PROTECTOR_INFO,this.upDataProtectorInfo),this.observe(MessageDef.GANG_UPDATA_PROTECTOR_TASK_INFO,this.upDataTaskData),this._AddClick(this.challenge_btn,this._OnClick),this._AddClick(this.btnPrev,this._OnClick),this._AddClick(this.btnNext,this._OnClick),this._AddClick(this.protectAward_btn,this._OnClick),GameGlobal.GangModel.sendGetProtectorInfo(),this.upDataProtectorInfo(),this.upDataTaskData()},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.challenge_btn:var t=GameGlobal.Config.GuildActiveConfig[this.nextLv].exp;if(this.defendInfo.totalActive<t)return void UserTips.ins().showTips("活跃点不足");GameGlobal.GangModel.sendProtectorUpLv();break;case this.btnPrev:this.nextLv>1&&(this.nextLv-=1),this.UpdateContent();break;case this.btnNext:this.nextLv<this.maxLv&&(this.nextLv+=1),this.UpdateContent();break;case this.protectAward_btn:ViewManager.ins().open(GangProtectorJinJieAwardWin,this.nextLv)}},t.prototype.upDataProtectorInfo=function(e){this.defendInfo=GameGlobal.GangModel.protectorInfo,this.defendInfo&&(this.nextLv=GameGlobal.GangModel.protectorInfo.protectorLv+1,this.UpdateContent())},t.prototype.UpdateContent=function(){if(this.defendInfo){this.labLv.text=""+this.defendInfo.protectorLv;var e=GameGlobal.Config.GuildActiveConfig[this.nextLv];if(null!=e){var t=[];if(this.nextLv<=1)for(var i=0;i<e.attrpower.length;i++)t[i]={value:0,type:e.attrpower[i].type};else t=GameGlobal.Config.GuildActiveConfig[this.nextLv-1].attrpower;this.curAttr_label.textFlow=TextFlowMaker.generateTextFlow(AttributeData.getAttStr(t,0,1,"："));var o=GameGlobal.Config.GuildActiveConfig[this.nextLv];null!=o?(this.curAttr_label.x=13,this.nextImage.visible=!0,this.nextAttrs_label.textFlow=TextFlowMaker.generateTextFlow(AttributeData.getAttStr(o.attrpower,0,1,"：")),this.exp_bar.maximum=o.exp):(this.curAttr_label.x=113,this.nextImage.visible=!1,this.nextAttrs_label.text="",this.exp_bar.value=e.exp),this.exp_bar.value=this.defendInfo.totalActive}this.defendImg.source=GameGlobal.Config.GuildActiveConfig[this.nextLv].pid}},t.prototype.upDataTaskData=function(){var e=[],t=[],i=GameGlobal.Config.GuildTaskConfig,o=GameGlobal.GangModel.gangProtectorTaskInfo;for(var n in i){for(var a=0,r=0;r<o.length;r++)o[r].taskId==parseInt(n)&&(a=o[r].count);var s={taskid:i[n].taskid,maxCount:i[n].num,curCount:a,exp:i[n].exp,name:i[n].name};s.maxCount<=s.curCount?e.push(s):t.push(s)}this.renWuList.dataProvider.replaceAll(t.concat(e))},t.prototype.UpdateRedPoint=function(){},t.NAME="帮会守护",t.goto_types=[{type:0,desc:"帮会妖怪"},{type:1,desc:"采集"},{type:2,desc:"收购橙色"},{type:3,desc:"收购紫色"},{type:4,desc:"收购蓝色"},{type:5,desc:"收购绿色"},{type:6,desc:"帮会蟠桃"},{type:7,desc:"帮会副本"},{type:8,desc:"帮会红色"}],t}(BaseView);__reflect(GangDefendPanel.prototype,"GangDefendPanel",["ICommonWindowTitle"]);var GangDefendItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.go_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){if(1007==this.data.taskid)ViewManager.ins().close(GangProtectorMainWin),ViewManager.ins().close(GangMainWin),ViewManager.ins().openIndex(GangMainWin,GangMainWin.GANG_PANTAOHUI_PANEL);
else if(1008==this.data.taskid)ViewManager.ins().close(GangProtectorMainWin),ViewManager.ins().close(GangMainWin),ViewManager.ins().openIndex(GangMainWin,GangMainWin.GANG_FUBEN_PANEL);else{if(!UserFb.CheckFighting())return;GameGlobal.CommonRaidModel._MapGo(GameGlobal.Config.GuildConfig.mapid),ViewManager.ins().close(GangProtectorMainWin),ViewManager.ins().close(GangMainWin)}},t.prototype.dataChanged=function(){this.itemName.text=this.data.name,this.time_txt.text=this.data.curCount+"/"+this.data.maxCount,this.exp_txt.text=this.data.exp,this.itemIndex%2!=0?this.bg.visible=!1:this.bg.visible=!0,this.itemName.text=this.data.name},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.go_btn&&this.go_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTap,this)},t}(eui.ItemRenderer);__reflect(GangDefendItem.prototype,"GangDefendItem");var GangProtectorAwardPanel=function(e){function t(){var t=e.call(this)||this;return t.defendInfo=new GangProtectorInfo,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.awardList.itemRenderer=GangPAwardItem,this.awardList.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.GANG_UPDATA_PROTECTOR_INFO,this.upDataProtectorInfo),GameGlobal.GangModel.sendGetProtectorInfo()},t.prototype.upDataProtectorInfo=function(e){this.defendInfo=GameGlobal.GangModel.protectorInfo,this.UpdateContent()},t.prototype.UpdateContent=function(){var e=[],t=GameGlobal.Config.GuildEverydayConfig,i=[];if(this.defendInfo){null!=this.defendInfo.rewardMark&&(i=CommonUtils.uintToVecBool(this.defendInfo.rewardMark,32));var o=0;for(var n in t){var a=!1;o<i.length&&(a=i[o]),e.push({id:t[n].id,exp:t[n].exp,reward:t[n].reward,curExp:this.defendInfo.todayActive,hasGet:a}),o++}var r=function(e){var t=e.id;return e.hasGet?t:t+1e3};e.sort(function(e,t){return r(e)-r(t)}),this.awardList.dataProvider=new eui.ArrayCollection(e)}},t.prototype.OnClose=function(){},t.NAME="每日奖励",t}(BaseView);__reflect(GangProtectorAwardPanel.prototype,"GangProtectorAwardPanel",["ICommonWindowTitle"]);var GangPAwardItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase,this.list.dataProvider=new eui.ArrayCollection([]),this.btnApply.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data.reward;this.list.dataProvider.replaceAll(e);for(var t=0;t<this.list.numElements;t++)this.list.getVirtualElementAt(t).isShowName(!1);var i=this.data.curExp>=this.data.exp?Color.l_green_1:Color.Red,o="今日活跃点达到"+this.data.exp+" (|C:"+i+"&T:"+this.data.curExp+"|/"+this.data.exp+")";this.desc_label.textFlow=TextFlowMaker.generateTextFlow(o),this.data.curExp>=this.data.exp?(this.btnApply.enabled=this.data.hasGet,this.btnApply.label=this.data.hasGet?"领 取":"已领取"):(this.btnApply.enabled=!1,this.btnApply.label="未达成")},t.prototype._OnBtnClick=function(e){this.data.exp<=this.data.curExp?GameGlobal.GangModel.sendGetProtectorEveryDataAward(this.data.id):UserTips.ins().showTips("活跃点还没达到")},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.btnApply&&this.btnApply.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t}(eui.ItemRenderer);__reflect(GangPAwardItem.prototype,"GangPAwardItem");var GangProtectorJinJieAwardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangProtectorJinJieAwardSkin",t.commonDialog.title="进阶奖励",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBase,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),e&&e.length>0&&this.UpdateContent(e[0])},t.prototype.UpdateContent=function(e){var t=GameGlobal.Config.GuildActiveConfig[e+1];null==t&&(t=GameGlobal.Config.GuildActiveConfig[e]),this.list.dataProvider.replaceAll(t.reward),this.desc_text.text="守护达到"+e+"级可获得"},t.prototype.OnClose=function(){this.removeEvents()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GangProtectorJinJieAwardWin.prototype,"GangProtectorJinJieAwardWin");var GangProtectorMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GangProtectorMainSkin",t.observe(MessageDef.GANG_UPDATA_PROTECTOR_INFO,t.UpdateTabBtnRedPoint),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(GangDefendPanel,{skinName:"GangDefendPanelSkin",mContext:this}),TabView.CreateTabViewData(GangProtectorAwardPanel,{skinName:"GangProtectorAwardListSkin",mContext:this})])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=0;e&&e.length>0&&(i=e[0]),this.commonWindowBg.OnAdded(this,i),this.UpdateTabBtnRedPoint()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return GameGlobal.GangModel.HasGang()?Deblocking.Check(DeblockingType.TYPE_50):(UserTips.ins().showTips("您还没有帮会，请先加入帮会"),!1)},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.GUARD_UPGRADE)),this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.GangModel.mRedPoint.IsRedAct(GangModelRedPoint.DAILY_AWARD))},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t.GANG_PROTECTOR_PANEL=0,t.GANG_AWARD_PANEL=1,t}(BaseEuiView);__reflect(GangProtectorMainWin.prototype,"GangProtectorMainWin",["ICommonWindow"]);var GodLotteryModel=function(e){function t(){var t=e.call(this)||this;return t.mLotteryCount=0,t.RegNetMsgs(S2cProtocol.sc_luck_info,t._DoInitInfo),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype._DoInitInfo=function(e){this.mLotteryCount=e.tenNum||0,GameGlobal.MessageCenter.dispatch(MessageDef.GODLOTTERY_UPDATE_INFO)},t.prototype.SendLottery=function(e){var t=this;this.mLotteryType=e;var i=new Sproto.cs_luck_tianshen_request;i.typ=e,this.Rpc(C2sProtocol.cs_luck_tianshen,i,function(e){e.ret&&(t.mAwardList=e.rewards,t.mLotteryCount=e.tenNum||t.mLotteryCount,ViewManager.ins().isShow(GodLotteryResultPanel)?ViewManager.ins().open(GodLotteryResultPanel):GameGlobal.MessageCenter.dispatch(MessageDef.GODLOTTERY_UPDATE_LOTTERY))},this)},t.prototype.getAwardList=function(){for(var e=[],t=0,i=this.mAwardList;t<i.length;t++){var o=i[t];e.push({type:1,id:o.id,count:o.num})}return e},Object.defineProperty(t.prototype,"lotteryCount",{get:function(){return this.mLotteryCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lotteryType",{get:function(){return this.mLotteryType},enumerable:!0,configurable:!0}),t}(BaseSystem);__reflect(GodLotteryModel.prototype,"GodLotteryModel");var GodLotteryConst=function(){function e(){}return e.GetCost=function(e){var t=GameGlobal.Config.TianShenLuckConfig[e];for(var i in t){var o=t[i];return o.cost[0]}},e.GetNextSpecailAward=function(e){var t=GameGlobal.Config.TianShenLuckBaseConfig.speciallyitem;for(var i in t){var o=parseInt(i);if(o>e)return[o,t[i]]}return[null,null]},e.TYPE_BINDGOLD_TEN=1,e.TYPE_GOLD_TEN=3,e.TYPE_GOLD_ONE=2,e}();__reflect(GodLotteryConst.prototype,"GodLotteryConst");var GodLotteryResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TreasureResultSkin",t.group.itemRenderer=ItemBase,t._AddClick(t.bg,t.CloseSelf),t._AddClick(t.btn0,t.CloseSelf),t._AddClick(t.btn1,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.GodLotteryModel.lotteryType,o=GodLotteryConst.GetCost(i);this.priceIcon.type=o.id,this.priceIcon.price=o.count,this.btn1.label=i==GodLotteryConst.TYPE_GOLD_ONE?"唤神一次":"唤神十次";var n=GameGlobal.GodLotteryModel.getAwardList();this.group.dataProvider=new eui.ArrayCollection(n),this.mTime=10,TimerManager.ins().doTimer(1e3,this.mTime,this.UpdateTime,this),this.UpdateTime()},t.prototype._OnClick=function(){var e=GameGlobal.GodLotteryModel.lotteryType,t=GodLotteryConst.GetCost(e);this.mTime<5?Checker.Currency(t,!0,null,function(){GameGlobal.GodLotteryModel.SendLottery(e)}):UserTips.ins().showTips("您的操作过快|C:0xFF0000&T:("+(this.mTime-5)+"s)|过后再尝试")},t.prototype.UpdateTime=function(){this.timeLabel.textFlow=TextFlowMaker.generateTextFlow("点击任意区域关闭|C:0x019704&T:("+--this.mTime+"s)"),this.mTime<0&&this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GodLotteryResultPanel.prototype,"GodLotteryResultPanel");var GodLotteryWin=function(e){function t(){var t=e.call(this)||this;return t.mIdxList=[0,1,2,3,4,5,6,7,8,9,10,11,12],t.skinName="GodLotterySkin",t.commonWindowBg.SetTitle("天神降临"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnGoldOne,this._OnClicked),this._AddClick(this.btnGoldTen,this._OnClicked),this._AddClick(this.btnBindGoldTen,this._OnClicked),this._AddClick(this.btnShop,this._OnClicked)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GODLOTTERY_UPDATE_LOTTERY,this.ShowLotteryAni),this.observe(MessageDef.GODLOTTERY_UPDATE_INFO,this.UpdateContent),GameGlobal.TreasureHuntModel.SendGetInfo();var i=GodLotteryConst.GetCost(GodLotteryConst.TYPE_BINDGOLD_TEN);this.piBindGoldTen.type=i.id,this.piBindGoldTen.price=i.count;var o=GodLotteryConst.GetCost(GodLotteryConst.TYPE_GOLD_ONE);this.piGoldOne.type=o.id,this.piGoldOne.price=o.count;var n=GodLotteryConst.GetCost(GodLotteryConst.TYPE_GOLD_TEN);this.piGoldTen.type=n.id,this.piGoldTen.price=n.count,this.SetShowList(),this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.btnGoldOne:this.Lottery(GodLotteryConst.TYPE_GOLD_ONE);break;case this.btnGoldTen:this.Lottery(GodLotteryConst.TYPE_GOLD_TEN);break;case this.btnBindGoldTen:this.Lottery(GodLotteryConst.TYPE_BINDGOLD_TEN);break;case this.btnShop:}},t.prototype.Lottery=function(e){var t=GodLotteryConst.GetCost(e);Checker.Currency(t,!0,null,function(){GameGlobal.GodLotteryModel.SendLottery(e)})},t.prototype.UpdateContent=function(){var e=GameGlobal.GodLotteryModel.lotteryCount,t=GodLotteryConst.GetNextSpecailAward(e),i=t[0],o=t[1];if(this.groupFirst.visible=null!=o,o){this.firstItem.setItemAward(o.type,o.id,o.count),this.labDesc1.textFlow=TextFlowMaker.generateTextFlow("再抽|C:0x019704&T:"+(i-e)+"|次");var n=this.GetItemName(o.id),a=n[0],r=n[1],s="|C:0x6e330b&T:必得 |C:"+r+"&T:"+a+"*"+o.count+"|";this.labDesc2.textFlow=TextFlowMaker.generateTextFlow(s)}},t.prototype.SetShowList=function(){for(var e=GameGlobal.Config.TianShenLuckBaseConfig.showitem,t=0,i=0,o=e;i<o.length;i++){var n=o[i];if(this["item"+t]&&this["item"+t].setItemAward(n.type,n.id,n.count),this["labName"+t]){var a=this.GetItemName(n.id),r=a[0],s=a[1];this["labName"+t].text=r,this["labName"+t].textColor=s}t++}},t.prototype.ShowLotteryAni=function(){this.mCurIdx=1,this.mMaxCount=13,this.btnGoldOne.enabled=!1,this.btnGoldTen.enabled=!1,this.btnBindGoldTen.enabled=!1,this.shuffleList(),this.AddTimer(50,this.mMaxCount+1,this._DoTimer)},t.prototype._DoTimer=function(){for(var e=0;13>e;e++){var t=this.mIdxList[this.mCurIdx-1]||99;this["item"+e].imgChoose.visible=e==t}this.mCurIdx++,this.mCurIdx>this.mMaxCount&&(this.btnGoldOne.enabled=!0,this.btnGoldTen.enabled=!0,this.btnBindGoldTen.enabled=!0,ViewManager.ins().open(GodLotteryResultPanel))},t.prototype.GetItemName=function(e){var t=GlobalConfig.ins().ItemConfig[e];return t?[t.name,ItemBase.QUALITY_COLOR[t.quality]]:["",ItemBase.QUALITY_COLOR[0]]},t.prototype.shuffleList=function(){for(var e=0;e<this.mIdxList.length;++e){var t=MathUtils.limitInteger(e+1,this.mIdxList.length-1),i=this.mIdxList[t];this.mIdxList[t]=this.mIdxList[e],this.mIdxList[e]=i}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GodLotteryWin.prototype,"GodLotteryWin",["ICommonWindow"]);var GodPetActiveModel=function(e){function t(){var t=e.call(this)||this;return t.mCash=0,t.mReward=0,t.mRecordMap={},t.regNetMsg(S2cProtocol.sc_holy_pet_info,t._DoInitInfo),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype._DoInitInfo=function(e){this.mCash=e.cash||this.mCash,this.mReward=e.reward||this.mReward,this.mSDay=e.sTime,this.mEDay=e.eTime,this.mCurDay=e.day,this._CaculTime(),this.mRedPoint=this._CheckRedPoint(),GameGlobal.MessageCenter.dispatch(MessageDef.GODPETACTIVE_UPDATE_INFO)},t.prototype.SendGainAward=function(e){var t=new Sproto.cs_holy_pet_get_reward_request;t.no=e,this.Rpc(C2sProtocol.cs_holy_pet_get_reward,t)},t.prototype.SendLottery=function(){var e=this,t=new Sproto.cs_holy_pet_luck_draw_request;this.Rpc(C2sProtocol.cs_holy_pet_luck_draw,t,function(t){t.ret&&(e.mAwardList=t.data,e.mAwardId=t.no,e.UpdateRecordMap(t.luckLog),GameGlobal.MessageCenter.dispatch(MessageDef.GODPETACTIVE_LOTTERY_NOTICE),GameGlobal.MessageCenter.dispatch(MessageDef.GODPETACTIVE_UPDATE_AWARDINFO),GameGlobal.MessageCenter.dispatch(MessageDef.GODPETACTIVE_UPDATE_LOTTERY))},this)},t.prototype.SendGetAwardInfo=function(){var e=this,t=new Sproto.cs_holy_pet_get_info_request;this.Rpc(C2sProtocol.cs_holy_pet_get_info,t,function(t){e.mAwardList=t.data,e.UpdateRecordMap(t.luckLog),GameGlobal.MessageCenter.dispatch(MessageDef.GODPETACTIVE_UPDATE_AWARDINFO)},this)},t.prototype.IsTargetDone=function(e){var t=GameGlobal.Config.BeastAwardConfig[e];return t?t.money<=this.mCash:!1},t.prototype.GetAwardIdx=function(){for(var e=1,t=0,i=GameGlobal.Config.BeastLotteryConfig.showitem;t<i.length;t++){var o=i[t];if(o.id==this.mAwardId)return e;e++}return-1},t.prototype.UpdateRecordMap=function(e){this.mRecordMap={};for(var t=0,i=e;t<i.length;t++){var o=i[t];this.mRecordMap[o]=!0}},t.prototype.HasGain=function(e){return 1==this.mRecordMap[e]},t.prototype.HasRewardGained=function(e){return(this.mReward&Math.pow(2,e))>0},t.prototype.GetCashCount=function(){return this.mCash},t.prototype.GetAwardList=function(){return this.mAwardList.reverse()},t.prototype.GetAwards=function(){return[{type:1,count:1,id:this.mAwardId}]},t.prototype.IsOpenActive=function(){return this.mCurDay>=this.mSDay&&this.mCurDay<=this.mEDay},t.prototype.GetEndtime=function(){return this.mEndTime},t.prototype._CaculTime=function(){var e=new Date(GameServer.serverTimeMilli);e.setHours(0,0,0),this.mEndTime=e.getTime()+864e5*(this.mEDay-this.mCurDay+1)-6e3},t.prototype._CheckRedPoint=function(){for(var e in GameGlobal.Config.BeastAwardConfig){var t=GameGlobal.Config.BeastAwardConfig[e];if(t&&this.IsTargetDone(t.id)&&!this.HasRewardGained(t.id))return!0}return!1},t.prototype.CanLottery=function(){var e=GameGlobal.Config.BeastLotteryConfig.deplete[0];return Checker.Data(e,!1)},t.prototype.IsGodPetLotteryOpen=function(){return GameServer.serverOpenDay>=GameGlobal.Config.BeastLotteryConfig.Days},t}(BaseSystem);__reflect(GodPetActiveModel.prototype,"GodPetActiveModel");var GodPetActiveAwardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodPetActiveAwardSkin",t.commonWindowBg.SetTitle("神兽降临"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GodPetAwardItem,UIHelper.SetLinkStyleLabel(this.labGoto),this._AddClick(this.labGoto,this._OnClicked)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GODPETACTIVE_UPDATE_INFO,this.UpdateContent),this.UpdateContent(),this.AddTimer(1e3,0,this.updateTime)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.updateTime=function(){var e=GameGlobal.GodPetActiveModel.GetEndtime()-GameServer.serverTimeMilli;this.labTime.text=DateUtils.format_17(e),e>0||(this.labTime.text="",this.CloseSelf(),TimerManager.ins().removeAll(this))},t.prototype._OnClicked=function(){ViewManager.ins().open(GodPetActiveLotteryWin)},t.prototype.UpdateContent=function(){this.labCostNum.text=GameGlobal.GodPetActiveModel.GetCashCount()+"元宝";var e=CommonUtils.GetArray(GameGlobal.Config.BeastAwardConfig,"id"),t=function(e){var t=e.id;return GameGlobal.GodPetActiveModel.HasRewardGained(t)?t+1e4:GameGlobal.GodPetActiveModel.IsTargetDone(t)?t-1e4:t};e.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(e)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GodPetActiveAwardWin.prototype,"GodPetActiveAwardWin",["ICommonWindow"]);var GodPetAwardItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btnGain.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.btnGain.name=e.id,this.imgGained.visible=GameGlobal.GodPetActiveModel.HasRewardGained(e.id),this.btnGain.visible=!this.imgGained.visible,this.btnGain.enabled=GameGlobal.GodPetActiveModel.IsTargetDone(e.id),this.btnGain.label=this.btnGain.enabled?"领取":"未达到",UIHelper.ShowRedPoint(this.btnGain,this.btnGain.visible&&this.btnGain.enabled),this.labText.text="累积消费："+e.money+"元宝",this.list.dataProvider=new eui.ArrayCollection(e.reward)},t.prototype._OnBtnClick=function(e){var t=parseInt(e.currentTarget.name);GameGlobal.GodPetActiveModel.SendGainAward(t)},t}(eui.ItemRenderer);__reflect(GodPetAwardItem.prototype,"GodPetAwardItem");var GodPetActiveLotteryIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setItemAward=function(e){this.item.setItemAward(e.type,e.id,e.count),this.imgGain.visible=GameGlobal.GodPetActiveModel.HasGain(e.id)},t.prototype.showChoose=function(e){this.item.imgChoose.visible=e},t}(eui.Component);__reflect(GodPetActiveLotteryIcon.prototype,"GodPetActiveLotteryIcon",["eui.UIComponent","egret.DisplayObject"]);var GodPetActiveLotteryWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodPetActiveLotterySkin",t.commonWindowBg.SetTitle("降服神兽"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GodPetLotteryItem,this.list.dataProvider=new eui.ArrayCollection([]),this._AddClick(this.btnLottery,this._OnClicked),this._AddClick(this.labGain,this._OnClicked)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GODPETACTIVE_UPDATE_LOTTERY,this.ShowLotteryAni),this.observe(MessageDef.GODPETACTIVE_UPDATE_AWARDINFO,this.UpdateAwardList),this.observe(MessageDef.GODPETACTIVE_UPDATE_AWARDINFO,this.SetItemList),GameGlobal.GodPetActiveModel.SendGetAwardInfo(),this.consumeLabel.mIsImg=!0,UIHelper.SetLinkStyleLabel(this.labGain),this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.btnLottery:var t=GameGlobal.Config.BeastLotteryConfig.deplete[0];Checker.Data(t)&&GameGlobal.GodPetActiveModel.SendLottery();break;case this.labGain:ViewManager.ins().open(GodPetActiveTipWin)}},t.prototype.UpdateAwardList=function(){var e=GameGlobal.GodPetActiveModel.GetAwardList();this.list.dataProvider=new eui.ArrayCollection(e),this.list.validateNow()},t.prototype.UpdateContent=function(){this.SetItemList();var e=GameGlobal.Config.BeastLotteryConfig.deplete[0];this.consumeLabel.SetItem(e.id,e.count,GameGlobal.UserBag.GetCount(e.id))},t.prototype.SetItemList=function(){for(var e=GameGlobal.Config.BeastLotteryConfig.showitem,t=0,i=0,o=e;i<o.length;i++){var n=o[i];this["item"+t]&&this["item"+t].setItemAward(n),t++}},t.prototype.ShowLotteryAni=function(){var e=GameGlobal.Config.BeastLotteryConfig.deplete[0];this.consumeLabel.SetItem(e.id,e.count,GameGlobal.UserBag.GetCount(e.id)),this.mCurIdx=1,this.mMaxCount=GameGlobal.GodPetActiveModel.GetAwardIdx()+10,this.btnLottery.enabled=!1,this.AddTimer(200,this.mMaxCount+5,this._DoTimer)},t.prototype._DoTimer=function(){if(this.mCurIdx<=this.mMaxCount)for(var e=0;10>e;e++)this["item"+e].showChoose(e==(this.mCurIdx-1)%10);this.mCurIdx++,this.mCurIdx>this.mMaxCount+5&&(this.btnLottery.enabled=!0,ViewManager.ins().open(GodPetActiveResultPanel))},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GodPetActiveLotteryWin.prototype,"GodPetActiveLotteryWin",["ICommonWindow"]);var GodPetLotteryItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.ins().ItemConfig[e.id],i=ItemBase.QUALITY_COLOR[t.quality],o="|C:0xffe87c&T:"+e.name+" |C:0xffffff&T:获得 |C:"+i+"&T:"+t.name+"*1|";this.labText.textFlow=TextFlowMaker.generateTextFlow(o)},t}(eui.ItemRenderer);__reflect(GodPetLotteryItem.prototype,"GodPetLotteryItem");var GodPetActiveResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodPetActiveResultSkin",t.group.itemRenderer=ItemBase,t._AddClick(t.bg,t.CloseSelf),t._AddClick(t.btn0,t.CloseSelf),t._AddClick(t.btn1,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.Config.BeastLotteryConfig.deplete[0];this.priceIcon.type=i.id,this.priceIcon.price=i.count,this.btn1.label="降服1次";var o=GameGlobal.GodPetActiveModel.GetAwards();this.group.dataProvider=new eui.ArrayCollection(o),this.mTime=10,this.AddTimer(1e3,this.mTime,this.UpdateTime),this.UpdateTime()},t.prototype._OnClick=function(){var e=GameGlobal.Config.BeastLotteryConfig.deplete[0];this.mTime<5?Checker.Data(e)&&GameGlobal.GodPetActiveModel.SendLottery():UserTips.ins().showTips("您的操作过快|C:0xFF0000&T:("+(this.mTime-5)+"s)|过后再尝试")},t.prototype.UpdateTime=function(){this.timeLabel.textFlow=TextFlowMaker.generateTextFlow("点击任意区域关闭|C:0x019704&T:("+--this.mTime+"s)"),this.mTime<0&&this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GodPetActiveResultPanel.prototype,"GodPetActiveResultPanel");var GodPetActiveTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodPetActiveTipSkin",t._AddClick(t.btnConfirm,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="获取途径",this.cmlabText.text="其他获取途径",this._AddClick(this.labGoto1,this._OnClicked),this._AddClick(this.labGoto2,this._OnClicked),this._AddClick(this.labGoto3,this._OnClicked);var i=GameGlobal.Config.BeastLotteryConfig.deplete[0],o=GlobalConfig.ins().ItemConfig[i.id],n=ItemBase.QUALITY_COLOR[o.quality];this.labName.text=o.name,this.labName.textColor=n,this.item.setItemAward(i.type,i.id,i.count);var a=GameGlobal.Config.GainItemConfig[i.id];if(a)for(var r=1,s=0,l=a.gainWay;s<l.length;s++){var c=l[s];this["labGoto"+r]&&(this["labGoto"+r].visible=!0,this["labGoto"+r].text=c[0],UIHelper.SetLinkStyleLabel(this["labGoto"+r])),r++}},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.labGoto1:this.HandleClick(0);break;case this.labGoto2:this.HandleClick(1);break;case this.labGoto3:this.HandleClick(2)}},t.prototype.HandleClick=function(e){var t=GameGlobal.Config.BeastLotteryConfig.deplete[0],i=GameGlobal.Config.GainItemConfig[t.id],o=i.gainWay[e];o&&(ViewManager.ins().Guide(o[1][0],o[1][1]),o[1][0]!=ViewIndexDef.TYPE_2000&&o[1][0]!=ViewIndexDef.TYPE_2001&&ViewManager.ins().close(this))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GodPetActiveTipWin.prototype,"GodPetActiveTipWin");var GodPieCondType;!function(e){e[e.TYPE_01=1]="TYPE_01",e[e.TYPE_02=2]="TYPE_02",e[e.TYPE_03=3]="TYPE_03"}(GodPieCondType||(GodPieCondType={}));var GodPieModel=function(e){function t(){var t=e.call(this)||this;return t.m_Infos=[],t.m_PopStep=0,t.regNetMsg(S2cProtocol.sc_rechargew_shitinit,t.doGodPiePanlInitData),t.regNetMsg(S2cProtocol.sc_rechargew_shit,t.doGodPiePanlData),t.regNetMsg(S2cProtocol.sc_rechargew_shitstep,t.newdata),t.regNetMsg(S2cProtocol.sc_rechargew_shitclose,t._DoShitClose),t.regNetMsg(S2cProtocol.sc_rechargew_shitindex,t._DoShitIndex),t}return __extends(t,e),t.IsActOpen=function(e){return null==e||null==e.config?!1:e.config.endTime<GameServer.serverTime||GameServer.serverTime<e.config.startTime?!1:!0},t.prototype._ShowPop=function(){this.m_PopStep>0||(this.m_PopStep=1,TimerManager.ins().doTimer(3e3,1,this._Show,this))},t.prototype.SetShowState=function(){this.m_PopStep=2},t.prototype._Show=function(){if(1==this.m_PopStep){if(this.SetShowState(),!t.IsDeblocking())return;for(var e=0;e<this.m_Infos.length;++e){var i=this.m_Infos[e];if(t.IsActOpen(i)){for(var o=!1,n=0;n<i.config.awards.length;++n)(i.info.getnum[n]||0)<(i.config.awards[n].buycount||1)&&(o=!0);if(o&&!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_GOD_PIE)){ViewManager.ins().open(GodPieWin,e);break}}}}},t.prototype._SetDefaultData=function(e){if(null!=e&&null!=e.awards)for(var t=0,i=e.awards;t<i.length;t++){var o=i[t];o.buycount||(o.buycount=1)}},t.prototype.ClearData=function(){this.m_Infos=[]},t.prototype.doGodPiePanlInitData=function(e){for(var t=0,i=e.initinfo;t<i.length;t++){var o=i[t];this._SetDefaultData(o.config),this.m_Infos.push(o)}!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_GOD_PIE)&&this.m_Infos.length>0&&this._ShowPop(),GameGlobal.MessageCenter.dispatch(MessageDef.GOGPIE_UPDATE)},t.prototype.doGodPiePanlData=function(e){this._SetDefaultData(e.config),this.m_Infos.push(e),GameGlobal.MessageCenter.dispatch(MessageDef.GOGPIE_UPDATE)},t.prototype.newdata=function(e){var t=this.GetInfo(e.payType,e.gid);t&&(t.info.step=e.step,t.info.getnum=e.getnum,t.info.steps=e.steps,GameGlobal.MessageCenter.dispatch(MessageDef.GOGPIE_UPDATE))},t.prototype._DoShitClose=function(e){var t=this.GetInfo(e.payType,e.gid);t&&(t.config.endTime=0,GameGlobal.MessageCenter.dispatch(MessageDef.GOGPIE_UPDATE))},t.prototype._DoShitIndex=function(e){},t.prototype.GetInfo=function(e,t){for(var i=0,o=this.m_Infos;i<o.length;i++){var n=o[i];if(n.config.payType==e&&n.config.gid==t)return n}return null},t.prototype.TopDataProvider=function(){for(var e=[],i=0,o=this.m_Infos;i<o.length;i++){var n=o[i];t.IsActOpen(n)&&!t.IsGotten(n)&&e.push(n)}return e},t.prototype.Sendbuy=function(e,t,i){var o=new Sproto.cs_rechargew_getawards_request;o.payType=e,o.gid=t,o.index=i,this.Rpc(C2sProtocol.cs_rechargew_getawards,o)},t.prototype.IsRedPoint=function(){for(var e=0,i=this.m_Infos;e<i.length;e++){var o=i[e];if(t.IsActOpen(o))for(var n=0;n<o.config.awards.length;++n)if(t.GetInfoStateByIndex(o,n)==RewardState.CanGet)return!0}return!1},t.GetInfoIndex=function(e){for(var t=0;t<e.config.awards.length;t++){var i=e.info.getnum[t]||0,o=e.config.awards[t].buycount||1;if(o>i)return t}return e.config.awards.length-1},t.IsGotten=function(e){if(null==e||null==e.config)return!1;for(var t=e.config.awards,i=0;i<t.length;++i){var o=t[i],n=o.buycount||1,a=e.info.getnum[i]||0;if(n>a)return!1}return!0},t.GetInfoStateByIndex=function(e,t){var i=e.config.awards[t].buycount||1,o=e.info.getnum[t]||0;if(o>=i)return RewardState.Gotten;if(!this.IsActOpen(e))return RewardState.NotReached;var n=!1;if(n=0==e.config.condType?!0:e.config.condType==GodPieCondType.TYPE_03?(e.info.steps[t]||0)>=(e.config.targets[t]||0):e.info.step>=(e.config.targets[t]||0),!n)return RewardState.NotReached;var a=e.config.prices[t]||0;return a?2==e.config.gtype&&Checker.Money(MoneyConst.yuanbao,a,!1)?RewardState.CanGet:void 0:RewardState.CanGet},t.GetBuyCountStr=function(e,t){try{var i=e.config.awards[t].buycount||1;return 1==i?"":" ("+(e.info.getnum[t]||0)+"/"+i+")"}catch(o){}return""},t.IsFinish=function(e){return null==e||GameServer.serverTime>e.config.endTime},t.IsDeblocking=function(){return Deblocking.Check(DeblockingType.TYPE_29,!0)},t}(BaseSystem);__reflect(GodPieModel.prototype,"GodPieModel");var GodPieListItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseEffe,this.scroller.horizontalScrollBar.autoVisibility=!1,this.send.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data;GodPieWin.BuyData(e.info,e.index)},t.prototype.dataChanged=function(){var e=this.data,t=e.info;GodPieWin.ShowTargetData(this.contion,this.consumeLabel,this.list,this.buyGroup,this.geted,this.send,t,e.index)},t}(eui.ItemRenderer);__reflect(GodPieListItem.prototype,"GodPieListItem");var GodPieWin=function(e){function t(){var t=e.call(this)||this;return t.m_CurIndex=0,t.m_List=null,t.skinName="GodPieWinSkin",t.list.itemRenderer=ItemBaseEffe,t.list2.itemRenderer=GodPieListItem,t.menuList.itemRenderer=GodPieItem,t.menuList.dataProvider=t.m_DataList=new eui.ArrayCollection,t}return __extends(t,e),t.prototype.GetDataList=function(){return null==this.m_List&&(this.m_List=GameGlobal.GodPieModel.TopDataProvider()),this.m_List},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),GameGlobal.GodPieModel.SetShowState();var i=e[0]||0;return this.menuList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabTouch,this),this.AddClick(this.btnSend,this.onClick),this.AddClick(this.btnSet,this.onClick),this.m_List=GameGlobal.GodPieModel.TopDataProvider(),this.m_List.length<1?void this.CloseSelf():(this.observe(MessageDef.GOGPIE_UPDATE,this.UpdateList),this.observe(MessageDef.GOGPIE_UPDATE,this.UpdateContent),TimerManager.ins().doTimer(1e3,0,this._DoUpdate,this),this.UpdateList(),this.m_CurIndex=-1,this._UpdateSel(i),void(this.btnSet.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_GOD_PIE)))},t.prototype.UpdateList=function(){null==this.m_List&&(this.m_List=[]);for(var e=GameGlobal.GodPieModel.TopDataProvider(),t=0,i=e;t<i.length;t++){for(var o=i[t],n=!1,a=0,r=this.m_List;a<r.length;a++){var s=r[a];if(o.config.gtype==s.config.gtype&&o.config.gid==s.config.gid){n=!0;break}}n||this.m_List.push(o)}this.m_CurIndex=MathUtils.Clamp(this.m_CurIndex,0,this.m_List.length-1),this.m_DataList.replaceAll(this.m_List)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),this.menuList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabTouch,this),TimerManager.ins().removeAll(this)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.btnSend:if(null==this.GetCurInfo())return;var i=GodPieModel.GetInfoIndex(this.GetCurInfo());t.BuyData(this.GetCurInfo(),i);break;case this.btnSet:if(null==this.GetCurInfo())return;this.btnSet.selected?UserTips.ins().showTips("关闭推送"):UserTips.ins().showTips("开启推送"),FuncOpenModel.SetData(FuncOpenModel.SAVE_GOD_PIE,this.btnSet.selected)}},t.prototype.onTabTouch=function(e){this._UpdateSel(this.menuList.selectedIndex)},t.prototype._UpdateSel=function(e){this.m_CurIndex!=e&&(this.list.selectedIndex=e,this.m_CurIndex=MathUtils.Clamp(e,0,this.GetDataList().length-1),this.UpdateContent())},t.prototype._DoUpdate=function(){var e=this.GetCurInfo();null!=e&&(GodPieModel.IsFinish(e)?this.date.text="活动结束":this.date.text=DateUtils.format_5(1e3*(e.config.endTime-GameServer.serverTime),4),this.desc.textFlow=TextFlowMaker.generateTextFlow(e.config.content))},t.prototype._UpdateListContent=function(e){for(var t=[],i=0,o=e.config.awards.length;o>i;++i)t.push({index:i,info:e});var n=function(e){return GodPieModel.GetInfoStateByIndex(e.info,e.index)==RewardState.Gotten?e.index+1e4:e.index};t.sort(function(e,t){return n(e)-n(t)}),this.list2.dataProvider=new eui.ArrayCollection(t)},t.prototype._ShowGroupType=function(e){this.listGroup.visible=1==e,this.activityGroup.visible=!this.listGroup.visible},t.BuyData=function(e,t){if(GodPieModel.IsFinish(e))return void UserTips.InfoTip("活动结束");
if(e.config.condType==GodPieCondType.TYPE_03&&e.info.steps[t]<e.config.targets[t])return void RechargeWin.Open();return(1==e.config.condType||2==e.config.condType)&&e.info.step<e.config.targets[t]?void UserTips.ErrorTip("条件不满足"):void(2==e.config.gtype?Checker.Money(MoneyConst.yuanbao,e.config.prices[t]||0)&&GameGlobal.GodPieModel.Sendbuy(e.config.payType,e.config.gid,t+1):GameGlobal.GodPieModel.Sendbuy(e.config.payType,e.config.gid,t+1))},t.ShowTargetData=function(e,t,i,o,n,a,r,s){var l="";if(0!=r.config.condType){var c=r.config.targets[s];if(c){var u=r.info.step+"/"+c;if(1==r.config.condType)l="需充值（"+u+"）金额";else if(2==r.config.condType)l="需消费（"+u+"）元宝";else if(r.config.condType==GodPieCondType.TYPE_03){var p=GodPieModel.GetBuyCountStr(r,s);l="单笔充值"+c+"元档位即可获得"+p}}}e.text=l,UIHelper.SetVisible(e,l.length>0);var h=r.config.awards[s];i.dataProvider=new eui.ArrayCollection(RewardData.ToRewardDatas(h.items)),o.visible=r.config.endTime-GameServer.serverTime>=0;var d=GodPieModel.GetInfoStateByIndex(r,s);n.visible=d==RewardState.Gotten,o.visible=d!=RewardState.Gotten;var _=r.config.condType==GodPieCondType.TYPE_03&&r.info.steps[s]>=r.config.targets[s];UIHelper.ShowRedPoint(a,_);var f=r.config.prices[s]||0;UIHelper.SetVisible(t,f>1),f>1&&(1==r.config.gtype?t.text=f+"元购买":2==r.config.gtype&&(t.text=f+"元宝购买")),r.config.condType!=GodPieCondType.TYPE_03&&t.visible&&(t.text+=GodPieModel.GetBuyCountStr(r,s)),r.config.condType==GodPieCondType.TYPE_03?a.label=r.info.steps[s]<r.config.targets[s]?"前往充值":"领取":a.label=t.visible?"购买":"获取"},t.prototype.UpdateContent=function(){var e=this.GetDataList()[this.m_CurIndex];if(null==e)return this.listGroup.visible=!1,void(this.activityGroup.visible=!1);if(this._DoUpdate(),this._ShowGroupType(e.config.showType),1==e.config.showType)return void this._UpdateListContent(e);var i=GodPieModel.GetInfoIndex(e);t.ShowTargetData(this.contion,this.consumeLabel,this.list,this.buyGroup,this.geted,this.btnSend,e,i)},t.prototype.GetCurInfo=function(){return this.GetDataList()[this.m_CurIndex]},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GodPieWin.prototype,"GodPieWin");var GodPieItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.redPoint.visible=GodPieModel.GetInfoStateByIndex(e,GodPieModel.GetInfoIndex(e))==RewardState.CanGet},t}(eui.ItemRenderer);__reflect(GodPieItem.prototype,"GodPieItem");var GodXinJunActiveLotteryWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodXinJunActiveLotterySkin",t.commonWindowBg.SetTitle("星君降临"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=GodXinJunLotteryItem,this.list.dataProvider=new eui.ArrayCollection([]),this._AddClick(this.btnXinJunOne,this._OnClicked)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.GODXINJUNACTIVE_UPDATE_LOTTERY,this.ShowLotteryAni),this.observe(MessageDef.GODXINJUNACTIVE_UPDATE_AWARDINFO,this.UpdateAwardList),this.observe(MessageDef.GODXINJUNACTIVE_UPDATE_AWARDINFO,this.SetItemList),GameGlobal.GodXinJunActiveModel.SendGetAwardInfo();var i=GodLotteryConst.GetCost(GodLotteryConst.TYPE_BINDGOLD_TEN);this.piXinJunTen.type=i.id,this.piXinJunTen.price=i.count;var o=GodLotteryConst.GetCost(GodLotteryConst.TYPE_GOLD_ONE);this.piXinJunOne.type=o.id,this.piXinJunOne.price=o.count,this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.btnXinJunOne:var t=GameGlobal.Config.XinJunLotteryConfig.deplete[0];Checker.Data(t)&&GameGlobal.GodXinJunActiveModel.SendLottery()}},t.prototype.UpdateAwardList=function(){var e=GameGlobal.GodXinJunActiveModel.GetAwardList();this.list.dataProvider=new eui.ArrayCollection(e),this.list.validateNow()},t.prototype.UpdateContent=function(){this.SetItemList()},t.prototype.SetItemList=function(){for(var e=GameGlobal.Config.XinJunLotteryConfig.showitem,t=0,i=0,o=e;i<o.length;i++){var n=o[i];this["item"+t]&&this["item"+t].setItemAward(n),t++}},t.prototype.ShowLotteryAni=function(){GameGlobal.Config.XinJunLotteryConfig.deplete[0];this.mCurIdx=1,this.mMaxCount=GameGlobal.GodXinJunActiveModel.GetAwardIdx()+10,this.btnXinJunOne.enabled=!1,this.btnXinJunTen.enabled=!1,this.AddTimer(200,this.mMaxCount+5,this._DoTimer)},t.prototype._DoTimer=function(){if(this.mCurIdx<=this.mMaxCount)for(var e=0;10>e;e++)this["item"+e].showChoose(e==(this.mCurIdx-1)%10);this.mCurIdx++,this.mCurIdx>this.mMaxCount+5&&(this.btnXinJunOne.enabled=!0,this.btnXinJunTen.enabled=!0,ViewManager.ins().open(GodXinJunLotteryResultPanel))},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(GodXinJunActiveLotteryWin.prototype,"GodXinJunActiveLotteryWin",["ICommonWindow"]);var GodXinJunLotteryItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=GlobalConfig.ins().ItemConfig[e.id],i=ItemBase.QUALITY_COLOR[t.quality],o="|C:0xffe87c&T:"+e.name+" |C:0xffffff&T:获得 |C:"+i+"&T:"+t.name+"*1|";this.labText.textFlow=TextFlowMaker.generateTextFlow(o)},t}(eui.ItemRenderer);__reflect(GodXinJunLotteryItem.prototype,"GodXinJunLotteryItem");var GodXinJunActiveModel=function(e){function t(){var t=e.call(this)||this;return t.mCash=0,t.mReward=0,t.mRecordMap={},t}return __extends(t,e),t.prototype.Init=function(){},t.prototype.SendLottery=function(){var e=this,t=new Sproto.cs_holy_xinjun_luck_draw_request;this.Rpc(C2sProtocol.cs_holy_xinjun_luck_draw,t,function(t){t.ret&&(e.mAwardList=t.data,e.mAwardId=t.no,e.UpdateRecordMap(t.luckLog),GameGlobal.MessageCenter.dispatch(MessageDef.GODXINJUNACTIVE_LOTTERY_NOTICE),GameGlobal.MessageCenter.dispatch(MessageDef.GODXINJUNACTIVE_UPDATE_AWARDINFO),GameGlobal.MessageCenter.dispatch(MessageDef.GODXINJUNACTIVE_UPDATE_LOTTERY))},this)},t.prototype.SendGetAwardInfo=function(){var e=this,t=new Sproto.cs_holy_xinjun_get_info_request;this.Rpc(C2sProtocol.cs_holy_xinjun_get_info,t,function(t){e.mAwardList=t.data,e.UpdateRecordMap(t.luckLog),GameGlobal.MessageCenter.dispatch(MessageDef.GODXINJUNACTIVE_UPDATE_AWARDINFO)},this)},t.prototype.IsTargetDone=function(e){var t=GameGlobal.Config.BeastAwardConfig[e];return t?t.money<=this.mCash:!1},t.prototype.GetAwardIdx=function(){for(var e=1,t=0,i=GameGlobal.Config.XinJunLotteryConfig.showitem;t<i.length;t++){var o=i[t];if(o.id==this.mAwardId)return e;e++}return-1},t.prototype.UpdateRecordMap=function(e){this.mRecordMap={};for(var t=0,i=e;t<i.length;t++){var o=i[t];this.mRecordMap[o]=!0}},t.prototype.HasGain=function(e){return 1==this.mRecordMap[e]},t.prototype.HasRewardGained=function(e){return(this.mReward&Math.pow(2,e))>0},t.prototype.GetCashCount=function(){return this.mCash},t.prototype.GetAwardList=function(){return this.mAwardList.reverse()},t.prototype.GetAwards=function(){return[{type:1,count:1,id:this.mAwardId}]},t.prototype.IsOpenActive=function(){return this.mCurDay>=this.mSDay&&this.mCurDay<=this.mEDay},t.prototype.GetEndtime=function(){return this.mEndTime},t.prototype._CaculTime=function(){var e=new Date(GameServer.serverTimeMilli);e.setHours(0,0,0),this.mEndTime=e.getTime()+864e5*(this.mEDay-this.mCurDay+1)-6e3},t.prototype._CheckRedPoint=function(){for(var e in GameGlobal.Config.BeastAwardConfig){var t=GameGlobal.Config.BeastAwardConfig[e];if(t&&this.IsTargetDone(t.id)&&!this.HasRewardGained(t.id))return!0}return!1},t.prototype.CanLottery=function(){var e=GameGlobal.Config.XinJunLotteryConfig.deplete[0];return Checker.Data(e,!1)},t.prototype.IsGODXINJUNLotteryOpen=function(){return GameServer.serverOpenDay>=GameGlobal.Config.XinJunLotteryConfig.Days},t}(BaseSystem);__reflect(GodXinJunActiveModel.prototype,"GodXinJunActiveModel");var GodXinJunLotteryResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="GodXinJunActiveResultSkin",t.group.itemRenderer=ItemBase,t._AddClick(t.bg,t.CloseSelf),t._AddClick(t.btn0,t.CloseSelf),t._AddClick(t.btn1,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.Config.XinJunLotteryConfig.deplete[0];this.priceIcon.type=i.id,this.priceIcon.price=i.count,this.btn1.label="搜寻一次";var o=GameGlobal.GodXinJunActiveModel.GetAwards();this.group.dataProvider=new eui.ArrayCollection(o),this.mTime=4,TimerManager.ins().doTimer(1e3,this.mTime,this.UpdateTime,this),this.UpdateTime()},t.prototype._OnClick=function(){var e=GameGlobal.GodXinJunActiveModel.CanLottery();return this.isClick?void UserTips.ins().showTips("您的操作过快"):void(e&&(GameGlobal.GodXinJunActiveModel.SendLottery(),this.isClick=!0,this.CloseSelf()))},t.prototype.UpdateTime=function(){this.timeLabel.textFlow=TextFlowMaker.generateTextFlow("点击任意区域关闭|C:0x019704&T:("+--this.mTime+"s)"),this.mTime<0&&this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(GodXinJunLotteryResultPanel.prototype,"GodXinJunLotteryResultPanel");var GuildApplyInfo=function(){function e(){}return e}();__reflect(GuildApplyInfo.prototype,"GuildApplyInfo");var GuildBuilding;!function(e){e[e.GUILD_HALL=1]="GUILD_HALL",e[e.GUILD_LIANGONGFANG=2]="GUILD_LIANGONGFANG",e[e.GUILD_SHOP=3]="GUILD_SHOP",e[e.GUILD_BOSS=4]="GUILD_BOSS",e[e.MAX=5]="MAX"}(GuildBuilding||(GuildBuilding={}));var GuildListInfo=function(){function e(){}return e}();__reflect(GuildListInfo.prototype,"GuildListInfo");var GuildMemberInfo=function(){function e(){}return e}();__reflect(GuildMemberInfo.prototype,"GuildMemberInfo");var GuildMessageInfo=function(){function e(){this.time=0}return e.prototype.parserMessage=function(e){this.type=e.type,this.content=e.content,1==this.type&&(this.roleId=e.playerid,this.name=e.name,this.job=e.job,this.sex=e.sex,this.vip=e.vip,this.office=e.office,this.time=e.time||0)},e}();__reflect(GuildMessageInfo.prototype,"GuildMessageInfo");var GuildOffice;!function(e){e[e.GUILD_MEMBER=0]="GUILD_MEMBER",e[e.GUILD_JINGYING=1]="GUILD_JINGYING",e[e.GUILD_TANGZHU=2]="GUILD_TANGZHU",e[e.GUILD_HUFA=3]="GUILD_HUFA",e[e.GUILD_ZHANGLAO=4]="GUILD_ZHANGLAO",e[e.GUILD_FUBANGZHU=5]="GUILD_FUBANGZHU",e[e.GUILD_BANGZHU=6]="GUILD_BANGZHU"}(GuildOffice||(GuildOffice={}));var GuildRoleSkillInfo=function(){function e(){this.guildSkillInfo=[],this.practiceSkillInfo=[]}return e.prototype.GetSkillInfo=function(e){return e==GuildSkillType.NORMAL?this.guildSkillInfo:this.practiceSkillInfo},e.prototype.GetSkillInfoByIndex=function(e,t){var i=this.GetSkillInfo(e);return i?i[t]:null},e}();__reflect(GuildRoleSkillInfo.prototype,"GuildRoleSkillInfo");var GuildSkillInfo=function(){function e(){this.level=0,this.exp=0}return e}();__reflect(GuildSkillInfo.prototype,"GuildSkillInfo");var GuildTaskInfo=function(){function e(){}return e}();__reflect(GuildTaskInfo.prototype,"GuildTaskInfo");var HavingHuanModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_HAVING_HUAN)||this;return t.mMsgDefUpdateExp=MessageDef.HAVING_HUAN_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.HAVING_HUAN_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.HAVING_HUAN_UPDATE,t.mMsgDefInit=MessageDef.HAVING_HUAN_INIT,t.mMsgDefUpdateEquip=MessageDef.HAVING_HUAN_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_HAVING_HUAN_EQUIP_UP,t.mRedPoint=new HavingHuanRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.FlowerBaseConfig,this.LvproConfig=GameGlobal.Config.FlowerLvproConfig,this.SkillConfig=GameGlobal.Config.FlowerSkillConfig,this.AttrsConfig=GameGlobal.Config.FlowerAttrsConfig,this.ProgressConfig=GameGlobal.Config.FlowerProgressConfig,this.SkinConfig=GameGlobal.Config.FlowerSkinConfig,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this),GameGlobal.RaidMgr.UpdateRoleTiannvHua(this.mDressId)},t}(UserTemplate);__reflect(HavingHuanModel.prototype,"HavingHuanModel");var HavingHuanRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.HUA,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(HavingHuanRedPoint.prototype,"HavingHuanRedPoint");var HavingLingqModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_HAVING_LINGQ)||this;return t.mMsgDefUpdateExp=MessageDef.HAVING_LINGQ_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.HAVING_LINGQ_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.HAVING_LINGQ_UPDATE,t.mMsgDefInit=MessageDef.HAVING_LINGQ_INIT,t.mMsgDefUpdateEquip=MessageDef.HAVING_LINGQ_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_HAVING_LINGQ_EQUIP_UP,t.mRedPoint=new HavingLingqRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.NimbusBaseConfig,this.LvproConfig=GameGlobal.Config.NimbusLvproConfig,this.SkillConfig=GameGlobal.Config.NimbusSkillConfig,this.AttrsConfig=GameGlobal.Config.NimbusAttrsConfig,this.ProgressConfig=GameGlobal.Config.NimbusProgressConfig,this.SkinConfig=GameGlobal.Config.NimbusSkinConfig,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this),GameGlobal.RaidMgr.UpdateRoleTiannvLq(this.mDressId)},t}(UserTemplate);__reflect(HavingLingqModel.prototype,"HavingLingqModel");var HavingLingqRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.LINGQI,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(HavingLingqRedPoint.prototype,"HavingLingqRedPoint");var HavingMagicModel=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_tiannv_wash_res,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_tiannv_wash_replace_res,t._getWashReplaceInfo),t.regNetMsg(S2cProtocol.sc_tiannv_equip,t._epuipInfo),t}return __extends(t,e),t.prototype._epuipInfo=function(e){this.skillData=e.data;for(var t=0;t<e.data.length;t++)for(var i=e.data[t],o=0;o<i.attrData.length;o++){var n=i.attrData[o];1==n.type&&(GameGlobal.HavingMagicModel.getAttrsConfigById(n.attrs)||(i.attrData[o]=null)),i.washData[o]&&1==i.washData[o].type&&(GameGlobal.HavingMagicModel.getAttrsConfigById(i.washData[o].attrs)||(i.washData[o]=null))}GameGlobal.MessageCenter.dispatch(MessageDef.HAVING_UPDATE)},t.prototype._DoInitInfo=function(e){this.skillData[e.pos-1]&&(this.skillData[e.pos-1].washNum=e.washNum),GameGlobal.MessageCenter.dispatch(MessageDef.HAVING_WASH_INFO,e)},t.prototype._getWashReplaceInfo=function(e){this.skillData[e.pos-1]&&(this.skillData[e.pos-1].attrData=e.attrData,this.skillData[e.pos-1].washData=e.washData),GameGlobal.MessageCenter.dispatch(MessageDef.HAVING_WASH_REPLACE_INFO,e)},t.prototype.sendTiannvWash=function(e,t,i){var o=new Sproto.cs_tiannv_wash_req_request;o.pos=e,o.washType=t,o.lock=i,this.Rpc(C2sProtocol.cs_tiannv_wash_req,o)},t.prototype.sendTiannvWashReplace=function(e){var t=new Sproto.cs_tiannv_wash_replace_req_request;t.pos=e,this.Rpc(C2sProtocol.cs_tiannv_wash_replace_req,t)},t.prototype.getAttrsConfigById=function(e){return GameGlobal.Config.FemaleDevaSkillAttrsConfig[e]},t.prototype.getMagicConfig=function(){return GameGlobal.Config.FemaleDevaMagicConfig},t.prototype.getSkinConfig=function(e){return GameGlobal.Config.FemaleDevaSkinConfig[e]},t}(BaseSystem);__reflect(HavingMagicModel.prototype,"HavingMagicModel");var HavingModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_HAVING_HAVING)||this;return t.mMsgDefUpdateExp=MessageDef.HAVING_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.HAVING_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.HAVING_UPDATE,t.mMsgDefInit=MessageDef.HAVING_INIT,t.mRedPoint=new HavingModelRedPoint(t),t}return __extends(t,e),t.prototype.IsDeblocking=function(){return Deblocking.Check(DeblockingType.TYPE_19,!0)},t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.FemaleDevaBaseConfig,this.LvproConfig=GameGlobal.Config.FemaleDevaLvproConfig,this.AttrsConfig=GameGlobal.Config.FemaleDevaAttrsConfig,this.ProgressConfig=GameGlobal.Config.FemaleDevaProgressConfig,this.SkinConfig=GameGlobal.Config.FemaleDevaSkinConfig;for(var t=0,i=GameGlobal.Config.FemaleDevaBaseConfig.freshitemid;t<i.length;t++){var o=i[t];GameGlobal.UserBag.AddListenerItem(o.itemId,MessageDef.HAVING_SKILL_ITEM_UPDATE)}e.prototype.Init.call(this)},t.prototype.OnActive=function(){GameGlobal.RaidMgr.UpdateRoleTiannv()},t.prototype.getLevelConfig=function(e){return GameGlobal.Config.FemaleDevaLvproConfig[e]},t.prototype.getBaseConfig=function(){return GameGlobal.Config.FemaleDevaBaseConfig},t.prototype.GetSkillIds=function(){var e=[],t=GameGlobal.Config.FemaleDevaBaseConfig;e.push(t.skill);for(var i=0;i<GameGlobal.HavingMagicModel.skillData.length;i++){var o=GameGlobal.HavingMagicModel.skillData[i];o&&o.attrData&&4==o.attrData.length&&(e[i+1]=o.attrData[3].skillNo)}return e},t}(UserTemplate);__reflect(HavingModel.prototype,"HavingModel");var HavingModelRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=null,t}return __extends(t,e),t.prototype.GetMessageDef=function(){var t=e.prototype.GetMessageDef.call(this);return t.push(MessageDef.HAVING_SKILL_ITEM_UPDATE),t},t.prototype.GetCheckFuncList=function(){var i=e.prototype.GetCheckFuncList.call(this);return i[t.INDEX_SKILL_ITEM]=this.GetIndexSkillItem,i},t.prototype.OnMessage=function(i){return i!=MessageDef.HAVING_SKILL_ITEM_UPDATE?e.prototype.OnMessage.call(this,i):(this.ClearFlag(t.INDEX_SKILL_ITEM),!0)},t.prototype.GetIndexSkillItem=function(){if(!Deblocking.IsDeblocking(DeblockingType.TYPE_20))return!1;for(var e=0,t=GameGlobal.Config.FemaleDevaBaseConfig.freshitemid;e<t.length;e++){var i=t[e];if(GameGlobal.UserBag.GetCount(i.itemId)>0)return!0}return!1},t.INDEX_SKILL_ITEM=20,t}(UserTemplateRedPoint);__reflect(HavingModelRedPoint.prototype,"HavingModelRedPoint");var HavingInfo=function(){function e(){}return e}();__reflect(HavingInfo.prototype,"HavingInfo");var HavingAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="HavingAttrSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mModel=e[0],this.commonDialog.OnAdded(this),this.commonDialog.title=e[1];var i=e[2];this.levelAttr.textFlow=AttributeData.GetAttrTabString(this.mModel.GetCurAttr()),this.skinAttr.textFlow=AttributeData.GetAttrTabString(this.mModel.GetCurDressAttr()),this.drugAttr.textFlow=AttributeData.GetAttrTabString(this.mModel.GetCurDrugAttr()),this.powerLabel.text=this.mModel.GetPower(),this.showPanel.SetBody(i)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HavingAttrPanel.prototype,"HavingAttrPanel");var HavingHuanPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.HavingHuanModel,t.mModelRedPoint=GameGlobal.HavingHuanModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.tiannv_flower,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btnSkin.visible=!1},t.RedPointCheck=function(){return GameGlobal.HavingHuanModel.mRedPoint.IsRedPoint()},t.NAME="花辇",t}(RoleRidePanel);__reflect(HavingHuanPanel.prototype,"HavingHuanPanel");var HavingMagicPanel=function(e){function t(){var t=e.call(this)||this;return t.model=GameGlobal.HavingMagicModel,t.skillPlots=[],t.pos=1,t.skillAttrsDic={},t.skillWashAttrsDic={},t.skillWashNums=[],t.curAttrTxts=[],t.washAttrTxts=[],t.lockAry=[],t.betterAry=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){this.skillPlots.push(this.HavingSkillItem1),this.skillPlots.push(this.HavingSkillItem2),this.skillPlots.push(this.HavingSkillItem3),this.skillPlots.push(this.HavingSkillItem4),this.curAttrTxts.push(this.curAttackLabel),this.curAttrTxts.push(this.curDefenseLabel),this.curAttrTxts.push(this.curCritLabel),this.curAttrTxts.push(this.curSkill),this.washAttrTxts.push(this.xilianAttackLabel3),this.washAttrTxts.push(this.xilianDefenseLabel),this.washAttrTxts.push(this.xilianCritLabel),this.washAttrTxts.push(this.xilianSkill),this._AddClick(this.HavingSkillItem1,this._OnClick),this._AddClick(this.HavingSkillItem2,this._OnClick),this._AddClick(this.HavingSkillItem3,this._OnClick),this._AddClick(this.HavingSkillItem4,this._OnClick),this._AddClick(this.lock0,this._OnClick),this._AddClick(this.lock1,this._OnClick),this._AddClick(this.lock2,this._OnClick),this._AddClick(this.lock3,this._OnClick),this._AddClick(this.starGroup,this._OnClick),this._AddClick(this.btnXiLian,this._OnClick),this._AddClick(this.btnAdvXilian,this._OnClick),this._AddClick(this.btnChange,this._OnClick),this._AddClick(this.help,this._click),this.initViewData()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.HAVING_UPDATE,this.initViewData),this.observe(MessageDef.HAVING_WASH_INFO,this.updateWashData),this.observe(MessageDef.HAVING_WASH_REPLACE_INFO,this.updateWashReplaceData),this.observe(MessageDef.BYB_CHANGE,this.updateItemCount),this.observe(MessageDef.YB_CHANGE,this.updateItemCount)},t.prototype.OnClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeObserve()},t.prototype._click=function(){ViewManager.ins().open(ActivityDescPanel,14,"规则说明")},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.HavingSkillItem1:case this.HavingSkillItem2:case this.HavingSkillItem3:case this.HavingSkillItem4:var t=e.currentTarget;t.isopen?(this.setState(t.pos),this.pos=t.pos,this.showContent(this.pos)):UserTips.ins().showTips(this.skillConfigData[t.pos].des);break;case this.btnXiLian:if(UserBag.ins().GetCount(this.freshData[0].itemId)>=this.priceIcon2.price)if(this.isWarn()){var i=GameGlobal.HavingModel.getBaseConfig().prompt;WarnWin.showCheckBox("btnXiLian","洗练属性存在|C:"+ItemBase.GetColorByQuality(i)+"&T:["+ItemBase.QUALITY_NAME_STR[i]+"品质或以上]|的属性或技能，是否继续洗练？属性与技能替换后生效",this.okHandler,this)}else this.model.sendTiannvWash(this.pos,1,this.lockAry);else Checker.CheckItem(this.freshData[0].itemId,this.priceIcon2.price,!1);break;case this.btnAdvXilian:if(UserBag.ins().GetCount(this.freshData[1].itemId)>=this.priceIcon3.price)if(this.isWarn()){var i=GameGlobal.HavingModel.getBaseConfig().prompt;WarnWin.showCheckBox("btnAdvXilian","洗练属性存在|C:"+ItemBase.GetColorByQuality(i)+"&T:["+ItemBase.QUALITY_NAME_STR[i]+"品质以上]|的属性或技能，是否继续洗练？属性与技能替换后生效",this.okSuperHandler,this)}else this.model.sendTiannvWash(this.pos,2,this.lockAry);else Checker.CheckItem(this.freshData[1].itemId,this.priceIcon3.price,!1);break;case this.btnChange:this.skillWashAttrsDic[this.pos]&&this.skillWashAttrsDic[this.pos].length>0?this.model.sendTiannvWashReplace(this.pos):UserTips.ins().showTips("没有洗练属性可更换");break;case this.starGroup:var o="法器洗练已累计刷新：",n=this.skillWashNums[this.pos-1]+"次",a=12845309;ViewManager.ins().open(PetXilianTipPanel,this.skillConfigData[this.pos].name,o,n,a,GameGlobal.Config.FemaleDevaBaseConfig.freshitemid);break;case this.lock0:case this.lock1:case this.lock2:case this.lock3:var r=e.currentTarget;if(r.islock||Checker.Money(MoneyConst.yuanbao,this.freshMoneyData[this.lockAry.length])){if(r.islock=!r.islock,r.setLockImg(r.islock),r.islock)this.lockAry.push(r.lockid);else{var s=this.lockAry.indexOf(r.lockid);s>-1&&this.lockAry.splice(s,1)}this.lockAry.sort(),this.showLockState(this.lockAry),this.setPrice1()}}},t.prototype.isWarn=function(){for(var e=!1,t=0;t<this.betterAry.length;t++)this.betterAry[t]&&-1==this.lockAry.indexOf(t+1)&&(e=!0);return e},t.prototype.showLockState=function(e){var t=1,i=this.lockAry.length;for(t=1;4>=t;t++)this["lock"+(t-1)].visible=!0;if(3==i)for(t=1;4>=t;t++){var o=this.lockAry.indexOf(t);-1==o&&(this["lock"+(t-1)].visible=!1)}},t.prototype.okHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.model.sendTiannvWash(this.pos,1,this.lockAry)},t.prototype.okSuperHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.model.sendTiannvWash(this.pos,2,this.lockAry)},t.prototype.setState=function(e){var t=0,i=this.skillPlots.length;for(t;i>t;t++)this.skillPlots[t].currentState="up";this["HavingSkillItem"+e].currentState="down"},t.prototype.initViewData=function(){this.skillConfigData=this.model.getMagicConfig();for(var e in this.skillConfigData){var t=this.skillConfigData[e].name,i=this.skillConfigData[e].icon;this.skillPlots[parseInt(e)-1].setSkillName(parseInt(e),t),this.skillPlots[parseInt(e)-1].setSkillIcon(i,!1),this.skillPlots[parseInt(e)-1].pos=parseInt(e),this["skillAttr"+e].visible=!1}var o=0,n=this.model.skillData.length;for(o;n>o;o++)this.skillPlots[o].setOpen(!0),this["skillAttr"+(o+1)].visible=!0,this.skillAttrsDic[o+1]=this.model.skillData[o].attrData,this.skillWashAttrsDic[o+1]=this.model.skillData[o].washData,this.skillWashNums[o]=this.model.skillData[o].washNum;this.freshData=GameGlobal.HavingModel.getBaseConfig().freshitemid,this.priceIcon2.type=this.freshData[0].itemId,this.priceIcon2.price=1,this.priceIcon2.setMyCount(UserBag.ins().GetCount(this.freshData[0].itemId)),this.priceIcon3.type=this.freshData[1].itemId,this.priceIcon3.price=1,this.priceIcon3.setMyCount(UserBag.ins().GetCount(this.freshData[1].itemId)),this.freshMoneyData=GameGlobal.HavingModel.getBaseConfig().freshMoney,this.priceIcon1.type=MoneyConst.yuanbao,this.priceIcon1.price=0,this.UpdateContent()},t.prototype.UpdateContent=function(){this.showContent(this.pos)},t.prototype.showContent=function(e){var t=GameGlobal.HavingModel.getBaseConfig().polishStar;this.skillWashNums[e-1]>=t[t.length-1]?this.currentState="full":this.currentState="normal",this.skillAttrsDic[e]&&this.setState(e),this.showPanel.SetBody(AppearanceConfig.GetUIPath(GameGlobal.HavingModel.SkinConfig[GameGlobal.HavingModel.mDressId].pid)),this.updateAttrs(e),this.updateWashAttrs(e),this.updateStars(e),this.updateTotalPower()},t.prototype.updateStars=function(e){for(var t=GameGlobal.HavingModel.getBaseConfig().polishStar,i=0;i<this.starGroup.numChildren;i++){var o=this.starGroup.getChildAt(i);o.source=this.skillWashNums[e-1]>=t[i]?"ui_bm_star022":"ui_bm_star021"}},t.prototype.updateAttrs=function(e){this.curIconImg.visible=!1,this.curSkillDes.text="";for(var t=1;t<this.skillPlots.length+1;t++)if(this.skillAttrsDic[t]){var i=0,o=this.skillAttrsDic[t].length,n="",a=void 0,r=void 0,s=void 0,l=void 0;for(this.lockAry=[],this.setPrice1(),i;o>i;i++){if(this["lock"+i].islock=!1,this["lock"+i].setLockImg(!1),this["lock"+i].lockid=i+1,void 0!=this.skillAttrsDic[e]&&(a=this.skillAttrsDic[e][i]),s=this.skillAttrsDic[t][i],void 0!=a){if(1==a.type){l=GameGlobal.HavingMagicModel.getAttrsConfigById(a.attrs);var c=new AttributeData;c.type=l.attrs.type,c.value=l.attrs.value,this.curAttrTxts[i].text=AttributeData.getAttStr(c,0);var u=ItemBase.GetColorByQuality(l.quality);this.curAttrTxts[i].textColor=u}else if(2==a.type)if(r=GameGlobal.Config.EffectsConfig[a.skillNo]){this.curIconImg.visible=!0,this.curIconImg.source=r[GameGlobal.Config.EffectsConfig_keys.icon],this.curAttrTxts[i].text=r[GameGlobal.Config.EffectsConfig_keys.skinName];var p=r[GameGlobal.Config.EffectsConfig_keys.quality],u=ItemBase.GetColorByQuality(p);this.curAttrTxts[i].textColor=u,this.curSkillDes.text=r[GameGlobal.Config.EffectsConfig_keys.desc]}else this.curAttrTxts[i].text="",this.curSkillDes.text=""}else this.curAttrTxts[i].text="";if(s)if(1==s.type){l=GameGlobal.HavingMagicModel.getAttrsConfigById(s.attrs);var c=new AttributeData;c.type=l.attrs.type,c.value=l.attrs.value;var u=ItemBase.GetColorByQuality(l.quality);n+="|C:"+u+"&T:"+AttributeData.getAttStr(c,0)+"|\n"}else if(2==s.type&&(r=GameGlobal.Config.EffectsConfig[s.skillNo])){var p=r[GameGlobal.Config.EffectsConfig_keys.quality],u=ItemBase.GetColorByQuality(p);n+="|C:"+u+"&T:"+r[GameGlobal.Config.EffectsConfig_keys.skinName]+"|"}}this["attrsLabel"+t].textFlow=TextFlowMaker.generateTextFlow(n)}},t.prototype.updateAttrs2=function(e){this.curIconImg.visible=!1,this.curSkillDes.text="";for(var t=1;t<this.skillPlots.length+1;t++)if(this.skillAttrsDic[t]){var i=0,o=this.skillAttrsDic[t].length,n="",a=void 0,r=void 0,s=void 0,l=void 0;for(this.setPrice1(),i;o>i;i++){if(void 0!=this.skillAttrsDic[e]&&(a=this.skillAttrsDic[e][i]),s=this.skillAttrsDic[t][i],void 0!=a){if(1==a.type){l=GameGlobal.HavingMagicModel.getAttrsConfigById(a.attrs);var c=new AttributeData;c.type=l.attrs.type,c.value=l.attrs.value,this.curAttrTxts[i].text=AttributeData.getAttStr(c,0);var u=ItemBase.GetColorByQuality(l.quality);this.curAttrTxts[i].textColor=u}else if(2==a.type)if(r=GameGlobal.Config.EffectsConfig[a.skillNo]){this.curIconImg.visible=!0,this.curIconImg.source=r[GameGlobal.Config.EffectsConfig_keys.icon],this.curAttrTxts[i].text=r[GameGlobal.Config.EffectsConfig_keys.skinName];var p=r[GameGlobal.Config.EffectsConfig_keys.quality],u=ItemBase.GetColorByQuality(p);this.curAttrTxts[i].textColor=u,this.curSkillDes.text=r[GameGlobal.Config.EffectsConfig_keys.desc]}else this.curAttrTxts[i].text="",this.curSkillDes.text=""}else this.curAttrTxts[i].text="";if(s)if(1==s.type){l=GameGlobal.HavingMagicModel.getAttrsConfigById(s.attrs);var c=new AttributeData;c.type=l.attrs.type,c.value=l.attrs.value;var u=ItemBase.GetColorByQuality(l.quality);n+="|C:"+u+"&T:"+AttributeData.getAttStr(c,0)+"|\n"}else if(2==s.type&&(r=GameGlobal.Config.EffectsConfig[s.skillNo])){var p=r[GameGlobal.Config.EffectsConfig_keys.quality],u=ItemBase.GetColorByQuality(p);n+="|C:"+u+"&T:"+r[GameGlobal.Config.EffectsConfig_keys.skinName]+"|"}}}},t.prototype.setPrice1=function(){var e=this.lockAry.length;e>0?this.priceIcon1.price=this.freshMoneyData[e-1]:this.priceIcon1.price=0},t.prototype.updateWashReplaceData=function(e){this.skillAttrsDic[e.pos]=e.attrData,this.skillWashAttrsDic[e.pos]=e.washData,this.updateAttrs(e.pos),this.updateWashAttrs(e.pos,!0),this.updateTotalPower()},t.prototype.updateWashData=function(e){this.priceIcon2.setMyCount(UserBag.ins().GetCount(this.freshData[0].itemId)),this.priceIcon3.setMyCount(UserBag.ins().GetCount(this.freshData[1].itemId)),this.skillWashAttrsDic[e.pos]=e.washData,void 0!=e.washNum&&(this.skillWashNums[e.pos-1]=e.washNum),this.updateStars(e.pos),this.updateWashAttrs(e.pos),this.updateAttrs2(e.pos)},t.prototype.updateItemCount=function(){this.priceIcon2.setMyCount(UserBag.ins().GetCount(this.freshData[0].itemId)),this.priceIcon3.setMyCount(UserBag.ins().GetCount(this.freshData[1].itemId))},t.prototype.updateWashAttrs=function(e,t){if(void 0===t&&(t=!0),this.nextIconImg.visible=!1,t){for(var i=0;4>i;i++)this.washAttrTxts[i].text="";this.xilianSkillDes.text="",this.betterAry=[]}if(this.skillWashAttrsDic[e]){var o=void 0,n=this.skillWashAttrsDic[e].length,a=void 0,r=void 0,s=void 0;for(this.xilianSkillDes.text="",o=0;n>o;o++)if(a=this.skillWashAttrsDic[e][o]){if(1==a.type){s=GameGlobal.HavingMagicModel.getAttrsConfigById(a.attrs);var l=new AttributeData;l.type=s.attrs.type,l.value=s.attrs.value,this.washAttrTxts[o].text=AttributeData.getAttStr(l,0),this.washAttrTxts[o].textColor=ItemBase.GetColorByQuality(s.quality),-1==this.lockAry.indexOf(o+1)&&s.quality>=GameGlobal.HavingModel.getBaseConfig().prompt?this.betterAry[o]=!0:this.betterAry[o]=!1}else if(2==a.type)if(r=GameGlobal.Config.EffectsConfig[a.skillNo]){this.nextIconImg.visible=!0,this.nextIconImg.source=r[GameGlobal.Config.EffectsConfig_keys.icon],this.washAttrTxts[o].text=r[GameGlobal.Config.EffectsConfig_keys.skinName],this.xilianSkillDes.text=r[GameGlobal.Config.EffectsConfig_keys.desc];var c=r[GameGlobal.Config.EffectsConfig_keys.quality];this.washAttrTxts[o].textColor=ItemBase.GetColorByQuality(c),-1==this.lockAry.indexOf(o+1)&&c>=GameGlobal.HavingModel.getBaseConfig().prompt?this.betterAry[o]=!0:this.betterAry[o]=!1}else this.washAttrTxts[o].text="",this.xilianSkillDes.text=""}else this.washAttrTxts[o].text=""}},t.prototype.updateTotalPower=function(){var e=[];for(var t in this.skillAttrsDic){var i=this.skillAttrsDic[t];
if(i)for(var o=0;o<i.length;o++)if(i[o]&&1==i[o].type){var n=GameGlobal.HavingMagicModel.getAttrsConfigById(i[o].attrs);if(!n)continue;var a=new AttributeData;a.type=n.attrs.type,a.value=n.attrs.value,e.push(a)}}this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e)},t.RedPointCheck=function(){return GameGlobal.HavingModel.mRedPoint.Get(HavingModelRedPoint.INDEX_SKILL_ITEM)},t.NAME="法器",t}(BaseView);__reflect(HavingMagicPanel.prototype,"HavingMagicPanel",["ICommonWindowTitle"]);var HavingLockItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.islock=!1,t.lockid=0,t}return __extends(t,e),t.prototype.setLockImg=function(e){this.lockImg.source=e?"ui_tn_icon_suo02":"ui_tn_icon_suo01"},t}(eui.Component);__reflect(HavingLockItem.prototype,"HavingLockItem");var HavingSkillItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isopen=!1,t}return __extends(t,e),t.prototype.setSkillName=function(e,t){switch(e){case 1:case 2:this.skillUpName.text=t,this.skillUpName.visible=!0;break;case 3:case 4:this.skillBottomName.text=t,this.skillBottomName.visible=!0}},t.prototype.setSkillIcon=function(e,t){this.skillIcon.source=e,this.setOpen(t)},t.prototype.setOpen=function(e){this.isopen=e,this.skillIcon.filters=e?null:Color.GetFilter()},t}(eui.Component);__reflect(HavingSkillItem.prototype,"HavingSkillItem");var HavingMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="HavingMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(HavingUpLevelPanel,{skinName:"HavingUpLevelSkin",mContext:this}),TabView.CreateTabViewData(HavingMagicPanel,{skinName:"HavingMagicSkin",mContext:this}),TabView.CreateTabViewData(HavingHuanPanel),TabView.CreateTabViewData(HavingReikiPanel)])},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_19)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,o?i:0),this.observe(GameGlobal.HavingModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.HavingModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.HavingHuanModel.GetItemRpUpdateMsg(),this.UpdateRedPoint2),this.observe(GameGlobal.HavingHuanModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint2),this.observe(GameGlobal.HavingLingqModel.GetItemRpUpdateMsg(),this.UpdateRedPoint3),this.observe(GameGlobal.HavingLingqModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint3),this.UpdateRedPoint(),this.UpdateRedPoint2(),this.UpdateRedPoint3(),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.updateJiJieBtnPng()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(2),[ActivityKaiFuJiJieType.tiannv_flower]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(3),[ActivityKaiFuJiJieType.tiannv_nimbus])},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(0),this.mCommonWindowBg.CheckTalRedPoint(1)},t.prototype.UpdateRedPoint2=function(){this.mCommonWindowBg.CheckTalRedPoint(2)},t.prototype.UpdateRedPoint3=function(){this.mCommonWindowBg.CheckTalRedPoint(3)},t.prototype.OnClose=function(){MainBottomPanel.CloseNav(this)},t.prototype.OnOpenIndex=function(e){switch(e){case 1:return Deblocking.Check(DeblockingType.TYPE_20);case 2:return Deblocking.Check(DeblockingType.TYPE_21);case 3:return Deblocking.Check(DeblockingType.TYPE_22)}return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(HavingMainPanel.prototype,"HavingMainPanel",["ICommonWindow"]);var HavingReikiPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.HavingLingqModel,t.mModelRedPoint=GameGlobal.HavingLingqModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.tiannv_nimbus,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btnSkin.visible=!1},t.RedPointCheck=function(){return GameGlobal.HavingLingqModel.mRedPoint.IsRedPoint()},t.NAME="灵气",t}(RoleRidePanel);__reflect(HavingReikiPanel.prototype,"HavingReikiPanel");var HavingShow=function(e){function t(){var t=e.call(this)||this;return t.needVipLv=9,t._resources=["ui_xn_bm_db","xuannvxiafan_json"],t.skinName="HavingShowSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.needVipLv=GameGlobal.Config.GuideBaseConfig.viplv,this.skillList.itemRenderer=HavingSkillIcon,this.list.itemRenderer=ItemBaseNotName,this.list.dataProvider=new eui.ArrayCollection(GameGlobal.VipModel.getVipAward(this.needVipLv))},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SHOW_XUANNV,!0),this._AddClick(this.closeBtn,this.CloseSelf),this._AddClick(this.btn,this.tap),this._AddItemClick(this.skillList,this._OnItemClick),this.observe(MessageDef.UPDATA_VIP_AWARDS,this.updateContent),this.observe(MessageDef.VIP_LEVEL_CHANGE,this.updateContent),GameGlobal.RechargeModel.xuanNvCard=!1,this.updateContent()},t.prototype.updateContent=function(){this.xingxiang.SetBody(AppearanceConfig.GetUIPath(GameGlobal.Config.FemaleDevaSkinConfig[1].pid)),this.updateSkills(),this.btn.label="立即提升VIP",UserVip.ins().lv>=9&&(this.btn.label="领取奖励"),BitUtil.Has(UserVip.ins().state,this.needVipLv)&&(this.btn.visible=!1)},t.prototype._OnItemClick=function(e){var t=e.itemIndex,i=this.skillIds[t];return i?void ViewManager.ins().open(PetSkillTipPanel,t>2?2:t,i,!1):void ViewManager.ins().open(HavingSkillTipPanel,1)},t.prototype.updateSkills=function(){this.skillIds=[];var e=GameGlobal.HavingModel.getBaseConfig();this.skillIds.length=6,this.skillIds[0]=e.skill,this.skillIds[1]=e.hskill,this.skillIds[2]=GameGlobal.Config.FemaleDevaMagicConfig[1].attrs[3],this.skillList.dataProvider=new eui.ArrayCollection(this.skillIds)},t.prototype.tap=function(){"立即提升VIP"==this.btn.label?0==GameGlobal.RechargeModel.choicerechare?GameGlobal.RechargeModel.sendRecharge(6):(RechargeWin.Open(),this.CloseSelf()):UserVip.ins().sendGetAwards(this.needVipLv)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HavingShow.prototype,"HavingShow");var HavingSkillTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="HavingSkillTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o="";1==i?o="被动技能是由玄女法器洗出技能后获得":2==i&&(o="被动技能是由天神突破天赋技能后获得"),this.descTxt.text=o},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HavingSkillTipPanel.prototype,"HavingSkillTipPanel");var HavingTipsPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="HavingTipsSkin",t.commondialog.title="V9玄女出战",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commondialog.OnAdded(this),this._AddClick(this.btn,this.tap),this.list.itemRenderer=ItemBaseNotName;var e=CommonUtils.GetArray(GameGlobal.Config.VipConfig[9].treward);this.list.dataProvider=new eui.ArrayCollection(e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.VIP_LEVEL_CHANGE,this.updateContent),GameGlobal.RechargeModel.xuanNvCard=!1,this.updateContent()},t.prototype.updateContent=function(){this.btn.label="提升VIP",UserVip.ins().lv>=9&&(this.btn.label="领取奖励")},t.prototype.tap=function(){"提升VIP"==this.btn.label?GameGlobal.RechargeModel.sendRecharge(6):(UserVip.ins().sendXuanNvAwards(9),ViewManager.ins().close(t))},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HavingTipsPanel.prototype,"HavingTipsPanel");var HavingUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.mShowLevel=0,t.mModel=GameGlobal.HavingModel,t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnAuto.label="停止":t.btnAuto.label="自动进阶"},200),t.mRoleSendCheckData=new RoleSendCheckData(function(e){t.mModel&&t.mModel.SendBoost(e)},function(){var e=t.mModel,i=t.mModel.LvproConfig[e.mLevel];if(!i)return[null];var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.lbFull.text=this.name+"已满阶",this.skillList.itemRenderer=HavingSkillIcon,this.btnSkin.visible=!1,this._AddItemClick(this.skillList,this._OnItemClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.btnAuto,this._OnClick),this._AddClick(this.btnAttrDrug,this._OnClick),this._AddClick(this.powerLabel,this._OnClick),this._AddClick(this.btnSkin,this._OnClick),this._AddClick(this.btn_juexing,this._OnClick),this._AddClick(this.help,this._click)},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.observe(MessageDef.HAVING_UPDATE,this.UpdateContent),this.observe(MessageDef.HAVING_UPDATE_EXP,this._DoUpdateExp),this.observe(this.mModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(this.mModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(this.mModel.GetItemRankItemUpdateMsg(),this.UpdateItemContent),this.UpdateRedPoint()},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype._click=function(){ViewManager.ins().open(ActivityDescPanel,11,"规则说明")},t.prototype.UpdateRedPoint=function(){this.btnSkin.visible&&UIHelper.ShowRedPoint(this.btnSkin,this.mModel.mRedPoint.Get(UserTemplateRedPoint.INDEX_SKIN)),UIHelper.ShowRedPoint(this.btnAttrDrug,this.mModel.mRedPoint.Get(UserTemplateRedPoint.INDEX_ATTR_ITEM)),UIHelper.ShowRedPoint(this.btn_juexing,this.mModel.mRedPoint.Get(UserTemplateRedPoint.INDEX_REWARD))},t.prototype.UpdateItemContent=function(){this._UpdateExp()},t.prototype._OnItemClick=function(e){var t=e.itemIndex,i=this.skillIds[t];return i?void ViewManager.ins().open(PetSkillTipPanel,t>2?2:t,i,!1):void ViewManager.ins().open(HavingSkillTipPanel,1)},t.prototype.updateSkills=function(){this.skillIds=[];var e=GameGlobal.HavingModel.getBaseConfig();this.skillIds.length=6,this.skillIds[0]=e.skill,this.skillIds[1]=e.hskill;for(var t=0;t<GameGlobal.HavingMagicModel.skillData.length;t++){var i=GameGlobal.HavingMagicModel.skillData[t];i&&i.attrData&&4==i.attrData.length&&(this.skillIds[t+2]=i.attrData[3].skillNo)}this.skillList.dataProvider=new eui.ArrayCollection(this.skillIds)},t.prototype.UpdateContent=function(){var e=this.mModel,t=this.mModel.LvproConfig[e.mLevel+1];t?this.currentState="normal":this.currentState="full",this.xingxiang.SetBody(AppearanceConfig.GetUIPath(e.GetAppaId())),this.powerLabel.text=e.GetPower(),this.lbLev.text=e.mLevel+"\n阶",this.updateSkills(),this._UpdateExp()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCulture:this.SendUp();break;case this.btnAuto:this.mRoleAutoSendData.Toggle();break;case this.btnAttrDrug:ViewManager.ins().open(RoleTemplateDrugPanel,this.mModel);break;case this.powerLabel:ViewManager.ins().open(HavingAttrPanel,this.mModel,this.name,AppearanceConfig.GetUIPath(this.mModel.GetLevelSkin(this.mShowLevel)));break;case this.btnSkin:ViewManager.ins().open(RoleRideDressPanel,this.mModel);break;case this.btn_juexing:ViewManager.ins().open(RoleTemplateRewardPanel,this.mModel.mTemplateType)}},t.prototype._DoUpdateExp=function(){this.mRoleAutoSendData.Continue(),this._UpdateExp()},t.prototype._UpdateExp=function(){var e=this.mModel.LvproConfig[this.mModel.mLevel];e&&(this.bar.maximum=e.proexp,this.bar.value=this.mModel.mUpNum*e.exp,this.consumeLabel.Set(e.cost))},t.prototype.SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.RedPointCheck=function(){return GameGlobal.HavingModel.mRedPoint.IsRedPointWithout(HavingModelRedPoint.INDEX_SKILL_ITEM)},t.NAME="玄女",t}(BaseView);__reflect(HavingUpLevelPanel.prototype,"HavingUpLevelPanel",["ICommonWindowTitle"]);var HavingSkillIcon=function(e){function t(){var t=e.call(this)||this;return t.skinName="HavingSkillIconSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){var e,t=this.data;1<this.itemIndex?(this.useTypeImg.source="ui_tn_bm_bei",e=PetConst.GetPassSkillQuality(t),this.iconImg.source=PetConst.GetPassSkillIcon(t)):(this.useTypeImg.source="ui_bm_zhu",e=PetConst.GetSkillQuality(t),this.iconImg.source=PetConst.GetSkillIcon(t)),this.iconBg.source=PetConst.QUALITY_SKILL_BG[e]}},t}(eui.ItemRenderer);__reflect(HavingSkillIcon.prototype,"HavingSkillIcon");var XuannvInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianLvInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.skillIcon,this._OnClick),this.commonDialog.title="详细属性"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),0!=e.length&&(this.info=e[0],this.UpdateContent())},t.prototype.UpdateContent=function(){var e=this.info;this.xianlvId=e.id;var t=new PetInfo;t.mPetId=e.id,t.mName=e.name,this.name_label.textColor=ItemBase.GetColorByQuality(e.quality),this.name_label.text=e.name,this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrs),this.petShowPanel.SetBody(PetConst.GetSkin(e.id)),this.skillDesc.text=XianlvConst.GetSkillDesc(e.id,1),PetSkillIconItem.SetContent(this.skillIcon,XianlvConst.GetSkillId(e.id,1),0),this.attr0Txt.text=AttributeData.getAttStr(e.attrs,0,0,":",!1,"#ffffff","            ")},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.skillIcon:var t=(GameGlobal.XianlvModel.GetXianlvInfo(this.xianlvId),XianlvConst.GetSkillId(this.xianlvId,1)),i=XianlvConst.GetSkillId(this.xianlvId,2);ViewManager.ins().open(XianlvSkillTipPanel,t,i,1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XuannvInfoPanel.prototype,"XuannvInfoPanel",["ICommonWindowTitle"]);var HouseConst=function(){function e(){}return e.GetHouseShowConfig=function(e){return GameGlobal.Config.BasisConfig[e]},e.GetHouseConfig=function(e,t){return GameGlobal.Config.HouseConfig[e][t-1]},e.GetHouseTotalAttr=function(e,t,i){var o=GameGlobal.Config.HouseConfig[e][t-1],n=(o.increase,[]);return AttributeData.AttrAddition(n,this.GetHouseLevelAttr(e,t))},e.GetHouseLevelAttr=function(e,t){var i=GameGlobal.Config.HouseConfig[e][t-1];return i?i.attrpower:[]},e.GetPower=function(e,t,i){var o=this.GetHouseTotalAttr(e,t,i);return ItemConfig.CalcAttrScoreValue(o)},e.IsMaxLevel=function(e,t){var i=GameGlobal.Config.HouseConfig[e][t];return null==i},e.GetBuildList=function(e){var t=[];for(var i in GameGlobal.Config.BasisConfig){var o=GameGlobal.Config.BasisConfig[i];o.house>e&&t.push(o)}return t},e}();__reflect(HouseConst.prototype,"HouseConst");var HouseSendCheckData=function(){function e(e,t){this.m_Callback=e,this.m_GetFunc=t}return e.prototype.SendBoost=function(){this.m_Callback&&this.m_Callback()},e.prototype.GetCost=function(){return this.m_GetFunc()},e.prototype.SendUp=function(){var e=this.GetCost(),t=GameGlobal.YingYuanModel.GetIntimacy();return e>t?(WarnWin.show("亲密度不足，是否前往送花提升？",function(){ViewManager.ins().open(YingYuanXianHuaPanel)},this),!1):(this.SendBoost(),!0)},e}();__reflect(HouseSendCheckData.prototype,"HouseSendCheckData");var HouseBuildTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="HouseBuildTipSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="房屋装修",this.observe(MessageDef.HOUSE_UPDATE_SINGLE,this.CloseSelf),this._AddClick(this.btnConfirm,this._OnClick),this._AddClick(this.btnCancel,this.CloseSelf),this.mGrade=e[0];var i=HouseConst.GetHouseShowConfig(this.mGrade);this.consumeLabel.Set([GameGlobal.YingYuanModel.GetBuildCost(i.house)]);var o=GameGlobal.YingYuanModel.GetHouseLv(),n=o[0],a=o[1],r=HouseConst.GetPower(i.house,n,a)-GameGlobal.YingYuanModel.GetPower();this.labPower.text=r.toString();var s=i.id[0];this.item1.visible=null!=s,s&&this.item1.setItemAward(s.type,s.id,s.count);var l=i.id[1];this.item2.visible=null!=l,l&&this.item2.setItemAward(l.type,l.id,l.count)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._OnClick=function(){var e=this,t=GameGlobal.YingYuanModel.GetBuildCost(this.mGrade);Checker.Money(t.id,t.count,!0,null,function(){GameGlobal.YingYuanModel.SendHouseBuild(e.mGrade)}),this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HouseBuildTipWin.prototype,"HouseBuildTipWin");var HouseBuildWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="HouseBuildSkin",t.commonWindowBg.SetTitle("房屋装修"),t._AddClick(t.btnPrev,t._OnClick),t._AddClick(t.btnNext,t._OnClick),t._AddClick(t.btnBuild,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.labMaxGrade.visible=!1},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.HOUSE_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.HOUSE_UPDATE_SINGLE,this.DoSingle),this.UpdateContent()},t.prototype.SetChooseItemInfo=function(){var e=this.mBuildList[this.mCurChoose-1];this.imgIcon.source=e.image,this.cmLabName.text=e.name,this.labName.text=e.name,this.consumeLabel.Set([GameGlobal.YingYuanModel.GetBuildCost(e.house)]);var t=GameGlobal.YingYuanModel.GetHouseGrade();this.btnPrev.visible=this.mCurChoose>1,this.btnNext.visible=this.mCurChoose<this.mBuildList.length,this.btnBuild.visible=e.house>t;var i=GameGlobal.YingYuanModel.GetHouseLv(),o=i[0],n=i[1],a=HouseConst.GetPower(e.house,o,n)-GameGlobal.YingYuanModel.GetPower();this.labPower.text=a.toString();var r=e.id[0];this.item1.visible=null!=r,r&&this.item1.setItemAward(r.type,r.id,r.count);var s=e.id[1];this.item2.visible=null!=s,s&&this.item2.setItemAward(s.type,s.id,s.count)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnNext:this.mCurChoose=Math.min(this.mCurChoose+1,this.mBuildList.length),this.SetChooseItemInfo();break;case this.btnPrev:this.mCurChoose=Math.max(this.mCurChoose-1,1),this.SetChooseItemInfo();break;case this.btnBuild:var t=this.mBuildList[this.mCurChoose-1];ViewManager.ins().open(HouseBuildTipWin,t.house)}},t.prototype.UpdateContent=function(){if(GameGlobal.YingYuanModel.iSMarry()){this.mCurChoose=1;var e=GameGlobal.YingYuanModel.GetHouseGrade();return this.mBuildList=HouseConst.GetBuildList(e),0==this.mBuildList.length?(this.groupBuild.visible=!1,void(this.labMaxGrade.visible=!0)):void this.SetChooseItemInfo()}},t.prototype.DoSingle=function(){UserTips.ins().showTips("您的伴侣已经离开了你"),this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HouseBuildWin.prototype,"HouseBuildWin",["ICommonWindow"]);var HouseDetailWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="HouseDetailSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="房屋",this.labMaxLv.visible=GameGlobal.YingYuanModel.IsMaxLevel(),this.groupUnMax.visible=!this.labMaxLv.visible;var i=GameGlobal.YingYuanModel.GetHouseGrade(),o=HouseConst.GetHouseShowConfig(i);o&&(this.imgIcon.source=o.image,this.labCurAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.YingYuanModel.GetCurAttr()),this.labNextAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.YingYuanModel.GetNextAttr()))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HouseDetailWin.prototype,"HouseDetailWin");var HouseUpgradePanel=function(e){function t(){var t=e.call(this)||this;return t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动升阶"}),t.mHouseSendCheckData=new HouseSendCheckData(function(e){GameGlobal.YingYuanModel.SendAddHouseExp()},function(){return GameGlobal.YingYuanModel.GetCostIntimacy()}),t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnBuild,this._OnClick),this._AddClick(this.btnAdd,this._OnClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.powerLabel,this._OnClick)},t.prototype.OnOpen=function(){this.observe(MessageDef.HOUSE_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.HOUSE_UPDATE_SINGLE,this.DoSingle),this.UpdateContent()},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateContent=function(){this.groupMaxLv.visible=GameGlobal.YingYuanModel.IsMaxLevel(),this.groupSingle.visible=!GameGlobal.YingYuanModel.iSMarry()&&GameGlobal.YingYuanModel.GetHouseGrade()>0&&!this.groupMaxLv.visible,this.groupUpgrade.visible=!this.groupMaxLv.visible&&!this.groupSingle.visible,this.UpdateExp();var e=GameGlobal.YingYuanModel.GetHouseGrade(),t=HouseConst.GetHouseShowConfig(e);t&&(this.cmLabName.text=t.name,this.imgIcon.source=t.image)},t.prototype.UpdateExp=function(){if(this.powerLabel.text=GameGlobal.YingYuanModel.GetPower(),GameGlobal.YingYuanModel.iSMarry()){var e=GameGlobal.YingYuanModel.GetHouseLv(),t=e[0],i=e[1];GameGlobal.YingYuanModel.IsMaxLevel()?this.mRoleAutoSendData.Stop():this.mRoleAutoSendData.Continue(),this.labLev.text=""+t;var o=GameGlobal.YingYuanModel.GetHouseGrade(),n=HouseConst.GetHouseConfig(o,t);if(n){this.bar.maximum=n.proexp,this.bar.value=i;var a=GameGlobal.YingYuanModel.GetIntimacy();this.labCount.text=a+"/"+n.Intimacy,this.labCount.textColor=a>=n.Intimacy?104196:14352384}}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnBuild:if(!GameGlobal.YingYuanModel.iSMarry())return void UserTips.ins().showTips("只有结婚才可以进行房屋装修升级");if(GameGlobal.YingYuanModel.IsMaxGrage())return void UserTips.ins().showTips("您的房屋已是最高档，不需要再继续装修");ViewManager.ins().open(HouseBuildWin);break;case this.btnAdd:this._SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle();break;case this.powerLabel:ViewManager.ins().open(HouseDetailWin)}},t.prototype._SendUp=function(){return this.mHouseSendCheckData.SendUp()},t.prototype.DoSingle=function(){UserTips.ins().showTips("您的伴侣已经离开了你"),ViewManager.ins().close(YingYuanWin)},t.NAME="房屋",t}(BaseView);__reflect(HouseUpgradePanel.prototype,"HouseUpgradePanel",["ICommonWindowTitle"]);var HouseUpgradeTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="HouseUpgradeTipSkin",t._AddClick(t.btnGain,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=HouseUpgradeItem},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="升阶进度领取",this.observe(MessageDef.HOUSE_SHARED_NOTICE,this.DoNotice);var i=GameGlobal.YingYuanModel.shareUpInfo,o=i.times;this.list.dataProvider=new eui.ArrayCollection(o),this.labCount.text=""+GameGlobal.YingYuanModel.GetHouseUpnum()*i.upnum},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.DoNotice=function(){GameGlobal.YingYuanModel.iSMarry()||(UserTips.ins().showTips("您的伴侣已经离开了你"),this.CloseSelf())},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnGain:GameGlobal.YingYuanModel.SendAddHouseShareExp(),this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(HouseUpgradeTipWin.prototype,"HouseUpgradeTipWin",["ICommonWindow"]);var HouseUpgradeItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.imgBg.visible=this.itemIndex%2==0,this.labTime.text=GameServer.PanTaoHui(e);var t=GameGlobal.YingYuanModel.GetHouseUpnum(),i="您的伴侣升阶房屋，您可领取共享进阶进度|C:0x019704&T:"+t+"点|";this.labText.textFlow=TextFlowMaker.generateTextFlow(i)},t}(eui.ItemRenderer);__reflect(HouseUpgradeItem.prototype,"HouseUpgradeItem");var Ladder=function(e){function t(){var t=e.call(this)||this;return t.isCanReward=!1,t.upgrade=1,t.upstar=0,t.upWin=0,t.todayBuyTime=0,t.mRankList=[],t.upRankList=[],t.isTipsFlag=!1,t.rank=0,t.upWeekRank=0,t.canJoin=!1,t.isOpen=!1,t.grade=1,t.star=0,t.challgeNum=0,t.winNum=0,t.lianWin=!1,t.nextTime=0,t.regNetMsg(S2cProtocol.sc_ladder_info,t.doLadderInfo),t.regNetMsg(S2cProtocol.sc_ladder_player_back,t._DoPlayerBack),t.regNetMsg(S2cProtocol.sc_ladder_result,t.doPlayResule),t.regNetMsg(S2cProtocol.sc_ladder_rank_list,t.doRankInfoList),t.regNetMsg(S2cProtocol.sc_ladder_buy_count,t.doChallageNum),t.regNetMsg(S2cProtocol.sc_ladder_winner_info,t.doWinnerRecords),t}return __extends(t,e),t.prototype.ClearActorInfo=function(){this.mCodePlayerInfo=null},t.prototype.getActorInfo=function(){return this.mCodePlayerInfo},t.prototype.sendGetSomeOne=function(){var e=new Sproto.cs_ladder_get_some_one_request;e.ladderType=this.GetLadderType(),this.Rpc(C2sProtocol.cs_ladder_get_some_one,e)},t.prototype.sendStarPlay=function(e,t){var i=new Sproto.cs_ladder_start_play_request;i.ladderType=this.GetLadderType(),i.type=t,this.Rpc(C2sProtocol.cs_ladder_start_play,i)},t.prototype.sendGetWeekReward=function(){var e=new Sproto.cs_ladder_get_week_reward_request;e.ladderType=this.GetLadderType(),this.Rpc(C2sProtocol.cs_ladder_get_week_reward,e),GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_PRE_WEEK_REWARD)},t.prototype.sendGetRankInfo=function(){var e=new Sproto.cs_ladder_get_rank_info_request;e.ladderType=this.GetLadderType(),this.Rpc(C2sProtocol.cs_ladder_get_rank_info,e)},t.prototype.SendInitInfo=function(){Deblocking.IsDeblocking(GameGlobal.Config.KingSportsBaseConfig.openid)&&(this.Rpc(C2sProtocol.cs_ladder_info),this.SendGetWinnerInfo())},t.prototype.SendGetInitInfo=function(){Deblocking.IsDeblocking(GameGlobal.Config.KingSportsBaseConfig.openid)&&this.Rpc(C2sProtocol.cs_ladder_info)},t.prototype.SendGetWinnerInfo=function(){this.Rpc(C2sProtocol.cs_ladder_get_winner_info)},t.prototype.SendWorship=function(){var e=new Sproto.cs_ladder_worship_request;e.ladderType=this.GetLadderType(),this.Rpc(C2sProtocol.cs_ladder_worship,e)},t.prototype.sendBuyChallgeTime=function(){var e=new Sproto.cs_ladder_buy_count_request;e.ladderType=this.GetLadderType(),this.Rpc(C2sProtocol.cs_ladder_buy_count,e)},t.prototype.doLadderInfo=function(e){this.IsSelfType(e)&&this.docodeInfo(e)},t.prototype._DoPlayerBack=function(e){this.IsSelfType(e)&&(this.doCodeplayerInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_PLAYER_BACK))},t.prototype.doPlayResule=function(e){this.IsSelfType(e)&&this.doPlayResult(e)},t.prototype.doRankInfoList=function(e){if(this.IsSelfType(e)){this.rank=e.rank,this.upWeekRank=e.upWeekRank,this.mRankList=e.rankData||[];for(var t=0;t<this.mRankList.length;++t)this.mRankList[t].pos=t+1;this.upRankList=e.upWeekRankList,GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_UPWEEK_RANK_UPDATE)}},t.prototype.doWinnerRecords=function(e){this.mWinnerRecords=e,GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_WINNER)},t.prototype.doChallageNum=function(e){this.IsSelfType(e)&&(this.todayBuyTime=e.todayBuyTime)},Object.defineProperty(t.prototype,"NextTime",{get:function(){return this.nextTime},enumerable:!0,configurable:!0}),t.prototype.docodeInfo=function(e){this.canJoin=e.canJoin,this.isOpen=e.isOpen,this.grade=e.grade,this.star=e.star,this.challgeNum=e.challgeNum,this.nextTime=e.challgeCd,this.winNum=e.winNum,this.lianWin=e.lianWin,this.playUpTime=e.playUpTime,this.upWeekRank=e.rank,this.playUpTime&&(this.isCanReward=e.isCanReward,this.upgrade=e.upgrade,this.upstar=e.upstar,this.upWin=e.upWin),GameGlobal.MessageCenter.dispatch(MessageDef.LADDER_CHANGE)},t.prototype.doCodeplayerInfo=function(e){this.mCodePlayerInfo=e},t.prototype.doPlayResult=function(e){for(var t=e.isWin,i=e.rewardData.length,o=[],n=0;i>n;n++){var a=new RewardData;a.parser(e.rewardData[n]),o.push(a)}var r=this.grade,s=this.star;this.grade=e.grade,this.star=e.star;var l=GameGlobal.RaidMgr.mBattleRaid;if(l){var c=new LadderFinishData;c.isWin=t,c.list=o,c.upGrade=r,c.upStar=s,c.changeStar=e.increasestar,l.SetFinishAction(c)}},t.prototype.IsRedPoint=function(){return Deblocking.IsDeblocking(GameGlobal.Config.KingSportsBaseConfig.openid)?this.isCanReward?!0:this.mWinnerRecords&&!this.mWinnerRecords.worship?!0:this.canJoin&&this.isOpen&&this.challgeNum>0?!0:!1:!1},t.prototype.GetSelfLevelConfig=function(){return this.GetLevelConfig(this.grade)},t.prototype.GetSelfUpLevelConfig=function(){return this.GetLevelConfig(this.upgrade)},t.prototype.GetLevelConfig=function(e){return GameGlobal.Config.KingSportsConfig[e]},t.prototype.getZhongwenNumber=function(e){return TextFlowMaker.getCStr(e)},t.prototype.checkRedShow=function(){return this.challgeNum>0&&this.isOpen||this.isCanReward?1:0},t.GetStatuByLevel=function(e){var t;switch(e){case 1:t=3;break;case 2:t=4;break;case 3:t=5;break;case 4:t=0;break;default:t=0}return t},t.GetRankByLevel=function(e){var t;switch(e){case 1:t="一";break;case 2:t="二";break;case 3:t="三";break;case 4:t="四";break;default:t="〇"}return t},t.prototype.IsSelfType=function(e){return!0},t.prototype.GetAwardConfig=function(){return GlobalConfig.ins().DWKingSportsConfig},t.prototype.GetLadderType=function(){return 1},t}(BaseSystem);__reflect(Ladder.prototype,"Ladder");var LadderConst=function(){function e(){}return e.GetMiniIcon=function(e){return this.GRADE_MINI_ICON[e]||""},e.SetGradeInfo=function(t,i){var o=t,n=GameGlobal.Config.KingSportsConfig[i],a=e.GRADE_LIST[n.showType];a&&(o.img1.source=a.icon,o.img2.source=a.level[n.showLevel]||"")},e.GetMiddleIcon=function(t){return e.GRADE_ICON[t]||""},e.GetRankIconTwo=function(e){switch(e){case 1:return"青铜";case 2:return"白银";case 3:return"黄金";case 4:return"钻石";case 5:return"王者"}return"青铜"},e.GetGradeInfo=function(t){return e.STR[t]||""},e.GRADE_LIST=(_a={},_a[5]={icon:"font_kfwz_zqwz02",level:["","font_kfwz_zqwz001","font_kfwz_zqwz002","font_kfwz_zqwz003","font_kfwz_zqwz004","font_kfwz_zqwz005"]},_a[4]={icon:"font_kfwz_yhzs02",level:["","font_kfwz_yhzs001","font_kfwz_yhzs002","font_kfwz_yhzs003","font_kfwz_yhzs004","font_kfwz_yhzs005"]},_a[3]={icon:"font_kfwz_ryhj02",level:["","font_kfwz_ryhj001","font_kfwz_ryhj002","font_kfwz_ryhj003","font_kfwz_ryhj004","font_kfwz_ryhj005"]},_a[2]={icon:"font_kfwz_zxby02",level:["","font_kfwz_zxby001","font_kfwz_zxby002","font_kfwz_zxby003","font_kfwz_zxby004","font_kfwz_zxby005"]},_a[1]={icon:"font_kfwz_jjqt02",level:["","font_kfwz_jjqt001","font_kfwz_jjqt002","font_kfwz_jjqt003","font_kfwz_jjqt004","font_kfwz_jjqt005"]},_a),e.GRADE_ICON=(_b={},_b[5]="ui_kfwz_hz_zqwz01",_b[4]="ui_kfwz_hz_yhzs01",_b[3]="ui_kfwz_hz_ryhj01",_b[2]="ui_kfwz_hz_zxby01",_b[1]="ui_kfwz_hz_jjqt01",_b),e.GRADE_MINI_ICON=(_c={},_c[1]="ui_kfwz_hz_jjqt02",_c[2]="ui_kfwz_hz_zxby02",_c[3]="ui_kfwz_hz_ryhj02",_c[4]="ui_kfwz_hz_yhzs02",_c[5]="ui_kfwz_hz_zqwz02",_c),e.STR=(_d={},_d[1]="倔\n强\n青\n铜\nIII",_d[2]="倔\n强\n青\n铜\nII",_d[3]="倔\n强\n青\n铜\nI",_d[4]="秩\n序\n白\n银\nIV",_d[5]="秩\n序\n白\n银\nIII",_d[6]="秩\n序\n白\n银\nII",_d[7]="秩\n序\n白\n银\nI",_d[8]="荣\n耀\n黄\n金\nV",_d[9]="荣\n耀\n黄\n金\nIV",_d[10]="荣\n耀\n黄\n金\nIII",_d[11]="荣\n耀\n黄\n金\nII",_d[12]="荣\n耀\n黄\n金\nI",_d[13]="永\n恒\n钻\n石\nV",_d[14]="永\n恒\n钻\n石\nIV",_d[15]="永\n恒\n钻\n石\nIII",_d[16]="永\n恒\n钻\n石\nII",_d[17]="永\n恒\n钻\n石\nI",_d[18]="最\n强\n王\n者\nV",_d[19]="最\n强\n王\n者\nIV",_d[20]="最\n强\n王\n者\nIII",_d[21]="最\n强\n王\n者\nII",_d[22]="最\n强\n王\n者\nI",_d),e}();__reflect(LadderConst.prototype,"LadderConst");var _a,_b,_c,_d,LadderInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.m_OtherHeadList=[],t.mActorInfo=null,t.skinName="LadderInfoPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){for(var e=(this.GetLadderModel().GetSelfLevelConfig(),0);5>e;++e){var t=new Sproto.sc_ladder_player_back_request;t.id=0,t.name="",t.job=0==e?-1:MathUtils.randomArray([1,2,3]),t.sex=MathUtils.randomArray([0,1]),t.grade=MathUtils.randomArray([1,2,3,4,5]),this.m_OtherHeadList[e]=t
}this.starGroup.itemRenderer=LadderStarItem,this.otherHeadList.useVirtualLayout=!1,this.otherHeadList.itemRenderer=LadderInfoHeadItem,this.otherHeadList.dataProvider=new eui.ArrayCollection(this.m_OtherHeadList),this.m_TimeOutID=-1,this.enterTime.visible=!1,this.ingImg.visible=!1,this._AddClick(this.rankBtn,this._OnClick),this._AddClick(this.preBtn,this._OnClick),this._AddClick(this.winnerBtn,this._OnClick),this.notEnterLabel.text="本周一0:00您未进入本服战力榜前"+GameGlobal.Config.KingSportsBaseConfig.inum+"名，无法参加王者争霸"},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.rankBtn:ViewManager.ins().open(LadderRankWin);break;case this.preBtn:ViewManager.ins().open(LadderWeekRankWin);break;case this.winnerBtn:ViewManager.ins().open(LadderWinnerWin)}},t.prototype.IsMacth=function(){return this.enterTime.visible||this.ingImg.visible},t.prototype._ClearTimeOut=function(){this.m_TimeOutID<1||(egret.clearTimeout(this.m_TimeOutID),this.m_TimeOutID=-1)},t.prototype.OnOpen=function(){this._AddClick(this.flowPlayer,this.onTap),this._AddClick(this.buyTime,this.onTap),this.observe(MessageDef.LADDER_CHANGE,this.UpdateContent),this.observe(MessageDef.LADDER_PLAYER_BACK,this.playerBack),this.observe(MessageDef.LADDER_PRE_WEEK_REWARD,this.UpdateRedPoint),this.observe(MessageDef.LADDER_WINNER,this.UpdateRedPoint),this.UpdateRedPoint(),this.buyTime.textFlow=(new egret.HtmlTextParser).parser("<font color = '#23C42A'><u>购买次数</u></fomt>"),this.AddLoopTimer(1e3,this._updateNextTime),this.otherLevel.visible=!1,this.SetLevelName(this.otherLevel,0),this.UpdateRankList(),this.mActorInfo=GameGlobal.Ladder.getActorInfo()},t.prototype.UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.preBtn,GameGlobal.Ladder.isCanReward),UIHelper.ShowRedPoint(this.winnerBtn,GameGlobal.Ladder.mWinnerRecords&&!GameGlobal.Ladder.mWinnerRecords.worship)},t.prototype.OnClose=function(){this._ClearTimeOut(),egret.clearInterval(this.timeOut),this.ClearMatchInfo(),egret.Tween.removeTweens(this.otherHeadList);var e=this.mActorInfo;e&&e.id&&this.sendStarPlay(),this.mActorInfo=null},t.prototype.UpdateRankList=function(){var e=GameGlobal.Ladder.mRankList;if(e&&e.length){for(var t=1,i=0;30>i;++i){var o=e[Math.floor(Math.random()*e.length)];if(o&&o.id!=GameGlobal.actorModel.actorID){var n=this.m_OtherHeadList[t++];if(!n.id&&(n.job=o.job,n.sex=o.sex,n.name=o.player,n.serverid=o.serverid,t>=this.m_OtherHeadList.length))break}}this.otherHeadList.dataProvider.replaceAll(this.m_OtherHeadList)}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.flowPlayer:this.DoChallenge();break;case this.buyTime:var t=this.GetLadderModel(),i=this.GetTianTiConfig();if(t.todayBuyTime>=i.time)return void UserTips.ErrorTip("今日购买次数已达上限");if(t.isTipsFlag){if(!Checker.Data(i.cost,!0))return;t.sendBuyChallgeTime()}else{var o="确定花费<font color='#019704'>"+i.cost.count+"元宝</font>购买1次跨服王者挑战次数吗？\n今日已购买："+t.todayBuyTime+"/"+i.time;0==t.isTipsFlag&&(o+="\n\n<font color='#019704'>点击确定后，本次登录不再提示。"),WarnWin.show(o,function(){t.isTipsFlag=!0,Checker.Data(i.cost,!0)&&t.sendBuyChallgeTime()},this)}}},t.prototype.GetLadderModel=function(){return GameGlobal.Ladder},t.prototype.GetTianTiConfig=function(){return GlobalConfig.ins().KingSportsBaseConfig},t.prototype._updateNextTime=function(){this.GetLadderModel().challgeNum>=this.GetTianTiConfig().sportstime?this.updatatimetext.text="(2小时恢复1次)":this.GetLadderModel().NextTime-GameServer.serverTime>0?this.updatatimetext.text="("+GameServer.GetPkTime(this.GetLadderModel().NextTime)+"后恢复一次)":this.updatatimetext.text="(2小时恢复1次)"},t.prototype.UpdateContent=function(){GameGlobal.Ladder.isOpen?(this.notEnterLabel.visible=!GameGlobal.Ladder.canJoin,this.enterGroup.visible=GameGlobal.Ladder.canJoin):this.enterGroup.visible=!0,this.setMyHead();var e=this.GetLadderModel();this.lastNum.text="剩余次数："+e.challgeNum+"/"+this.GetTianTiConfig().sportstime,e.challgeNum>0?this.lastNum.textColor=3066402:this.lastNum.textColor=16711680,this.winNum.text="净胜场："+e.winNum;var t=e.grade;for(var i in GameGlobal.Config.DWKingSportsConfig){var o=GameGlobal.Config.DWKingSportsConfig[i];if(t>=o.typelv[0]&&t<=o.typelv[1]){this.item.data=o.rankreward[0];break}}var n=e.GetSelfLevelConfig();if(n){LadderConst.SetGradeInfo(this.levtxt,e.grade),this.SetLevelName(this.myLevel,e.grade),this.otherLevelIcon.source=LadderConst.GetMiddleIcon(n.showType);for(var a=[],r=1,s=n.needstar;s>=r;++r)a.push(e.star>=r);this.starGroup.dataProvider=new eui.ArrayCollection(a),this.starGroup.validateNow()}this.winImg.visible=e.lianWin,this.truceUIChange()},t.prototype.SetLevelName=function(e,t){e.rankImg.source=LadderConst.GetMiniIcon(t),e.levelLabel.text=LadderConst.GetGradeInfo(t)},t.prototype.truceUIChange=function(){var e=this.GetLadderModel();this.stateGroup.visible=e.isOpen,this.wz_open_time.visible=!e.isOpen,this.starGroup.visible=e.isOpen,this.winNum.visible=e.isOpen},t.prototype.DoChallenge=function(){var e=this;return this.GetLadderModel().challgeNum<=0?void UserTips.InfoTip("挑战次数不足"):this.IsMacth()?void UserTips.InfoTip("匹配中"):void(UserFb.CheckActMap()&&(this.ingImg.visible=!0,this.PlayAnim(),this.GetLadderModel().sendGetSomeOne(),this.m_TimeOutID=egret.setTimeout(function(){UserTips.InfoTip("请求超时"),e._ClearTimeOut(),e.ClearMatchInfo()},this,5e3)))},t.prototype.setMyHead=function(){var e=SubRoles.ins().GetRoleData();this.myName.text=GameLogic.ins().actorModel.name,this.myhead.source=ResDataPath.GetLadderHead(e.job,e.sex)},t.prototype.ClearMatchInfo=function(){this.otherHeadList.scrollV=0,this.ingImg.visible=!1,this.enterTime.visible=!1,this.otherLevel.visible=!1},t.prototype.PlayAnim=function(){var e=this;egret.Tween.removeTweens(this.otherHeadList);var i=egret.Tween.get(this.otherHeadList);i.wait(t.WAIT_TIME),this.otherHeadList.scrollV=0;for(var o=0,n=function(n){o+=284;var r=n;i.to({scrollV:o},t.DUR_TIME,egret.Ease.circOut).call(function(){e.ShowPlayerInfo(e.m_OtherHeadList[r+1])},a).wait(t.WAIT_TIME)},a=this,r=0;r<this.m_OtherHeadList.length-1;++r)n(r);i.call(function(){e.rollOver()})},t.prototype.ShowPlayerInfo=function(e){return e?(this.otherLevel.visible=!0,this.otherName.text=GameString.GetSerAndName(e.serverid,e.name),void this.SetLevelName(this.otherLevel,e.grade)):void(this.otherName.text="")},t.prototype.playerBack=function(){this._ClearTimeOut();var e=this.mActorInfo=this.GetLadderModel().getActorInfo();e&&e.id&&(this.m_OtherHeadList[this.m_OtherHeadList.length-1]=e),this.otherHeadList.dataProvider.replaceAll(this.m_OtherHeadList)},t.prototype.rollOver=function(){egret.Tween.removeTweens(this.otherHeadList),this.ingImg.visible=!1,this.enterTime.visible=!0,this.rollTime=3,this.enterTime.text="进入倒计时 "+this.rollTime+" 秒";var e=this.mActorInfo;e&&0!=e.id?this.timeOut=egret.setInterval(this.refushLabel,this,1e3):(UserTips.ins().showTips("|C:0xff0000&T:未匹配到对手|"),this.ClearMatchInfo())},t.prototype.refushLabel=function(){this.rollTime--,this.enterTime.text="进入倒计时 "+this.rollTime+" 秒",this.rollTime<1&&(this.sendStarPlay(),egret.clearInterval(this.timeOut))},t.prototype.sendStarPlay=function(){var e=this.mActorInfo;this.GetLadderModel().sendStarPlay(e.id,e.type)},t.NAME="王者争霸",t.DUR_TIME=286,t.WAIT_TIME=286,t}(BaseView);__reflect(LadderInfoPanel.prototype,"LadderInfoPanel",["ICommonWindowTitle"]);var LadderInfoHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;-1==e.job?this.img.source="ui_wzzb_wenhao":this.img.source=ResDataPath.GetLadderHead(e.job,e.sex)},t}(eui.ItemRenderer);__reflect(LadderInfoHeadItem.prototype,"LadderInfoHeadItem");var LadderLevelIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._Update()},t.prototype.SetRank2=function(e){this.m_Rank01=e,this._Update()},t.prototype._Update=function(){if(null!=this.$stage&&null!=this.m_Rank01){var e=GameGlobal.Config.KingSportsConfig[this.m_Rank01];this.myRank.source=LadderConst.GetMiniIcon(e.showType),LadderConst.SetGradeInfo(this.level,this.m_Rank01),this.currentState="normal"}},t.GetLevelImgName=function(e){return"laddergradnum_"+e},t}(eui.Component);__reflect(LadderLevelIcon.prototype,"LadderLevelIcon",["eui.UIComponent","egret.DisplayObject"]);var LadderPreWeekPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="LadderPreWeekPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.rankTab.dataProvider=new eui.ArrayCollection(["王者额外奖励","王者排名奖励"]),this.list0.itemRenderer=LastWeekRankItemRenderer,this.list1.itemRenderer=LadderRankRewardRenderer},t.prototype.OnOpen=function(){this.AddClick(this.getReward,this.onTap),this.rankTab.selectedIndex=0,this.rankTab.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._ItemClick,this),this._ItemClick(),this.observe(MessageDef.LADDER_UPWEEK_RANK_UPDATE,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){this.rankTab.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this._ItemClick,this)},t.prototype._ItemClick=function(){var e=this.rankTab.selectedIndex;this.scroller0.visible=0==e,this.scroller1.visible=1==e},t.prototype.onTap=function(e){switch(e.currentTarget){case this.getReward:this.getReward.visible=!1,this.GetLadderModel().isCanReward=!1,this.GetLadderModel().sendGetWeekReward()}},t.prototype.UpdateContent=function(){var e=this.GetLadderModel();e.GetSelfUpLevelConfig();this.list0.dataProvider=new eui.ArrayCollection(CommonUtils.GetArray(GameGlobal.Config.KingSportsRankConfig,"id")),this.list1.dataProvider=new eui.ArrayCollection(CommonUtils.GetArray(GameGlobal.Config.DWKingSportsConfig,"type")),this.levtxt.text=e.upWeekRank?e.upWeekRank+"":"未上榜",this.winNum.text="净胜场："+e.upWin+"场",this.getReward.visible=e.isCanReward,e.playUpTime?this.levelIcon.SetRank2(e.upgrade):this.levelIcon.SetRank2(1)},t.prototype.GetLadderModel=function(){return GameGlobal.Ladder},t.NAME="上周",t}(BaseView);__reflect(LadderPreWeekPanel.prototype,"LadderPreWeekPanel",["ICommonWindowTitle"]);var LadderRankItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="TiantiRankItem",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.itemIndex>=3?(this.rankLabel.text="第"+(this.itemIndex+1)+"名",this.rankImg.source=""):(this.rankLabel.text="",this.rankImg.source=t.RANK_ICON[this.itemIndex]),this.winNum.text=e.winNum+"场",this.levelIcon.SetRank2(e.grade),this.nameLabel.text=GameString.GetSerAndName(e.serverid,e.player)},t.prototype.getRankIcon=function(e){switch(e){case 1:return"ui_wzzb_ks";case 2:return"ui_wzzb_by";case 3:return"ui_wzzb_th";default:return""}},t.RANK_ICON=["ui_kfwz_bm_pmk01","ui_kfwz_bm_pmk02","ui_kfwz_bm_pmk03"],t}(eui.ItemRenderer);__reflect(LadderRankItemRenderer.prototype,"LadderRankItemRenderer");var LadderRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="LadderRankPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=LadderRankItemRenderer},t.prototype.UpdateContent=function(){var e=GameGlobal.Ladder.mRankList,t=GameGlobal.Ladder.rank;this.GetLadderModel().GetSelfLevelConfig();this.list.dataProvider=new eui.ArrayCollection(e),this.myRank.text=t?"排名："+t:"排名：未上榜",this.WinNum.text="净胜场："+this.GetLadderModel().winNum+"场",this.levelIcon.SetRank2(this.GetLadderModel().grade)},t.prototype.GetLadderModel=function(){return GameGlobal.Ladder},t.NAME="排名",t}(BaseView);__reflect(LadderRankPanel.prototype,"LadderRankPanel",["ICommonWindowTitle"]);var LadderRankRewardRenderer=function(e){function t(){var t=e.call(this)||this;return t.skinName="LadderRankRewardItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.img1.source=LadderConst.GetMiddleIcon(6-e.type),this.img2.source=t.GRADE_NAME_BIG_IMG[e.type],this.item.data=e.rankreward[0]},t.GRADE_NAME_BIG_IMG=(_a={},_a[1]="font_kfwz_zqwz",_a[2]="font_kfwz_yhzs",_a[3]="font_kfwz_yyhj",_a[4]="font_kfwz_zxby",_a[5]="font_kfwz_jjqt",_a),t}(eui.ItemRenderer);__reflect(LadderRankRewardRenderer.prototype,"LadderRankRewardRenderer");var _a,LadderRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.title="王者排名",this.mCommonWindowBg.tabBar.visible=!1,this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(LadderRankPanel)])},t.prototype.OnOpen=function(){this.commonWindowBg.OnAdded(this)},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="王者排名",t}(BaseEuiView);__reflect(LadderRankWin.prototype,"LadderRankWin",["ICommonWindow"]);var LadderWeekRankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.title="王者上周排名",this.mCommonWindowBg.tabBar.visible=!1,this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(LadderPreWeekPanel)])},t.prototype.OnOpen=function(){this.commonWindowBg.OnAdded(this)},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="王者上周排名",t}(BaseEuiView);__reflect(LadderWeekRankWin.prototype,"LadderWeekRankWin");var LadderWinnerWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.title="跨服王者",this.mCommonWindowBg.tabBar.visible=!1,this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(LadderWinnerPanel)])},t.prototype.OnOpen=function(){this.commonWindowBg.OnAdded(this)},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="跨服王者",t}(BaseEuiView);__reflect(LadderWinnerWin.prototype,"LadderWinnerWin");var LadderResultWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="LadderResultWinSkin",t.list.itemRenderer=ItemBase,t.starList=new LadderStarListView(t.dwImg,t.level,t.starGroup),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isWin=e[0];var i=e[1],o=e[2],n=e[3],a=e[4];this.imgTitle.source=this.isWin?"ui_bm_shengli":"ui_bm_shibai",this.m_BtnName=this.isWin?"领取奖励":"退出",this.m_TempTime=5,this.updateCloseBtnLabel(),this.AddTimer(1e3,this.m_TempTime,this.updateCloseBtnLabel),this.list.dataProvider=new eui.ArrayCollection(i),this.refushStarInfo(o,n,a),this.AddClick(this.closeBtn,this.CloseSelf)},t.prototype.OnClose=function(){GameMap.fubenID>0&&GameGlobal.RaidMgr.ExitFbRewardAndEnterMap()},t.prototype.refushStarInfo=function(e,t,i){var o=this,n=GameGlobal.Ladder.GetLevelConfig(e);if(null!=n){this.upGrade=e,this.upStar=t,this.starList.UpdataStarInfo(n.needstar,t),LadderConst.SetGradeInfo(this.level,e),this.lastType=n.showType,this.lastLevel=n.showLevel;var a=Math.abs(i);this.isWin?(this.star1.visible=a>=1,this.star1.currentState="light",this.star2.visible=a>=2,this.star2.currentState="light"):(this.star1.visible=a>=1,this.star1.currentState="black",this.star2.visible=a>=2,this.star2.currentState="black"),this.upStarGroup.visible=0!=a,this.delayTime=egret.setTimeout(function(){egret.clearTimeout(o.delayTime),o.setStarInfoChange(t,a)},this,500)}},t.prototype.setStarInfoChange=function(e,t){t>0&&this.starList.upStarStatu(e,t,this.isWin)},t.prototype.cheackIsChangeLevel=function(e){var t=this;if(this.upGrade!=GameGlobal.Ladder.grade||this.upStar!=GameGlobal.Ladder.star){var i=egret.Tween.get(this.starList);i.to({alpha:1},600).call(function(){var i=GameGlobal.Ladder.GetSelfLevelConfig();t.starList.UpdataStarInfo(i.needstar,GameGlobal.Ladder.star),t.isWin&&e>=1&&t.starList.upStarStatu(0,e,t.isWin);var o=i.showType;i.showLevel;LadderConst.SetGradeInfo(t.level,i.type),t.lastType<o&&t.starList.showRankUp(o),egret.Tween.removeTweens(t.starList)},this)}},t.prototype.updateCloseBtnLabel=function(){this.m_TempTime--,this.m_TempTime<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.m_BtnName+"("+this.m_TempTime+"s)"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(LadderResultWin.prototype,"LadderResultWin");var LadderStarListView=function(){function e(e,t,i){this.dwImg=e,this.starGroup=i,this.starGroup.itemRenderer=LadderStarItem}return e.prototype.setLvAndRank=function(e){null!=e&&(this.dwImg.source=LadderConst.GetMiddleIcon(e.showType))},e.prototype._GetBoolList=function(e,t){for(var i=[],o=1;e>=o;++o)i.push(t>=o);return i},e.prototype.UpdataStarInfo=function(e,t){this.m_FullStar=e,this.starGroup.dataProvider=new eui.ArrayCollection(this._GetBoolList(e,t)),this.starGroup.validateNow();var i=!0;this.starGroup.visible=i,i||(this.dwImg.verticalCenter=0)},e.prototype.upStarStatu=function(e,t,i){var o=this;void 0===i&&(i=!1);var n=t;if(i){if(e>=this.m_FullStar){var a=this.GetView();return void(a&&a.cheackIsChangeLevel(n))}}else if(0==e){var a=this.GetView();return void(a&&a.cheackIsChangeLevel(n))}var r=i?e+1:e,s=this;this.mc||(this.mc=new MovieClip);var l=this.starGroup.getChildAt(r-1);this.mc.x=l.x+39,this.mc.y=l.y+36,this.mc.scaleX=this.mc.scaleY=.85,this.starGroup.addChild(this.mc),i?(--n,this.mc.loadUrl(ResDataPath.GetUIEffePath2("ladder/addstar"),!0,1,function(){if(DisplayUtils.removeFromParent(s.mc),l.currentState="light",r==o.m_FullStar){var e=o.GetView();e&&e.cheackIsChangeLevel(n)}n>0&&r<o.m_FullStar&&o.upStarStatu(r,n,i)})):(--n,--r,this.mc.loadUrl(ResDataPath.GetUIEffePath2("ladder/minusstar"),!0,1,function(){if(DisplayUtils.removeFromParent(s.mc),l.currentState="black",0==r){var e=o.GetView();e&&e.cheackIsChangeLevel(n)}}),n=0)},e.prototype.GetView=function(){var e=ViewManager.ins().getView(LadderResultWin);return e&&e.isShow()?e:null},e.prototype.showRankUp=function(e){this.numRank=e,this.rankMc=new MovieClip,this.rankMc.x=this.dwImg.x+.5*this.dwImg.width,this.rankMc.y=this.dwImg.y+.5*this.dwImg.height,this.rankMc.loadUrl(ResDataPath.GetUIEffePath2("ladder/ladderlvup"),!0,1),this.dwImg.parent.addChild(this.rankMc),this.RankChangeCallback()},e.prototype.RankChangeCallback=function(){this.dwImg.source=LadderConst.GetMiddleIcon(this.numRank);var e=egret.Tween.get(this.dwImg);this.dwImg.alpha=0,e.wait(200).to({alpha:1},700)},e}();__reflect(LadderStarListView.prototype,"LadderStarListView");var LadderStarItem=function(e){function t(){var t=e.call(this)||this;return t.width=t.height=75,t}return __extends(t,e),t.prototype.dataChanged=function(){this.currentState=1==this.data?"light":"black"},t}(eui.ItemRenderer);__reflect(LadderStarItem.prototype,"LadderStarItem");var LadderWin=function(){function e(){}return e.Show=function(){ViewManager.ins().open(ArenaWin,2)},e.Close=function(){ViewManager.ins().close(ArenaWin)},e}();__reflect(LadderWin.prototype,"LadderWin");var LadderWinnerPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="LadderWinnerSkin",t.list.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.prototype.OnOpen=function(){var e=new Date(1e3*GameServer.serverTime);e.setDate(e.getDate()-DateUtils.GetDay(e)),this.infoLabel.textFlow=TextFlowMaker.generateTextFlow(DateUtils.GetFormatSecond(.001*e.getTime(),DateUtils.TIME_FORMAT_14)+"|C:0xcd3d0b&T:登上王者宝座|"),this.list.dataProvider=new eui.ArrayCollection(GameGlobal.Config.KingSportsBaseConfig.worshipreward),GameGlobal.Ladder.SendGetWinnerInfo(),this.AddClick(this.goBtn,this._OnClick),this.observe(MessageDef.LADDER_WINNER,this.UpdateContent),this.UpdateContent()},t.prototype._OnClick=function(){GameGlobal.Ladder.SendWorship()},t.prototype.UpdateContent=function(){this.UpdateBtnState(),this.noneLabel.visible=!0,this.infoLabel.visible=!1,this.nameLabel.visible=!1;var e=GameGlobal.Ladder.mWinnerRecords;if(e&&e.shows){this.noneLabel.visible=!1,this.infoLabel.visible=!0,this.nameLabel.visible=!0,this.nameLabel.text=GameString.GetSerAndName(e.shows.serverid,e.shows.name);var t=e.shows;t&&this.roleShowPanel.SetShowImage({shows:t.shows,job:t.job,sex:t.sex})}},t.prototype.UpdateBtnState=function(){var e=GameGlobal.Ladder.mWinnerRecords?GameGlobal.Ladder.mWinnerRecords.worship:!0;e?(this.goBtn.enabled=!1,this.goBtn.label="已膜拜"):(this.goBtn.enabled=!0,this.goBtn.label="膜拜")},t.NAME="跨服王者",t}(BaseView);__reflect(LadderWinnerPanel.prototype,"LadderWinnerPanel");var LastWeekRankItemRenderer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getRankImg=function(e){switch(e){case 1:return"ui_wzzb_ks";case 2:return"ui_wzzb_by";case 3:return"ui_wzzb_th";default:return""}},t.prototype.dataChanged=function(){this.index=this.itemIndex+1;var e=this.data;this.itemIndex>=3?(this.rankLabel.text="第"+(this.itemIndex+1)+"名",this.rankImg.source=""):(this.rankLabel.text="",this.rankImg.source=LadderRankItemRenderer.RANK_ICON[this.itemIndex]),this.item1.data=e.rankreward[0];var t=GameGlobal.Ladder.upRankList[this.itemIndex];if(t)this.nameLabel.text=GameString.GetSerAndName(t.serverid,t.player),this.winNum.text="净胜场："+t.winNum+"场",this.levelIcon.SetRank2(t.grade),UIHelper.SetVisible(this.winNum,!0);else{var i=LadderConst.GetRankIconTwo(5);this.nameLabel.text=i+"级别第"+this.index+"名",this.levelIcon.SetRank2(18),UIHelper.SetVisible(this.winNum,!1)}},t.prototype.GetTianTiRankConfig=function(){return GlobalConfig.ins().DWKingSportsConfig},t}(eui.ItemRenderer);__reflect(LastWeekRankItemRenderer.prototype,"LastWeekRankItemRenderer");var LingtongAttrModel=function(e){function t(){var t=e.call(this)||this;return t.mName="",t.mBuffSkill=[],t.giftexp=0,t.giftlv=0,t.mXilian=0,t.mXilianSkill=[],t.mSex=0,t.MAX_GIFT_LEVEL=5,t.mRedPoint=new LingtongAttrRedPoint,t.regNetMsg(S2cProtocol.sc_baby_init,t._DoInit),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),this.MAX_GIFT_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.BabyTalentConfig[1]),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.BabyTalentConfig[1][0].cost[0].id,MessageDef.LINGTONG_RANK_ITEM);for(var t=0,i=GameGlobal.Config.BabyBasisConfig.freshitemid;t<i.length;t++){var o=i[t];GameGlobal.UserBag.AddListenerItem(o.itemId,MessageDef.LINGTONG_SKILL_ITEM)}},t.prototype._DoInit=function(e){this.mName=e.name||"",this.mBuffSkill=e.buffs||[],this.giftexp=e.giftexp||0,this.giftlv=e.giftlv||0,this.mXilian=e.xilian||0,this.mXilianSkill=e.xilianSkills||[],this.mSex=e.sex||1,GameGlobal.MessageCenter.dispatch(MessageDef.LINGTONG_UPDATE_INFO)},t.prototype.SendActive=function(e){var t=this,i=new Sproto.cs_baby_active_request;i.sex=e,this.Rpc(C2sProtocol.cs_baby_active,i,function(i){i.ret&&(t.mSex=e,GameGlobal.MessageCenter.dispatch(MessageDef.LINGTONG_UPDATE_INFO),UserTips.InfoTip("激活成功"))})},t.prototype.SendAddGift=function(){var e=this;this.Rpc(C2sProtocol.cs_baby_addgift,null,function(t){t.ret&&(e.giftexp=t.exp,e.giftlv=t.level,GameGlobal.MessageCenter.dispatch(MessageDef.LINGTONG_UPDATE_GIFT_INFO))})},t.prototype.SendRename=function(e){var t=this,i=new Sproto.cs_baby_rename_request;i.name=e,this.Rpc(C2sProtocol.cs_baby_rename,i,function(e){e.ret?(t.mName=e.name,GameGlobal.MessageCenter.dispatch(MessageDef.LINGTONG_UPDATE_INFO)):GameGlobal.UserTips.showTips("输入的名称含有敏感字")})},t.prototype.SendRefreshSkill=function(e,t,i){var o=this,n=new Sproto.cs_baby_refreshskill_request;n.locklist=e,n.type=t,n.autoBuy=i?2:0,this.Rpc(C2sProtocol.cs_baby_refreshskill,n,function(e){e.ret&&(o.mXilian=e.xilian,o.mXilianSkill=e.xilianSkills,GameGlobal.MessageCenter.dispatch(MessageDef.LINGTONG_UPDATE_INFO))},this)},t.prototype.SendSetSkill=function(){var e=this,t=new Sproto.cs_baby_setskillin_request;this.Rpc(C2sProtocol.cs_baby_setskillin,t,function(t){t.ret&&(e.mBuffSkill=t.buffs,e.mXilianSkill=[],GameGlobal.MessageCenter.dispatch(MessageDef.LINGTONG_UPDATE_INFO))},this)},t.prototype.GetSkillId=function(){if(this.giftlv){var e=GameGlobal.Config.BabyTalentConfig[this.mSex][this.giftlv-1];if(e)return e.skill}var t=GameGlobal.Config.BabyActivationConfig[this.mSex||1];return t.skill[0]},t.prototype.GetNextSkillId=function(){if(this.giftlv){var e=GameGlobal.Config.BabyTalentConfig[this.mSex][this.giftlv];if(e)return e.skill}var t=GameGlobal.Config.BabyActivationConfig[this.mSex||1];return t.skill[0]},t.prototype.IsActive=function(){return 1==this.mSex||2==this.mSex},t.prototype.GetCurSkill=function(){var e=GameGlobal.Config.BabyActivationConfig[this.mSex];return e?e.skill:[]},t.prototype.IsRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_116,!0)?GameGlobal.LingtongModel.mRedPoint.IsRedPoint()||this.mRedPoint.IsRedPoint():!1},t.prototype.getTianFuAllAttr=function(){var e=this.giftexp,t=this.giftlv,i=GameGlobal.Config.BabyTalentConfig[this.mSex];if(!i)return[];var o,n=Math.min(i.length,t),a=[];for(o=0;n>o;o++){var r=i[o],s=void 0,l=void 0;for(r.level<t?l=r.upnum||r.proexp/r.exp:r.level==t&&(l=e),s=0;l>s;s++)a=AttributeData.AttrAddition(a,r.attrs)}if(0==a.length){a=CommonUtils.copyDataHandler(i[0].attrs);for(var c=0,u=a;c<u.length;c++){var p=u[c];p.value=0}}return a},t}(BaseSystem);__reflect(LingtongAttrModel.prototype,"LingtongAttrModel");var LingtongAttrRedPoint=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.RP_LINGTONG)},t.prototype.GetMessageDef=function(){var e=[MessageDef.LINGTONG_UPDATE_INFO,MessageDef.LINGTONG_ACT_ITEM,MessageDef.LINGTONG_RANK_ITEM,MessageDef.LINGTONG_SKILL_ITEM,MessageDef.DESTINY_CHANGE];return e},t.prototype.GetCheckFuncList=function(){var e=(i={},i[t.INDEX_ACTIVE]=this.GetIndexAct,i[t.INDEX_RANK]=this.GetIndexRank,i[t.INDEX_SKILL]=this.GetIndexSkill,i);return e;var i},t.prototype.GetIndexAct=function(){if(GameGlobal.LingtongAttrModel.IsActive())return!1;var e=GameGlobal.Config.BabyBasisConfig.material,t=this.GetActCount();return t>=e.num},t.prototype.GetActCount=function(){for(var e=GameGlobal.DestinyController.getUseDestinyData(),t=0,i=GameGlobal.Config.BabyBasisConfig.material,o=0,n=e;o<n.length;o++){var a=n[o];if(a&&a.id&&a.level){var r=GameGlobal.Config.ItemConfig[a.id];r&&r.quality>=i.quality&&++t}}return t},t.prototype.GetIndexRank=function(){if(!GameGlobal.LingtongAttrModel.IsActive())return!1;if(GameGlobal.LingtongAttrModel.giftlv>=GameGlobal.LingtongAttrModel.MAX_GIFT_LEVEL)return!1;var e=GameGlobal.Config.BabyTalentConfig[GameGlobal.LingtongAttrModel.mSex][GameGlobal.LingtongAttrModel.giftlv-1];return e?GameGlobal.UserBag.GetCount(e.cost[0].id)>=e.cost[0].count:!1},t.prototype.GetIndexSkill=function(){if(!GameGlobal.LingtongAttrModel.IsActive())return!1;for(var e=0,t=GameGlobal.Config.BabyBasisConfig.freshitemid;e<t.length;e++){var i=t[e];if(GameGlobal.UserBag.GetCount(i.itemId)>0)return!0}return!1},t.INDEX_ACTIVE=0,t.INDEX_RANK=1,t.INDEX_SKILL=2,t}(IRedPoint);__reflect(LingtongAttrRedPoint.prototype,"LingtongAttrRedPoint");var LingtongModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_LINGTONG)||this;return t.mMsgDefUpdateExp=MessageDef.ROLE_LINGTONG_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.ROLE_LINGTONG_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.ROLE_LINGTONG_UPDATE,t.mMsgDefInit=MessageDef.ROLE_LINGTONG_INIT,t.mMsgDefUpdateEquip=MessageDef.ROLE_LINGTONG_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_LINGTONG_EQUIP_UP,t.mRedPoint=new LingtongModelRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.BabyBasisConfig,this.LvproConfig=GameGlobal.Config.BabyLvproConfig,this.AttrsConfig=GameGlobal.Config.BabyAttrsConfig,this.ProgressConfig=GameGlobal.Config.BabyProgressConfig,this.SkinConfig=GameGlobal.Config.BabySkinConfig,e.prototype.Init.call(this)},t.prototype.GetDescPower=function(){var t=e.prototype.GetDescPower.call(this);return t+=ItemConfig.CalcAttrScoreValue(GameGlobal.LingtongAttrModel.getTianFuAllAttr())},t.prototype.GetCurEquipAttr=function(){return[]},t}(UserTemplate);__reflect(LingtongModel.prototype,"LingtongModel");var LingtongModelRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(LingtongModelRedPoint.prototype,"LingtongModelRedPoint");var LingtongInactiveView=function(e){function t(){var t=e.call(this)||this;return t.skinName="LingtongInactiveSkin",t.check0.selected=!0,t.check1.selected=!1,t.powerLabel.visible=!1,t.skillList.itemRenderer=PetSkillIconItem,UIHelper.SetLinkStyleLabel(t.goLabel),t._AddChange(t.check0,t._OnChange),t._AddChange(t.check1,t._OnChange),t._AddClick(t.actBtn,t._OnActClick),t._AddClick(t.goLabel,t._OnClick),t._AddItemClick(t.skillList,t._OnItemClick),t}return __extends(t,e),t.prototype._OnItemClick=function(e){var t=e.itemIndex;0==t?ViewManager.ins().open(PetSkillTipPanel,0,e.itemRenderer.data):ViewManager.ins().open(PetSkillTipPanel,2,e.itemRenderer.data.id)},t.prototype.OnOpen=function(){this.observe(MessageDef.LINGTONG_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.LINGTONG_ACT_ITEM,this._OnSelect),this.observe(MessageDef.RP_LINGTONG,this.UpdateInfoLabel),this.observe(MessageDef.DESTINY_CHANGE,this.UpdateEquip),this._OnSelect(),this.UpdateInfoLabel()},t.prototype._OnClick=function(){ViewManager.ins().openIndex(DestinyUpWin,1)},t.prototype._OnActClick=function(){var e=this.check0.selected?1:2,t=1==e?"男童":"女童";WarnWin.show("是否确定选择|C:"+Color.GetStr(Color.l_green_1)+"&T:【"+t+"】|，选择激活后无法变更性别",function(){GameGlobal.LingtongAttrModel.SendActive(e)},this)},t.prototype.UpdateInfoLabel=function(){GameGlobal.DestinyController.getUseDestinyData();this.info2Label.text="需要佩戴"+GameGlobal.Config.BabyBasisConfig.material.num+"个"+ItemBase.QUALITY_NAME_STR[GameGlobal.Config.BabyBasisConfig.material.quality]+"品质的命格才能激活灵童";var e=GameGlobal.LingtongAttrModel.mRedPoint.GetIndexAct();e?(this.actBtn.visible=!0,this.goLabel.visible=!1):(this.actBtn.visible=!1,this.goLabel.visible=!0),this.UpdateEquip()},t.prototype.UpdateEquip=function(){for(var e=GameGlobal.DestinyController.getUseDestinyData(),t=0;6>t;t++){var i=e[t],o=this.itemGroup.getChildAt(t);o&&o.onUpdate(t,i)}this.infoLabel.textFlow=ConsumeLabel.GetValueColor(GameGlobal.LingtongAttrModel.mRedPoint.GetActCount(),GameGlobal.Config.BabyBasisConfig.material.num)},t.prototype.UpdateContent=function(){this.UpdateInfoLabel()},t.prototype._OnChange=function(e){e.currentTarget==this.check0?this.check1.selected=!1:this.check0.selected=!1,this._OnSelect()},t.prototype._OnSelect=function(){var e=this.check0.selected?1:2;LingtongViewHelper.SetRole(this.petShowPanel,e,1);var t=GameGlobal.Config.BabyActivationConfig[e];this.skillList.dataProvider=new eui.ArrayCollection(t.skill.concat(t.buffskill))},t}(BaseView);__reflect(LingtongInactiveView.prototype,"LingtongInactiveView");var LingtongMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t.mCommonWindowBg.title="灵童",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=[TabView.CreateTabViewData(LingtongUpLevelPanel),TabView.CreateTabViewData(LingtongSkillPanel),TabView.CreateTabViewData(LingtongRankPanel)];Deblocking.IsDeblocking(DeblockingType.TYPE_120)&&e.push(TabView.CreateTabViewData(DestinyPanel)),this.mCommonWindowBg.SetTabView(e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this,e[0]||0),this.observe(MessageDef.LINGTONG_UPDATE_INFO,this.UpdateContent),this.observe(GameGlobal.LingtongModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(GameGlobal.LingtongModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(MessageDef.RP_LINGTONG,this.UpdateRedPoint),this.UpdateContent(),this.UpdateRedPoint()},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(0),this.mCommonWindowBg.CheckTalRedPoint(1),this.mCommonWindowBg.CheckTalRedPoint(2)},t.prototype.UpdateContent=function(){GameGlobal.LingtongAttrModel.IsActive()&&this.mCommonWindowBg.GetCurViewStackElement().UpdateContent(),this._UpdatePetView()},t.prototype._UpdatePetView=function(e){void 0===e&&(e=null),null==e&&(e=this.mCommonWindowBg.viewStack.selectedIndex),3==e?(this.mPetInactiveView&&(this.mPetInactiveView.visible=!1),this.mCommonWindowBg.viewStack.visible=!0):GameGlobal.LingtongAttrModel.IsActive()?(this.mCommonWindowBg.viewStack.visible=!0,this._ClosePetView()):(this.mPetInactiveView||(this.mPetInactiveView=new LingtongInactiveView),this.mPetInactiveView.visible=!0,this.mPetInactiveView.parent||(this.addChild(this.mPetInactiveView),this.mPetInactiveView.DoOpen([])),this.mPetInactiveView.UpdateContent(),this.mCommonWindowBg.viewStack.visible=!1)
},t.prototype._ClosePetView=function(){this.mPetInactiveView&&this.mPetInactiveView.parent&&(this.mPetInactiveView.DoClose(),DisplayUtils.removeFromParent(this.mPetInactiveView))},t.prototype.OnOpenIndex=function(e){return GameGlobal.LingtongAttrModel.IsActive()||3==e||0!=e&&UserTips.InfoTip("请先激活灵童"),this._UpdatePetView(e),!0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_116)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(LingtongMainPanel.prototype,"LingtongMainPanel",["ICommonWindow"]);var LingtongRankPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="LingtongRankSkin",t.GainWay(),t._AddClick(t.skillIcon,t._OnItemClick),t._AddClick(t.btnAuto,t._OnItemClick),t._AddClick(t.btnCulture,t._OnItemClick),t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnAuto.label="停止":t.btnAuto.label="自动进阶"},200),t.mRoleSendCheckData=new RoleSendCheckData(function(e){GameGlobal.LingtongAttrModel.SendAddGift()},function(){var e=GameGlobal.LingtongAttrModel;if(e.giftlv>=e.MAX_GIFT_LEVEL)return[null];var t=GameGlobal.Config.BabyTalentConfig[e.mSex][e.giftlv-1];if(t)return[null,null,t.cost[0].id,t.cost[0].count]},function(){return!1},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){this.observe(MessageDef.LINGTONG_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.LINGTONG_UPDATE_GIFT_INFO,this.UpdateRank),this.UpdateContent(),this.observe(MessageDef.RP_LINGTONG,this.UpdateRedPoint),this.UpdateRedPoint(),this.lbName.text=GameGlobal.LingtongAttrModel.mName,LingtongViewHelper.SetRole(this.petShowPanel0)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.btnAuto,GameGlobal.LingtongAttrModel.mRedPoint.Get(LingtongAttrRedPoint.INDEX_RANK)),UIHelper.ShowRedPoint(this.btnCulture,GameGlobal.LingtongAttrModel.mRedPoint.Get(LingtongAttrRedPoint.INDEX_RANK))},t.prototype.UpdateRank=function(){this.mRoleAutoSendData.Continue(),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.LingtongAttrModel;if(e.IsActive()){var t=GameGlobal.Config.BabyTalentConfig[e.mSex][e.giftlv-1];if(t){this.SetSkillDes(this.leftComp,GameGlobal.LingtongAttrModel.GetSkillId()),PetSkillIconItem.SetContent(this.skillIcon,GameGlobal.LingtongAttrModel.GetSkillId(),0);var i=GameGlobal.LingtongAttrModel.getTianFuAllAttr();if(this.skinAttr.textFlow=AttributeData.GetAttrTabString(i),this.powerLabel.text=UserBag.getAttrPower(i),this.lbLev.text=PetZizhiPanel.TYPE[e.giftlv],e.giftlv>=e.MAX_GIFT_LEVEL)return this.infoGroup.visible=!1,this.lbFull.visible=!0,this.leftComp.x=229,this.arrImg.visible=!1,void(this.rightComp.visible=!1);this.leftComp.x=34,this.arrImg.visible=!0,this.rightComp.visible=!0,this.SetSkillDes(this.rightComp,GameGlobal.LingtongAttrModel.GetNextSkillId()),this.bar.maximum=t.proexp,this.bar.value=e.giftexp*t.exp,this.needItemView.SetItemId(t.cost[0].id,t.cost[0].count)}}},t.prototype._OnItemClick=function(e){switch(e.currentTarget){case this.skillIcon:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.LingtongAttrModel.GetSkillId());break;case this.btnCulture:this.SendUp();break;case this.btnAuto:this.mRoleAutoSendData.Toggle()}},t.prototype.GainWay=function(){var e=GameGlobal.LingtongAttrModel;if(e.IsActive()){var t=GameGlobal.Config.BabyTalentConfig[GameGlobal.LingtongAttrModel.mSex][e.giftlv-1];if(t){var i=t.cost[0].id;this.getwayLabel.SetId(i)}}},t.prototype.SetSkillDes=function(e,t){e.iconImg.source=PetConst.GetSkillIcon(t),e.skillName.text=PetConst.GetSkillName(t);var i=PetConst.GetSkillQuality(t);e.skillName.textColor=ItemBase.GetColorByQuality(i),e.skillDesc.text=PetConst.GetSkillDesc(t)},t.RedPointCheck=function(){return GameGlobal.LingtongAttrModel.mRedPoint.Get(LingtongAttrRedPoint.INDEX_RANK)},t.NAME="天赋",t}(BaseView);__reflect(LingtongRankPanel.prototype,"LingtongRankPanel",["ICommonWindowTitle"]);var LingtongSkillPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="LingtongSkillSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.goBtn,this._OnClick),this._AddClick(this.btnInfo,this._OnClick),this._AddClick(this.skillIcon,this._OnClick),this._AddClick(this.starGroup,this._OnClick),this.skillGroup.itemRenderer=LinglongSkillItem,this._AddItemClick(this.skillGroup,this._OnItemClick)},t.prototype.OnOpen=function(){this.observe(MessageDef.LINGTONG_UPDATE_INFO,this.UpdateContent),this.lbName.text=GameGlobal.LingtongAttrModel.mName,this.observe(MessageDef.RP_LINGTONG,this.UpdateRedPoint),this.UpdateRedPoint()},t.prototype.UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.goBtn,GameGlobal.LingtongAttrModel.mRedPoint.Get(LingtongAttrRedPoint.INDEX_SKILL))},t.prototype.UpdateContent=function(){if(GameGlobal.LingtongAttrModel.IsActive()){GameGlobal.LingtongAttrModel;this.group.visible=!0;for(var e=[],t=0,i=GameGlobal.LingtongAttrModel.mBuffSkill;t<i.length;t++){var o=i[t];e.push(o)}for(var n=e.length;n<PetModel.SKILL_COUNT;n++)e.push(null);this.skillGroup.dataProvider=new eui.ArrayCollection(e);for(var a=this.GetXilianStar(),n=0;n<this.starGroup.numChildren;n++){var r=this.starGroup.getChildAt(n);r.source=a>n?"ui_bm_star022":"ui_bm_star021"}LingtongViewHelper.SetRole(this.petShowPanel);var s=GameGlobal.LingtongAttrModel.GetSkillId();GameGlobal.Config.EffectsConfig[s];this.skillDesc.text="提升灵童的天赋可提升主动技能等级",PetSkillIconItem.SetContent(this.skillIcon,GameGlobal.LingtongAttrModel.GetSkillId(),0)}},t.prototype.GetXilianStar=function(){for(var e=GameGlobal.Config.BabyBasisConfig.polishStar,t=e.length,i=GameGlobal.LingtongAttrModel.mXilian,o=0;o<e.length;o++){var n=e[o];if(n>=i){t=o+1;break}}return t},t.prototype._OnItemClick=function(e){var t=e.itemIndex,i=GameGlobal.LingtongAttrModel.mBuffSkill[t];i&&ViewManager.ins().open(PetSkillTipPanel,2,i)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.goBtn:ViewManager.ins().open(LingtongXilianPanel);break;case this.btnInfo:this.pressInfo();break;case this.skillIcon:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.LingtongAttrModel.GetSkillId());break;case this.starGroup:this.pressInfo()}},t.prototype.pressInfo=function(){var e="灵童技能已累计刷新：",t=GameGlobal.LingtongAttrModel.mXilian+"次",i=16777215;i=ItemBase.GetColorByQuality(1),ViewManager.ins().open(PetXilianTipPanel,GameGlobal.LingtongAttrModel.mName,e,t,i,GameGlobal.Config.BabyBasisConfig.freshitemid)},t.RedPointCheck=function(){return GameGlobal.LingtongAttrModel.mRedPoint.Get(LingtongAttrRedPoint.INDEX_SKILL)},t.NAME="技能",t}(BaseView);__reflect(LingtongSkillPanel.prototype,"LingtongSkillPanel",["ICommonWindowTitle"]);var LingtongUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.LingtongModel,t.mModelRedPoint=GameGlobal.LingtongModel.mRedPoint,t.mShowLevel=0,t.skinName="LingtongUpLevelSkin",t.skillList.itemRenderer=LinglongSkillItem,t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnAuto.label="停止":t.btnAuto.label="自动进阶"},200),t.mRoleSendCheckData=new RoleSendCheckData(function(e){t.mModel&&t.mModel.SendBoost(e)},function(){var e=t.mModel,i=t.mModel.LvproConfig[e.mLevel];if(!i)return[null];var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t.lbFull.text=t.name+"已满阶",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.btnAuto,this._OnClick),this._AddClick(this.btnAttrDrug,this._OnClick),this._AddClick(this.powerLabel,this._OnClick),this._AddClick(this.btnSkin,this._OnClick),this._AddClick(this.btn_juexing,this._OnClick),this._AddClick(this.btnRename,this._OnClick),this._AddClick(this.skillComp,this._OnClick),this._AddItemClick(this.skillList,this._OnItemClick)},t.prototype.OnOpen=function(){this.observe(MessageDef.LINGTONG_UPDATE_INFO,this.UpdateContent),this.observe(this.mModel.mMsgDefUpdate,this.UpdateContent),this.observe(this.mModel.mMsgDefUpdateExp,this.UpdateExp),this.observe(this.mModel.GetItemRpUpdateMsg(),this.UpdateRedPoint),this.observe(this.mModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPoint),this.observe(this.mModel.GetItemRankItemUpdateMsg(),this.UpdateItemContent),this.mShowLevel=this.mModel.mLevel,this.mShowLevel&&(this.UpdateModel(Math.max(this.mShowLevel,1)),this.UpdateContent(),this.UpdateRedPoint())},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype._OnItemClick=function(e){e.item&&(0==e.itemIndex?ViewManager.ins().open(PetSkillTipPanel,0,e.item):ViewManager.ins().open(PetSkillTipPanel,2,e.item))},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.skillComp:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.LingtongAttrModel.GetSkillId());break;case this.btnCulture:this.SendUp();break;case this.btnAuto:this.mRoleAutoSendData.Toggle();break;case this.btnAttrDrug:ViewManager.ins().open(RoleTemplateDrugPanel,this.mModel);break;case this.powerLabel:ViewManager.ins().open(LingTongRoleTemplateAttrPanel,this.mModel,"灵童",this.mModel.GetLevelSkin(this.mShowLevel));break;case this.btnSkin:ViewManager.ins().open(RoleRideDressPanel,this.mModel);break;case this.btn_juexing:ViewManager.ins().open(RoleTemplateRewardPanel,this.mModel.mTemplateType);break;case this.btnRename:ViewManager.ins().open(PetChangeNamePanel,"灵童改名",MessageDef.LINGTONG_UPDATE_INFO,GameGlobal.LingtongAttrModel.mName,function(e){GameGlobal.LingtongAttrModel.SendRename(e)},this)}},t.prototype.SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype.UpdateExp=function(e){(e||0==this.mShowLevel)&&this.UpdateModel(this.mShowLevel+1),this.mRoleAutoSendData.Continue()},t.prototype.UpdateContent=function(){var e=this.mModel;if(GameGlobal.LingtongAttrModel.IsActive()){for(var t=[GameGlobal.LingtongAttrModel.GetSkillId()],i=0,o=GameGlobal.LingtongAttrModel.mBuffSkill;i<o.length;i++){var n=o[i];t.push(n)}for(var a=t.length;a<PetModel.SKILL_COUNT;a++)t.push(null);this.skillList.dataProvider=new eui.ArrayCollection(t),this.skillList.validateNow();for(var a=0;a<this.skillList.numChildren;a++){var r=this.skillList.getChildAt(a);r.mIsLock||(r.skillName.visible=!1)}if(this.powerLabel.text=e.GetDescPower()+GameGlobal.DestinyController.GetPower(),!e.mLevel)return void(this.currentState="none");this.mModel.mLevel>=this.mModel.mMaxLevel?this.currentState="full":this.currentState="normal";var s=this.mModel.LvproConfig[e.mLevel];s&&(this.bar.maximum=s.proexp,this.bar.value=e.mUpNum*s.exp,this.UpdateItemContent(),this.UpdateModel(this.mShowLevel))}},t.prototype.UpdateItemContent=function(){var e=this.mModel.LvproConfig[this.mModel.mLevel];e&&this.consumeLabel.Set(e.cost)},t.prototype.UpdateRedPoint=function(){this.btnSkin.visible&&UIHelper.ShowRedPoint(this.btnSkin,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_SKIN)),UIHelper.ShowRedPoint(this.btnAttrDrug,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_ATTR_ITEM)),UIHelper.ShowRedPoint(this.btn_juexing,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_REWARD)),UIHelper.ShowRedPoint(this.btnAuto,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_RANK)),UIHelper.ShowRedPoint(this.btnCulture,this.mModelRedPoint.Get(UserTemplateRedPoint.INDEX_RANK))},t.prototype.UpdateModel=function(e){this.mModel;this.mShowLevel=e,this.lbName.text=GameGlobal.LingtongAttrModel.mName||"",this.lbLev.text=e+"\n阶",LingtongViewHelper.SetRole(this.showPanel)},t.RedPointCheck=function(){return GameGlobal.LingtongAttrModel.mRedPoint.Get(LingtongAttrRedPoint.INDEX_ACTIVE)||GameGlobal.LingtongModel.mRedPoint.IsRedPoint()},t.NAME="升阶",t}(BaseView);__reflect(LingtongUpLevelPanel.prototype,"LingtongUpLevelPanel",["ICommonWindowTitle"]);var LingtongViewHelper=function(){function e(){}return e.SetRole=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null);var o=new RoleShowData;o.job=1,null==t&&(t=GameGlobal.LingtongAttrModel.mSex),o.sex=t-1,null==i&&(i=GameGlobal.LingtongModel.mDressId),i||(i=1),o.clothID=GameGlobal.LingtongModel.SkinConfig[i].pid,e.Set(RoleShowDressType.ROLE,o)},e}();__reflect(LingtongViewHelper.prototype,"LingtongViewHelper");var LingtongXilianPanel=function(e){function t(){var t=e.call(this)||this;return t.commonWindowBg.SetTitle("灵童"),t}return __extends(t,e),t.prototype.GetMsgDef=function(){this.observe(MessageDef.LINGTONG_UPDATE_INFO,this.UpdateContent)},t.prototype.GetBuffSkill=function(){return GameGlobal.LingtongAttrModel.mBuffSkill},t.prototype.GetXilianSkill=function(e){return GameGlobal.LingtongAttrModel.mXilianSkill[e]},t.prototype.SendSkillXilian=function(){GameGlobal.LingtongAttrModel.SendSetSkill()},t.prototype.SendSendXilian=function(e,t){GameGlobal.LingtongAttrModel.SendRefreshSkill(e,t,this.checkBox.selected)},t.prototype.GetBaseConfig=function(){return GameGlobal.Config.BabyBasisConfig},t}(PetXilianPanel);__reflect(LingtongXilianPanel.prototype,"LingtongXilianPanel");var OpenDayGifModel=function(e){function t(){var t=e.call(this)||this;return t.tolDay=0,t.mConfigLen=null,t.regNetMsg(S2cProtocol.sc_welfare_login_gift_info,t.LoginGift),t}return __extends(t,e),t.prototype.LoginGift=function(e){this.tolDay=e.totalLoginday,this.receivemark=e.receivemark,GameGlobal.MessageCenter.dispatch(MessageDef.LOGINDAYGIF)},t.prototype.getLoginReward=function(e){var t=new Sproto.cs_welfare_get_loginreward_request;t.indexDay=e,this.Rpc(C2sProtocol.cs_welfare_get_loginreward,t)},t.prototype.OpenDayPointRed=function(){var e=GameGlobal.Config.LoginRewardConfig;for(var i in e)if(Number(i)<=t.ins().tolDay&&!BitUtil.Has(t.ins().receivemark,Number(i)-1))return!0;return!1},t.prototype.OpenDayIcon=function(){var e=GameGlobal.Config.LoginRewardConfig;for(var i in e)if(!BitUtil.Has(t.ins().receivemark,Number(i)-1))return!0;return!1},t.prototype.GetShowDayImg=function(){this.mConfigLen||(this.mConfigLen=CommonUtils.getObjectLength(GameGlobal.Config.LoginRewardConfig));for(var e=this.receivemark,t=GameGlobal.Config.LoginRewardConfig,i=1;i<=this.mConfigLen;i++){var o=t[i];if(!BitUtil.Has(e,i-1))return o.btnicon}return""},t}(BaseSystem);__reflect(OpenDayGifModel.prototype,"OpenDayGifModel");var OpenDayGifWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="OpenDayGifSkin",t.commonWindowBg.SetTitle("登陆送元宝"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=OpenDayGifItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.LOGINDAYGIF,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClicked=function(e){},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.LoginRewardConfig,t=[],i=GameServer.serverOpenDay<7;for(var o in e)i&&e[o].day>=8||t.push(Number(o));var n=OpenDayGifModel.ins(),a=function(e){var t=Number(e);return t<=n.tolDay&&!BitUtil.Has(n.receivemark,t-1)?-1e5+t:t>n.tolDay?-1e4+t:BitUtil.Has(n.receivemark,t-1)?-1e3+t:void 0};t.sort(function(e,t){return a(e)-a(t)}),this.list.dataProvider=new eui.ArrayCollection(t),n.tolDay>t.length?this.tipImg.source=e[t.length].item:this.tipImg.source=e[n.tolDay||1].item},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(OpenDayGifWin.prototype,"OpenDayGifWin",["ICommonWindow"]);var OpenDayGifItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){OpenDayGifModel.ins().getLoginReward(this.data)},t.prototype.dataChanged=function(){var e=GameGlobal.Config.LoginRewardConfig[this.data];this.tipsTxt.text="第"+this.data+"天",this.data-OpenDayGifModel.ins().tolDay>0?this.data-OpenDayGifModel.ins().tolDay==1?(this.mtzl.visible=!0,this.tip2.text=""):(this.mtzl.visible=!1,this.tip2.text="还差"+(this.data-OpenDayGifModel.ins().tolDay)+"天"):(this.tip2.text="",this.mtzl.visible=!1),this.list.dataProvider=new eui.ArrayCollection(e.showitem2),this.getted_img.visible=BitUtil.Has(OpenDayGifModel.ins().receivemark,this.data-1),this.btn.visible=this.data<=OpenDayGifModel.ins().tolDay&&!this.getted_img.visible,this.tip2.visible=!(this.getted_img.visible||this.getted_img.visible),UIHelper.ShowRedPoint(this.btn,this.btn.visible),this.item.data=e.showitem},t}(eui.ItemRenderer);__reflect(OpenDayGifItem.prototype,"OpenDayGifItem");var MailData=function(){function e(){this.handle=0,this.title="",this.times=0,this.type=0,this.receive=0,this.item=[],this.text=""}return e.prototype.parser=function(e){this.disposeData(e.mailData),this.item=[],this.text=e.text;for(var t=e.rewardData.length,i=0;t>i;i++){var o=new RewardData;o.parser(e.rewardData[i]),this.item.push(o)}},e.prototype.disposeData=function(e){this.handle=e.handle,this.title=e.title,this.times=e.times,this.type=e.type,this.receive=e.receive},e}();__reflect(MailData.prototype,"MailData");var MailModel=function(e){function t(){var t=e.call(this)||this;return t.mailData=[],t.currentMailHandle=0,t.regNetMsg(S2cProtocol.sc_mail_init_info,t.doMailData),t.regNetMsg(S2cProtocol.sc_mail_detailed_info,t.doMailDetailedData),t.regNetMsg(S2cProtocol.sc_mail_delete,t.doDeleteMail),t.regNetMsg(S2cProtocol.sc_mail_update_info,t.doGetItemMail),t.regNetMsg(S2cProtocol.sc_mail_add_info,t.doAddMail),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendMailContentData=function(e){var t=new Sproto.cs_mail_get_content_request;t.handle=e,this.Rpc(C2sProtocol.cs_mail_get_content,t)},t.prototype.sendGetItem=function(e){if(e&&0!=e.length){var t=new Sproto.cs_mail_get_reward_request;t.handle=e,this.Rpc(C2sProtocol.cs_mail_get_reward,t)}},t.prototype.doMailData=function(e){this.mailData=[];for(var t=e.mailData.length,i=0;t>i;i++){var o=new MailData;o.disposeData(e.mailData[i]),this.mailData.push(o)}this.mailSort(1),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE)},t.prototype.doAddMail=function(e){this.mailData||(this.mailData=[]);var t=new MailData;t.disposeData(e.mailData),this.mailData.unshift(t),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE)},t.prototype.doMailDetailedData=function(e){var t=new MailData;t.parser(e);for(var i=!1,o=0;o<this.mailData.length;o++)if(this.mailData[o].handle==t.handle){this.mailData[o]=t,i=!0;break}i&&(this.currentMailHandle=t.handle,ViewManager.ins().open(MailDetailedWin),GameGlobal.MessageCenter.dispatch(MessageDef.OPEN_MAIL,t),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE))},t.prototype.getMailDataByHandle=function(e){for(var t=0;t<this.mailData.length;t++)if(this.mailData[t].handle==e)return this.mailData[t];return null},t.prototype.doDeleteMail=function(e){if(this.mailData)for(var t=0;t<this.mailData.length;t++)if(this.mailData[t].handle==e.handle)return GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE),void this.mailData.splice(t,1)},t.prototype.getMailByReceive=function(e){void 0===e&&(e=0);var t=[];if(this.mailData.length>0)for(var i=this.mailData.length-1;i>=0;i--)this.mailData[i].receive==e&&t.push(this.mailData[i]);return t},t.prototype.getUnreadMail=function(){if(this.mailData.length>0)for(var e=this.mailData.length-1;e>=0;e--)if(0==this.mailData[e].type||0==this.mailData[e].receive)return!0;return!1},t.prototype.getCurrentMail=function(){return this.getMailDataByHandle(this.currentMailHandle)},t.prototype.doGetItemMail=function(e){for(var t=e.updateData.length,i=0;t>i;i++)for(var o=e.updateData[i],n=o.handle,a=0;a<this.mailData.length;a++)if(this.mailData[a].handle==n){this.mailData[a].type=o.type,this.mailData[a].receive=o.receive,GameGlobal.MessageCenter.dispatch(MessageDef.OPEN_MAIL,this.mailData[a]);break}e.showWarnBagSpace&&BagFullTipsPanel.Open(),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_GET_ITEM),GameGlobal.MessageCenter.dispatch(MessageDef.MAIL_DATA_CHANGE)},t.prototype.sort1=function(e,t){var i=e.times,o=t.times;return i>o?-1:o>i?1:0},t.prototype.sort2=function(e,t){var i=e.times,o=t.times;return o>i?-1:i>o?1:0},t.prototype.mailSort=function(e){var t=this.mailData;return e?t.sort(this.sort1):t.sort(this.sort2),t},t}(BaseSystem);__reflect(MailModel.prototype,"MailModel");var CustomServicePanel=function(e){function t(){var i=e.call(this)||this;return i.defaultText="点击输入咨询内容",i.skinName="CustomServicePanelSkin",null==t.QQ_STR&&GameSocket.ins().Rpc(C2sProtocol.cs_get_kefu_qq,null,i._DoUpdateQQStr,i),i}return __extends(t,e),t.prototype._DoUpdateQQStr=function(e){t.QQ_STR=e.qq,this._UpateQQLabel()},t.prototype._UpateQQLabel=function(){if(null!=this.qqLabel){var e=t.QQ_STR;StringUtils.IsNullOrEmpty(e)?this.qqLabel.text="":this.qqLabel.text="客服QQ："+e}},t.prototype.childrenCreated=function(){this._SetShowState(0)},t.prototype._SetShowState=function(e){var t=0==e;this.qqLabel.visible=t,this.sendBtn.visible=t,this.input.visible=t},t.prototype.OnOpen=function(){this._UpateQQLabel(),this.AddClick(this.sendBtn,this.OnClick)},t.prototype.OnClick=function(e){if(0==this.input.text.length||this.input.text==this.defaultText)return void UserTips.ins().showTips("内容不能为空");var t=this.input.text;this.input.text="";var i=new Sproto.cs_send_kefu_msg_request;i.msg=t,GameSocket.ins().Rpc(C2sProtocol.cs_send_kefu_msg,i),UserTips.ins().showTips("发送成功")},t.prototype._Complete=function(e){var t=e.currentTarget;console.log(t.response)},t.prototype._Error=function(e){console.log("event error")},t.prototype.UpdateContent=function(){},t.NAME="意见反馈",t.QQ_STR=null,t}(BaseView);__reflect(CustomServicePanel.prototype,"CustomServicePanel",["ICommonWindowTitle"]);var MailDetailedWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MailContentSkin",this.itemList.itemRenderer=ItemBase},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.receiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.observe(MessageDef.MAIL_GET_ITEM,this.setMailData),this.observe(MessageDef.MAIL_DATA_CHANGE,this.setMailData),this.setMailData(),this.commonDialog.OnAdded(this)},t.prototype.OnClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnRemoved(),this.receiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),GameGlobal.MessageCenter.removeListener(MessageDef.MAIL_GET_ITEM,this.setMailData,this),GameGlobal.MessageCenter.removeListener(MessageDef.MAIL_DATA_CHANGE,this.setMailData,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.receiveBtn:var t=[];t.push(MailModel.ins().currentMailHandle),MailModel.ins().sendGetItem(t)}},t.prototype.otherClose=function(e){var i=this.background;e.localX>=i.x&&e.localX<=i.x+i.width&&e.localY>=i.y&&e.localY<=i.y+i.height||ViewManager.ins().close(t)},t.prototype.setMailData=function(){var e=MailModel.ins().getCurrentMail();this.textLabel.text=e.text,this.setReceiveBtn(e.receive,e.item.length>0),this.itemList.dataProvider=new eui.ArrayCollection(e.item),1===e.receive&&(this.receiveBtn.filters=Color.GetFilter()),e.item.length>0?this.pAddGronp.visible=!0:this.pAddGronp.visible=!1},t.prototype.setReceiveBtn=function(e,t){void 0===t&&(t=!1);var i="";this.receiveBtn.visible=e>=0,i=e?"已领取":"领取",this.receiveBtn.label=i,this.receiveBtn.enabled=!Boolean(e),this.receiveBtn.visible=t,this.desc.visible=!t},t}(BaseEuiView);__reflect(MailDetailedWin.prototype,"MailDetailedWin"),MailDetailedWin.LAYER_LEVEL=LayerManager.UI_Main;var MailItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="MailItemSkin",t.tipLabel=null,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;0===e.receive?this.give.visible=!0:this.give.visible=!1;var t=e.type?"(已读)":"(未读)",i=e.type?Color.l_normal:Color.l_green_1;e instanceof MailData&&(this.nameLabel.textFlow=TextFlowMaker.generateTextFlow("|T:"+e.title+"|C:"+i+"&T:"+t+"|"),this.dateLabel.text=DateUtils.getFormatBySecond(e.times,2))},t}(eui.ItemRenderer);__reflect(MailItem.prototype,"MailItem");var MailListPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MailListSkin",t._mails=[],t.mailList.itemRenderer=MailItem,t}return __extends(t,e),t.prototype.OnOpen=function(){this.allReceiveBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.mailList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendMail,this),this.observe(MessageDef.MAIL_DATA_CHANGE,this.setMailData),this.observe(MessageDef.OPEN_MAIL,this.setOpenMail),this.setMailData()},t.prototype.OnClose=function(){this.allReceiveBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.mailList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendMail,this),GameGlobal.MessageCenter.removeListener(MessageDef.MAIL_DATA_CHANGE,this.setMailData,this),GameGlobal.MessageCenter.removeListener(MessageDef.OPEN_MAIL,this.setOpenMail,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.allReceiveBtn:for(var t=[],i=MailModel.ins().getMailByReceive(),o=0;o<i.length;o++)t.push(i[o].handle);MailModel.ins().sendGetItem(t)}},t.prototype.onSendMail=function(e){var t=e.target.parent;if(t){var i=t.data;i&&MailModel.ins().sendMailContentData(i.handle)}},t.prototype.setMailData=function(){var e=!1;this._mails=MailModel.ins().mailData,this.mailList.dataProvider=new eui.ArrayCollection(this._mails),MailModel.ins().mailData.length>0&&(this.noMailTip.visible=!1),MailModel.ins().mailData.length>0||(this.allReceiveBtn.visible=!1,this.bgbg.visible=!1);for(var t in this._mails){var i=this._mails[t];if(0===i.receive){e=!0;break}}e?(this.allReceiveBtn.visible=!0,this.mailScroller.height=727):(this.allReceiveBtn.visible=!1,this.mailScroller.height=840)},t.prototype.setOpenMail=function(e){for(var t=0;t<this.mailList.numChildren;t++){var i=this.mailList.getChildAt(t);if(i.data.handle==e.handle)return void(i.data=e)}},t.prototype.UpdateContent=function(){},t.NAME="邮件",t}(BaseView);__reflect(MailListPanel.prototype,"MailListPanel",["ICommonWindowTitle"]);var MailWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MailSkin",this.viewStack.tabChildren=[TabView.CreateTabViewData(MailListPanel),TabView.CreateTabViewData(CustomServicePanel)],this.commonWindowBg.SetViewStack(this.viewStack),!LocationProperty.NotCustionServer()},t.prototype.OnOpen=function(){this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("邮件")},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(MailWin.prototype,"MailWin",["ICommonWindow"]);var Notice=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_record_datas,t.doNoticeInit),t.regNetMsg(S2cProtocol.sc_record_add,t.doNoticeRecords),t}return __extends(t,e),t.prototype.doNoticeInit=function(e){if(1==e.type){for(var t=[],i=0,o=e.record;i<o.length;i++){var n=o[i],a=new ChatSystemData(ChatType.Public,n.str,n.time);t.push(a)}GameGlobal.Chat.DoInitSysChatMsg(t)}},t.prototype.doNoticeRecords=function(e){if(1==e.type&&null!=e.record){var t=e.record,i=new ChatSystemData(ChatType.Public,t.str,t.time);GameGlobal.Chat.DoSysChatMsg(i),1==t.type?this.Notice(t.str):4==t.type&&this.StaticNotice(t.str)}},t.prototype.Notice=function(e){ViewManager.ins().isShow(NoticeView)?ViewManager.ins().getView(NoticeView).ShowNotice(e):ViewManager.ins().open(NoticeView).ShowNotice(e)},t.prototype.StaticNotice=function(e){ViewManager.ins().isShow(NoticeView)?ViewManager.ins().getView(NoticeView).ShowStaticNotice(e):ViewManager.ins().open(NoticeView).ShowStaticNotice(e)},t}(BaseSystem);__reflect(Notice.prototype,"Notice");var NoticeView=function(e){function t(){var t=e.call(this)||this;return t.m_LabelList=[],t.m_TextList=[],t.m_IsFirst=!0,t.m_LabelList2=[],t.m_TextList2=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchChildren=!1,this.touchEnabled=!1,this.frame=new eui.Image,this.frame.source="ui_cm_black",this.frame.alpha=.5,this.frame.percentWidth=100,this.frame.height=40;var t=this.scroll=new eui.Scroller;t.touchEnabled=!1,t.touchChildren=!1,t.x=0,t.percentWidth=100,t.height=this.frame.height;var i=this.scrollGroup=new eui.Group;i.percentWidth=100,i.percentHeight=100,t.addChild(i),t.viewport=i;var o=new eui.Image;o.source=this.frame.source,o.percentWidth=100,o.percentHeight=100,o.alpha=.5,this.scrollGroup.addChild(o),this.updatePosY()},t.prototype.updatePosY=function(){this.frame.y=160,this.scroll.y=this.frame.y+this.frame.height+10},t.prototype.ShowNotice=function(e){this.m_TextList.push(e),this.StartTween()},t.prototype.StartTween=function(){this.frame.parent||(this.addChild(this.frame),this.m_IsFirst?(this.m_IsFirst=!1,egret.setTimeout(this.DoTween,this,20)):this.DoTween())},t.prototype.DoTween=function(){var e=this.m_TextList.shift();if(null==e)return void DisplayUtils.removeFromParent(this.frame);var t=this.m_LabelList.pop();t||(t=new eui.Label,t.size=24,t.textColor=16745780),this.addChild(t),t.x=this.frame.width,t.y=this.frame.y+8,t.textFlow=TextFlowMaker.generateTextFlow(e);var i=-t.width,o=egret.Tween.get(t);o.to({x:i},25*t.width).call(this.TweenEnd,this,[t])},t.prototype.TweenEnd=function(e){DisplayUtils.removeFromParent(e),this.m_LabelList.push(e),this.DoTween()},t.prototype.ShowStaticNotice=function(e){this.m_TextList2.push(e),this.StartTween2()},t.prototype.StartTween2=function(){this.scroll.parent||(this.addChild(this.scroll),this.DoTween2())},t.prototype.DoTween2=function(){var e=this.m_TextList2.shift();if(null==e)return void DisplayUtils.removeFromParent(this.scroll);var t=this.m_LabelList2.pop();t||(t=new eui.Label,t.size=24,t.textAlign="center",t.textColor=16745780),this.scrollGroup.addChild(t),t.y=this.scroll.height,t.horizontalCenter=0,t.textFlow=TextFlowMaker.generateTextFlow(e);var i=t.width,o=GameGlobal.StageUtils.GetWidth()-30,n=null;if(i>o){var a=i-o>>1;t.horizontalCenter=a,n=a}var r=egret.Tween.get(t);r.to({y:8},250,egret.Ease.sineOut),n?(r.wait(1500),r.to({horizontalCenter:-n},25*n),r.wait(2500)):r.wait(5e3),r.to({y:-this.scroll.height},180),r.call(this.TweenEnd2,this,[t])},t.prototype.TweenEnd2=function(e){DisplayUtils.removeFromParent(e),this.m_LabelList2.push(e),this.DoTween2()},t.LAYER_LEVEL=LayerManager.UI_Tips,t}(BaseEuiView);__reflect(NoticeView.prototype,"NoticeView");var EffectivenessTip=function(e){function t(){var t=e.call(this)||this;return t.skinName="CheckEfficienSkin",t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){var e=this;this.update(),TimerManager.ins().doTimer(2e3,1,function(){var t=egret.Tween.get(e);t.to({alpha:0},1e3).call(function(){e.alpha=1,ViewManager.ins().close(e)},e)},this)},t.prototype.update=function(){var e=GameGlobal.UserFb;e.config.expEff==e.lastData.expEff?this.groupExp.visible=!1:(this.groupExp.visible=!0,this.nextExp.text=e.config.expEff+"",this.curExp.text=e.lastData.expEff+""),e.config.goldEff==e.lastData.goldEff?this.groupGold.visible=!1:(this.groupGold.visible=!0,this.nextMoney.text=e.config.goldEff+"",this.curMoney.text=e.lastData.goldEff+"")},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(EffectivenessTip.prototype,"EffectivenessTip");var OfflineRewardWin=function(e){function t(){var t=e.call(this)||this;return t._resources=["lixianshouyi_json"],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="OfflineRewardSkin"
},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="获得奖励",this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.open.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this);for(var i=1;5>=i;++i)this["label"+i].text="0";this.update(e[0]),GameGlobal.FuliModel.FuliData.month>0?this.open.visible=!1:this.open.visible=!0},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.open.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.update=function(e){if(this.time.text="离线时间："+DateUtils.getFormatBySecond(e.offlineTime,DateUtils.TIME_FORMAT_9),this.label5.text=""+(e.equipNum1+e.equipNum2),0==e.equipNum2?this.bagFull.visible=!1:(this.bagFull.visible=!0,this.bagFull.textFlow=(new egret.HtmlTextParser).parser("背包已满，自动出售<a color=0x00FF00>"+e.equipNum2+"</a>件装备")),e.offlineData.length>0)for(var t=0;t<e.offlineData.length;t++){var i=e.offlineData[t],o=2*i.type-1;this["label"+o]&&(this["label"+o].text=i.gold),this["label"+(o+1)]&&(this["label"+(o+1)].text=i.exp)}},t.prototype.onClick=function(e){switch(e.currentTarget){case this.okBtn:ViewManager.ins().close(this);break;case this.open:ViewManager.ins().close(t),RechargeWin.Open()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(OfflineRewardWin.prototype,"OfflineRewardWin",["ICommonWindow"]);var PlayerInfoModel=function(e){function t(){var t=e.call(this)||this;return t.detailsData=new DetailsData,t.regNetMsg(S2cProtocol.sc_show_other_player,t.getInfo),t.regNetMsg(S2cProtocol.sc_rename_result,t.getChangeName),t.regNetMsg(S2cProtocol.sc_chat_private_init_msg,t.getInitChat),t.regNetMsg(S2cProtocol.sc_chat_private_new_msg,t.getNewMsg),t.RegNetMsgs(S2cProtocol.sc_rename_count,t.getRenameCount),t}return __extends(t,e),t.prototype.getChatListData=function(){return this.detailsData.getChatListData()},t.prototype.getchatUserListData=function(){return this.detailsData.getchatUserListData()},t.prototype.getUserDate=function(){return this.detailsData.getUserData()},t.prototype.setUserDate=function(e){this.detailsData.setUserData(e)},t.prototype.getInfo=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.PALYER_INFO,e)},t.prototype.sendOtherId=function(e){var t=new Sproto.cs_get_other_actor_info_request;t.otherid=e,this.Rpc(C2sProtocol.cs_get_other_actor_info,t)},t.prototype.sendChangeName=function(e){var t=new Sproto.cs_change_player_name_request;t.name=e,this.Rpc(C2sProtocol.cs_change_player_name,t)},t.prototype.getChangeName=function(e){0==e.result?GameGlobal.actorModel.name=e.name:RoleMgr.ins().showErrorTips(e.result),GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_CHANGE_NAME,e)},t.prototype.getRenameCount=function(e){this.detailsData.renameCount=e.count||0},t.prototype.sendChat=function(e,t,i){void 0===i&&(i=2);var o=new Sproto.cs_chat_send_info_request;o.type=i,o.recId=e,o.str=t,this.Rpc(C2sProtocol.cs_chat_send_info,o)},t.prototype.getNewMsg=function(e){e&&(GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_PREVITE_CHAT,e,DetailsType.newMsg),e.chatData.id!=GameGlobal.GameLogic.actorModel.actorID&&this.setUserDate(e.chatData))},t.prototype.sendInitChat=function(e){var t=new Sproto.cs_chat_private_send_init_request;t.targetId=e,this.Rpc(C2sProtocol.cs_chat_private_send_init,t)},t.prototype.getInitChat=function(e){for(var t=0;t<e.chatData.length;t++)if(e.chatData[t].id!=GameGlobal.GameLogic.actorModel.actorID){this.setUserDate(e.chatData[t]);break}GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_PREVITE_CHAT,e,DetailsType.initData)},t.prototype.sendonLine=function(){var e=new Sproto.cs_chat_check_online_request;e.playerIdArray=this.detailsData.getUserIdArr(),0!=e.playerIdArray.length&&this.Rpc(C2sProtocol.cs_chat_check_online,e,this.getOnline,this)},t.prototype.getOnline=function(e){this.detailsData.onlineReq=e,GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_CHECK_ONLINE)},t}(BaseSystem);__reflect(PlayerInfoModel.prototype,"PlayerInfoModel");var DetailsData=function(){function e(){this.detailsUserIdArr=[],this.renameCount=0,GameGlobal.MessageCenter.addListener(MessageDef.PLAYER_PREVITE_CHAT,this.updateData,this),GameGlobal.MessageCenter.addListener(MessageDef.PLAYER_PREVITE_CLOSE,this.updateData,this),this.chatUserListData=new eui.ArrayCollection,this.chatListData={},this.userData=new Sproto.chat_data}return e.prototype.getChatListData=function(){return this.chatListData},e.prototype.getchatUserListData=function(){return this.chatUserListData},e.prototype.setUserData=function(e){this.userData=e},e.prototype.getUserData=function(){return this.userData},e.prototype.getUserIdArr=function(){return this.detailsUserIdArr},e.prototype.updateData=function(e,t){if(t==DetailsType.initData){var i={};if(i.newMsg=!0,i.session=e.session,i.info=this.userData,this.chatUserListData.length>0){for(var o=!1,n=0;n<this.chatUserListData.length;n++)this.chatUserListData.getItemAt(n).session==e.session&&(this.chatListData[e.session]=new eui.ArrayCollection(e.chatData.reverse()),o=!0);o||(this.chatUserListData.addItemAt(i,0),this.chatUserListData.refresh(),this.chatListData[e.session]=new eui.ArrayCollection(e.chatData.reverse()))}else this.chatUserListData.addItemAt(i,0),this.chatUserListData.refresh(),this.chatListData[e.session]=new eui.ArrayCollection(e.chatData.reverse());GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_NEWMSG_SHOW_RED_POINT,!0,!0)}else if(t==DetailsType.newMsg){GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_NEWMSG_SHOW_RED_POINT,!0,!0);for(var o=!1,n=0;n<this.chatUserListData.length;n++)this.chatUserListData.getItemAt(n).session==e.session&&(e.chatData.id!=GameGlobal.actorModel.actorID&&(this.chatUserListData.getItemAt(n).newMsg=!0),this.chatListData[e.session].addItemAt(e.chatData,0),o=!0);o||GameGlobal.PlayerInfoModel.sendInitChat(e.chatData.id)}else t==DetailsType.normal&&(this.chatUserListData.length>0?(e.session=this.chatUserListData.getItemAt(0).session,this.userData=this.chatUserListData.getItemAt(0).info):this.userData=new Sproto.chat_data);for(var n=0;n<this.chatUserListData.length;n++)this.detailsUserIdArr[n]=this.chatUserListData.getItemAt(n).info.id;0==this.chatUserListData.length&&(this.detailsUserIdArr=[]);for(var a in this.chatListData)this.chatListData[a].length>50&&this.chatListData[a].removeItemAt(this.chatListData[a].length-1)},e}();__reflect(DetailsData.prototype,"DetailsData");var DetailsType;!function(e){e[e.normal=0]="normal",e[e.initData=1]="initData",e[e.newMsg=2]="newMsg"}(DetailsType||(DetailsType={}));var PlayerChangeNamePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PlayerChangeNameSkin",t._AddClick(t.btnRename,t._OnClick),t._AddClick(t.btnCancel,t._OnClick),UIHelper.SetInputMaxChar(t.input,12),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.PLAYER_CHANGE_NAME,this.upDataGangName),this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="玩家改名",this.price.setPrice(GameGlobal.Config.RoleBaseConfig.changenamecost.count),this.price.visible=GameGlobal.PlayerInfoModel.detailsData.renameCount>0,this.costTxt.visible=GameGlobal.PlayerInfoModel.detailsData.renameCount<1},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve(),this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRename:var t=this.input.text;""==t?UserTips.ins().showTips("玩家名字不可为空"):t==GameGlobal.actorModel.name?UserTips.ins().showTips("不能与原名相同"):(GameGlobal.PlayerInfoModel.detailsData.renameCount<1||Checker.Money(GameGlobal.Config.RoleBaseConfig.changenamecost.id,GameGlobal.Config.RoleBaseConfig.changenamecost.count))&&GameGlobal.PlayerInfoModel.sendChangeName(t);break;case this.btnCancel:ViewManager.ins().close(this)}},t.prototype.upDataGangName=function(e){UserTips.ins().showTips("修改名字成功"),ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PlayerChangeNamePanel.prototype,"PlayerChangeNamePanel");var PlayerChatpanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PlayerChatSkin",t.input.SetCallback(function(e){t.sendChat(e)}),t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonWindowBg.SetTitle("私聊")},t.prototype.initData=function(){this.chatList.layout=new ceui.CVerticalLayout,this.chatList.itemRenderer=DetailsChatItem,this.chatUserList.itemRenderer=DetailsUserItem,this.chatUserList.dataProvider=GameGlobal.PlayerInfoModel.getchatUserListData(),this.chatUserList.validateNow()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.commonWindowBg.OnAdded(this),this.observe(MessageDef.PLAYER_PREVITE_CHAT,this.updateContent),this.observe(MessageDef.PLAYER_PREVITE_CLOSE,this.updateContent),this.observe(MessageDef.SEND_MSG_INFO_SUCCESS,this.textInOn),this.observe(MessageDef.PLAYER_PREVITE_CHAT,this.UpdateList),this.observe(MessageDef.PLAYER_CHECK_ONLINE,this.UpdateList),this.AddClick(this.commonWindowBg.closeBtn,this.onClick),this.AddItemClick(this.chatUserList,this.onItemClick),this.AddTimer(3e3,0,this.checkOnline),this.palyerId=e[0].id,GameGlobal.PlayerInfoModel.setUserDate(e[0]),this.chatUserList.selectedIndex=0,null!=e[0].id&&GameGlobal.PlayerInfoModel.sendInitChat(e[0].id),e[1])for(var i=GameGlobal.PlayerInfoModel.getchatUserListData(),o=0;o<i.length;o++)if(i.getItemAt(o).newMsg){this.chatUserList.selectedIndex=o,this.palyerId=i.getItemAt(o).info.id;break}},t.prototype.OnClose=function(){this.chatUserList.dataProvider=null,this.checkMsg()},t.prototype.checkOnline=function(){GameGlobal.PlayerInfoModel.sendonLine()},t.prototype.onItemClick=function(e){this.session=this.chatUserList.selectedItem.session,this.touchTo()},t.prototype.checkMsg=function(){for(var e=GameGlobal.PlayerInfoModel.getchatUserListData(),t=0;t<e.length&&!e.getItemAt(t).newMsg;t++)e.length-1==t&&GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_NEWMSG_SHOW_RED_POINT,!1,!0);0==e.length&&GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_NEWMSG_SHOW_RED_POINT,!1,!1)},t.prototype.onClick=function(){var e=GameGlobal.PlayerInfoModel.getchatUserListData();e.removeAll();var t=GameGlobal.PlayerInfoModel.getChatListData();t={},GameGlobal.PlayerInfoModel.setUserDate(new Sproto.chat_data),this.checkMsg()},t.prototype.touchTo=function(){if(this.session){this.session=this.session;var e=this.session.indexOf(":"),t=this.session.slice(0,e),i=this.session.slice(e+1,this.session.length);parseInt(t)==GameGlobal.GameLogic.actorModel.actorID?this.palyerId=parseInt(i):this.palyerId=parseInt(t)}else this.palyerId=null;this.chatUserList.validateNow(),this.chatUserList.selectedItem?this.chatList.dataProvider=GameGlobal.PlayerInfoModel.getChatListData()[this.chatUserList.selectedItem.session]:this.chatList.dataProvider=new eui.ArrayCollection([]),this.chatList.validateNow()},t.prototype.updateContent=function(e){var i=GameGlobal.PlayerInfoModel.getchatUserListData();GameGlobal.PlayerInfoModel.getChatListData();0==i.length&&ViewManager.ins().close(t),this.chatUserList.dataProvider=i,-1==this.chatUserList.selectedIndex&&(this.chatUserList.selectedIndex=0),this.session=e.session,this.touchTo()},t.prototype.sendChat=function(e){if(""==e)UserTips.ins().showTips("内容不可为空");else{SubRoles.ins().GetRoleData(),new Sproto.chat_data;this.touchTo(),null!=this.palyerId?GameGlobal.PlayerInfoModel.sendChat(this.palyerId,e):UserTips.ins().showTips("没有私聊对象")}},t.prototype.textInOn=function(){this.input.SetText("")},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.chatUserList)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PlayerChatpanel.prototype,"PlayerChatpanel");var DetailsChatItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="DetailsChatSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){this.data.id==GameGlobal.GameLogic.actorModel.actorID?this.currentState="self":this.currentState="other",e.prototype.dataChanged.call(this),this.contentTxt.text=this.data.str,this.roleNameTxt.text=this.data.name,this.playerAvatar.setItemImg(ResDataPath.GetHeadImgName(this.data.job,this.data.sex))},t}(eui.ItemRenderer);__reflect(DetailsChatItem.prototype,"DetailsChatItem");var DetailsUserItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ChatUeseItem",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.nameTxt.text=this.data.info.name,this.playerAvatar.setItemImg(ResDataPath.GetHeadImgName(this.data.info.job,this.data.info.sex)),this.selected&&(this.data.newMsg=!1),this.redPointImg.visible=this.data.newMsg,this.setOnLine()},t.prototype.setOnLine=function(){var e;GameGlobal.PlayerInfoModel.detailsData.onlineReq&&(e=GameGlobal.PlayerInfoModel.detailsData.onlineReq,e.onlineStatus[this.itemIndex]?(this.onLineTxt.textColor=104196,this.onLineTxt.text="在线"):(this.onLineTxt.textColor=8158332,this.onLineTxt.text="离线"))},t.prototype.onTouch=function(){this.redPointImg.visible=!1,this.data.newMsg=!1},t.prototype.close=function(){for(var e=GameGlobal.PlayerInfoModel.getchatUserListData(),t=0;t<e.length;t++)e.getItemAt(t).session==this.data.session&&(e.removeItemAt(t),delete GameGlobal.PlayerInfoModel.getChatListData()[this.data.session]);GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_PREVITE_CLOSE,new Sproto.sc_chat_private_init_msg_request,DetailsType.normal)},t}(eui.ItemRenderer);__reflect(DetailsUserItem.prototype,"DetailsUserItem");var PlayerDetailsPanel=function(e){function t(){var t=e.call(this)||this;return t.friend=!0,t.skinName="PlayerInfoSkin",t._AddClick(t.infoBtn1,t._OnClick),t._AddClick(t.infoBtn2,t._OnClick),t._AddClick(t.infoBtn3,t._OnClick),t._AddClick(t.monthCard,t._OnClick),t._AddClick(t.vipCard,t._OnClick),t.AddClick(t.blacklist,t.setBlackList),t.AddClick(t.copyName,t.setCopyName),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="玩家信息",this.blacklist.textColor=Color.Green,this.blacklist.text="拉黑",this.blacklist.label.size=24,this.copyName.textColor=Color.Green,this.copyName.text="复制昵称",this.copyName.label.size=24,this.palyerId=e[0],GameGlobal.PlayerInfoModel.sendOtherId(this.palyerId),this.observe(MessageDef.PALYER_INFO,this.updateContent),this.observe(MessageDef.FRIEND_DATA_REFRESH,this.updateContent)},t.prototype.updateContent=function(e){if(GameGlobal.FriendModel.isFriend(this.palyerId)?this.infoBtn2.label="取消关注":this.infoBtn2.label="关注",GameGlobal.FriendModel.isBlacklist(this.palyerId)?this.blacklist.text="取消拉黑":this.blacklist.text="拉黑",e){if(this.palyerId==GameGlobal.GameLogic.actorModel.actorID?this.currentState="self":this.currentState="other","other"==this.currentState){for(var t=GameGlobal.TeacherController.teacherInfo.studentData,i=0,o=t;i<o.length;i++){var n=o[i];n.student==e.id&&(this.infoBtn3.visible=!1)}var a=GameGlobal.TeacherController.teacherInfo.teacherData;a.teacher==e.id&&(this.infoBtn3.visible=!1),GameGlobal.actorModel.level-e.level>=3?this.infoBtn3.label="收徒":this.infoBtn3.visible=!1}""!=e.partner?this.partnerTxt.text="伴侣: "+e.partner:this.partnerTxt.visible=!1,e.guildName?this.gangTxt.text="帮会: "+e.guildName:this.gangTxt.visible=!1,this.roleShowPanel.SetShowImage(e),this.playerAvatar.face.source=ResDataPath.GetHeadImgName(e.job,e.sex),e.headframe&&(this.playerAvatar.imgFrame.source=ResDataPath.GetHeadFrameImgName(e.headframe)),this.powerLabel.text=e.power,this.nickName.text="昵称: "+e.name,this.levelTxt.text="等级: "+e.level,this.sexTxt.text="性别: "+(0==e.sex?"男":"女"),this.userChatData=new Sproto.chat_data,this.userChatData.id=this.palyerId,this.userChatData.job=e.job,this.userChatData.sex=e.sex,this.userChatData.name=e.name,this.vipCard.filters=e.vip>0?null:Color.GetFilter(),this.monthCard.filters=GameGlobal.FuliModel.FuliData.month>0?null:Color.GetFilter()}},t.prototype._OnClick=function(e){SubRoles.ins().GetRoleData();switch(e.currentTarget){case this.infoBtn1:"开始聊天"==this.infoBtn1.label?ViewManager.ins().open(PlayerChatpanel,this.userChatData):(ViewManager.ins().open(PlayerChangeNamePanel,this.palyerId),ViewManager.ins().close(t));break;case this.infoBtn2:"关注"==this.infoBtn2.label?GameGlobal.FriendModel.sendAddFriend(this.palyerId):"取消关注"==this.infoBtn2.label?GameGlobal.FriendModel.sendDleFriend(this.palyerId):(ViewManager.ins().open(SystemSettingPanel,this.palyerId),ViewManager.ins().close(t));break;case this.infoBtn3:var i=GlobalConfig.ins().MasterBaseConfig.cost;i&&Checker.Datas(i)&&GameGlobal.TeacherManage.applyTeacher(this.palyerId);break;case this.vipCard:ViewManager.ins().open(VipMainPanel),ViewManager.ins().close(t);break;case this.monthCard:for(var o=0,n=FuliWin.WelfareIcon;o<n.length;o++){var a=n[o];if(a.cls==FuliMonthlyCardPanel){ViewManager.ins().open(FuliWin,a.type),ViewManager.ins().close(t);break}}}},t.prototype.setBlackList=function(e){"拉黑"==this.blacklist.text?(this.blacklist.text="取消拉黑",GameGlobal.FriendModel.sendAddBlacklist(this.palyerId)):(this.blacklist.text="拉黑",GameGlobal.FriendModel.sendRemoveBlacklist(this.palyerId))},t.prototype.setCopyName=function(e){CommonUtils.CopyToClipboard(this.name),GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_COPY_NAME,this.userChatData.name)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PlayerDetailsPanel.prototype,"PlayerDetailsPanel",["ICommonWindow"]);var SystemSettingPanel=function(e){function t(){var t=e.call(this)||this;t.skinName="SystemSettingSkin";new eui.RadioButtonGroup;return t.closeVoice.addEventListener(egret.Event.CHANGE,t.onChange,t),t.closeVoice0.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideWing.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideCH.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideTX.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideXW.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideFZ.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideTL.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideSH.addEventListener(egret.Event.CHANGE,t.onChange,t),t.hideOtherPaler.addEventListener(egret.Event.CHANGE,t.onChange,t),t.combat1.addEventListener(egret.Event.CHANGE,t.onChange,t),t.combat2.addEventListener(egret.Event.CHANGE,t.onChange,t),t}return __extends(t,e),t.IsQuick=function(){return FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2)},t.GetSpeed=function(){return FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD3)?2:FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2)?1.5:1},t.prototype.OnOpen=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.commonDialog.OnAdded(this),this.commonDialog.title="系统设置",this.closeVoice.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_SY),this.closeVoice0.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_YX),this.hideWing.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_CB),this.hideCH.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_CH),this.hideTX.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_TX),this.hideXW.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_XW),this.hideFZ.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_FZ),this.hideTL.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_TL),this.hideSH.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_SH),this.hideOtherPaler.selected=FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER),this.combat2.selected=t.GetSpeed()>1,this.combat1.selected=!this.combat2.selected},t.ShowOther=function(){GameGlobal.RaidMgr.mMapRaid.IsShowOther(!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER))},t.prototype.onChange=function(e){switch(e.target){case this.closeVoice:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_SY,this.closeVoice.selected),GameGlobal.SoundManager.SetBgOn(!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_SY));break;case this.closeVoice0:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_YX,this.closeVoice0.selected);break;case this.hideWing:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_CB,this.hideWing.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_CB);break;case this.hideCH:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_CH,this.hideCH.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_CH);break;case this.hideTX:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_TX,this.hideTX.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_TX);break;case this.hideXW:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_XW,this.hideXW.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_XW);break;case this.hideFZ:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_FZ,this.hideFZ.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_FZ);break;case this.hideTL:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_TL,this.hideTL.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_TL);break;case this.hideSH:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_SH,this.hideSH.selected),GameGlobal.RaidMgr.UpdateSetting(FuncOpenModel.SAVE_SYSTEM_SETTING_SH);break;case this.hideOtherPaler:FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER,this.hideOtherPaler.selected),t.ShowOther();break;case this.combat1:this.combat2.selected=!this.combat1.selected,FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2,this.combat2.selected),FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD3,!1);break;case this.combat2:this.combat1.selected=!this.combat2.selected,FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD2,this.combat2.selected),FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_ZDSD3,!1)}GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_CHANGE_SYSTEM_SETTING)},t.ChangeShowOther=function(e){FuncOpenModel.SetData(FuncOpenModel.SAVE_SYSTEM_SETTING_OTHER_PLAYER,e),t.ShowOther()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(SystemSettingPanel.prototype,"SystemSettingPanel",["ICommonWindow"]);var CatchPetModel=function(e){function t(){var t=e.call(this)||this;return t.monsterid=null,t.catchtime=null,t.regNetMsg(S2cProtocol.sc_pet_catch,t.CatchPet),t.regNetMsg(S2cProtocol.sc_pet_catch_result,t.CatchPetResult),t}return __extends(t,e),t.prototype.HasCatch=function(){return null!=GameGlobal.CatchPetModel.catchtime&&null!=GameGlobal.CatchPetModel.monsterid?!0:!1},t.prototype.ClearTime=function(){this.monsterid=null,this.catchtime=null},t.prototype.CatchPet=function(e){GameGlobal.Config.petBiographyConfig[e.monsterid]&&(this.monsterid=e.monsterid,this.catchtime=e.catchtime,GameGlobal.MessageCenter.dispatch(MessageDef.BZ_PET_INFO))},t.prototype.CatchPetResult=function(e){this.result=e.result;var t=GameGlobal.RaidMgr.mBattleRaid;if(t&&egret.is(t,"CatchPetRaid")){var i=new CatchPetFinishData;i.iswin=e.result,i.id=this.monsterid,t.SetFinishAction(i)}this.ClearTime(),GameGlobal.RaidMgr.BuZhuoPet()},t.prototype.SendPetCatch=function(){this.Rpc(C2sProtocol.cs_pet_catch)},t.prototype.OpenRaid=function(){return egret.is(GameGlobal.RaidMgr.mBattleRaid,"CatchPetRaid")},t.prototype.OnSocketClose=function(){this.ClearTime()},t}(BaseSystem);__reflect(CatchPetModel.prototype,"CatchPetModel");var PetModel=function(e){function t(){var t=e.call(this)||this;return t.MAX_ZIZHI_LEVEL=5,t.MAX_FEISHENG_LEVEL=10,t.MAX_LEVEL=100,t.mPetList={},t.mBattleList=[],t.mRedPoint=new PetModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_pet_init,t._DoInitInfo),t}return __extends(t,e),t.prototype.GetShowId=function(){for(var e=0,t=this.mBattleList;e<t.length;e++){var i=t[e];if(i)return i}return 0},t.prototype.Init=function(){for(var e in GameGlobal.Config.petBiographyConfig){var t=new PetInfo;t.mPetId=parseInt(e),this.mPetList[e]=t;var i=GameGlobal.Config.petBiographyConfig[e];GameGlobal.UserBag.AddListenerItem(i.material.id,MessageDef.BAG_PET_ACT_ITEM)}for(var e in GameGlobal.Config.petGiftproConfig){var i=GameGlobal.Config.petGiftproConfig[e];this.MAX_ZIZHI_LEVEL=CommonUtils.getObjectLength(i);break}for(var e in GameGlobal.Config.petLvproConfig){var i=GameGlobal.Config.petLvproConfig[e];this.MAX_LEVEL=CommonUtils.getObjectLength(i),GameGlobal.UserBag.AddListenerItem(i[0].cost[1].id,MessageDef.BAG_PET_LEVEL_ITEM);break}for(var o=0,n=GameGlobal.Config.petbaseConfig.freshitemid;o<n.length;o++){var i=n[o];GameGlobal.UserBag.AddListenerItem(i.itemId,MessageDef.BAG_PET_SKILL_ITEM)}},t.prototype._DoInitInfo=function(e){for(var t=0,i=e.list;t<i.length;t++){var o=i[t],n=this.mPetList[o.petid];n||(n=new PetInfo,n.mPetId=o.petid,this.mPetList[n.mPetId]=n),n.UpdateInfo(o)}this.mBattleList=e.outbound||[],GameGlobal.MessageCenter.dispatch(MessageDef.PET_INIT_INFO),this.GetShowId()&&this.OnActive()},t.prototype.OnActive=function(){GameGlobal.RaidMgr.UpdateRolePet(this.GetShowId())},t.prototype.SetShowId=function(e){var t=[],i={type:1,value:e};t.push(i),GameGlobal.Chat.chatShareInfo(1,t)},t.prototype.SendActive=function(e){var t=this,i=new Sproto.cs_pet_active_request;i.id=e,this.Rpc(C2sProtocol.cs_pet_active,i,function(i){if(i.ret){if(t.mPetList[e]){t.mPetList[e].Active();for(var o=!1,n=0,a=t.mBattleList;n<a.length;n++){var r=a[n];if(r){o=!0;break}}o||(t.SendBattle(e,0),GameGlobal.RaidMgr.UpdateRolePet(e))}else console.error("not active pet => petid "+e);GameGlobal.MessageCenter.dispatch(MessageDef.PET_ACTIVE),GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO)}},this)},t.prototype.SendDress=function(e){},t.prototype.SendBattle=function(e,t){var i=CommonUtils.copyDataHandler(this.mBattleList);i[t]=e;var o=new Sproto.cs_pet_outbound_request;o.first=i[0]||0,o.second=i[1]||0,o.third=i[2]||0,o.four=i[3]||0,CommonUtils.ArrayEqual(this.mBattleList,i)||(this.mBattleList=i,this.Rpc(C2sProtocol.cs_pet_outbound,o),GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.PET_BATTLE),GameGlobal.RaidMgr.UpdateRolePet(this.GetShowId()))},t.prototype.SendUnBattle=function(e){for(var t=this.mBattleList,i=0;i<t.length;i++){var o=t[i];if(o==e){this.SendBattle(0,i);break}}},t.prototype.SendUpZizhi=function(e){var t=this,i=new Sproto.cs_pet_addgift_request;i.id=e,this.Rpc(C2sProtocol.cs_pet_addgift,i,function(i){var o=t.mPetList[e];o?i.ret&&(o.mZizhiExp=i.exp,o.mZizhiLevel=i.level,GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_ZIZHI),GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO)):console.error("not upzizhi petid => "+e)},this)},t.prototype.SendUpLevel=function(e,t){var i=this,o=new Sproto.cs_pet_addexp_request;o.id=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_pet_addexp,o,function(t){var o=i.mPetList[e];o?t.ret&&(o.mExp=t.exp,o.mLevel=t.level,GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_EXP),GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO)):console.error("not upzizhi petid => "+e)},this)},t.prototype.SendFlyLevel=function(e,t){var i=this,o=new Sproto.cs_pet_fly_addexp_request;o.id=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_pet_fly_addexp,o,function(t){var o=i.mPetList[e];o?t.ret?(o.mFeisLevel=t.flylevel,o.mFeisExp=t.flyexp,GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_FLYINFO),GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_FLY)):UserTips.ErrorTip("飞升失败"):console.error("not upzizhi petid => "+e)},this)},t.prototype.SendRename=function(e,t){var i=this,o=new Sproto.cs_pet_rename_request;o.id=e,o.name=t,this.Rpc(C2sProtocol.cs_pet_rename,o,function(t){var o=i.mPetList[e];o?t.ret?(o.mName=t.name,GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO)):GameGlobal.UserTips.showTips("输入的名称含有敏感字"):console.error("not SendRename petid => "+e)},this)},t.prototype.SendXilian=function(e,t,i,o){var n=this,a=new Sproto.cs_pet_refreshskill_request;a.id=e,a.locklist=t,a.type=i,a.autoBuy=o?2:0,this.Rpc(C2sProtocol.cs_pet_refreshskill,a,function(t){if(t.ret){var i=n.mPetList[e];i&&(i.mXilian=t.xilian,i.mXilianSkill=t.xilianSkills,GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO))}},this)},t.prototype.SendSetXilian=function(e){var t=this,i=new Sproto.cs_pet_setskillin_request;i.id=e,this.Rpc(C2sProtocol.cs_pet_setskillin,i,function(i){if(i.ret){var o=t.mPetList[e];o&&(o.mBuffSkill=i.buffs,o.mXilianSkill=[],GameGlobal.MessageCenter.dispatch(MessageDef.PET_UPATE_INFO))}},this)},t.prototype.HasPet=function(e){return e&&this.mPetList[e]&&this.mPetList[e].mLevel?!0:!1},t.prototype.HasBattle=function(e){return-1!=this.mBattleList.indexOf(e)},t.prototype.GetBattlePos=function(e){return this.mBattleList.indexOf(e)},t.prototype.GetPetInfo=function(e){return this.mPetList[e]},t.prototype.GetLevel=function(e){return e?this.mPetList[e].mLevel||0:0},t.prototype.GetBiggestLevel=function(){var e=0;for(var t in this.mPetList)this.mPetList[t].mLevel>e&&(e=this.mPetList[t].mLevel);return e},t.prototype.GetAllPower=function(){var e=0;for(var t in this.mPetList)if(this.HasPet(parseInt(t))){var i=this.mPetList[t];e+=i.GetPower()}return e},t.prototype.GetAllAttrsByType=function(e){var t=[];for(var i in this.mPetList){var o=this.mPetList[i];if(o.mLevel){var n=o[e].call(o);if(n)for(var a=0;a<n.length;a++){var r=n[a];t[a]?t[a].value+=r.value:t[a]={type:r.type,value:r.value}}}}return t},t.prototype.GetAllAttrs=function(){var e=this.GetAllAttrsByType("GetAttrs");return 0==e.length?PetConst.GetBaseAttrs():e},t.prototype.GetAllZizhiAttrs=function(){return this.GetAllAttrsByType("GetZizhiAttrs")},t.prototype.GetAllFeisAttrs=function(){var e=this.GetAllAttrsByType("GetFeisAttrs");return 0==e.length?PetConst.GetFeisBaseAttrs():e},t.prototype.GetActiveCount=function(){var e=0;for(var t in this.mPetList){var i=this.mPetList[t];i.mLevel&&++e}return e},t.prototype.IsRedPointPet=function(e){return this.mRedPoint.IsRedAct(e)?!0:this.mRedPoint.IsRedZizhi(e)?!0:!1},t.SKILL_COUNT=6,t}(BaseSystem);__reflect(PetModel.prototype,"PetModel");var PetModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.m_ActiveList={},i.m_LevelList={},i.m_ZizhiList={},i.m_Model=t,i}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e[t.INDEX_LEVEL]=this.GetIndexLevel,e[t.INDEX_SKILL]=this.GetIndexSkill,e[t.INDEX_BATTLE]=this.GetIndexBattle,e[t.INDEX_ZIZHI]=this.GetIndexZizhi,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.BAG_PET_ACT_ITEM,MessageDef.PET_ACTIVE,MessageDef.PET_INIT_INFO,MessageDef.BAG_PET_LEVEL_ITEM,MessageDef.BAG_PET_SKILL_ITEM,MessageDef.PET_BATTLE]},t.prototype.OnChange=function(e){e==t.INDEX_ACT?GameGlobal.MessageCenter.dispatch(MessageDef.RP_BAG_PET_ACT_ITEM):GameGlobal.MessageCenter.dispatch(MessageDef.RP_PET)},t.prototype.GetIndexLevel=function(){this.m_LevelList={};var e=this.m_Model.mPetList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mLevel<this.m_Model.MAX_LEVEL){var o=i.GetLevelConfig(),n=Math.floor(o.proexp/o.exp);n-=i.mExp;for(var a=!0,r=0,s=o.cost;r<s.length;r++){var l=s[r];if(!Checker.Data({type:l.type,id:l.id,count:l.count*n},!1)){a=!1;break}}a&&(this.m_LevelList[i.mPetId]=!0)}}for(var t in this.m_LevelList)return!0;return!1},t.prototype.GetIndexZizhi=function(){this.m_ZizhiList={};
var e=this.m_Model.mPetList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mZizhiLevel<this.m_Model.MAX_ZIZHI_LEVEL){for(var o=GameGlobal.Config.petGiftproConfig[i.mPetId][(i.mZizhiLevel||1)-1],n=1,a=!0,r=0,s=o.cost;r<s.length;r++){var l=s[r];if(!Checker.Data({type:l.type,id:l.id,count:l.count*n},!1)){a=!1;break}}a&&(this.m_ZizhiList[i.mPetId]=!0)}}for(var t in this.m_ZizhiList)return!0;return!1},t.prototype.GetIndexBattle=function(){for(var e=0,t=0,i=this.m_Model.mBattleList;t<i.length;t++){var o=i[t];o||e++}if(!e)return!1;var n=this.m_Model.mPetList;for(var a in n){var r=n[a];if(r.mLevel>0&&!this.m_Model.HasBattle(r.mPetId))return!0}return!1},t.prototype.GetIndexSkill=function(){for(var e=0,t=GameGlobal.Config.petbaseConfig.freshitemid;e<t.length;e++){var i=t[e];if(GameGlobal.UserBag.GetCount(i.itemId)>0)return!0}return!1},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.m_ActiveList)if(e)return!0;return!1},t.prototype.DoActive=function(){this.m_ActiveList={};var e=GameGlobal.Config.petBiographyConfig;for(var t in e)if(!this.m_Model.HasPet(parseInt(t))){var i=e[t].material;GameGlobal.UserBag.GetCount(i.id)>=i.count&&(this.m_ActiveList[t]=!0)}},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.m_ActiveList[e]},t.prototype.IsRedZizhi=function(e){return this.m_ZizhiList[e]?!0:!1},t.prototype.IsRedLevel=function(e){return this.m_LevelList[e]?!0:!1},t.INDEX_ACT=0,t.INDEX_LEVEL=1,t.INDEX_SKILL=2,t.INDEX_BATTLE=3,t.INDEX_ZIZHI=4,t}(IRedPoint);__reflect(PetModelRedPoint.prototype,"PetModelRedPoint");var PetShouhModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_PET_SHOUH)||this;return t.mMsgDefUpdateExp=MessageDef.PET_SHOUH_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.PET_SHOUH_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.PET_SHOUH_UPDATE,t.mMsgDefInit=MessageDef.PET_SHOUH_INIT,t.mMsgDefUpdateEquip=MessageDef.PET_SHOUH_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_PET_SHOUH_EQUIP_UP,t.mRedPoint=new PetShohRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.SoulBaseConfig,this.LvproConfig=GameGlobal.Config.SoulLvproConfig,this.SkillConfig=GameGlobal.Config.SoulSkillConfig,this.AttrsConfig=GameGlobal.Config.SoulAttrsConfig,this.ProgressConfig=GameGlobal.Config.SoulProgressConfig,this.SkinConfig=GameGlobal.Config.SoulSkinConfig,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this),GameGlobal.RaidMgr.UpdateRolePetShouh(this.mDressId)},t}(UserTemplate);__reflect(PetShouhModel.prototype,"PetShouhModel");var PetShohRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.PET_SH,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(PetShohRedPoint.prototype,"PetShohRedPoint");var PetTonglModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_PET_TONGL)||this;return t.mMsgDefUpdateExp=MessageDef.PET_TONGL_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.PET_TONGL_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.PET_TONGL_UPDATE,t.mMsgDefInit=MessageDef.PET_TONGL_INIT,t.mMsgDefUpdateEquip=MessageDef.PET_TONGL_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_PET_TONGL_EQUIP_UP,t.mRedPoint=new PetTonglRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.PsychicBaseConfig,this.LvproConfig=GameGlobal.Config.PsychicLvproConfig,this.SkillConfig=GameGlobal.Config.PsychicSkillConfig,this.AttrsConfig=GameGlobal.Config.PsychicAttrsConfig,this.ProgressConfig=GameGlobal.Config.PsychicProgressConfig,this.SkinConfig=GameGlobal.Config.PsychicSkinConfig,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this),GameGlobal.RaidMgr.UpdateRolePetTongl(this.mDressId)},t}(UserTemplate);__reflect(PetTonglModel.prototype,"PetTonglModel");var PetTonglRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.PET_TL,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(PetTonglRedPoint.prototype,"PetTonglRedPoint");var PetConst=function(){function e(){}return e.GetSkillIcon=function(e){var t=GameGlobal.Config.SkillsConfig[e];return t?t[GameGlobal.Config.SkillsConfig_keys.icon]:""},e.GetSkillDesc=function(e){var t=GameGlobal.Config.SkillsConfig[e];return t?t[GameGlobal.Config.SkillsConfig_keys.desc]:""},e.GetSkillName=function(e){var t=GameGlobal.Config.SkillsConfig[e];return t?t[GameGlobal.Config.SkillsConfig_keys.skinName]:""},e.GetSkillQuality=function(e){var t=GameGlobal.Config.SkillsConfig[e];return t?t[GameGlobal.Config.SkillsConfig_keys.quality]:1},e.GetPassSkillIcon=function(e){var t=GameGlobal.Config.EffectsConfig[e];return t?t[GameGlobal.Config.EffectsConfig_keys.icon]:""},e.GetPassSkillQuality=function(e){var t=GameGlobal.Config.EffectsConfig[e];return t?t[GameGlobal.Config.EffectsConfig_keys.quality]:1},e.GetPassSkillDesc=function(e){var t=GameGlobal.Config.EffectsConfig[e];return t?t[GameGlobal.Config.EffectsConfig_keys.desc]:""},e.GetPassSkillName=function(e){var t=GameGlobal.Config.EffectsConfig[e];return t?t[GameGlobal.Config.EffectsConfig_keys.skinName]:""},e.GetSkin=function(e){return AppearanceConfig.GetUIPath(e)},e.GetPower=function(e){return ItemConfig.CalcAttrScoreValue(GameGlobal.Config.petBiographyConfig[e].attrs)},e.GetHeadIcon=function(e){return this.GetHeadPath(GameGlobal.Config.petBiographyConfig[e].icon)},e.GetHeadPath=function(e){return"resource/assets/image/head/pet/"+e+".png"},e.SetName=function(t,i){var o=GameGlobal.Config.petBiographyConfig[i.mPetId];o&&(t.rarityImg.source=e.RARITY_IMG[o.rarity],t.nameLabel.text=i.mName,t.nameLabel.textColor=ItemBase.GetColorByQuality(o.quality))},e.SetNameById=function(t,i){var o=GameGlobal.Config.petBiographyConfig[i];t.rarityImg.source=e.RARITY_IMG[o.rarity],t.nameLabel.text=o.name,t.nameLabel.textColor=ItemBase.GetColorByQuality(o.quality)},e.GetDefaultAttrs=function(e,t,i){if(!e)return[];var o=function(e,i){for(var n in e){var a=i-1,r=e[n];if(0==a){for(var s=CommonUtils.copyDataHandler(r[t]),l=0,c=s;l<c.length;l++){var u=c[l];u.value=0}return s}return o(r,a)}};return o(e,i)},e.GetZizhiBaseAttrs=function(){return this.ZIZH_BASE_ATTR||(this.ZIZH_BASE_ATTR=e.GetDefaultAttrs(GameGlobal.Config.petGiftproConfig,"attrs",2)),this.ZIZH_BASE_ATTR},e.GetFeisBaseAttrs=function(){return this.FEIS_BASE_ATTR||(this.FEIS_BASE_ATTR=e.GetDefaultAttrs(GameGlobal.Config.petFlyproConfig,"attrs",2)),this.FEIS_BASE_ATTR},e.GetBaseAttrs=function(){return this.BASE_ATTR||(this.BASE_ATTR=e.GetDefaultAttrs(GameGlobal.Config.petLvproConfig,"attrs",2)),this.BASE_ATTR},e.XUXING_IMG=(_a={},_a[1]="ui_bm_jin",_a[2]="ui_bm_mu",_a[3]="ui_bm_shui",_a[4]="ui_bm_huo",_a[5]="ui_bm_tu",_a),e.RARITY_IMG=(_b={},_b[1]="ui_cw_bm_r",_b[2]="ui_cw_bm_sr",_b[3]="ui_cw_bm_ssr",_b[4]="ui_cw_bm_sssr",_b[5]="ui_cw_bm_ssssr",_b[6]="ui_cw_bm_shen",_b),e.QUALITY_SKILL_BG=(_c={},_c[0]="ui_cw_bm_lv",_c[1]="ui_cw_bm_lv",_c[2]="ui_cw_bm_lan",_c[3]="ui_cw_bm_zi",_c[4]="ui_cw_bm_cheng",_c[5]="ui_cw_bm_hong",_c[6]="ui_cw_bm_qicai",_c),e}();__reflect(PetConst.prototype,"PetConst");var _a,_b,_c,PetInfo=function(){function e(){this.mZizhiExp=0,this.mZizhiLevel=0,this.mFeisLevel=0,this.mFeisExp=0,this.mPower=0,this.mBuffSkill=[],this.mXilian=0,this.mXilianSkill=[]}return e.prototype.UpdateInfo=function(e){this.mExp=e.exp,this.mLevel=e.level,null!=e.flydata&&(this.mFeisLevel=e.flydata.level,this.mFeisExp=e.flydata.exp),this.mName=e.name||GameGlobal.Config.petBiographyConfig[this.mPetId].name,this.mBuffSkill=e.buffs||[],this.mZizhiExp=e.giftexp,this.mZizhiLevel=e.giftlv,this.mXilian=e.xilian,this.mXilianSkill=e.xilianSkills||[]},e.prototype.Active=function(){this.mLevel=1,this.mZizhiLevel=1;var e=GameGlobal.Config.petBiographyConfig[this.mPetId],t=e.buffskill;this.mName=e.name,this.mBuffSkill=[];for(var i=0,o=t;i<o.length;i++){var n=o[i];this.mBuffSkill.push(n.id)}},e.prototype.GetXilianStar=function(){for(var e=GameGlobal.Config.petbaseConfig.polishStar,t=e.length,i=this.mXilian,o=0;o<e.length;o++){var n=e[o];if(n>=i){t=o+1;break}}return t},e.prototype.GetSkin=function(){return PetConst.GetSkin(this.mPetId)},e.prototype.GetSkillPower=function(){var e=0,t=GameGlobal.Config.petBiographyConfig[this.mPetId].skill[0];GameGlobal.Config.SkillsConfig[t]&&(e+=GameGlobal.Config.SkillsConfig[t][GameGlobal.Config.SkillsConfig_keys.skillpower]||0);for(var i=GameGlobal.Config.EffectsConfig,o=0,n=this.mBuffSkill;o<n.length;o++){var a=n[o];i[a]&&(e+=i[a][GameGlobal.Config.EffectsConfig_keys.skillpower]||0)}return e},e.prototype.GetPower=function(){var e=0;return e+=ItemConfig.CalcAttrScoreValue(this.GetShowAttrs()),e+=ItemConfig.CalcAttrScoreValue(this.GetShowZizhiAttrs()),e+=ItemConfig.CalcAttrScoreValue(this.GetShowFeisAttrs())},e.prototype.GetZizhiPower=function(){var e=this.GetZizhiAttrs();return e?ItemConfig.CalcAttrScoreValue(e):0},e.prototype.GetFeishengPower=function(){var e=this.GetFeisAttrs();return e?ItemConfig.CalcAttrScoreValue(e):0},e.prototype.GetAttrs=function(){var e=this.GetLevelConfig();return e?AttributeData.AttrAddition(GameGlobal.Config.petBiographyConfig[this.mPetId].attrs,e.attrs):[]},e.prototype.GetShowAttrs=function(){var e=this.GetAttrs();return e?e:PetConst.GetBaseAttrs()},e.prototype.GetZizhiAttrs=function(){var e=GameGlobal.Config.petGiftproConfig[this.mPetId][0],t=new Array;e.attrs.forEach(function(e){var i={type:e.type,value:0};t.push(i)});for(var i=function(e,t){for(var i=0,o=e;i<o.length;i++){var n=o[i];if(n.type==t)return n.value}return 0},o=this.mZizhiLevel,n=this.mZizhiExp,a=function(){var e=GameGlobal.Config.petGiftproConfig[r.mPetId][s-1],a=e.attrs,l=s==o?n:e.proexp/e.exp;t.forEach(function(e){e.value=e.value+i(a,e.type)*l})},r=this,s=1;o>=s;++s)a();return t},e.prototype.GetShowZizhiAttrs=function(){var e=this.GetZizhiAttrs();return e?e:PetConst.GetZizhiBaseAttrs()},e.prototype.GetShowFeisAttrs=function(){var e=this.GetFeisAttrs();return e?e:PetConst.GetFeisBaseAttrs()},e.prototype.GetFeisAttrs=function(){var e=GameGlobal.Config.petFlyproConfig[this.mPetId];if(e){if(e[this.mFeisLevel-1]){for(var t=[],i=0;i<=this.mFeisLevel-1;i++)t=AttributeData.AttrAddition(t,e[this.mFeisLevel-1].attrs);return AttributeData.AttrAddition(t,e[this.mFeisLevel-1].attrs)}return[]}return[]},e.prototype.GetLevelConfig=function(){var e=GameGlobal.Config.petBiographyConfig[this.mPetId].rarity;return GameGlobal.Config.petLvproConfig[e][this.mLevel-1]},e.prototype.GetSkillId=function(){var e=GameGlobal.Config.petBiographyConfig[this.mPetId];return e?e.skill[0]:0},e}();__reflect(PetInfo.prototype,"PetInfo");var CatchPetResultFailWin=function(e){function t(){var t=e.call(this)||this;return t.m_BtnStr="",t.m_EndTime=5,t.skinName="CatchPetResultFailSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.AddClick(this.closeBtn,this.OnClick)},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.SetBtnLabel("退出"),this.SetCloseFunc(t[1]),e.prototype.OnOpen.call(this),this.m_EndTime=5,this.updateCloseBtnLabel(),this.AddTimer(1e3,6,this.updateCloseBtnLabel)},t.prototype.SetCloseFunc=function(e){this.closeFunc=e},t.prototype.SetBtnLabel=function(e){this.m_BtnStr=e},t.prototype.OnClose=function(){TimerManager.ins().remove(this.updateCloseBtnLabel,this),this.closeFunc&&(this.closeFunc(),this.closeFunc=null)},t.prototype.updateCloseBtnLabel=function(){this.m_EndTime--,this.m_EndTime<=0&&ViewManager.ins().close(this),this.closeBtn.label=this.m_BtnStr+"("+this.m_EndTime+"s)"},t.prototype.OnClick=function(e){switch(e.target){case this.closeBtn:this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(CatchPetResultFailWin.prototype,"CatchPetResultFailWin");var CatchPetResultWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="CatchPetResultWinSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.SetBtnLabel("确定"),this.SetTitleLabel("捕捉成功"),this.SetCloseFunc(t[1]),e.prototype.OnOpen.call(this);var o=t[2];this.petShowPanel.SetBody(PetConst.GetSkin(t[0])),this.text.text="恭喜获得"+GameGlobal.Config.petBiographyConfig[t[0]].name,null!=o?0==o?(this.bmStar0.visible=!1,this.bmStar1.visible=!1,this.bmStar2.visible=!1):1==o?(this.bmStar0.visible=!1,this.bmStar2.visible=!1):2==o&&(this.bmStar1.visible=!1,this.bmStar0.x=233,this.bmStar2.x=400):(this.bmStar0.visible=!1,this.bmStar1.visible=!1,this.bmStar2.visible=!1),this.mc=this.mc||new MovieClip,this.mc.loadFile(ResDataPath.GetUIEffePath2("eff_ui_hht_001"),!0,-1),this.group.addChild(this.mc),this.mc.scaleX=2.3,this.mc.scaleY=2.3},t}(ResultBasePanel);__reflect(CatchPetResultWin.prototype,"CatchPetResultWin");var PetAllAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetAllAttrSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.levelAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.PetModel.GetAllAttrs()),this.zizhiAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.PetModel.GetAllZizhiAttrs()),this.feisAttr.textFlow=AttributeData.GetAttrTabString(GameGlobal.PetModel.GetAllFeisAttrs()),this.powerLabel.text=GameGlobal.PetModel.GetAllPower(),this.showPanel.SetBody(PetConst.GetSkin(GameGlobal.PetModel.GetShowId()))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetAllAttrPanel.prototype,"PetAllAttrPanel");var PetAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetAttrSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this);var i=e[0],o=GameGlobal.PetModel.GetPetInfo(i);this.levelAttr.textFlow=AttributeData.GetAttrTabString(o.GetShowAttrs()),this.zizhiAttr.textFlow=AttributeData.GetAttrTabString(o.GetShowZizhiAttrs()),this.feisAttr.textFlow=AttributeData.GetAttrTabString(o.GetShowFeisAttrs()),this.powerLabel.text=o.GetPower(),this.lbLev.text=o.mLevel+"\n级",PetConst.SetName(this.lbName,o);var n=GameGlobal.Config.petBiographyConfig[i];this.wuxingImg.source=PetConst.XUXING_IMG[n.fiveele],this.showPanel.SetBody(PetConst.GetSkin(i))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetAttrPanel.prototype,"PetAttrPanel");var PetBattlePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetBattleSkin",t._AddClick(t.btn1,t._OnClick),t._AddClick(t.btn2,t._OnClick),t._AddClick(t.btn3,t._OnClick),t._AddClick(t.btn4,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_SelPetId=e[0],this.commonDialog.OnAdded(this),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){var t=0;switch(e.currentTarget){case this.btn1:t=0;break;case this.btn2:t=1;break;case this.btn3:t=2;break;case this.btn4:t=3}GameGlobal.PetModel.SendBattle(this.m_SelPetId,t),this.CloseSelf()},t.prototype.UpdateContent=function(){for(var e=GameGlobal.PetModel,t=0;4>t;t++){var i=this["head"+(t+1)],o=e.mBattleList[t];o?(i.visible=!0,PetHeadItem.SetContentByInfo(i,e.GetPetInfo(o))):i.visible=!1}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetBattlePanel.prototype,"PetBattlePanel");var PetChangeNamePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetRenameSkin",t._AddClick(t.btnRename,t._OnClick),t._AddClick(t.btnCancel,t._OnClick),UIHelper.SetInputMaxChar(t.input,12),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(e[1],this.upDataGangName),this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title=e[0],this.input.text=e[2]||"",this.callFun=e[3]},t.prototype.OnClose=function(){this.removeEvents(),this.removeObserve(),this.commonDialog.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRename:var t=this.input.text;""==t?UserTips.ins().showTips("宠物名字不可为空"):t==GameGlobal.actorModel.name?UserTips.ins().showTips("不能与原名相同"):this.callFun(this.input.text);break;case this.btnCancel:ViewManager.ins().close(this)}},t.prototype.upDataGangName=function(){UserTips.ins().showTips("修改名字成功"),ViewManager.ins().close(this)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetChangeNamePanel.prototype,"PetChangeNamePanel");var PetFeishengPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetFeishengSkin",t._AddClick(t.btnAdd,t._OnClick),t._AddClick(t.btnCulture,t._OnClick),t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动飞升"},200),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_PetId=e[0],this.UpdateContent(),this.observe(MessageDef.PET_UPATE_FLY,this.UpdateZizhi),this.observe(MessageDef.PET_UPATE_FLYINFO,this.UpdateContent),this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateZizhi=function(){this.mRoleAutoSendData.Continue()},t.prototype.UpdateContent=function(){var e=GameGlobal.PetModel,t=this.m_PetInfo=e.GetPetInfo(this.m_PetId);this.powerLabel.text=t.GetFeishengPower(),PetConst.SetName(this.lbName,t);var i=t.mFeisLevel,o=GameGlobal.Config.petFlyproConfig[this.m_PetId][i];this.wuxingImg.source=PetConst.XUXING_IMG[GameGlobal.Config.petBiographyConfig[this.m_PetId].fiveele];for(var n=0;n<this.starGroup.numChildren;n++){var a=this.starGroup.getChildAt(n);a.source=i>n?"ui_bm_jsstar04":"ui_bm_jsstar03"}var r=t.GetShowFeisAttrs();if(this.attrLabel.textFlow=AttributeData.GetAttrTabString(r),i>=e.MAX_FEISHENG_LEVEL)this.currentState="full";else{this.currentState="normal",this.bar.maximum=o.proexp,this.bar.value=t.mFeisExp*o.exp,this.needItemView.SetItemId(o.cost[1].id,o.cost[1].count);var s=this.consumeLabel,l=o.cost[0];if(!l)return;s.consumeItemId=l.id,0==l.type?(s.overLengthFlag=!0,s.curValue=GameGlobal.actorModel.gold,s.consumeValue=l.count):(s.overLengthFlag=!1,s.curValue=GameGlobal.UserBag.GetCount(l.id),s.consumeValue=l.count)}this.showPanel.SetBody(t.GetSkin())},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnAdd:this.SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle()}},t.prototype.SendUp=function(){var e=GameGlobal.PetModel,t=GameGlobal.Config.petFlyproConfig[this.m_PetId][this.m_PetInfo.mFeisLevel];return t?Checker.Datas(t.cost,!1)?(e.SendFlyLevel(this.m_PetId,0),!0):(Checker.Data(t.cost[1],!1)?UserWarn.ins().BuyGoodsWarn(t.cost[0].id):UserWarn.ins().BuyGoodsWarn(t.cost[1].id),!1):!1},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(PetFeishengPanel.prototype,"PetFeishengPanel");var PetGodQualityPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.skillIcon,this._OnClick),this._AddClick(this.getwayLabel,this._OnClick),this.skillGroup.itemRenderer=PetSkillItem,this._AddItemClick(this.skillGroup,this._OnItemClick),this._AddItemClick(this.petList,this._OnItemClick),this.getwayLabel.label.stroke=0,this.getwayLabel.textColor=Color.l_green_1,this.mListLRBtnCtrl=new ListLRBtnCtrl(this.petList,this.leftBtn,this.rightBtn,112);var e=[],t=CommonUtils.GetArray(GameGlobal.Config.petBiographyConfig,"id");for(var i in t)1==t[i].picshow&&(t[i].gray=!0,e.push(t[i]));SortTools.sortMap(e,"id"),this.petList.itemRenderer=GodPetHeadItem,this.petList.dataProvider=new eui.ArrayCollection(e),this.petList.selectedIndex=0,this.mListLRBtnCtrl.OnRefresh()},t.prototype.UpdateContent=function(){var e=(GameGlobal.PetModel,this.petList.selectedItem),t=GameGlobal.Config.HandBookConfig;for(var i in t)t[i].id==this.petList.selectedItem.pictype&&(this.getwayLabel.text=t[i].name);this.mPetId=e.id,this.img01.source=PetConst.XUXING_IMG[e.fiveele];var o=[];for(var i in e.buffskill)o.push(e.buffskill[i].id);this.skillGroup.dataProvider=new eui.ArrayCollection(o);var n=new PetInfo;n.mPetId=e.id,n.mName=e.name,PetConst.SetName(this.lbName,n),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrs),this.petShowPanel.SetBody(PetConst.GetSkin(this.mPetId)),this.skillDesc.text=PetConst.GetSkillDesc(e.skill[0]),PetSkillIconItem.SetContent(this.skillIcon,e.skill[0],0),this.attr0Txt.text=AttributeData.getAttStr(e.attrs,0,0,":",!1,"#ffffff","            ")},t.prototype._OnItemClick=function(e){if(e.target==this.petList)this.UpdateContent();else{var t=this.skillGroup.selectedItem;if(!t)return;ViewManager.ins().open(PetSkillTipPanel,2,t)}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.skillIcon:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.PetModel.GetPetInfo(this.mPetId).GetSkillId());break;case this.getwayLabel:var t=GameGlobal.Config.HandBookConfig;for(var i in t)if(t[i].id==this.petList.selectedItem.pictype){var o=void 0;if(t[i].hasOwnProperty("gainWay")&&(o=t[i].gainWay[0]),!o)return void GameGlobal.UserTips.showTips(t[i].name);ViewManager.ins().Guide(o[1][0],o[1][1]),ViewManager.ins().close(PetInfoPanel)}}},t.NAME="神宠",t}(BaseView);__reflect(PetGodQualityPanel.prototype,"PetGodQualityPanel",["ICommonWindowTitle"]);var GodPetHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.lbName.text=this.data.name,this.lbName.textColor=ItemBase.GetColorByQuality(this.data.quality),this.item.SetQuality(this.data.quality),this.item.setItemImg(PetConst.GetHeadIcon(this.data.id)),this.lbLev.visible=!1,this.imgShen.visible=GameGlobal.Config.petBiographyConfig[this.data.id].picshow},t}(eui.ItemRenderer);__reflect(GodPetHeadItem.prototype,"GodPetHeadItem");var PetInactiveView=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetInactiveSkin",t._AddClick(t.getwayLabel,t._OnClick),t._AddClick(t.btnSC,t._OnClick),t._AddClick(t.btnYuanfen,t._OnClick),t._AddClick(t.actBtn,t._OnClick),t.skillList.itemRenderer=PetSkillIconItem,t._AddItemClick(t.skillList,t._OnItemClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.btnSC.visible=GameGlobal.actorModel.level>GameGlobal.Config.petbaseConfig.openlv,this.btnYuanfen.visible=Deblocking.Check(GameGlobal.Config.FateBaseConfig.openlv,!0),UIHelper.ShowRedPoint(this.btnYuanfen,GameGlobal.YuanfenModel.IsRedPoint())},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(e){this.m_PetId=e;var t=GameGlobal.PetModel,i=GameGlobal.Config.petBiographyConfig[e];PetConst.SetNameById(this.lbName,e),this.imgShen.visible=2==i.type,this.wuxingImg.source=PetConst.XUXING_IMG[i.fiveele],UIHelper.SetLabelText(this.lbPower,"宠物总战力：",t.GetAllPower()+""),UIHelper.SetLabelText(this.lbActive,"已激活：",t.GetActiveCount()+"");var o=i.material;this.needItemView.SetItemId(o.id,o.count),this.startGroup.visible=i.star>1,this.startLabel.text="洗练初始星级   "+i.star;var n=GameGlobal.UserBag.GetCount(o.id)>=o.count;this.actBtn.visible=n,(this.getwayLabel.visible=!n)&&this.getwayLabel.SetId(o.id),this.skillList.dataProvider=new eui.ArrayCollection(i.skill.concat(i.buffskill)),this.petShowPanel.SetBody(PetConst.GetSkin(e)),this.powerLabel.text=PetConst.GetPower(e)},t.prototype._OnItemClick=function(e){var t=e.itemIndex;0==t?ViewManager.ins().open(PetSkillTipPanel,0,e.itemRenderer.data):ViewManager.ins().open(PetSkillTipPanel,2,e.itemRenderer.data.id)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.getwayLabel:break;case this.actBtn:GameGlobal.PetModel.SendActive(this.m_PetId);break;case this.btnSC:ViewManager.ins().open(PetTuJianMainPanel);break;case this.btnYuanfen:ViewManager.ins().open(YuanfenMainWin)}},t}(BaseView);__reflect(PetInactiveView.prototype,"PetInactiveView");var PetSkillIconItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){0==this.itemIndex?t.SetContent(this,this.data,0):t.SetContent(this,this.data.id,2)},t.SetContent=function(e,t,i,o){void 0===o&&(o=!1);var n="";if(2==i)if(e.iconType&&(e.iconType.source="ui_tn_bm_bei"),o){PetConst.GetSkillIcon(t);e.iconImg.source=PetConst.GetSkillIcon(t);var a=PetConst.GetSkillQuality(t);e.iconBg.source=PetConst.QUALITY_SKILL_BG[a],e.skillName&&(e.skillName.text=PetConst.GetSkillName(t)+n,e.skillName.textColor=ItemBase.GetColorByQuality(a))}else{e.iconImg.source=PetConst.GetPassSkillIcon(t);var a=PetConst.GetPassSkillQuality(t);e.iconBg.source=PetConst.QUALITY_SKILL_BG[a],e.skillName&&(e.skillName.text=PetConst.GetPassSkillName(t)+n,e.skillName.textColor=ItemBase.GetColorByQuality(a))}else if(1==i){e.iconType&&(e.iconType.source="ui_tn_bm_bei");PetConst.GetSkillIcon(t);e.iconImg.source=PetConst.GetSkillIcon(t);var a=PetConst.GetSkillQuality(t);e.iconBg.source=PetConst.QUALITY_SKILL_BG[a],e.skillName&&(e.skillName.text=PetConst.GetSkillName(t)+n,e.skillName.textColor=ItemBase.GetColorByQuality(a))}else{e.iconType&&(e.iconType.source="ui_bm_zhu");PetConst.GetSkillIcon(t);e.iconImg.source=PetConst.GetSkillIcon(t);var a=PetConst.GetSkillQuality(t);e.iconBg.source=PetConst.QUALITY_SKILL_BG[a],e.skillName&&(e.skillName.text=PetConst.GetSkillName(t)+n,e.skillName.textColor=ItemBase.GetColorByQuality(a))}},t}(eui.ItemRenderer);__reflect(PetSkillIconItem.prototype,"PetSkillIconItem");var PetInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.bShowGetWay=!1,t.skinName="PetInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.skillIcon,this._OnClick),this._AddClick(this.getwayLabel,this._OnClick),this.skillGroup.itemRenderer=PetSkillItem,this._AddItemClick(this.skillGroup,this._OnItemClick),this.commonDialog.title="详细属性",this.getwayLabel.label.stroke=0,this.getwayLabel.textColor=Color.l_green_1},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.commonDialog.OnAdded(this),null!=e&&0!=e.length){this.petinfo=e[0],this.UpdateContent();var i=GameGlobal.Config.HandBookConfig;for(var o in i)i[o].id==this.petinfo.pictype&&(this.getwayLabel.text=i[o].name);e[1]&&(this.gGetWay.visible=!1)}},t.prototype.UpdateContent=function(){var e=(GameGlobal.PetModel,this.petinfo);this.mPetId=e.id,this.img.source=PetConst.XUXING_IMG[e.fiveele];var t=[];for(var i in e.buffskill)t.push(e.buffskill[i].id);this.skillGroup.dataProvider=new eui.ArrayCollection(t);var o=new PetInfo;o.mPetId=e.id,o.mName=e.name,PetConst.SetName(this.lbName,o),this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrs),this.petShowPanel.SetBody(PetConst.GetSkin(this.mPetId)),this.skillDesc.text=PetConst.GetSkillDesc(e.skill[0]),PetSkillIconItem.SetContent(this.skillIcon,e.skill[0],0),this.attr0Txt.text=AttributeData.getAttStr(e.attrs,0,0,":",!1,"#ffffff","            "),this.godImg.visible=GameGlobal.Config.petBiographyConfig[this.mPetId].picshow},t.prototype._OnItemClick=function(e){var t=this.skillGroup.selectedItem;t&&ViewManager.ins().open(PetSkillTipPanel,2,t)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.skillIcon:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.PetModel.GetPetInfo(this.mPetId).GetSkillId());break;case this.getwayLabel:var i=GameGlobal.Config.HandBookConfig;for(var o in i)if(i[o].id==this.petinfo.pictype){var n=void 0;if(i[o].hasOwnProperty("gainWay")&&(n=i[o].gainWay[0]),!n)return void GameGlobal.UserTips.showTips(i[o].name);ViewManager.ins().Guide(n[1][0],n[1][1]),ViewManager.ins().close(t)}}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetInfoPanel.prototype,"PetInfoPanel",["ICommonWindowTitle"]);var PetMainPanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.mPetList=[],t.skinName="PetMainSkin",t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,112),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.viewStack.tabChildren=[TabView.CreateTabViewData(PetUpLevelPanel,{skinName:"PetUpLevelSkin",mContext:this}),TabView.CreateTabViewData(PetSkillPanel,{skinName:"PetSkillSkin",mContext:this}),TabView.CreateTabViewData(PetTonglPanel,{mContext:this}),TabView.CreateTabViewData(PetShouhPanel,{mContext:this})],this.commonWindowBg.SetViewStack(this.viewStack),this.list.itemRenderer=PetHeadItem,this.ResortList(),this.list.selectedIndex=this.mSelectIndex,this._AddItemClick(this.list,this._OnItemTap)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_11)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.PET_UPATE_INFO,this.UpdateList),this.observe(MessageDef.PET_ACTIVE,this.UpdateActive),this.commonWindowBg.OnAdded(this,e.length?e[0]:0),this.CheckShowGroup(e.length?e[0]:0),this.mListLRBtnCtrl.OnRefresh(),this.UpdateContent(),this.observe(MessageDef.RP_BAG_PET_ACT_ITEM,this.UpdateRedPoint),this.observe(MessageDef.RP_PET,this.UpdateRedPoint),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateRedPoint),this.UpdateRedPoint(),this.observe(GameGlobal.PetTonglModel.GetItemRpUpdateMsg(),this.UpdateRedPointIndex2),this.observe(GameGlobal.PetTonglModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPointIndex2),this.UpdateRedPointIndex2(),this.observe(GameGlobal.PetShouhModel.GetItemRpUpdateMsg(),this.UpdateRedPointIndex3),this.observe(GameGlobal.PetShouhModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPointIndex3),this.UpdateRedPointIndex3(),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.updateJiJieBtnPng()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(2),[ActivityKaiFuJiJieType.pet_soul]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(3),[ActivityKaiFuJiJieType.pet_psychic])},t.prototype.UpdateRedPoint=function(){this.commonWindowBg.CheckTalRedPoint(0),this.commonWindowBg.CheckTalRedPoint(1),UIHelper.ListRefresh(this.list)},t.prototype.UpdateRedPointIndex2=function(){this.commonWindowBg.CheckTalRedPoint(2)},t.prototype.UpdateRedPointIndex3=function(){this.commonWindowBg.CheckTalRedPoint(3)},t.prototype.OnClose=function(){this._ClosePetView(),MainBottomPanel.CloseNav(this)},t.prototype._OnItemTap=function(e){var t=e.itemIndex;this.mSelectIndex=t,this.UpdateContent()},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t.prototype.ResortList=function(){this.mPetList=CommonUtils.GetArray(GameGlobal.Config.petBiographyConfig,"id");var e=GameGlobal.PetModel,t=function(t){var i=t.id;if(e.HasBattle(i))return e.GetBattlePos(i)-1e7;if(e.HasPet(i)){var o=GameGlobal.Config.petBiographyConfig[i].quality;return i-1e6-1e4*o}return e.mRedPoint.IsRedAct(i)?i-1e5:i};this.mPetList.sort(function(e,i){return t(e)-t(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mPetList);for(var i=[],o=0,n=this.mPetList;o<n.length;o++){var a=n[o];i.push(PetHeadItem.RedPoint(a.id))}this.mListLRBtnCtrl.SetRedPointList(i),this.mListLRBtnCtrl.OnRefresh()},t.prototype.UpdateActive=function(){this.ResortList(),this.UpdateContent()},t.prototype.UpdateContent=function(){this.commonWindowBg.GetCurViewStackElement().UpdateContent(),this._UpdatePetView()},t.prototype._UpdatePetView=function(){var e=this.mPetList[this.mSelectIndex].id;GameGlobal.PetModel.HasPet(e)?this._ClosePetView():(this.mPetInactiveView||(this.mPetInactiveView=new PetInactiveView),this.mPetInactiveView.parent||(this.group.addChild(this.mPetInactiveView),this.mPetInactiveView.DoOpen([])),this.mPetInactiveView.UpdateContent(e))},t.prototype._ClosePetView=function(){this.mPetInactiveView&&this.mPetInactiveView.parent&&(this.mPetInactiveView.DoClose(),DisplayUtils.removeFromParent(this.mPetInactiveView))
},t.prototype.OnOpenIndex=function(e){switch(this.CheckShowGroup(e),e){case 1:return Deblocking.Check(DeblockingType.TYPE_12);case 2:return Deblocking.Check(DeblockingType.TYPE_13);case 3:return Deblocking.Check(DeblockingType.TYPE_14)}return!0},t.prototype.CheckShowGroup=function(e){switch(this.showGroup.visible=!0,e){case 2:case 3:this.showGroup.visible=!1}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(PetMainPanel.prototype,"PetMainPanel",["ICommonWindow"]);var PetHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,i=GameGlobal.PetModel.mBattleList.indexOf(e.id);0==i?this.imgBattle.source="ui_bm_chuzhan":-1==i?this.imgBattle.source="":this.imgBattle.source="ui_bm_beizhan",t.SetContent(this,e);var o=GameGlobal.PetModel.GetPetInfo(e.id);o&&o.mName&&(this.lbName.text=o.mName),this.imgShen.visible=2==e.type,this.UpdateRedPoint()},t.SetContent=function(e,t){e.lbName.text=t.name,e.lbName.textColor=ItemBase.GetColorByQuality(t.quality);var i=GameGlobal.PetModel.GetPetInfo(t.id).mZizhiLevel;e.lbLev.text=GameGlobal.PetModel.HasPet(t.id)?"Lv."+GameGlobal.PetModel.GetLevel(t.id):"";var o=[];null!=t.jicon?(e.jicon.visible=!0,e.jicon.source=t.jicon):e.jicon.visible=!1;for(var n=0;i>n;n++)o.push({label:"item"+n});var a=new eui.ArrayCollection(o);e.starGroup.dataProvider=a,e.item.SetQuality(t.quality),e.item.setItemImg(PetConst.GetHeadIcon(t.id)),t.gray||e.item.setGray(!GameGlobal.PetModel.HasPet(t.id))},t.SetContentByInfo=function(e,t){this.SetContent(e,GameGlobal.Config.petBiographyConfig[t.mPetId]),e.lbName.text=t.mName},t.prototype.UpdateRedPoint=function(){this.redPoint.visible=t.RedPoint(this.data.id)},t.RedPoint=function(e){return GameGlobal.PetModel.IsRedPointPet(e)||GameGlobal.PetModel.HasPet(e)&&!GameGlobal.PetModel.HasBattle(e)&&GameGlobal.PetModel.mRedPoint.Get(PetModelRedPoint.INDEX_BATTLE)},t}(eui.ItemRenderer);__reflect(PetHeadItem.prototype,"PetHeadItem");var PetShouhPanel=function(e){function t(){var t=e.call(this)||this;return t.mHasDress=!1,t.mWindowHelpId=10,t.mModel=GameGlobal.PetShouhModel,t.mModelRedPoint=GameGlobal.PetShouhModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.pet_psychic,t}return __extends(t,e),t.RedPointCheck=function(){return GameGlobal.PetShouhModel.mRedPoint.IsRedPoint()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_14)},t.NAME="兽魂",t}(RoleTemplatePanel);__reflect(PetShouhPanel.prototype,"PetShouhPanel");var PetSkillPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.goBtn,this._OnClick),this._AddClick(this.skillIcon,this._OnClick),this._AddClick(this.starGroup,this._OnClick),this._AddClick(this.btnInfo,this._OnClick),this.skillGroup.itemRenderer=PetSkillItem,this._AddItemClick(this.skillGroup,this._OnItemClick)},t.prototype.OnOpen=function(){this.observe(MessageDef.PET_UPATE_INFO,this.UpdateContent)},t.prototype.UpdateContent=function(){var e=GameGlobal.PetModel,t=this.mContext.mPetList[this.mContext.mSelectIndex];if(!e.HasPet(t.id))return void(this.group.visible=!1);this.group.visible=!0,this.mPetId=t.id,this.img01.source=PetConst.XUXING_IMG[t.fiveele];for(var i=e.GetPetInfo(t.id),o=[],n=0,a=i.mBuffSkill;n<a.length;n++){var r=a[n];o.push(r)}for(var s=o.length-1;s<PetModel.SKILL_COUNT;s++)o.push(null);this.skillGroup.dataProvider=new eui.ArrayCollection(o);for(var l=i.GetXilianStar(),s=0;s<this.starGroup.numChildren;s++){var c=this.starGroup.getChildAt(s);c.source=l>s?"ui_bm_star022":"ui_bm_star021"}PetConst.SetName(this.lbName,i),this.powerLabel.text=i.GetPower(),this.petShowPanel.SetBody(PetConst.GetSkin(this.mPetId));var u=i.GetSkillId();GameGlobal.Config.EffectsConfig[u];this.skillDesc.text=PetConst.GetSkillDesc(u),PetSkillIconItem.SetContent(this.skillIcon,i.GetSkillId(),0)},t.prototype._OnItemClick=function(e){var t=GameGlobal.PetModel.GetPetInfo(this.mPetId),i=e.itemIndex,o=t.mBuffSkill[i];o&&ViewManager.ins().open(PetSkillTipPanel,2,o)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.goBtn:ViewManager.ins().open(PetXilianPanel,this.mPetId);break;case this.skillIcon:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.PetModel.GetPetInfo(this.mPetId).GetSkillId());break;case this.btnInfo:this.startInfo();break;case this.starGroup:this.startInfo()}},t.prototype.startInfo=function(){var e=GameGlobal.PetModel.GetPetInfo(this.mPetId),t="宠物技能已累计刷新：",i=e.mXilian+"次",o=16777215,n=GameGlobal.Config.petBiographyConfig[e.mPetId];n&&(o=ItemBase.GetColorByQuality(n.quality)),ViewManager.ins().open(PetXilianTipPanel,e.mName,t,i,o,GameGlobal.Config.petbaseConfig.freshitemid)},t.RedPointCheck=function(){return GameGlobal.PetModel.mRedPoint.Get(PetModelRedPoint.INDEX_SKILL)},t.NAME="技能",t}(BaseView);__reflect(PetSkillPanel.prototype,"PetSkillPanel",["ICommonWindowTitle"]);var PetSkillItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;if(e){var t=e,i=PetConst.GetPassSkillQuality(t);this.iconBg.source=PetConst.QUALITY_SKILL_BG[i],this.skillName.textColor=ItemBase.GetColorByQuality(i);var o=PetConst.GetPassSkillName(t);this.iconImg.source=PetConst.GetPassSkillIcon(t),6==i?this.skillName.textFlow=PetXilianPanel.GetSkillNameColor(o):(this.skillName.text=o,this.skillName.textColor=ItemBase.GetColorByQuality(i))}else this.iconBg.source="ui_bm_weikaifang",this.skillName.text=""},t}(eui.ItemRenderer);__reflect(PetSkillItem.prototype,"PetSkillItem");var LinglongSkillItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mIsLock=!1,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;if(e){var t=e;if(GameGlobal.Config.EffectsConfig[t]){var i=PetConst.GetPassSkillQuality(t);this.iconBg.source=PetConst.QUALITY_SKILL_BG[i],this.skillName.textColor=ItemBase.GetColorByQuality(i),this.skillName.text=PetConst.GetPassSkillName(t),this.iconImg.source=PetConst.GetPassSkillIcon(t),this.iconType&&(this.iconType.visible=!1)}else{this.iconType&&(this.iconType.visible=!0);PetConst.GetSkillIcon(t);this.iconImg.source=PetConst.GetSkillIcon(t);var i=PetConst.GetSkillQuality(t);this.iconBg.source=PetConst.QUALITY_SKILL_BG[i],this.skillName.text=PetConst.GetSkillName(t),this.skillName.textColor=ItemBase.GetColorByQuality(i)}this.mIsLock=!1}else{this.iconBg.source="ui_bm_weikaifang";var o="",n=GameGlobal.Config.BabyBasisConfig.openSkill;n[this.itemIndex]&&(o=n[this.itemIndex]+"阶解锁"),this.skillName.text=o,this.mIsLock=!0}},t}(eui.ItemRenderer);__reflect(LinglongSkillItem.prototype,"LinglongSkillItem");var PetSkillTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetSkillTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],n=e[2];PetSkillIconItem.SetContent(this.skillIcon,o,i,n);var a,r;2==i?(this.skillType.text="类型：被动技能",n?(a=PetConst.GetSkillQuality(o),r=PetConst.GetSkillName(o),this.skillDesc.text=PetConst.GetSkillDesc(o)):(a=PetConst.GetPassSkillQuality(o),r=PetConst.GetPassSkillName(o),this.skillDesc.text=PetConst.GetPassSkillDesc(o))):(this.skillType.text="类型：主动技能",a=PetConst.GetSkillQuality(o),r=PetConst.GetSkillName(o),this.skillDesc.text=PetConst.GetSkillDesc(o)),6==a?this.skillName.textFlow=PetXilianPanel.GetSkillNameColor(r):(this.skillName.textColor=ItemBase.GetColorByQuality(a),this.skillName.text=PetConst.GetSkillName(o))},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetSkillTipPanel.prototype,"PetSkillTipPanel");var PetTonglPanel=function(e){function t(){var t=e.call(this)||this;return t.mHasDress=!1,t.mWindowHelpId=9,t.mModel=GameGlobal.PetTonglModel,t.mModelRedPoint=GameGlobal.PetTonglModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.pet_soul,t}return __extends(t,e),t.RedPointCheck=function(){return GameGlobal.PetTonglModel.mRedPoint.IsRedPoint()},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_13)},t.NAME="通灵",t}(RoleTemplatePanel);__reflect(PetTonglPanel.prototype,"PetTonglPanel");var PetTuJianMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetTuJianMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(PetTuJianPanel,{skinName:"PetTuJianSkin",mContext:this}),TabView.CreateTabViewData(PetGodQualityPanel,{skinName:"PetGodQualitySkin",mContext:this})])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,o?i:0)},t.prototype.OnClose=function(){},t.prototype.OnOpenIndex=function(e){return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(PetTuJianMainPanel.prototype,"PetTuJianMainPanel",["ICommonWindow"]);var PetTuJianPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.List.itemRenderer=PetTuJianItem;var e=new eui.ArrayCollection,t={},i=GameGlobal.Config.petBiographyConfig;for(var o in i)t[i[o].pictype]||(t[i[o].pictype]=[]),t[i[o].pictype].push(i[o]);for(var n in GameGlobal.Config.HandBookConfig){SortTools.sortMap(t[n],"id");var a={};a.info=GameGlobal.Config.HandBookConfig[n],a.datas=t[n],e.addItem(a)}this.List.dataProvider=e},t.prototype.UpdateContent=function(){},t.NAME="图鉴",t}(BaseView);__reflect(PetTuJianPanel.prototype,"PetTuJianPanel",["ICommonWindowTitle"]);var PetTuJianItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetTuJianItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.List.itemRenderer=PetTuJianItemIcon,this.getwaylabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.List.dataProvider=new eui.ArrayCollection(this.data.datas),this.getwaylabel.text=this.data.info.name,this.getThroughTxt.text=this.data.info.name,UIHelper.SetLinkStyleLabel(this.getwaylabel)},t.prototype.tap=function(){var e,t=GameGlobal.Config.HandBookConfig[this.data.info.id];return t.hasOwnProperty("gainWay")&&(e=t.gainWay[0]),e?void ViewManager.ins().Guide(e[1][0],e[1][1]):void GameGlobal.UserTips.showTips(t.name)},t}(eui.ItemRenderer);__reflect(PetTuJianItem.prototype,"PetTuJianItem");var PetTuJianItemIcon=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.skinName="PetTuJianItemIconSkin",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.item.setItemImg(PetConst.GetHeadPath(this.data.icon)),this.item.SetQuality(this.data.quality),this.lbName.textColor=ItemBase.GetColorByQuality(this.data.quality),this.lbName.text=this.data.name,this.godImg.visible=GameGlobal.Config.petBiographyConfig[this.data.id].picshow},t.prototype.onClick=function(e){ViewManager.ins().open(PetInfoPanel,this.data)},t}(eui.ItemRenderer);__reflect(PetTuJianItemIcon.prototype,"PetTuJianItemIcon");var PetUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.windowTitleIconName="宠物",t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动升级"}),t.mRoleSendCheckData=new RoleSendCheckData(function(e){var i=t.GetPetInfo();i&&GameGlobal.PetModel.SendUpLevel(i.mPetId,e)},function(){var e=t.GetPetInfo();if(e){var i=e.GetLevelConfig();if(i){var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]}}return[null]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.btnAdd,e[2]=this.btnCulture,e;var e},t.prototype.childrenCreated=function(){this._AddClick(this.btnFeis,this._OnClick),this._AddClick(this.btnZizhi,this._OnClick),this._AddClick(this.btnShow,this._OnClick),this._AddClick(this.btnZZ,this._OnClick),this._AddClick(this.powerLabel,this._OnClick),this._AddClick(this.btnAdd,this._OnClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.showAllAttr,this._OnClick),this._AddClick(this.btnRename,this._OnClick),this._AddClick(this.skillComp,this._OnClick),this._AddClick(this.btnSC,this._OnClick),this._AddClick(this.btnYuanfen,this._OnClick)},t.prototype.UpdateRedPoint=function(){var e=(GameGlobal.PetModel,this.mContext.mPetList[this.mContext.mSelectIndex]),t=e.id;UIHelper.ShowRedPoint(this.btnZizhi,GameGlobal.PetModel.mRedPoint.IsRedZizhi(t)),UIHelper.ShowRedPoint(this.btnZZ,!GameGlobal.PetModel.HasBattle(t)&&GameGlobal.PetModel.mRedPoint.Get(PetModelRedPoint.INDEX_BATTLE)),UIHelper.ShowRedPoint(this.btnAdd,GameGlobal.PetModel.mRedPoint.IsRedLevel(t)),UIHelper.ShowRedPoint(this.btnCulture,GameGlobal.PetModel.mRedPoint.IsRedLevel(t))},t.prototype.UpdateContent=function(){var e=GameGlobal.PetModel,t=this.mContext.mPetList[this.mContext.mSelectIndex],i=t.id;if(this.imgShen.visible=2==t.type,!e.HasPet(i))return void(this.group.visible=!1);this.group.visible=!0;var o=e.GetPetInfo(i);PetConst.SetName(this.lbName,o),this.group.visible=!0,this.wuxingImg.source=PetConst.XUXING_IMG[t.fiveele];var n=e.GetLevel(i);if(this.lbLev.text=n+"\n级",UIHelper.SetLabelText(this.lbPower,"宠物总战力：",e.GetAllPower()+""),UIHelper.SetLabelText(this.lbActive,"已激活：",e.GetActiveCount()+""),n>=e.MAX_LEVEL)this.currentState="full";else{this.currentState="normal";var a=GameGlobal.Config.petLvproConfig[t.rarity][n-1];a.cost}this.btnZZ.icon=e.HasBattle(i)?"ui_bt_xiuxi":"ui_bt_chuzhan",this._UpdateExp(),this.powerLabel.text=o.GetPower(),this.petShowPanel.SetBody(o.GetSkin()),PetSkillIconItem.SetContent(this.skillComp,o.GetSkillId(),0),this.UpdateRedPoint(),this.UpdateYuanfenRedPoint()},t.prototype.OnOpen=function(){this.observe(MessageDef.RP_PET,this.UpdateRedPoint),this.observe(MessageDef.PET_UPATE_INFO,this.UpdateContent),this.observe(MessageDef.PET_UPATE_EXP,this._DoUpdateExp),this.observe(MessageDef.BAG_PET_LEVEL_ITEM,this._UpdateExp),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateYuanfenRedPoint),this.btnSC.visible=GameGlobal.actorModel.level>GameGlobal.Config.petbaseConfig.openlv,this.btnYuanfen.visible=Deblocking.Check(GameGlobal.Config.FateBaseConfig.openlv,!0)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateYuanfenRedPoint=function(){UIHelper.ShowRedPoint(this.btnYuanfen,GameGlobal.YuanfenModel.CanActInList(null))},t.prototype._OnClick=function(e){var t=this.mContext.mPetList[this.mContext.mSelectIndex],i=t.id;if(GameGlobal.GetGameUtil["true"])switch(e.currentTarget){case this.btnFeis:var o=GameGlobal.Config.petFlyproConfig[t.id];if(!o)return void UserTips.ins().showTips("该宠物不能飞升");var n=GameGlobal.PetModel.GetPetInfo(t.id),a=n.mLevel;if(80>a)return void UserTips.ins().showTips("宠物不满80级");ViewManager.ins().open(PetFeishengPanel,t.id);break;case this.btnZizhi:ViewManager.ins().open(PetZizhiPanel,t.id);break;case this.btnShow:GameGlobal.PetModel.SetShowId(t.id);break;case this.btnZZ:GameGlobal.PetModel.HasBattle(i)?GameGlobal.PetModel.SendUnBattle(i):ViewManager.ins().open(PetBattlePanel,i);break;case this.btnRename:ViewManager.ins().open(PetChangeNamePanel,"宠物改名",MessageDef.PET_UPATE_INFO,GameGlobal.PetModel.GetPetInfo(i).mName,function(e){GameGlobal.PetModel.SendRename(i,e)},this);break;case this.powerLabel:ViewManager.ins().open(PetAttrPanel,i);break;case this.btnAdd:this._SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle();break;case this.showAllAttr:ViewManager.ins().open(PetAllAttrPanel);break;case this.skillComp:ViewManager.ins().open(PetSkillTipPanel,0,GameGlobal.PetModel.GetPetInfo(i).GetSkillId());break;case this.btnSC:ViewManager.ins().open(PetTuJianMainPanel);break;case this.btnYuanfen:ViewManager.ins().open(YuanfenMainWin)}},t.prototype.GetPetInfo=function(){var e=this.mContext.mPetList[this.mContext.mSelectIndex],t=e.id;return GameGlobal.PetModel.GetPetInfo(t)},t.prototype._SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype._DoUpdateExp=function(){this.mRoleAutoSendData.Continue(),this._UpdateExp()},t.prototype._UpdateExp=function(){var e=this.GetPetInfo();if(e){var t=e.GetLevelConfig();t&&(this.bar.maximum=t.proexp,this.bar.value=e.mExp*t.exp,this.consumeLabel.Set(t.cost))}},t.RedPointCheck=function(){var e=GameGlobal.PetModel.mRedPoint;return e.Get(PetModelRedPoint.INDEX_ACT)||e.Get(PetModelRedPoint.INDEX_LEVEL)||e.Get(PetModelRedPoint.INDEX_BATTLE)||e.Get(PetModelRedPoint.INDEX_ZIZHI)||GameGlobal.YuanfenModel.IsRedPoint()},t.NAME="升级",t}(BaseView);__reflect(PetUpLevelPanel.prototype,"PetUpLevelPanel",["ICommonWindowTitle"]);var StageUtils=function(){function e(){null==e._uiStage&&(e._uiStage=new eui.UILayer,e._uiStage.touchEnabled=!1,e._uiStage.percentHeight=100,e._uiStage.percentWidth=100,this.GetStage().addChildAt(e._uiStage,0))}return e.prototype.GetHeight=function(){return this.GetStage().stageHeight},e.prototype.GetWidth=function(){return this.GetStage().stageWidth},e.prototype.setTouchChildren=function(e){this.GetStage().touchChildren=e},e.prototype.SetMaxTouches=function(e){this.GetStage().maxTouches=e},e.prototype.SetFrameRate=function(e){this.GetStage().frameRate=e},e.prototype.GetStage=function(){return egret.MainContext.instance.stage},e.prototype.GetUIStage=function(){return e._uiStage},e.WIDTH=720,e.HEIGHT=1280,e}();__reflect(StageUtils.prototype,"StageUtils");var PetXilianTipPanel=function(e){function t(){var t=e.call(this)||this;return t.SetSkinName(),t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.SetSkinName=function(){this.skinName="PetXilianTip2Skin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.descTxt.text=e[1],this.refreshCount.text=e[2],this.petName.text=e[0],this.petName.textColor=e[3];var i=e[4],o="",n="";if(i){var a=i[0].itemId,r=i[1].itemId;o=GameGlobal.Config.ItemConfig[a].name,n=GameGlobal.Config.ItemConfig[r].name}this.tipLabel.text="刷新的次数越多，获得高品质技能概率越大\n使用【"+o+"】洗练，洗练次数可增加1次\n使用【"+n+"】洗练，洗练次数可增加10次"},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PetXilianTipPanel.prototype,"PetXilianTipPanel");var PetZizhiPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PetZizhiSkin",t._AddClick(t.btnAdd,t._OnClick),t._AddClick(t.btnCulture,t._OnClick),t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动提升"}),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_PetId=e[0],this.UpdateContent(),this.observe(MessageDef.PET_UPATE_ZIZHI,this.UpdateZizhi),this.observe(MessageDef.PET_UPATE_INFO,this.UpdateContent),this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateZizhi=function(){this.mRoleAutoSendData.Continue()},t.prototype.UpdateContent=function(){var e=GameGlobal.PetModel,t=this.m_PetInfo=e.GetPetInfo(this.m_PetId);this.powerLabel.text=t.GetZizhiPower(),PetConst.SetName(this.lbName,t);var i=t.mZizhiLevel,o=GameGlobal.Config.petGiftproConfig[this.m_PetId][i-1];this.wuxingImg.source=PetConst.XUXING_IMG[GameGlobal.Config.petBiographyConfig[this.m_PetId].fiveele];for(var n=0;n<this.starGroup.numChildren;n++){var a=this.starGroup.getChildAt(n);a.source=i>n?"ui_bm_jsstar04":"ui_bm_jsstar03"}var r=t.GetShowZizhiAttrs();this.attrLabel.textFlow=AttributeData.GetAttrTabString(r),i>=e.MAX_ZIZHI_LEVEL?this.currentState="full":(this.currentState="normal",this.bar.maximum=o.proexp,this.bar.value=t.mZizhiExp*o.exp,this.needItemView.SetItemId(o.cost[0].id,o.cost[0].count)),this.showPanel.SetBody(t.GetSkin())},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnAdd:this.SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle()}},t.prototype.SendUp=function(){var e=GameGlobal.PetModel,t=GameGlobal.Config.petGiftproConfig[this.m_PetId][this.m_PetInfo.mZizhiLevel];return t?Checker.Datas(t.cost,!1)?(e.SendUpZizhi(this.m_PetId),!0):(UserWarn.ins().BuyGoodsWarn(t.cost[0].id),!1):!1},t.LAYER_LEVEL=LayerManager.UI_Main,t.TYPE=["初级","初级","中级","高级","特级","顶级"],t}(BaseEuiView);__reflect(PetZizhiPanel.prototype,"PetZizhiPanel");var MainChapterInfoView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.imgRed.visible=!1,this._AddClick(this.imgMap,this._Onclick),this._AddClick(this.groupLine,this._Onclick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mType=e[0],this.observe(MessageDef.GUANQIA_CHANGE,this.UpdateContent),this.observe(MessageDef.MAIN_CITY_INFO,this.UpdateContent),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){this.lbSeat.visible=this.mType!=t.CITY_TYPE,this.groupLine.visible=!this.lbSeat.visible;var e=GameGlobal.UserFb;if(this.lbMap.text="第"+e.guanqiaID+"关",this.lbSeat.text=e.Desc,this.imgRed.visible=GameGlobal.UserFb.chapterRewardList.length>0,this.mType!=t.FIGHT_TYPE){var i=GameGlobal.CommonRaidModel.mMainCityInfo;i&&(this.imgPoint.source=GameGlobal.CommonRaidModel.GetPointSource(i.people),this.labLinerNo.text=(i.channelid||0)+"线")}},t.prototype._Onclick=function(e){switch(e.currentTarget){case this.imgMap:ViewManager.ins().open(WorldMapPanel);break;case this.groupLine:if(this.mType==t.FIGHT_TYPE)return;ViewManager.ins().open(ChangeLinerWin)}},t.FIGHT_TYPE=1,t.CITY_TYPE=2,t}(BaseView);__reflect(MainChapterInfoView.prototype,"MainChapterInfoView",["eui.UIComponent","egret.DisplayObject"]);var MainGameNoticeView=function(e){function t(){var t=e.call(this)||this;return t.mType=0,t.m_EndTime=0,t.m_ShowType=0,t.skinName="MainGameNoticeSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t._OnClick,t),UIHelper.SetLinkStyleLabel(t.gotoLabel),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mType&&this.m_EndTime>GameServer.serverTime&&this.StartTime()},t.prototype.OnClose=function(){TimerManager.ins().removeAll(this)},t.prototype.SetData=function(e,i,o){this.mType=e,this.m_ShowType=o,this.m_EndTime=i+GameServer.serverTime,this.m_ShowType==t.SHOW_TYPE_GOTO?(this.lbAnswerInfo.visible=!1,this.gotoLabel.visible=!0):(this.lbAnswerInfo.visible=!0,this.gotoLabel.visible=!1),this.UpdateContent(),TimerManager.ins().removeAll(this)},t.prototype.StartTime=function(){TimerManager.ins().removeAll(this);var e=this.m_EndTime-GameServer.serverTime;this._UpdateTime(),0>=e||this.AddTimer(1e3,this.m_EndTime-GameServer.serverTime,this._UpdateTime)},t.prototype.UpdateContent=function(){return this.icon.scaleX=this.icon.scaleY=1,this.mType==t.TYPE_XIANDAO?void this.UpdateXiandaohui():this.mType==t.TYPE_CROSSBATTER?void this.UpdateCrossBattle():this.mType==t.TYPE_GANG_BATTLE?void this.UpdateGangBattle():this.mType==t.TYPE_GANG_BOSS?void this.UpdateGangBoss():this.mType==t.TYPE_CROSS_BOSS?void this.UpdateCrossBoss():void console.error("not impl type => "+this.mType)},t.prototype._UpdateTime=function(){this.m_ShowType!=t.SHOW_TYPE_GOTO&&(this.lbAnswerInfo.textFlow=TextFlowMaker.generateTextFlow("将在"+StringUtils.addColor(Math.max(this.m_EndTime-GameServer.serverTime,0)+"s",Color.l_green_1)+"后开始")),this.m_EndTime<=GameServer.serverTime&&this.Close()},t.prototype.UpdateXiandaohui=function(){this.m_ShowType==t.SHOW_TYPE_GOTO?this.typeLabel.text="仙道会预选赛正激烈进行":this.typeLabel.text="仙道会活动",this.icon.source="ui_xdh_bt_xiandaohui"},t.prototype.UpdateCrossBattle=function(){this.m_ShowType==t.SHOW_TYPE_GOTO?this.typeLabel.text="跨服争霸正在进行":this.typeLabel.text="跨服争霸",this.icon.source="ui_bm_kuafuzhengba"},t.prototype.UpdateGangBattle=function(){this.typeLabel.text="帮会战进行中",this.icon.source="ui_bm_banghuizhan"},t.prototype.UpdateGangBoss=function(){this.typeLabel.text="帮会BOSS出现",this.icon.source="ui_bh_bt_boss",this.icon.scaleX=this.icon.scaleY=.8},t.prototype.UpdateCrossBoss=function(){this.typeLabel.text="跨服BOSS出现",this.icon.source="ui_bm_kuafuBOSS"},t.prototype._OnClick=function(e){switch(e.target){case this.imgAnswerClose:this.Close();break;default:this.m_ShowType==t.SHOW_TYPE_GOTO&&(this.Goto(),this.Close())}},t.prototype.Goto=function(){return this.mType==t.TYPE_XIANDAO?void GameGlobal.XiandaoModel.EnterPreliminaries():this.mType==t.TYPE_CROSSBATTER?void GameGlobal.ActivityModel.sendActivityEnter(t.TYPE_CROSSBATTER):this.mType==t.TYPE_GANG_BATTLE?GameGlobal.actorModel.HasGuild()?void GameGlobal.GangBattleModel.SendEnterBattle():void UserTips.ins().showTips("加入帮会才可以参加帮会战"):this.mType==t.TYPE_GANG_BOSS?GameGlobal.actorModel.HasGuild()?void ViewManager.ins().open(GangBossPanel):void UserTips.ins().showTips("您还没有帮会"):this.mType==t.TYPE_CROSS_BOSS?GameGlobal.actorModel.HasGuild()?void ViewManager.ins().open(CrossMainPanel,1):void UserTips.ins().showTips("您还没有帮会"):void 0},t.prototype.Close=function(){DisplayUtils.removeFromParent(this),this.DoClose()},t.TYPE_XIANDAO=1,t.TYPE_GANG_BOSS=3,t.TYPE_CROSSBATTER=5,t.TYPE_GANG_BATTLE=6,t.TYPE_CROSS_BOSS=101,t.SHOW_TYPE_TIME=1,t.SHOW_TYPE_GOTO=2,t}(BaseView);__reflect(MainGameNoticeView.prototype,"MainGameNoticeView");var PlayFunTipBtnType;!function(e){e[e.CATCH_PET=0]="CATCH_PET",e[e.TEAM=1]="TEAM",e[e.MAIL=2]="MAIL",e[e.QUJING_AWARD=3]="QUJING_AWARD",e[e.QUJING_ROBBED=4]="QUJING_ROBBED"}(PlayFunTipBtnType||(PlayFunTipBtnType={}));var PlayFunTipBtn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){var e=this.data;if(e.id==PlayFunTipBtnType.CATCH_PET){var t=ViewManager.ins().getView(PlayFunView);t.CatchPetClick()}else e.id==PlayFunTipBtnType.TEAM?TeamBaseModelMsg.GoHasTeamPanel():e.id==PlayFunTipBtnType.MAIL?ViewManager.ins().open(MailWin):e.id==PlayFunTipBtnType.QUJING_AWARD?ViewManager.ins().open(QujingMainWin):e.id==PlayFunTipBtnType.QUJING_ROBBED&&ViewManager.ins().open(QujingRecordWin)},t.prototype.DoUpdate=function(){this.data;return!1},t.prototype.dataChanged=function(){var e=this.data;this.iconDisplay.source=t.ICON[e.id]},t.ICON=(_a={},_a[PlayFunTipBtnType.CATCH_PET]="ui_bm_zhuabu",_a[PlayFunTipBtnType.TEAM]="ui_zjm_bt_zudui",_a[PlayFunTipBtnType.MAIL]="ui_bm_youjian",_a[PlayFunTipBtnType.QUJING_AWARD]="ui_bm_husongjiangli",_a[PlayFunTipBtnType.QUJING_ROBBED]="ui_bm_beijie",_a),t}(eui.ItemRenderer);__reflect(PlayFunTipBtn.prototype,"PlayFunTipBtn");var PlayFunTipBtnData=function(){function e(){}return e}();__reflect(PlayFunTipBtnData.prototype,"PlayFunTipBtnData");var _a,PlayFunView=function(e){function t(){var i=e.call(this)||this;i.ruleList={},i.m_ShowCatchPet=!1,i.skinName="MainPlayFunViewSkin",DisplayUtils.removeFromParent(i.xuannvCard),DisplayUtils.removeFromParent(i.gAnswer),DisplayUtils.removeFromParent(i.xiTie),DisplayUtils.removeFromParent(i.qiuHun),DisplayUtils.removeFromParent(i.xianHuan),DisplayUtils.removeFromParent(i.btnHouseBuild);var o=GameGlobal.Config.ShowUiConfig;for(var n in o)t.pngFirstShow[o[n].followicon]=!0;return i}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.taskTraceBtn,e[2]=this.chapterInfo,e[3]=this.fateInfo,e[4]=this.guanqiaBtn.cbAuto,e;var e},t.prototype.ShowQiuHunView=function(){return 0==GameGlobal.YingYuanModel.askMarry.length?void DisplayUtils.removeFromParent(this.qiuHun):(this.g1.addChild(this.qiuHun),void(GameGlobal.YingYuanModel.askMarry.length>9?this.qiuHunText.text="···":this.qiuHunText.text=GameGlobal.YingYuanModel.askMarry.length+""))},t.prototype.ShowInvitationView=function(){return 0==GameGlobal.YingYuanModel.marryInvita.length?void DisplayUtils.removeFromParent(this.xiTie):(this.g1.addChild(this.xiTie),void(GameGlobal.YingYuanModel.marryInvita.length>9?this.xiTieText.text="···":this.xiTieText.text=GameGlobal.YingYuanModel.marryInvita.length+""))},t.prototype.ShowFlower=function(){return 0==GameGlobal.YingYuanModel.marrySFlower.length?void DisplayUtils.removeFromParent(this.xianHuan):(this.g1.addChild(this.xianHuan),void(GameGlobal.YingYuanModel.marrySFlower.length>9?this.xianHuanText.text="···":this.xianHuanText.text=GameGlobal.YingYuanModel.marrySFlower.length+""))},t.prototype.ShowHouseBuild=function(){var e=GameGlobal.YingYuanModel.shareUpInfo;null!=e?this.g2.addChild(this.btnHouseBuild):DisplayUtils.removeFromParent(this.btnHouseBuild)},t.prototype.destoryView=function(){},t.prototype._AddIconRule=function(e,t){return this.ruleList[e.hashCode]=new t(e),this._AddClick(e,this.onTap),this.ruleList[e.hashCode]},t.prototype._AddIconRule2=function(e,t){return this.ruleList[e.hashCode]=new t(e),this.ruleList[e.hashCode]},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.tipIconList.itemRenderer=PlayFunTipBtn,this._AddIconRule(this.guanqiaBtn,GuanQiaRuleIcon),this._AddIconRule(this.firstRechargeBtn,FirstRechargeIconRule),this._AddIconRule(this.xuannvBtn,XuannvBefallIconRule2),this._AddIconRule(this.bagBtn,BagIconRule),this._AddIconRule(this.dailyBtn,DailyIconRule),this._AddIconRule(this.monthBtn,MonthIconRule),this._AddIconRule(this.rmbGiftBtn,RmbGiftIconRule),this._AddIconRule(this.taskTraceBtn,TaskTraceIconRule),this._AddIconRule(this.discountBtn,DiscountRule),this._AddIconRule(this.openDayGif,OpenDayGifRule),this._AddIconRule(this.JinJieRankBtn,JinJieRankIconRule),this._AddIconRule(this.upLvBtn,UpLvIconRule),this._AddIconRule(this.positionBtn,PositionRule),this._AddClick(this.imgGoto,this._Onclick),this._AddClick(this.btnHouseBuild,this._Onclick),this._AddClick(this.fateInfo,this._Onclick),this._AddClick(this.xuannvCard,this._Onclick);for(var t in this.ruleList){var i=this.ruleList[t];i.DoHide()}this._AddClick(this.btnAnswerClose,this._Onclick),this._AddClick(this.imgAsBg,this._Onclick),this._AddClick(this.xiTieBnt,this._Onclick),this._AddClick(this.qiuHunBnt,this._Onclick),this._AddClick(this.xianHuanBnt,this._Onclick)},t.prototype.OnOpen=function(){this.observe(MessageDef.FUBEN_CHANGE,this.upDataGuanqia),this.observe(MessageDef.LEVEL_CHANGE,this.levelChange),this.observe(MessageDef.GUANQIA_CHANGE,this.UpdateGuanqiaBtnState),this.observe(MessageDef.UPDATE_CHAT_ZOOM,this.AdaptationGroup),this.observe(MessageDef.BZ_PET_INFO,this.ShowCatchPet),this.observe(MessageDef.ANSWER_CHANGE,this.upDateAnswer),this.observe(MessageDef.UPDATE_TEAM_MAIN_INFO,this._UpdateTipGroup),this.observe(MessageDef.MAIL_DATA_CHANGE,this._UpdateTipGroup),this.observe(MessageDef.QUJING_UPDATE_BASEINFO,this._UpdateTipGroup),this.observe(MessageDef.QIU_MARRY_INFO,this.ShowQiuHunView),this.observe(MessageDef.INVITATION_INFO,this.ShowInvitationView),this.observe(MessageDef.FLOWER_INFO,this.ShowFlower),this.observe(MessageDef.HOUSE_SHARED_NOTICE,this.ShowHouseBuild),this.observe(MessageDef.UPDATE_MAIN_TASK,this.updateMainTask),MiniChatPanel.PLAY_FUNC_CLICK||GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this.chapterInfo.DoOpen([MainChapterInfoView.FIGHT_TYPE]),this.fateInfo.DoOpen(),this.addRuleEvent(),this.upDataGuanqia(),this.updateRules(),this.UpdateGuanqiaBtnState(),this._UpdateTipGroup(),this.AdaptationGroup(),this.m_GameNotice&&this.m_GameNotice.parent&&this.m_GameNotice.DoOpen(),this.CatchPet(),this.ShowQiuHunView(),this.ShowInvitationView(),this.ShowFlower(),this.ShowHouseBuild(),this.updateMainTask(),this.updateXuannvCard(),XuannvBefallIconRule.AutoCheckShow()&&this.AddTimer(800,1,this.AutoShowXuannv),this.activityAdvance=new ActivityAdvance(this.horizontalGroup)
},t.prototype.AutoShowXuannv=function(){XuannvBefallIconRule.AutoShow()},t.prototype.updateXuannvCard=function(){Deblocking.Check(DeblockingType.TYPE_118,!0)&&((!Deblocking.Check(DeblockingType.TYPE_19,!0)||UserVip.ins().lv>=9&&!BitUtil.Has(UserVip.ins().otherreward,9))&&!t.firstShowXuanNv&&(GameGlobal.RechargeModel.xuanNvCard?this.addChild(this.xuannvCard):DisplayUtils.removeFromParent(this.xuannvCard)),UserVip.ins().lv>=9&&!BitUtil.Has(UserVip.ins().otherreward,9)&&ViewManager.ins().open(HavingTipsPanel)),t.firstShowXuanNv&&(GameGlobal.RechargeModel.xuanNvCard=!1),t.firstShowXuanNv=!1},t.prototype.updateMainTask=function(){var e=GameGlobal.UserTask.mainTaskData[0];if(e){var i="",o=GameGlobal.Config.ShowUiConfig;this.followBtn=null;for(var n in o)if(e.id>=o[n].showui&&e.id<=o[n].closeui&&GameGlobal.RechargeModel.rechargeNum<=0&&(t.pngFirstShow[o[n].followicon]?i=o[n].pic:RaidModel.IS_FIGHT_WIN||(i=o[n].pic),this.preShowPng.source=i,""!=i))for(var a in this.ruleList)if(egret.is(this.ruleList[a].tar,"eui.Button")){var r=this.ruleList[a].tar;if(r.icon==o[n].followicon){this.preShowPng.x=o[n].pos[0],this.preShowPng.y=o[n].pos[1],r.addChild(this.preShowPng),this.followBtn=r;break}}}},t.prototype.OnClose=function(){this.chapterInfo.DoClose(),this.fateInfo.DoClose(),this.removeRuleEvent(),this.removeObserve(),this.removeEvents(),TimerManager.ins().removeAll(this),this.m_GameNotice&&this.m_GameNotice.parent&&this.m_GameNotice.DoClose(),this.activityAdvance&&delete this.activityAdvance},t.prototype.CatchPetClick=function(){var e=this;WarnWin.show("偶遇宠物宝宝，是否前去捕捉",function(){e.m_ShowCatchPet=!1,e._UpdateTipGroup(),GameGlobal.CatchPetModel.HasCatch()?GameGlobal.RaidMgr.EnterCatchPet():UserTips.InfoTip("宠物已经逃跑")},this)},t.prototype.CatchPet=function(){GameGlobal.CatchPetModel.HasCatch()&&this.ShowCatchPet()},t.prototype.ShowCatchPet=function(){this.AddLoopTimer(1e3,this.ShowCatchPetTime)},t.prototype.ShowCatchPetTime=function(){var e=GameGlobal.CatchPetModel.catchtime;return e<=GameServer.serverTime?(this.m_ShowCatchPet=!0,this._UpdateTipGroup(),void this.RemoveTimer(this.ShowCatchPetTime)):(this.m_ShowCatchPet=!1,void this._UpdateTipGroup())},t.prototype.addRuleEvent=function(){var e;for(var t in this.ruleList)e=this.ruleList[t],e.updateMessage&&e.addEvent()},t.prototype.removeRuleEvent=function(){for(var e in this.ruleList){var t=this.ruleList[e];t&&t.updateMessage&&t.removeEvent()}},t.prototype.updateRules=function(){TimerManager.ins().doNext(this.startUpdateRule,this)},t.prototype.startUpdateRule=function(){for(var e in this.ruleList)this.ruleList[e].update()},t.prototype.levelChange=function(){this._UpdateTipGroup()},t.prototype.onTap=function(e){return this.ruleList[e.currentTarget.hashCode]?(this.taskShowPngControl(e.currentTarget),void this.ruleList[e.currentTarget.hashCode].tapExecute(e.target)):void 0},t.prototype.upDataGuanqia=function(){},t.prototype.upDateAnswer=function(){var e=GameGlobal.AnswerController.getAnswerData();if(!e)return void DisplayUtils.removeFromParent(this.gAnswer);var t=GameGlobal.Config.AnswerBaseConfig.open;return Deblocking.Check(t,!0)?void(GameGlobal.AnswerController.bOpenLayer||(e.type?(this.addChild(this.gAnswer),this.gAnswer.visible=!0,this.lbAnswerInfo.textFlow=TextFlowMaker.generateTextFlow("|C:369427&T:正在进行第|C:0x369427&T:"+e.answerNum+"|C:0x369427&T:题|")):DisplayUtils.removeFromParent(this.gAnswer))):void DisplayUtils.removeFromParent(this.gAnswer)},t.prototype._Onclick=function(e){switch(e.currentTarget){case this.imgGoto:ViewManager.ins().open(WorldMapPanel);break;case this.btnAnswerClose:DisplayUtils.removeFromParent(this.gAnswer);break;case this.imgAsBg:DisplayUtils.removeFromParent(this.gAnswer),GameGlobal.AnswerController.bOpenAnswer()?ViewManager.ins().open(AnswerLayer):GameGlobal.UserTips.showTips("活动未开启"),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL);break;case this.btnHouseBuild:ViewManager.ins().open(HouseUpgradeTipWin);break;case this.fateInfo:ViewManager.ins().open(FateMainPanel,this.fateInfo.getTabID());break;case this.xiTieBnt:ViewManager.ins().open(YingYuanHeLiPanel);break;case this.qiuHunBnt:ViewManager.ins().open(ShouDaoPanel);break;case this.xianHuanBnt:ViewManager.ins().open(ShouDaoXianHuaPanel);break;case this.xuannvCard:DisplayUtils.removeFromParent(this.xuannvCard),ViewManager.ins().open(HavingTipsPanel)}},t.prototype.taskShowPngControl=function(e){this.followBtn==e&&(t.pngFirstShow[this.followBtn.icon]=!1,this.preShowPng.source="",RaidModel.IS_FIGHT_WIN=!0)},t.prototype._UpdateTipGroup=function(){var e=[];this.m_ShowCatchPet&&e.push({id:PlayFunTipBtnType.CATCH_PET}),TeamBaseModelMsg.HasTeam()&&e.push({id:PlayFunTipBtnType.TEAM}),MailIconRule.CheckShowRedPoint()&&e.push({id:PlayFunTipBtnType.MAIL}),GameGlobal.QujingModel.HasAward()&&e.push({id:PlayFunTipBtnType.QUJING_AWARD}),GameGlobal.QujingModel.HasRobbed()&&e.push({id:PlayFunTipBtnType.QUJING_ROBBED}),this.tipIconList.dataProvider=new eui.ArrayCollection(e)},t.prototype._UpdateTipGroupTimer=function(){},t.prototype.UpdateGuanqiaBtnState=function(){var e=GameGlobal.UserFb.nextMap;this.imgGoto.visible=e,this.guanqiaBtn.visible=!e},t.prototype.AdaptationGroup=function(e){MiniChatPanel.UpdateViewPos(this.groupAdaptation);var t=GameGlobal.StageUtils.GetHeight();this.bGroup.bottom=t-this.groupAdaptation.y+94},t.GameNotice=function(e,i,o){if(!(GameGlobal.actorModel.level<30)){var n=ViewManager.ins().getView(t);n&&(!i||0>i||(n.m_GameNotice||(n.m_GameNotice=new MainGameNoticeView),n.m_GameNotice.parent||(n.gameNoticeGroup.addChild(n.m_GameNotice),n.m_GameNotice.DoOpen()),n.m_GameNotice.SetData(e,i,o),n.$stage&&n.m_GameNotice.StartTime()))}},t.RemoveGameNotice=function(e){var i=ViewManager.ins().getView(t);i&&i.m_GameNotice&&i.m_GameNotice.parent&&i.m_GameNotice.mType==e&&i.m_GameNotice.Close()},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t.pngFirstShow={},t.firstShowXuanNv=!0,t}(BaseEuiView);__reflect(PlayFunView.prototype,"PlayFunView");var TopActivityView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClicked,this),this.group.addEventListener(egret.Event.RESIZE,this.UpdateGroup,this)},t.prototype.InitIconList=function(e){e._AddIconRule(this.fuliBtn,FuliIconRuleEx),e._AddIconRule(this.kaifuBtn,KaiFuIconRuleEx),e._AddIconRule(this.dailyChargeBtn,DailyChargeIconRuleEx),e._AddIconRule(this.fightPetFBBtn,FightPetFBIconRuleEx),e._AddIconRule(this.sevenDayBtn,SevenDayIconRuleEx),e._AddIconRule(this.shootUpBtn,ShootUpIconRuleEx),e._AddIconRule(this.treasureBtn,TreasureIconRuleEx),e._AddIconRule(this.rebateBtn,RebateIconRuleEx),e._AddIconRule(this.godPetAwardBtn,GodPetAwardIconRuleEx),e._AddIconRule(this.godPetLotteryBtn,GodPetLotteryIconRuleEx),e._AddIconRule(this.godLotteryBtn,GodLotteryIconRuleEx),e._AddIconRule(this.growupBtn,GrowUpIconRuleEx),e._AddIconRule(this.investmentBtn,InvestmentIconRuleEx),e._AddIconRule(this.jingCaiBtn,JingCaiIconRuleEx),e._AddIconRule(this.xuannvBtn,XuannvBefallIconRuleEx),e._AddIconRule(this.discountBtn,DiscountRuleEx)},t.prototype.OnClose=function(){},t.prototype.UpdateGroup=function(){this.btnArrow.visible=this.group.numChildren>0},t.prototype._OnClicked=function(){this.btnArrow.scaleX=-1*this.btnArrow.scaleX,this.scroller.visible=-1==this.btnArrow.scaleX},t}(eui.Component);__reflect(TopActivityView.prototype,"TopActivityView");var FuliIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.FULI)?e.prototype.checkShowIcon.call(this):!1},t}(FuliIconRule);__reflect(FuliIconRuleEx.prototype,"FuliIconRuleEx");var KaiFuIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.KAIFU)?e.prototype.checkShowIcon.call(this):!1},t}(KaiFuIconRule);__reflect(KaiFuIconRuleEx.prototype,"KaiFuIconRuleEx");var DailyChargeIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.DAILYCHARGE)?e.prototype.checkShowIcon.call(this):!1},t}(DailyChargeIconRule);__reflect(DailyChargeIconRuleEx.prototype,"DailyChargeIconRuleEx");var FightPetFBIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.FIGHTPETFB)?e.prototype.checkShowIcon.call(this):!1},t}(FightPetFBIconRule);__reflect(FightPetFBIconRuleEx.prototype,"FightPetFBIconRuleEx");var SevenDayIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.SEVENDAY)?e.prototype.checkShowIcon.call(this):!1},t}(SevenDayIconRule);__reflect(SevenDayIconRuleEx.prototype,"SevenDayIconRuleEx");var ShootUpIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.SHOOTUP)?e.prototype.checkShowIcon.call(this):!1},t}(ShootUpIconRule);__reflect(ShootUpIconRuleEx.prototype,"ShootUpIconRuleEx");var TreasureIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.TREASURE)?e.prototype.checkShowIcon.call(this):!1},t}(TreasureIconRule);__reflect(TreasureIconRuleEx.prototype,"TreasureIconRuleEx");var RebateIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.REBATE)?e.prototype.checkShowIcon.call(this):!1},t}(RebateIconRule);__reflect(RebateIconRuleEx.prototype,"RebateIconRuleEx");var GodPetAwardIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.GODPETAWARD)?e.prototype.checkShowIcon.call(this):!1},t}(GodPetAwardIconRule);__reflect(GodPetAwardIconRuleEx.prototype,"GodPetAwardIconRuleEx");var GodPetLotteryIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.GODPETLOTTERY)?e.prototype.checkShowIcon.call(this):!1},t}(GodPetLotteryIconRule);__reflect(GodPetLotteryIconRuleEx.prototype,"GodPetLotteryIconRuleEx");var GodLotteryIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.GODLOTTERY)?e.prototype.checkShowIcon.call(this):!1},t}(GodLotteryIconRule);__reflect(GodLotteryIconRuleEx.prototype,"GodLotteryIconRuleEx");var GrowUpIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.GROWUP)?e.prototype.checkShowIcon.call(this):!1},t}(GrowUpIconRule);__reflect(GrowUpIconRuleEx.prototype,"GrowUpIconRuleEx");var InvestmentIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.INVESTMENT)?e.prototype.checkShowIcon.call(this):!1},t}(InvestmentIconRule);__reflect(InvestmentIconRuleEx.prototype,"InvestmentIconRuleEx");var JingCaiIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.JINGCAI)?e.prototype.checkShowIcon.call(this):!1},t}(JingCaiIconRule);__reflect(JingCaiIconRuleEx.prototype,"JingCaiIconRuleEx");var XuannvBefallIconRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.XUANNVBEFALL)?e.prototype.checkShowIcon.call(this):!1},t}(XuannvBefallIconRule);__reflect(XuannvBefallIconRuleEx.prototype,"XuannvBefallIconRuleEx");var DiscountRuleEx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return TopActivityConst.IsShow(TopActivityType.DISCOUNT)?e.prototype.checkShowIcon.call(this):!1},t}(DiscountRule);__reflect(DiscountRuleEx.prototype,"DiscountRuleEx");var TopActivityConst=function(){function e(){}return e.IsShow=function(e){var t=GameGlobal.Config.GButtonConfig[e];return t?1==(t.show||0):!1},e}();__reflect(TopActivityConst.prototype,"TopActivityConst");var TopActivityType;!function(e){e[e.FULI=1]="FULI",e[e.KAIFU=2]="KAIFU",e[e.DAILYCHARGE=3]="DAILYCHARGE",e[e.FIGHTPETFB=4]="FIGHTPETFB",e[e.SEVENDAY=5]="SEVENDAY",e[e.SHOOTUP=6]="SHOOTUP",e[e.TREASURE=7]="TREASURE",e[e.REBATE=8]="REBATE",e[e.GODPETAWARD=9]="GODPETAWARD",e[e.GODPETLOTTERY=10]="GODPETLOTTERY",e[e.GODLOTTERY=11]="GODLOTTERY",e[e.GROWUP=12]="GROWUP",e[e.INVESTMENT=13]="INVESTMENT",e[e.JINGCAI=14]="JINGCAI",e[e.XUANNVBEFALL=15]="XUANNVBEFALL",e[e.DISCOUNT=16]="DISCOUNT",e[e.STARSKINGLOTTERY=17]="STARSKINGLOTTERY"}(TopActivityType||(TopActivityType={}));var AuctionIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.LEVEL_CHANGE,MessageDef.AUCTION_REDPOINT_UPDATE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_112,!0)?!0:!1},t.prototype.checkShowRedPoint=function(){var e=ViewManager.ins().getView(AuctionMainPanel);return e&&(GameGlobal.AuctionModel.isRedPoint=!1),GameGlobal.AuctionModel.isRedPoint},t.prototype.tapExecute=function(){GameGlobal.AuctionModel.isRedPoint=!1,ViewManager.ins().open(AuctionMainPanel)},t}(RuleIconBase);__reflect(AuctionIconRule.prototype,"AuctionIconRule");var BagIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return GameGlobal.UserBag.bFullBag()||GameGlobal.UserBag.getIsExitUsedItem()},t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_128,!0)},t.prototype.tapExecute=function(){ViewManager.ins().open(BagWin)},t}(RuleIconBase);__reflect(BagIconRule.prototype,"BagIconRule");var DailyIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.DAILY_REDPOINT_NOTICE],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_48,!0)},t.prototype.checkShowRedPoint=function(){return GameGlobal.DailyModel.IsRedPoint()},t.prototype.tapExecute=function(){ViewManager.ins().open(DailyMainWin)},t}(RuleIconBase);__reflect(DailyIconRule.prototype,"DailyIconRule");var StringUtils=function(){function e(){}return e.IsNullOrEmpty=function(e){return null==e||""==e},e.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.getStringLength=function(e){for(var t=e.split(""),i=0,o=0;o<t.length;o++){var n=t[o];i+=this.isChinese(n)?2:1}return i},e.isChinese=function(e){var t=/^[\u4E00-\u9FA5]+$/;return t.test(e)?!1:!0},e.strByteLen=function(e){for(var t,i=0,o=0;o<e.length;o++){t=e.charCodeAt(o);do++i,t>>=8;while(t)}return i},e.complementByChar=function(t,i,o,n){void 0===o&&(o=" "),void 0===n&&(n=!0),t+="";var a=this.strByteLen(n?t.replace(e.HTML,""):t);return t+this.repeatStr(o,i-a)},e.repeatStr=function(e,t){for(var i="",o=0;t>o;o++)i+=e;return i},e.addColor=function(e,t){t=t||0,e=null==e?"":e;var i;return"string"==typeof t?i=String(t):"number"==typeof t&&(i="0x"+Number(t).toString(16)),"|C:"+i+"&T:"+e+"|"},e.Format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=e;if(t.length>0)if(1==t.length&&"object"==typeof t[0]){var n=t[0];for(var a in n)if(void 0!=n[a]){var r=new RegExp("({"+a+"})","g");o=o.replace(r,n[a])}}else for(var s=0;s<t.length;++s)if(void 0!=t[s]){var r=new RegExp("({)"+s+"(})","g");o=o.replace(r,t[s])}return o},e.FormatS=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!e)return"";if(!t||!t.length)return e;for(var o="",n=0,a=0,r=e.split(/(%d|%s)/g);a<r.length;a++){var s=r[a];o+=/(%d|%s)/g.test(s)?t[n++]||"":s}return o},e.ToSingleHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},e.numTenToChinese=function(e){switch(e){case 0:return"零";case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"七";case 8:return"八";case 9:return"九";case 10:return"十"}return""},e.numberToChinese=function(t){var i;if(10>=t)i=e.numTenToChinese(t);else if(100>t){var o=t%10,n=t/10;i=0==o?e.numTenToChinese(Math.floor(n))+"十":2>n?"十"+e.numTenToChinese(o):e.numTenToChinese(Math.floor(n))+"十"+e.numTenToChinese(o)}return i},e.HTML=/<[^>]+>/g,e}();__reflect(StringUtils.prototype,"StringUtils");var FirstRechargeIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.effX=RuleIconBase.POS1_X,i.effY=RuleIconBase.POS1_Y,i.firstTap=!0,i.updateMessage=[MessageDef.RECHARGE_FIRST_UPDATE,MessageDef.ACTIVITY_INFO,MessageDef.ACTIVITY_UPDATE],i.btn=t,i}return __extends(t,e),t.prototype.checkShowIcon=function(){return this.showIcon(),Deblocking.Check(DeblockingType.TYPE_131,!0)&&t.CheckShow()},t.prototype.showIcon=function(){var e=!1,t=GameGlobal.Config.FirstRechargeConfig;for(var i in t)if(!GameGlobal.RechargeModel.GetFirstRewardState(t[i].id)){e=!0;break}this.btn.icon=e?"ui_bm_shouchong":"ui_zc_z_chengzhangjijin"},t.CheckShow=function(){var e=GameGlobal.Config.FirstRechargeConfig;for(var t in e)if(!GameGlobal.RechargeModel.GetFirstRewardState(e[t].id))return!0;var i=GameGlobal.ActivityKaiFuModel.GetActivityDataById(11);if(i&&i.isOpenActivity())return!0;if(i&&i.canReward())return!0;var o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(12);if(o&&o.isOpenActivity())return!0;if(o&&o.canReward())return!0;var n=GameGlobal.ActivityKaiFuModel.GetActivityDataById(13);return n&&n.isOpenActivity()?!0:!1},t.prototype.getEffName=function(e){return this.DefEffe(e)},t.prototype.checkShowRedPoint=function(){return GameGlobal.GrowUpModel.IsRedPoint()},t.prototype.tapExecute=function(){this.firstTap=!1,ViewManager.ins().open(GrowUpWin)},t}(RuleIconBase);__reflect(FirstRechargeIconRule.prototype,"FirstRechargeIconRule");var FriendRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.FRIEND_RED_POINT_CHANGE,MessageDef.LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return GameGlobal.FriendModel.checkRedPoint()},t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_89,!0)},t.prototype.tapExecute=function(){ViewManager.ins().open(FriendMainPanel)},t}(RuleIconBase);__reflect(FriendRule.prototype,"FriendRule");var GuanQiaRuleIcon=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.RAID_KILL_MONSTER_COUNT],i.tar.imgf0.visible=!1,i.tar.imgf1.visible=!1,i.tar.imgf2.visible=!1,i.tar.currentState="s0",i}return __extends(t,e),t.prototype.DoHide=function(){this.tar.visible=!1},t.prototype.update=function(){e.prototype.update.call(this),this.tar.cbAuto.selected=GameGlobal.UserFb.mAuto,this.upDataGuanqia()},t.prototype.checkShowIcon=function(){return!GameGlobal.UserFb.nextMap},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.upDataGuanqia=function(){var e=GameGlobal.UserFb,t=e.guanqiaID;if(t>=0){var i=Math.min(3,e.config.bossNeedWave);this.tar.currentState="s"+i;var o=Math.min(e.killMonsterCount,e.config.bossNeedWave);this.SetVisibleState(o,i);var n=e.killMonsterCount>=e.config.bossNeedWave;this.tar.goBossBtn.visible=n,this.tar.imgOpen.visible=!n}else this.tar.currentState="s0"},t.prototype.SetVisibleState=function(e,t){var i=this.tar;1==t?i.imgf1.visible=e>=1:2==t?(i.imgf0.visible=e>=1,i.imgf2.visible=e>=2):3==t&&(i.imgf0.visible=e>=1,i.imgf1.visible=e>=2,i.imgf2.visible=e>=3)},t.prototype.tapExecute=function(e){e==this.tar.cbAuto?Deblocking.Check(DeblockingType.TYPE_3)?(GameGlobal.UserFb.mAuto=this.tar.cbAuto.selected,GameGlobal.UserFb.sendSetAuto()):this.tar.cbAuto.selected=!1:ViewManager.ins().open(GuanQiaRewardWin)},t}(RuleIconBase);__reflect(GuanQiaRuleIcon.prototype,"GuanQiaRuleIcon");var GuanQiaRuleIconTar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.Component);__reflect(GuanQiaRuleIconTar.prototype,"GuanQiaRuleIconTar");var LadderRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return!1},t.prototype.checkShowIcon=function(){return!0},t.prototype.tapExecute=function(){},t}(RuleIconBase);__reflect(LadderRule.prototype,"LadderRule");var MailIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.MAIL_DATA_CHANGE,MessageDef.MAIL_GET_ITEM],i}return __extends(t,e),t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_134,!0)},t.prototype.checkShowRedPoint=function(){return t.CheckShowRedPoint()?1:0},t.CheckShowRedPoint=function(){return MailModel.ins().mailData?MailModel.ins().getUnreadMail():!1},t.prototype.tapExecute=function(){ViewManager.ins().open(MailWin)},t}(RuleIconBase);__reflect(MailIconRule.prototype,"MailIconRule");var MysteryRule=function(e){function t(t){var i=e.call(this,t)||this;return i.firstTap=!0,i.effX=i.tar.width>>1,i.effY=i.tar.height>>1,i.updateMessage=[MessageDef.LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return!1},t.prototype.checkShowIcon=function(){return Deblocking.Check(DeblockingType.TYPE_138,!0)},t.prototype.tapExecute=function(){ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_MYSTERY,ShopController.EN_SHOP_INTEGRAL])},t}(RuleIconBase);__reflect(MysteryRule.prototype,"MysteryRule");var OpenDayGifRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.LOGINDAYGIF],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return GameGlobal.OpenDayGifModel.OpenDayPointRed()},t.prototype.checkShowIcon=function(){var e=GameGlobal.OpenDayGifModel.OpenDayIcon();return e&&(this.tar.icon=GameGlobal.OpenDayGifModel.GetShowDayImg()),Deblocking.Check(DeblockingType.TYPE_130,!0)&&e},t.prototype.tapExecute=function(){ViewManager.ins().open(OpenDayGifWin)},t.Open=function(){return Deblocking.Check(DeblockingType.TYPE_130)?GameGlobal.OpenDayGifModel.OpenDayIcon()?void ViewManager.ins().open(OpenDayGifWin):void UserTips.InfoTip("�����"):void 0},t}(RuleIconBase);__reflect(OpenDayGifRule.prototype,"OpenDayGifRule");var RankingRule=function(e){function t(t){var i=e.call(this,t)||this;return i.updateMessage=[MessageDef.LEVEL_CHANGE],i}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return!1},t.prototype.checkShowIcon=function(){return!1},t.prototype.tapExecute=function(){ViewManager.ins().open(RankingWin)},t}(RuleIconBase);__reflect(RankingRule.prototype,"RankingRule");var TextFlowMaker=function(){function e(){}return e.generateTextFlow=function(e){if(!e)return this.EMPTY_TABLE;for(var t=e.split("|"),i="",o=0,n=t.length;n>o;o++){var a=t[o];a&&0!=a.length&&(i+=this.getSingleTextFlow1(a))}return(new egret.HtmlTextParser).parser(i)},e.generateTextFlow1=function(e){for(var t=e.split("|"),i=[],o=0,n=t.length;n>o;o++)i.push(this.getSingleTextFlow(t[o]));return i},e.getSingleTextFlow1=function(e){for(var t,i="<font",o=this.Match(e),n=0,a=o.length;a>n;n++){var r=o[n].type,s=o[n].value;r==this.PROP_TEXT?t=s:r==this.STYLE_SIZE?i+=' size="'+parseInt(s)+'"':r==this.STYLE_COLOR?i+=' color="'+parseInt(s)+'"':t=s}return i+=">"+t+"</font>"},e.getSingleTextFlow=function(e){for(var t=this.Match(e),i={style:{}},o=0,n=t.length;n>o;o++){var a=t[o].type,r=t[o].value;a==this.PROP_TEXT?i.text=r:a==this.STYLE_SIZE?i.style.size=parseInt(r):a==this.STYLE_COLOR?i.style.textColor=parseInt(r):i.text=r}return i},e.consumeLabel=function(e,t,i){void 0===i&&(i=!0);var o="";return null==e||isNaN(e)||(o+=i?(t>e?"|C:0xff0000&T:":"|C:0x019704&T:")+e+"|/"+t:e),this.generateTextFlow(o)},e.Match=function(e){if(null!=e){var t=null;this.LIST.length=0;for(var i=0;99>i;++i){var o=e.match(this._REG);if(null==o||-1==o.index){this.LIST.push({type:t,value:e});break}null!=t&&this.LIST.push({type:t,value:e.substr(0,o.index)}),t=o[0].replace("&","").replace(":",""),e=e.substr(o.index+o[0].length)}return this.LIST}},e.getCStr=function(e){return this.numberList[e]?this.numberList[e]:""},e.EMPTY_TABLE=[],e._REG=new RegExp("&?[SCTU]:"),e.LIST=[],e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.numberList=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四"],e}();__reflect(TextFlowMaker.prototype,"TextFlowMaker");var TaskTraceIconRule=function(e){function t(t){var i=e.call(this,t)||this;return i.m_TaskXPos=null,i.m_id=0,i.TaskIndexs=[ViewIndexDef.EquipWearAssign,ViewIndexDef.ChapterClear,ViewIndexDef.PetActive,ViewIndexDef.MaterialFb,ViewIndexDef.HeavenFb,ViewIndexDef.ChapterGoto],i.updateMessage=[MessageDef.UPDATE_MAIN_TASK],i.taskTraceName=t.getChildByName("taskTraceName"),i.taskTraceAward0=t.getChildByName("priceicon0"),i.taskTraceAward1=t.getChildByName("priceicon1"),i}return __extends(t,e),t.prototype.checkShowIcon=function(){return this._CheckShowIcon()},t.prototype._CheckShowIcon=function(){var e=!1,t=GameGlobal.UserTask.mainTaskData[0];if(t){e=!0;var i=GameGlobal.UserTask.getTaskConfigById(t.id);if(i){switch(t.state){case 1:var o=this.TaskIndexs.indexOf(i.condition.type)>-1?1:i.condition.value;this.taskTraceName.textFlow=TextFlowMaker.generateTextFlow(i.desc+"|C:0xff0000&T:("+t.value+"/"+o+")|");break;case 2:this.taskTraceName.textFlow=TextFlowMaker.generateTextFlow(i.desc+"|C:0x00ff00&T:(完成)|")}this.showAwards(i.showAward),this.upDateTaskGuild()}if(this.m_TaskXPos||(this.m_TaskXPos=this.taskTraceName.x),this.m_id!=t.id){var n=egret.Tween.get(this.taskTraceAward0);n.to({x:this.m_TaskXPos+100,alpha:0},200).to({x:0},200).to({x:this.m_TaskXPos,alpha:1},200);var a=egret.Tween.get(this.taskTraceAward1);a.to({x:this.m_TaskXPos+202,alpha:0},200).to({x:0},200).to({x:this.m_TaskXPos+102,alpha:1},200);var r=egret.Tween.get(this.taskTraceName);r.to({x:this.m_TaskXPos+100,alpha:0},200).to({x:0},200).to({x:this.m_TaskXPos,alpha:1},200)}this.m_id=t.id}else e=!1;return e},t.prototype.showAwards=function(e){var t=0;for(var i in e)0==t?(this.taskTraceAward0.type=e[i].id,this.taskTraceAward0.setPrice(e[i].count,2)):1==t&&(this.taskTraceAward1.type=e[i].id,this.taskTraceAward1.setPrice(e[i].count,2)),t++},t.prototype.upDateTaskGuild=function(){var e=GameGlobal.UserTask.mainTaskData[0];if(e){var i=GameGlobal.UserTask.getTaskConfigById(e.id);if(i)switch(e.state){case 1:if(t[e.id]=!1,i.guide){var o=!0;i.guidecount&&(o=i.guidecount>(GameGlobal.GuideUtil.mGuideDoneCount[i.guide]||0)),o&&!ViewManager.ins().isShow(WelComeLandingPanel)&&GameGlobal.GuideUtil.Start(i.guide)}break;case TaskState.GET:i.guideAward&&GameGlobal.GuideUtil.Finish(ViewManager.ins().getView(PlayFunView),this.tar),0==t[e.id]&&(delete t[e.id],GameGlobal.PlotModel.OnTaskFinish(e.id))}}},t.prototype.getEffName=function(e){if(GameGlobal.actorModel.level<GameGlobal.Config.GuideBaseConfig.showeff)return null;var i,o=GameGlobal.UserTask.mainTaskData[0];if(o)switch(o.state){case 0:GameGlobal.GameLogic.actorModel.level<=20;break;case TaskState.GET:i="battle_001"}return this.effX=t.EFF_X,this.effY=t.EFF_Y,i},t.prototype.tapExecute=function(){var e=GameGlobal.UserTask.mainTaskData[0];if(e)if(1==e.state){var t=GameGlobal.UserTask.getTaskConditionById(e.id);30010==t.type&&GameGlobal.UserFb.guanqiaID<GameGlobal.Config.GuideBaseConfig.chapterid?GuanQiaRewardPanel.CLICK_TASK_COMEIN=!0:GuanQiaRewardPanel.CLICK_TASK_COMEIN=!1,ViewManager.ins().Guide(t.type,t.value)}else GameGlobal.UserTask.sendGetTask(e.id),GameGlobal.UserTask.getTaskConfigById(e.id+1)||UserTips.ins().showTips("已完成所有任务!")},t.UN_TASK_LIST={},t.EFF_X=173,t.EFF_Y=47,t}(RuleIconBase);__reflect(TaskTraceIconRule.prototype,"TaskTraceIconRule");var PlotModel=function(e){function t(){var t=e.call(this)||this;return t.m_Task={},t.m_ChapterEnter={},t.m_ChapterExit={},t}return __extends(t,e),t.prototype.Init=function(){var e=GameGlobal.Config.StoryConfig;for(var t in e){var i=e[t];if(i.type){var o=i.type.type,n=i.type.id;switch(o){case 0:this.m_ChapterEnter[n]=i.id;break;case 1:this.m_Task[n]=i.id;break;case 2:this.m_ChapterExit[n]=i.id}}}},t.prototype.OnPlot=function(e,t){var i=e[t];if(!i)return!1;delete e[t];var o=GameGlobal.Config.StoryConfig[i].storyid;return PlotPanel.OpenPlot(o,t),!0},t.prototype.OnTaskFinish=function(e){return this.OnPlot(this.m_Task,e)},t.prototype.OnChapterBattleEnter=function(e){return this.OnPlot(this.m_ChapterEnter,e)},t.prototype.OnChapterExit=function(e){return this.OnPlot(this.m_ChapterExit,e)},t}(BaseSystem);__reflect(PlotModel.prototype,"PlotModel");var PlotPanel=function(e){function t(){var t=e.call(this)||this;return t.m_CurMsg="",t.m_FlagId=0,t.skinName="PlotSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t._OnClick,t),t}return __extends(t,e),t.OpenPlot=function(e,i){if(void 0===i&&(i=0),GameGlobal.Config.StoryDialogueConfig[e]){var o=ViewManager.ins().getView(t);o||(o=ViewManager.ins().open(t)),o.SetData(e,i)}},t.prototype.GetComp=function(e){var t=new eui.Component;return t.skinName=e,t.visible=!1,this.addChild(t),t},t.prototype.GetRightComp=function(){return this.m_RightComp||(this.m_RightComp=this.GetComp("PlotRightMsgSkin"),this.m_RightComp.__out_x__=StageUtils.WIDTH,this.m_RightComp.__in_x__=StageUtils.WIDTH-356,this.addChild(this.m_RightComp)),this.m_RightComp.visible=!0,this.m_RightComp.y=650,this.m_RightComp},t.prototype.GetLeftComp=function(){return this.m_LeftComp||(this.m_LeftComp=this.GetComp("PlotLeftMsgSkin"),this.m_LeftComp.__out_x__=-356,this.m_LeftComp.__in_x__=0,this.addChild(this.m_LeftComp)),this.m_LeftComp.visible=!0,this.m_LeftComp.y=650,this.m_LeftComp},t.prototype._OnClick=function(){this.m_CurComp&&(this.m_CurComp.textLabel.text.length<this.m_CurMsg.length?(this.m_CurComp.textLabel.text=this.m_CurMsg,TimerManager.ins().remove(this.UpdateDesc,this),this.WaitMsg()):(TimerManager.ins().remove(this.UpdateMsg,this),this.UpdateMsg()))},t.prototype.SetData=function(e,t){return this.m_Index=0,this.m_FlagId&&GameGlobal.MessageCenter.dispatch(MessageDef.PLOT_PLAY_END,this.m_FlagId),this.m_FlagId=t,this.m_PlotConfig=GameGlobal.Config.StoryDialogueConfig[e],this.m_PlotConfig?void this.UpdateMsg():(UserTips.ErrorTip("剧情ID："+e+"不存在"),void this.CloseSelf())},t.prototype.UpdateMsg=function(){var e=this.m_PlotConfig[this.m_Index];if(!e)return this.CloseSelf(),void(this.m_FlagId&&GameGlobal.MessageCenter.dispatch(MessageDef.PLOT_PLAY_END,this.m_FlagId));var i=!0,o=this.m_PlotConfig[this.m_Index-1];if(o&&(i=!(o.pos==e.pos&&o.characterid==e.characterid),i&&this.m_CurComp)){var n=this.m_CurComp;egret.Tween.removeTweens(n),egret.Tween.get(n).to({x:n.__out_x__},t.IMG_SPEED).call(function(){n.visible=!1})}if(++this.m_Index,i){var a=void 0;0==e.pos?a=this.GetLeftComp():1==e.pos&&(a=this.GetRightComp()),this.m_CurComp=a,this.m_CurComp&&(egret.Tween.removeTweens(this.m_CurComp),this.m_CurComp.x=this.m_CurComp.__out_x__,egret.Tween.get(this.m_CurComp).to({x:this.m_CurComp.__in_x__},t.IMG_SPEED))}e.name?this.m_CurComp.nameLabel.text=e.name:this.m_CurComp.nameLabel.text="",e.icon?this.m_CurComp.img.source=e.icon:this.m_CurComp.img.source="",this.m_CurMsg=e.des,this.m_CurComp.textLabel.text="",TimerManager.ins().doTimer(t.LABEL_SPEED,e.des.length,this.UpdateDesc,this,this.WaitMsg,this)},t.prototype.UpdateDesc=function(){this.m_CurComp.textLabel.text=this.m_CurMsg.substr(0,this.m_CurComp.textLabel.text.length+1)
},t.prototype.WaitMsg=function(){TimerManager.ins().doTimer(2e3,1,this.UpdateMsg,this)},t.LAYER_LEVEL=LayerManager.UI_Message,t.LABEL_SPEED=50,t.IMG_SPEED=200,t}(BaseEuiView);__reflect(PlotPanel.prototype,"PlotPanel");var PlotSimplePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="PlotSimpleSkin",t.width=0,t.height=0,t.posGroup.x=0,t.posGroup.y=-140,t.anim.play(),t}return __extends(t,e),t.prototype.SetMsg=function(e){this.label.text=e,this.leftImg.width=this.rightImg.width=(this.label.width>>1)+30},t}(eui.Component);__reflect(PlotSimplePanel.prototype,"PlotSimplePanel");var PositionForeshowPanel=function(e){function t(){var t=e.call(this)||this;return t.m_nSex=1,t.m_gBtnTitel=[],t.m_gSkill=[],t.skinName="PositionForeshowSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnList.itemRenderer=PositionItem,this.awardList.itemRenderer=ItemBase},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.boyCheckBox.selected=!0,this.girlCheckBox.selected=!1,this.commonDlg.OnAdded(this),this.commonDlg.dialogCloseBtn.visible=!1,this._AddClick(this.gotoBtn,this.tap),this._AddItemClick(this.skillList,this.skiilIconClick),this._AddItemClick(this.btnList,this.itemClick),this.AddChange(this.boyCheckBox,this.checkBox),this.AddChange(this.girlCheckBox,this.checkBox),this.observe(MessageDef.POSITION_STATE_CHANGE,this.itemClick),this.observe(MessageDef.POSITION_AWARD_CHANGE,this.getAward),this.btnList.dataProvider=new eui.ArrayCollection(this.m_gBtnTitel),this.btnList.selectedIndex=0;var i=GameGlobal.Config.StationConfig,o=GameGlobal.PositionForeshowModel.position_info;for(var n in i)GameGlobal.actorModel.level>=i[n].showlv&&3!=o.data[i[n].skinid-1].typ&&this.m_gBtnTitel.push({name:i[n].statname,id:i[n].skinid-1});this.updateCentent(),this.itemClick()},t.prototype.updateCentent=function(){var e=GameGlobal.Config.StationConfig[this.btnList.selectedItem.id+1];if(this.awardList.dataProvider=new eui.ArrayCollection(e.rewards),this.nameTxt.text=e.name,this.girlCheckBox.visible=3==this.btnList.selectedIndex,this.boyCheckBox.visible=3==this.btnList.selectedIndex,3!=this.btnList.selectedItem.id){var t=new RoleShowData;t.clothID=e.pid,this.roleShowpanel.SetAll(t)}else LingtongViewHelper.SetRole(this.roleShowpanel,this.m_nSex);this.tipsImg.source=e.itemid,this.skillList.dataProvider=new eui.ArrayCollection(this.m_gSkill),e.attrpower?(this.counterGroup.visible=!0,this.counterLabel.SetColor(Color.Red),this.counterLabel.SetEndTime(GameGlobal.PositionForeshowModel.position_info.creatTime+e.attrpower,DurationLabel.TIMETEXT_TYPE_HHMMSS)):this.counterGroup.visible=!1,this.getAward()},t.prototype.checkBox=function(e){switch(e.currentTarget==this.boyCheckBox?this.girlCheckBox.selected=!1:this.boyCheckBox.selected=!1,e.currentTarget){case this.boyCheckBox:this.m_nSex=1;break;case this.girlCheckBox:this.m_nSex=2}this.updateCentent()},t.prototype.tap=function(e){var t=this.btnList.selectedItem.id,i=GameGlobal.PositionForeshowModel.position_info.data[t].typ;if(1==i)GameGlobal.PositionForeshowModel.sendGetAward(t+1);else if(0==i)switch(t){case 0:break;case 1:ViewManager.ins().open(GrowUpWin,1),this.CloseSelf();break;case 2:GameGlobal.RechargeModel.sendRecharge(6);break;case 3:Deblocking.Check(DeblockingType.TYPE_116)&&(ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_YUANBAO]),this.CloseSelf());break;case 4:Deblocking.Check(DeblockingType.TYPE_28)?(ViewManager.ins().open(GodLotteryWin),this.CloseSelf()):GameGlobal.UserTips.showTips("敬请期待")}},t.prototype.itemClick=function(){var e=GameGlobal.Config.StationConfig[this.btnList.selectedIndex+1];this.gotoBtn.label=e.btn,1==GameGlobal.PositionForeshowModel.position_info.data[this.btnList.selectedItem.id].typ&&(this.gotoBtn.label="领取"),3==GameGlobal.PositionForeshowModel.position_info.data[this.btnList.selectedItem.id].typ&&(this.gotoBtn.label="已领取"),this.titleLabel.text=this.btnList.selectedItem.name,this.skillsDispose(),this.updateCentent()},t.prototype.skillsDispose=function(){var e=GameGlobal.Config.StationConfig[this.btnList.selectedIndex+1];switch(this.m_gSkill=[],this.skillList.itemRenderer=PetSkillIconItem,this.btnList.selectedIndex){case 0:var t=GameGlobal.XianlvModel.GetXianlvInfo(e.pid);this.m_gSkill.push(t.GetSkillId());break;case 1:t=GameGlobal.XianlvModel.GetXianlvInfo(e.pid),this.m_gSkill.push(t.GetSkillId());break;case 2:this.skillList.itemRenderer=HavingSkillIcon;var i=GameGlobal.HavingModel.getBaseConfig();this.m_gSkill.length=6,this.m_gSkill[0]=i.skill,this.m_gSkill[1]=i.hskill;for(var o=0;o<GameGlobal.HavingMagicModel.skillData.length;o++){var n=GameGlobal.HavingMagicModel.skillData[o];n&&n.attrData&&4==n.attrData.length&&(this.m_gSkill[o+2]=n.attrData[3].skillNo)}break;case 3:this.m_gSkill.push(GameGlobal.Config.BabyActivationConfig[this.m_nSex].skill[0]);break;case 4:this.skillList.itemRenderer=HavingSkillIcon,i=GameGlobal.Config.AirMarshalBaseConfig,this.m_gSkill.length=6,this.m_gSkill[0]=i.skill,this.m_gSkill[1]=i.hskill;for(var a=GameGlobal.TianShenModel.mTianShenList[e.pid].GetSkillIds(),o=0;o<a.length;o++)this.m_gSkill[o+2]=a[o]}},t.prototype.skiilIconClick=function(){var e=this.skillList.selectedIndex,t=this.skillList.selectedItem;return t?void ViewManager.ins().open(PetSkillTipPanel,e>2?2:e,t,!1):void ViewManager.ins().open(HavingSkillTipPanel,1)},t.prototype.getAward=function(){var e=!0,t=GameGlobal.PositionForeshowModel.position_info.data[this.btnList.selectedItem.id].typ;3==t&&(e=!1,this.gotoBtn.label="已领取"),2==t&&(e=!1),this.gotoBtn.touchEnabled=e,this.gotoBtn.filters=e?null:Color.GetFilter()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(PositionForeshowPanel.prototype,"PositionForeshowPanel");var PositionItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="BtnTab0Skin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.labelDisplay.text=this.data.name},t}(eui.ItemRenderer);__reflect(PositionItem.prototype,"PositionItem");var PositionForeshowModel=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_position_info,t._getPositionInfo),t}return __extends(t,e),t.prototype.isRedPoint=function(){if(!this.position_info)return!1;for(var e=0,t=this.position_info.data;e<t.length;e++){var i=t[e];if(1==i.typ)return!0}return!1},t.prototype.sendGetAward=function(e){var t=new Sproto.cs_position_getawards_request;t.no=e,this.Rpc(C2sProtocol.cs_position_getawards,t,function(e){e.ret&&MessageCenter.ins().dispatch(MessageDef.POSITION_AWARD_CHANGE)},this)},t.prototype._getPositionInfo=function(e){e&&(this.position_info=e,MessageCenter.ins().dispatch(MessageDef.POSITION_STATE_CHANGE))},t}(BaseSystem);__reflect(PositionForeshowModel.prototype,"PositionForeshowModel");var QujingModel=function(e){function t(){var t=e.call(this)||this;return t.mEscortBaseInfo=new EscortBaseInfo,t.regNetMsg(S2cProtocol.sc_escort_info_update,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_escort_reward_show,t._RecvRewardShow),t.regNetMsg(S2cProtocol.sc_escort_record_data,t._RecvRecordList),t.regNetMsg(S2cProtocol.sc_escort_record_update,t._RecvUpdateRecord),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype._DoInitInfo=function(e){this.mEscortBaseInfo.UpdateInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.QUJING_UPDATE_BASEINFO)},t.prototype._RecvRewardShow=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.QUJING_SHOW_REWARD,e)},t.prototype._RecvRecordList=function(e){this.mRecordList=new Array;for(var t=0,i=e.records;t<i.length;t++){var o=i[t];if(2==o.type){var n=new RecordInfo;n.UpdateInfo(o),this.mRecordList.push(n)}}},t.prototype._RecvUpdateRecord=function(e){if(2==e.record.type){for(var t=!1,i=0,o=this.mRecordList;i<o.length;i++){var n=o[i];if(n.mRecordId==e.record.recordId){n.UpdateInfo(e.record),t=!0;break}}if(!t){var a=new RecordInfo;a.UpdateInfo(e.record),this.mRecordList.push(a),this.RecordRobbedFlag(!0)}GameGlobal.MessageCenter.dispatch(MessageDef.QUJING_UPDATE_RECORD)}},t.prototype.SendEnterEscortView=function(){this.Rpc(C2sProtocol.cs_escort_enter,new Sproto.cs_escort_enter_request)},t.prototype.SendRefreshQuality=function(e){var t=new Sproto.cs_escort_refresh_quality_request;t.type=e,this.Rpc(C2sProtocol.cs_escort_refresh_quality,t)},t.prototype.SendStartEscort=function(){this.Rpc(C2sProtocol.cs_escort_perform,new Sproto.cs_escort_perform_request)},t.prototype.SendGainAward=function(){this.Rpc(C2sProtocol.cs_escort_get_reward,new Sproto.cs_escort_get_reward_request)},t.prototype.SendQuilkFinish=function(){this.Rpc(C2sProtocol.cs_escort_quick_complete,new Sproto.cs_escort_quick_complete_request)},t.prototype.SendRevenge=function(e){this.mEscortFightType=t.ESCORT_FIGHT_TYPE_REVENGE;var i=new Sproto.cs_escort_avenge_request;i.recordId=e,this.Rpc(C2sProtocol.cs_escort_avenge,i)},t.prototype.SendEscortList=function(){var e=this;this.Rpc(C2sProtocol.cs_escort_rob_list,new Sproto.cs_escort_rob_list_request,function(t){e.mEscortList=new Array;for(var i=0,o=t.escortList;i<o.length;i++){var n=o[i],a=new EscortInfo;a.UpdateInfo(n),e.mEscortList.push(a)}GameGlobal.MessageCenter.dispatch(MessageDef.QUJING_UPDATE_ESCORTLIST)},this)},t.prototype.SendRob=function(e){this.mEscortFightType=t.ESCORT_FIGHT_TYPE_ROB;var i=new Sproto.cs_escort_rob_perform_request;i.playerId=e,this.Rpc(C2sProtocol.cs_escort_rob_perform,i)},t.prototype.SendGetEscortInfo=function(e){var t=this,i=new Sproto.cs_escort_catch_info_request;i.playerId=e,this.Rpc(C2sProtocol.cs_escort_catch_info,i,function(e){if(e&&e.escortInfo){var i=t.GetEscortInfo(e.escortInfo.playerid);return i.UpdateInfo(e.escortInfo),i.mRobbedCount>=GameGlobal.Config.EscortBaseConfig.robnum?void UserTips.ins().showTips("已经被抢光了"):e.escortInfo.robMark?void UserTips.ins().showTips("已经拦截过该玩家"):void GameGlobal.MessageCenter.dispatch(MessageDef.QUJING_SHOW_ROBVIEW,e.escortInfo.playerid)}},this)},Object.defineProperty(t.prototype,"baseInfo",{get:function(){return this.mEscortBaseInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recordList",{get:function(){return this.mRecordList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"escortList",{get:function(){return this.mEscortList},enumerable:!0,configurable:!0}),t.prototype.GetRecordInfo=function(e){for(var t=0,i=this.mRecordList;t<i.length;t++){var o=i[t];if(o.mRecordId==e)return o}},t.prototype.GetEscortInfo=function(e){for(var t=0,i=this.mEscortList;t<i.length;t++){var o=i[t];if(o.mPlayerId==e)return o}},t.prototype.IsDoudleAwardTime=function(){var e=GameGlobal.Config.EscortBaseConfig.doubletime;return this._IsBetween(e[0])||this._IsBetween(e[1])},t.prototype._IsBetween=function(e){var t=new Date(GameServer.serverTimeMilli),i=GameServer.serverTimeMilli,o=e.star.split(":"),n=parseInt(o[0]),a=parseInt(o[1]);t.setHours(n,a);var r=t.getTime();o=e.ends.split(":");var s=parseInt(o[0]),l=parseInt(o[1]);t.setHours(s,l);var c=t.getTime();if(s>=n)return i>=r&&c>=i;t.setHours(23,59,59);var u=r,p=t.getTime(),h=t.setHours(0,0,0),d=c;return i>=u&&p>=i||i>=h&&d>=i},t.prototype.GetDoubleTimeDesc=function(){var e=GameGlobal.Config.EscortBaseConfig.doubletime,t=e[0].star.split(":"),i=parseInt(t[0]),o=parseInt(t[1]),n=new Date(GameServer.serverTimeMilli);n.setHours(i,o);var a=n.getTime();t=e[1].ends.split(":");var r=parseInt(t[0]),s=parseInt(t[1]),l=new Date(GameServer.serverTimeMilli);l.setHours(r,s);var c=l.getTime();return GameServer.serverTimeMilli<=a&&GameServer.serverTimeMilli>=c?"护送时间：全天 "+e[0].star+"-"+e[0].ends+"双倍":"护送时间：全天 "+e[1].star+"-"+e[1].ends+"双倍"},t.prototype.IsCurQuality=function(e){return this.mEscortBaseInfo.mQuality==e},t.prototype.IsMaxQuality=function(){return 5==this.mEscortBaseInfo.mQuality},t.prototype.GetConfigByQuality=function(e){for(var t in GameGlobal.Config.EscortAwardConfig){var i=GameGlobal.Config.EscortAwardConfig[t];if(i.quality==e)return i}},t.prototype.CanRob=function(e){return e==GameGlobal.actorModel.actorID?(UserTips.ins().showTips("不可拦截自己"),!1):this.mEscortBaseInfo.mRobCount>=GameGlobal.Config.EscortBaseConfig.robtime?(UserTips.ins().showTips("拦截次数已经用完了"),!1):!0},t.prototype.HasAward=function(){return this.mEscortBaseInfo?this.mEscortBaseInfo.mState==t.ESCORT_STATE_DONE:!1},t.prototype.HasRobbed=function(){return this.mRobbedFlag},t.prototype.RecordRobbedFlag=function(e){this.mRobbedFlag=e,GameGlobal.MessageCenter.dispatch(MessageDef.QUJING_ROBBEDFLAG_CHANGE)},t.REFRESH_TYPE_ITEM=1,t.REFRESH_TYPE_QUILK=2,t.REFRESH_TYPE_NORMAL=3,t.ESCORT_STATE_FREE=1,t.ESCORT_STATE_DOING=2,t.ESCORT_STATE_DONE=3,t.ESCORT_FIGHT_TYPE_ROB=1,t.ESCORT_FIGHT_TYPE_REVENGE=2,t}(BaseSystem);__reflect(QujingModel.prototype,"QujingModel");var EscortBaseInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mEscortCount=e.escortCount,this.mRobCount=e.robCount,this.mState=e.status,this.mQuality=e.quality,this.mFinishTime=e.finishTime},e}();__reflect(EscortBaseInfo.prototype,"EscortBaseInfo");var EscortInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mPlayerId=e.playerid,this.mPlayerName=e.playerName,this.mPower=e.power,this.mQuality=e.quality,this.mRobbedCount=e.catchCount,this.mFinishTime=e.finishTime,this.mRobMark=e.robMark},e}();__reflect(EscortInfo.prototype,"EscortInfo");var RecordInfo=function(){function e(){}return e.prototype.UpdateInfo=function(e){this.mPlayerId=e.playerId,this.mPlayerName=e.name,this.mRecordId=e.recordId,this.mType=e.type,this.mQuality=e.quality,this.mPower=e.power,this.mType=e.time,this.mWinFlag=e.isWin,this.mOperFlag=e.operate},e}();__reflect(RecordInfo.prototype,"RecordInfo");var QujingAwardWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="QujingAwardSkin",t._AddClick(t.btnAward,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="取经奖励",this.UpdateContent(e[0])},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.UpdateContent=function(e){var t=GameGlobal.QujingModel.baseInfo,i=GameGlobal.QujingModel.GetConfigByQuality(t.mQuality);this.labName.text=i.name,this.labName.textColor=ItemBase.GetColorByQuality(i.quality-1),this.imgIcon.source=i.icon;for(var o=1,n=0,a=e.reachReward||[];n<a.length;n++){var r=a[n],s="labAward"+o;if(this[s]){this[s].visible=!0;var l=this.GetLossCount(r,e.lossReward||[]),c="|C:0x6e330b&T:"+this.GetItemName(r)+"：||C:0x019704&T:"+r.count+"|";l&&(c+="|C:0xdb0000&T:  "+l+"| "),this[s].textFlow=TextFlowMaker.generateTextFlow(c)}o++}o=1;for(var u=0,p=e.record;u<p.length;u++){var h=p[u],d="groupTip"+o;if(this[d]){this[d].visible=!0;var c="|C:0x019704&T:"+h.name+"||C:0x6e330b&T:抢夺了我的||C:0xdb0000&T:"+i.name+"|";this["labTip"+o].textFlow=TextFlowMaker.generateTextFlow(c),this["labResult"+o].text=h.isWin?"抵御失败":"抵御成功",this["labResult"+o].textColor=h.isWin?14352384:104196}o++}},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnAward:GameGlobal.QujingModel.SendGainAward(),ViewManager.ins().close(this)}},t.prototype.GetLossCount=function(e,t){for(var i=0,o=t;i<o.length;i++){var n=o[i];if(e.id==n.id)return n.count}},t.prototype.GetItemName=function(e){if(0==e.type)return RewardData.getCurrencyName(e.id);var t=GlobalConfig.ins().ItemConfig[e.id];return t.name},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(QujingAwardWin.prototype,"QujingAwardWin");var QujingChooseItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.SetItemData=function(e){this.labName.text=e.name,this.labName.textColor=ItemBase.GetColorByQuality(e.quality-1),this.imgIcon.source=e.icon,this.mQuality=e.quality;for(var t=1,i=0,o=e.reward;i<o.length;i++){var n=o[i],a="item"+t;this[a]&&(this[a].visible=!0,this[a].setItemData(n)),t++}this.imgChoose.visible=GameGlobal.QujingModel.IsCurQuality(e.quality)},t.prototype.SetChooseState=function(e){this.imgChoose.visible=e==this.mQuality},t}(eui.Component);__reflect(QujingChooseItem.prototype,"QujingChooseItem",["eui.UIComponent","egret.DisplayObject"]);var QujingChooseWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="QujingChooseSkin",t.commonWindowBg.SetTitle("取经东归"),t._AddClick(t.btnRefresh,t._OnClick),t._AddClick(t.btnOneKey,t._OnClick),t._AddClick(t.btnGoto,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=GameGlobal.QujingModel.baseInfo;this.mChooseQuality=e.mQuality;for(var t=CommonUtils.GetArray(GameGlobal.Config.EscortAwardConfig,"id"),i=1,o=0,n=t;o<n.length;o++){var a=n[o],r="chooseItem"+i;this[r]&&this[r].SetItemData(a),i++}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.QUJING_UPDATE_BASEINFO,this.UpdateList),this.commonWindowBg.OnAdded(this),this.UpdateContent()},t.prototype.OnClose=function(){TimerManager.ins().remove(this._DoTimer,this),this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnGoto:GameGlobal.QujingModel.SendStartEscort(),ViewManager.ins().close(this);break;case this.btnOneKey:this.HandleOneKeyRefresh();break;case this.btnRefresh:this.HandleRefresh()}},t.prototype.UpdateList=function(){this.RefreshOneKeyCost();var e=GameGlobal.QujingModel.baseInfo;this.mCurIdx=1,this.mMaxCount=e.mQuality+15-this.mChooseQuality,this.SetButtonState(!0),this.AddTimer(100,this.mMaxCount,this._DoTimer)},t.prototype.UpdateContent=function(){var e=GameGlobal.QujingModel.baseInfo,t=GameGlobal.Config.EscortBaseConfig.escortnum;this.labCount.text=t-e.mEscortCount+"/"+t;var i=GameGlobal.Config.EscortAwardConfig[5],o="|C:0x6e330b&T:护送|C:0xdb0000&T:"+i.name+"||C:0x6e330b&T:被拦截无损失(||C:0x019704&T:优先使用绑元||C:0x6e330b&T:)||";this.labTip.textFlow=TextFlowMaker.generateTextFlow(o);var n=GameGlobal.Config.EscortBaseConfig.aotucost;this.piOneKey.type=n.id,this.piOneKey.price=n.count,this.RefreshOneKeyCost()},t.prototype.RefreshOneKeyCost=function(){var e=GameGlobal.Config.EscortBaseConfig.refreshcost;this.piRefresh.type=e.id,this.piRefresh.price=e.count;var t=GameGlobal.Config.EscortBaseConfig.aotuitem;return GameGlobal.UserBag.GetCount(t.id)>=t.count?(this.piOneKey.type=t.id,void(this.piOneKey.price=t.count)):void 0},t.prototype._DoTimer=function(){this.mChooseQuality=this.mChooseQuality%5+1,this.chooseItem1.SetChooseState(this.mChooseQuality),this.chooseItem2.SetChooseState(this.mChooseQuality),this.chooseItem3.SetChooseState(this.mChooseQuality),this.chooseItem4.SetChooseState(this.mChooseQuality),this.chooseItem5.SetChooseState(this.mChooseQuality),this.mCurIdx++,this.mCurIdx>=this.mMaxCount&&this.SetButtonState(!1)},t.prototype.SetButtonState=function(e){this.btnGoto.enabled=!e,this.btnOneKey.enabled=!e,this.btnRefresh.enabled=!e,this.btnGoto.filters=e?Color.GetFilter():null,this.btnOneKey.filters=e?Color.GetFilter():null,this.btnRefresh.filters=e?Color.GetFilter():null},t.prototype.HandleRefresh=function(){if(GameGlobal.QujingModel.IsMaxQuality())return void UserTips.ins().showTips("当前已是最高品质");var e=GameGlobal.Config.EscortBaseConfig.refreshcost;Checker.Money(e.id,e.count)&&GameGlobal.QujingModel.SendRefreshQuality(QujingModel.REFRESH_TYPE_NORMAL)},t.prototype.HandleOneKeyRefresh=function(){if(GameGlobal.QujingModel.IsMaxQuality())return void UserTips.ins().showTips("当前已是最高品质");var e=GameGlobal.Config.EscortBaseConfig.aotuitem;if(GameGlobal.UserBag.GetCount(e.id)>=e.count)return void GameGlobal.QujingModel.SendRefreshQuality(QujingModel.REFRESH_TYPE_ITEM);var t=GameGlobal.Config.EscortBaseConfig.aotucost;Checker.Money(t.id,t.count)&&GameGlobal.QujingModel.SendRefreshQuality(QujingModel.REFRESH_TYPE_QUILK)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(QujingChooseWin.prototype,"QujingChooseWin",["ICommonWindow"]);var QujingEscortItem=function(e){function t(){var t=e.call(this)||this;return t.setSkin(new QujingEscortItemSkin),t._AddClick(t.item,t._OnClick),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.OnRemove,t),t}return __extends(t,e),t.prototype.SetItem=function(e,t,i){var o=this;this.mDoneTime=e.mFinishTime,this.mPlayerId=e.mPlayerId,this.mRobbedCount=e.mRobbedCount,this.mInfo=i;var n=e.mQuality;this.labName.textColor=ItemBase.GetColorByQuality(n-1),this.durationLab.SetColor(ItemBase.GetColorByQuality(n-1)),this.durationLab.SetEndTime(this.mDoneTime,DurationLabel.TIMETEXT_TYPE_MMSS),this.durationLab.SetCallbackFunc(function(){o.parent.removeChild(o)});var a=GameGlobal.QujingModel.GetConfigByQuality(n);this.imgIcon.source=a.icon,this.labName.text=e.mPlayerName,this.labPower.text="战力:"+CommonUtils.overLength(e.mPower),this.AddTimer(t,1,this._SetAnimation)},t.prototype._OnClick=function(){return GameGlobal.Config.EscortBaseConfig.robnum<=this.mRobbedCount?void UserTips.ins().showTips("已经被抢光了"):void(GameGlobal.QujingModel.CanRob(this.mPlayerId)&&GameGlobal.QujingModel.SendGetEscortInfo(this.mPlayerId))},t.prototype._SetAnimation=function(){var e=egret.Tween.get(this.item,{loop:!0});e.to({x:900},1e3*this.mInfo.time).wait(1e3*(26-this.mInfo.time))},t.prototype.OnRemove=function(){egret.Tween.removeTweens(this.item)},t}(BaseView);__reflect(QujingEscortItem.prototype,"QujingEscortItem");var QujingMainWin=function(e){function t(){var t=e.call(this)||this;return t.mSettingList=[{xPos:-200,yPos:20,time:22},{xPos:-400,yPos:180,time:26},{xPos:-100,yPos:320,time:20},{xPos:-300,yPos:20,time:24},{xPos:0,yPos:240,time:18},{xPos:-150,yPos:400,time:21},{xPos:-350,yPos:370,time:25},{xPos:-100,yPos:80,time:20},{xPos:-200,yPos:450,time:22},{xPos:-250,yPos:220,time:23}],t.skinName="QujingMainSkin",t.commonWindowBg.SetTitle("取经东归"),t._AddClick(t.btnEscort,t._OnClick),t._AddClick(t.btnRecord,t._OnClick),t._AddClick(t.labQuilkFinish,t._OnClick),GameGlobal.QujingModel.SendEnterEscortView(),GameGlobal.QujingModel.SendEscortList(),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.durationLab.SetColor(7222027)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.QUJING_UPDATE_BASEINFO,this.UpdateContent),this.observe(MessageDef.QUJING_SHOW_REWARD,this.RecordReward),this.observe(MessageDef.QUJING_UPDATE_ESCORTLIST,this.ShowEscortList),this.observe(MessageDef.QUJING_SHOW_ROBVIEW,this.ShowRobView),this.commonWindowBg.OnAdded(this),this.shuffleList()},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnRecord:ViewManager.ins().open(QujingRecordWin);break;case this.btnEscort:this.HandleEscort();break;case this.labQuilkFinish:this.HandleQuilkFinish()}},t.prototype.UpdateContent=function(){var e=GameGlobal.QujingModel.baseInfo,t=GameGlobal.Config.EscortBaseConfig.escortnum;this.labCount.text=t-e.mEscortCount+"/"+t;var i=GameGlobal.Config.EscortBaseConfig.robtime;this.labRobCount.text=i-e.mRobCount+"/"+i,this.groupEscorting.visible=e.mState==QujingModel.ESCORT_STATE_DOING,this.btnEscort.label=this.GetBtnLabelText(e.mState),this.imgDouble.visible=GameGlobal.QujingModel.IsDoudleAwardTime(),this.labQuilkFinish.textFlow=(new egret.HtmlTextParser).parser("<font color='#019704'><u>快速完成</u></font>"),this.mItem&&this.mItem.parent&&(this.panel.removeChild(this.mItem),this.mItem=null),e.mState==QujingModel.ESCORT_STATE_DOING?(this.durationLab.SetEndTime(e.mFinishTime,DurationLabel.TIMETEXT_TYPE_MMSS),this.SetMyEscortInfo()):this.durationLab.Stop()},t.prototype.RecordReward=function(e){this.mShowRewardInfo=e,ViewManager.ins().open(QujingAwardWin,this.mShowRewardInfo)},t.prototype.ShowRobView=function(e){ViewManager.ins().open(QujingRevengeWin,e,QujingModel.ESCORT_FIGHT_TYPE_ROB)},t.prototype.ShowEscortList=function(){for(var e=GameGlobal.QujingModel.escortList,t=0,i=0,o=e;i<o.length;i++){var n=o[i],a=this.mSettingList[t];if(!a)break;var r=new QujingEscortItem;r.$setX(a.xPos),r.$setY(a.yPos),r.SetItem(n,.3*t,a),this.panel.addChild(r),t++}},t.prototype.SetMyEscortInfo=function(){this.mItem=new QujingEscortItem;var e=new EscortInfo,t=GameGlobal.QujingModel.baseInfo;e.mFinishTime=t.mFinishTime,e.mPlayerId=GameGlobal.actorModel.actorID,e.mPlayerName=GameGlobal.actorModel.name,e.mQuality=t.mQuality,e.mPower=GameGlobal.actorModel.power,e.mRobbedCount=0,this.mItem.SetItem(e,0,{time:18}),this.mItem.$setY(350),this.panel.addChild(this.mItem)},t.prototype.HandleQuilkFinish=function(){var e=GameGlobal.Config.EscortBaseConfig.completecostb;WarnWin.show("是否花费"+e.count+GameGlobal.actorModel.GetCurrencyName(e.id)+"快速完成?",function(){Checker.Currency(e,!0,null,function(){GameGlobal.QujingModel.SendQuilkFinish()})},this)},t.prototype.HandleEscort=function(){var e=GameGlobal.QujingModel.baseInfo,t=e.mState;switch(t){case QujingModel.ESCORT_STATE_FREE:if(e.mEscortCount==GameGlobal.Config.EscortBaseConfig.escortnum)return void UserTips.ins().showTips("今日次数用完了");if(!GameGlobal.QujingModel.IsDoudleAwardTime())return void ViewManager.ins().open(QujingTipPanel);ViewManager.ins().open(QujingChooseWin);break;case QujingModel.ESCORT_STATE_DOING:UserTips.ins().showTips("护送中...");break;case QujingModel.ESCORT_STATE_DONE:if(!this.mShowRewardInfo)return;ViewManager.ins().open(QujingAwardWin,this.mShowRewardInfo)}},t.prototype.GetBtnLabelText=function(e){var t="";switch(e){case QujingModel.ESCORT_STATE_FREE:t="前往护送";break;case QujingModel.ESCORT_STATE_DOING:t="护送中";break;case QujingModel.ESCORT_STATE_DONE:t="领取奖励"}return t},t.prototype.GetTimeText=function(e){var t=Math.floor(e/60),i=e%60;return t+":"+i},t.prototype.shuffleList=function(){for(var e=0;e<this.mSettingList.length;++e){var t=MathUtils.limitInteger(e+1,this.mSettingList.length-1),i=this.mSettingList[t];this.mSettingList[t]=this.mSettingList[e],this.mSettingList[e]=i}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(QujingMainWin.prototype,"QujingMainWin",["ICommonWindow"]);var QujingRecordWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="QujingRecordListSkin",t.commonWindowBg.SetTitle("被劫记录"),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=QujingRecordItem,this.UpdateContent()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.QUJING_UPDATE_RECORD,this.UpdateContent),this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype.UpdateContent=function(){var e=GameGlobal.QujingModel.recordList;this.list.dataProvider=new eui.ArrayCollection(e),GameGlobal.QujingModel.RecordRobbedFlag(!1)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(QujingRecordWin.prototype,"QujingRecordWin",["ICommonWindow"]);var QujingRecordItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ItemBaseNotName,this.btnRevenge.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnClick,this)},t.prototype.dataChanged=function(){var e=this.data;this.btnRevenge.name=e.mRecordId;var t=this.GetConfigByQuality(e.mQuality),i=ItemBase.GetColorByQuality(e.mQuality-1),o="|C:0x6e330b&T:当前|C:0x019704&T:战力为"+e.mPower+"||C:0x6e330b&T:的||C:0x1048ff&T:"+e.mPlayerName+"||C:0x6e330b&T:抢夺了我的||C:"+i+"&T:"+t.name+"||";this.labTip.textFlow=TextFlowMaker.generateTextFlow(o),this.labRevenge.visible=e.mOperFlag,this.btnRevenge.visible=!e.mOperFlag,this.labRevenge.text=e.mWinFlag?"复仇成功":"复仇失败",this.labRevenge.textColor=e.mWinFlag?104196:14352384,this.list.dataProvider=new eui.ArrayCollection(t.revengeaward)},t.prototype._OnBtnClick=function(e){var t=parseInt(e.currentTarget.name);ViewManager.ins().open(QujingRevengeWin,t,QujingModel.ESCORT_FIGHT_TYPE_REVENGE)},t.prototype.GetConfigByQuality=function(e){for(var t in GameGlobal.Config.EscortAwardConfig){var i=GameGlobal.Config.EscortAwardConfig[t];if(i.quality==e)return i}},t}(eui.ItemRenderer);__reflect(QujingRecordItem.prototype,"QujingRecordItem");var QujingRevengeWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="QujingRevengeSkin",t._AddClick(t.btnConfirm,t._OnClick),t._AddClick(t.btnCancel,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.observe(MessageDef.PALYER_INFO,this.UpdateContent),this.mId=e[0],this.mType=e[1],this.list.itemRenderer=ItemBaseNotName,this.list.dataProvider=new eui.ArrayCollection([]),this.mType==QujingModel.ESCORT_FIGHT_TYPE_REVENGE){this.commonDialog.title="复仇",this.labAwardTitle.text="复仇奖励",this.labTip.visible=!0;var i=GameGlobal.QujingModel.GetRecordInfo(this.mId);GameGlobal.PlayerInfoModel.sendOtherId(i.mPlayerId)}else{this.commonDialog.title="拦截",this.labAwardTitle.text="拦截奖励",this.labTip.visible=!1;var o=GameGlobal.QujingModel.GetEscortInfo(this.mId);GameGlobal.PlayerInfoModel.sendOtherId(o.mPlayerId)}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.UpdateContent=function(e){this.imgFace.source=ResDataPath.GetHeadImgName(e.job,e.sex),this.labName.text="名称："+e.name,this.labPower.text="战力："+e.power,this.labGangName.text=e.guildName?"帮会："+e.guildName:"";var t;if(this.mType==QujingModel.ESCORT_FIGHT_TYPE_REVENGE){var i=GameGlobal.QujingModel.GetRecordInfo(this.mId),o=GameGlobal.QujingModel.GetConfigByQuality(i.mQuality);t=o.revengeaward}else{var i=GameGlobal.QujingModel.GetEscortInfo(this.mId),o=GameGlobal.QujingModel.GetConfigByQuality(i.mQuality);t=o.robreward}this.list.dataProvider=new eui.ArrayCollection(t)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCancel:ViewManager.ins().close(this);break;case this.btnConfirm:if(!UserFb.CheckFighting())return;this.mType==QujingModel.ESCORT_FIGHT_TYPE_REVENGE?GameGlobal.QujingModel.SendRevenge(this.mId):GameGlobal.QujingModel.SendRob(this.mId),ViewManager.ins().close(this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(QujingRevengeWin.prototype,"QujingRevengeWin");var QujingTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="QujingTipSkin",t._AddClick(t.btnEnter,t._onClick),t._AddClick(t.btnCancel,t._onClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="提示";var i=GameGlobal.Config.EscortBaseConfig.doubletime;this.labTip.text=i[0].star+"-"+i[0].ends+"和"+i[1].star+"-"+i[1].ends+"奖励翻倍"},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._onClick=function(e){switch(e.currentTarget){case this.btnEnter:ViewManager.ins().open(QujingChooseWin),ViewManager.ins().close(this);break;case this.btnCancel:ViewManager.ins().close(this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(QujingTipPanel.prototype,"QujingTipPanel");var RankDataHurtItem=function(e){function t(){var t=e.call(this)||this;return t.currentState="three",t}return __extends(t,e),t.prototype.setPower=function(e){if(e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+"万"}this.tpower.text=e},t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.setTxtColorByRank(e.rank),this.trank.text=e.rank+"",this.tname.text=e.name,this.setPower(e.value+""),this.imgBg.visible=e.rank%2?!0:!1}},t.prototype.setTxtColorByRank=function(e){var t=7222027;switch(e){case 1:t=13793025;break;case 2:t=12845309;break;case 3:t=3108854}this.trank.textColor=this.tname.textColor=t},t}(eui.ItemRenderer);__reflect(RankDataHurtItem.prototype,"RankDataHurtItem");var RankDataItem=function(e){function t(){var t=e.call(this)||this;return t.currentState="four",t.rewardList=[],t}return __extends(t,e),t.prototype.showContent=function(e){var t=GameGlobal.Arena.getRankRewards(e);if(t){var i=0,o=t.length,n=void 0;for(i;o>i;i++)n=this.rewardList[i],n||(n=new IconWithText,n.x=0,this.con.addChild(n),this.rewardList.push(n)),n.setIcon(t[i].id),n.setCount(t[i].count+""),n.y=n.height*i>>0
}},t.prototype.setPower=function(e){if(e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+"万"}this.tpower.text=e},t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.setTxtColorByRank(e.rank),this.trank.text=e.rank+"",this.tname.text=e.name,this.setPower(e.value+""),this.showContent(e.rank),this.imgBg.visible=e.rank%2?!0:!1}},t.prototype.setTxtColorByRank=function(e){var t=7222027;switch(e){case 1:t=13793025;break;case 2:t=12845309;break;case 3:t=3108854}this.trank.textColor=this.tname.textColor=t},t}(eui.ItemRenderer);__reflect(RankDataItem.prototype,"RankDataItem");var IconWithText=function(e){function t(){var t=e.call(this)||this;return t.icon=new eui.Image,t.icon.x=0,t.icon.y=0,t.addChild(t.icon),t.count=new eui.Label,t.count.textColor=13793025,t.count.size=24,t.count.x=32,t.count.y=0,t.addChild(t.count),t}return __extends(t,e),t.prototype.setIcon=function(e){this.icon.source=RewardData.GetCurrencyMiniRes(e),this.icon.y=MoneyConst.yuanbao==e?6:0},t.prototype.setCount=function(e){if(e.length>4){var t=Math.floor(Number(e)/1e3);e=t/10+"万"}this.count.text=e},t}(eui.Component);__reflect(IconWithText.prototype,"IconWithText");var RankDataType=function(){function e(){}return e.TYPE_POWER=0,e.TYPE_ARENA=1,e.TYPE_SKIRMISH=2,e.TYPE_PASS=3,e.TYPE_COPY=4,e.TYPE_LEVEL=5,e.TYPE_WING=6,e.TYPE_JOB_ZS=7,e.TYPE_JOB_FS=8,e.TYPE_JOB_DS=9,e.TYPE_LILIAN=10,e.TYPE_LADDER=11,e.TYPE_BAOSHI=12,e.TYPE_PRESTIGE=20,e.TYPE_HERO=21,e.TYPE_SHINV=22,e.TYPE_PET=23,e.TYPE_ACROSS_PERSON=24,e.TYPE_GANG_BOSS_PERSON=25,e.TYPE_FISH=113,e.DATA_POS="pos",e.DATA_ID="id",e.DATA_PLAYER="player",e.DATA_LEVEL="level",e.DATA_ZHUAN="zhuan",e.DATA_VIP="vip",e.DATA_MONTH="month",e.DATA_POWER="power",e.DATA_COUNT="count",e.DATA_EXP="exp",e.DATA_JOB="job",e.DATA_SEX="sex",e.DATA_BG2="xphb_json.phb_7",e.DATA_BG3="xphb_json.phb_8",e.readFunc={},e.TYPE_ZHANLING=13,e.TYPE_LONGHUN=14,e.TYPE_XIAOFEI=16,e}();__reflect(RankDataType.prototype,"RankDataType");var RankWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="RankWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonDialogBg.OnAdded(this),this.rewardList=[]},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e.length?e[0]:RankDataType.TYPE_ARENA,o=null;switch(i){case RankDataType.TYPE_ARENA:this.currentState="four",this.itemList.itemRenderer=RankDataItem,this.tValue1.text="战力",this.commonDialogBg.title="竞技排名",this.observe(MessageDef.ARENA_RANK_DATA,this.getRankData),GameGlobal.Arena.sendArenaRank(),o=GameGlobal.Arena.getMyRank();var n=GameGlobal.Arena.getRankRewards(o);this.showContent(o,n);break;case RankDataType.TYPE_GANG_BOSS_PERSON:this.HandleBossPersonRank(GameGlobal.GangBossModel.mCurRank,!1);break;case RankDataType.TYPE_ACROSS_PERSON:this.HandleBossPersonRank(GameGlobal.AcrossBossController.mCurRank,!0)}},t.prototype.HandleBossPersonRank=function(e,t){this.itemList.itemRenderer=RankDataHurtItem,this.tValue1.text="伤害",this.commonDialogBg.title="伤害排名",this.currentState="three",this.gScore.visible=!0,this.lbExNe.text="伤害:",e.mydamage?this.tScore.text=e.mydamage+"":this.tScore.text="",e.myrank?this.tRank.text=e.myrank+"":this.tRank.text="";for(var i=[],o=0;o<e.playerranks.length;o++){var n={rank:1,name:"",value:0};n.rank=o+1;var a=t?" .S"+e.playerranks[o].serverid:"";n.name=e.playerranks[o].name+a,n.value=e.playerranks[o].damage,i.push(n)}this.itemList.dataProvider=new eui.ArrayCollection(i)},t.prototype.getRankData=function(e){this.itemList.dataProvider=new eui.ArrayCollection(e.ranklist)},t.prototype.showContent=function(e,t){if(this.tRank.text=e+"",t){var i=0,o=t.length,n=void 0;for(i;o>i;i++)n=this.rewardList[i],n||(n=new IconWithText,n.y=897,this.addChild(n),this.rewardList.push(n)),n.setIcon(t[i].id),n.setCount(t[i].count+""),n.x=430+(n.width+2)*i>>0}},t.prototype.OnClose=function(){this.removeObserve()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RankWin.prototype,"RankWin");var RankingModel=function(e){function t(){var t=e.call(this)||this;return t.ranks={},t.regNetMsg(S2cProtocol.sc_rank_data,t.getRank),t.regNetMsg(S2cProtocol.sc_rank_worship,t.getWorship),t}return __extends(t,e),t.prototype.getVipConfig=function(){return GameGlobal.Config.VipConfig},t.prototype.getKeyItemData=function(){var e=GameGlobal.Config.RankLvConfig,t=new eui.ArrayCollection;for(var i in e)if(GameGlobal.actorModel.level>=e[i].level&&GameServer.serverOpenDay>=e[i].openday){var o={};o.type=e[i].type,o.name=e[i].name,t.addItem(o)}return t},t.prototype.getValueItemData=function(){return new eui.ArrayCollection([])},t.prototype.getShowById=function(e,t){if(e){var i=new RoleShowData;switch(i.job=e.job,i.sex=e.sex,i.rideId=RoleShowData.GetRideAppId(e.outride),0!=e.skin&&(i.clothID=RoleShowData.GetBodyAppId(e.skin,e.job,e.sex)),t){case 1:i.wingId=RoleShowData.GetWingAppId(e.outwing),RoleShowData.GetSwordAppId(e.outweapon,e.job,e.sex);case 2:i.wingId=RoleShowData.GetWingAppId(e.outwing),RoleShowData.GetSwordAppId(e.outweapon,e.job,e.sex);break;case 6:i.wingId=RoleShowData.GetWingAppId(e.outwing);break;case 8:i.swordID=RoleShowData.GetSwordAppId(e.outweapon,e.job,e.sex);break;case 20:i.rideId=0,i.job=1,i.sex=e.outbabysex,i.clothID=e.outbaby}return i}},t.prototype.isRedPoint=function(){return!GameGlobal.RankingModel.status},t.prototype.sendRank=function(e){var t=new Sproto.cs_rank_req_request;t.type=e,this.Rpc(C2sProtocol.cs_rank_req,t)},t.prototype.getRank=function(e){e&&(this.ranks[e.type]=e,MessageCenter.ins().dispatch(MessageDef.UPDATE_PAIHANGBANG_DATA))},t.prototype.sendWorship=function(){var e=new Sproto.cs_rank_worship_request;this.Rpc(C2sProtocol.cs_rank_worship,e)},t.prototype.getWorship=function(e){this.status=e.status||0,MessageCenter.ins().dispatch(MessageDef.PHB_REPOINT_UPDATE)},t.MAX_VIPLV=20,t.RANK_TYPE_ZDL=1,t.RANK_TYPE_DJ=2,t.RANK_TYPE_CW=3,t.RANK_TYPE_XL=4,t.RANK_TYPE_ZQ=5,t.RANK_TYPE_CB=6,t.RANK_TYPE_TX=7,t.RANK_TYPE_SB=8,t.RANK_TYPE_TN=9,t.RANK_TYPE_TS=10,t.RANK_TYPE_FZ=11,t.RANK_TYPE_XW=12,t.RANK_TYPE_TL=13,t.RANK_TYPE_SH=14,t.RANK_TYPE_HN=15,t.RANK_TYPE_LQ=16,t.RANK_TYPE_FB=17,t.RANK_TYPE_LLT=18,t.RANK_TYPE_TT=19,t.RANK_TYPE_LT=20,t}(BaseSystem);__reflect(RankingModel.prototype,"RankingModel");var RankingWin=function(e){function t(){var t=e.call(this)||this;return t.curSelectedIndex=0,t.skinName="RankingWinSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("排行榜")},t.prototype.initData=function(){this.keyList.itemRenderer=KeyItem,this.valueList.itemRenderer=ValueItem,this.keyList.dataProvider=GameGlobal.RankingModel.getKeyItemData(),this.top1Item=new ValueItem,this.top1Item.x=5,this.top1Item.y=6,this.top1ItemGroup.addChild(this.top1Item)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.PAGE_BUTTON_UPDATE,this.changePage),this.observe(MessageDef.UPDATE_PAIHANGBANG_DATA,this.UpdateContent),this.observe(MessageDef.PHB_REPOINT_UPDATE,this.updateWorship),this._AddItemClick(this.keyList,this.keyListItemClick),this.AddClick(this.worshipBtn,this.tap),this.keyList.selectedIndex=0,GameGlobal.RankingModel.sendRank(1),this.curSelectedIndex=this.keyList.selectedIndex,this.pageBtn.setPage(1),this.recoverTouchPos()},t.prototype.keyListItemClick=function(e){this.curSelectedIndex!=this.keyList.selectedIndex&&(this.curSelectedIndex=this.keyList.selectedIndex,GameGlobal.RankingModel.sendRank(this.keyList.selectedItem.type),this.pageBtn.setPage(1),this.recoverTouchPos())},t.prototype.tap=function(){GameGlobal.RankingModel.sendWorship()},t.prototype.changePage=function(e){this.SetPos((e-1)*this.scroller.width)},t.prototype.SetPos=function(e){var t=this.scroller.$Scroller[8];t.maxScrollPos=this.valueList.contentWidth,t.throwTo(e)},t.prototype.recoverTouchPos=function(){var e=this.scroller.$Scroller[8];e.maxScrollPos=this.valueList.contentWidth,e.currentScrollPos=0},t.prototype.updateWorship=function(){for(var e=0;e<this.keyList.numChildren;e++)this.keyList.getChildAt(e).redPointUpdate();this.worshipBtn.filters=GameGlobal.RankingModel.isRedPoint()?null:Color.GetFilter(),this.worshipBtn.touchEnabled=GameGlobal.RankingModel.isRedPoint()},t.prototype.UpdateContent=function(){var e=GameGlobal.RankingModel.ranks[this.keyList.selectedItem.type];if(e){e.selfRank?this.rankTxt.text=""+e.selfRank:this.rankTxt.text="未上榜",2==e.type?this.zhanliTxt.text="等级:":this.zhanliTxt.text="战力:",this.selfPowerTxt.text=CommonUtils.overLength(e.value||0),this.top1Panel.hideAllPanel(),this.top2Panel.hideAllPanel(),this.top3Panel.hideAllPanel(),this.top1Item.visible=!1;for(var i=[],o=0,n=0;n<e.datas.length;n++){e.datas[n].pos;if(1!=e.datas[n].pos)2==e.datas[n].pos&&(t.showRolePanel(this.top2Panel,this.keyList.selectedItem.type,e.datas[n]),this.top2Panel.setName(e.datas[n].name,11479991)),3==e.datas[n].pos&&(t.showRolePanel(this.top3Panel,this.keyList.selectedItem.type,e.datas[n]),this.top3Panel.setName(e.datas[n].name,5926631)),i[o]=e.datas[n],o++;else{this.keyList.selectedIndex;t.showRolePanel(this.top1Panel,this.keyList.selectedItem.type,e.datas[n]),this.top1Item.data=e.datas[n],this.top1Item.visible=!0,this.top1Panel.setName(e.datas[n].name,16734464)}}this.valueList.dataProvider=new eui.ArrayCollection(i),this.pageBtn.setMax(Math.ceil(i.length/8)),this.updateWorship()}},t.showRolePanel=function(e,t,i){switch(t){case 1:if(e.setRole(GameGlobal.RankingModel.getShowById(i,t)),!i.outfairy)return;e.setTianXianPanel(GameGlobal.TianxModel.SkinConfig[i.outfairy].pid);break;case 2:if(!i.outwing)return;if(e.setRole(GameGlobal.RankingModel.getShowById(i,t)),!i.outfairy)return;e.setTianXianPanel(GameGlobal.TianxModel.SkinConfig[i.outfairy].pid);break;case 3:if(!i.outpet)return;e.setPetPanel(i.outpet);break;case 4:if(!i.outxianlv)return;e.setPetPanel(i.outxianlv);break;case 5:if(!i.outride)return;e.setPetPanel(GameGlobal.Config.RideSkinConfig[i.outride].pid);break;case 6:if(!i.outwing)return;e.setRole(GameGlobal.RankingModel.getShowById(i,t));break;case 7:if(!i.outfairy)return;e.setRole(GameGlobal.RankingModel.getShowById(i,t)),e.setTianXianPanel(GameGlobal.TianxModel.SkinConfig[i.outfairy].pid);break;case 8:if(!i.outweapon)return;e.setRole(GameGlobal.RankingModel.getShowById(i,t));break;case 9:if(!i.outtiannv)return;e.setPetPanel(GameGlobal.Config.FemaleDevaSkinConfig[i.outtiannv].pid);break;case 10:if(!i.outtianshen)return;e.setPetPanel(i.outtianshen);break;case 11:if(!i.outcircle)return;e.setPetPanel(i.outxianlv,30),e.setZhengFaPanel(GameGlobal.Config.CircleSkinConfig[i.outcircle].pid);break;case 12:if(!i.outposition)return;var o=AppearanceConfig.GetUIAppe(GameGlobal.Config.PositionSkinConfig[i.outposition].pid);e.setXianWeiSource(o.substring(o.lastIndexOf("/")+1));break;case 13:if(!i.outpsychic)return;e.setPetPanel(i.outpet,15),e.setZhengFaPanel(GameGlobal.Config.PsychicSkinConfig[i.outpsychic].pid);break;case 14:if(!i.outsoul)return;e.setPetPanel(i.outpet);var n=AppearanceConfig.GetUIAppe(GameGlobal.Config.SoulSkinConfig[i.outsoul].pid);e.setSouHunSource(n);break;case 15:if(!i.outflower)return;e.setPetPanel(GameGlobal.Config.FlowerSkinConfig[i.outflower].pid);break;case 16:if(!i.outnimbus)return;var a=AppearanceConfig.GetUIPath(GameGlobal.Config.NimbusSkinConfig[i.outnimbus].pid);e.setXianWeiSource(a.substring(a.lastIndexOf("/")+1));break;case 20:if(!i.outbaby)return;e.setRole(GameGlobal.RankingModel.getShowById(i,t),1,RoleShowDressType.ROLE)}},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_86)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RankingWin.prototype,"RankingWin");var ValueItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RankingValueItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.detailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.roleNameTxt.textColor=7090442,this.data.pos<=3?(1==this.data.pos?this.roleNameTxt.textColor=16734464:2==this.data.pos?this.roleNameTxt.textColor=11479991:3==this.data.pos&&(this.roleNameTxt.textColor=5926631),this.rankingImage.visible=!0,this.rankingImage.source="ui_phb_bm_"+this.data.pos,this.topTxt.visible=!1):(this.rankingImage.visible=!1,this.topTxt.visible=!0,this.topTxt.text="第"+this.data.pos+"名"),this.roleNameTxt.text=this.data.name,this.vipIcon.setVipLv(this.data.vip,!0),this.lvTxt.text=this.data.level+"级",this.powerTxt.text=CommonUtils.overLength(this.data.power)},t.prototype.tap=function(){},t}(eui.ItemRenderer);__reflect(ValueItem.prototype,"ValueItem");var KeyItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="RankingKeyItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.itemNameTxt.text=this.data.name,this.redPointUpdate()},t.prototype.redPointUpdate=function(){this.redPointImg.visible=GameGlobal.RankingModel.isRedPoint()},t}(eui.ItemRenderer);__reflect(KeyItem.prototype,"KeyItem");var PHBShowPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShowPanelSkin",t.tianXiaDiYiImage.visible=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.mc=new MovieClip,this.soul.addChild(this.mc),this.mc.clearCache(),this.petPanely=this.petPanel.y,this.roleShowPanelX=this.roleShowPanel.x,this.roleShowPanelY=this.roleShowPanel.y},t.prototype.setTianXianPanel=function(e,t){void 0===t&&(t=.8),this.tianXianPanel.SetBody(AppearanceConfig.GetUIPath(e)),this.tianXianPanel.scaleX=t,this.tianXianPanel.scaleY=t,this.tianXianPanel.visible=!0},t.prototype.setWeaponPanel=function(e,t){void 0===t&&(t=.8),this.weaponPanel.SetBody(AppearanceConfig.GetUIPath(e)),this.weaponPanel.scaleX=t,this.weaponPanel.scaleY=t,this.weaponPanel.visible=!0},t.prototype.setPetPanel=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=1),this.petPanel.SetBodyId(e),this.petPanel.scaleX=i,this.petPanel.scaleY=i,this.petPanel.y=this.petPanely-t,this.petPanel.visible=!0},t.prototype.setZhengFaPanel=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=1),this.zhengFaPanel.SetBody(AppearanceConfig.GetUIPath(e)),this.zhengFaPanel.scaleX=i,this.zhengFaPanel.scaleY=i,this.zhengFaPanel.visible=!0},t.prototype.setRole=function(e,t,i){void 0===t&&(t=.8),this.roleShowPanel.ClearCache(),i?LingtongViewHelper.SetRole(this.roleShowPanel,e.sex,e.clothID):this.roleShowPanel.SetAll(e),this.roleShowPanel.scaleX=t,this.roleShowPanel.scaleY=t,this.roleShowPanel.x=this.roleShowPanelX*(2-t),this.roleShowPanel.y=this.roleShowPanelY*(2-t),this.roleShowPanel.visible=!0},t.prototype.tXDYImageVisibel=function(e){this.tianXiaDiYiImage.visible=e},t.prototype.setXianWeiSource=function(e){this.xianWeiImage.source=e,this.xianWeiImage.visible=!0},t.prototype.setSouHunSource=function(e){this.mc.loadUrl(ResDataPath.GetMoviePath(e),!0),this.mc.visible=!0},t.prototype.setName=function(e,t){this.nameTxt.text=e,this.nameTxt.textColor=t},t.prototype.hideAllPanel=function(){this.mc.visible=!1,this.xianWeiImage.visible=!1,this.nameTxt.text="",this.zhengFaPanel.visible=!1,this.zhengFaPanel.visible=!1,this.tianXianPanel.visible=!1,this.roleShowPanel.visible=!1,this.petPanel.visible=!1,this.weaponPanel.visible=!1,this.lvTxt.visible=!1},t}(eui.Component);__reflect(PHBShowPanel.prototype,"PHBShowPanel");var EventListenerData=function(){function e(e,t,i,o,n,a){this.addObject=e,this.type=t,this.listener=i,this.thisObject=o,this.useCapture=n,this.priority=a,e?e.addEventListener(t,i,o,n,a):console.warn("不存在增加侦听事件的对象")}return e.prototype.clean=function(){this.addObject&&this.addObject.hasEventListener(this.type)&&(this.addObject.removeEventListener(this.type,this.listener,this.thisObject,this.useCapture),this.addObject=null,this.type=null,this.listener=null,this.useCapture=null,this.priority=null)},e}();__reflect(EventListenerData.prototype,"EventListenerData");var MessageCenter=function(e){function t(t){var i=e.call(this)||this;return i.flag=0,i.type=0,i.dict={},i.eVec=[],i.lastRunTime=0,i.m_TempDict={},i.type=t,0==i.type&&TimerManager.ins().doFrame(1,0,i.run,i),i}return __extends(t,e),t.ins=function(){return e.ins.call(this,0)},t.prototype.clear=function(){this.dict={},this.eVec.splice(0)},t.prototype.addListener=function(e,t,i){var o=this.dict[e];o?0!=this.flag&&(this.dict[e]=o=o.concat()):this.dict[e]=o=[];for(var n=0,a=o;n<a.length;n++){var r=a[n];if(r[0]==t&&r[1]==i)return}o.push([t,i])},t.prototype.removeListener=function(e,t,i){var o=this.dict[e];if(o){0!=this.flag&&(this.dict[e]=o=o.concat());for(var n=o.length,a=n-1;a>=0;--a){var r=o[a];if(r[0]==t&&r[1]==i){o.splice(a,1);break}}0==o.length&&(this.dict[e]=null,delete this.dict[e])}},t.prototype.removeAll=function(e){for(var t=Object.keys(this.dict),i=0,o=t;i<o.length;i++){var n=o[i],a=this.dict[n];0!=this.flag&&(this.dict[n]=a=a.concat());for(var r=0;r<a.length;r++)a[r][1]==e&&(a.splice(r,1),r--);0==a.length&&(this.dict[n]=null,delete this.dict[n])}},t.prototype.dispatch=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==t||0==t.length){if(this.m_TempDict[e])return;this.m_TempDict[e]=!0}var o=ObjectPool.pop("MessageVo");o.type=e,o.param=t,0==this.type?this.eVec.push(o):1==this.type?this.dealMsg(o):console.log("MessageCenter未实现的类型")},t.prototype.dispatchImmediate=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=ObjectPool.pop("MessageVo");o.type=e,o.param=t,this.dealMsg(o)},t.prototype.run=function(){var e=egret.getTimer(),t=e-this.lastRunTime>100;if(this.lastRunTime=e,t)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-e>5)););},t.prototype.dealMsg=function(e){this.m_TempDict[e.type]&&delete this.m_TempDict[e.type];var t=this.dict[e.type];if(t){var i=t.length;if(0!=i){this.flag++;for(var o=0,n=t;o<n.length;o++){var a=n[o];a[0].apply(a[1],e.param)}this.flag--,e.dispose(),ObjectPool.push(e)}}},t}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function e(){this.type=null,this.param=null}return e.prototype.dispose=function(){this.type=null,this.param=null},e}();__reflect(MessageVo.prototype,"MessageVo");var ResultWinPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ResultWinSkin",t.list.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.sortFunc=function(e,t){if(1==e.type&&1==t.type){var i=GlobalConfig.ins().ItemConfig[e.id],o=GlobalConfig.ins().ItemConfig[t.id];if(i.quality>o.quality)return-1;if(i.quality<o.quality)return 1;if(i.level>o.level)return-1;if(i.level<o.level)return 1}else{if(e.type<t.type)return-1;if(e.type>t.type)return 1}return 0},t.prototype.OnOpen=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.SetBtnLabel("领取奖励"),this.SetTitleLabel("获得奖励"),this.SetCloseFunc(t[1]),e.prototype.OnOpen.call(this);var o=t[0],n=t[2],a=t[3];return o&&o.sort(this.sortFunc),this.list.dataProvider=new eui.ArrayCollection(o),this.list.validateNow(),3==a&&(this.imgTitle.source="ui_js_bm_tiaozhanjieshu"),null==n||0==n?(this.bmStar0.visible=!1,this.bmStar1.visible=!1,void(this.bmStar2.visible=!1)):(this.bmStar1.filters=n>1?null:Color.GetFilter(),void(this.bmStar2.filters=n>2?null:Color.GetFilter()))},t}(ResultBasePanel);__reflect(ResultWinPanel.prototype,"ResultWinPanel");var CommonRewardsPanel=function(e){function t(){var t=e.call(this)||this;return t.funObj={},t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="CommonRewardsWin",this.rewardList.itemRenderer=ItemBase,this.validateNow()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.returnBtn,this.onTap),this.AddClick(this.closeBtn,this.onTap),this.AddClick(this.lqBtn,this.onTap),e&&this.updateData(e)},t.prototype.OnClose=function(){this.removeEvents()},t.prototype.updateData=function(e){this.titleName.text=e[0],this.rewardList.dataProvider=new eui.ArrayCollection([e[1]]),this.funObj=e[2]},t.prototype.onTap=function(e){switch(e.target){case this.closeBtn:case this.returnBtn:case this.lqBtn:this.CloseSelf(),e.target==this.lqBtn&&this.funObj&&this.funObj()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(CommonRewardsPanel.prototype,"CommonRewardsPanel"),CommonRewardsPanel.LAYER_LEVEL=LayerManager.UI_Popup;var RewardsPanel=function(e){function t(){var t=e.call(this)||this;return t.funObj={},t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="RewardsWinSkin",this.validateNow()},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddClick(this.returnBtn,this.onTap),this.AddClick(this.closeBtn,this.onTap),this.AddClick(this.lqBtn,this.onTap),e&&this.updateData(e[0])},t.prototype.OnClose=function(){this.removeEvents()},t.prototype.updateData=function(e){this.titleName.text=e.title,this.tipsTxt.textFlow=TextFlowMaker.generateTextFlow(e.txt),this.rewardList.dataProvider=new eui.ArrayCollection(e.itemData),this.index=e.index},t.prototype.onTap=function(e){switch(e.target){case this.closeBtn:case this.returnBtn:case this.lqBtn:this.CloseSelf(),e.target==this.lqBtn&&GameGlobal.UserFb.getCbtReward(this.index,1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(RewardsPanel.prototype,"RewardsPanel"),RewardsPanel.LAYER_LEVEL=LayerManager.UI_Popup;var GameServer=function(){function e(){Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_base_open_day,this.doGetOpenServer,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_base_game_time,this.doServerTime,this),Sproto.SprotoReceiver.AddHandler(S2cProtocol.sc_base_replace_account,this._DoBaseReplaceAccount,this)}return Object.defineProperty(e,"serverTime",{get:function(){return e._serverTime+Math.floor(.001*egret.getTimer())},enumerable:!0,configurable:!0}),Object.defineProperty(e,"serverTimeMilli",{get:function(){return 1e3*e._serverTime+egret.getTimer()},enumerable:!0,configurable:!0}),e.setServerTime=function(t){e._serverTime=t-Math.floor(.001*egret.getTimer()),e.ETNER_GAME_TIME||(e.ETNER_GAME_TIME=e._serverTime),this.updateTheDayEndTime()},e.updateTheDayEndTime=function(){var t=new Date(e.serverTimeMilli);t.setHours(23),t.setMinutes(59),t.setSeconds(59),this._dayEndTime=t.getTime();var i=new Date(e.serverTimeMilli);i.setDate(i.getDate()+1),i.setHours(23),i.setMinutes(59),i.setSeconds(59),this._dayEnd2Time=i.getTime();var o=new Date(e.serverTimeMilli);o.setDate(o.getDate()+2),o.setHours(23),o.setMinutes(59),o.setSeconds(59),this._dayEnd3Time=o.getTime()},Object.defineProperty(e,"dayEndTime",{get:function(){return this._dayEndTime},enumerable:!0,configurable:!0}),e.prototype.doGetOpenServer=function(t){var i=e.serverOpenDay;e.serverOpenDay=t.day,e.loginDay=t.loginDay,e.updateTheDayEndTime(),GameGlobal.MessageCenter.dispatch(MessageDef.GAME_SERVER_UPDATE_DAY),Deblocking.Update(Deblocking.CHECK_TYPE_04),i&&i!=e.serverOpenDay&&GameGlobal.OnDayTimer()},e.prototype.doServerTime=function(t){e.setServerTime(t.time)},e.GetSurplusTime=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_5),void 0===i&&(i=2);var o=Math.max(0,(e||0)-this.serverTime);return DateUtils.getFormatBySecond(o,t,i)},e.GetPkTime=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_11),void 0===i&&(i=2);var o=Math.max(0,(e||0)-this.serverTime);return DateUtils.getFormatBySecond(o,t,i)},e.GettreeTime=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_11),void 0===i&&(i=3);var o=Math.max(0,(e||0)-this.serverTime);return DateUtils.getFormatBySecond(o,t,i)},e.Redbag=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_15),void 0===i&&(i=3);var o=Math.max(0,e||0);return DateUtils.getFormatBySecond(o,t,i)},e.JfShow=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_9),void 0===i&&(i=3);var o=Math.max(0,e||0);return DateUtils.getFormatBySecond(o,t,i)},e.PanTaoHui=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_2),void 0===i&&(i=3);var o=Math.max(0,e||0);return DateUtils.getFormatBySecond(o,t,i)},e.JieHun=function(e,t,i){void 0===t&&(t=DateUtils.TIME_FORMAT_14),void 0===i&&(i=3);var o=Math.max(0,e||0);return DateUtils.getFormatBySecond(o,t,i)},e.IsMerge=function(){return this.mergeDay>0},e.prototype._DoBaseReplaceAccount=function(){e.mOtherLogin=!0,alert("你的账号在其它地方登陆"),LocationProperty.Reload()},e._serverTime=0,e.loginDay=1,e.mergeDay=0,e.mOtherLogin=!1,e}();__reflect(GameServer.prototype,"GameServer");var ShopBlackData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyTime=0,t.shopType=0,t}return __extends(t,e),t.prototype.initLocalData=function(e,t){this.index=e.index||0,this.type=e.type||0,this.unlocktype=e.unlocktype||{},this.mark=e.mark||0,this.id=e.id||0,this.count=e.count||0,this.daycount=e.daycount||0,this.currency=e.currency||{},this.shopType=t||0},t}(ShopBaseData);__reflect(ShopBlackData.prototype,"ShopBlackData");var SHOP_MONEY;!function(e){e[e.yuanbao=2]="yuanbao",e[e.bangyuan=3]="bangyuan",e[e.yinbi=1]="yinbi",e[e.banggong=5]="banggong",e[e.gongxun=2000031]="gongxun",e[e.pingfu=2000028]="pingfu",e[e.huanshou=2000026]="huanshou",e[e.xianlv=2000027]="xianlv",e[e.jinzhuang=2000025]="jinzhuang",e[e.youqing=2000029]="youqing",e[e.weiwang=2000030]="weiwang",e[e.treasurePoint=2000043]="treasurePoint"}(SHOP_MONEY||(SHOP_MONEY={}));var ShopController=function(e){function t(){var t=e.call(this)||this;return t.mEquipCurrencyCount={},t.tAllShopData={},t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){this.tShopMappingData=GlobalConfig.ins().DuiYingStore||{},this.tShopInitData=GlobalConfig.ins().StoreBaseConfig||{},this.tShopMappingData&&this.tShopInitData&&this.initByLocal();var e=GameGlobal.Config.ZhuangBeiStore,t={};for(var i in e){var o=e[i].tabnum;t[o]||(t[o]=e[i].currency.count)}this.mEquipCurrencyCount=t},t.prototype.getCurTipsNum=function(e){var i="";switch(e){case t.EN_SHOP_DAYAN:i=GameGlobal.UserFb.lltModel.layer+"";break;case t.EN_SHOP_CAILIAO:i=GameGlobal.ShopManage.pShopController.getShopLockByType(10)+"";break;case t.EN_SHOP_JINGJI:case t.EN_SHOP_ARENA:i=""+(GameGlobal.ShopManage.pShopController.getShopLockByType(4)||5e3);break;case t.EN_SHOP_QUJING:i=GameGlobal.ShopManage.pShopController.getShopLockByType(5)+"";break;case t.EN_SHOP_DATI:i=GameGlobal.ShopManage.pShopController.getShopLockByType(6)+""}return i},t.prototype.initByLocal=function(){if(this.tShopMappingData)for(var e in this.tShopMappingData)if(this.tShopMappingData[e]){var t,t=this.tShopMappingData[e],i=this.tShopMappingData[e].type;switch(i){case 1:t=this.initShopDataByType(t,i);break;case 2:t=this.initShopDataByType(t,i);break;case 3:t=this.initShopDataByType(t,i)}t&&(this.tAllShopData[t.index]=t)}},t.prototype.updataByServer=function(e){if(e)for(var t in e.shopdatas){var i=e.shopdatas[t],o=this.tAllShopData[i.type];if(o)for(var n in o.shop){var a=o.shop[n],r=a.index-1;a.buyTime=i.datas[r],a.limittime=i.limittime?i.limittime[r]:0}}},t.prototype.shopUnlockData=function(e){e&&(this.tShopLockList=e.records)},t.prototype.getShopLockByType=function(e){var t=0;if(e)for(var i in this.tShopLockList){var o=this.tShopLockList[i];if(o.type==e){t=o.value;break}}return t},t.prototype.updateByAddShop=function(e){var t=this.tAllShopData[e.shopType];if(t)for(var i in t.shop)t.shop[i].index===e.index&&(t.shop[i].buyTime=e.count,GameGlobal.MessageCenter.dispatch(MessageDef.GOLD_CHANGE))},t.prototype.initShopDataByType=function(e,t){if(!e)return{};if(e.shop)return e;var i={},o=[];i=this.getShopLocakData(e.index);for(var n in i){var a;switch(t){case 1:a=new ShopNormalData;break;case 2:a=new ShopEquipData;break;case 3:a=new ShopBlackData}a.initLocalData&&(a.initLocalData(i[n],e.index),o.push(a))}return e.shop=o,e||{}},t.prototype.getShopLocakData=function(e){var i={};switch(e){case t.EN_SHOP_DAYAN:i=GlobalConfig.ins().DaYanStore;break;case t.EN_SHOP_EQUIP:i=GlobalConfig.ins().ZhuangBeiStore;break;case t.EN_SHOP_BLACK:i=GlobalConfig.ins().GangStore;break;case t.EN_SHOP_YUANBAO:i=GlobalConfig.ins().YuanBaoStore;break;case t.EN_SHOP_BANGYUAN:i=GlobalConfig.ins().BangYuanStore;break;case t.EN_SHOP_CAILIAO:i=GlobalConfig.ins().MaterialStore;break;case t.EN_SHOP_ARENA:i=GlobalConfig.ins().ArenaStore;break;case t.EN_SHOP_XIANDU:i=GlobalConfig.ins().XianDuStore;break;case t.EN_SHOP_WEIWANG:i=GlobalConfig.ins().PrestigeShopConfig;break;case t.EN_SHOP_BASHI:i=GlobalConfig.ins().DisasterShopConfig;break;case t.EN_SHOP_CHONGWU:i=GlobalConfig.ins().PetStoreConfig;break;case t.EN_SHOP_XIANLV:i=GlobalConfig.ins().XianlvStoreConfig;break;case t.EN_SHOP_BANGPAI:i=GlobalConfig.ins().GuildWelfareConfig;break;case t.EN_SHOP_ZHUANGBAN:i=GlobalConfig.ins().DressUpStoreConfig;break;case t.EN_SHOP_PIFU:i=GlobalConfig.ins().SkinStoreConfig;break;case t.EN_SHOP_YOUQING:i=GlobalConfig.ins().FriendStoreConfig;break;case t.EN_SHOP_JINGJI:i=GlobalConfig.ins().ArenaWelfareConfig;break;case t.EN_SHOP_QUJING:i=GlobalConfig.ins().EscortStoreConfig;break;case t.EN_SHOP_DATI:i=GlobalConfig.ins().AnswerStoreConfig;break;case t.EN_SHOP_TREASURE_HUNT:i=GlobalConfig.ins().XunBaoStoreConfig;break;case t.EN_SHOP_INTEGRAL:i=GlobalConfig.ins().ScoreShop}return i},t.prototype.enoughBuy=function(e,t){void 0===t&&(t=1);var i=!0,o="";if(e&&e.unlocktype){var n=(e.unlocktype,e.unlocktype[0]||0),a=e.unlocktype[1]||0;switch(n){case 1:GameGlobal.actorModel.level<a&&(i=!1,1==t&&UserTips.ins().showTips("等级不足"),o="角色"+a+"级解锁");break;case 2:var r=0;GameGlobal.UserFb.lltModel&&GameGlobal.UserFb.lltModel.layer&&(r=GameGlobal.UserFb.lltModel.layer),a>r&&(i=!1,1==t&&UserTips.ins().showTips("玲珑宝塔通关层级不足"),o="通关"+a+"关解锁");break;case 3:GameGlobal.GangModel.getGangLv()<a&&(i=!1,1==t&&UserTips.ins().showTips("帮会等级不足"),o="帮会"+a+"级解锁");break;case 4:GameGlobal.Arena.getMaxRank()>a&&(i=!1,1==t&&UserTips.ins().showTips("竞技场排名不足"),o="排名"+a+"名解锁");break;case 5:this.getShopLockByType(5)<a&&(i=!1,1==t&&UserTips.ins().showTips("取经次数不足"),o="取经"+a+"次解锁");break;case 6:this.getShopLockByType(6)<a&&(i=!1,1==t&&UserTips.ins().showTips("答题次数不足"),o="答题"+a+"次解锁");break;case 7:this.getShopLockByType(7)<a&&(i=!1,1==t&&UserTips.ins().showTips("个人Boss次数不足"),o="个人Boss"+a+"次解锁");break;case 8:this.getShopLockByType(8)<a&&(i=!1,1==t&&UserTips.ins().showTips("全民Boss次数不足"),o="全民Boss"+a+"次解锁");break;case 9:GameGlobal.TsumKoBaseModel.info_clear<a&&(i=!1,1==t&&UserTips.ins().showTips("81难副本通关总次数不足"),o="通关"+a+"关解锁");break;case 10:var s=GameGlobal.UserFb.fbModel,l=0;if(s)for(var c in s){var u=s[c].totalCount||0;l+=u}a>l&&(i=!1,1==t&&UserTips.ins().showTips("材料副本通关总次数不足"),o="通关"+a+"次解锁");break;case 12:e.limittime&&GameServer.serverTime>=e.limittime&&(1==t&&UserTips.ins().showTips("已结束"),o="已结束")}}return 1===t||3===t?i:o},t.prototype.getShopDataByIndex=function(e){var i=this.tAllShopData[e],o=!1;for(var n in i.shop)if(i.shop[n].daycount){o=!0;break}return e===t.EN_SHOP_EQUIP&&(o=!1),o&&this.sortLimitTime(i.shop),i},t.prototype.sortLimitTime=function(e){if(e&&e.length){var t=function(e){return e&&e.daycount&&e.buyTime&&e.buyTime>=e.daycount?e.index+1e4:e.index};e.sort(function(e,i){return t(e)-t(i)})}return e},t.prototype.getBuyItemNums=function(e){var t=0;if(8>e)switch(e){case 1:t=GameLogic.ins().actorModel.gold;break;case 2:t=GameLogic.ins().actorModel.yb;break;case 3:t=GameLogic.ins().actorModel.byb;break;case 5:t=GameLogic.ins().actorModel.contrib}else t=UserBag.ins().GetCount(e);return t},t.prototype.getMysteryShopData=function(){var e=[];if(this.mysteryData.datas){for(var t=0,i=this.mysteryData.datas;t<i.length;t++){var o=i[t],n={};n.item=GameGlobal.Config.MysticalShop[o.id],n.buyCount=o.buycount,n.isBuy=o.buycount>=GameGlobal.Config.MysticalShop[o.id].daycount,e.push(n)}var a=function(e){return e.buyCount>=e.item.daycount?-1:1
};e.sort(function(e,t){return a(t)-a(e)})}return e},t.EN_SHOP_NULL=-1,t.EN_SHOP_DAYAN=0,t.EN_SHOP_EQUIP=1,t.EN_SHOP_BLACK=2,t.EN_SHOP_YUANBAO=3,t.EN_SHOP_BANGYUAN=4,t.EN_SHOP_CAILIAO=5,t.EN_SHOP_ARENA=6,t.EN_SHOP_XIANDU=7,t.EN_SHOP_WEIWANG=8,t.EN_SHOP_BASHI=9,t.EN_SHOP_CHONGWU=10,t.EN_SHOP_XIANLV=11,t.EN_SHOP_BANGPAI=12,t.EN_SHOP_ZHUANGBAN=13,t.EN_SHOP_PIFU=14,t.EN_SHOP_YOUQING=15,t.EN_SHOP_JINGJI=16,t.EN_SHOP_QUJING=17,t.EN_SHOP_DATI=18,t.EN_SHOP_MYSTERY=19,t.EN_SHOP_INTEGRAL=20,t.EN_SHOP_TREASURE_HUNT=21,t}(BaseClass);__reflect(ShopController.prototype,"ShopController");var ShopEquipData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyTime=0,t.shopType=0,t}return __extends(t,e),t.prototype.initLocalData=function(e,t){this.index=e.index||0,this.tabnum=e.tabnum||0,this.type=e.type||0,this.unlocktype=e.unlocktype||{},this.mark=e.mark||0,this.id=e.id||0,this.count=e.count||0,this.daycount=e.daycount||0,this.currency=e.currency||{},this.shopType=t||0},t}(ShopBaseData);__reflect(ShopEquipData.prototype,"ShopEquipData");var ShopManage=function(e){function t(){var t=e.call(this)||this;return t.pShopController=ShopController.ins(),t.regNetMsg(S2cProtocol.sc_shop_buy,t.shopUpdataBuy),t.regNetMsg(S2cProtocol.sc_shop_buy_update,t.shopInit),t.regNetMsg(S2cProtocol.sc_shop_mystical_update,t.getMysterShopData),t.regNetMsg(S2cProtocol.sc_shop_buy_unlockdata,t.shopUnlockData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.Init=function(){this.pShopController.Init()},t.prototype.sendBuy=function(e,t,i){var o=new Sproto.cs_shop_buy_request;o.shopType=e,o.index=t,o.buynum=i,GameSocket.ins().Rpc(C2sProtocol.cs_shop_buy,o)},t.prototype.shopUpdataBuy=function(e){this.pShopController.updateByAddShop(e),GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_CHANGE)},t.prototype.shopInit=function(e){this.pShopController.updataByServer(e)},t.prototype.shopUnlockData=function(e){this.pShopController.shopUnlockData(e),GameGlobal.MessageCenter.dispatch(MessageDef.SHOP_CHANGE)},t.prototype.sendRefreshMysteryShopData=function(){var e=new Sproto.cs_shop_mystical_refresh_request;this.Rpc(C2sProtocol.cs_shop_mystical_refresh,e)},t.prototype.getMysterShopData=function(e){e&&(this.pShopController.mysteryData=e,MessageCenter.ins().dispatch(MessageDef.SHOP_MYSTERY_REFRESH))},t.prototype.sendMysteryBuy=function(e,t){var i=new Sproto.cs_shop_mystical_buy_request;i.index=e,i.buynum=t,this.Rpc(C2sProtocol.cs_shop_mystical_buy,i)},t.prototype.sendAllMysteryBuy=function(){for(var e=ShopController.ins().getMysteryShopData(),t=0,i=e;t<i.length;t++){var o=i[t];if(!o.isBuy){var n=o.item.currency;Checker.Money(n.id,n.count)&&this.sendMysteryBuy(o.item.index,o.item.daycount)}}},t}(BaseSystem);__reflect(ShopManage.prototype,"ShopManage");var ceui;!function(e){var t=function(t){function i(){var i=t.call(this)||this;i.skinName="CScrollerSkin";var o=i,n=new e.CTouchScroll(o.horizontalUpdateHandler,o.horizontalEndHandler,o),a=new e.CTouchScroll(o.verticalUpdateHandler,o.verticalEndHanlder,o);return i.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:n,9:a,10:null,11:!1,12:!1},i}return __extends(i,t),i}(eui.Scroller);e.CScroller=t,__reflect(t.prototype,"ceui.CScroller")}(ceui||(ceui={}));var BuyWin=function(e){function t(){var t=e.call(this)||this;return t.m_eShopType=ShopType.normal,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="BuySkin",this.num=1},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.add1Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub1Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.numLabel.addEventListener(egret.Event.CHANGE,this.inputOver,this),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.updateView),this.observe(MessageDef.POWER_CHANGE,this.updateView),this.observe(MessageDef.SHOP_CHANGE,this.updateView),e[1]&&(this.m_eShopType=e[1]),this.num=1,this.pItemData=e[0],this.shopID=this.pItemData.id,this.updateView(),this.inputOver(),UIHelper.PlayPanelTween(this.animGroup)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.add1Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub1Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.sub10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.buy,this),this.numLabel.removeEventListener(egret.Event.CHANGE,this.inputOver,this)},t.prototype.updateView=function(){var e=GlobalConfig.ins().ItemConfig[this.pItemData.id];this.itemIcon.setDataByConfig(e),this.itemIcon.isShowName(!1),this.pItemData.count&&this.itemIcon.setCount(this.pItemData.count+""),this.totalPrice.price=this.num*this.pItemData.currency.count,this.totalPrice.type=this.pItemData.currency.id,this.lbItemAccount.textFlow=TextFlowMaker.generateTextFlow(e.desc),this.itemName.text=e.name+" Lv."+(e.level||1),this.itemName.textColor=ItemBase.QUALITY_COLOR[e.quality];var t=!1;this.used.text="",this.pItemData.daycount&&this.pItemData.daycount>0&&(this.pItemData.buyTime&&this.pItemData.buyTime>0&&this.pItemData.daycount&&this.pItemData.buyTime===this.pItemData.daycount?(t=!0,this.used.text="售罄"):this.used.text="(限购"+this.pItemData.buyTime+"/"+this.pItemData.daycount+")")},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sub10Btn:this.num-=10;break;case this.sub1Btn:this.num-=1;break;case this.add10Btn:this.num+=10;break;case this.add1Btn:this.num+=1}this.num<1&&(this.num=1),this.numLabel.text=this.num+"",this.inputOver()},t.prototype.closeCB=function(e){ViewManager.ins().close(t)},t.prototype.buy=function(e){if(this.pItemData.daycount>0){var t=this.pItemData.daycount-this.pItemData.buyTime;if(0>=t)return void UserTips.ins().showTips("|C:0xff0000&T:售罄|")}var i=this.getHaveGoodsNums();if(0>=i||i<this.num){var o="货币不足";switch(this.pItemData.currency.id){case SHOP_MONEY.yuanbao:o="元宝不足,无法兑换";break;case SHOP_MONEY.bangyuan:o="绑元不足,无法兑换";break;case SHOP_MONEY.yinbi:o="银币不足,无法兑换";break;case SHOP_MONEY.banggong:o="帮贡不足,无法兑换";break;case SHOP_MONEY.gongxun:o="功勋不足,无法兑换";break;case SHOP_MONEY.pingfu:o="皮肤碎片不足,无法兑换";break;case SHOP_MONEY.huanshou:o="幻兽令不足,无法兑换";break;case SHOP_MONEY.xianlv:o="仙侣令不足,无法兑换";break;case SHOP_MONEY.jinzhuang:o="金装碎片不足,无法兑换";break;case SHOP_MONEY.youqing:o="友情值不足,无法兑换";break;case SHOP_MONEY.weiwang:o="威望值不足,无法兑换";break;case SHOP_MONEY.treasurePoint:o="寻宝积分不足,无法兑换"}UserTips.ErrorTip(o)}else{switch(this.m_eShopType){case ShopType.normal:ShopManage.ins().sendBuy(this.pItemData.shopType,this.pItemData.index,this.num);break;case ShopType.mystery:ShopManage.ins().sendMysteryBuy(this.pItemData.index,this.num),this.CloseSelf()}this.pItemData.currency.id==SHOP_MONEY.jinzhuang&&this.CloseSelf()}},t.prototype.inputOver=function(){if(this.num=parseInt(this.numLabel.text),(isNaN(this.num)||this.num<1)&&(this.num=1),this.pItemData.daycount>0){var e=this.pItemData.daycount-this.pItemData.buyTime;this.num>e&&(this.num=e)}else{var t=this.getHaveGoodsNums();this.num>t&&(this.num=t)}this.num<1&&(this.num=1),this.numLabel.text=this.num+"",this.totalPrice.price=this.num*this.pItemData.currency.count},t.prototype.getHaveGoodsNums=function(){var e=ShopController.ins().getBuyItemNums(this.pItemData.currency.id),t=Math.floor(e/this.pItemData.currency.count);return t},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(BuyWin.prototype,"BuyWin");var ShopType;!function(e){e[e.normal=0]="normal",e[e.mystery=1]="mystery"}(ShopType||(ShopType={}));var ItemShopPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_down_name="ui_cjg_btn_djg",t.btn_up_name="ui_cjg_btn_djgs",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.name=this,this.skinName="ItemShopSkin"},t.prototype.open=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),MessageCenter.ins().removeAll(this)},t.prototype.updateData=function(){var e=[],t=ItemStoreConfig.GetItemBYStoreConfig();for(var i in t)e.push(t[i]);this.listView.dataProvider=new eui.ArrayCollection(e),this.priceIcon.price=GameGlobal.actorModel.yb},t.prototype.onTap=function(e){if("buy"==e.target.name){var t=e.target.parent.goodsID;ViewManager.ins().open(BuyWin,t)}},t.prototype.buyResultCB=function(e){1==e?UserTips.ins().showTips("购买成功"):UserTips.ins().showTips("|C:0xff0000&T:购买失败|"),this.priceIcon.price=GameGlobal.actorModel.yb},t.prototype.UpdateContent=function(){},t}(BaseView);__reflect(ItemShopPanel.prototype,"ItemShopPanel",["ICommonWindowTitle"]);var ShopArenaLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t.goPrice.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_ARENA)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop);var e="",t=GameGlobal.ShopManage.pShopController.getShopLockByType(4)||5e3;"string"==typeof this.tShopData.instructions&&(e=this.tShopData.instructions.replace("%s",t)),this.account.text=e,Util.GetClass(this).NAME=this.tShopData.storename},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){this.setData(),this.tShopData.moneytype&&(this.priceIcon.setType(this.tShopData.moneytype),this.priceIcon.price=CommonUtils.overLength(ShopController.ins().getBuyItemNums(this.tShopData.moneytype)))},t.NAME="竞技商店",t}(BaseView);__reflect(ShopArenaLayer.prototype,"ShopArenaLayer",["ICommonWindowTitle"]);var ShopBangYuanLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t.goPrice.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.GOLD_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_BANGYUAN)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop);var e="";"string"==typeof this.tShopData.instructions&&(e=this.tShopData.instructions.replace("%s","0")),this.account.text=e,Util.GetClass(this).NAME=this.tShopData.storename},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){if(this.setData(),this.tShopData.moneytype&&this.tShopData.moneytype<10)switch(this.priceIcon.setType(this.tShopData.moneytype),this.tShopData.moneytype){case 1:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.gold);break;case 2:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.yb);break;case 3:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.byb)}},t.NAME="绑元商店",t}(BaseView);__reflect(ShopBangYuanLayer.prototype,"ShopBangYuanLayer",["ICommonWindowTitle"]);var ShopBlackLayer=function(e){function t(){var t=e.call(this)||this;return t.remaintime=0,t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t.goPrice.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setMoney),this.observe(MessageDef.POWER_CHANGE,this.setMoney),this.observe(MessageDef.GUILD_CONTRIB_UPDATE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),TimerManager.ins().doTimer(1e3,0,this.updateTimes,this),this.account.text="",this.getLeftTime(),this.updateTimes(),this.setMoney(),this.UpdateContent()},t.prototype.getLeftTime=function(){var e=new Date,t=e.getHours(),i=e.getMinutes(),o=e.getSeconds();this.remaintime=60*(23-t)*60+(59-60*i)+(59-o)},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_BLACK)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop),Util.GetClass(this).NAME=this.tShopData.storename},t.prototype.updateTimes=function(){this.remaintime--,this.remaintime<=0&&(this.account.visible=!1,TimerManager.ins().remove(this.updateTimes,this)),this.account.text=DateUtils.getFormatBySecond(this.remaintime)+" 后重置商店"},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){this.setData(),this.tShopData.moneytype&&(this.priceIcon.setType(this.tShopData.moneytype),this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.contrib))},t.NAME="帮会商店",t}(BaseView);__reflect(ShopBlackLayer.prototype,"ShopBlackLayer",["ICommonWindowTitle"]);var ShopCaiLiaoLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t.goPrice.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.GOLD_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_CAILIAO)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop);var e="";if("string"==typeof this.tShopData.instructions){var t=GameGlobal.UserFb.fbModel,i=0;if(t)for(var o in t){var n=t[o].totalCount||0;i+=n}var a=i+"";e=this.tShopData.instructions.replace("%s",a)}this.account.text=e,Util.GetClass(this).NAME=this.tShopData.storename},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){if(this.setData(),this.tShopData.moneytype&&this.tShopData.moneytype<10)switch(this.priceIcon.setType(this.tShopData.moneytype),this.tShopData.moneytype){case 1:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.gold);break;case 2:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.yb);break;case 3:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.byb)}},t.prototype.onClick=function(e){},t.NAME="材料商店",t}(BaseView);__reflect(ShopCaiLiaoLayer.prototype,"ShopCaiLiaoLayer",["ICommonWindowTitle"]);var ShopCommonPanel=function(e){function t(){var t=e.call(this)||this;t.m_nCurIndex=0,t.skinName="ShopCommonSkin",t.listTitle.itemRenderer=ShopCommonTitle;for(var i=GameGlobal.Config.StoreList,o=CommonUtils.GetArray(i,"id"),n=0;n<o.length;)Deblocking.IsDeblocking(o[n].openid)?n++:o.splice(n,1);return t.listTitle.dataProvider=new eui.ArrayCollection(o),t.listTitle.selectedIndex=0,t.listView.itemRenderer=ShopCommonItem,t.listView.dataProvider=new eui.ArrayCollection(ShopController.ins().getShopDataByIndex(0).shop),t.commonWindowBg.SetTitle("商店"),t}return __extends(t,e),t.prototype.OnOpen=function(){this.counterLabel.SetColor("0x6E330B"),this.counterLabel.SetTextFormat("{0}后刷新商店"),this.counterLabel.SetTextSize(26);var e=new Date(1e3*GameServer.serverTime);e.setHours(24,0,0,0),this.counterLabel.SetEndTime(e.getTime()/1e3,DurationLabel.TIMETEXT_TYPE_HHMMSS),this.commonWindowBg.OnAdded(this),this.AddClick(this.goPrice,this.tap),this.AddItemClick(this.listTitle,this.itemClick),this.observe(MessageDef.GOLD_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=this.listTitle.selectedItem.instructions;e&&(e=e.replace("%s",ShopController.ins().getCurTipsNum(this.listTitle.selectedItem.kind))),this.tipsTxt.text=e,this.priceIcon.setType(this.listTitle.selectedItem.moneytype),this.priceIcon.setPrice(ShopController.ins().getBuyItemNums(this.listTitle.selectedItem.moneytype)),this.listView.dataProvider=new eui.ArrayCollection(ShopController.ins().getShopDataByIndex(this.listTitle.selectedItem.kind).shop),this.counterLabel.visible=this.listTitle.selectedItem.kind==ShopController.EN_SHOP_BANGPAI,this.goPrice.text=this.listTitle.selectedItem.gaindes,UIHelper.SetLinkStyleLabel(this.goPrice)},t.prototype.itemClick=function(){this.m_nCurIndex!=this.listTitle.selectedIndex&&(this.UpdateContent(),this.listView.parent.stopAnimation()),this.m_nCurIndex=this.listTitle.selectedIndex},t.prototype.tap=function(){this.listTitle.selectedItem.moneytype&&UserWarn.ins().BuyGoodsWarn(this.listTitle.selectedItem.moneytype)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ShopCommonPanel.prototype,"ShopCommonPanel");var ShopCommonItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopCommonItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.onClick=function(e){egret.is(e.target.parent,"ItemIcon")||this.data&&ShopController.ins().enoughBuy(this.data)&&ViewManager.ins().open(BuyWin,this.data)},t.prototype.dataChanged=function(){var e=!1;this.lbInfo.text="";var t;this.data.id&&(t=GlobalConfig.ins().ItemConfig[this.data.id],this.nameLabel.text=t.name,this.nameLabel.textColor=ItemBase.QUALITY_TIP_COLOR[t.quality],this.itemIcon.setDataByConfig(t),this.itemIcon.isShowName(!1),this.data.count&&this.itemIcon.setCount(this.data.count+"")),this.imgXiyou.visible=1===this.data.make,this.priceIcon.setType(this.data.currency.id),this.priceIcon.setPrice(this.data.currency.count),this.data.daycount&&this.data.daycount>0&&(this.data.buyTime&&this.data.buyTime>0&&this.data.daycount&&this.data.buyTime===this.data.daycount?e=!0:(this.lbInfo.textColor=Color.l_green_1,this.lbInfo.text="(限购"+this.data.buyTime+"/"+this.data.daycount+")")),ShopController.ins().enoughBuy(this.data,3)||(this.lbInfo.text=ShopController.ins().enoughBuy(this.data,2)+"",this.lbInfo.textColor=Color.RedColor),this.imgSellOut.visible=e,this.buy.visible=!e},t}(eui.ItemRenderer);__reflect(ShopCommonItem.prototype,"ShopCommonItem");var ShopCommonTitle=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopEquipTitleSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbNe.text=this.data.storename},t}(eui.ItemRenderer);__reflect(ShopCommonTitle.prototype,"ShopCommonTitle");var ShopEqTitle=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopEquipTitleSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.lbNe.text=this.data.strName},t}(eui.ItemRenderer);__reflect(ShopEqTitle.prototype,"ShopEqTitle");var ShopEquipItem=function(e){function t(){var t=e.call(this)||this;return t.bBuyAll=!1,t.skinName="FeatsShopItem",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.onClick=function(e){egret.is(e.target.parent,"ItemIcon")||this.data&&ShopController.ins().enoughBuy(this.data)&&ViewManager.ins().open(BuyWin,this.data)},t.prototype.dataChanged=function(){this.lbInfo.text="",this.bBuyAll=!1,this.lbInfo.textColor=Color.l_green_1;var e;if(this.data.id){e=GlobalConfig.ins().ItemConfig[this.data.id],this.nameLabel.text=e.name,this.nameLabel.textColor=ItemBase.QUALITY_TIP_COLOR[e.quality],this.itemIcon.setDataByConfig(e),this.itemIcon.isShowName(!1),this.data.count&&this.itemIcon.setCount(this.data.count+""),this.lbLv.text="Lv."+(e.level||1),this.LvTipsTxt.visible=GameGlobal.actorModel.level<e.level;var t=ItemConfig.CalculateScore(this.data.id),i=SubRoles.ins().GetRoleData(),o=i.getEquipByIndex(e.subType),n=0;o&&(n=ItemConfig.CalculateScore(o.item.configID)),t>n&&(this.lbInfo.text="战斗力+"+(t-n))}this.data.make&&1===this.data.make&&(this.imgXiyou.visible=!0),this.data.currency.type?(this.priceIcon.setType(this.data.currency.id),this.priceIcon.setPrice(this.data.currency.count)):this.priceIcon.setPrice(this.data.currency.count),this.data.daycount&&this.data.daycount>0&&(this.data.buyTime&&this.data.buyTime>0&&this.data.daycount&&this.data.buyTime===this.data.daycount?this.bBuyAll=!0:this.lbInfo.text="(限购"+this.data.buyTime+"/"+this.data.daycount+")"),ShopController.ins().enoughBuy(this.data,3)||(this.lbInfo.text=ShopController.ins().enoughBuy(this.data,2),this.lbInfo.textColor=Color.RedColor),this.bBuyAll?(this.imgSellOut.visible=!0,this.buy.visible=!1):(this.imgSellOut.visible=!1,this.buy.visible=!0)},t}(eui.ItemRenderer);__reflect(ShopEquipItem.prototype,"ShopEquipItem");var ShopEquipLayer=function(e){function t(){var t=e.call(this)||this;return t.nSelect222=0,t.tTitleName=[],t.tItemData={},t.nSelect=1,t.skinName="ShopEquipSkin",t.listView.itemRenderer=ShopEquipItem,t.listTitle.itemRenderer=ShopEqTitle,t.listTitle.selectedIndex=0,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setMoney),this.observe(MessageDef.POWER_CHANGE,this.setMoney),this.observe(MessageDef.GUILD_CONTRIB_UPDATE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateRedPoint),this._AddItemClick(this.listTitle,this.onListClick),this._AddClick(this.goPrice,this.onClick),UIHelper.SetLinkStyleLabel(this.goPrice),this.setMoney(),this.UpdateContent(),this.UpdateRedPoint();var i=e[0];if(i){for(var o=0,n=0,a=this.tTitleName;n<a.length;n++){var r=a[n];if(r.nSelect==i)break;++o}this.OnSelectList(i),this.listTitle.selectedIndex=o}},t.prototype.UpdateRedPoint=function(){this.redPoint.visible=GameGlobal.UserBag.HasOrangeEquip()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_EQUIP),this.tItemData={},this.tTitleName=[];for(var e in this.tShopData.shop){this.tItemData[this.tShopData.shop[e].tabnum]||(this.tItemData[this.tShopData.shop[e].tabnum]=[]),this.tItemData[this.tShopData.shop[e].tabnum].push(this.tShopData.shop[e]);var t=GlobalConfig.ins().ItemConfig[this.tShopData.shop[e].id];if(this.tTitleName.length>0)for(var i=0;i<this.tTitleName.length;i++){if(this.tTitleName[i].nSelect===this.tShopData.shop[e].tabnum){this.tTitleName[i].maxLv=t.level;break}i==this.tTitleName.length-1&&this.tTitleName.push(this.getShopTitleName(this.tShopData.shop[e].tabnum,t.level))}else this.tTitleName.push(this.getShopTitleName(this.tShopData.shop[e].tabnum,t.level))}for(var o=SubRoles.ins().GetRoleData(),n=o.getEquipLen(),a=0,r=-1,s=null,l=0;n>l;l++){var c=o.getEquipByIndex(l);c&&(s=c.item.itemConfig),s&&(4<=s.quality&&a++,(r>s.level||0>r)&&(r=s.level))}if(a>=n)for(var u=0;u<this.tTitleName.length;)this.tTitleName[u].maxLv<=r&&1!=this.tTitleName[u].nSelect?this.tTitleName.splice(u,1):u++},t.prototype.getShopTitleName=function(e,t){var i={},o="";return o=1===e?"物品商店":e+"级金装",i={nSelect:e,strName:o,maxLv:t}},t.prototype.UpdateContent=function(){this.setData();var e=this.tItemData[this.nSelect];ShopController.ins().sortLimitTime(e),this.listView.dataProvider.replaceAll(e),this.listTitle.dataProvider.replaceAll(this.tTitleName);var t="",i=GameGlobal.UserFb.lltModel.layer+"";"string"==typeof this.tShopData.instructions&&(t=this.tShopData.instructions.replace("%s",i)),this.account.text=t},t.prototype.setMoney=function(){this.setData(),this.tShopData.moneytype&&(this.priceIcon.setType(this.tShopData.moneytype),this.priceIcon.price=CommonUtils.overLength(ShopController.ins().getBuyItemNums(this.tShopData.moneytype)))},t.prototype.onListClick=function(e){var t=e.item.nSelect;this.OnSelectList(t)},t.prototype.OnSelectList=function(e){this.nSelect=e,ShopController.ins().sortLimitTime(this.tItemData[e]),this.listView.dataProvider=new eui.ArrayCollection(this.tItemData[e])},t.prototype.onListViewClick=function(e){},t.prototype.onClick=function(e){switch(e.currentTarget){case this.goPrice:ViewManager.ins().open(ShopResolveLayer)}},t.NAME="装备商店",t}(BaseView);__reflect(ShopEquipLayer.prototype,"ShopEquipLayer",["ICommonWindowTitle"]);var ShopIntegralPnael=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=IntegralItem,t.priceGoup.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateContent),this.listView.dataProvider=new eui.ArrayCollection(ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_INTEGRAL).shop),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.MysticalShopBaseConfig;this.account.text="我的积分："+GameGlobal.ShopController.getBuyItemNums(e.scorecosttype.id)},t.NAME="积分商店",t}(BaseView);__reflect(ShopIntegralPnael.prototype,"ShopIntegralPnael",["ICommonWindowTitle"]);var IntegralItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopIntegralItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.onClick=function(e){egret.is(e.target.parent,"ItemIcon")||this.data&&ViewManager.ins().open(BuyWin,this.data)},t.prototype.dataChanged=function(){var e=GlobalConfig.ins().ItemConfig[this.data.id];this.nameLabel.textColor=ItemBase.QUALITY_COLOR[e.quality],this.nameLabel.text=e.name,this.needIntegralTxt.text="积分："+this.data.currency.count,this.itemIcon.data=e,this.itemIcon.setnameTxtVisible(!1)},t}(eui.ItemRenderer);__reflect(IntegralItem.prototype,"IntegralItem");var ShopLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tShopData=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="ShopSkin"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.viewStack.tabChildren=this.getOpenList(e[0]||[]),this.commonWindowBg.SetViewStack(this.viewStack),this.viewStack.UpdateTabShowState(this.viewStack.length,!1),this.commonWindowBg.OnAdded(this,0,e[1]);var i=e[1];i==ShopController.EN_SHOP_EQUIP&&(this.observe(MessageDef.ITEM_COUNT_CHANGE,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint())},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(0,GameGlobal.UserBag.HasOrangeEquip())},t.prototype.getOpenList=function(e){var t=[];for(var i in e)switch(e[i]){case ShopController.EN_SHOP_DAYAN:t.push(TabView.CreateTabViewData(ShopNormalView));break;case ShopController.EN_SHOP_EQUIP:t.push(TabView.CreateTabViewData(ShopEquipLayer));break;case ShopController.EN_SHOP_BLACK:t.push(TabView.CreateTabViewData(ShopBlackLayer));break;case ShopController.EN_SHOP_YUANBAO:t.push(TabView.CreateTabViewData(ShopYuanBaoLayer));break;case ShopController.EN_SHOP_BANGYUAN:t.push(TabView.CreateTabViewData(ShopBangYuanLayer));break;case ShopController.EN_SHOP_CAILIAO:t.push(TabView.CreateTabViewData(ShopCaiLiaoLayer));break;case ShopController.EN_SHOP_ARENA:t.push(TabView.CreateTabViewData(ShopArenaLayer));break;case ShopController.EN_SHOP_XIANDU:t.push(TabView.CreateTabViewData(ShopXianDaoLayer));break;case ShopController.EN_SHOP_WEIWANG:t.push(TabView.CreateTabViewData(ShopWeiWangLayer));break;case ShopController.EN_SHOP_BASHI:t.push(TabView.CreateTabViewData(shopBashiLayer));break;case ShopController.EN_SHOP_CHONGWU:t.push(TabView.CreateTabViewData(ShopChongWuLayer));break;case ShopController.EN_SHOP_XIANLV:t.push(TabView.CreateTabViewData(ShopXianlvLayer));break;case ShopController.EN_SHOP_BANGPAI:t.push(TabView.CreateTabViewData(ShopBanghuiLayer));break;case ShopController.EN_SHOP_ZHUANGBAN:t.push(TabView.CreateTabViewData(ShopZhangBanLayer));break;case ShopController.EN_SHOP_PIFU:t.push(TabView.CreateTabViewData(ShopPiFuLayer));break;case ShopController.EN_SHOP_YOUQING:t.push(TabView.CreateTabViewData(ShopYouQingLayer));break;case ShopController.EN_SHOP_JINGJI:t.push(TabView.CreateTabViewData(ShopJingJiLayer));break;case ShopController.EN_SHOP_QUJING:t.push(TabView.CreateTabViewData(ShopQuJingLayer));break;case ShopController.EN_SHOP_DATI:t.push(TabView.CreateTabViewData(ShopDaTiLayer));break;case ShopController.EN_SHOP_MYSTERY:t.push(TabView.CreateTabViewData(ShopMysteryPanel));break;case ShopController.EN_SHOP_INTEGRAL:t.push(TabView.CreateTabViewData(ShopIntegralPnael));break;case ShopController.EN_SHOP_TREASURE_HUNT:t.push(TabView.CreateTabViewData(ShopTreasureHuntPnael))}return t},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.OnBackClick=function(e){return 0},t.prototype.OnOpenIndex=function(e){return!0},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ShopLayer.prototype,"ShopLayer",["ICommonWindow","ICommonWindowTitle"]);var ShopMysteryPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopMysterySkin",t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.SHOP_MYSTERY_REFRESH,this.UpdateContent),this._AddClick(this.allBuyBtn,this.tap),this._AddClick(this.refreshBtn,this.tap),this.listView.itemRenderer=ShopMysteryItem,this.counterLabel.SetColor(Color.l_green_1),GameGlobal.ShopController.mysteryData&&this.counterLabel.SetEndTime(GameGlobal.ShopController.mysteryData.refreshtime,DurationLabel.TIMETEXT_TYPE_HHMMSS)},t.prototype.UpdateContent=function(){if(GameGlobal.ShopController.mysteryData){var e=GameGlobal.ShopController.mysteryData.refreshcount,t=GameGlobal.Config.MysticalShopBaseConfig;this.integralTxt.text=""+GameGlobal.ShopController.getBuyItemNums(t.scorecosttype.id),this.limitText.text="("+e+"/"+t.refreshmax+")";var i=t.costtype[0];this.priceIcon0.setType(i.id),this.priceIcon0.setPrice(ShopController.ins().getBuyItemNums(MoneyConst.yuanbao));var o=0;o=e>=1&&10>e?e+1:1>e?1:10,i=GameGlobal.Config.RefreshPrice[o].refreshprice[0],this.priceIcon1.setType(i.id),this.priceIcon1.setPrice(i.count),this.listView.dataProvider=new eui.ArrayCollection(ShopController.ins().getMysteryShopData())}},t.prototype.tap=function(e){switch(e.currentTarget){case this.allBuyBtn:GameGlobal.ShopManage.sendAllMysteryBuy();break;case this.refreshBtn:var t=GameGlobal.Config.MysticalShopBaseConfig,i=GameGlobal.ShopController.mysteryData;if(i.refreshcount>=t.refreshmax)return void GameGlobal.UserTips.showTips("刷新次数不足");var o=0;o=i.refreshcount>=1&&i.refreshcount<=10?i.refreshcount+1:i.refreshcount<1?1:10;var n=GameGlobal.Config.RefreshPrice[o].refreshprice[0];Checker.Money(n.id,n.count)&&GameGlobal.ShopManage.sendRefreshMysteryShopData()}},t.NAME="神秘商店",t}(BaseView);__reflect(ShopMysteryPanel.prototype,"ShopMysteryPanel");var ShopMysteryItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){egret.is(e.target.parent,"ItemIcon")||this.data.buyCount>=this.data.item.daycount||(this.data.item.buyTime=this.data.buyCount,ViewManager.ins().open(BuyWin,this.data.item,ShopType.mystery))},t.prototype.dataChanged=function(){var e=this.data.item,t=GameGlobal.Config.ItemConfig[e.id];e.discount?this.discountImg.source=e.discount:this.discountImg.source="",this.priceIcon0.setType(e.oriprice.id),this.priceIcon0.setPrice(e.oriprice.count),this.priceIcon1.setType(e.currency.id),this.priceIcon1.setPrice(e.currency.count),this.itemIcon.data=e.id,this.itemIcon.isShowName(!1),this.itemIcon.setCount(this.data.item.count),this.name_txt.textColor=ItemBase.QUALITY_COLOR[t.quality],this.name_txt.text=t.name,this.limit_txt.text="限购："+this.data.buyCount+"/"+e.daycount,this.imgSellOut.visible=this.data.buyCount>=e.daycount
},t}(eui.ItemRenderer);__reflect(ShopMysteryItem.prototype,"ShopMysteryItem");var ShopNormalView=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t}return __extends(t,e),t.prototype.OnOpen=function(){this.goPrice.visible=!1,this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_DAYAN)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop);var e="",t=GameGlobal.UserFb.lltModel.layer+"";"string"==typeof this.tShopData.instructions&&(e=this.tShopData.instructions.replace("%s",t)),this.account.text=e},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){this.setData(),this.tShopData.moneytype&&(this.priceIcon.setType(this.tShopData.moneytype),this.priceIcon.price=CommonUtils.overLength(ShopController.ins().getBuyItemNums(this.tShopData.moneytype)))},t.NAME="宝塔商店",t}(BaseView);__reflect(ShopNormalView.prototype,"ShopNormalView",["ICommonWindowTitle"]);var ShopRectItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopRectItemSkin",t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onClick,t),t}return __extends(t,e),t.prototype.onClick=function(e){egret.is(e.target.parent,"ItemIcon")||this.data&&ShopController.ins().enoughBuy(this.data)&&ViewManager.ins().open(BuyWin,this.data)},t.prototype.dataChanged=function(){var e=!1;this.lbInfo.text="";var t;this.data.id&&(t=GlobalConfig.ins().ItemConfig[this.data.id],this.nameLabel.text=t.name,this.nameLabel.textColor=ItemBase.QUALITY_TIP_COLOR[t.quality],this.itemIcon.setDataByConfig(t),this.itemIcon.isShowName(!1),this.data.count&&this.itemIcon.setCount(this.data.count+"")),this.data.limittime?(this.imgXiyou.visible=!0,this.imgXiyou.source="ui_jchd_bm_xianshi"):this.data.make&&1===this.data.make?(this.imgXiyou.visible=!0,this.imgXiyou.source="ui_bm_xiyou"):this.imgXiyou.visible=!1,this.data.currency.type?(this.priceIcon.setType(this.data.currency.id),this.priceIcon.setPrice(this.data.currency.count)):(this.priceIcon.setType(this.data.currency.id),this.priceIcon.setPrice(this.data.currency.count)),this.data.daycount&&this.data.daycount>0&&(this.data.buyTime&&this.data.buyTime>0&&this.data.daycount&&this.data.buyTime===this.data.daycount?e=!0:(this.lbInfo.textColor=Color.l_green_1,this.lbInfo.text="(限购"+this.data.buyTime+"/"+this.data.daycount+")")),this.UpdateTime(),ShopController.ins().enoughBuy(this.data,3)||(this.lbInfo.text=ShopController.ins().enoughBuy(this.data,2),this.lbInfo.textColor=Color.RedColor),e?this.imgSellOut.visible=!0:this.imgSellOut.visible=!1},t.prototype.UpdateTime=function(){if(this.data.limittime){this.lbtime.visible=!0;var e=this.data.limittime-GameServer.serverTime;e>0?this.lbtime.text=DateUtils.format_9(1e3*e):this.lbtime.text="已结束"}else this.lbtime.visible=!1},t}(eui.ItemRenderer);__reflect(ShopRectItem.prototype,"ShopRectItem");var ShopResolveLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopResolveSkin",t.listView.itemRenderer=ShopResolveItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="金装分解",this.observe(MessageDef.BYB_CHANGE,this.updateContent),this.observe(MessageDef.YB_CHANGE,this.updateContent),this.observe(MessageDef.ITEM_COUNT_CHANGE,this.updateContent),this._AddClick(this.gainWayLabel0,this.tap),this._AddClick(this.gainWayLabel1,this.tap),this._AddClick(this.gainWayLabel2,this.tap),this.priceIcon.setType(MoneyConst.JingZhuang),UIHelper.SetLinkStyleLabel(this.gainWayLabel0),UIHelper.SetLinkStyleLabel(this.gainWayLabel1),UIHelper.SetLinkStyleLabel(this.gainWayLabel2),this.updateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve()},t.prototype.updateContent=function(){this.priceIcon.setPrice(CommonUtils.overLength(ShopController.ins().getBuyItemNums(MoneyConst.JingZhuang)));var e=UserBag.ins().getBagEquipByLevelSort(ITEM_QUALITY.ORANGE_QUALITY);this.listView.dataProvider.replaceAll(e)},t.prototype.tap=function(e){switch(e.currentTarget){case this.gainWayLabel0:ViewManager.ins().Guide(1007);break;case this.gainWayLabel1:ViewManager.ins().Guide(1029);break;case this.gainWayLabel2:ViewManager.ins().Guide(1031)}this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ShopResolveLayer.prototype,"ShopResolveLayer");var ShopResolveItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)},t.prototype.destruct=function(){this.buy.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnClick,this)},t.prototype.dataChanged=function(){if(this.data.itemConfig){this.itemIcon.setDataByConfig(this.data.itemConfig),this.itemIcon.setItemCount(!1),this.nameLabel.text=this.data.itemConfig.name+"(Lv."+this.data.itemConfig.level+")";var e=1e4*this.data.itemConfig.level+100*this.data.itemConfig.type+this.data.itemConfig.quality,t=GlobalConfig.ins().SmeltConfig[e];if(t&&t.cost&&t.cost.length)for(var i in t.cost){var o=t.cost[i];this.priceIcon.setType(o.id),this.priceIcon.setPrice(o.count)}}},t.prototype.onBtnClick=function(){var e=[],t={handle:1};this.data&&this.data.handle&&(t.handle=this.data.handle,e.push(t),UserEquip.ins().sendSmeltEquip(e))},t}(eui.ItemRenderer);__reflect(ShopResolveItem.prototype,"ShopResolveItem");var ShopTreasureHuntPnael=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t.account.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.goPrice.visible=!1,this.observe(MessageDef.ITEM_COUNT_CHANGE,this.setMoney),this.observe(MessageDef.POWER_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent(),this.AddLoopTimer(1e3,this.Update)},t.prototype.Update=function(){for(var e=0,t=this.listView.$children;e<t.length;e++){var i=t[e],o=i;o.UpdateTime&&o.UpdateTime()}},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_TREASURE_HUNT)},t.prototype.UpdateContent=function(){this.setData();for(var e=[],t=GameServer.serverTime,i=0,o=this.tShopData.shop;i<o.length;i++){var n=o[i];n.limittime&&t>=n.limittime||e.push(n)}this.listView.dataProvider.replaceAll(e)},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){this.setData(),this.tShopData.moneytype&&(this.priceIcon.setType(this.tShopData.moneytype),this.priceIcon.price=CommonUtils.overLength(ShopController.ins().getBuyItemNums(this.tShopData.moneytype)))},t.NAME="寻宝商店",t}(BaseView);__reflect(ShopTreasureHuntPnael.prototype,"ShopTreasureHuntPnael",["ICommonWindowTitle"]);var ShopWeiWangLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_WEIWANG)},t.NAME="威望商店",t}(ShopXianDaoLayer);__reflect(ShopWeiWangLayer.prototype,"ShopWeiWangLayer");var shopBashiLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_BASHI)},t.prototype.setValue=function(){this.setAccountText(GameGlobal.ShopManage.pShopController.getShopLockByType(9))},t.NAME="81难商店",t}(ShopXianDaoLayer);__reflect(shopBashiLayer.prototype,"shopBashiLayer");var ShopChongWuLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_CHONGWU)},t.NAME="宠物商店",t}(ShopXianDaoLayer);__reflect(ShopChongWuLayer.prototype,"ShopChongWuLayer");var ShopXianlvLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_XIANLV)},t.NAME="仙侣商店",t}(ShopXianDaoLayer);__reflect(ShopXianlvLayer.prototype,"ShopXianlvLayer");var ShopBanghuiLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_BANGPAI)},t.NAME="帮派福利",t}(ShopXianDaoLayer);__reflect(ShopBanghuiLayer.prototype,"ShopBanghuiLayer");var ShopZhangBanLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_ZHUANGBAN)},t.NAME="装扮商店",t}(ShopXianDaoLayer);__reflect(ShopZhangBanLayer.prototype,"ShopZhangBanLayer");var ShopPiFuLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_PIFU)},t.NAME="皮肤商店",t}(ShopXianDaoLayer);__reflect(ShopPiFuLayer.prototype,"ShopPiFuLayer");var ShopYouQingLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_YOUQING)},t.NAME="友情商店",t}(ShopXianDaoLayer);__reflect(ShopYouQingLayer.prototype,"ShopYouQingLayer");var ShopJingJiLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_JINGJI)},t.prototype.setValue=function(){this.setAccountText(GameGlobal.ShopManage.pShopController.getShopLockByType(4))},t.NAME="竞技福利",t}(ShopXianDaoLayer);__reflect(ShopJingJiLayer.prototype,"ShopJingJiLayer");var ShopQuJingLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_QUJING)},t.prototype.setValue=function(){this.setAccountText(GameGlobal.ShopManage.pShopController.getShopLockByType(5))},t.NAME="取经商店",t}(ShopXianDaoLayer);__reflect(ShopQuJingLayer.prototype,"ShopQuJingLayer");var ShopDaTiLayer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_DATI)},t.prototype.setValue=function(){this.setAccountText(GameGlobal.ShopManage.pShopController.getShopLockByType(6))},t.NAME="科举商店",t}(ShopXianDaoLayer);__reflect(ShopDaTiLayer.prototype,"ShopDaTiLayer");var ceui;!function(e){function t(e){var t=e-1;return t*t*t+1}var i=4,o=[1,1.33,1.66,2],n=2.33,a=.02,r=.998,s=.95,l=Math.log(r),c=function(){function e(e,i,o){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,this.updateFunction=e,this.endFunction=i,this.target=o,this.animation=new eui.sys.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=t}return e.prototype.isPlaying=function(){return this.animation.isPlaying},e.prototype.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},e.prototype.isStarted=function(){return this.started},e.prototype.start=function(e){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=e,this.offsetPoint=e,egret.startTick(this.onTick,this)},e.prototype.update=function(e,t,i){t=Math.min(-t,0),this.currentPosition=e,this.maxScrollPos=t;var o=this.offsetPoint-e,n=o+i;this.offsetPoint=e,n>0&&(this.$bounces?n-=.5*o:n=0),t>n&&(this.$bounces?n-=.5*o:n=t),this.currentScrollPos=n,this.updateFunction.call(this.target,n)},e.prototype.finish=function(e,t){t=-t,egret.stopTick(this.onTick,this),this.started=!1;for(var i=this.velocity*n,c=this.previousVelocity,u=c.length,p=n,h=0;u>h;h++){var d=o[h];i+=c[0]*d,p+=d}var _=i/p,f=Math.abs(_),m=0,g=0;if(f>a)if(g=e+(_-a)/l*2*this.$scrollFactor,g>0||t>g)for(g=e;Math.abs(_)>a;)g-=_,_*=g>0||t>g?r*s:r,m++;else m=Math.log(a/f)/l;else g=e;if(this.target.$getThrowInfo){var v=this.target.$getThrowInfo(e,g);g=v.toPos}m>0?(this.$bounces||(g>0?g=0:t>g&&(g=t)),this.throwTo(g,m)):this.finishScrolling()},e.prototype.onTick=function(e){var t=e-this.previousTime;if(t>10){var o=this.previousVelocity;o.length>=i&&o.shift(),this.velocity=(this.currentPosition-this.previousPosition)/t,o.push(this.velocity),this.previousTime=e,this.previousPosition=this.currentPosition}return!0},e.prototype.finishScrolling=function(e){var t=this.currentScrollPos,i=this.maxScrollPos,o=t;t>0&&(o=0),i>t&&(o=i),this.throwTo(o,300)},e.prototype.throwTo=function(e,t){void 0===t&&(t=500);var i=this.currentScrollPos;if(i==e)return void this.endFunction.call(this.target);var o=this.animation;o.duration=t,o.from=i,o.to=e,o.play()},e.prototype.onScrollingUpdate=function(e){this.currentScrollPos=e.currentValue,this.updateFunction.call(this.target,e.currentValue)},e}();e.CTouchScroll=c,__reflect(c.prototype,"ceui.CTouchScroll")}(ceui||(ceui={}));var ShopYuanBaoLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopTitle",t.listView.itemRenderer=ShopRectItem,t.goPrice.visible=!1,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.GOLD_CHANGE,this.setMoney),this.observe(MessageDef.SHOP_CHANGE,this.UpdateContent),this.setMoney(),this.UpdateContent()},t.prototype.setData=function(){this.tShopData=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_YUANBAO)},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider.replaceAll(this.tShopData.shop);var e="";"string"==typeof this.tShopData.instructions&&(e=this.tShopData.instructions.replace("%s","0")),this.account.text=e,Util.GetClass(this).NAME=this.tShopData.storename},t.prototype.onListViewClick=function(e){var t=e.item;t&&ShopController.ins().enoughBuy(t)&&ViewManager.ins().open(BuyWin,t)},t.prototype.setMoney=function(){if(this.setData(),this.tShopData.moneytype&&this.tShopData.moneytype<10)switch(this.priceIcon.setType(this.tShopData.moneytype),this.tShopData.moneytype){case 1:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.gold);break;case 2:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.yb);break;case 3:this.priceIcon.price=CommonUtils.overLength(GameGlobal.actorModel.byb)}},t.NAME="元宝商店",t}(BaseView);__reflect(ShopYuanBaoLayer.prototype,"ShopYuanBaoLayer",["ICommonWindowTitle"]);var SwordModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_SHENGB)||this;return t.mMsgDefUpdateExp=MessageDef.ROLE_SWORD_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.ROLE_SWORD_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.ROLE_SWORD_UPDATE,t.mMsgDefInit=MessageDef.ROLE_SWORD_INIT,t.mMsgDefUpdateEquip=MessageDef.ROLE_SWORD_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_SWORD_EQUIP_UP,t.mRedPoint=new SwordModelRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.WeaponBaseConfig,this.LvproConfig=GameGlobal.Config.WeaponLvproConfig,this.SkillConfig=GameGlobal.Config.WeaponSkillConfig,this.AttrsConfig=GameGlobal.Config.WeaponAttrsConfig,this.ProgressConfig=GameGlobal.Config.WeaponProgressConfig,this.SkinConfig=GameGlobal.Config.WeaponSkinConfig,e.prototype.Init.call(this)},t}(UserTemplate);__reflect(SwordModel.prototype,"SwordModel");var SwordModelRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.SHENGB,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(SwordModelRedPoint.prototype,"SwordModelRedPoint");var SwordPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.SwordModel,t.mModelRedPoint=GameGlobal.SwordModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.weapon,t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_28)},t.RedPointCheck=function(){return GameGlobal.SwordModel.mRedPoint.IsRedPoint()},t.NAME="神兵",t}(RoleRidePanel);__reflect(SwordPanel.prototype,"SwordPanel");var AchievementData=function(){function e(){}return e}();__reflect(AchievementData.prototype,"AchievementData");var MissionState;!function(e){e[e.doing=0]="doing",e[e.canGet=1]="canGet",e[e.havaGet=2]="havaGet"}(MissionState||(MissionState={}));var TaskData=function(){function e(){}return e}();__reflect(TaskData.prototype,"TaskData");var TaskState;!function(e){e[e.NONE=0]="NONE",e[e.FINISH=1]="FINISH",e[e.GET=2]="GET"}(TaskState||(TaskState={}));var UserTask=function(e){function t(){var t=e.call(this)||this;return t.mainTaskData=[],t.regNetMsg(S2cProtocol.sc_task_info,t.doTaskData),t.regNetMsg(S2cProtocol.sc_task_update,t.doTaskChangeData),t}return __extends(t,e),t.prototype.getTaskConfigById=function(e){var t=GameGlobal.Config.TaskConfig;return t[e]},t.prototype.getTaskConditionById=function(e){var t=GameGlobal.Config.TaskConfig;return t[e].condition},t.ins=function(){return e.ins.call(this)},t.prototype.sendGetTask=function(e){var t=new Sproto.cs_task_reward_request;t.id=e,this.Rpc(C2sProtocol.cs_task_reward,t)},t.prototype.doTaskData=function(e){this.taskData={},this.mainTaskData=[];var t=e.type;if(1==t){for(var i=e.tasks.length,o=void 0,n=0;i>n;n++){var a=e.tasks[n];o=new TaskData,o.id=a.id,o.value=a.progress.value,o.state=a.status,this.mainTaskData.push(o)}GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_MAIN_TASK)}this.taskData[t]=this.mainTaskData,this.sortTask()},t.prototype.doTaskChangeData=function(e){if(1==e.type){var t=e.data.id,i=this.getTaskDataById(1,t);i&&(i.value=e.data.progress.value,i.state=e.data.status,this.sortTask(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_MAIN_TASK))}},t.prototype.getTaskDataById=function(e,t){var i;if(this.taskData[e]){var o=this.taskData[e],n=0,a=o.length;for(n;a>n;n++)if(o[n].id==t){i=o[n];break}}return i},t.prototype.sortTask=function(){if(this.mainTaskData.length>2){this.mainTaskData.sort(this.sort);for(var e=[],t=0;t<this.mainTaskData.length;t++)1!=this.mainTaskData[t].state&&(e.push(this.mainTaskData[t]),this.mainTaskData.splice(t,1),t--);e.length>0&&(this.mainTaskData=this.mainTaskData.concat(e))}},t.prototype.sort=function(e,t){var i=e.id,o=t.id;return o>i?-1:i>o?1:0},t.getTopDataReach=function(e){var t=0;return t},t.getBottomIndex=function(e){return 0},t.getTopData=function(){var e=[];return e.sort(t.sortTopData),e},t.sortTopData=function(e,t){return e.state==MissionState.canGet&&t.state!=MissionState.canGet?-1:t.state==MissionState.canGet&&e.state!=MissionState.canGet?1:e.state==MissionState.havaGet&&t.state!=MissionState.havaGet?1:t.state==MissionState.havaGet&&e.state!=MissionState.havaGet?-1:e.id>t.id?1:t.id>e.id?-1:0},t.prototype.CheckCanVitalityReward=function(e){return!1},t}(BaseSystem);__reflect(UserTask.prototype,"UserTask");var TaskConfigId;!function(e){e[e.INDEX=7]="INDEX",e[e.MINE=8]="MINE"}(TaskConfigId||(TaskConfigId={}));var VitalityData=function(){function e(){}return e}();__reflect(VitalityData.prototype,"VitalityData");var TeacherController=function(e){function t(){var t=e.call(this)||this;return t.tInvList=[],t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.doInfo=function(e){this.teacherInfo=e},t.prototype.changeRewards=function(e){e&&(this.teacherInfo.teacherData.rewards=e)},t.prototype.doUpdate=function(e){if(e.studentData)for(var t in this.teacherInfo.studentData){var i=this.teacherInfo.studentData[t];i.no==e.studentData.no&&this.analyze(i,e.studentData)}e.teacherData&&this.analyze(this.teacherInfo.teacherData,e.teacherData)},t.prototype.posStudent=function(e){this.tPosStudent=e},t.prototype.lookForReward=function(e,t){var i=[];if(e){var o=GlobalConfig.ins().MasterTaskRewardConfig;for(var n in o){var a=o[n];if(a.level){var r=a.level[0]||1,s=a.level[1]||1e5;e>=r&&s>=e&&(1==t?i=a.pupilreward:2==t&&(i=a.masterreward))}}}return i},t.prototype.dograduation=function(e){var t=this.teacherInfo.studentData,i=this.teacherInfo.teacherData;if(t)for(var o=0;o<t.length;o++)if(t[o].no===e.no)return void t.splice(o,1);if(i&&i.no===e.no)for(var n in i)delete i[n]},t.prototype.messageAdd=function(e){this.teacherInfo.messageData?this.teacherInfo.messageData.push(e):(this.teacherInfo.messageData=[],this.teacherInfo.messageData.push(e))},t.prototype.deleteMessage=function(e){for(var t=this.teacherInfo.messageData,i=0;i<t.length;i++)if(t[i].dbid&&t[i].dbid===e){t.splice(i,1),GameGlobal.MessageCenter.dispatch(MessageDef.TEACHER_CHANGE);break}},t.prototype.analyze=function(e,t){for(var i in e)t.hasOwnProperty(i)&&(e[i]=t[i])},t.prototype.getInvList=function(){var e=[];for(var t in this.teacherInfo.messageData){var i=this.teacherInfo.messageData[t],o={dbid:0,name:"name",lv:0,type:0,tag:!1};o.dbid=i.dbid,o.name=i.name,o.lv=i.lv,o.type=2,e.push(o)}for(var t in this.tPosStudent){var i=this.tPosStudent[t],o={dbid:0,name:"name",lv:0,type:0,tag:!1};o.dbid=i.dbid,o.name=i.name,o.lv=i.lv,o.type=1,o.tag=i.tag,e.push(o)}for(var t in e)e[t].index=parseInt(t);return e},t.prototype.getTeacherIdInFirst=function(){var e=0;return this.teacherInfo&&this.teacherInfo.teacherData&&this.teacherInfo.teacherData.no&&(e=this.teacherInfo.teacherData.no),e},t}(BaseSystem);__reflect(TeacherController.prototype,"TeacherController");var TeacherManage=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_teachers_info,t.doInfo),t.regNetMsg(S2cProtocol.sc_teachers_update,t.doUpdate),t.regNetMsg(S2cProtocol.sc_teachers_graduation,t.dograduation),t.regNetMsg(S2cProtocol.sc_teachers_message_add,t.messageAdd),t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.message=function(){this.Rpc(C2sProtocol.cs_teachers_message)},t.prototype.getMessage=function(){this.Rpc(C2sProtocol.cs_teachers_get_message,null,function(e){var t=e;t.data&&(GameGlobal.TeacherController.posStudent(t.data),MessageCenter.ins().dispatch(MessageDef.TEACHER_CHANGE))})},t.prototype.applyTeacher=function(e){var t=new Sproto.cs_teachers_apply_teacher_request;t.sDbid=e,this.Rpc(C2sProtocol.cs_teachers_apply_teacher,t,function(e){var t=e;t.ret&&UserTips.ins().showTips("已发送收徒请求")})},t.prototype.applyConfirm=function(e,t){var i=new Sproto.cs_teachers_apply_confirm_request;i.tDbid=e,i.res=t,this.Rpc(C2sProtocol.cs_teachers_apply_confirm,i),GameGlobal.TeacherController.deleteMessage(e)},t.prototype.teachExp=function(e){var t=new Sproto.cs_teachers_teach_exp_request;t.no=e,this.Rpc(C2sProtocol.cs_teachers_teach_exp,t)},t.prototype.getExp=function(e){var t=new Sproto.cs_teachers_get_exp_request;t.no=e,this.Rpc(C2sProtocol.cs_teachers_get_exp,t)},t.prototype.graduation=function(e,t){var i=new Sproto.cs_teachers_graduation_request;i.no=e,i.typ=t,this.Rpc(C2sProtocol.cs_teachers_graduation,i)},t.prototype.forceGetReward=function(e,t){if(e&&t){var i=new Sproto.cs_teachers_force_get_reward_request;i.no=e,i.act=t,this.Rpc(C2sProtocol.cs_teachers_force_get_reward,i,function(e){var t=e;t.ret&&(GameGlobal.TeacherController.changeRewards(t.rewards),MessageCenter.ins().dispatch(MessageDef.TEACHER_CHANGE))})}},t.prototype.doInfo=function(e){GameGlobal.TeacherController.doInfo(e),GameGlobal.MessageCenter.dispatch(MessageDef.TEACHER_CHANGE)},t.prototype.doUpdate=function(e){GameGlobal.TeacherController.doUpdate(e),GameGlobal.MessageCenter.dispatch(MessageDef.TEACHER_CHANGE)},t.prototype.dograduation=function(e){GameGlobal.TeacherController.dograduation(e),GameGlobal.MessageCenter.dispatch(MessageDef.TEACHER_CHANGE)},t.prototype.messageAdd=function(e){GameGlobal.TeacherController.messageAdd(e),GameGlobal.MessageCenter.dispatch(MessageDef.TEACHER_CHANGE)},t}(BaseSystem);__reflect(TeacherManage.prototype,"TeacherManage");var RelationWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(TeacherPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.mCommonWindowBg.OnAdded(this,i)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(RelationWin.prototype,"RelationWin");var TeacherDepartItem=function(e){function t(){var t=e.call(this)||this;return t.nType=1,t.skinName="TeacherItemDepart",t._AddClick(t.btnDepart,t.onClick),t.listViewL.itemRenderer=ItemBaseNotName,t.listViewR.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.prototype.onUpdate=function(e){this.nType=e||1,this.oData=GlobalConfig.ins().GraduateConfig[this.nType],this.onUpdateContent()},t.prototype.onUpdateContent=function(){this.oData.pupilreward&&this.oData.masterreward&&(this.listViewL.dataProvider=new eui.ArrayCollection(this.oData.pupilreward),this.listViewR.dataProvider=new eui.ArrayCollection(this.oData.masterreward)),2===this.nType?(this.lbFree.visible=!1,this.mPriceIcon.visible=!0,this.oData.cost[0]&&(this.mPriceIcon.setType(this.oData.cost[0].id),this.mPriceIcon.setPrice(this.oData.cost[0].count)),this.lbNe.text="完美出师"):(this.mPriceIcon.visible=!1,this.lbFree.visible=!0,this.lbNe.text="普通出师")},t.prototype.onClick=function(e){switch(e.target){case this.btnDepart:var t=GameGlobal.TeacherController.getTeacherIdInFirst();2==this.nType?Checker.CheckDatas(this.oData.cost,!1)&&t&&GameGlobal.TeacherManage.graduation(t,this.nType):t&&GameGlobal.TeacherManage.graduation(t,this.nType)}},t}(BaseView);__reflect(TeacherDepartItem.prototype,"TeacherDepartItem");var TeacherFirstView=function(e){function t(){var t=e.call(this)||this;return t.state=1,t.tRewardData=[],t.skinName="TeacherFirstSkin",t.listView.itemRenderer=TeacherGetReItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.imgSend,this.onClick),this._AddClick(this.lbSend,this.onClick),this.observe(MessageDef.POWER_CHANGE,this.UpdateContent),this.observe(MessageDef.TEACHER_CHANGE,this.UpdateContent),this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData(),1===this.state?this.infoItem.visible=!1:2===this.state?this.upDateTeacherState():3===this.state&&this.upDateDepartState()},t.prototype.upDateTeacherState=function(){this.infoItem.visible=!0,this.infoItem.onUpdate(0,this.tPanelData.teacherData),this.listView.dataProvider=new eui.ArrayCollection(this.tRewardData)},t.prototype.upDateDepartState=function(){this.infoItem.visible=!0,this.infoItem.onUpdate(0,this.tPanelData.teacherData),this.depart1.onUpdate(2),this.depart2.onUpdate(1)},t.prototype.upState=function(){var e=this.tPanelData.teacherData.day,t=GlobalConfig.ins().MasterBaseConfig.graduate;e?e>=t?(this.state=3,this.currentState="depart"):(this.state=2,this.currentState="teacher"):(this.state=1,this.currentState="null")},t.prototype.setData=function(){if(this.tPanelData=GameGlobal.TeacherController.teacherInfo,this.upState(),2===this.state){this.tRewardData=[];var e=[];null!=this.tPanelData.teacherData.rewards&&(e=CommonUtils.uintToVecBool(this.tPanelData.teacherData.rewards,16));var t=GlobalConfig.ins().MasterTaskConfig;for(var i in t){var o={actNo:0,num:0,bGet:!1,condition:0,pupilreward:[],masterreward:[],taskname:"",id:0,jump:0},n=t[i];if(o.bGet=e[i]||!1,o.condition=n.condition,o.pupilreward=GameGlobal.TeacherController.lookForReward(GameGlobal.actorModel.level,1),o.masterreward=GameGlobal.TeacherController.lookForReward(GameGlobal.actorModel.level,2),o.taskname=n.taskname,o.jump=n.jump,o.id=n.id,this.tPanelData.teacherData.data){var a=this.tPanelData.teacherData.data;if(a)for(var r in a)a[r].actNo===n.id&&(o.actNo=a[r].actNo,o.num=a[r].num)}this.tRewardData.push(o)}this.sortReward()}},t.prototype.sortReward=function(){var e=function(e){return e.bGet?1:0};this.tRewardData.sort(function(t,i){return e(t)-e(i)})},t.prototype.onClick=function(e){UserTips.ins().showTips("发送寻求名师广播"),GameGlobal.TeacherManage.message()},t}(BaseView);__reflect(TeacherFirstView.prototype,"TeacherFirstView",["ICommonWindowTitle"]);var TeacherGetReItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeacherGetReItemSkin",t.brnGet.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t.brnGo.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&this.data.pupilreward&&(this.data.taskname&&(this.lbNe.text=this.data.taskname),this.item.setItemData(this.data.pupilreward[0]),this.item.isShowName(!1),this.lbVl.text=this.data.num+"/"+this.data.condition,this.data.condition-this.data.num>0?(this.brnGo.visible=!0,this.brnGet.visible=!1,this.imgGet.visible=!1,this.lbVl.textColor=Color.l_normal):(this.lbVl.textColor=Color.l_green_1,this.data.bGet?(this.brnGo.visible=!1,this.brnGet.visible=!1,this.imgGet.visible=!0):(this.brnGo.visible=!1,this.brnGet.visible=!0,this.imgGet.visible=!1)))},t.prototype.OnClick=function(e){switch(e.target){case this.brnGo:this.data.jump&&ViewManager.ins().Guide(this.data.jump,null);break;case this.brnGet:GameGlobal.TeacherController.getTeacherIdInFirst()&&GameGlobal.TeacherManage.forceGetReward(GameGlobal.TeacherController.getTeacherIdInFirst(),this.data.actNo)}},t}(eui.ItemRenderer);__reflect(TeacherGetReItem.prototype,"TeacherGetReItem");var TeacherGetReLtItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeacherShowReItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&this.data.masterreward&&(this.data.taskname&&(this.lbNe.text=this.data.taskname),this.item.setItemData(this.data.masterreward[0]),this.item.isShowName(!1),this.lbVl.text=this.data.num+"/"+this.data.condition,this.data.condition-this.data.num>0?this.lbVl.textColor=Color.l_normal:this.lbVl.textColor=Color.l_green_1)},t}(eui.ItemRenderer);__reflect(TeacherGetReLtItem.prototype,"TeacherGetReLtItem");var TeacherInfoItem=function(e){function t(){var t=e.call(this)||this;return t.nType=0,t.skinName="TeacherItemInfoSkin",t._AddClick(t.lbSw,t.onClick),t._AddClick(t.lbGo,t.onClick),t._AddClick(t.btn,t.onClick),UIHelper.SetLinkStyleLabel(t.lbGo,"前往寻觅高徒"),t}return __extends(t,e),t.prototype.onUpdate=function(e,t){this.nType=e||0,this.oData=t,this.nType?this.updateSt():this.updateTc()},t.prototype.updateTc=function(){var e=this.oData;if(e.sShows&&e.sShows.shows&&UIHelper.SetHead(this.head,e.sShows.job,e.sShows.sex),this.lbType.text="师傅",this.gLook.visible=!1,this.btn.icon="ui_st_bt_jieshouchuangong",this.lbNe.text=e.tName||"",this.lbLv.text=(e.tLv||"")+"级",e.tLogin?(this.lbSt.text="在线",this.lbSt.textColor=Color.l_green_1):(this.lbSt.text="离线",this.lbSt.textColor=Color.RedColor),this.lbTime.text="",this.lbExp.text=this.getExp(1,GameGlobal.actorModel.level)+"",e.exp){this.btn.filters=null,1===e.exp?(this.gTime.visible=!1,this.gExp.visible=!0,this.btn.visible=!0):(this.gTime.visible=!0,this.gExp.visible=!1,this.btn.visible=!1);var t=GlobalConfig.ins().MasterBaseConfig.graduate-(e.day||1);t>0?this.lbTime.text=t+"天":this.gTime.visible=!1}else this.gExp.visible=!0,this.gTime.visible=!1,this.btn.visible=!0,this.btn.filters=Color.GetFilter()},t.prototype.updateSt=function(){if(this.oData){this.oData.tShows&&this.oData.tShows.shows&&UIHelper.SetHead(this.head,this.oData.tShows.job,this.oData.tShows.sex),this.gNormal.visible=!0,this.gLook.visible=!1,this.lbType.text="徒弟";
var e=this.oData;if(this.lbNe.text=e.sName||"",this.lbLv.text=(e.sLv||"")+"级",e.sLogin?(this.lbSt.text="在线",this.lbSt.textColor=Color.l_green_1):(this.lbSt.text="离线",this.lbSt.textColor=Color.RedColor),this.lbTime.text="",this.lbExp.text=this.getExp(2,GameGlobal.actorModel.level)+"",e.exp){1===e.exp?(this.gTime.visible=!1,this.gExp.visible=!0,this.btn.filters=Color.GetFilter()):(this.gTime.visible=!0,this.gExp.visible=!1,this.btn.visible=!1);var t=GlobalConfig.ins().MasterBaseConfig.graduate-(e.day||1);t>0?this.lbTime.text=t+"天":this.gTime.visible=!1}}else this.btn.visible=!0,this.gNormal.visible=!1,this.gLook.visible=!0,this.btn.filters=null},t.prototype.onClick=function(e){switch(e.target){case this.lbSw:MessageCenter.ins().dispatch(MessageDef.TEACHER_TURN,2);break;case this.lbGo:MessageCenter.ins().dispatch(MessageDef.TEACHER_TURN,2);break;case this.btn:var t=!1;this.nType?this.oData.exp?UserTips.ins().showTips("已传功"):t=!0:1===this.oData.exp?t=!0:UserTips.ins().showTips("等待传功"),t&&ViewManager.ins().open(TeacherSendWin,this.oData,this.nType)}},t.prototype.getExp=function(e,t){var i=0;if(e&&t){var o=GlobalConfig.ins().ImpartExpConfig[e];for(var n in o)if(o[n].level){var a=o[n].level[0]||1,r=o[n].level[1]||99999;if(t>=a&&r>=t){i=o[n].exp[0].count||0;break}}}return i},t}(BaseView);__reflect(TeacherInfoItem.prototype,"TeacherInfoItem");var TeacherInvItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeacherInvItemSkin",t.brnAg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t.btnRefuse.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t.brnMo.addEventListener(egret.TouchEvent.TOUCH_TAP,t.OnClick,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.imgBg.visible=this.data.index%2?!0:!1,1===this.data.type?(this.lbNe.text=this.data.name,this.lbLv.text=this.data.lv+"级",this.brnAg.visible=!1,this.btnRefuse.visible=!1,this.brnMo.visible=!this.data.tag,this.lbInv.visible=this.data.tag):(this.lbInv.visible=!1,this.brnAg.visible=!0,this.btnRefuse.visible=!0,this.lbNe.text="【"+this.data.name+"】",this.lbLv.text="向您发出师徒邀请",this.brnMo.visible=!1))},t.prototype.OnClick=function(e){if(this.data.dbid){switch(e.target){case this.brnAg:GameGlobal.TeacherManage.applyConfirm(this.data.dbid,!0);break;case this.btnRefuse:GameGlobal.TeacherManage.applyConfirm(this.data.dbid,!1);break;case this.brnMo:var t=GlobalConfig.ins().MasterBaseConfig.cost,i=GlobalConfig.ins().MasterBaseConfig.lvlimit||0,o=GameGlobal.actorModel.level||0;o-this.data.lv>=i?t&&Checker.CheckDatas(t,!1)&&GameGlobal.TeacherManage.applyTeacher(this.data.dbid):UserTips.ins().showTips("师傅必须比徒弟等级>="+i+"级方可收徒")}GameGlobal.TeacherManage.getMessage()}},t}(eui.ItemRenderer);__reflect(TeacherInvItem.prototype,"TeacherInvItem");var TeacherPanel=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.selectedIndex=0,t.skinName="TeacherSkin",t.group.tabChildren=[TabView.CreateTabViewData(TeacherFirstView),TabView.CreateTabViewData(TeacherSecondView),TabView.CreateTabViewData(TeacherThirdView)],t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tabBar.dataProvider=new eui.ArrayCollection(["我的师傅","我的徒弟","师徒邀请"]),this.tabBar.itemRenderer=BtnTab1Item},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.TEACHER_TURN,this.onTurn),this.observe(MessageDef.TEACHER_CHANGE,this.UpdateContent),this.group.selectedIndex=0,this.AddClick(this.btnShop,this.onClick),this.AddClick(this.btnInfo,this.onClick),this.AddItemClick(this.tabBar,this.onTabTap),this.tabBar.selectedIndex=0,this.selectedIndex=0,GameGlobal.TeacherManage.getMessage()},t.prototype.OnClose=function(){this.group.CloseView()},t.prototype.onTurn=function(e){this.tabBar.selectedIndex=e,this.onTabTap()},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.tabBar)},t.prototype.onTabTap=function(){this.group.selectedIndex=this.tabBar.selectedIndex,this.selectedIndex=this.tabBar.selectedIndex},t.prototype.onClick=function(e){switch(e.target){case this.btnShop:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_WEIWANG]);break;case this.btnInfo:ViewManager.ins().open(ActivityDescPanel,GlobalConfig.ins().MasterBaseConfig.helpinfo)}},t.NAME="师徒",t}(BaseView);__reflect(TeacherPanel.prototype,"TeacherPanel",["ICommonWindowTitle"]);var BtnTab1Item=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){if(e.prototype.dataChanged.call(this),2==this.itemIndex&&GameGlobal.TeacherController.teacherInfo.messageData){var t=GameGlobal.TeacherController.teacherInfo.messageData.length;this.redPoint.visible=t>0}},t}(eui.ItemRenderer);__reflect(BtnTab1Item.prototype,"BtnTab1Item");var TeacherSecondView=function(e){function t(){var t=e.call(this)||this;return t.selectedIndex=0,t.tRewardData=[],t.skinName="TeacherSecendSkin",t.tabBar.dataProvider=new eui.ArrayCollection(["大徒弟","小徒弟"]),t.listReward.itemRenderer=TeacherGetReLtItem,t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.lbTip,this.onClick),this.observe(MessageDef.POWER_CHANGE,this.UpdateContent),this.observe(MessageDef.TEACHER_CHANGE,this.UpdateContent),this.tabBar.selectedIndex=0,this.selectedIndex=0,this.AddItemClick(this.tabBar,this.onTabTap),this.UpdateContent()},t.prototype.onTabTap=function(){this.selectedIndex=this.tabBar.selectedIndex,this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData(),this.upDateStuCon(),this.infoItem0.onUpdate(1,this.tPanelData[0]),this.infoItem1.onUpdate(1,this.tPanelData[1])},t.prototype.upDateStuCon=function(){if(this.tNowData&&this.tNowData.no){this.listReward.dataProvider.replaceAll(this.tRewardData);var e=GlobalConfig.ins().MasterBaseConfig.graduate;this.tNowData.day&&this.tNowData.day>=e?(this.gReward.visible=!1,this.lbTip.text="等待徒弟出师"):(this.gReward.visible=!0,this.lbTip.text="")}else this.gReward.visible=!1,this.lbTip.text="仙君还没收徒"},t.prototype.setData=function(){if(this.tPanelData=GameGlobal.TeacherController.teacherInfo.studentData,this.tNowData=this.tPanelData[this.selectedIndex],this.tNowData&&this.tNowData.day){this.tRewardData=[];var e=[];null!=this.tNowData.rewards&&(e=CommonUtils.uintToVecBool(this.tNowData.rewards,16));var t=GlobalConfig.ins().MasterTaskConfig;for(var i in t){var o={actNo:0,num:0,bGet:!1,condition:0,pupilreward:[],masterreward:[],taskname:"",id:0},n=t[i];if(o.bGet=e[i]||!1,o.condition=n.condition,o.pupilreward=GameGlobal.TeacherController.lookForReward(GameGlobal.actorModel.level,1),o.masterreward=GameGlobal.TeacherController.lookForReward(GameGlobal.actorModel.level,2),o.taskname=n.taskname,o.id=n.id,this.tNowData.data){var a=this.tNowData.data;if(a)for(var r in a)a[r].actNo===n.id&&(o.actNo=a[r].actNo,o.num=a[r].num)}this.tRewardData.push(o)}this.sortReward()}},t.prototype.sortReward=function(){var e=function(e){return e.condition-e.num>0?0:1};this.tRewardData.sort(function(t,i){return e(t)-e(i)})},t.prototype.onClick=function(e){switch(e.target){case this.lbTip:MessageCenter.ins().dispatch(MessageDef.TEACHER_TURN,2)}},t}(BaseView);__reflect(TeacherSecondView.prototype,"TeacherSecondView",["ICommonWindowTitle"]);var TeacherSendWin=function(e){function t(){var t=e.call(this)||this;return t.m_EndTime=400,t.nType=0,t.skinName="TeacherSendSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.tLayerData=e[0],this.nType=e[1],this.updateContent(),this.AddTimer(10,510,this.updateCloseBtnLabel),this.commonDialog.showReturnBtn(!1),this.tLayerData.tShows&&this.roleShowPanelL.SetShowImage(this.tLayerData.tShows),this.tLayerData.sShows&&this.roleShowPanelR.SetShowImage(this.tLayerData.sShows)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.removeObserve(),TimerManager.ins().remove(this.updateCloseBtnLabel,this)},t.prototype.updateCloseBtnLabel=function(){this.m_EndTime--;var e=100-this.m_EndTime/400*100;this.bar.value=e,this.m_EndTime<=0&&(this.nType?GameGlobal.TeacherManage.teachExp(this.tLayerData.no):GameGlobal.TeacherManage.getExp(this.tLayerData.no),ViewManager.ins().close(this))},t.prototype.close=function(){ViewManager.ins().close(AnswerLayer),ViewManager.ins().close(this)},t.prototype.updateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TeacherSendWin.prototype,"TeacherSendWin");var TeacherThirdView=function(e){function t(){var t=e.call(this)||this;return t.tPanelData=[],t.skinName="TeacherThird",t.listView.itemRenderer=TeacherInvItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.TEACHER_CHANGE,this.UpdateContent),GameGlobal.TeacherManage.getMessage(),this.UpdateContent()},t.prototype.UpdateContent=function(){this.setData(),this.listView.dataProvider=new eui.ArrayCollection(this.tPanelData)},t.prototype.setData=function(){this.tPanelData=GameGlobal.TeacherController.getInvList()},t}(BaseView);__reflect(TeacherThirdView.prototype,"TeacherThirdView",["ICommonWindowTitle"]);var ceui;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.measureReal=function(){},t.prototype.measureVirtual=function(){for(var e=this.$target,t=this.$typicalHeight,i=this.getElementTotalSize(),o=Math.max(this.maxElementSize,this.$typicalWidth),n=egret.$TempRectangle,a=this.endIndex,r=this.elementSizeTable,s=this.startIndex;a>s;s++){var l=e.getElementAt(s);egret.is(l,"eui.UIComponent")&&l.$includeInLayout&&(l.getPreferredBounds(n),i+=n.height,i-=isNaN(r[s])?t:r[s],o=Math.max(o,n.width))}var c=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;e.setMeasuredSize(o+c,i+u)},t.prototype.updateDisplayListReal=function(e,t){},t.prototype.updateDisplayListVirtual=function(e,t){var i=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,n=this.$paddingBottom,a=this.$paddingLeft,r=this.$paddingRight,s=this.$gap,l=i.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=-(this.getStartPosition(l)+s-n),void i.setContentSize(i.contentWidth,o);var c=this.endIndex;i.setVirtualElementIndicesInView(this.startIndex,c);for(var u,p,h=!1,d=!1,_=0,f=egret.$TempRectangle,m=Math.max(0,e-a-r),g=Math.ceil(m),v=this.$typicalHeight,y=this.$typicalWidth,C=this.maxElementSize,b=Math.max(y,this.maxElementSize),S=0,G=0,T=0,I=!1,w=this.elementSizeTable,A=this.startIndex;c>=A;A++){var k=0;u=i.getVirtualElementAt(A),egret.is(u,"eui.UIComponent")&&u.$includeInLayout&&(u.getPreferredBounds(f),d||(C=Math.max(C,f.width)),h?(S=a,u.setLayoutBoundsSize(g,0/0),u.getLayoutBounds(f)):(u.getLayoutBounds(f),k=(m-f.width)*_,k=k>0?k:0,S=a+k),T=Math.max(T,f.width),I||(p=isNaN(w[A])?v:w[A],p!=f.height&&(I=!0)),w[A]=f.height,G=this.getStartPosition(A),u.setLayoutBoundsPosition(Math.round(S),Math.round(G)))}if(T+=a+r,o=this.getElementTotalSize(),o<this.target.height)for(var E=this.$paddingTop,A=c;A>=this.startIndex;--A)if(u=i.getVirtualElementAt(A),egret.is(u,"eui.UIComponent")&&u.$includeInLayout){u.$setY(E);var M=w[A];isNaN(M)&&(M=v),E+=M+s}this.maxElementSize=C,i.setContentSize(T,o),(I||b<this.maxElementSize)&&i.invalidateSize()},t.prototype.GetPos=function(e){for(var t=this.$typicalHeight,i=this.$paddingTop,o=this.$gap,n=this.elementSizeTable,a=0;e>a;a++){var r=n[a];isNaN(r)&&(r=t),i+=r+o}return i},t.prototype.getStartPosition=function(e){for(var t=this.$typicalHeight,i=this.$target.height-this.$paddingBottom-this.getElementSize(0),o=this.$gap,n=this.elementSizeTable,a=1;e>=a;a++){var r=n[a];isNaN(r)&&(r=t),i-=r+o}return i},t.prototype.getElementSize=function(e){if(this.$useVirtualLayout){var t=this.elementSizeTable[e];return isNaN(t)&&(t=this.$typicalHeight),t}return this.$target?this.$target.getElementAt(e).height:0},t.prototype.getElementTotalSize=function(){for(var e=this.$typicalHeight,t=this.$gap,i=0,o=this.$target.numElements,n=this.elementSizeTable,a=0;o>a;a++){var r=n[a];isNaN(r)&&(r=e),i+=r+t}return i-=t},t.prototype.elementAdded=function(t){e.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight)},t.prototype.getIndexInView=function(){var e=this.$target;if(!e||0==e.numElements)return this.startIndex=this.endIndex=-1,!1;var t=e.$UIComponent;if(0==t[10]||0==t[11])return this.startIndex=this.endIndex=-1,!1;var i=e.numElements,o=this.getStartPosition(i-1)-this.getElementSize(i-1)-this.$paddingTop,n=e.scrollV+t[11];if(o>n)return this.startIndex=-1,this.endIndex=-1,!1;var a=e.scrollV;if(a>t[11]-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var r=this.startIndex,s=this.endIndex;return this.startIndex=this.findIndexAt(n,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(a,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),r!=this.startIndex||s!=this.endIndex},t.prototype.findIndexAt=function(e,t,i){var o=.5*(t+i)|0,n=this.getStartPosition(o),a=this.getElementSize(o);return e>=n&&e<n+a+this.$gap?o:t==i?-1:e>n?this.findIndexAt(e,t,Math.max(t,o-1)):this.findIndexAt(e,Math.min(o+1,i),i)},t}(eui.LinearLayoutBase);e.CVerticalLayout=t,__reflect(t.prototype,"ceui.CVerticalLayout")}(ceui||(ceui={}));var CrossTeamModel=function(e){function t(){var t=e.call(this,UserFb.FB_TYPE_CROSSTEAMFB)||this;return t.mCount=0,t.clear=[],t.mConfigData=new CrossTeamConfigData,t.regNetMsg(S2cProtocol.sc_cross_team_reward_count,t._DoDungeonData),t}return __extends(t,e),t.prototype.OnDayTimer=function(){this.m_Double=null},t.prototype.SendGetInfos=function(){this.Rpc(C2sProtocol.cs_cross_team_reward_count)},t.prototype._DoDungeonData=function(e){this.mCount=e.count,this.clear=e.clear||[],GameGlobal.MessageCenter.dispatch(MessageDef.TEAM_FUBEN_INFO)},t.prototype.CheckEnter=function(e){var t=GameGlobal.Config.CrossTeamFbConfig[e];return t?GameGlobal.actorModel.level<t.level?(UserTips.InfoTip("玩家"+t.level+"级才能进入"),!1):!0:(console.error("配置不存在 => "+e),!1)},t.prototype.GetConfig=function(){return this.m_ConfigList||(this.m_ConfigList=CommonUtils.GetArray(GameGlobal.Config.CrossTeamFbConfig,"level")),this.m_ConfigList},t.prototype.IsDoubleReward=function(){if(1==GameServer.serverOpenDay)return!0;if(!this.m_Double){var e=this.m_Double=[],t=GameGlobal.Config.CrossTeamConfig;e.push({start:this.GetTimeNum(t.doubleBeginTimeSecond,-1),end:this.GetTimeNum(t.doubleEndTimeSecond)}),e.push({start:this.GetTimeNum(t.doubleBeginTime),end:this.GetTimeNum(t.doubleEndTime)}),e.push({start:this.GetTimeNum(t.doubleBeginTimeSecond),end:this.GetTimeNum(t.doubleEndTimeSecond,1)})}for(var i=1e3*GameServer.serverTime,o=0,n=this.m_Double;o<n.length;o++){var a=n[o];if(i>=a.start&&i<=a.end)return!0}return!1},t.prototype.GetCount=function(){return this.mCount||0},t.prototype.GetDesc=function(){if(1==GameServer.serverOpenDay)return"全天银两和经验双倍收益，3人组队再加成30%";var e=GameGlobal.Config.CrossTeamConfig;return this.GetTimeStr(e.doubleBeginTime)+"-"+this.GetTimeStr(e.doubleEndTime)+"和"+this.GetTimeStr(e.doubleBeginTimeSecond)+"-"+this.GetTimeStr(e.doubleEndTimeSecond)+"银两和经验双倍收益，3人组队再加成30%"},t.prototype.GetDescForDaily=function(){if(1==GameServer.serverOpenDay)return"跨服组队银两和经验双倍收益";var e=GameGlobal.Config.CrossTeamConfig;return this.GetTimeStr(e.doubleBeginTime)+"-"+this.GetTimeStr(e.doubleEndTime)+"和"+this.GetTimeStr(e.doubleBeginTimeSecond)+"-"+this.GetTimeStr(e.doubleEndTimeSecond)+"跨服组队银两和经验双倍收益"},t.prototype.GetTimeNum=function(e,t){void 0===t&&(t=0);var i=e.hour,o=e.minute,n=new Date;return t&&n.setDate(n.getDate()+t),n.setHours(i,o,0,0),n.getTime()},t.prototype.GetTimeStr=function(e){return DateUtils.formatTimeNum(e.hour)+":"+DateUtils.formatTimeNum(e.minute)},t.prototype.IsFirst=function(e){for(var t=0,i=this.clear;t<i.length;t++){var o=i[t];if(o.level==e)return o.count<1}return!0},t.prototype.IsNotEnter=function(e){var t=GameGlobal.Config.CrossTeamFbConfig[e];return t&&GameGlobal.actorModel.level<t.level?t.level+"级开启":""},t}(CrossTeamBaseModel);__reflect(CrossTeamModel.prototype,"CrossTeamModel");var GangMineTeamModel=function(e){function t(){return e.call(this,UserFb.FB_TYPE_GANGMINE)||this}return __extends(t,e),t.prototype.CheckEnter=function(e){return!0},t}(TeamBaseModel);__reflect(GangMineTeamModel.prototype,"GangMineTeamModel");var GuildTeamModel=function(e){function t(){var t=e.call(this,UserFb.FB_TYPE_GUILDFB)||this;return t.index=-1,t.mConfigData=new GuildTeamConfigData,t}return __extends(t,e),t.prototype.SendGetInfos=function(){this.Rpc(C2sProtocol.cs_guild_dungeon_info,null,this._DoDungeonData,this)},t.prototype._DoDungeonData=function(e){this.mDungeonInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.TEAM_FUBEN_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.GANG_UPDATE_FBCOUNT)},t.prototype.GetConfig=function(){return this.m_ConfigList||(this.m_ConfigList=CommonUtils.GetArray(GameGlobal.Config.GuildFubenConfig,"id")),this.m_ConfigList},t.prototype.CheckEnter=function(e){var t=GameGlobal.Config.GuildFubenConfig[e];return t?GameGlobal.GangModel.myGangInfo.mLevel<t.needlv?(UserTips.InfoTip("帮会"+t.needlv+"级才能进入"),!1):!0:(console.error("配置不存在 => "+e),!1)},t.prototype.GetCount=function(){return this.GetProfitCount()},t.prototype.GetAssistCount=function(){var e=GameGlobal.Config.GuildFubenBaseConfig,t=this.mDungeonInfo;return t?Math.max(e.assistcount-t.assistCount,0):0},t.prototype.GetProfitCount=function(){var e=GameGlobal.Config.GuildFubenBaseConfig,t=this.mDungeonInfo;return t?Math.max(e.profitCount-t.profitCount,0):0},t.prototype.IsFirst=function(e){var t=this.mDungeonInfo;return t?-1==t.firstReach.indexOf(e):!0},t.prototype.IsNotEnter=function(e){var t=GameGlobal.Config.GuildFubenConfig[e];return t&&GameGlobal.GangModel.myGangInfo.mLevel<t.needlv?"帮会"+t.needlv+"级开启":""},t}(CrossTeamBaseModel);__reflect(GuildTeamModel.prototype,"GuildTeamModel");var MsMovieClip=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offsetPoint=egret.Point.create(0,0),t.$movieClipData=null,t.frames=null,t.$totalFrames=0,t.$frameLabelStart=0,t.$frameLabelEnd=0,t.frameIntervalTime=0,t.$eventPool=null,t.$isPlaying=!1,t.isStopped=!0,t.playTimes=0,t.$currentFrameNum=0,t.$nextFrameNum=1,t.displayedKeyFrameNum=0,t.passedTime=0,t.$frameRate=0/0,t.lastTime=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){e=!!e,e!=this.$smoothing&&(this.$smoothing=e,this.$invalidate())},enumerable:!0,configurable:!0}),t.prototype.$init=function(){this.$reset();var e=this.$movieClipData;e&&e.$isDataValid()&&(this.frames=e.frames,this.$totalFrames=e.numFrames,this.$frameRate=e.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this._initFrame())},t.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},t.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},t.prototype.play=function(e){void 0===e&&(e=0),this.$isPlaying=!0,this.setPlayTimes(e),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},t.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},t.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},t.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},t.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=0),(0==arguments.length||arguments.length>2)&&egret.$error(1022,"MovieClip.gotoAndPlay()"),this.$frameLabelStart=0,this.$frameLabelEnd=0,this.play(t),this.gotoFrame(e)},t.prototype.gotoAndStop=function(e){1!=arguments.length&&egret.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},t.prototype.gotoFrame=function(e){var t;t=parseInt(e+"",10),t!=e&&egret.$error(1022,"Frame Label Not Found"),1>t?t=1:t>this.$totalFrames&&(t=this.$totalFrames),t!=this.$nextFrameNum&&(this.$nextFrameNum=t,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},t.prototype.advanceTime=function(e){var t=this,i=e-t.lastTime;t.lastTime=e;var o=t.frameIntervalTime,n=t.passedTime+i;t.passedTime=n%o;var a=n/o;if(1>a)return!1;for(;a>=1;){if(a--,t.$nextFrameNum++,t.$nextFrameNum>t.$totalFrames||t.$frameLabelStart>0&&t.$nextFrameNum>t.$frameLabelEnd)if(-1==t.playTimes)t.$eventPool.push(egret.Event.LOOP_COMPLETE),t.$nextFrameNum=1;else{if(t.playTimes--,!(t.playTimes>0)){t.$nextFrameNum=t.$totalFrames,t.$eventPool.push(egret.Event.COMPLETE),t.stop();break}t.$eventPool.push(egret.Event.LOOP_COMPLETE),t.$nextFrameNum=1}t.$currentFrameNum==t.$frameLabelEnd&&(t.$nextFrameNum=t.$frameLabelStart),t.advanceFrame()}return t.constructFrame(),t.handlePendingEvent(),!1},t.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum},t.prototype.constructFrame=function(){var e=this.$currentFrameNum;if(this.displayedKeyFrameNum!=e){var t=this.$movieClipData.getTextureByFrame(e),i=this.$renderNode;i.uvs=t.m1,i.vertices=t.m2,i.indices=t.m3,this.$movieClipData.$getOffsetByFrame(e,this.offsetPoint);var o=Math.round(this.offsetPoint.x),n=Math.round(this.offsetPoint.y);this.anchorOffsetX=-o,this.anchorOffsetY=-n,this.$invalidateContentBounds(),this.displayedKeyFrameNum=e}},t.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,t=e.length,i=!1,o=!1,n=0;t>n;n++){var a=e.pop();a==egret.Event.LOOP_COMPLETE?o=!0:a==egret.Event.COMPLETE?i=!0:this.dispatchEventWith(a)}o&&this.dispatchEventWith(egret.Event.LOOP_COMPLETE),i&&this.dispatchEventWith(egret.Event.COMPLETE)}},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(e){e!=this.$frameRate&&(this.$frameRate=e,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(e){this.setMovieClipData(e)},enumerable:!0,configurable:!0}),t.prototype.setMovieClipData=function(e){this.$movieClipData!=e&&(this.$movieClipData=e,this.$init())},t.prototype.setPlayTimes=function(e){(0>e||e>=1)&&(this.playTimes=0>e?-1:Math.floor(e))},t.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?egret.ticker.$stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=egret.getTimer(),egret.ticker.$startTick(this.advanceTime,this)))},t}(egret.Mesh);__reflect(MsMovieClip.prototype,"MsMovieClip");var GuildTeamConfigData=function(){function e(){}return e.prototype.Init=function(e){this.config=e},e.prototype.GetFirstDropShow=function(){return this.config.firstdropshow},e.prototype.GetDropShow=function(){return this.config.dropshow},e.prototype.GetShowItem=function(){return this.config.showItem},e.prototype.GetSuggest=function(){return this.config.suggest},e.prototype.GetUititle=function(){return this.config.uititle},e.prototype.GetBossId=function(){return this.config.bossid},e.prototype.GetKey=function(){return this.config.id},e}();__reflect(GuildTeamConfigData.prototype,"GuildTeamConfigData",["TeamConfigData"]);var CrossTeamConfigData=function(){function e(){}return e.prototype.Init=function(e){this.config=e},e.prototype.GetFirstDropShow=function(){return this.config.firstRewards},e.prototype.GetDropShow=function(){return this.config.normalRewards},e.prototype.GetShowItem=function(){return this.config.luckRewards},e.prototype.GetSuggest=function(){return 0},e.prototype.GetUititle=function(){return this.config.uititle},e.prototype.GetBossId=function(){return this.config.bossid},e.prototype.GetKey=function(){return this.config.level},e}();__reflect(CrossTeamConfigData.prototype,"CrossTeamConfigData",["TeamConfigData"]);var MyTeamInfo=function(){function e(){this.needpower=0,this.members=[],this.leaderid=0,this.level=0}return e.prototype.Clear=function(){this.members=[],this.leaderid=0,this.level=0,this.needpower=0},e.prototype.parser=function(e){var t=this,i=this.needpower;this.leaderid=e.leaderid||0,this.level=e.level||0,this.needpower=e.needpower||0,e.leaderid==GameGlobal.actorModel.actorID&&i!=e.needpower&&UserTips.InfoTip("进队战力要求已改动"),this.members=e.members||[],this.members.sort(function(e,i){return e.dbid==t.leaderid?-1:i.dbid==t.leaderid?1:-1})},e.prototype.HasTeam=function(){return this.members.length>0},e.prototype.IsMyTeam=function(){return GameGlobal.actorModel.actorID==this.leaderid},e.prototype.IsFull=function(){return this.members.length>=3},e}();__reflect(MyTeamInfo.prototype,"MyTeamInfo");var ListLRBtnCtrl=function(){function e(e,t,i,o){if(this.paddingLeft=0,this.paddingRight=0,this.gap=0,this.itemWidth=0,this.animation=!0,this.m_List=e,this.m_List.layout){var n=this.m_List.layout;this.paddingLeft=n.paddingLeft,this.paddingRight=n.paddingRight,this.gap=n.gap}this.itemWidth=o,this.m_LeftBtn=t,this.m_RightBtn=i;var a=e.parent;egret.is(a,"eui.Scroller")&&(this.m_Scroller=a,this.m_Scroller.addEventListener(egret.Event.CHANGE,this.OnRefresh,this),this.m_LeftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_RightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this))}return e.prototype.SetRedPointList=function(e){this.m_RedList=e},e.prototype.SetPage=function(e){this.m_Scroller.validateNow(),this.m_List.validateNow(),this.m_List.scrollH=this.m_Scroller.width*e,this.m_Scroller.$Scroller[8].currentScrollPos=this.m_List.scrollH,this.OnRefresh()},e.prototype._OnClick=function(e){this.m_Scroller.stopAnimation();var t=this.m_List,i=this.m_Scroller.width-this.paddingLeft-this.paddingRight;switch(e.target){case this.m_LeftBtn:this.SetPos(Math.max(0,t.scrollH-this.m_Scroller.width));break;case this.m_RightBtn:this.SetPos(Math.min(this.GetListItemWidth()-i,t.scrollH+this.m_Scroller.width))}this.OnRefresh()},e.prototype.SetPos=function(e){if(this.animation){var t=this.m_Scroller.$Scroller[8];t.maxScrollPos=this.m_List.contentWidth,t.throwTo(e)}else this.m_List.scrollH=e},e.prototype.GetListItemWidth=function(){var e=this.m_List.numElements;return e*this.itemWidth+(e-1)*this.gap},e.prototype.OnRefresh=function(){if(this.m_Scroller&&!this.mNotVisible){var e=this.m_List,t=this.m_LeftBtn,i=this.m_RightBtn,o=this.GetListItemWidth();if(o<this.m_Scroller.width)t.visible=!1,i.visible=!1;else if(t.visible=e.scrollH>this.itemWidth+this.paddingLeft,i.visible=o-this.itemWidth-(e.scrollH-this.paddingLeft)>this.m_Scroller.width,this.m_RedList){var n=Math.floor(e.scrollH/(this.itemWidth+this.gap)),a=Math.floor((e.scrollH+this.m_Scroller.width)/(this.itemWidth+this.gap));if(t.visible){for(var r=!1,s=0;n>=s;s++)if(this.m_RedList[s]){r=!0;break}UIHelper.ShowRedPoint(t,r)}if(i.visible){for(var r=!1,s=a,l=this.m_RedList.length;l>s;s++)if(this.m_RedList[s]){r=!0;break}UIHelper.ShowRedPoint(i,r)}}}},e.prototype.SetLeftIndex=function(e){var t=this.m_List;t.validateNow();var i=(this.GetListItemWidth(),this.m_Scroller.width-this.paddingLeft-this.paddingRight);t.scrollH=Math.min(e*this.itemWidth+Math.max((e-1)*this.gap,0),this.GetListItemWidth()-i);var o=this.m_Scroller.$Scroller[8];o.currentPosition=o.currentScrollPos=t.scrollH},e}();__reflect(ListLRBtnCtrl.prototype,"ListLRBtnCtrl");var NewViewStack=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.ViewStack);__reflect(NewViewStack.prototype,"NewViewStack");var TeamCheckItemList=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.listCtrl=new ListLRBtnCtrl(this.checkpointList,this.beforeBtn,this.nextBtn,214),this.checkpointList.dataProvider=new eui.ArrayCollection([]),this.checkpointList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onclick,this)},t.prototype.showCheckItemList=function(e){this.index=e;var t=this.m_Model.GetConfig(),i=[],o=0;for(var n in t){var a={};a=t[n],a.model=this.m_Model,a.index=o,i.push(a),o++}this.checkpointList.itemRenderer=TeamItemCom,this.checkpointList.dataProvider=new eui.ArrayCollection(i),-1==this.m_Model.index?this.checkpointList.selectedIndex=e:this.checkpointList.selectedIndex=this.m_Model.index,this.setListPos(e)},t.prototype.onclick=function(e){this.m_Model.index=e.itemIndex},t.prototype.setListPos=function(e){this.checkpointList.validateNow();var t=e;9>t&&t>=6?this.checkpointList.scrollH=1258:6>t&&t>=3?this.checkpointList.scrollH=629:3>t&&(this.checkpointList.scrollH=0)},t}(eui.Component);__reflect(TeamCheckItemList.prototype,"TeamCheckItemList");var TeamDataItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)},t.prototype.OnClick=function(){var e=this.data.mModel,t=this.data.mInfo,i=this.data.config;e.SendJoin(i,t.leaderid)},t.prototype.dataChanged=function(){var e=(this.data.mModel,this.data.mInfo);this.num_txt.text=e.count+"/3";for(var t=e.members||[],i=0;i<t.length;i++)if(t[i].dbid==e.leaderid){this.name_txt.text=t[i].name;break}},t}(eui.ItemRenderer);__reflect(TeamDataItem.prototype,"TeamDataItem");var TeamItemCom=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;if(void 0!=e){this.itemList.itemRenderer=ItemBase,this.m_Model=e.model;var t=e.index;this.itemList.dataProvider=new eui.ArrayCollection([]);var i=this.m_Model.GetConfig(),o=this.m_Model.GetConfigData(i[t]);if(!o)return;this.notAdoptLabel.visible=!1,this.recordLabel.visible=!0;var n=o.GetBossId();this.extraPanel.SetBodyId(MonstersConfig.GetAppId(n)),this.title.text=o.GetUititle();var a=this.m_Model.IsNotEnter(o.GetKey());this.notAdoptLabel.text=a,this.m_Model.IsFirst(o.GetKey())?(this.recordLabel.text="首通奖励",this.itemList.dataProvider=new eui.ArrayCollection(o.GetFirstDropShow())):(this.recordLabel.text="通关奖励",this.itemList.dataProvider=new eui.ArrayCollection(o.GetDropShow())),""!=this.notAdoptLabel.text&&(this.notAdoptLabel.visible=!0,this.recordLabel.visible=!1)}},t.prototype.IsNotEnter=function(e){return""},t}(eui.ItemRenderer);__reflect(TeamItemCom.prototype,"TeamItemCom");var TeamMemberItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.tiRen_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.OnTap,this)},t.prototype.OnTap=function(){var e=this.data;e.mModel.SendKick(e.mInfo.level,e.mInfo.members[e.mIndex].dbid)},t.prototype.dataChanged=function(){var e=this.data,t=e.mInfo.members[e.mIndex];t&&(this.leader_icon.visible=t.dbid==e.mInfo.leaderid,this.tiRen_btn.visible=e.mInfo.IsMyTeam()&&t.dbid!=GameGlobal.actorModel.actorID,UIHelper.SetHead(this.head,t.job,t.sex,!1),this.level_txt.text=t.level+"级",this.name_txt.text=t.name,this.power_txt.text="战力 "+t.power)},t}(eui.ItemRenderer);__reflect(TeamMemberItem.prototype,"TeamMemberItem");var TianShenBaoQiModel=function(e){function t(){var t=e.call(this)||this;return t.MAX_LEVEL=10,t.MAX_GM_LEVEL=10,t.mTianShenBaoQiDatas={},t.regNetMsg(S2cProtocol.sc_tianshen_spells_info,t._DoTianShenSpellsInfo),t
}return __extends(t,e),t.prototype.getConfig=function(){return GameGlobal.Config.AirMarshalTreasureConfig},t.prototype.getLevelsConfig=function(e){return GameGlobal.Config.AirMarshalTreasureAttrsConfig[e]},t.prototype.getPower=function(e,t){var i=this.getLevelsConfig(e)[t];return i.attrs?ItemConfig.CalcAttrScoreValue(i.attrs):0},t.prototype.Init=function(){for(var e in GameGlobal.Config.AirMarshalTreasureConfig){var t=new TianShenBaoQiInfo;t.mPos=parseInt(e),this.mTianShenBaoQiDatas[e]=t}for(var e in GameGlobal.Config.AirMarshalTreasureAttrsConfig){this.MAX_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.AirMarshalTreasureAttrsConfig[e]);break}this.MAX_GM_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.AirMarshalResonateConfig)},t.prototype.GetAllLevel=function(){var e=0;for(var t in this.mTianShenBaoQiDatas){var i=this.mTianShenBaoQiDatas[t];i.mLevel&&(e+=i.mLevel)}return e},t.prototype._DoTianShenSpellsInfo=function(e){for(var t=0;t<e.data.length;t++){var i=this.mTianShenBaoQiDatas[t+1];i&&i.UpdateInfo(e.data[t])}},t.prototype.sendUpLevel=function(e,t){var i=this,o=new Sproto.cs_tianshen_spells_request;o.pos=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_tianshen_spells,o,function(e){if(e.ret){var t=i.mTianShenBaoQiDatas[e.pos];t&&(t.mLevel=e.lv,t.mExpUpNum=e.upNum,GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_BAOQI_UPDATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_BAOQI_UPDATE_EXP))}},this)},t}(BaseSystem);__reflect(TianShenBaoQiModel.prototype,"TianShenBaoQiModel");var TianShenBreachModel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getLevelsConfig=function(e){return GameGlobal.Config.AirMarshalBreachConfig[e]},t.prototype.getPower=function(e,t){var i=this.getLevelsConfig(e)[t];return i.attrs?ItemConfig.CalcAttrScoreValue(i.attrs):0},t.prototype.sendTianShenBreach=function(e){var t=new Sproto.cs_tianshen_promotion_request;t.no=e,this.Rpc(C2sProtocol.cs_tianshen_promotion,t,function(e){if(e.ret){var t=GameGlobal.TianShenModel.mTianShenList[e.no];t&&(t.mBreachLv=e.promotion),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_BREACH)}},this)},t}(BaseSystem);__reflect(TianShenBreachModel.prototype,"TianShenBreachModel");var TianShenModel=function(e){function t(){var t=e.call(this)||this;return t.MAX_LEVEL=10,t.mDrugNum=0,t.mBattleID=0,t.mTianShenList={},t.MAX_FEISHENG_LEVEL=10,t.mRedPoint=new TianShenModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_tianshen_info,t._DoTianShenInfo),t}return __extends(t,e),t.prototype.getBaseConfig=function(){return GameGlobal.Config.AirMarshalBaseConfig},t.prototype.GetCurDrugAttr=function(){var e=CommonUtils.copyDataHandler(this.getBaseConfig().attredata),t=this.mDrugNum;for(var i in e)e[i].value*=t;return e},t.prototype.Init=function(){for(var e in GameGlobal.Config.AirMarshalListConfig){var t=new TianShenInfo;t.mTianShenId=parseInt(e),this.mTianShenList[e]=t,GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.AirMarshalListConfig[e].material.id,MessageDef.BAG_TIANSHEN_ACT_ITEM)}for(var e in GameGlobal.Config.AirMarshalLvproConfig){var i=GameGlobal.Config.AirMarshalLvproConfig[e];this.MAX_LEVEL=CommonUtils.getObjectLength(i),GameGlobal.UserBag.AddListenerItem(i[0].cost[1].id,MessageDef.BAG_TIANSHEN_LEVEL_ITEM);break}GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.AirMarshalBaseConfig.attreitemid,MessageDef.BAG_TIANSHEN_ATTR_ITEM)},t.prototype.HasTianShen=function(e){return e&&this.mTianShenList[e]&&this.mTianShenList[e].mLevel?!0:!1},t.prototype.HasBattle=function(){return this.mBattleID>0},t.prototype.GetLevel=function(e){return e?this.mTianShenList[e].mLevel||0:0},t.prototype.GetBreachLvStr=function(e){return e?0==this.mTianShenList[e].mBreachLv?"":"+"+this.mTianShenList[e].mBreachLv||"":""},t.prototype._DoTianShenInfo=function(e){this.mBattleID=e.use,this.mDrugNum=e.drugNum;for(var t=0,i=e.infoList;t<i.length;t++){var o=i[t],n=this.mTianShenList[o.no];n&&n.UpdateInfo(o)}},t.prototype.SendHeCheng=function(e){var t=new Sproto.cs_tianshen_exchange_request;t.no=e,this.Rpc(C2sProtocol.cs_tianshen_exchange,t)},t.prototype.SendActive=function(e){var t=this,i=new Sproto.cs_tianshen_activation_request;i.no=e,this.Rpc(C2sProtocol.cs_tianshen_activation,i,function(i){i.ret&&(t.mTianShenList[e]?(t.mTianShenList[e].Active(i),t.mBattleID||t.SendBattle(e,1)):console.error("not active pet => petid "+e),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_ACTIVE),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_INFO))},this)},t.prototype.SendBattle=function(e,t){var i=this,o=new Sproto.cs_tianshen_fight_request;o.no=e,o.warType=t,this.Rpc(C2sProtocol.cs_tianshen_fight,o,function(e){if(e.ret){var t=i.mBattleID;i.mBattleID=e.use,GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_INFO),t!=e.use&&GameGlobal.RaidMgr.UpdateRoleTianshen(i.mBattleID),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_BATTLE)}},this)},t.prototype.SendUpLevel=function(e,t){var i=this,o=new Sproto.cs_tianshen_up_level_request;o.no=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_tianshen_up_level,o,function(t){var o=i.mTianShenList[e];o&&t.ret&&(o.mLevel=t.lv,o.mExpUpNum=t.upNum,GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_EXP))},this)},t.prototype.SendUseDrug=function(e){var t=this,i=new Sproto.cs_tianshen_drug_request;i.useNum=e,this.Rpc(C2sProtocol.cs_tianshen_drug,i,function(e){e.ret&&(t.mDrugNum=e.drugNum,GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_DRUG))},this)},t.prototype.SendFlyLevel=function(e,t){var i=this,o=new Sproto.cs_tianshen_fly_addexp_request;o.id=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_tianshen_fly_addexp,o,function(t){var o=i.mTianShenList[e];o?t.ret?(o.mFeisLevel=t.flylevel,o.mFeisExp=t.flyexp,GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_FLYINFO),GameGlobal.MessageCenter.dispatch(MessageDef.TIANSHEN_UPDATE_FLYEXP)):UserTips.ErrorTip("升级失败"):console.error("not fly tianShenId => "+e)},this)},t.prototype.GetSkin=function(e){return AppearanceConfig.GetUIPath(e)},t.prototype.IsRedPointTianShen=function(e){return this.mRedPoint.IsRedAct(e)?!0:void 0},t}(BaseSystem);__reflect(TianShenModel.prototype,"TianShenModel");var TianShenModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.m_ActiveList={},i.m_LevelList={},i.m_Model=t,i}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e[t.INDEX_LEVEL]=this.GetIndexLevel,e[t.INDEX_BATTLE]=this.GetIndexBattle,e[t.INDEX_ATTR]=this.GetIndexAttrItem,e;var e},t.prototype.GetMessageDef=function(){return[MessageDef.BAG_TIANSHEN_ACT_ITEM,MessageDef.TIANSHEN_ACTIVE,MessageDef.TIANSHEN_UPDATE_INFO,MessageDef.BAG_TIANSHEN_LEVEL_ITEM,MessageDef.TIANSHEN_BATTLE,MessageDef.BAG_TIANSHEN_ATTR_ITEM]},t.prototype.OnChange=function(e){e==t.INDEX_ACT?GameGlobal.MessageCenter.dispatch(MessageDef.RP_BAG_TIANSHEN_ACT_ITEM):GameGlobal.MessageCenter.dispatch(MessageDef.RP_TIANSHEN)},t.prototype.GetIndexLevel=function(){this.m_LevelList={};var e=this.m_Model.mTianShenList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mLevel<this.m_Model.MAX_LEVEL){var o=i.GetLevelConfig(),n=Math.floor(o.proexp/o.exp);n-=i.mExpUpNum;for(var a=!0,r=0,s=o.cost;r<s.length;r++){var l=s[r];if(!Checker.Data({type:l.type,id:l.id,count:l.count*n},!1)){a=!1;break}}a&&(this.m_LevelList[i.mTianShenId]=!0)}}for(var t in this.m_LevelList)return!0;return!1},t.prototype.GetIndexBattle=function(){if(this.m_Model.mBattleID)return!1;var e=this.m_Model.mTianShenList;for(var t in e){var i=e[t];if(i.mLevel>0)return!0}return!1},t.prototype.GetIndexAttrItem=function(){return GameGlobal.UserBag.GetCount(GameGlobal.Config.AirMarshalBaseConfig.attreitemid)>0},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.m_ActiveList)if(e)return!0;return!1},t.prototype.DoActive=function(){this.m_ActiveList={};var e=GameGlobal.Config.AirMarshalListConfig;for(var t in e)if(!this.m_Model.HasTianShen(parseInt(t))){var i=e[t].material;GameGlobal.UserBag.GetCount(i.id)>=i.count&&(this.m_ActiveList[t]=!0)}},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.m_ActiveList[e]},t.INDEX_ACT=0,t.INDEX_LEVEL=1,t.INDEX_BATTLE=2,t.INDEX_ATTR=3,t}(IRedPoint);__reflect(TianShenModelRedPoint.prototype,"TianShenModelRedPoint");var TianShenBaoQiInfo=function(){function e(){this.mLevel=0,this.mExpUpNum=0}return e.prototype.UpdateInfo=function(e){this.mLevel=e.lv,this.mExpUpNum=e.upNum},e.prototype.GetLevelConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.AirMarshalTreasureAttrsConfig[this.mPos][t-1];return i},e.prototype.GetPower=function(e){var t=this.GetAttrs(e);return t?ItemConfig.CalcAttrScoreValue(t):0},e.prototype.GetAttrs=function(e){var t=this.GetLevelConfig(e);return t?AttributeData.AttrAddition(t.attrs,[]):[]},e}();__reflect(TianShenBaoQiInfo.prototype,"TianShenBaoQiInfo");var TianShenInfo=function(){function e(){this.mLevel=0,this.mExpUpNum=0,this.mBreachLv=0,this.mFeisLevel=0,this.mFeisExp=0}return e.prototype.UpdateInfo=function(e){this.mTianShenId=e.no,this.mLevel=e.lv,this.mExpUpNum=e.upNum,this.mBreachLv=e.promotion,null!=e.flydata&&(this.mFeisLevel=e.flydata.level,this.mFeisExp=e.flydata.exp)},e.prototype.Active=function(e){this.mTianShenId=e.no,this.mLevel=e.lv,this.mExpUpNum=e.upNum,this.mBreachLv=e.promotion},e.prototype.GetSkillIds=function(){var e=GameGlobal.Config.AirMarshalBreachConfig[this.mTianShenId][this.mBreachLv];return e.skillid?e.skillid:[]},e.prototype.GetLevelConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.AirMarshalListConfig[this.mTianShenId],o=GameGlobal.Config.AirMarshalLvproConfig[i.quality][t-1];return o},e.prototype.GetAttrsConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.AirMarshalListConfig[this.mTianShenId],o=GameGlobal.Config.AirMarshalAttrsConfig[i.quality][t-1];return o},e.prototype.GetSkin=function(){return AppearanceConfig.GetUIPath(this.mTianShenId)},e.prototype.GetPower=function(e){var t=this.GetAttrs(e);return t?ItemConfig.CalcAttrScoreValue(t):0},e.prototype.GetAllPower=function(e){var t=0;return t+=ItemConfig.CalcAttrScoreValue(this.GetAttrs()),t+=ItemConfig.CalcAttrScoreValue(this.GetFeisAttrs())},e.prototype.GetAttrs=function(e){var t=this.GetAttrsConfig(e);return t?AttributeData.AttrAddition(GameGlobal.Config.AirMarshalListConfig[this.mTianShenId].attrs,t.attrs):[]},e.prototype.GetFeisAttrs=function(){var e=GameGlobal.Config.AirMarshalFlyproConfig[this.mTianShenId];if(e){if(e[this.mFeisLevel-1]){for(var t=[],i=0;i<=this.mFeisLevel-1;i++)t=AttributeData.AttrAddition(t,e[this.mFeisLevel-1].attrs);return AttributeData.AttrAddition(t,e[this.mFeisLevel-1].attrs)}return this.GetDefaultAttrs(GameGlobal.Config.AirMarshalFlyproConfig,"attrs",2)}return[]},e.prototype.GetDefaultAttrs=function(e,t,i){if(!e)return[];var o=function(e,i){for(var n in e){var a=i-1,r=e[n];if(0==a){for(var s=CommonUtils.copyDataHandler(r[t]),l=0,c=s;l<c.length;l++){var u=c[l];u.value=0}return s}return o(r,a)}};return o(e,i)},e.prototype.GetFeishengPower=function(){var e=this.GetFeisAttrs();return e?ItemConfig.CalcAttrScoreValue(e):0},e}();__reflect(TianShenInfo.prototype,"TianShenInfo");var TianShenAttrDrugPanel=function(e){function t(){var t=e.call(this)||this;return t.useNum=0,t.skinName="RoleRideDrugSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mModel=GameGlobal.TianShenModel,this.numLabel.text=this.useNum+"",this.numLabel.inputType=egret.TextFieldInputType.TEL,this.numLabel.restrict="0-9",this.numLabel.addEventListener(egret.Event.CHANGE,this.onTxtChange,this),this._AddClick(this.minBtn,this._OnClick),this._AddClick(this.maxBtn,this._OnClick),this._AddClick(this.btnLessTen,this._OnClick),this._AddClick(this.btnAddTen,this._OnClick),this._AddClick(this.getwayLabel,this._OnClick),this._AddClick(this.useBtn,this._OnClick),UIHelper.SetLinkStyleLabel(this.getwayLabel)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.minBtn:this.ChangeCount(-1);break;case this.maxBtn:this.ChangeCount(1);break;case this.btnLessTen:this.ChangeCount(-10);break;case this.btnAddTen:this.ChangeCount(10);break;case this.getwayLabel:break;case this.useBtn:var t=GameGlobal.UserBag.GetCount(this.mModel.getBaseConfig().attreitemid);t>0?this.mModel.SendUseDrug(this.useNum):UserTips.ins().showTips("|C:0xff0000&T:属性丹数量不足，无法使用|")}},t.prototype.onTxtChange=function(e){var t=parseInt(this.numLabel.text);this.useNum=0,this.ChangeCount(t)},t.prototype.ChangeCount=function(e){this.useNum=MathUtils.Clamp(this.useNum+e,0,GameGlobal.UserBag.GetCount(this.mModel.getBaseConfig().attreitemid)),this.numLabel.text=this.useNum+""},t.prototype.UpdateContent=function(){var e=GameGlobal.Config.ItemConfig[this.mModel.getBaseConfig().attreitemid];this.item.data=this.mModel.getBaseConfig().attreitemid,this.matLabel.text=e.name;var t=this.mModel.mDrugNum;UIHelper.SetLabelText(this.countLabel,"当前背包拥有：",GameGlobal.UserBag.GetCount(this.mModel.getBaseConfig().attreitemid)+"个"),UIHelper.SetLabelText(this.useCountLabel,"已使用：",t+"个");var i=this.mModel.GetCurDrugAttr();this.attrLabel.textFlow=AttributeData.GetAttrTabString(i)},t.prototype.UpdateDrug=function(){this.useNum=0,this.ChangeCount(0)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.TIANSHEN_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.TIANSHEN_UPDATE_DRUG,this.UpdateDrug),this.UpdateContent(),this.commonDialog.OnAdded(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TianShenAttrDrugPanel.prototype,"TianShenAttrDrugPanel");var TianshenAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TianshenAttrSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this);var i=e[0],o=GameGlobal.TianShenModel.mTianShenList[i];this.levelAttr.textFlow=AttributeData.GetAttrTabString(o.GetAttrs()),this.feisAttr.textFlow=AttributeData.GetAttrTabString(o.GetFeisAttrs()),this.powerLabel.text=o.GetAllPower(),this.lbLev.text=o.mLevel+"\n阶";var n=GameGlobal.Config.AirMarshalListConfig[i];this.tname.text=n.name,this.tname.textColor=ItemBase.GetColorByQuality(n.quality),this.showPanel.SetBody(o.GetSkin())},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TianshenAttrPanel.prototype,"TianshenAttrPanel");var TianShenBaoQiPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.TianShenBaoQiModel,t.mBaoQiPlots=[],t.pos=1,t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnAuto.label="停止":t.btnAuto.label="自动进阶"},200),t.mRoleSendCheckData=new RoleSendCheckData(function(e){t.mModel&&t.mModel.sendUpLevel(t.pos,e)},function(){var e=t.mModel.mTianShenBaoQiDatas[t.pos],i=e.GetLevelConfig();if(!i)return[null];var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mBaoQiPlots.push(this.baoQiItem1),this.mBaoQiPlots.push(this.baoQiItem2),this.mBaoQiPlots.push(this.baoQiItem3),this.mBaoQiPlots.push(this.baoQiItem4),this.mBaoQiList=CommonUtils.GetArray(GameGlobal.Config.AirMarshalTreasureConfig,"id");for(var e=0;4>e;e++)this.mBaoQiPlots[e].setData(this.mBaoQiList[e]);this._AddClick(this.baoQiItem1,this._OnClick),this._AddClick(this.baoQiItem2,this._OnClick),this._AddClick(this.baoQiItem3,this._OnClick),this._AddClick(this.baoQiItem4,this._OnClick),this._AddClick(this.btnGM,this._OnClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.btnAuto,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.TIANSHEN_BAOQI_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.TIANSHEN_BAOQI_UPDATE_EXP,this._DoUpdateExp)},t.prototype.OnClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeObserve(),this.mRoleAutoSendData.Stop()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.baoQiItem1:case this.baoQiItem2:case this.baoQiItem3:case this.baoQiItem4:var t=e.currentTarget;if(t.isopen)this.setState(t.pos),this.pos=t.pos,this.UpdateContent();else{var i=GameGlobal.Config.AirMarshalTreasureConfig[t.pos];i&&UserTips.ins().showTips(i.des)}break;case this.btnCulture:this._SendUp();break;case this.btnAuto:this.mRoleAutoSendData.Toggle();break;case this.btnGM:ViewManager.ins().open(TianShenGmPanel)}},t.prototype.setState=function(e){var t=0,i=this.mBaoQiPlots.length;for(t;i>t;t++)this.mBaoQiPlots[t].currentState="up";this["baoQiItem"+e].currentState="down"},t.prototype.UpdateContent=function(){var e=this.mModel.mTianShenBaoQiDatas[this.pos];this.setState(this.pos),this.mBaoQiPlots[this.pos-1].updateLevel(e.mLevel);var t=GameGlobal.TianShenBaoQiModel.getConfig();this.lbLev.text=e.mLevel+"\n阶",this.powerLabel.text=ItemConfig.CalcAttrScoreValue(t[this.pos].attrs)+GameGlobal.TianShenBaoQiModel.getPower(this.pos,e.mLevel-1),this.showImg.source=t[this.pos].icon;var i=GameGlobal.Config.AirMarshalTreasureAttrsConfig[this.pos],o=i[e.mLevel-1],n=i[e.mLevel];return n?(this.currentState="normal",this.tcurName.text=this.mBaoQiList[this.pos-1].name+" "+e.mLevel+"阶",this.tnextName.text=this.mBaoQiList[this.pos-1].name+" "+(e.mLevel+1)+"阶",this.showCurAttrs(o),this.showNextAttrs(n),this.tpower.text="战力+"+(GameGlobal.TianShenBaoQiModel.getPower(this.pos,e.mLevel)-GameGlobal.TianShenBaoQiModel.getPower(this.pos,e.mLevel-1)),void this._UpdateExp()):(this.currentState="full",this.tcurName.text=this.mBaoQiList[this.pos-1].name+" "+e.mLevel+"阶",void this.showCurAttrs(o))},t.prototype.showCurAttrs=function(e){return e?(this.curProLabel0.text=AttributeData.getAttStrByType(e.attrs[0],0,"+",!1,"#ffffff"),this.curProLabel1.text=AttributeData.getAttStrByType(e.attrs[1],0,"+",!1,"#ffffff"),void(this.curProLabel2.text=AttributeData.getAttStrByType(e.attrs[2],0,"+",!1,"#ffffff"))):(this.curProLabel0.text="0",this.curProLabel1.text="0",void(this.curProLabel2.text="0"))},t.prototype.showNextAttrs=function(e){e&&(this.nextProLabel0.text=AttributeData.getAttStrByType(e.attrs[0],0,"+",!1,"#ffffff"),this.nextProLabel1.text=AttributeData.getAttStrByType(e.attrs[1],0,"+",!1,"#ffffff"),this.nextProLabel2.text=AttributeData.getAttStrByType(e.attrs[2],0,"+",!1,"#ffffff"))},t.prototype._DoUpdateExp=function(){this.mRoleAutoSendData.Continue(),this._UpdateExp()},t.prototype._UpdateExp=function(){var e=this.mModel.mTianShenBaoQiDatas[this.pos],t=e.GetLevelConfig();t&&(this.bar.maximum=t.proexp,this.bar.value=e.mExpUpNum*t.exp,e.mLevel>=this.mModel.MAX_LEVEL-1||this.consumeLabel.Set(t.cost))},t.prototype._SendUp=function(){var e=this.mModel.mTianShenBaoQiDatas[this.pos];return e.mLevel>=this.mModel.MAX_LEVEL?void UserTips.ins().showTips("等级已经达到上限"):this.mRoleSendCheckData.SendUp()},t.NAME="宝器",t}(BaseView);__reflect(TianShenBaoQiPanel.prototype,"TianShenBaoQiPanel",["ICommonWindowTitle"]);var TianShenBaoQiHeadItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isopen=!1,t}return __extends(t,e),t.prototype.setData=function(e){if(e){this.pos=e.id,this.lbName.text=e.name,this.lbName.textColor=ItemBase.GetColorByQuality(3);var t=GameGlobal.TianShenBaoQiModel.mTianShenBaoQiDatas[e.id];this.lbLev.text="",this.lbLev2.text=t.mLevel>0?t.mLevel+"阶":"",this.item.SetQuality(3),this.item.setItemImg(e.icon+""),this.isopen=t.mLevel>0,this.item.setGray(0==t.mLevel)}},t.prototype.updateLevel=function(e){this.lbLev2.text=e+"阶"},t}(eui.Component);__reflect(TianShenBaoQiHeadItem.prototype,"TianShenBaoQiHeadItem");var TabEuiView=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.touchChildren=!0,t}return __extends(t,e),t.prototype.ShowOrHide=function(t,i){var o=e.prototype.ShowOrHide.call(this,t,i);if(o&&egret.is(o,"BaseView"))if(i){var n=[];this.m_TmpIndex==t&&(n=[this.m_TmpData]),o.DoOpen(n)}else o.DoClose();return o},t.prototype.Replace=function(t){for(var i=0,o=this.childrenList;i<o.length;i++){var n=o[i];n.obj&&egret.is(n.obj,"BaseView")&&n.obj.DoClose()}e.prototype.Replace.call(this,t)},t.prototype.CloseView=function(){var e=this.getElementAt(this.selectedIndex);e&&e.DoClose&&e.DoClose(),this.m_TmpIndex=null,this.m_TmpData=null,this.proposedSelectedIndex=eui.ListBase.NO_PROPOSED_SELECTION,this._selectedIndex=-1},t.prototype.OpenIndex=function(e,t){this.m_TmpIndex=e,this.m_TmpData=t,this.selectedIndex=e},t}(TabView);__reflect(TabEuiView.prototype,"TabEuiView");var TianShenBreachPanel=function(e){function t(){var t=e.call(this)||this;return t.curLevel=0,t.needLevel=0,t.isEnough=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.breachBtn,this._OnClickBtn)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.TIANSHEN_UPDATE_BREACH,this.UpdateContent)},t.prototype._OnClickBtn=function(e){return this.curLevel<this.needLevel?void UserTips.ins().showTips("天神进阶等级不够，不能突破"):this.isEnough?void GameGlobal.TianShenBreachModel.sendTianShenBreach(this.tianShenId):void UserTips.ins().showTips("突破道具不足")},t.prototype.UpdateContent=function(){var e=GameGlobal.TianShenModel,t=this.mContext.mTianShenList[this.mContext.mSelectIndex];if(this.tianShenId=t.id,!e.HasTianShen(this.tianShenId))return void(this.group.visible=!1);this.group.visible=!0,this.tname.text=t.name,this.tname.textColor=ItemBase.GetColorByQuality(t.quality);var i=e.mTianShenList[this.tianShenId];this.petShowPanel.SetBody(i.GetSkin()),this.lbLev.text=i.mBreachLv+"\n级",this.powerLabel.text=GameGlobal.TianShenBreachModel.getPower(this.tianShenId,i.mBreachLv);var o=GameGlobal.TianShenBreachModel.getLevelsConfig(this.tianShenId),n=o[i.mBreachLv],a=o[i.mBreachLv+1];if(!a)return this.currentState="full",this.tcurName.text=t.name+"+"+i.mBreachLv,void this.showCurAttrs(n);this.currentState="normal",this.curLevel=i.mLevel,this.needLevel=a.needlevel,this.tcondition.text="需求"+i.mLevel+"/"+a.needlevel+"级",this.needItemView0.visible=this.needItemView1.visible=!1;for(var r=0;r<a.cost.length;r++)this["needItemView"+r].SetItemId(a.cost[r].id,a.cost[r].count),this["needItemView"+r].visible=!0,this.isEnough&&(this.isEnough=GameGlobal.UserBag.GetCount(a.cost[r].id)>=a.cost[r].count);this.tcurName.text=t.name+"+"+i.mBreachLv,this.tnextName.text=t.name+"+"+(i.mBreachLv+1),this.showCurAttrs(n),this.showNextAttrs(a),this.tpower.text="战力+"+(GameGlobal.TianShenBreachModel.getPower(this.tianShenId,i.mBreachLv+1)-GameGlobal.TianShenBreachModel.getPower(this.tianShenId,i.mBreachLv))},t.prototype.showCurAttrs=function(e){return e?(this.curProLabel1.text=AttributeData.getAttStrByType(e.attrs[0],0,"+",!1,"#ffffff"),this.curProLabel2.text=AttributeData.getAttStrByType(e.attrs[1],0,"+",!1,"#ffffff"),void(this.curProLabel3.text=AttributeData.getAttStrByType(e.attrs[2],0,"+",!1,"#ffffff"))):(this.curProLabel1.text="0",this.curProLabel2.text="0",void(this.curProLabel3.text="0"))},t.prototype.showNextAttrs=function(e){if(e&&(this.nextProLabel1.text=AttributeData.getAttStrByType(e.attrs[0],0,"+",!1,"#ffffff"),this.nextProLabel2.text=AttributeData.getAttStrByType(e.attrs[1],0,"+",!1,"#ffffff"),this.nextProLabel3.text=AttributeData.getAttStrByType(e.attrs[2],0,"+",!1,"#ffffff"),this.newSkillGroup.visible=!1,e.skillid)){this.newSkillGroup.visible=!0;var t=e.skillid[e.skillid.length-1],i=GameGlobal.Config.EffectsConfig[t];i?(this.tskillName.text=this.nextProLabel4.text=i[GameGlobal.Config.EffectsConfig_keys.skinName],this.breachSkillDes.text=i[GameGlobal.Config.EffectsConfig_keys.desc],this.skillIcon.source=i[GameGlobal.Config.EffectsConfig_keys.icon]):(this.tskillName.text=this.nextProLabel4.text="没得配置",this.breachSkillDes.text="技能ID获取不了配置："+t,this.skillIcon.source="")}},t.NAME="突破",t}(BaseView);__reflect(TianShenBreachPanel.prototype,"TianShenBreachPanel",["ICommonWindowTitle"]);var TianshenDetailWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="TianshenDetailSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.item.setDataByConfig(i),this.item.setCount(""+(o||"")),this.labItemName.text=i.name,this.labItemName.textColor=ItemBase.GetColorByQuality(i.quality);var n=GameGlobal.Config.AirMarshalListConfig[i.pid];this.labName.text=n.name,this.labName.textColor=ItemBase.GetColorByQuality(n.quality),this.labItemDesc.text="可用于激活天神【"+n.name+"】",this.labDesc.text=i.desc,this.showPanel.SetBody(GameGlobal.TianShenModel.GetSkin(i.pid))},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TianshenDetailWin.prototype,"TianshenDetailWin");var TianshenFeishengPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TianshenFeishengSkin",t._AddClick(t.btnAdd,t._OnClick),t._AddClick(t.btnCulture,t._OnClick),t.mRoleAutoSendData=new RoleAutoSendData(function(){t.SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动飞升"},200),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_TianshenId=e[0],this.UpdateContent(),this.observe(MessageDef.TIANSHEN_UPDATE_FLYEXP,this.UpdateFly),this.observe(MessageDef.TIANSHEN_UPDATE_FLYINFO,this.UpdateContent),this.commonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateFly=function(){this.mRoleAutoSendData.Continue()},t.prototype.UpdateContent=function(){var e=GameGlobal.TianShenModel,t=this.m_TianshenInfo=GameGlobal.TianShenModel.mTianShenList[this.m_TianshenId];this.powerLabel.text=t.GetFeishengPower();var i=GameGlobal.Config.AirMarshalListConfig[this.m_TianshenId];this.tname.text=i.name,this.tname.textColor=ItemBase.GetColorByQuality(i.quality);for(var o=t.mFeisLevel,n=GameGlobal.Config.AirMarshalFlyproConfig[this.m_TianshenId][o],a=0;a<this.starGroup.numChildren;a++){var r=this.starGroup.getChildAt(a);r.source=o>a?"ui_bm_jsstar04":"ui_bm_jsstar03"}if(0!=o){var s=AppearanceConfig.GetUIAppe(GameGlobal.Config.PositionSkinConfig[o].pid);this.imgXianw.source=s.substring(s.lastIndexOf("/")+1)}var l=t.GetFeisAttrs();this.attrLabel.textFlow=AttributeData.GetAttrTabString(l),o>=e.MAX_FEISHENG_LEVEL?this.currentState="full":(this.currentState="normal",this.bar.maximum=n.proexp,this.bar.value=t.mFeisExp*n.exp,this.needItemView.SetItemId(n.cost[0].id,n.cost[0].count)),this.showPanel.SetBody(t.GetSkin())},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnAdd:this.SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle()}},t.prototype.SendUp=function(){var e=GameGlobal.TianShenModel,t=GameGlobal.Config.AirMarshalFlyproConfig[this.m_TianshenId][this.m_TianshenInfo.mFeisLevel];return t?Checker.Datas(t.cost,!1)?(e.SendFlyLevel(this.m_TianshenId,0),!0):(UserWarn.ins().BuyGoodsWarn(t.cost[0].id),!1):!1},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TianshenFeishengPanel.prototype,"TianshenFeishengPanel");var TianShenGmPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TianShenGmSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=GameGlobal.TianShenBaoQiModel,t=e.GetAllLevel(),i=GameGlobal.Config.AirMarshalResonateConfig,o=0,n=1;99>n;n++){var a=i[n];if(!a)break;if(t<a.lv)break;o=n}1>o?UIHelper.SetVisible(this.curGroup,!1):o>=e.MAX_GM_LEVEL&&UIHelper.SetVisible(this.nextGroup,!1);var r=i[o];r?(this.levelLabel.textFlow=TextFlowMaker.generateTextFlow("等级|C:0x019704:&T:"+r.lv+"|"),this.curValue.text=AttributeData.getAttStr(r.attrs,1)):this.levelLabel.textFlow=TextFlowMaker.generateTextFlow("|C:0x019704:&T:未激活|");var s=i[o+1];s&&(this.nextValue.text=AttributeData.getAttStr(s.attrs,1),this.conLabel.textFlow=TextFlowMaker.generateTextFlow("宝器总等阶达到|C:0x019704:&T:"+s.lv+"阶|可激活"),this.curAllLevel.text="当前总等阶段："+t)},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TianShenGmPanel.prototype,"TianShenGmPanel");var TianShenHeChengPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=TianShenHeChengItem,this.mHeChengList=CommonUtils.GetArray(GameGlobal.Config.AirMarshalSynthesisConfig,"id"),this.list.dataProvider=new eui.ArrayCollection(this.mHeChengList)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.RP_BAG_TIANSHEN_ACT_ITEM,this.UpdateContent)},t.prototype.UpdateContent=function(){this.list.dataProvider=new eui.ArrayCollection(this.mHeChengList)},t.NAME="合成",t}(BaseView);__reflect(TianShenHeChengPanel.prototype,"TianShenHeChengPanel",["ICommonWindowTitle"]);var TianShenHeChengItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tianshenId=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnHC.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.getwayLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClickHandler=function(e){GameGlobal.TianShenModel.SendHeCheng(this.tianshenId)},t.prototype.onClick=function(){UserWarn.ins().setBuyGoodsWarn(this.data.cost.id)},t.prototype.dataChanged=function(){if(this.data){this.tianshenId=this.data.id,this.needItemView.SetItemId(this.data.cost.id,this.data.cost.count);var e=UserBag.ins().GetCount(this.data.cost.id)>=this.data.cost.count;this.btnHC.visible=e,this.getwayLabel.visible=!e,this.getwayLabel.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>获取'+GameGlobal.GetItemName(this.tianshenId)+"碎片</u></a>")}},t}(eui.ItemRenderer);__reflect(TianShenHeChengItem.prototype,"TianShenHeChengItem");var TianShenInactiveView=function(e){function t(){var t=e.call(this)||this;return t.skinName="TianShenInactiveSkin",t.baseView.currentState="inactive",t._AddClick(t.getwayLabel,t._OnClick),t._AddClick(t.actBtn,t._OnClick),t._AddClick(t.btnYuanfen,t._OnClick),UIHelper.SetLinkStyleLabel(t.getwayLabel),t}return __extends(t,e),t.prototype.OnOpen=function(){this.btnYuanfen.visible=Deblocking.Check(GameGlobal.Config.FateBaseConfig.openlv,!0),UIHelper.ShowRedPoint(this.btnYuanfen,GameGlobal.YuanfenModel.IsRedPoint())},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.getwayLabel:UserWarn.ins().setBuyGoodsWarn(this.needItemView.mItemId);break;case this.actBtn:var t=GameGlobal.Config.AirMarshalListConfig[this.m_TianShenId];t&&Checker.Data(t.material)&&GameGlobal.TianShenModel.SendActive(this.m_TianShenId);break;case this.btnYuanfen:ViewManager.ins().open(YuanfenMainWin);break;case this.btnAttrDrug:ViewManager.ins().open(TianShenAttrDrugPanel)}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t),this.m_TianShenId=t;var i=GameGlobal.Config.AirMarshalListConfig[t];this.needItemView.SetItemId(i.material.id,i.material.count),this.actBtn.visible=GameGlobal.UserBag.GetCount(i.material.id)>=i.material.count,this.getwayLabel.visible=!this.actBtn.visible},t.prototype.SetContext=function(e){this.mContext=e},t}(TianShenBaseInfoPanel);__reflect(TianShenInactiveView.prototype,"TianShenInactiveView");var TianShenMainPanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.skinName="TianShenMainSkin",t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,112),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(TianShenUpLevelPanel,{skinName:"TianShenLevelUpSkin",mContext:this}),TabView.CreateTabViewData(TianShenBreachPanel,{skinName:"TianShenBreachSkin",mContext:this}),TabView.CreateTabViewData(TianShenHeChengPanel,{skinName:"TianShenHeChengSkin",mContext:this}),TabView.CreateTabViewData(TianShenBaoQiPanel,{skinName:"TianShenBaoQiSkin",mContext:this})]),this.list.itemRenderer=TianShenHeadItem,this.mTianShenList=CommonUtils.GetArray(GameGlobal.Config.AirMarshalListConfig,"id");
for(var e=function(e){var t=e.id,i=GameGlobal.TianShenModel;return i.HasBattle()&&i.mBattleID==e.id?t-=1e5:(i.HasTianShen(e.id)&&(t-=1e4),t)},t=0,i=this.mTianShenList;t<i.length;t++){var o=i[t];if(0==o.showicon){var n=this.mTianShenList.indexOf(o);this.mTianShenList.splice(n,1)}}this.mTianShenList.sort(function(t,i){return e(t)-e(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mTianShenList),this.list.selectedIndex=this.mSelectIndex,this._AddItemClick(this.list,this._OnItemTap)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_23)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.observe(MessageDef.TIANSHEN_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.TIANSHEN_UPDATE_BREACH,this.UpdateContent),this.observe(MessageDef.RP_BAG_TIANSHEN_ACT_ITEM,this.UpdateRedPoint),this.observe(MessageDef.RP_TIANSHEN,this.UpdateRedPoint),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateRedPoint),this.UpdateRedPoint(),this.mListLRBtnCtrl.OnRefresh(),this.UpdateContent()},t.prototype.OnClose=function(){this._ClosePetView(),MainBottomPanel.CloseNav(this)},t.prototype.UpdateRedPoint=function(){this.mCommonWindowBg.CheckTalRedPoint(0),this.mCommonWindowBg.CheckTalRedPoint(1),this.mCommonWindowBg.CheckTalRedPoint(2),this.mCommonWindowBg.CheckTalRedPoint(3)},t.prototype._OnItemTap=function(e){var t=e.itemIndex;this.mSelectIndex=t,this.UpdateContent()},t.prototype.UpdateContent=function(){UIHelper.ListRefresh(this.list),this.commonWindowBg.GetCurViewStackElement().UpdateContent(),this._UpdatePetView()},t.prototype._UpdatePetView=function(){var e=this.mTianShenList[this.mSelectIndex].id;GameGlobal.TianShenModel.HasTianShen(e)?this._ClosePetView():(this.mTianShenInactiveView||(this.mTianShenInactiveView=new TianShenInactiveView,this.mTianShenInactiveView.SetContext(this)),this.mTianShenInactiveView.parent||(this.group.addChild(this.mTianShenInactiveView),this.mTianShenInactiveView.DoOpen([])),this.mTianShenInactiveView.UpdateInfo(e))},t.prototype._ClosePetView=function(){this.mTianShenInactiveView&&this.mTianShenInactiveView.parent&&(this.mTianShenInactiveView.DoClose(),DisplayUtils.removeFromParent(this.mTianShenInactiveView))},t.prototype.OnOpenIndex=function(e){switch(this.showGroup.visible=!0,e){case 1:return Deblocking.Check(DeblockingType.TYPE_24);case 2:return this.showGroup.visible=!1,Deblocking.Check(DeblockingType.TYPE_25);case 3:return this.showGroup.visible=!1,Deblocking.Check(DeblockingType.TYPE_26)}return!0},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TianShenMainPanel.prototype,"TianShenMainPanel",["ICommonWindow"]);var TianShenHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.SetContent(e);var t=GameGlobal.TianShenModel;t.HasBattle()&&t.mBattleID==e.id?this.imgBattle.source="ui_bm_chuzhan":this.imgBattle.source="",this.redPoint.visible=GameGlobal.TianShenModel.IsRedPointTianShen(e.id)},t.prototype.SetContent=function(e){this.lbName.text=e.name,this.lbName.textColor=ItemBase.GetColorByQuality(e.quality),this.lbLev.text=GameGlobal.TianShenModel.HasTianShen(e.id)?GameGlobal.TianShenModel.GetLevel(e.id)+"阶":"",this.lbLev2.text=GameGlobal.TianShenModel.HasTianShen(e.id)?GameGlobal.TianShenModel.GetBreachLvStr(e.id):"",this.item.SetQuality(e.quality),this.item.setItemImg("resource/assets/image/head/tianshen/"+e.icon+".png"),this.item.setGray(!GameGlobal.TianShenModel.HasTianShen(e.id)),null!=e.jicon?(this.jicon.visible=!0,this.jicon.source=e.jicon):this.jicon.visible=!1},t.prototype.SetContentByInfo=function(e){this.SetContent(GameGlobal.Config.AirMarshalListConfig[e])},t}(eui.ItemRenderer);__reflect(TianShenHeadItem.prototype,"TianShenHeadItem");var TianShenUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.tianshenId=0,t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnAuto.label="停止":t.btnAuto.label="自动进阶"},200),t.mRoleSendCheckData=new RoleSendCheckData(function(e){t.model&&t.model.SendUpLevel(t.tianshenId,e)},function(){var e=t.mContext.mTianShenList[t.mContext.mSelectIndex],i=t.model.mTianShenList[e.id].mLevel,o=GameGlobal.Config.AirMarshalLvproConfig[e.quality][i];if(!o)return[null];var n=o.cost;return[n[0].id,n[0].count,n[1].id,n[1].count]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.btnAuto,this._OnClick),this._AddClick(this.baseView.btnZZ,this._OnClick),this._AddClick(this.btnYuanfen,this._OnClick),this._AddClick(this.btnAttrDrug,this._OnClick),this._AddClick(this.baseView.btnFeis,this._OnClick)},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.observe(MessageDef.TIANSHEN_UPDATE_INFO,this.UpdateContent),this.observe(MessageDef.TIANSHEN_UPDATE_EXP,this._DoUpdateExp),this.observe(MessageDef.BAG_TIANSHEN_LEVEL_ITEM,this._UpdateExp),this.observe(MessageDef.RP_BAG_TIANSHEN_ACT_ITEM,this.UpdateRedPoint),this.observe(MessageDef.RP_TIANSHEN,this.UpdateRedPoint),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateYuanfenRedPoint),this.UpdateRedPoint(),this.btnYuanfen.visible=Deblocking.Check(GameGlobal.Config.FateBaseConfig.openlv,!0)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateRedPoint=function(){UIHelper.ShowRedPoint(this.baseView.btnZZ,GameGlobal.TianShenModel.mRedPoint.Get(TianShenModelRedPoint.INDEX_BATTLE)),UIHelper.ShowRedPoint(this.baseView.btnSXD,GameGlobal.TianShenModel.mRedPoint.Get(TianShenModelRedPoint.INDEX_ATTR))},t.prototype.UpdateContent=function(){e.prototype.UpdateContent.call(this),this._UpdateExp(),this.UpdateYuanfenRedPoint()},t.prototype.UpdateYuanfenRedPoint=function(){UIHelper.ShowRedPoint(this.btnYuanfen,GameGlobal.YuanfenModel.CanActInList(null))},t.prototype._OnClick=function(e){if(GameGlobal.GetGameUtil["true"])switch(e.currentTarget){case this.baseView.btnFeis:var t=GameGlobal.Config.AirMarshalFlyproConfig[this.tianshenId];if(!t)return void UserTips.ins().showTips("该天神不能飞升");ViewManager.ins().open(TianshenFeishengPanel,this.tianshenId);break;case this.btnCulture:this._SendUp();break;case this.btnAuto:this.mRoleAutoSendData.Toggle();break;case this.baseView.btnZZ:GameGlobal.TianShenModel.SendBattle(this.tianshenId,this.model.mBattleID==this.tianshenId?0:1);break;case this.btnYuanfen:ViewManager.ins().open(YuanfenMainWin);break;case this.btnAttrDrug:ViewManager.ins().open(TianShenAttrDrugPanel,this.model)}},t.prototype.UpdateInfo=function(t){this.tianshenId=t,e.prototype.UpdateInfo.call(this,t);var i=GameGlobal.TianShenModel,o=GameGlobal.TianShenModel.mTianShenList[t];o.mLevel>=i.MAX_LEVEL?this.currentState="full":this.currentState="normal",this._UpdateExp()},t.prototype._DoUpdateExp=function(){this.mRoleAutoSendData.Continue(),this._UpdateExp()},t.prototype._UpdateExp=function(){var e=this.mContext.mTianShenList[this.mContext.mSelectIndex],t=e.id,i=e.quality,o=GameGlobal.TianShenModel.GetLevel(t),n=GameGlobal.Config.AirMarshalLvproConfig[i][o-1];n&&(this.bar.maximum=n.proexp,this.bar.value=GameGlobal.TianShenModel.mTianShenList[t].mExpUpNum*n.exp,this.consumeLabel.Set(n.cost))},t.prototype._SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.RedPointCheck=function(){return GameGlobal.TianShenModel.mRedPoint.IsRedPoint()||GameGlobal.YuanfenModel.IsRedPoint()},t.NAME="天神",t}(TianShenBaseInfoPanel);__reflect(TianShenUpLevelPanel.prototype,"TianShenUpLevelPanel");var TianxModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_TIANX)||this;return t.mMsgDefUpdateExp=MessageDef.ROLE_TIANX_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.ROLE_TIANX_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.ROLE_TIANX_UPDATE,t.mMsgDefInit=MessageDef.ROLE_TIANX_INIT,t.mMsgDefUpdateEquip=MessageDef.ROLE_TIANX_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_TIANX_EQUIP_UP,t.mRedPoint=new TianxModelRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.FairyBaseConfig,this.LvproConfig=GameGlobal.Config.FairyLvproConfig,this.SkillConfig=GameGlobal.Config.FairySkillConfig,this.AttrsConfig=GameGlobal.Config.FairyAttrsConfig,this.ProgressConfig=GameGlobal.Config.FairyProgressConfig,this.SkinConfig=GameGlobal.Config.FairySkinConfig,e.prototype.Init.call(this)},t}(UserTemplate);__reflect(TianxModel.prototype,"TianxModel");var TianxModelRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.TIANXIAN,t}return __extends(t,e),t}(UserTemplateRedPoint);__reflect(TianxModelRedPoint.prototype,"TianxModelRedPoint");var TianxianMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TianxianMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(TianxPanel),TabView.CreateTabViewData(SwordPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]||0),this.observe(GameGlobal.TianxModel.GetItemRpUpdateMsg(),this.UpdateRedPointIndex0),this.observe(GameGlobal.TianxModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPointIndex0),this.UpdateRedPointIndex0(),this.observe(GameGlobal.SwordModel.GetItemRpUpdateMsg(),this.UpdateRedPointIndex1),this.observe(GameGlobal.SwordModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPointIndex1),this.UpdateRedPointIndex1(),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.updateJiJieBtnPng()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(0),[ActivityKaiFuJiJieType.fairy]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(1),[ActivityKaiFuJiJieType.weapon])},t.prototype.UpdateRedPointIndex0=function(){this.commonWindowBg.CheckTalRedPoint(0)},t.prototype.UpdateRedPointIndex1=function(){this.commonWindowBg.CheckTalRedPoint(1)},t.prototype.OnClose=function(){GameGlobal.MessageCenter.dispatch(MessageDef.CHANGE_EQUIP)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_27)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TianxianMainPanel.prototype,"TianxianMainPanel",["ICommonWindow"]);var TianxPanel=function(e){function t(){var t=e.call(this)||this;return t.mModel=GameGlobal.TianxModel,t.mModelRedPoint=GameGlobal.TianxModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.fairy,t}return __extends(t,e),t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_27)},t.RedPointCheck=function(){return GameGlobal.TianxModel.mRedPoint.IsRedPoint()},t.NAME="守护",t}(RoleRidePanel);__reflect(TianxPanel.prototype,"TianxPanel");var UserTips=function(e){function t(){var t=e.call(this)||this;return MessageCenter.ins().addListener(MessageDef.POWER_BOOST,t.showBoostPower,t),t.regNetMsg(S2cProtocol.sc_error_code,t._ErrorTip),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype._ErrorTip=function(e){var t=e.msg;t&&this.showTips(t)},t.ErrorTip=function(e){t.ins().showTips("|C:0xff0000&T:"+e+"|")},t.FormatTip=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.ins().showTips("|C:0xFFF5E0&T:"+StringUtils.FormatS.apply(null,e)+"|")},t.InfoTip=function(e){t.ins().showTips("|C:0xFFF5E0&T:"+e+"|")},t.InfoTip2=function(e){t.ins().showTips("|C:0x00ff00&T:"+e+"|")},t.prototype.showTips=function(e){var t=ViewManager.ins().getView(TipsView);t||(t=ViewManager.ins().open(TipsView)),t.showIconTips(e,"")},t.prototype.showContTips=function(e,t){var i=ViewManager.ins().getView(TipsView);i||(i=ViewManager.ins().open(TipsView)),i.showIconTips(e,t)},t.prototype.showGoodEquipTips=function(e){var t=ViewManager.ins().getView(TipsView);t||(t=ViewManager.ins().open(TipsView)),t.showGoodEquipTip(e)},t.prototype.showBoostPower=function(e,t){var i=ViewManager.ins().getView(BoostPowerView);i||(i=ViewManager.ins().open(BoostPowerView)),i.showBoostPower(e,t)},t.prototype.showFuncNotice=function(e){},t}(BaseSystem);__reflect(UserTips.prototype,"UserTips");var BoostPowerView=function(e){function t(){var t=e.call(this)||this;return t.lastTime=0,t.lastPower=0,t.timeout=0,t.skinName="BoostPowerSkin",t.group.verticalCenter=50,t.group.horizontalCenter=0,t.touchEnabled=!1,t.touchChildren=!1,t}return __extends(t,e),t.prototype.destoryView=function(){},t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.showBoostPower=function(e,t){0==this.lastPower?(this.lastPower=t,this.timeId=egret.setTimeout(this.delayPowerUp,this,500)):(this.timeId&&egret.clearTimeout(this.timeId),this.timeId=egret.setTimeout(this.delayPowerUp,this,500))},t.prototype.clearShow=function(){egret.Tween.removeTweens(this.img),egret.Tween.removeTweens(this.powerLabel),egret.Tween.removeTweens(this.addPowerLabel),this.img.visible=!1,this.addPowerLabel.text="",TimerManager.ins().removeAll(this),egret.clearTimeout(this.timeout),this.timeout=0},t.prototype.delayPowerUp=function(){this.timeId=null,ViewManager.ins().isShow(t)||ViewManager.ins().open(t);var e=this.lastPower,i=GameLogic.ins().actorModel.power;this.lastPower=0,i>e&&this.showPowerUp(e,i)},t.prototype.showPowerUp=function(e,t){var i=this;this.clearShow(),this.img.visible=!0,this.img.alpha=1;var o=this.powerLabel;o.alpha=1;var n=t-e;TimerManager.ins().doTimer(20,25,function(){var t=n;t+=Math.round(Math.random()*t);var i=e.toString(),a=t.toString().length==i.length?t.toString().slice(1):t+"";i=i.charAt(0),i+=a,o.text=i},this,function(){o.text=GameLogic.ins().actorModel.power.toString();var e="+"+n,t=i.addPowerLabel;t.alpha=1,t.y=0,t.text=e,t.x=o.width-t.width,t.y-=o.height;var a=1e3,r=500,s=egret.Tween.get(t);s.to({y:t.y-45},a).to({alpha:0},r);var l=egret.Tween.get(o);l.wait(a).to({alpha:0},r);var c=egret.Tween.get(i.img);c.wait(a).to({alpha:0},r).call(function(){i.img.visible=!1,i.CloseSelf()},i)},this)},t.LAYER_LEVEL=LayerManager.UI_Tips,t}(BaseEuiView);__reflect(BoostPowerView.prototype,"BoostPowerView");var TipsGoodEquip=function(e){function t(){var t=e.call(this)||this;return t.isUsing=!1,t.skinName="OrangeEquipNoticeSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"data",{set:function(e){this.item.data=e,this.item.isShowName(!1),this.itemName.text=e.itemConfig.name,this.itemName.textColor=ItemBaseEffe.QUALITY_TIP_COLOR[e.itemConfig.quality],this.mc||(this.mc=new MovieObject,this.mc.x=230,this.mc.y=75,this.mc.scaleX=1.14,this.mc.scaleY=1.2),this.addChild(this.mc),this.mc.LoadByUrl(ResDataPath.GetUIEffePath("ui_yhy004"),-1,!0)},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(TipsGoodEquip.prototype,"TipsGoodEquip");var TipsItem=function(e){function t(){var t=e.call(this)||this;return t.endPos=0,t.speed=0,t.step=0,t.time=0,t.skinName="TipsSkin",t.group.x=0,t.group.width=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"labelText",{set:function(e){this.lab.textFlow=TextFlowMaker.generateTextFlow(e),this.bg.width=this.lab.width+80,this.group.y=0,this.step=0,this.time=0,this.alpha=1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconName",{set:function(e){this.icon.source=e},enumerable:!0,configurable:!0}),t.prototype.Update=function(e){this.time+=e;var t;if(0==this.step)t=500,this.group.y=-this.height*Math.min(this.time/t,1);else if(1==this.step)t=500;else{if(2!=this.step)return!1;t=200,this.alpha=1-Math.min(this.time/t,1)}return this.time>=t&&(++this.step,this.time=0),!0},t}(eui.Component);__reflect(TipsItem.prototype,"TipsItem");var TipsView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labCount=0,t.list=[],t.goodEquipList=[],t.m_StrList=[],t.m_CacheList=[],t.m_IsUpadte=!1,t.m_PreTime=0,t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.touchChildren=!1,this.touchEnabled=!1,this.m_Group=new eui.Group,this.m_Group.horizontalCenter=0,this.m_Group.width=0,this.addChild(this.m_Group),this.equipTip1=new TipsGoodEquip,this.equipTip2=new TipsGoodEquip},t.prototype.showTips=function(e){this.m_StrList.push([e]),this._StartUpdate()},t.prototype.showIconTips=function(e,t){this.m_StrList.push([e,t]),this._StartUpdate()},t.prototype._Cache=function(e){var t=this.list[e];t&&(this.m_Group.removeChild(t),this.list.splice(e,1),this.m_CacheList.length<25&&this.m_CacheList.push(t))},t.prototype.CreateTips=function(){if(!(this.m_StrList.length<1)){var e=(egret.getTimer(),this.m_StrList.shift()),t=this.m_CacheList.pop()||new TipsItem;t.labelText=e[0],t.iconName=e[1],this.m_Group.addChild(t),this.list.unshift(t);var i=GameGlobal.StageUtils.GetHeight()>>1;t.y=i;for(var o=this.list.length-1;o>=0;--o){var n=this.list[o];n.y<0?this._Cache(o):(n.endPos=i-o*n.height,n.speed=(n.y-n.endPos)/500)}}},t.prototype._StartUpdate=function(){this.m_IsUpadte||(this.m_IsUpadte=!0,this.m_PreTime=egret.getTimer(),egret.startTick(this.Update,this))},t.prototype._StopUpdate=function(){this.m_IsUpadte&&(this.m_IsUpadte=!1,egret.stopTick(this.Update,this))},t.prototype.Update=function(e){var t=e-this.m_PreTime;this.m_PreTime=e;for(var i=this.list.length-1;i>=0;--i){var o=this.list[i],n=o.y-t*o.speed;o.y=Math.max(o.endPos,n),o.Update(t)||this._Cache(i)}return this.CreateTips(),this.m_StrList.length<1&&this.list.length<1&&this._StopUpdate(),!1},t.prototype.showGoodEquipTip=function(e){this.goodEquipList.push(e),TimerManager.ins().isExists(this.goodEquipTimer,this)||TimerManager.ins().doTimer(16,0,this.goodEquipTimer,this)},t.prototype.goodEquipTimer=function(){var e=this;if(0!=this.goodEquipList.length&&!this.isWait){var t=void 0;if(this.equipTip1.isUsing||(t=this.equipTip1),this.equipTip2.isUsing||(t=this.equipTip2),void 0!=t){t.x=-235,t.y=1e3,t.alpha=1,this.m_Group.addChild(t),t.isUsing=!0,this.isWait=!0;var i=this.goodEquipList.pop();t.data=i;var o=egret.Tween.get(t);o.to({y:850},500).call(function(){e.isWait=!1}).wait(1e3).to({alpha:0},1e3).call(function(){t.isUsing=!1,e.m_Group.removeChild(t)});var n;if(n=t==this.equipTip1?this.equipTip2:this.equipTip1,n.isUsing){egret.Tween.removeTweens(n);var a=egret.Tween.get(n);a.to({y:700,alpha:0},1e3).wait(300).call(function(){n.isUsing=!1,e.m_Group.removeChild(n)})}}}},t.LAYER_LEVEL=LayerManager.UI_Tips,t.START_Y=640,t.END_Y_OFFSET=60,t.MAX_ITEMS=15,t}(BaseEuiView);__reflect(TipsView.prototype,"TipsView");var TotemsModel=function(e){function t(){var t=e.call(this)||this;return t.totemsDic={},t.clickIndex=0,t.mRedPoint=new TotemsModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_totems_info,t._DoInitInfo),t}return __extends(t,e),t.prototype._DoInitInfo=function(e){for(var t=0;t<e.data.length;t++)this.totemsDic[e.data[t].id]=e.data[t];GameGlobal.MessageCenter.dispatch(MessageDef.TOTEMS_INFO)},t.prototype.activationTotems=function(e){var t=this,i=new Sproto.cs_totems_open_request;i.id=e,this.Rpc(C2sProtocol.cs_totems_open,i,function(i){if(1==i.ret){var o={};o=t.rspDate(e,i),t.totemsDic[e]=o,GameGlobal.MessageCenter.dispatch(MessageDef.TOTEMS_UPDATEACTIVATION),t.mRedPoint.mRedPointMap[e]=!1}},this)},t.prototype.rspDate=function(e,t){var i={};return void 0!=t&&1==t.ret&&(i.id=e,i.lv=t.lv,i.upNum=t.upNum,i.todayNum=t.todayNum,i.todayId=t.todayId,i.breach=t.breach),i},t.prototype.upTotems=function(e,t,i){var o=this,n=new Sproto.cs_totems_add_exp_request;n.id=e,n.num=t,n.autobuy=i,this.Rpc(C2sProtocol.cs_totems_add_exp,n,function(t){if(1==t.ret){var i={};i=o.rspDate(e,t),o.totemsDic[e]=i,GameGlobal.MessageCenter.dispatch(MessageDef.TOTEMS_UPDATEACTIVATION)}},this)},t.prototype.breachTotems=function(e){var t=this,i=new Sproto.cs_totems_breach_request;i.id=e,this.Rpc(C2sProtocol.cs_totems_breach,i,function(i){if(1==i.ret){var o={};o=t.rspDate(e,i),t.totemsDic[e]=o,GameGlobal.MessageCenter.dispatch(MessageDef.TOTEMS_UPDATEACTIVATION),t.mRedPoint.mRedPointMap[e]=!1}},this)},t.prototype.tabIDArr=function(){var e=[],t=GameGlobal.Config.TotemsActConfig;for(var i in t){var o=t[i];e.push(o.id)}return e},t.prototype.DicIndex=function(e,t){var i=-1;void 0==t&&(t=this.tabIDArr());for(var o=0;o<t.length;o++)if(Number(e)==t[o])return o;return i},t}(BaseSystem);__reflect(TotemsModel.prototype,"TotemsModel");var TotemsModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mRedPointMap={},i.mModel=t,i}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.TOTEMS_INFO,MessageDef.TOTEMS_UPDATEACTIVATION]},t.prototype.GetCheckFuncList=function(){return e={},e[t.TOTEMS_ACTIVATION]=this.showRedPoint,e;var e},t.prototype.showRedPoint=function(){for(var e=!1,t=this.mModel.tabIDArr(),i=GameGlobal.Config.TotemsActConfig,o=GameGlobal.Config.TotemsAttrsConfig,n=0;n<t.length;n++){var a=t[n];if(void 0!=this.mModel.totemsDic[a]){var r=this.mModel.totemsDic[t[n]].id,s=this.mModel.totemsDic[t[n]].lv;if(s<=o[r].length){var l=this.mModel.totemsDic[a].breach;0!=l&&void 0!=o[r][l].tpcost&&1==Checker.Data(o[r][l].tpcost[0],!1)&&(this.mRedPointMap[r]=!0,e=!0),s<o[r].length&&void 0!=o[r][s].cost&&1==Checker.Data(o[r][s].cost[0],!1)&&(e=!0)}}else{var c=i[a].cost[0];1==Checker.Data(c,!1)&&(this.mRedPointMap[a]=!0,e=!0)}}return e},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.TOTEMS_REDPOINT_NOTICE)},t.prototype.DoActive=function(){},t.TOTEMS_ACTIVATION=0,t}(IRedPoint);__reflect(TotemsModelRedPoint.prototype,"TotemsModelRedPoint");var TotemsActivationModelPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.x1=192.5,t.x2=345.5,t.text="图腾激活条件",t.text2="图腾突破条件",t.btnText="激活",t.btnText2="突破",t.skinName="TotemsActivationModelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tabTotemsActConfig=GameGlobal.Config.TotemsActConfig,this.tabTotemsAttrsConfig=GameGlobal.Config.TotemsAttrsConfig,this._AddClick(this.addFiftyBtn,this.onClick)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.addFiftyBtn:var t=GameGlobal.TotemsModel.tabIDArr();if(this.addFiftyBtn.label==this.btnText){var i=this.tabTotemsActConfig[t[this.index]].cost[0];1==Checker.CheckItem(i.id,i.count,!1)&&GameGlobal.TotemsModel.activationTotems(t[this.index])}else if(this.addFiftyBtn.label==this.btnText2){var o=GameGlobal.TotemsModel.totemsDic,n=o[t[this.index]].id,a=o[t[this.index]].breach;if(a<=this.tabTotemsAttrsConfig[n].length){var r=this.tabTotemsAttrsConfig[n][a].tpcost;void 0!=r&&1==Checker.CheckItem(r[0].id,r[0].count,!1)&&GameGlobal.TotemsModel.breachTotems(t[this.index])}}}},t.prototype.updateModelShow=function(){this.currentLabel.text="",this.index=GameGlobal.TotemsModel.clickIndex;var e=GameGlobal.TotemsModel.tabIDArr(),t=GameGlobal.TotemsModel.totemsDic;void 0!=t[e[this.index]]?(this.currentGroup.visible=!0,this.upGroup.x=this.x2,this.ItemShow2(t),this.LabelShow2(t),this.describeLabel.text=this.text2,this.addFiftyBtn.label=this.btnText2):(this.currentLabel.text="",this.currentGroup.visible=!1,this.upGroup.x=this.x1,this.LabelShow(),this.ItemShow(),this.LabelShow2(t),this.describeLabel.text=this.text,this.addFiftyBtn.label=this.btnText)},t.prototype.ItemShow=function(){var e=GameGlobal.TotemsModel.tabIDArr(),t=this.tabTotemsActConfig[e[this.index]].cost[0];this.priceicon.setPriceData(t.id,t.count),this.itemName.text=GameGlobal.Config.ItemConfig[t.id].name,this.gotoVipLabel.SetId(t.id)},t.prototype.ItemShow2=function(e){var t=GameGlobal.TotemsModel.tabIDArr(),i=e[t[this.index]].id,o=e[t[this.index]].lv;if(o<=this.tabTotemsAttrsConfig[i].length){var n=e[t[this.index]].breach,a=this.tabTotemsAttrsConfig[i][n].tpcost;if(void 0!=a)this.priceicon.setPriceData(a[0].id,a[0].count),this.itemName.text=GameGlobal.Config.ItemConfig[a[0].id].name;else{var r=this.tabTotemsAttrsConfig[t[this.index]][o].cost[0];this.itemName.text=GameGlobal.Config.ItemConfig[r.id].name}}},t.prototype.LabelShow=function(){var e=GameGlobal.TotemsModel.tabIDArr(),t=e[this.index],i=this.tabTotemsAttrsConfig[t][0].attrpower;if(void 0!=i){var o=AttributeData.TYPE_TO_NAME[i[0].type],n=AttributeData.getAttStrByType(i[0]);"+undefined"!=n&&(this.currentLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+o+"</a><b color=0x00AD00>"+n+"</b>"))}},t.prototype.LabelShow2=function(e){var t=GameGlobal.TotemsModel.tabIDArr();if(void 0!=e[t[this.index]]){var i=e[t[this.index]].id,o=0,n=e[t[this.index]].breach;if(o=0==n?e[t[this.index]].lv:n,o<=this.tabTotemsAttrsConfig[i].length){var a=this.tabTotemsAttrsConfig[i][o-1].attrpower;if(void 0!=a){var r=AttributeData.TYPE_TO_NAME[a[0].type],s=AttributeData.getAttStrByType(a[0]);"+undefined"!=s&&(this.currentLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+r+"</a><b color=0x00AD00>"+s+"</b>"))}for(var l=void 0,c=0,u=0;u<this.tabTotemsAttrsConfig[i].length;u++){var p=this.tabTotemsAttrsConfig[i][u].attrpower;if(void 0!=a){if(void 0!=p&&a[0].value!=p[0].value&&a[0].value<=p[0].value){c=u,l=p;break}}else if(void 0!=p){l=p,c=u;break}}var h=AttributeData.TYPE_TO_NAME[l[0].type],d=AttributeData.getAttStrByType(l[0]);"+undefined"!=d&&(this.upLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+h+"</a><b color=0x00AD00>"+d+"</b>"),this.openlvLabel.text="("+this.tabTotemsAttrsConfig[i][c].level+"级激活)")}}else{for(var _=0,l=void 0,u=0;u<this.tabTotemsAttrsConfig[t[this.index]].length;u++){var p=this.tabTotemsAttrsConfig[t[this.index]][u].attrpower;if(void 0!=p){_=u,l=p;break}}var h=AttributeData.TYPE_TO_NAME[l[0].type],d=AttributeData.getAttStrByType(l[0]);"+undefined"!=d&&(this.upLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+h+"</a><b color=0x00AD00>"+d+"</b>"),this.openlvLabel.text="("+this.tabTotemsAttrsConfig[t[this.index]][_].level+"级激活)")}},t.prototype.UpdateContent=function(){},t.NAME="图腾",t}(BaseView);__reflect(TotemsActivationModelPanel.prototype,"TotemsActivationModelPanel");var TotemsInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.power=0,t.ID=0,t.titleName="详细属性",t.skinName="TotemsInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(e,t){this.ID=e,this.power=t,this.commonDialog.title=this.titleName,this.commonDialog.OnAdded(this),this.powerShow(),this.isShowLabel(),this.labelInfoShow(),this.nameShow(),this.totemsImgShow()},t.prototype.totemsImgShow=function(){var e=GameGlobal.Config.TotemsActConfig[this.ID].pic;this.totemsImg.source=e},t.prototype.nameShow=function(){var e=GameGlobal.Config.TotemsActConfig[this.ID].name;this.totemsName.text=e},t.prototype.powerShow=function(){this.totalPower.text=this.power.toString()},t.prototype.isShowLabel=function(){if(void 0!=GameGlobal.TotemsModel.totemsDic[this.ID]){this.LvGroup.visible=!0,this.noImg.visible=!1;var e=GameGlobal.TotemsModel.totemsDic[this.ID].lv;this.LvLabel.text=e+"级"}else this.LvGroup.visible=!1,this.noImg.visible=!0},t.prototype.labelInfoShow=function(){var e;if(void 0!=GameGlobal.TotemsModel.totemsDic[this.ID]){var t=GameGlobal.TotemsModel.totemsDic[this.ID].lv;e=GameGlobal.Config.TotemsAttrsConfig[this.ID][t].attr}else e=GameGlobal.Config.TotemsAttrsConfig[this.ID][0].attr;var i="",o="";void 0!=e[0]&&(i=AttributeData.TYPE_TO_NAME[e[0].type],o=AttributeData.getAttStrByType(e[0]),this.label0.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+i+"</a><b color=0x00AD00>"+o+"</b>")),void 0!=e[1]&&(i=AttributeData.TYPE_TO_NAME[e[1].type],o=AttributeData.getAttStrByType(e[1]),this.label1.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+i+"</a><b color=0x00AD00>"+o+"</b>")),void 0!=e[2]&&(i=AttributeData.TYPE_TO_NAME[e[2].type],o=AttributeData.getAttStrByType(e[2]),this.label2.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+i+"</a><b color=0x00AD00>"+o+"</b>"))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TotemsInfoPanel.prototype,"TotemsInfoPanel");var TotemsMainModelPanel=function(e){function t(){var t=e.call(this)||this;return t.checkBool=!1,t.One=1,t.Ten=10,t.Fifty=50,t.index=0,t.IDArr=[],t.skinName="TotemsMainModelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.tabTotemsActConfig=GameGlobal.Config.TotemsActConfig,this.tabTotemsAttrsConfig=GameGlobal.Config.TotemsAttrsConfig,this.tabTotemsBaoJiConfig=GameGlobal.Config.TotemsBaoJiConfig,this._AddClick(this.checkBox,this.onClick),this._AddClick(this.addBtn,this.onClick),this._AddClick(this.addTenBtn,this.onClick),this._AddClick(this.addFiftyBtn,this.onClick)},t.prototype.updateModelShow=function(){this.index=GameGlobal.TotemsModel.clickIndex,this.IDArr=GameGlobal.TotemsModel.tabIDArr(),this.totemsDic=GameGlobal.TotemsModel.totemsDic,this.updateLabel(),this.updateBar(),this.updaeConsume(),this.updatePriceicon(),this.updateDescribe()},t.prototype.updateDescribe=function(){this.describeLabel.text="";var e=this.IDArr[this.index];if(void 0!=this.totemsDic[e]){var t=this.totemsDic[e].todayId,i=this.totemsDic[e].todayNum;if(void 0!=this.tabTotemsBaoJiConfig[t]){var o=this.tabTotemsBaoJiConfig[t].num,n=this.tabTotemsBaoJiConfig[t].rat,a=o-i;void 0!=a&&void 0!=n&&(this.describeLabel.text="再升级"+a+"次必定"+n+"倍暴击,累计次数次日重置")}}},t.prototype.updatePriceicon=function(){var e=this.tabTotemsActConfig[this.IDArr[this.index]].cost[0];this.priceicon.type=e.id,this.priceicon.price=GameGlobal.UserBag.GetCount(e.id)},t.prototype.updaeConsume=function(){var e=this.IDArr[this.index];if(void 0!=this.totemsDic[e]){var t=this.totemsDic[e].lv;t<this.tabTotemsAttrsConfig[e].length&&(this.cost=this.tabTotemsAttrsConfig[e][t].cost,this.consumeLabel.Set(this.cost))}},t.prototype.updateBar=function(){if(void 0!=this.totemsDic[this.IDArr[this.index]]){var e=this.IDArr[this.index],t=this.totemsDic[e].lv;if(t<=this.tabTotemsAttrsConfig[e].length){var i=this.tabTotemsAttrsConfig[e][t].exp;this.bar.maximum=this.tabTotemsAttrsConfig[e][t-1].proexp,this.bar.value=this.totemsDic[e].upNum*i}}},t.prototype.updateLabel=function(){if(this.currentLabel.text="",void 0!=this.totemsDic[this.IDArr[this.index]]){var e=this.totemsDic[this.IDArr[this.index]].id,t=this.totemsDic[this.IDArr[this.index]].breach,i=0;i=0==t?this.totemsDic[this.IDArr[this.index]].lv:t;var o=void 0,n=void 0,a=0;if(i<=this.tabTotemsAttrsConfig[e].length){if(o=this.tabTotemsAttrsConfig[e][i-1].attrpower,void 0!=o){var r=AttributeData.TYPE_TO_NAME[o[0].type],s=AttributeData.getAttStrByType(o[0]);"+undefined"!=s&&(this.currentLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+r+"</a><b color=0x00AD00>"+s+"</b>"))}for(var l=0;l<this.tabTotemsAttrsConfig[e].length;l++){var c=this.tabTotemsAttrsConfig[e][l].attrpower;if(void 0!=o){if(void 0!=c&&o[0].value!=c[0].value&&o[0].value<=c[0].value){a=l,n=c;break}}else if(void 0!=c){n=c,a=l;break}}var u=AttributeData.TYPE_TO_NAME[n[0].type],p=AttributeData.getAttStrByType(n[0]);"+undefined"!=p&&(this.upLabel.textFlow=(new egret.HtmlTextParser).parser("<a color=0x6E330B>"+u+"</a><b color=0x00AD00>"+p+"</b>"),this.openlvLabel.text="("+this.tabTotemsAttrsConfig[e][a].level+"级激活)")}}},t.prototype.onClick=function(e){switch(e.currentTarget){case this.addBtn:1==Checker.CheckItem(this.cost[0].id,this.cost[0].count*this.One,this.checkBool)&&1==Checker.Money(this.cost[1].id,this.cost[1].count*this.One,!0)&&GameGlobal.TotemsModel.upTotems(this.IDArr[this.index],this.One,this.checkBool);break;case this.addTenBtn:1==Checker.CheckItem(this.cost[0].id,this.cost[0].count*this.Ten,this.checkBool)&&1==Checker.Money(this.cost[1].id,this.cost[1].count*this.Ten,!0)&&GameGlobal.TotemsModel.upTotems(this.IDArr[this.index],this.Ten,this.checkBool);break;case this.addFiftyBtn:1==Checker.CheckItem(this.cost[0].id,this.cost[0].count*this.Fifty,this.checkBool)&&1==Checker.Money(this.cost[1].id,this.cost[1].count*this.Fifty,!0)&&GameGlobal.TotemsModel.upTotems(this.IDArr[this.index],this.Fifty,this.checkBool);
break;case this.checkBox:this.checkBool=this.checkBox.selected}},t.prototype.UpdateContent=function(){},t.NAME="图腾",t}(BaseView);__reflect(TotemsMainModelPanel.prototype,"TotemsMainModelPanel");var TotemsMainPanel=function(e){function t(){var t=e.call(this)||this;return t.itemCount=8,t.power=0,t.IDArr=[],t.skinName="TotemsMainSkin",t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.childrenCreated=function(){this.totemsActTab=GameGlobal.Config.TotemsActConfig,this.totemsAttrsTab=GameGlobal.Config.TotemsAttrsConfig,this.observe(MessageDef.TOTEMS_UPDATEACTIVATION,this.updateUpLvMes),this.IDArr=GameGlobal.TotemsModel.tabIDArr(),this.totemsMain.bar.slideDuration=0},t.prototype.OnOpen=function(){this.itemCount=this.totemsGroup.numChildren,this.showImg();for(var e=0;e<this.itemCount;e++)this._AddClick(this.totemsGroup.getChildAt(e),this.onClick);this._AddClick(this.checkAttr,this.onClick)},t.prototype.onClick=function(e){switch(e.currentTarget){case this.totemsGroup.getChildAt(0):GameGlobal.TotemsModel.clickIndex=0,this.updateOther(0);break;case this.totemsGroup.getChildAt(1):GameGlobal.TotemsModel.clickIndex=1,this.updateOther(1);break;case this.totemsGroup.getChildAt(2):GameGlobal.TotemsModel.clickIndex=2,this.updateOther(2);break;case this.totemsGroup.getChildAt(3):GameGlobal.TotemsModel.clickIndex=3,this.updateOther(3);break;case this.totemsGroup.getChildAt(4):GameGlobal.TotemsModel.clickIndex=4,this.updateOther(4);break;case this.totemsGroup.getChildAt(5):GameGlobal.TotemsModel.clickIndex=5,this.updateOther(5);break;case this.totemsGroup.getChildAt(6):GameGlobal.TotemsModel.clickIndex=6,this.updateOther(6);break;case this.totemsGroup.getChildAt(7):GameGlobal.TotemsModel.clickIndex=7,this.updateOther(7);break;case this.checkAttr:ViewManager.ins().open(TotemsInfoPanel,this.IDArr[GameGlobal.TotemsModel.clickIndex],this.power)}},t.prototype.showImg=function(){var e=0,t=0;for(var i in this.totemsActTab){this.totemsActTab[i];t<this.itemCount&&(void 0!=GameGlobal.TotemsModel.totemsDic[i]&&0==e&&(e=t),this.isShowIconSign(t),t++)}GameGlobal.TotemsModel.clickIndex=e,this.updateOther(e),this.totemsGroup.getChildAt(e).img_select.visible=!0,this.activationLabel.text=this.totemsDicCount().toString(),this.updateRedPoint()},t.prototype.updateUpLvMes=function(){this.updateOther(GameGlobal.TotemsModel.clickIndex)},t.prototype.updateOther=function(e){this.updateRedPoint(),this.updatePower(e),this.updateTotemsName(e),this.updateTotemsActivation(e),this.isShowIconSign(e),this.updateTotemsLogo(e),this.updateSelectImg(e),this.updateModelView(e);var t=0,i=this.totemsAttrsTab[this.IDArr[e]].length;void 0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]]&&(t=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].lv),i>t&&(this.totemsActivation.updateModelShow(),this.totemsMain.updateModelShow()),this.activationLabel.text=this.totemsDicCount().toString()},t.prototype.updateSelectImg=function(e){for(var t=0;t<this.itemCount;t++)this.totemsGroup.getChildAt(t).img_select.visible=!1;this.totemsGroup.getChildAt(e).img_select.visible=!0},t.prototype.updateRedPoint=function(){var e=GameGlobal.TotemsModel.mRedPoint.mRedPointMap;for(var t in e){var i=GameGlobal.TotemsModel.DicIndex(t,this.IDArr);this.updateRedItemGlobal(i,e[t])}},t.prototype.updateRedItemGlobal=function(e,t){void 0===t&&(t=!1),this.totemsGroup.getChildAt(e).redPoint.visible=t},t.prototype.isShowIconSign=function(e){var t=this.totemsActTab[this.IDArr[e]];void 0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]]?this.totemsGroup.getChildAt(e).img_icon.source=t.icon:this.totemsGroup.getChildAt(e).img_icon.source=t.icon+"_s"},t.prototype.updateTotemsName=function(e){this.nameLabel.text=this.totemsActTab[this.IDArr[e]].name},t.prototype.updateTotemsActivation=function(e){if(void 0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]]){this.noImg.visible=!1,this.LvGroup.visible=!0;var t=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].lv,i=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].breach;0==i?this.LvLabel.text=t+"级":this.LvLabel.text=i+"级"}else this.LvGroup.visible=!1,this.noImg.visible=!0},t.prototype.updatePower=function(e){var t=this.calculationPower(e);this.power=t,this.totalPower.text=t.toString();for(var i=0,o=0;o<this.IDArr.length;o++)void 0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[o]]&&(i+=this.calculationPower(o,!1));this.powerLabel.text=i.toString()},t.prototype.calculationPower=function(e,t){void 0===t&&(t=!0);var i,o,n=0;if(void 0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]]){var a=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].breach,r=0;r=0==a?GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].lv:a,void 0!=this.totemsAttrsTab[this.IDArr[e]][r-1]&&(i=this.totemsAttrsTab[this.IDArr[e]][r-1].attr,o=this.totemsAttrsTab[this.IDArr[e]][r-1].attrpower)}else 1==t&&(i=this.totemsAttrsTab[this.IDArr[e]][0].attr,o=this.totemsAttrsTab[this.IDArr[e]][0].attrpower);return void 0!=i&&(n+=ItemConfig.CalcAttrScoreValue(i)),void 0!=o&&(n+=ItemConfig.CalcAttrScoreValue(o)),n},t.prototype.updateTotemsLogo=function(e){this.totemsImg.source=this.totemsActTab[this.IDArr[e]].pic},t.prototype.updateModelView=function(e){if(this.LvMaxLabel.visible=!1,void 0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]]){var t=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].lv,i=this.totemsAttrsTab[this.IDArr[e]].length;i>t?0!=GameGlobal.TotemsModel.totemsDic[this.IDArr[e]].breach?(this.totemsMain.visible=!1,this.totemsActivation.visible=!0):(this.totemsMain.visible=!0,this.totemsActivation.visible=!1):(this.totemsMain.visible=!1,this.totemsActivation.visible=!1,this.LvMaxLabel.visible=!0)}else this.totemsMain.visible=!1,this.totemsActivation.visible=!0},t.prototype.totemsDicCount=function(){var e=0;for(var t in GameGlobal.TotemsModel.totemsDic)void 0!=GameGlobal.TotemsModel.totemsDic[t]&&(e+=1);return e},t.NAME="图腾",t}(BaseView);__reflect(TotemsMainPanel.prototype,"TotemsMainPanel",["ICommonWindowTitle"]);var TotemsItemCom=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.img_select.visible=!1},t}(eui.Component);__reflect(TotemsItemCom.prototype,"TotemsItemCom");var TotemsMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(TotemsMainPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this,e[0]||0),this.observe(MessageDef.TOTEMS_UPDATEACTIVATION,this.UpdateTabBtnRedPoint),this.observe(MessageDef.TOTEMS_INFO,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.TotemsModel.mRedPoint.showRedPoint())},t.prototype.OnOpenIndex=function(e){return!0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=GameGlobal.Config.TotemsBaseConfig.openlv;return Deblocking.Check(i,!1)?!0:!1},t.NAME="图腾",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TotemsMainWin.prototype,"TotemsMainWin");var TreasureHuntModel=function(e){function t(){var t=e.call(this)||this;return t.RegNetMsgs(S2cProtocol.sc_luck_info,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_luck_ret,t._DoRet),t}return __extends(t,e),t.prototype.IsFree=function(){return this.mInfo?this.mInfo.daylist&&(null==this.mInfo.daylist[1]||0==this.mInfo.daylist[1]):!1},t.prototype.GetRound=function(){return this.mInfo?this.mInfo.round||1:1},t.prototype._DoInitInfo=function(e){this.mInfo=e,e.equiprecords?e.equiprecords=e.equiprecords.reverse():e.equiprecords=[],SortTools.sortMap(e.records,"time",!1),GameGlobal.MessageCenter.dispatch(MessageDef.LUCK_RECORD)},t.prototype._DoRet=function(e){(1==e.type||2==e.type||3==e.type)&&(ViewManager.ins().isShow(TreasureResultPanel)?ViewManager.ins().open(TreasureResultPanel,e):GameGlobal.MessageCenter.dispatch(MessageDef.LUCK_RET_ANIM,e),GameGlobal.MessageCenter.dispatch(MessageDef.LUCK_RET_SUC))},t.prototype.SendTreasure=function(e,t){var i=new Sproto.cs_luck_draw_request;i.type=e,i.index=t,this.Rpc(C2sProtocol.cs_luck_draw,i)},t.prototype.SendGetInfo=function(){this.Rpc(C2sProtocol.cs_luck_info)},t.prototype.GetLuck=function(){return this.mInfo?this.mInfo.lucky||0:0},t}(BaseSystem);__reflect(TreasureHuntModel.prototype,"TreasureHuntModel");var TotemsGoodLuckMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.Open=function(e){ViewManager.ins().open(ActivityRewardShowWin,0,e)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=[];Deblocking.Check(DeblockingType.TYPE_137,!0)?o.push(TabView.CreateTabViewData(TotemsGoodLuckWin)):1==i&&(i=0),o.push(TabView.CreateTabViewData(TotemsGoodLuckWin2)),this.mCommonWindowBg.SetTabView(o),this.mCommonWindowBg.OnAdded(this,i)},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.GetAwardList=function(e){return 0==e?ActivityRewardShowConst.GetAwardListByActivityType(this.mType):1==e?ActivityRewardShowConst.GetRankAwardListByActivityType(this.mType):2==e?ActivityRewardShowConst.GetDragonRankAwardListByActivityType(this.mType):void 0},t.prototype.GetImgSource=function(){return ActivityRewardShowConst.GetImageSourceByActivityType(this.mType)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TotemsGoodLuckMainWin.prototype,"TotemsGoodLuckMainWin");var TotemsGoodLuckWin=function(e){function t(){var t=e.call(this)||this;return t.m_PosIndex=0,t.effDic={},t.skinName="TotemsGoodLuckSkin",t.list.itemRenderer=TreasureLabelItem,t._AddClick(t.btn0,t._OnClick),t._AddClick(t.btn1,t._OnClick),t._AddClick(t.btn2,t._OnClick),t._AddClick(t.getway,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=GameGlobal.Config.EquipLotteryConfig,t=e[1][0];this.priceIcon0.type=t.cost.id,this.priceIcon0.price=t.cost.count,this.rewardIcon0.type=t.rewards[0].id,this.rewardIcon0.price=t.rewards[0].count;var i=e[2][0];this.priceIcon1.type=i.cost.id,this.priceIcon1.price=i.cost.count,this.rewardIcon1.type=i.rewards[0].id,this.rewardIcon1.price=i.rewards[0].count;var o=e[3][0];this.priceIcon2.type=o.cost.id,this.priceIcon2.price=o.cost.count,this.rewardIcon2.type=o.rewards[0].id,this.rewardIcon2.price=o.rewards[0].count;for(var n=this.GetShowItmes(),a=0;a<this.group.numChildren;a++){var r=this.group.getChildAt(a),s=n[a];if(s){r.data=s;for(var l=GameGlobal.Config.EquipLotteryBaseConfig.effitem,c=0;c<l.length;c++)l[c]==s.id&&this.addTypeEff(r,s)}}},t.prototype.UpdateContent=function(){},t.prototype.GetShowItmes=function(){return GameGlobal.Config.EquipLotteryBaseConfig.showitem1||[]},t.prototype.GetShowText=function(){return GameGlobal.Config.EquipLotteryBaseConfig.lucktext1||""},t.prototype.OnOpen=function(){this.observe(MessageDef.LUCK_RET_ANIM,this._StartAnim),this.observe(MessageDef.LUCK_RECORD,this._UpdateInfo),this._UpdateInfo(),this.timeDoEff(),GameGlobal.TreasureHuntModel.SendGetInfo()},t.prototype.OnClose=function(){this.mRetData&&(ViewManager.ins().open(TreasureResultPanel,this.mRetData),this.mRetData=null)},t.prototype._UpdateInfo=function(){var e=GameGlobal.TreasureHuntModel.mInfo;e&&e.equiprecords&&(this.list.dataProvider=new eui.ArrayCollection(e.equiprecords))},t.prototype._StartAnim=function(e){var t=this;this.mRetData=e,this.selectImg.visible=!0,this.m_PosIndex=0,this.GetPos(0),TimerManager.ins().doTimer(80,MathUtils.limitInteger(8,18),this._UpdateAnimPos,this,function(){t.mRetData&&(ViewManager.ins().open(TreasureResultPanel,t.mRetData),t.mRetData=null,t.selectImg.visible=!1)})},t.prototype.GetPos=function(e){var t=this.group.getChildAt(e);if(t){var i=egret.$TempPoint;t.localToGlobal(t.itemIcon.x,t.itemIcon.y,i),this.globalToLocal(i.x,i.y,i),this.selectImg.x=i.x-10,this.selectImg.y=i.y-10;var o=0==e||6==e||3==e||9==e?1:.85;this.selectImg.scaleX=this.selectImg.scaleY=o}return null},t.prototype._UpdateAnimPos=function(){this.GetPos(++this.m_PosIndex%this.group.numChildren)},t.prototype.addEff=function(e,t,i){var o=new MovieClip;return o.loadUrl(ResDataPath.GetUIEffePath2(t),!0,i),o.x=55,o.y=53,o.scaleX=1.1,o.scaleY=1.1,e.addChild(o),o},t.prototype.addTypeEff=function(e,t){var i=GlobalConfig.ins().ItemConfig[t.id],o=i.quality;4==o?(this.addEff(e,"ui_eff_q002",0),this.addEff(e,"ui_eff_q003",1),this.effDic[o]=e):5==o&&(this.addEff(e,"ui_eff_q001",0),this.addEff(e,"ui_eff_q003",1),this.effDic[o]=e)},t.prototype.timeDoEff=function(){var e=this;TimerManager.ins().doTimer(3e3,0,function(){for(var t in e.effDic)"4"==t&&e.addEff(e.effDic[t],"ui_eff_q003",1),"5"==t&&e.addEff(e.effDic[t],"ui_eff_q003",1)},this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btn0:this.BuyHunt(1);break;case this.btn1:this.BuyHunt(2);break;case this.btn2:this.BuyHunt(3);break;case this.getway:for(var t=GameGlobal.Config.EquipLotteryBaseConfig.text,i=[],o=0,n=t;o<n.length;o++){var a=n[o],r=GameGlobal.Config.ItemConfig[a.id];r&&i.push(StringUtils.repeatStr("   ",5)+this.complementByChar(r.name,12)+a.rate+"%")}ActivityDescPanel.Show(i.join("\n"),"奖励说明")}},t.prototype.complementByChar=function(e,t){e+="";var i=e.length;return e+StringUtils.repeatStr("   ",t-i)},t.prototype.BuyHunt=function(e){if(!this.mRetData){var t=GameGlobal.Config.EquipLotteryConfig[e][0];Checker.Money(t.cost.id,t.cost.count)&&GameGlobal.TreasureHuntModel.SendTreasure(2,e)}},t.NAME="神装寻宝",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseView);__reflect(TotemsGoodLuckWin.prototype,"TotemsGoodLuckWin",["ICommonWindowTitle"]);var TotemsGoodLuckWin2=function(e){function t(){var t=e.call(this)||this;return t.m_PosIndex=0,t.effDic={},t.skinName="TotemsGoodLuckSkin",t.list.itemRenderer=TreasureLabelItem,t._AddClick(t.btn0,t._OnClick),t._AddClick(t.btn1,t._OnClick),t._AddClick(t.btn2,t._OnClick),t._AddClick(t.getway,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){GameGlobal.Config.AccSignInConfig;var e=GameGlobal.Config.TotemsLotteryConfig,t=e[1][0];this.priceIcon0.type=t.cost.id,this.priceIcon0.price=t.cost.count,this.rewardIcon0.type=t.rewards[0].id,this.rewardIcon0.price=t.rewards[0].count;var i=e[2][0];this.priceIcon1.type=i.cost.id,this.priceIcon1.price=i.cost.count,this.rewardIcon1.type=i.rewards[0].id,this.rewardIcon1.price=i.rewards[0].count;var o=e[3][0];this.priceIcon2.type=o.cost.id,this.priceIcon2.price=o.cost.count,this.rewardIcon2.type=o.rewards[0].id,this.rewardIcon2.price=o.rewards[0].count;for(var n=this.GetShowItmes(),a=0;a<this.group.numChildren;a++){var r=this.group.getChildAt(a),s=n[a];if(s){r.data=s;for(var l=GameGlobal.Config.TotemsLotteryBaseConfig.effitem,c=0;c<l.length;c++)l[c]==s.id&&this.addTypeEff(r,s)}}},t.prototype.GetShowItmes=function(){return GameGlobal.Config.TotemsLotteryBaseConfig.showitem1||[]},t.prototype.GetShowText=function(){return GameGlobal.Config.TotemsLotteryBaseConfig.lucktext1||""},t.prototype.OnOpen=function(){this.observe(MessageDef.LUCK_RET_ANIM,this._StartAnim),this.observe(MessageDef.LUCK_RECORD,this._UpdateInfo),this._UpdateInfo(),this.timeDoEff(),GameGlobal.TreasureHuntModel.SendGetInfo()},t.prototype.OnClose=function(){this.mRetData&&(ViewManager.ins().open(TreasureResultPanel,this.mRetData),this.mRetData=null)},t.prototype.UpdateContent=function(){},t.prototype._UpdateInfo=function(){var e=GameGlobal.TreasureHuntModel.mInfo;e&&e.records&&(this.list.dataProvider=new eui.ArrayCollection(e.totemsrecords.reverse()))},t.prototype._StartAnim=function(e){var t=this;this.mRetData=e,this.selectImg.visible=!0,this.m_PosIndex=0,this.GetPos(0),TimerManager.ins().doTimer(80,MathUtils.limitInteger(8,18),this._UpdateAnimPos,this,function(){t.mRetData&&(ViewManager.ins().open(TreasureResultPanel,t.mRetData),t.mRetData=null,t.selectImg.visible=!1)})},t.prototype.GetPos=function(e){var t=this.group.getChildAt(e);if(t){var i=egret.$TempPoint;t.localToGlobal(t.itemIcon.x,t.itemIcon.y,i),this.globalToLocal(i.x,i.y,i),this.selectImg.x=i.x-10,this.selectImg.y=i.y-10;var o=0==e||6==e||3==e||9==e?1:.85;this.selectImg.scaleX=this.selectImg.scaleY=o}return null},t.prototype._UpdateAnimPos=function(){this.GetPos(++this.m_PosIndex%this.group.numChildren)},t.prototype.addEff=function(e,t,i){var o=new MovieClip;return o.loadUrl(ResDataPath.GetUIEffePath2(t),!0,i),o.x=55,o.y=53,o.scaleX=1.1,o.scaleY=1.1,e.addChild(o),o},t.prototype.addTypeEff=function(e,t){var i=GlobalConfig.ins().ItemConfig[t.id],o=i.quality;4==o?(this.addEff(e,"ui_eff_q002",0),this.addEff(e,"ui_eff_q003",1),this.effDic[o]=e):5==o&&(this.addEff(e,"ui_eff_q001",0),this.addEff(e,"ui_eff_q003",1),this.effDic[o]=e)},t.prototype.timeDoEff=function(){var e=this;TimerManager.ins().doTimer(3e3,0,function(){for(var t in e.effDic)"4"==t&&e.addEff(e.effDic[t],"ui_eff_q003",1),"5"==t&&e.addEff(e.effDic[t],"ui_eff_q003",1)},this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btn0:this.BuyHunt(1);break;case this.btn1:this.BuyHunt(2);break;case this.btn2:this.BuyHunt(3);break;case this.getway:for(var t=GameGlobal.Config.TotemsLotteryBaseConfig.text,i=[],o=0,n=t;o<n.length;o++){var a=n[o],r=GameGlobal.Config.ItemConfig[a.id];r&&i.push(StringUtils.repeatStr("   ",5)+this.complementByChar(r.name,12)+a.rate+"%")}ActivityDescPanel.Show(i.join("\n"),"奖励说明")}},t.prototype.complementByChar=function(e,t){e+="";var i=e.length;return e+StringUtils.repeatStr("   ",t-i)},t.prototype.BuyHunt=function(e){if(!this.mRetData){var t=GameGlobal.Config.TotemsLotteryConfig[e][0];Checker.Money(t.cost.id,t.cost.count)&&GameGlobal.TreasureHuntModel.SendTreasure(3,e)}},t.NAME="图腾寻宝",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseView);__reflect(TotemsGoodLuckWin2.prototype,"TotemsGoodLuckWin2",["ICommonWindowTitle"]);var TreasureHuntMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(TreasurePanel)]),this.mCommonWindowBg.title="寻宝",this.mCommonWindowBg.tabBar.visible=!1},t.prototype.OnOpen=function(){this.mCommonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TreasureHuntMainPanel.prototype,"TreasureHuntMainPanel",["ICommonWindow"]);var TreasurePanel=function(e){function t(){var t=e.call(this)||this;return t.mRoundId=-1,t.m_PosIndex=0,t.effDic={},t.skinName="TreasureHuntMainSkin",t.list.itemRenderer=TreasureLabelItem,t._AddClick(t.btn0,t._OnClick),t._AddClick(t.btn1,t._OnClick),t._AddClick(t.btn2,t._OnClick),t._AddClick(t.getway,t._OnClick),t._AddClick(t.shopBtn,t._OnClick),t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=GameGlobal.Config.LuckConfig,t=e[1][0];this.priceIcon0.type=t.cost.id,this.priceIcon0.price=t.cost.count,this.rewardIcon0.type=t.rewards[0].id,this.rewardIcon0.price=t.rewards[0].count;var i=e[2][0];this.priceIcon1.type=i.cost.id,this.priceIcon1.price=i.cost.count,this.rewardIcon1.type=i.rewards[0].id,this.rewardIcon1.price=i.rewards[0].count;var o=e[3][0];this.priceIcon2.type=o.cost.id,this.priceIcon2.price=o.cost.count,this.rewardIcon2.type=o.rewards[0].id,this.rewardIcon2.price=o.rewards[0].count,this.myPrice.type=SHOP_MONEY.treasurePoint,this.luckbar.maximum=GameGlobal.Config.LuckBaseConfig.luckpro,this.luckbar.value=0},t.prototype.UpdateShowItems=function(){var e=GameGlobal.TreasureHuntModel.GetRound();if(this.mRoundId!=e){this.mRoundId=e,this.ClearTypeEff();for(var t=this.GetShowItmes(),i=0;i<this.group.numChildren;i++){var o=this.group.getChildAt(i),n=t[i];if(n){o.data=n;for(var a=GameGlobal.Config.LuckBaseConfig.effitem,r=0;r<a.length;r++)a[r]==n.id&&this.addTypeEff(o,n)}}this.luckLabel.textFlow=TextFlowMaker.generateTextFlow(this.GetShowText())}},t.prototype.GetShowItmes=function(){var e=GameGlobal.TreasureHuntModel.GetRound();return GameGlobal.Config.LuckBaseConfig["showitem"+e]||[]},t.prototype.GetShowText=function(){var e=GameGlobal.TreasureHuntModel.GetRound();return GameGlobal.Config.LuckBaseConfig["lucktext"+e]||""},t.prototype.UpdateLuckBar=function(){var e=GameGlobal.TreasureHuntModel.IsFree();this.priceIcon1.visible=!e,this.freeLabel.visible=e,this.luckbar.value=GameGlobal.TreasureHuntModel.GetLuck(),UIHelper.ShowRedPoint(this.btn1,e)},t.prototype.OnOpen=function(){this.observe(MessageDef.LUCK_RET_ANIM,this._StartAnim),this.observe(MessageDef.LUCK_RECORD,this._UpdateInfo),this.observe(MessageDef.LUCK_RET_SUC,this._UpdateRetData),this.observe(MessageDef.SHOP_CHANGE,this._UpdateMyPrice),this._UpdateRetData(),this._UpdateInfo(),this.timeDoEff(),GameGlobal.TreasureHuntModel.SendGetInfo(),this.fristGetItem.data=GameGlobal.Config.LuckBaseConfig.firstitme},t.prototype.OnClose=function(){this.mRetData&&(ViewManager.ins().open(TreasureResultPanel,this.mRetData),this.mRetData=null)},t.prototype._UpdateMyPrice=function(){this.myPrice.price=GameGlobal.UserBag.GetCount(SHOP_MONEY.treasurePoint)},t.prototype._UpdateInfo=function(){this.UpdateShowItems(),this.UpdateLuckBar(),this.myPrice.price=GameGlobal.UserBag.GetCount(SHOP_MONEY.treasurePoint);var e=GameGlobal.TreasureHuntModel.mInfo;e&&e.records&&(this.list.dataProvider=new eui.ArrayCollection(e.records))},t.prototype._UpdateRetData=function(){var e=GameGlobal.TreasureHuntModel.mInfo;this.fristGet.visible=e&&(e.counts[2]||0)<1},t.prototype._StartAnim=function(e){var t=this;this.mRetData=e,this.selectImg.visible=!0,this.m_PosIndex=0,this.GetPos(0),TimerManager.ins().doTimer(80,MathUtils.limitInteger(8,18),this._UpdateAnimPos,this,function(){t.mRetData&&(ViewManager.ins().open(TreasureResultPanel,t.mRetData),t.mRetData=null,t.selectImg.visible=!1)})},t.prototype.GetPos=function(e){var t=this.group.getChildAt(e);if(t){var i=egret.$TempPoint;t.localToGlobal(t.itemIcon.x,t.itemIcon.y,i),this.globalToLocal(i.x,i.y,i),this.selectImg.x=i.x-10,this.selectImg.y=i.y-10;var o=0==e||6==e||3==e||9==e?1:.85;this.selectImg.scaleX=this.selectImg.scaleY=o}return null},t.prototype._UpdateAnimPos=function(){this.GetPos(++this.m_PosIndex%this.group.numChildren)},t.prototype.addEff=function(e,t,i){var o=new MovieClip;return o.loadUrl(ResDataPath.GetUIEffePath2(t),!0,i),o.x=55,o.y=53,o.scaleX=1.1,o.scaleY=1.1,e.addChild(o),o},t.prototype.addTypeEff=function(e,t){var i=GlobalConfig.ins().ItemConfig[t.id],o=i.quality;if(4==o){var n=this.addEff(e,"ui_eff_q002",0),a=this.addEff(e,"ui_eff_q003",1);this.effDic[o]={item:e,m1:n,m2:a}}else if(5==o){var n=this.addEff(e,"ui_eff_q001",0),a=this.addEff(e,"ui_eff_q003",1);this.effDic[o]={item:e,m1:n,m2:a}}},t.prototype.ClearTypeEff=function(){for(var e in this.effDic){var t=this.effDic[e];t.m1&&(t.m1.ClearCache(),DisplayUtils.removeFromParent(t.m1)),t.m2&&(t.m2.ClearCache(),DisplayUtils.removeFromParent(t.m2))}this.effDic={}},t.prototype.timeDoEff=function(){var e=this;TimerManager.ins().doTimer(3e3,0,function(){for(var t in e.effDic){var i=e.effDic[t];"4"==t?e.addEff(i.item,"ui_eff_q003",1):"5"==t&&e.addEff(i.item,"ui_eff_q003",1)}},this)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btn0:this.BuyHunt(1);break;case this.btn1:this.BuyHunt(2);break;case this.btn2:this.BuyHunt(3);break;case this.getway:for(var t=GameGlobal.Config.LuckBaseConfig.text,i=[],o=0,n=t;o<n.length;o++){var a=n[o],r=GameGlobal.Config.ItemConfig[a.id];r&&i.push(StringUtils.repeatStr("   ",5)+this.complementByChar(r.name,12)+a.rate+"%")}ActivityDescPanel.Show(i.join("\n"),"奖励说明");break;case this.shopBtn:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_TREASURE_HUNT])}},t.prototype.complementByChar=function(e,t){e+="";var i=e.length;return e+StringUtils.repeatStr("   ",t-i)},t.prototype.BuyHunt=function(e){if(!this.mRetData){var t=!1;if(2==e&&GameGlobal.TreasureHuntModel.IsFree())t=!0;else{var i=GameGlobal.Config.LuckConfig[e][0];Checker.Money(i.cost.id,i.cost.count)&&(t=!0)}t&&GameGlobal.TreasureHuntModel.SendTreasure(1,e)}},t.NAME="寻宝",t}(BaseView);__reflect(TreasurePanel.prototype,"TreasurePanel");var TreasureLabelItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,i=GlobalConfig.ins().ItemConfig[e.reward.id];if(null!=i){var o="";e.reward.count&&(o="x"+e.reward.count);var n="";n=0==i.type?t.makeNameList(i):i.name,this.label.textFlow=TextFlowMaker.generateTextFlow("<font color = '#1848ff'>"+e.name+"</font> 获得 <font color='"+ItemBase.QUALITY_COLOR[i.quality]+"'>"+n+o+"</font>")}},t.makeNameList=function(e){var t="";return t=e.name,t+=e.zsLevel>0?"("+e.zsLevel+"阶 ":"("+e.level+"级 ",t+=")"},t}(eui.ItemRenderer);__reflect(TreasureLabelItem.prototype,"TreasureLabelItem");var TreasureResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TreasureResultSkin",t.group.itemRenderer=ItemBase,t._AddClick(t.bg,t.CloseSelf),t._AddClick(t.btn0,t.CloseSelf),t._AddClick(t.btn1,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.data=i;var o=GameGlobal.Config.LuckConfig[i.index][0];this.priceIcon.type=o.cost.id,this.priceIcon.price=o.cost.count,this.btn1.label="购买"+o.count+"个",this.group.dataProvider=new eui.ArrayCollection(i.rewards);for(var n=0,a=i.rewards;n<a.length;n++){var r=a[n];UserBag.ShowItemTips(r.id,r.count)}this.mTime=10,this.AddTimer(1e3,this.mTime,this.UpdateTime),this.UpdateTime()},t.prototype._OnClick=function(){var e=GameGlobal.Config.LuckConfig[this.data.index][0];this.mTime<5?Checker.Money(e.cost.id,e.cost.count)&&GameGlobal.TreasureHuntModel.SendTreasure(this.data.type,this.data.index):UserTips.ins().showTips("您的操作过快|C:0xFF0000&T:("+(this.mTime-5)+"s)|过后再尝试")},t.prototype.UpdateTime=function(){this.timeLabel.textFlow=TextFlowMaker.generateTextFlow("点击任意区域关闭|C:0x019704&T:("+--this.mTime+"s)"),this.mTime<0&&this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TreasureResultPanel.prototype,"TreasureResultPanel");var TsumKoBaseModel=function(e){function t(){var t=e.call(this)||this;return t.info_helpReward=0,t.info_buy={},t.info_todayClearlist={},t.recordId=0,t.chapterid=0,t.chatXiD=0,t.isCurBuy=!1,t.isCurClear=!1,t.regNetMsg(S2cProtocol.sc_fuben_eightyOneHard_info,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_fuben_eightyOneHard_info_update,t._DoUpdate),t}return __extends(t,e),t.prototype.changeId=function(){0!=this.chatXiD&&(this.chapterid=Math.ceil(this.chatXiD/9),this.recordId=this.chatXiD)},t.prototype._DoInitInfo=function(e){this.info_clear=e.clear,this.info_helpReward=e.helpReward;for(var t=0,i=e.buy||[];t<i.length;t++){var o=i[t];this.info_buy[o.key1]=o}for(var n=0,a=e.todayClearlist||[];n<a.length;n++){var o=a[n];this.info_todayClearlist[o.key1]=o}},t.prototype._DoUpdate=function(e){void 0!=e.clear&&(this.info_clear=e.clear),void 0!=e.clear&&(this.info_helpReward=e.helpReward);for(var t=0,i=e.buy||[];t<i.length;t++){var o=i[t];this.info_buy[o.key1]=o,this.isCurBuy=!0}for(var n=0,a=e.todayClearlist||[];n<a.length;n++){var o=a[n];this.info_todayClearlist[o.key1]=o,this.isCurClear=!0}MessageCenter.ins().dispatch(MessageDef.TSUMKO_UPDATE_CHECKPOINTLIST),MessageCenter.ins().dispatch(MessageDef.TSUMKO_UPDATE_LIST),MessageCenter.ins().dispatch(MessageDef.ClOSETSUMKOBASEBAGITEMPLANEL)},t.prototype.SendSweep=function(e){var t=new Sproto.cs_eightyOneHard_sweep_request;t.id=e,this.Rpc(C2sProtocol.cs_eightyOneHard_sweep,t)},t.prototype.SendSweepAll=function(){var e=new Sproto.cs_eightyOneHard_sweep_all_request;this.Rpc(C2sProtocol.cs_eightyOneHard_sweep_all,e)},t.prototype.SendBuy=function(e){var t=new Sproto.cs_eightyOneHard_buy_request;t.id=e,this.Rpc(C2sProtocol.cs_eightyOneHard_buy,t)},t.prototype.IsGatePass=function(e,t){var i=this.info_buy[e];return void 0!=i?(i.key2&Math.pow(2,t))>0:!1},t.prototype.IsClearance=function(e,t){var i=this.info_todayClearlist[e];return void 0!=i?(i.key2&Math.pow(2,t))>0:!1},t.prototype.IsAllClearance=function(e){var t=this.info_todayClearlist[e];return void 0!=t?1022==(1022&t.key2):!1},t.prototype.Record=function(e){var t=new Sproto.cs_eightyOneHard_record_request;t.id=e,this.Rpc(C2sProtocol.cs_eightyOneHard_record,t,function(e){GameGlobal.MessageCenter.dispatch(MessageDef.TSUMKO_RECORD,e)},this)},t.prototype.IsOpenView=function(){var e=!0;return GameGlobal.actorModel.level<GameGlobal.Config.DisasterFbBaseConfig.openid?(UserTips.ins().showTips(GameGlobal.Config.DisasterFbBaseConfig.openid+"级开启"),e=!1):this.info_clear+1<this.chatXiD?(UserTips.ins().showTips("请先通关前置关卡"),e=!1):1==GameGlobal.TsumKoModel.mTeamInfo.HasTeam()?e=!1:e},t}(BaseSystem);__reflect(TsumKoBaseModel.prototype,"TsumKoBaseModel");var TsumKoBaseRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mModel=t,i}return __extends(t,e),t.prototype.GetMessageDef=function(){return[]},t.prototype.GetCheckFuncList=function(){return e={},e[TotemsModelRedPoint.TOTEMS_ACTIVATION]=this.showRedPoint,e;var e},t.prototype.showRedPoint=function(){for(var e=!1,t=(this.mModel.info_clear/9,0);9>t;t++);return e},t.prototype.OnChange=function(e){},t}(IRedPoint);__reflect(TsumKoBaseRedPoint.prototype,"TsumKoBaseRedPoint");var TsumKoModel=function(e){function t(){var t=e.call(this,UserFb.FB_TYPE_LIFE_DEATH_PLUNDER)||this;return t.btnSign0=!0,t.btnSign1=!0,t}return __extends(t,e),t.prototype.CheckEnter=function(e){return!0},t}(TeamBaseModel);__reflect(TsumKoModel.prototype,"TsumKoModel");var TsumKoBaseBagItemPlanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TsumKoBaseBagItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.itemGoodsScroller.viewport=this.itemListGoods,this.itemListGoods.itemRenderer=ItemBase,this.itemListGoods.dataProvider=new eui.ArrayCollection([]),this.observe(MessageDef.ClOSETSUMKOBASEBAGITEMPLANEL,this.CloseView)},t.prototype.CloseView=function(){this.CloseSelf()},t.prototype.OnOpen=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="开启宝箱",this.itemListGoods.dataProvider=new eui.ArrayCollection(this.items()),this.priceicon.type=2,this.priceicon.price=GameGlobal.Config.DisasterFbBaseConfig.openboxprice,this.openBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var t=GameGlobal.Config.DisasterFbConfig[GameGlobal.TsumKoBaseModel.recordId],i=GameGlobal.Config.DisasterFbBaseConfig;WarnWin.show("是否花费"+i.openboxprice+"元宝购买宝箱？",function(){1==Checker.Money(2,i.openboxprice)&&GameGlobal.TsumKoBaseModel.SendBuy(t.id)},e)},this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype.items=function(){var e=[],t=GameGlobal.Config.DisasterBoxConfig;for(var i in t){var o=t[i];e.push(o.item)}return e},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(TsumKoBaseBagItemPlanel.prototype,"TsumKoBaseBagItemPlanel");var TsumKoBaseMoppingUpPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.onceBtn,this._OnClick),this._AddClick(this.allBtn,this._OnClick)},t.prototype.OnOpen=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.onceBtn:var t=GameGlobal.TsumKoBaseModel.recordId;0==t&&(t=9*(GameGlobal.TsumKoBaseModel.chapterid-1)+1),GameGlobal.TsumKoBaseModel.SendSweep(GameGlobal.Config.DisasterFbConfig[t].id);break;case this.allBtn:GameGlobal.TsumKoBaseModel.SendSweepAll()}},t}(BaseView);__reflect(TsumKoBaseMoppingUpPanel.prototype,"TsumKoBaseMoppingUpPanel");var TsumKoBasePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TsumKoBaseSkin",t.teamPanel.mModel=GameGlobal.TsumKoModel,t._AddClick(t.shopBtn,t._OnClick),t._AddClick(t.recordLabel,t._OnClick),t._AddClick(t.eliminatePanel.onceBtn,t._OnClick),t.teamPanel.checkBox0.addEventListener(egret.Event.CHANGE,t._OnClick,t),t.teamPanel.checkBox1.addEventListener(egret.Event.CHANGE,t._OnClick,t),t.observe(MessageDef.TEAM_UPDATE_LEAVE,t.removeChatID),t.observe(MessageDef.CHOICECHECKPOINT,t.updateModelView),t.observe(MessageDef.CHOICECHECKPOINT,t.updateShow),t
}return __extends(t,e),t.prototype.childrenCreated=function(){this.teamPanel.mNotAutoJoint=!0,this.teamPanel.SetTime(10,60)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("八十一难"),this.teamPanel.DoOpen(null),this.teamPanel.checkBox1.selected=GameGlobal.TsumKoModel.btnSign1?!0:!1,this.teamPanel.checkBox0.selected=GameGlobal.TsumKoModel.btnSign0?!0:!1,1==this.isTeaming()&&(this.teamPanel.checkBox1.selected=!0,this.teamPanel.checkBox0.selected=!0),this.updateModelView();var i=GameGlobal.TsumKoBaseModel.recordId;this.setLabel(i),this.setItemList(i),this.updateLabel()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.shopBtn:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_BASHI]);break;case this.recordLabel:ViewManager.ins().open(TsumKoBaseRecordPanel);break;case this.teamPanel.checkBox0:GameGlobal.TsumKoModel.btnSign0=this.teamPanel.checkBox0.selected;break;case this.teamPanel.checkBox1:GameGlobal.TsumKoModel.btnSign1=this.teamPanel.checkBox1.selected;break;case this.eliminatePanel.onceBtn:var t=GameGlobal.TsumKoBaseModel.recordId;this.isShowView(this.teamPanel),this.teamPanel.UpdateKey(GameGlobal.Config.DisasterFbConfig[t].id),this.setLabel(t)}},t.prototype.updateLabel=function(){var e=GameGlobal.Config.DisasterFbBaseConfig.assisttimes,t=GameGlobal.TsumKoBaseModel.info_helpReward;void 0==t&&(t=0);var i=e-t;this.countLabel.text="("+i+"/"+e+")"},t.prototype.updateModelView=function(){var e=GameGlobal.TsumKoBaseModel.recordId,t=GameGlobal.Config.DisasterFbConfig[e];if(t){var i=GameGlobal.TsumKoBaseModel.info_clear,o=GameGlobal.TsumKoBaseModel.chapterid;if(0==this.isTeaming())if(0==GameGlobal.TsumKoBaseModel.chatXiD)if(e>i+1)this.isShowView(this.baffleImg);else if(e>i)this.isShowView(this.teamPanel),this.teamPanel.UpdateKey(t.id),this.setLabel(e);else{var n=t.sectionid;1==GameGlobal.TsumKoBaseModel.IsClearance(o,n)?(this.isShowView(this.teamPanel),this.teamPanel.UpdateKey(t.id),this.setLabel(e)):this.isShowView(this.eliminatePanel)}else this.isShowView(this.teamPanel),this.teamPanel.UpdateKey(t.id),this.setLabel(e);else this.isShowView(this.teamPanel),this.teamPanel.UpdateKey(t.id),this.setLabel(e)}},t.prototype.updateShow=function(){var e=GameGlobal.TsumKoBaseModel.recordId;this.setLabel(e),this.setItemList(e),this.updateLabel()},t.prototype.setLabel=function(e){var t=GameGlobal.TsumKoBaseModel.chatXiD;if(this.title0.text=GameGlobal.Config.DisasterFbConfig[e].name,0!=t){this.title0.text=GameGlobal.Config.DisasterFbConfig[t].name,this.title1.text=GameGlobal.Config.DisasterFbConfig[t].name;var i=GameGlobal.TsumKoBaseModel.chapterid;0!=i&&i!=Math.ceil(t/9)&&(this.title0.text=GameGlobal.Config.DisasterFbConfig[9*i-9+1].name),e!=t&&(this.title0.text=GameGlobal.Config.DisasterFbConfig[e].name)}else this.title1.text=GameGlobal.Config.DisasterFbConfig[e].name},t.prototype.isTeaming=function(){return GameGlobal.TsumKoModel.mTeamInfo.HasTeam()?!0:!1},t.prototype.setItemList=function(e){this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemList.dataProvider=new eui.ArrayCollection(GameGlobal.Config.DisasterFbConfig[e].showdrop)},t.prototype.isShowView=function(e){this.eliminatePanel.visible=!1,this.teamPanel.visible=!1,this.baffleImg.visible=!1,e.visible=!0},t.prototype.removeChatID=function(){GameGlobal.TsumKoBaseModel.chatXiD=0},t.prototype.OnClose=function(){this.commonWindowBg.OnAdded(this),0==GameGlobal.TsumKoModel.mTeamInfo.HasTeam()&&(GameGlobal.TsumKoBaseModel.chatXiD=0),this.teamPanel.DoClose()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TsumKoBasePanel.prototype,"TsumKoBasePanel",["ICommonWindow"]);var TsumKoBaseMemberPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TsumKoBaseMemberSkin",t}return __extends(t,e),t}(TeamBaseMemberView);__reflect(TsumKoBaseMemberPanel.prototype,"TsumKoBaseMemberPanel");var TsumKoBaseRecordPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TsumKoBaseRecordSkin",t.observe(MessageDef.CHOICECHECKPOINT,t.updateView),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.observe(MessageDef.TSUMKO_RECORD,this.record),this._AddClick(this.shopBtn,this._onClick)},t.prototype.OnOpen=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.updateView(),this.commonWindowBg.OnAdded(this),this.commonWindowBg.SetTitle("八十一难"),this.challengeLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ViewManager.ins().open(TsumKoBasePanel),ViewManager.ins().close(t)},this);var o=GameGlobal.Config.DisasterFbBaseConfig.assisttimes,n=GameGlobal.TsumKoBaseModel.info_helpReward;void 0==n&&(n=0);var a=o-n;this.countLabel.text="("+a+"/"+o+")"},t.prototype.updateView=function(){var e=GameGlobal.TsumKoBaseModel.recordId;this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),this.itemList.dataProvider=new eui.ArrayCollection(GameGlobal.Config.DisasterFbConfig[e].showdrop),this.title1.text=GameGlobal.Config.DisasterFbConfig[e].name,this.title0.text=GameGlobal.Config.DisasterFbConfig[e].name},t.prototype.record=function(e){if(null!=e.first){var t="",i="",o="";void 0!=e.first.name1&&(t=e.first.name1),void 0!=e.first.name2&&(i=e.first.name2),void 0!=e.first.name3&&(o=e.first.name3),this.ranksLabel.text=t+i+o,this.roundLabel.text=e.first.round+"回合",this.timeLabel.text=DateUtils.format_2(1e3*e.first.time)}else this.ranksLabel.text="暂 无",this.roundLabel.text="暂 无",this.timeLabel.text="暂 无";if(null!=e.fast){var t="",i="",o="";void 0!=e.fast.name1&&(t=e.fast.name1),void 0!=e.fast.name2&&(i=e.fast.name2),void 0!=e.fast.name3&&(o=e.fast.name3),this.ranksLabel1.text=t+i+o,this.roundLabel1.text=e.fast.round+"回合",this.timeLabel1.text=DateUtils.format_2(1e3*e.fast.time)}else this.ranksLabel1.text="暂 无",this.roundLabel1.text="暂 无",this.timeLabel1.text="暂 无"},t.prototype._onClick=function(e){switch(e.currentTarget){case this.shopBtn:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_BASHI])}},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(TsumKoBaseRecordPanel.prototype,"TsumKoBaseRecordPanel",["ICommonWindow"]);var TsumKoCheckItemList=function(e){function t(){var t=e.call(this)||this;return t.chapterid=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.chapterid=GameGlobal.TsumKoBaseModel.chapterid,this.listCtrl=new ListLRBtnCtrl(this.checkpointList,this.beforeBtn,this.nextBtn,214),this.observe(MessageDef.TSUMKO_UPDATE_CHECKPOINTLIST,this.defaultValue),this.observe(MessageDef.TSUMKO_UPDATE_CHECKPOINTLIST,this.updateList),this.observe(MessageDef.TSUMKO_UPDATE_CHECKPOINTLIST,this.listDefaultPos),this.checkpointList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onclick,this),this.listShow()},t.prototype.updateList=function(){UIHelper.ListRefresh(this.checkpointList)},t.prototype.listShow=function(){for(var e=[],t=9*(this.chapterid-1)+1,i=0;9>i;i++){var o=GameGlobal.Config.DisasterFbConfig[t+i];e.push(o)}this.checkpointList.itemRenderer=TsumKoCheckpointListItem,this.checkpointList.dataProvider=new eui.ArrayCollection(e);var n=this.defaultValue();this.listDefaultPos(),this.setListPos(n),GameGlobal.TsumKoBaseModel.Record(n),GameGlobal.TsumKoBaseModel.recordId=n},t.prototype.listDefaultPos=function(){var e=this.defaultValue();GameGlobal.TsumKoBaseModel.recordId=e,MessageCenter.ins().dispatch(MessageDef.CHOICECHECKPOINT),0==GameGlobal.TsumKoBaseModel.isCurBuy&&0==GameGlobal.TsumKoBaseModel.isCurClear&&this.setListPos(e),this.selectedIndex(e)},t.prototype.onclick=function(e){var t=9*this.chapterid-9+e.itemIndex+1;this.selectedIndex(t),GameGlobal.TsumKoBaseModel.recordId=t,MessageCenter.ins().dispatch(MessageDef.CHOICECHECKPOINT),GameGlobal.TsumKoBaseModel.Record(GameGlobal.TsumKoBaseModel.recordId)},t.prototype.selectedIndex=function(e){var t=0;t=e>0&&e%9!=0?Math.ceil(e%9):e-9*(e/9-1),0>=t-1?t=0:t-=1,this.checkpointList.selectedIndex=t},t.prototype.defaultValue=function(){var e=0;if(0==GameGlobal.TsumKoBaseModel.chatXiD){var t=GameGlobal.TsumKoBaseModel.info_clear+1;e=t;var i=Math.ceil(t/9);i!=GameGlobal.TsumKoBaseModel.chapterid&&(e=9*this.chapterid-9+1),0>=e&&(e=1)}else e=GameGlobal.TsumKoBaseModel.chatXiD;return e},t.prototype.setListPos=function(e){this.checkpointList.validateNow();var t=e-9*this.chapterid;0>=t&&(t=e-9*(this.chapterid-1)),9>t&&t>=6?this.checkpointList.scrollH=1258:6>t&&t>=3?this.checkpointList.scrollH=629:3>t&&(this.checkpointList.scrollH=0)},t}(BaseView);__reflect(TsumKoCheckItemList.prototype,"TsumKoCheckItemList");var TsumKoCheckpointListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.openBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ViewManager.ins().open(TsumKoBaseBagItemPlanel)},this)},t.prototype.dataChanged=function(){var e=this.data;GameGlobal.TsumKoBaseModel.info_clear;if(void 0!=e){var t=GameGlobal.TsumKoBaseModel.IsClearance(e.chapterid,e.sectionid),i=GameGlobal.TsumKoBaseModel.IsGatePass(e.chapterid,e.sectionid);this.extraPanel.SetBodyId(MonstersConfig.GetAppId(e.monsterid)),this.title.text=e.name,this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection([]),1==t?(this.recordLabel.visible=!1,this.notAdoptLabel.visible=!1,this.itemList.visible=!1,this.itemList.dataProvider=new eui.ArrayCollection(e.perdayreward),this.clearanceImg.visible=!0,1==i?(this.openBtn.visible=!1,this.itemList.visible=!0):(this.itemList.visible=!1,this.openBtn.visible=!0)):(this.clearanceImg.visible=!1,this.openBtn.visible=!1,this.itemList.visible=!0,this.itemList.dataProvider=new eui.ArrayCollection(e.firstreward),this.notAdoptLabel.visible=!0,this.recordLabel.visible=!1,GameGlobal.TsumKoBaseModel.info_clear+1==e.id&&(this.notAdoptLabel.visible=!1,this.recordLabel.visible=!0),GameGlobal.TsumKoBaseModel.info_clear>=e.id?(this.notAdoptLabel.visible=!1,this.itemList.dataProvider=new eui.ArrayCollection(e.perdayreward)):this.itemList.dataProvider=new eui.ArrayCollection(e.firstreward))}},t}(eui.ItemRenderer);__reflect(TsumKoCheckpointListItem.prototype,"TsumKoCheckpointListItem");var TsumKoListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;this.goBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ViewManager.ins().open(TsumKoBasePanel,e.data.chapterid)},this),this.recordLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){ViewManager.ins().open(TsumKoBaseRecordPanel)},this)},t.prototype.dataChanged=function(){var e=this.data;this.bgImg.source=e.title,this.checkpointNameLabel.text=e.name,this.extraPanel.SetBodyId(MonstersConfig.GetAppId(e.monsterid));var t=GameGlobal.TsumKoBaseModel.info_clear,i=Math.floor(t/9);this.goBtn.visible=!0,this.notAdoptLabel.visible=!1,1==GameGlobal.TsumKoBaseModel.IsAllClearance(e.chapterid)?this.adoptImg.visible=!0:this.adoptImg.visible=!1,i+2<=e.chapterid&&(this.adoptImg.visible=!1,this.notAdoptLabel.visible=!0,this.goBtn.visible=!1)},t}(eui.ItemRenderer);__reflect(TsumKoListItem.prototype,"TsumKoListItem");var TsumKoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="TsumKoPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=CommonUtils.GetArray(GameGlobal.Config.ClientShowConfig,"chapterid");this.list.itemRenderer=TsumKoListItem,this.list.dataProvider=new eui.ArrayCollection(e),this.observe(MessageDef.TSUMKO_UPDATE_LIST,this.UpdateList),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,function(e){GameGlobal.TsumKoBaseModel.chapterid=e.itemIndex+1},this),this._AddClick(this.shopBtn,this._onclick)},t.prototype.UpdateContent=function(){},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t.prototype._onclick=function(e){switch(e.currentTarget){case this.shopBtn:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_BASHI])}},t.NAME="八十一难",t}(BaseView);__reflect(TsumKoPanel.prototype,"TsumKoPanel",["ICommonWindowTitle"]);var UpLvWayItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardStr="奖励积分:",t.TypeID=0,t.BtnName="前往挑战",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=this;this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){1==ViewManager.ins().isShow(UpLvWayMainPanel)&&ViewManager.ins().close(UpLvWayMainPanel),1==ViewManager.ins().isShow(UpLvWayMainWin)&&ViewManager.ins().close(UpLvWayMainWin),1037==e.TypeID?ViewManager.ins().open(DailyMainWin,1):ViewManager.ins().Guide(e.TypeID)},this)},t.prototype.dataChanged=function(){var e=this.data;this.countLabel.visible=!1,this.logoImg.source=e.icon,this.titleNameLabel.text=e.name,this.describeLabel.text=e.des,this.TypeID=e.taget;var t=e.start;this.rewardScore.visible=!1,this.countLabel.textColor=7222027,void 0!=e.points&&(this.rewardScore.visible=!0,this.rewardScore.text=this.rewardStr+e.points),void 0!=e.btnname?this.btn.label=e.btnname:this.btn.label=this.BtnName;for(var i=0;i<this.starGroup.numChildren;i++){var o=this.starGroup.getChildAt(i);o.source=t>i?"ui_bm_star022":"ui_bm_star021"}if(this.countLabel.visible=!1,void 0!=e.type&&(1==e.type?this.countLabel.visible=!1:this.countLabel.visible=!0,void 0!=e.time&&void 0!=e.points))if(0==GameGlobal.UpLvWayModel.isFinish(e.id,e.time)){var n=0;void 0!=GameGlobal.UpLvWayModel.dic[e.id]&&(n=GameGlobal.UpLvWayModel.dic[e.id]),this.countLabel.text="("+n+"/"+e.time+")"}else this.countLabel.textColor=104196,this.countLabel.text="(已完成)"},t.prototype.ImgisShow=function(e,t){t>=e?(this.btn.visible=!1,this.countLabel.visible=!1,this.okImg.visible=!0):(this.countLabel.visible=!0,this.btn.visible=!0,this.countLabel.text="("+t+"/"+e+")")},t}(eui.ItemRenderer);__reflect(UpLvWayItem.prototype,"UpLvWayItem");var UpLvWayMainPanel=function(e){function t(){var t=e.call(this)||this;return t.BgName="升级途径",t.skinName="UpLvWayMainSkin",t.list.dataProvider=new eui.ArrayCollection([]),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title=this.BgName,this.list.itemRenderer=UpLvWayItem;var i=[];for(var o in GameGlobal.Config.LevelMethodConfig){var n=GameGlobal.Config.LevelMethodConfig[o].openid;Deblocking.Check(n,!0)&&i.push(GameGlobal.Config.LevelMethodConfig[o])}this.list.dataProvider=new eui.ArrayCollection(i)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(UpLvWayMainPanel.prototype,"UpLvWayMainPanel",["ICommonWindow"]);var UpLvWayMainPanel2=function(e){function t(){var t=e.call(this)||this;return t.Type=0,t.boxCount=4,t.TabID=0,t.skinName="UpLvWayViewSkin",t.MethodConfig=GameGlobal.Config.BianQiangMethodConfig,t.BaseConfig=GameGlobal.Config.BianQiangBaseConfig,t.RewardConfig=GameGlobal.Config.BianQiangRewardConfig,t._AddClick(t.item0,t._onclick),t._AddClick(t.item1,t._onclick),t._AddClick(t.item2,t._onclick),t._AddClick(t.item3,t._onclick),t}return __extends(t,e),t.prototype.UpdateContent=function(){},t.prototype.childrenCreated=function(){this.list.itemRenderer=UpLvWayItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){this.rewardBar.slideDuration=0,this.observe(MessageDef.UPLVWAY_ACQUIRE_ITEM,this.changeBar);var e=[];e=this.tabConfigList(this.MethodConfig),this.list.dataProvider=new eui.ArrayCollection(e);for(var t=0;t<this.boxCount;t++)this["item"+t].setItemData(this.RewardConfig[t+1].rewards[0]);this.changeBar(),this.itemEffShow()},t.prototype._onclick=function(e){switch(e.currentTarget){case this.item0:this.TabID=1,GameGlobal.UpLvWayModel.score>=this.RewardConfig[this.TabID].points&&(this.eff&&(this.eff.visible=!1),GameGlobal.UpLvWayModel._Reward(this.TabID));break;case this.item1:this.TabID=2,GameGlobal.UpLvWayModel.score>=this.RewardConfig[this.TabID].points&&(this.eff&&(this.eff.visible=!1),GameGlobal.UpLvWayModel._Reward(this.TabID));break;case this.item2:this.TabID=3,GameGlobal.UpLvWayModel.score>=this.RewardConfig[this.TabID].points&&(this.eff&&(this.eff.visible=!1),GameGlobal.UpLvWayModel._Reward(this.TabID));break;case this.item3:this.TabID=4,GameGlobal.UpLvWayModel.score>=this.RewardConfig[this.TabID].points&&(this.eff&&(this.eff.visible=!1),GameGlobal.UpLvWayModel._Reward(this.TabID))}},t.prototype.changeBar=function(){this.rewardBar.maximum=this.BaseConfig.maxvalue;var e=GameGlobal.UpLvWayModel.score;this.rewardBar.value=e;for(var t=1;t<=this.boxCount;t++){var i=this["img0"+t];i&&(i.source=e>=25*t?"ui_fb_bm_xiaodian01":"ui_fb_bm_xiaodian02")}for(var t=0;t<this.boxCount;t++)this["receiveImg"+t].visible=!1,void 0!=GameGlobal.UpLvWayModel.rewards[t]&&GameGlobal.UpLvWayModel.rewards[t]==t+1&&(this["receiveImg"+t].visible=!0);this.updateScore()},t.prototype.updateScore=function(){this.scoreLabel.text=GameGlobal.UpLvWayModel.score.toString()},t.prototype.tabConfigList=function(e){var t=[];for(var i in e)if(this.Type==e[i].type){var o=e[i].openid;Deblocking.Check(o,!0)&&t.push(e[i])}return t},t.prototype.itemEffShow=function(){for(var e=GameGlobal.UpLvWayModel.score,t=this.boxCount;t>0;t--)if(e>=this.RewardConfig[t].points&&-1==GameGlobal.UpLvWayModel.rewards.indexOf(t)){var i=t-1;this.showEff(this["item"+i],i);break}},t.prototype.showEff=function(e,t){this.eff=new MovieClip,this.eff.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_jlui_005"),!0,0),this.eff.x=e.x+40,this.eff.y=e.y+38,this.eff.scaleX=1.2,this.eff.scaleY=1.2,this["group"+t].addChild(this.eff)},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t}(BaseView);__reflect(UpLvWayMainPanel2.prototype,"UpLvWayMainPanel2",["ICommonWindowTitle"]);var X1Panel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Type=0,t}return __extends(t,e),t.NAME="我要变强",t}(UpLvWayMainPanel2);__reflect(X1Panel.prototype,"X1Panel");var X2Panel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Type=0,t}return __extends(t,e),t.NAME="我要升级",t}(UpLvWayMainPanel2);__reflect(X2Panel.prototype,"X2Panel");var X3Panel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Type=0,t}return __extends(t,e),t.NAME="我要材料",t}(UpLvWayMainPanel2);__reflect(X3Panel.prototype,"X3Panel");var UpLvWayMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(X1Panel,{Type:1}),TabView.CreateTabViewData(X2Panel,{Type:2}),TabView.CreateTabViewData(X3Panel,{Type:3})])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.mCommonWindowBg.OnAdded(this,e[0]||0),this.observe(MessageDef.UPLVWAY_CHANGE_SCORE,this.UpdateTabBtnRedPoint),this.observe(MessageDef.UPLVWAY_ACQUIRE_ITEM,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.UpLvWayModel.mRedPoint.showRedPoint()),this.mCommonWindowBg.ShowTalRedPoint(1,GameGlobal.UpLvWayModel.mRedPoint.showRedPoint()),this.mCommonWindowBg.ShowTalRedPoint(2,GameGlobal.UpLvWayModel.mRedPoint.showRedPoint())},t.prototype.OnOpenIndex=function(e){return!0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.NAME="我要变强",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(UpLvWayMainWin.prototype,"UpLvWayMainWin");var UpLvWayModel=function(e){function t(){var t=e.call(this)||this;return t.dic={},t.score=0,t.rewards=[],t.mRedPoint=new UpLvWayRedPoint(t),t.regNetMsg(S2cProtocol.sc_enhance_info,t._DoInitInfo),t.regNetMsg(S2cProtocol.sc_enhance_add_info,t._DoUpdate),t}return __extends(t,e),t.prototype._DoInitInfo=function(e){this.score=e.point,this.rewards=e.rewards;for(var t=0;t<e.data.length;t++){var i=e.data[t];this.dic[i.no]=i.val}GameGlobal.MessageCenter.dispatch(MessageDef.UPLVWAY_CHANGE_SCORE)},t.prototype._DoUpdate=function(e){this.score=e.point,this.dic[e.no]=e.val,GameGlobal.MessageCenter.dispatch(MessageDef.UPLVWAY_CHANGE_SCORE)},t.prototype._Reward=function(e){var t=this,i=new Sproto.cs_enhance_get_reward_request;i.no=e,this.Rpc(C2sProtocol.cs_enhance_get_reward,i,function(e){1==e.ret&&(-1==t.rewards.indexOf(i.no)&&t.rewards.push(e.no),GameGlobal.MessageCenter.dispatch(MessageDef.UPLVWAY_ACQUIRE_ITEM))},this)},t.prototype.isFinish=function(e,t){for(var i in this.dic)if(Number(i)==e&&this.dic[i]>=t)return!0;return!1},t}(BaseSystem);__reflect(UpLvWayModel.prototype,"UpLvWayModel");var UpLvWayRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.tabItemCound=4,i.mModel=t,i}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.UPLVWAY_CHANGE_SCORE]},t.prototype.GetCheckFuncList=function(){return e={},e[t.UPLVWAY_ACTIVATION]=this.showRedPoint,e;var e},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.UPLVWAY_REDPOINT_NOTICE)},t.prototype.showRedPoint=function(){for(var e=0;4>e;e++)if(this.mModel.score>=GameGlobal.Config.BianQiangRewardConfig[e+1].points&&-1==this.mModel.rewards.indexOf(e+1))return!0;return!1},t.UPLVWAY_ACTIVATION=0,t}(IRedPoint);__reflect(UpLvWayRedPoint.prototype,"UpLvWayRedPoint");var UserVip=function(e){function t(){var t=e.call(this)||this;return t.lv=0,t.exp=0,t.state=0,t.otherreward=0,t.regNetMsg(S2cProtocol.sc_vip_update_data,t.doUpdateVipData),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetAwards=function(e){var t=new Sproto.cs_vip_get_awards_request;t.lv=e,this.Rpc(C2sProtocol.cs_vip_get_awards,t)},t.prototype.sendXuanNvAwards=function(e){var t=new Sproto.cs_vip_get_other_awards_request;t.lv=e,this.Rpc(C2sProtocol.cs_vip_get_other_awards,t)},t.prototype.doUpdateVipData=function(e){var t=this.lv,i=this.exp;this.state;this.lv=e.lv,this.exp=e.exp,this.state=e.state,this.otherreward=e.otherreward,this.lv!=t&&(GameGlobal.MessageCenter.dispatch(MessageDef.VIP_LEVEL_CHANGE),Deblocking.Update(Deblocking.CHECK_TYPE_03)),this.exp!=i&&GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_VIP_EXP),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_VIP_AWARDS)},t.prototype.doUpdataExp=function(e){var t=e.readShort();this.exp=e.readInt(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_VIP_EXP),t>this.lv&&(this.lv=t,GameGlobal.MessageCenter.dispatch(MessageDef.VIP_LEVEL_CHANGE))},t.prototype.doUpdateVipAwards=function(e){this.state=e.readInt(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATA_VIP_AWARDS)},t.prototype.getVipState=function(){for(var e=!1,t=1;t<=this.lv;t++)if(void 0!=this.state&&0==(this.state>>t&1))return e=!0;return e},t.prototype.GetRewardState=function(e){return null!=this.state&&this.state>>e>0?!0:!1},t.prototype.CheckRedPoint=function(e){var t=!1;if(e)return GameGlobal.actorModel.vipLv>=e?void 0!=this.state&&0==(this.state>>e&1):!1;for(var i=1;i<=this.lv;i++)if(void 0!=this.state&&0==(this.state>>i&1))return t=!0;return t},t.MAX_LV=20,t}(BaseSystem);__reflect(UserVip.prototype,"UserVip");var VipModel=function(e){function t(){var t=e.call(this)||this;return t.configData=[],t}return __extends(t,e),t.prototype.getVipConfig=function(){this.configData=[];for(var e in GameGlobal.Config.VipConfig)this.configData.push(GameGlobal.Config.VipConfig[e]);return this.configData},t.prototype.getVipsDes=function(e){var t=GameGlobal.Config.VipConfig[e];return t.des},t.prototype.getVipAward=function(e){var t=GameGlobal.Config.VipConfig[e];return t.rewards},t.prototype.getVipDes=function(e){var t=GameGlobal.Config.VipConfig[e];return t.description},t}(BaseSystem);__reflect(VipModel.prototype,"VipModel");var VipIcon=function(e){function t(){var t=e.call(this)||this;return t.m_onlyVip=!0,t.skinName="VipIconSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},t.prototype.setVipLv=function(e,t){void 0===t&&(t=!1),this.m_vipLv=e,this.m_onlyVip=t,this.updateSource(),this.setFiltersGray()},t.prototype.setFiltersGray=function(){this.filters=this.m_vipLv>0?null:Color.GetFilter()},t.prototype.updateSource=function(){var e=GameGlobal.Config.VipConfig[this.m_vipLv];e&&(this.icon.source=e.vipicon),this.vipLabel.text="VIP"+(this.m_onlyVip?"":this.m_vipLv)},t.prototype.tap=function(){ViewManager.ins().open(VipMainPanel)},t}(eui.Component);__reflect(VipIcon.prototype,"VipIcon");var VipMainPanel=function(e){function t(){var t=e.call(this)||this;return t.vmodel=GameGlobal.VipModel,t.skinName="VipMainSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.title="VIP",this.mListLRBtnCtrl=new ListLRBtnCtrl(this.list0,this.leftBtn,this.rightBtn,110),this.mListLRBtnCtrl.mNotVisible=!0,this.mListLRBtnCtrl.OnRefresh(),this.vmodel.getVipConfig(),this.list0.itemRenderer=ItemBaseNotName},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this),this._AddClick(this.btnNext,this._OnClick),this._AddClick(this.btnPrev,this._OnClick),this._AddClick(this.btnRecharge,this._OnClick),this._AddClick(this.btnReceived,this._OnClick),this.observe(MessageDef.UPDATA_VIP_AWARDS,this.updateContent),this.changeExpBar(),this.vip=GameGlobal.actorModel.vipLv||1,this.updateAwardsList(this.vip),this.updateContent(),this.vipLabel.text=GameGlobal.actorModel.vipLv+""},t.prototype.updateContent=function(){if(this.changeExpBar(),t.OPEN_TO_VIP_PAGE)this.vip=t.OPEN_TO_VIP_PAGE,t.OPEN_TO_VIP_PAGE=null;else for(var e=1;e<=UserVip.ins().lv;e++){if(UserVip.ins().CheckRedPoint(e)){this.vip=e,this.gotoDes(e);break}e==UserVip.ins().lv&&(this.vip=UserVip.ins().lv>=UserVip.MAX_LV?UserVip.MAX_LV:UserVip.ins().lv+1)}this.gotoDes(this.vip)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnNext:this.nextVipDes();break;case this.btnPrev:this.prevVipDes();break;case this.btnRecharge:RechargeWin.Open(),ViewManager.ins().close(t);break;case this.btnReceived:UserVip.ins().sendGetAwards(this.vip)}},t.prototype.nextVipDes=function(){this.vip<=this.vmodel.configData.length&&(this.vip==this.vmodel.configData.length?this.vip=this.vmodel.configData.length:++this.vip,this.vip>1&&(this.btnPrev.visible=!0),this.gotoDes(this.vip))},t.prototype.gotoDes=function(e){var t=this.vmodel.getVipDes(e);this.vipDes.textFlow=TextFlowMaker.generateTextFlow(t),this.vipLabel2.text="VIP "+e+" 特权",this.vipLabel3.text="VIP "+e+" 礼包",this.updateAwardsList(e),this.changeBtnState()},t.prototype.changeBtnState=function(){this.vip>1?this.redPoint1Img.visible=UserVip.ins().CheckRedPoint(this.vip-1):this.redPoint1Img.visible=!1,this.vip<UserVip.MAX_LV?this.redPoint2Img.visible=UserVip.ins().CheckRedPoint(this.vip+1):this.redPoint2Img.visible=!1;var e=BitUtil.Has(UserVip.ins().state,this.vip);if(e?(this.received.visible=!0,this.btnReceived.visible=!1):this.received.visible=!1,this.vip>GameGlobal.actorModel.vipLv)this.btnReceived.visible=!1;else if(GameGlobal.actorModel.vipLv){var t=BitUtil.Has(UserVip.ins().state,this.vip);t?(this.received.visible=!0,this.btnReceived.visible=!1):this.btnReceived.visible=!0}else this.btnReceived.visible=!1;this.vip<=1?this.btnPrev.visible=!1:this.btnPrev.visible=!0},t.prototype.prevVipDes=function(){this.vip<=this.vmodel.configData.length&&(--this.vip,this.vip<=1&&(this.vip=1),this.gotoDes(this.vip))},t.prototype.updateAwardsList=function(e){var t=this.vmodel.getVipAward(e);this.list0.dataProvider=new eui.ArrayCollection(t),t.length>=5?(this.leftBtn.visible=!0,this.rightBtn.visible=!0):(this.leftBtn.visible=!1,this.rightBtn.visible=!1),this.giftImg.source=GameGlobal.Config.VipConfig[this.vip].giftSrc,this.tipsImg.source=GameGlobal.Config.VipConfig[this.vip].tipsSrc},t.prototype.getBarInfo=function(){var e=GlobalConfig.ins().VipConfig[this.vip+1],t=UserVip.ins().exp,t=UserVip.ins().exp;e?(this.bar.maximum=e.needYb,this.bar.value=t):(this.bar.labelDisplay.visible=!1,this.bar.maximum=1,this.bar.value=1)},t.prototype.changeExpBar=function(){var e=UserVip.ins(),t=GlobalConfig.ins().VipConfig[e.lv],i=0,o=e.exp;t&&(i=e.lv);var n=GlobalConfig.ins().VipConfig[i+1],a=0,r="";if(n){a=n.needYb-o;r="|C:0xfff7e5&T:再充值|C:0xffed21&T:"+a+"元||C:0xfff7e5&T:成为||C:0xffed21&T:VIP"+(e.lv+1)+"|",this.bar.maximum=n.needYb,this.bar.value=o}else r="VIP等级已满",this.bar.labelDisplay.visible=!1,this.bar.maximum=1,this.bar.value=1;this.tipLabel.textFlow=TextFlowMaker.generateTextFlow(r)},t.LAYER_LEVEL=LayerManager.UI_Main,t.OPEN_TO_VIP_PAGE=0,t}(BaseEuiView);__reflect(VipMainPanel.prototype,"VipMainPanel",["ICommonWindow"]);var WarnWinDate=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_record={},t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.setRecord=function(e,t,i){for(var o in this.m_record)if(o==e)return;this.m_record[e]={hint:t,callFun:i}},t.prototype.changeHint=function(e,t){for(var i in this.m_record)i==e&&(this.m_record[i].hint=t)},t.prototype.checkerHintByName=function(e){for(var t in this.m_record)if(t==e){if(!this.m_record[t].hint){var i=this.m_record[t].callFun;i&&null!=i.func&&i.func.call(i.thisObj)}return this.m_record[t].hint}return!0},t}(BaseSystem);__reflect(WarnWinDate.prototype,"WarnWinDate");var BagFullTipsPanel=function(){function e(){}return e.CheckOpen=function(t){return UserBag.ins().getSurplusCount()<t?(e.Open(),!1):!0},e.Open=function(){this.strText=this.strText.replace(/Num/,UserBag.BAG_ENOUGH+"个"),WarnWin.show(this.strText,function(){ViewManager.ins().open(SmeltEquipTotalWin)},this,null,null,"sure",{btnName:"前往熔炼"})},e.OpenNoCloseMe=function(){this.strText=this.strText.replace(/Num/,UserBag.BAG_ENOUGH+"个"),WarnWin.show(this.strText,function(){ViewManager.ins().openEasy(SmeltEquipTotalWin)},this,null,null,"sure",{btnName:"前往熔炼"})},e.strText="空余背包不足<font color=0xdb0000>Num</font>",e}();__reflect(BagFullTipsPanel.prototype,"BagFullTipsPanel");var GainGoodsItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GainGoodsItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){if(this.data){var e=this.data[0];this.data[1],this.data[2],this.desc.text=e}},Object.defineProperty(t.prototype,"userData",{get:function(){return this.data},enumerable:!0,configurable:!0}),t}(eui.ItemRenderer);__reflect(GainGoodsItem.prototype,"GainGoodsItem");var GainGoodsWarn=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GainGoodsNewSkin",this.gainList.itemRenderer=GainItem},t.prototype.OnOpen=function(){this.commonDialog.SetReturnButton(this.dialogReturnBtn),this.commonDialog.OnAdded(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),MessageCenter.ins().removeAll(this)},t.prototype.setData=function(e){this.gainList.dataProvider=new eui.ArrayCollection(e),this.validateNow();var t=this.gainList.y-this.commonDialog.y+this.gainList.height+15,i=(this.height-t)/2,o=this.commonDialog.y-i;this.commonDialog.y-=o,this.commonDialog.height=t,this.titleTxt.y-=o,this.gainList.y-=o,this.dialogReturnBtn.y=this.commonDialog.y+this.commonDialog.height-this.dialogReturnBtn.height+5},t}(BaseEuiView);__reflect(GainGoodsWarn.prototype,"GainGoodsWarn"),GainGoodsWarn.LAYER_LEVEL=LayerManager.UI_Popup;var GainItem=function(e){function t(){var t=e.call(this)||this;return t.initEvent=!1,t.skinName="GainItemSkin",t.gainList.itemRenderer=GainGoodsItem,t}return __extends(t,e),t.prototype.onTouchList=function(e){var t=e.target;t&&(t=t.userData,t&&t[1][0]&&(ViewManager.ins().closePartPanel(),ViewManager.ins().close(ShopGoodsWarn)))},t.prototype.dataChanged=function(){var e;e="number"==typeof this.data?[this.data]:this.data;var t,i=3;for(t=0;i>t;t++){var o=this["item"+t];
if(e.length<=t)o.parent&&this.itemsGroup.removeChild(o);else{o.parent||this.itemsGroup.addChild(o);var n=o.getChildAt(0),a=o.getChildAt(1),r=e[t];if(r>=101501&&151505>=r){var s=GlobalConfig.ins().ItemConfig[r];a.setData(s),n.text=e.length>1?"":""+s.name,n.textColor=ItemBase.QUALITY_COLOR[s.quality]}else if(r>2e4){var s=GlobalConfig.ins().ItemConfig[r];a.setData(s),n.text=e.length>1?"":""+s.name,n.textColor=ItemBase.QUALITY_COLOR[s.quality]}else a.setItemAward(0,r,1)}}var l=e[0],c=GlobalConfig.ins().GainItemConfig[l];if(null!=c){var u=c.gainWay.slice(0,c.gainWay.length);this.gainList.dataProvider=new eui.ArrayCollection(u)}var p=this.gainList.dataProvider.length;this.gainList.height=110*p},t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),0==this.initEvent&&(this.initEvent=!0,this.gainList.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchList,this))},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),1==this.initEvent&&(this.initEvent=!1,this.gainList.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchList,this))},t}(eui.ItemRenderer);__reflect(GainItem.prototype,"GainItem");var ShopGoodsWarn=function(e){function t(){var t=e.call(this)||this;return t._totalNum=0,t.nGoodsId=0,t.nShopType=-1,t.nItemIndex=0,t.nNum=1,t.tLbGo=[],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GainGoodsSkin",this.countTxt.restrict="0-9",this.observe(MessageDef.BYB_CHANGE,this.setData),this.observe(MessageDef.YB_CHANGE,this.setData),this.tLbGo[0]=this.lbGo0,this.tLbGo[1]=this.lbGo1,this.tLbGo[2]=this.lbGo2,UIHelper.SetLinkStyleLabel(this.recharge)},t.prototype.OnOpen=function(){this.commonDialog.SetReturnButton(this.dialogReturnBtn),this.commonDialog.setBgVisible(!1),this.commonDialog.OnAdded(this),this.decBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.dec10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.recharge.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.countTxt.addEventListener(egret.Event.CHANGE,this.onTxtChange,this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.decBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.dec10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.add10Btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.recharge.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.countTxt.removeEventListener(egret.Event.CHANGE,this.onTxtChange,this),MessageCenter.ins().removeAll(this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.recharge:RechargeWin.Open(),this.CloseSelf();break;case this.decBtn:this.setTotalPrice(this._totalNum-1);break;case this.addBtn:this.setTotalPrice(this._totalNum+1);break;case this.dec10Btn:this.setTotalPrice(this._totalNum-10);break;case this.add10Btn:this.setTotalPrice(this._totalNum+10);break;case this.buyBtn:if(this.nShopType>-1&&this.nItemIndex>0){var t=!1;this.nShopType===ShopController.EN_SHOP_BANGYUAN?GameLogic.ins().actorModel.byb>=this.totalPrice.getPrice()&&(t=!0):this.nShopType===ShopController.EN_SHOP_YUANBAO&&GameLogic.ins().actorModel.yb>=this.totalPrice.getPrice()&&(t=!0),t?ShopManage.ins().sendBuy(this.nShopType,this.nItemIndex,this._totalNum):UserTips.ins().showTips("元宝不足")}else UserTips.ins().showTips("元宝不足")}},t.prototype.searchItemIndex=function(e){var t=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_BANGYUAN);for(var i in t.shop)if(t.shop[i].id===e){this.nItemIndex=t.shop[i].index,this.nShopType=ShopController.EN_SHOP_BANGYUAN;var o=0,n=t.shop[i].currency.count||999;if(o=Math.floor(GameLogic.ins().actorModel.byb/n),o>=1)return}t=ShopController.ins().getShopDataByIndex(ShopController.EN_SHOP_YUANBAO);for(var i in t.shop)if(t.shop[i].id===e)return this.nItemIndex=t.shop[i].index,void(this.nShopType=ShopController.EN_SHOP_YUANBAO)},t.prototype.buyCallBack=function(e){e>0?ViewManager.ins().close(t):UserTips.ins().showTips("|C:0xff0000&T:元宝不足|")},t.prototype.onTxtChange=function(e){var t=Number(this.countTxt.text);this.setTotalPrice(t)},t.prototype.setData=function(e,t){this.nGoodsId=e||this.nGoodsId,this.nNum=t||this._totalNum;var i;this.searchItemIndex(this.nGoodsId);var o=GlobalConfig.ins().ItemConfig[this.nGoodsId];o?(this.itemIcon.setData(o),this.nameTxt.text=""+o.name,this.nameTxt.textColor=ItemBase.QUALITY_COLOR[o.quality],i=ItemStoreConfig.getStoreByItemID(this.nGoodsId,this.nShopType)):(this.itemIcon.setItemImg(RewardData.getCurrencyRes(e)),e==MoneyConst.yuanbao&&this.itemIcon.setItemBg(ResDataPath.GetItemQualityName(4)),this.nameTxt.text=RewardData.getCurrencyName(e),this.nameTxt.textColor=11168305),e&&(this.nShopType<0?this.currentState="getway":this.currentState="shop"),this.nShopType===ShopController.EN_SHOP_BANGYUAN?(this.price.setType(MoneyConst.byb),this.totalPrice.setType(MoneyConst.byb)):this.nShopType===ShopController.EN_SHOP_YUANBAO&&(this.price.setType(MoneyConst.yuanbao),this.totalPrice.setType(MoneyConst.yuanbao)),i&&(this._goodsId=i.id,this.price.setPrice(i.currency.count),this.setTotalPrice(this.nNum)),e&&this.setJumpLabel(e)},t.prototype.setJumpLabel=function(e){var t=this,i=GameGlobal.Config.GainItemConfig[e],o=[360,160,560],n=[200,520];if(i&&i.gainWay&&i.gainWay.length)for(var a=function(e,a){var s=i.gainWay[e];return r.tLbGo[e]?(r.tLbGo[e].text=s[0]||"",r.tLbGo[e].validateNow(),1==s[2]?(UIHelper.SetLinkStyleLabel(r.tLbGo[e]),r._AddClick(r.tLbGo[e],function(){ViewManager.ins().Guide(s[1][0],s[2]),ViewManager.ins().close(t)})):2==s[2]&&(UIHelper.SetLinkStyleLabel(r.tLbGo[e]),r._AddClick(r.tLbGo[e],function(){GameGlobal.UserTips.showTips(s[0])})),void(2==i.gainWay.length?r.tLbGo[e].x=n[e]-r.tLbGo[e].width/2:r.tLbGo[e].x=o[e]-r.tLbGo[e].width/2)):"continue"},r=this,s=0,l=i.gainWay.length;l>s;s++)a(s,l)},t.prototype.setTotalPrice=function(e){var t=0;this.nShopType===ShopController.EN_SHOP_BANGYUAN?t=Math.floor(GameLogic.ins().actorModel.byb/this.price.getPrice()):this.nShopType===ShopController.EN_SHOP_YUANBAO&&(t=Math.floor(GameLogic.ins().actorModel.yb/this.price.getPrice())),t>e?this._totalNum=e:this._totalNum=t,this._totalNum<1&&(this._totalNum=1),this.countTxt.text=this._totalNum+"",this.totalPrice.setPrice(this._totalNum*this.price.getPrice())},t}(BaseEuiView);__reflect(ShopGoodsWarn.prototype,"ShopGoodsWarn"),ShopGoodsWarn.LAYER_LEVEL=LayerManager.UI_Popup;var UserWarn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.setWarnLabel=function(e,t,i,o,n){void 0===o&&(o="normal"),void 0===n&&(n=null),TimerManager.ins().doNext(function(){var a=ViewManager.ins().open(WarnWin);a.setWarnLabel(e,t,i,o,n)},this)},t.prototype.setWarnContent=function(e,t,i,o,n){void 0===o&&(o="normal"),void 0===n&&(n=null),ViewManager.ins().open(WarnWin).setWarnContent(e,t,i,o,n)},t.prototype.setshowReward=function(e,t,i,o,n){void 0===o&&(o="reward"),void 0===n&&(n=null),ViewManager.ins().open(WarnWin).setshowReward(e,t,i,o,n)},t.prototype.setshowCheckBox=function(e,t,i,o,n,a){void 0===n&&(n="checkBox"),void 0===a&&(a=null),WarnWinDate.ins().checkerHintByName(e)&&(WarnWinDate.ins().setRecord(e,!0,i),ViewManager.ins().open(WarnWin).setshowCheckBox(e,t,i,o,n,a))},t.prototype.setBuyGoodsWarn=function(e,t){if(void 0===t&&(t=1),e==MoneyConst.gold)return void ViewManager.ins().open(ExchangeMoneyWin);if(Deblocking.Check(96,!0))ViewManager.ins().open(ShopGoodsWarn).setData(e,t);else{var i=GameGlobal.Config.ItemConfig[e];if(i)i.name&&UserTips.InfoTip(i.name+"不足");else{var o=MoneyConstToName[e];o?UserTips.InfoTip(o+"不足"):UserTips.InfoTip("材料不足")}}},t.prototype.BuyGoodsWarn=function(e,t){return void 0===t&&(t=1),e==MoneyConst.gold?void ViewManager.ins().open(ExchangeMoneyWin):void ViewManager.ins().open(ShopGoodsWarn).setData(e,t)},t.prototype.setGainGoodsWarn=function(e){ViewManager.ins().open(GainGoodsWarn).setData(e)},t.CheckBagCapacity=function(){return GameGlobal.UserBag.getSurplusCount()<20?(WarnWin.show("背包空间不足20，请先清理背包，以免不能获取怪物掉落物品",function(){ViewManager.ins().open(SmeltEquipTotalWin)},this,null,null,"sure"),!1):!0},t}(BaseSystem);__reflect(UserWarn.prototype,"UserWarn");var WarnWin=function(e){function t(){var t=e.call(this)||this;return t.closeExecuteCallFun2=!0,t}return __extends(t,e),t.show=function(e,t,i,o,n,a,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===a&&(a="normal"),void 0===r&&(r=null),UserWarn.ins().setWarnLabel(e,{func:t,thisObj:i},{func:o,thisObj:n},a,r)},t.ShowContent=function(e,t,i,o,n,a,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===a&&(a="normal"),void 0===r&&(r=null),UserWarn.ins().setWarnContent(e,{func:t,thisObj:i},{func:o,thisObj:n},a,r)},t.showReward=function(e,t,i,o,n,a,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===a&&(a="reward"),void 0===r&&(r=null),UserWarn.ins().setshowReward(e,{func:t,thisObj:i},{func:o,thisObj:n},a,r)},t.showCheckBox=function(e,t,i,o,n,a,r,s){void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r="checkBox"),void 0===s&&(s=null),UserWarn.ins().setshowCheckBox(e,t,{func:i,thisObj:o},{func:n,thisObj:a},r,s)},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="warnFrameSkin",this.validateNow()},t.prototype.OnOpen=function(){this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.animGroup.scaleX=this.animGroup.scaleY=.5,this.animGroup.alpha=0,egret.Tween.get(this.animGroup).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved(),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.callBack=null,this.calback2=null,egret.Tween.removeTweens(this.animGroup)},t.prototype.onTap=function(e){var t=this.callBack,i=this.calback2;switch(e.currentTarget){case this.sureBtn:WarnWinDate.ins().changeHint(this.name,!this.checkBox.selected),t&&null!=t.func&&t.func.call(t.thisObj);break;case this.notBtn:i&&i.func&&i.func.call(i.thisObj)}this.CloseSelf()},Object.defineProperty(t.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(e){this._isShowWin!=e&&(this._isShowWin=e)},enumerable:!0,configurable:!0}),t.prototype._Adjust=function(e){var t=Math.max(e+40,187);this.group.height=t+143,this.commonDialog.height=this.group.height+30},t.prototype.setWarnLabel=function(e,t,i,o,n){void 0===i&&(i=null),void 0===o&&(o="normal"),void 0===n&&(n=null),"string"==typeof e?this.warnLabel.textFlow=TextFlowMaker.generateTextFlow(e):this.warnLabel.textFlow=e,this.callBack=t,this.calback2=i,this.currentState=o,n&&(n.btnName&&(this.sureBtn.label=n.btnName),n.btnName2&&(this.notBtn.label=n.btnName2),n.title&&(this.commonDialog.title=n.title),null!=n.closeExecuteCallFun2&&(this.closeExecuteCallFun2=n.closeExecuteCallFun2)),this.hideReturnBtn(),this._Adjust(this.warnLabel.height),this.CommonDialogCloseCallFun()},t.prototype.setWarnContent=function(e,t,i,o,n){void 0===i&&(i=null),void 0===o&&(o="normal"),void 0===n&&(n=null),this.warnLabel.visible=!1,this.callBack=t,this.calback2=i,this.currentState=o,n&&(n.btnName&&(this.sureBtn.label=n.btnName),n.title&&(this.commonDialog.title=n.title));var a=null;"string"==typeof e?(a=new eui.Component,a.skinName=e):a=e,this.group.addChild(a),this._Adjust(a.height),a.x=.5*(StageUtils.WIDTH-a.width),a.y=this.group.height-a.height>>1,this.CommonDialogCloseCallFun()},t.prototype.setshowReward=function(e,t,i,o,n){void 0===i&&(i=null),void 0===o&&(o="reward"),void 0===n&&(n=null),"string"==typeof e?this.warnLabel.textFlow=TextFlowMaker.generateTextFlow(e):this.warnLabel.textFlow=e,this.callBack=t,this.calback2=i,this.currentState=o,n&&(n.btnName&&(this.sureBtn.label=n.btnName),n.title&&(this.commonDialog.title=n.title),n.reward&&(this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection(n.reward)),n.bHideSureBtn&&(this.sureBtn.visible=!1)),this.CommonDialogCloseCallFun()},t.prototype.setshowCheckBox=function(e,t,i,o,n,a){void 0===o&&(o=null),void 0===n&&(n="checkBox"),void 0===a&&(a=null),"string"==typeof t?this.warnLabel.textFlow=TextFlowMaker.generateTextFlow(t):this.warnLabel.textFlow=t,this.callBack=i,this.calback2=o,this.currentState=n,this.name=e,a&&(a.btnName&&(this.sureBtn.label=a.btnName),a.title&&(this.commonDialog.title=a.title),a.reward&&(this.itemList.itemRenderer=ItemBase,this.itemList.dataProvider=new eui.ArrayCollection(a.reward)),a.bHideSureBtn&&(this.sureBtn.visible=!1)),this.CommonDialogCloseCallFun()},t.prototype.CommonDialogCloseCallFun=function(){var e=this;this.commonDialog.mCallback=function(){e.calback2&&e.calback2.func&&e.closeExecuteCallFun2&&e.calback2.func.call(e.calback2.thisObj),e.CloseSelf()}},t.prototype.hideReturnBtn=function(){this.calback2||(this.sureBtn.x=this.width/2-this.sureBtn.width/2,this.notBtn.visible=!1)},t}(BaseEuiView);__reflect(WarnWin.prototype,"WarnWin"),WarnWin.LAYER_LEVEL=LayerManager.UI_Popup;var WelComeLandingPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._resources=["ui_xsyd_bg","xinshouyindao_json"],t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="welComeLandingSkin",this._AddClick(this.gotoImg,this._onclick),this._AddClick(this.com,this._onclick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];GameGlobal.GuideUtil.Finish(this,this.gotoImg)},t.prototype._onclick=function(e){this.Play()},t.prototype.Play=function(){this.touchEnabled=!1,this.touchChildren=!1,egret.setTimeout(this.CloseSelf,this,350);var e=new GoldFlyEff;e.mGap=50,e.mCount=16,e.mMax=16,e.mSource="ui_bm_qianb3";var t=egret.$TempPoint;DisplayUtils.GetGlobalPos(this.effGroup,t);var i=new egret.Point;i.x=561,i.y=0;var o=ViewManager.ins().getView(MainTopPanel);o&&DisplayUtils.GetGlobalPos(o.byb,i),e.Play(new egret.Rectangle(t.x,t.y,this.effGroup.width,this.effGroup.height),i.x,i.y)},t.prototype.OnClose=function(){GameLogic.SendWelcome(),GameGlobal.MessageCenter.dispatch(MessageDef.UPDATE_MAIN_TASK)},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(WelComeLandingPanel.prototype,"WelComeLandingPanel");var ClearanceAwardPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ClearanceAwardSkin",t._AddClick(t,t.CloseSelf),t._AddClick(t.btnGain,t._onClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="奖励";var i=e[0];this.chapterId=e[1];var o=GameGlobal.Config.ChaptersMapConfig[i];if(o){this.tips.text=o.name;var n=GameGlobal.Config.ChaptersRewardConfig[this.chapterId],a=n.rewards;this.gchapreward.data=a[0];var r=GlobalConfig.ins().ItemConfig[a[0].id];this.goodsName.text=r.name,this.goodsCount.text="数量*"+a[0].count}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._onClick=function(e){switch(e.currentTarget){case this.btnGain:GameGlobal.UserFb.gainChapterReward(this.chapterId)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ClearanceAwardPanel.prototype,"ClearanceAwardPanel");var WorldMapPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="WorldMapSkin",t._AddClick(t.closeBtn,t._onClick),t}return __extends(t,e),t.prototype.GetGuideTarget=function(){return e={},e[1]=this.list.getChildAt(0).getChildAt(1).getChildAt(1),e;var e},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.list.itemRenderer=WorldMapContent,this.list.dataProvider=new eui.ArrayCollection([1]),this.list.validateNow(),this.observe(MessageDef.GUANQIA_CHANGE,this.UpdateList),this.observe(MessageDef.WORLDMAP_LOCATETO,this.UpdateMapOffset),31==GameGlobal.GuideUtil.GuideId&&GameGlobal.GuideUtil.OnTargetTap(31,0)},t.prototype.UpdateMapOffset=function(e){var t=this.list.getChildAt(0).getChildAt(1).getChildAt(e).x-280;this.list.scrollH=Math.min(Math.max(t,0),4e3-StageUtils.WIDTH)},t.prototype.OnClose=function(){},t.prototype.UpdateList=function(){UIHelper.ListRefresh(this.list)},t.prototype._onClick=function(e){switch(e.currentTarget){case this.closeBtn:ViewManager.ins().close(this)}},t.LAYER_LEVEL=LayerManager.UI_FullScreen_Popup,t}(BaseEuiView);__reflect(WorldMapPanel.prototype,"WorldMapPanel");var WorldMapContent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCount=6,TimerManager.ins().doFrame(1,6,this._DoUpdate,this);for(var e=CommonUtils.GetArray(GameGlobal.Config.ChaptersMapConfig,"mapid"),t=0;t<this.itemGroup.numChildren;t++){var i=this.itemGroup.getChildAt(t);e[t]&&WorldMapIcon.bindClick(i,e[t].mapid)}},t.prototype.dataChanged=function(){for(var e=CommonUtils.GetArray(GameGlobal.Config.ChaptersMapConfig,"mapid"),t=0;t<this.itemGroup.numChildren;t++){var i=this.itemGroup.getChildAt(t);WorldMapIcon.setInfo(i,t,e[t])}},t.prototype._DoUpdate=function(){if(this.mCount>0&&this.$stage){var e=new CImage;this.bgGroup.addChild(e);var t=7-this.mCount;e.source="map00"+t.toString(),e.$setX((t-1)*StageUtils.WIDTH),e.$setY(0)}else TimerManager.ins().remove(this._DoUpdate,this);this.mCount--},t}(eui.ItemRenderer);__reflect(WorldMapContent.prototype,"WorldMapContent");var WorldMapIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.bindClick=function(e,t){e.imgBox.name=t.toString(),e.imgBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxClick,e),e.imgIcon.name=t.toString(),e.imgIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onIconClick,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(e.prize),egret.Tween.removeTweens(e.imgArr)},this)},t.setInfo=function(e,i,o){if(o){e.iconName.text=o.name;var n=GameGlobal.UserFb.guanqiaID;e.clearanceTip.visible=o.cid<n;var a=GameGlobal.UserFb.chapterId,r=GameGlobal.Config.ChaptersRewardConfig[a];if(e.userGroup.visible=r.mapid==o.mapid,e.imgIcon.source=o.icon,e.newGroup.visible=GameGlobal.UserFb.nextMap&&r.mapid+1==o.mapid,r.mapid==o.mapid)GameGlobal.MessageCenter.dispatch(MessageDef.WORLDMAP_LOCATETO,i);else if(GameGlobal.UserFb.nextMap&&r.mapid+1==o.mapid){var s=egret.Tween.get(e.imgArr,{loop:!0});s.to({y:32},500).to({y:52},500)}if(e.imgBox.visible=-1!=t.getChapterRewardId(o.mapid),e.redPoint.visible=e.imgBox.visible,e.imgBox.visible){var s=egret.Tween.get(e.prize,{loop:!0});s.to({y:144},400,egret.Ease.sineIn).to({y:154},400,egret.Ease.sineIn)}else egret.Tween.removeTweens(e.prize)}},t.getChapterRewardId=function(e){for(var t=GameGlobal.UserFb.chapterRewardList,i=0,o=t;i<o.length;i++){var n=o[i],a=GameGlobal.Config.ChaptersRewardConfig[n];if(a&&a.mapid==e)return n}return-1},t.onBoxClick=function(e){var i=parseInt(e.currentTarget.name),o=t.getChapterRewardId(i);-1!=o&&ViewManager.ins().open(ClearanceAwardPanel,i,o)},t.onIconClick=function(e){var t=parseInt(e.currentTarget.name),i=GameGlobal.UserFb.chapterId,o=GameGlobal.Config.ChaptersRewardConfig[i];GameGlobal.UserFb.nextMap&&o.mapid+1==t?(GameGlobal.UserFb.Rpc(C2sProtocol.cs_raid_next_map),ViewManager.ins().close(WorldMapPanel)):ViewManager.ins().open(WorldMapTipPanel,t)},t}(eui.Component);__reflect(WorldMapIcon.prototype,"WorldMapIcon");var WorldMapTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="WorldMapTipSkin",t._AddClick(t,t.CloseSelf),t._AddClick(t.btnEnter,t._onClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.showReturnBtn(!1),this.commonDialog.title="提示";var i=e[0],o=GameGlobal.Config.ChaptersMapConfig[i];if(o){this.mapName.text=o.name;var n=GameGlobal.UserFb.chapterId,a=GameGlobal.Config.ChaptersRewardConfig[n];if(this.clearanceTIp.visible=a.mapid>=i,this.groupTip.visible=a.mapid<i,this.mapName.$setX(305),!(a.mapid>i)){if(a.mapid==i)return void(this.clearanceTIp.text="正在冒险中...");this.mapName.$setX(121),this.levelTip.text="角色等级达到"+o.needLevel+"级";var r=GameGlobal.Config.ChaptersMapConfig[i-1];this.bossTip.text="击败"+r.name+"所有BOSS"}}},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.prototype._onClick=function(e){switch(e.currentTarget){case this.btnEnter:ViewManager.ins().close(this)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(WorldMapTipPanel.prototype,"WorldMapTipPanel");var XiandaoModel=function(e){function t(){var t=e.call(this)||this;return t.m_MyRankData=new XiandaoRankData,t.m_RankList=[],t.m_FightRankList=[],t.m_IsOpenFlag=!0,t.m_KnockoutData=new XiandaoKnockoutData,t.m_Gamble=[],t.m_MapData=null,t.mType=XiandaoState.NOT_STARTED,t.mSign=!1,t.mMyTime=null,t.m_Rank=0,t.m_PreliminariesStartTime=null,t.mRedPoint=new XiandaoModelRedPoint,t.regNetMsg(S2cProtocol.sc_qualifyingMgr_info_res,t._UpdateInfo),t.regNetMsg(S2cProtocol.sc_qualifyingMgr_map_info_res,t._UpdateMapInfo),t.regNetMsg(S2cProtocol.sc_qualifyingMgr_war_info,t._DoResultInfo),t}return __extends(t,e),t.prototype.EnterPreliminaries=function(){GameGlobal.XiandaoModel.CanEnter()?UserFb.CheckFighting()&&GameGlobal.XiandaoModel.SendEnter():UserTips.InfoTip("预选赛结束")},t.prototype.GetPreliminariesStartTime=function(){return null==this.m_PreliminariesStartTime&&(this.m_PreliminariesStartTime=DateUtils.FormatTimeString(GameGlobal.Config.XianDuMatchBaseConfig.preliminaries[0])),Math.floor(this.m_PreliminariesStartTime/1e3)},t.prototype.ShowPreliminariesTime=function(){if(this.mType==XiandaoState.APPLY_DONE){var e=this.GetPreliminariesStartTime()-GameServer.serverTime;if(e>0)return e}return 0},t.prototype.SendGetInfo=function(){this.Rpc(C2sProtocol.cs_qualifyingMgr_info)},t.prototype.SendGetTime=function(){this.mMyTime=null,this.Rpc(C2sProtocol.cs_qualifyingMgr_timeout,null,this._DoGetTime,this)},t.prototype._DoGetTime=function(e){this.mMyTime=e,null!=e.timeout&&(e.timeout=GameServer.serverTime+e.timeout),GameGlobal.MessageCenter.dispatch(MessageDef.XIANDAO_UPDATE)},t.prototype.SendApply=function(){this.Rpc(C2sProtocol.cs_qualifyingMgr_sign_up,null,this._DoApply,this)},t.prototype._DoApply=function(e){e.ret?(this.mSign=!0,UserTips.InfoTip("报名成功"),GameGlobal.MessageCenter.dispatch(MessageDef.XIANDAO_UPDATE)):UserTips.InfoTip("已报名")},t.prototype.SendGetRank=function(){this.Rpc(C2sProtocol.cs_qualifyingMgr_rank,null,this._DoRank,this)},t.prototype._DoRank=function(e){this.m_RankList=[];for(var t=0,i=e.rank_data||[],o=i.length;o>t;t++){var n=i[t],a=new XiandaoRankData;a.rank=t+1,a.Parse(n),this.m_RankList.push(a)}this.m_FightRankList=[];for(var t=0,i=e.fightRecord||[],o=i.length;o>t;t++){var n=i[t],a=new XiandaoRecordData;a.trunId=t+1,a.Parse(n),this.m_FightRankList.push(a)}this.m_MyRankData.rank=e.rankNo,this.m_MyRankData.score=e.point,GameGlobal.MessageCenter.dispatch(MessageDef.XIANDAO_UPDATE)},t.prototype.SendGamble=function(e,t,i){var o=new Sproto.cs_qualifyingMgr_gamble_request;o.field=e+1,o.no=t+1,o.typ=i+1,this.Rpc(C2sProtocol.cs_qualifyingMgr_gamble,o,function(o){if(o.ret){UserTips.InfoTip("下注成功"),this.m_Gamble||(this.m_Gamble=[]);var n=new Sproto.qualifyingMgr_gamble_data;n.field=e+1,n.no=t+1,n.typ=i+1,this.m_Gamble.push(n),GameGlobal.MessageCenter.dispatch(MessageDef.XIANDAO_UPDATE)}else UserTips.InfoTip("下注失败")},this)},t.prototype.SendVideo=function(e,t,i){var o=new Sproto.cs_qualifyingMgr_video_request;o.the=e,o.field=t,o.round=i,this.Rpc(C2sProtocol.cs_qualifyingMgr_video,o)},t.prototype.SendEnterKnockout=function(){return GameMap.fbType==UserFb.FB_TYPE_XIANDAO?void UserTips.InfoTip("正在场景中"):void(UserFb.CheckFighting()&&(TeamBaseModelMsg.Exit(),GameGlobal.CommonRaidModel._MapGo(GameGlobal.Config.XianDuMatchBaseConfig.mapid)))},t.prototype.SendEnter=function(){return GameMap.fbType==UserFb.FB_TYPE_XIANDAO?void UserTips.InfoTip("正在场景中"):void this.SendGetMapInfo()},t.prototype.SendGetMapInfo=function(){this.Rpc(C2sProtocol.cs_qualifyingMgr_map_info)},t.prototype.ClearGetMapInfo=function(){TimerManager.ins().remove(this.SendGetMapInfo,this)},t.prototype._DoResultInfo=function(e){var t=new XiandaoFinishData;t.isWin=e.win,t.roleData=e.roleData,GameGlobal.RaidMgr.mBattleRaid.SetFinishAction(t)},t.prototype._UpdateMapInfo=function(e){1==e.ret&&GameMap.fbType!=UserFb.FB_TYPE_XIANDAO&&UserFb.CheckFighting()&&(TeamBaseModelMsg.Exit(),GameGlobal.CommonRaidModel._MapGo(GameGlobal.Config.XianDuMatchBaseConfig.mapid)),this.m_MapData=e,null!=e.timeout&&(TimerManager.ins().doTimer(1e3*e.timeout,1,this.SendGetMapInfo,this),e.timeout=e.timeout+GameServer.serverTime),GameGlobal.MessageCenter.dispatch(MessageDef.XIANDAO_MAP_UPDATE)},t.prototype._UpdateInfo=function(e){if(null!=e.champion&&(this.mChampion=e.champion),null!=e.sign&&(this.mSign=e.sign),null!=e.ret&&(this.m_IsOpenFlag=e.ret),null!=e.type){var t=this.mType;this.mType=e.type,this.mType<XiandaoState.PRIMARY&&(this.m_IsOpenFlag=!0),t!=this.mType&&this.mType==XiandaoState.APPLY_DONE&&this.mSign&&this.m_IsOpenFlag?PlayFunView.GameNotice(MainGameNoticeView.TYPE_XIANDAO,300,MainGameNoticeView.SHOW_TYPE_GOTO):PlayFunView.RemoveGameNotice(MainGameNoticeView.TYPE_XIANDAO)}if(null!=e.rank&&(this.m_Rank=e.rank),e.player_data){var i=this.m_KnockoutData.roleDatas={};this.m_KnockoutData.roleNoList=[];for(var o=0,n=e.player_data;o<n.length;o++){var a=n[o],r=new XiandaoKnockoutRoleData;r.Parse(a),i[r.no]=r}}if(this._UpdateKnockoutData(0,e.knockouttime16),this.m_KnockoutData.turnDatas[0].length){for(var i=[],s=0,l=this.m_KnockoutData.turnDatas[0];s<l.length;s++){var a=l[s];i.push(a.noA),i.push(a.noB)}this.m_KnockoutData.roleNoList=i}this._UpdateKnockoutData(1,e.knockouttime8),this._UpdateKnockoutData(2,e.knockouttime4),this._UpdateKnockoutData(3,e.knockouttime2),e.gamble&&(this.m_Gamble=e.gamble||[]),GameGlobal.MessageCenter.dispatch(MessageDef.XIANDAO_UPDATE),this.SendGetTime()},t.prototype._UpdateKnockoutData=function(e,t){if(t)for(var i=this.m_KnockoutData.turnDatas[e]=[],o=0,n=t;o<n.length;o++){var a=n[o],r=new XiandaoKnockoutTurn;r.Parse(a),i.push(r)}},t.prototype.IsGame=function(){var e=this.mType;return e==XiandaoState._16_FINAL||e==XiandaoState._8_FINAL||e==XiandaoState._4_FINAL||e==XiandaoState._2_FINAL},t.prototype.GetKnockoutId=function(){return this.mType<XiandaoState._16_FINAL_DONE?0:this.mType<XiandaoState._8_FINAL_DONE?1:this.mType<XiandaoState._4_FINAL_DONE?2:(this.mType<XiandaoState._2_FINAL_DONE,3)},t.prototype.GetRoleData=function(e){return this.m_KnockoutData.roleDatas[e]},t.prototype.GetTurnData=function(e,t){var i=this.m_KnockoutData.turnDatas[e];if(i)return i[t]},t.prototype.GetBetData=function(e){for(var t=0,i=this.m_Gamble;t<i.length;t++){var o=i[t];if(o.field==e+1)return o}return null},t.prototype.IsKnockout=function(){return this.mType>=XiandaoState.PRIMARY_DONE&&this.mType<XiandaoState._2_FINAL_DONE},t.prototype.IsShowResult=function(){return this.mType==XiandaoState.PRIMARY_DONE},t.prototype.IsApply=function(){return this.mType==XiandaoState.APPLY},t.prototype.IsClose=function(){return this.mType==XiandaoState.NOT_STARTED||!this.m_IsOpenFlag},t.prototype.CanEnter=function(){return this.mType==XiandaoState.PRIMARY||this.mType==XiandaoState.APPLY_DONE},t.prototype.GetLast=function(){return this.mChampion},t.prototype.IsExitGame=function(){return this.m_MapData?3==this.m_MapData.ret:!1},t.prototype.IsCloseAct=function(){return this.m_MapData?2==this.m_MapData.ret:!1},t.prototype.GetNextTime=function(){return this.m_MapData?Math.max(this.m_MapData.timeout-GameServer.serverTime,0):0},t.prototype.GetSimpleRankData=function(){var e=[];if(this.m_MapData)for(var t=0,i=0,o=this.m_MapData.rank_data||[];i<o.length;i++){var n=o[i],a=new XiandaoRankData;a.rank=t+1,a.Parse(n),e.push(a),++t}return e},t.prototype.GetSimpleMyRank=function(){return this.m_MapData?this.m_MapData.rankNo||0:0},t.prototype.GetSimpleMyRankScore=function(){return this.m_MapData?this.m_MapData.point||0:0},t.prototype.GetRankData=function(){return this.m_RankList},t.prototype.GetMyRankData=function(){return this.m_MyRankData},t.prototype.GetGroupType=function(){return this.m_Rank||1},t.prototype.GetGroupTypeStr=function(){var e=GameGlobal.XiandaoModel.GetGroupType(),t=GameGlobal.Config.XianDuMatchBaseConfig["rank"+e];return XiandaoKnockoutView.RANK_TYPE_STR[e]+("（"+t[0]+"-"+t[1]+"名）")},t.prototype.GetRankRecord=function(){return this.m_FightRankList||[]},t.prototype.GetKnockoutData=function(){return this.m_KnockoutData},t}(BaseSystem);__reflect(XiandaoModel.prototype,"XiandaoModel");var XiandaoModelRedPoint=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_APPLY]=this.GetIndexApply,e;var e},t.prototype.IsRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_43,!0)?e.prototype.IsRedPoint.call(this):!1},t.prototype.GetMessageDef=function(){return[MessageDef.XIANDAO_UPDATE]},t.prototype.OnChange=function(e){GameGlobal.MessageCenter.dispatch(MessageDef.RP_XIANDAO)},t.prototype.GetIndexApply=function(){return GameGlobal.XiandaoModel.mType==XiandaoState.APPLY&&!GameGlobal.XiandaoModel.mSign},t.INDEX_APPLY=0,t}(IRedPoint);__reflect(XiandaoModelRedPoint.prototype,"XiandaoModelRedPoint");var XiandaoKnockoutData=function(){function e(){this.roleDatas={},this.roleNoList=[],this.turnDatas=[[],[],[],[]]}return e}();__reflect(XiandaoKnockoutData.prototype,"XiandaoKnockoutData");var XiandaoKnockoutTurn=function(){function e(){this.fightRecord=[],this.winPart=0}return e.prototype.Parse=function(e){this.noA=e.noA,this.noB=e.noB,this.winNo=e.winNo,this.fightRecord=e.fightRecord||[];for(var t={},i=0,o=this.fightRecord;i<o.length;i++){var n=o[i];if(t[n]){if(++t[n]>=2){this.winNo=1==n?this.noA:this.noB,this.winPart=n;break}}else t[n]=1}},e}();__reflect(XiandaoKnockoutTurn.prototype,"XiandaoKnockoutTurn");var XiandaoKnockoutRoleData=function(){function e(){this.no=0,this.roleName="",this.serverId=0,this.lv=1,this.power=0}return e.prototype.Parse=function(e){this.no=e.no,this.lv=e.lv,this.power=e.power,this.roleName=e.name,this.serverId=e.server,this.shows=e.shows,this.shows.job=e.job,this.shows.sex=e.sex,this.shows.name=e.name},e}();__reflect(XiandaoKnockoutRoleData.prototype,"XiandaoKnockoutRoleData");var XiandaoLastData=function(){function e(){this.roleName="",this.serverId=0,this.role1Job=1,this.role1Sex=0,this.role2Job=1,this.role2Sex=0}return e.prototype.GetName=function(){return GameString.GetSerAndName(this.serverId,this.roleName)},e}();__reflect(XiandaoLastData.prototype,"XiandaoLastData");var XiandaoRankData=function(){function e(){this.rank=0,this.roleName="",this.serverId=0,this.score=0,this.power=0}return e.prototype.Parse=function(e){this.roleName=e.name,this.serverId=e.server,this.score=e.point},e.prototype.GetRank=function(){return this.rank?this.rank+"":"未上榜"},e.prototype.GetPower=function(){return CommonUtils.overLength(this.power)},e}();__reflect(XiandaoRankData.prototype,"XiandaoRankData");var XiandaoRecordData=function(){function e(){}return e.prototype.Parse=function(e){this.isWin=e.win,this.name1=e.name1,this.server1=e.server1,this.name2=e.name2,this.server2=e.server2},e}();__reflect(XiandaoRecordData.prototype,"XiandaoRecordData");var XiandaoState=function(){function e(){}return e.NOT_STARTED=0,e.APPLY=1,e.APPLY_DONE=2,e.PRIMARY=3,e.PRIMARY_DONE=4,e._16_FINAL=5,e._16_FINAL_DONE=6,e._8_FINAL=7,e._8_FINAL_DONE=8,e._4_FINAL=9,e._4_FINAL_DONE=10,e._2_FINAL=11,e._2_FINAL_DONE=12,e
}();__reflect(XiandaoState.prototype,"XiandaoState");var XiandaoApplyView=function(e){function t(){var t=e.call(this)||this;return t.skinName="XiandaoApplySkin",UIHelper.SetLinkStyleLabel(t.ruleLabel),UIHelper.SetLinkStyleLabel(t.videoLabel),t.list.itemRenderer=ItemBaseNotName,t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.ruleLabel,this._OnClick),this._AddClick(this.videoLabel,this._OnClick),this._AddClick(this.goBtn,this._OnClick)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.ruleLabel:ViewManager.ins().open(ActivityDescPanel,39);break;case this.videoLabel:ViewManager.ins().open(XiandaoVideoPanel,3,0);break;case this.goBtn:GameGlobal.XiandaoModel.IsApply()?GameGlobal.XiandaoModel.SendApply():GameGlobal.XiandaoModel.EnterPreliminaries()}},t.prototype.OnOpen=function(){this.observe(MessageDef.XIANDAO_UPDATE,this.UpdateContent),this.UpdateContent(),this.list.dataProvider=new eui.ArrayCollection(GameGlobal.Config.XianDuMatchBaseConfig.showItem)},t.prototype.UpdateContent=function(){var e=GameGlobal.XiandaoModel;this.stateLabel.visible=!1,this.goBtn.visible=!1,e.mType==XiandaoState._2_FINAL_DONE?(this.closeLabel.visible=!0,this.closeLabel.text="仙道会已经结束"):e.IsClose()?(this.closeLabel.visible=!0,this.closeLabel.text="仙道会已经关闭"):(this.closeLabel.visible=!1,this.goBtn.visible=!0,e.CanEnter()?e.mSign?(this.goBtn.label="进入",this.stateLabel.visible=!0):(this.closeLabel.visible=!0,this.closeLabel.text="未报名",this.goBtn.visible=!1):e.mSign?(this.closeLabel.visible=!0,this.closeLabel.text="已报名",this.goBtn.visible=!1):this.goBtn.label="报名");var t,i=e.GetLast();if(i){var o=e.GetKnockoutData().turnDatas[3];o&&(t=o[0])}if(t){this.firstGroup.visible=!0;var n=e.GetRoleData(t.noA),a=e.GetRoleData(t.noB),r=i==t.noA?n:a;this.firstLabel.text=GameString.GetSerAndName(r.serverId,r.roleName),UIHelper.SetHead(this.head1,n.shows.job,n.shows.sex),UIHelper.SetHead(this.head2,a.shows.job,a.shows.sex),this.roleShowPanel.SetShowImage(r.shows)}else this.firstGroup.visible=!1,this.firstLabel.text="暂无"},t}(BaseView);__reflect(XiandaoApplyView.prototype,"XiandaoApplyView",["ICommonWindowTitle"]);var XiandaoBetPanel=function(e){function t(){var t=e.call(this)||this;return t.items=[],t.skinName="XiandaoBetSkin",t}return __extends(t,e),t.prototype.GetAttLabel=function(e){for(var t=[],i=0,o=e.$children;i<o.length;i++)for(var n=o[i],a=0,r=n.$children;a<r.length;a++){var s=r[a];if(egret.is(s,"eui.Label")){t.push(s);break}}return t},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.m_Index=o,this.m_TurnId=i,this.mCommonWindowBg.OnAdded(this),this.observe(MessageDef.XIANDAO_UPDATE,this.UpdateContent);for(var n=0,a=0,r=this.group.$children;a<r.length;a++){var s=r[a],l=new XiandaoBetItem(s);l.btn.name=n+"",this.AddClick(l.btn,this._OnClick),this.items.push(l),++n}this.AddChange(this.check1,this._OnCheck),this.AddChange(this.check2,this._OnCheck),this.UpdateContent()},t.prototype.UpdateContent=function(){var e=GameGlobal.XiandaoModel;this.m_BetData=e.GetBetData(this.m_Index);var t=this.m_TurnData=e.GetTurnData(this.m_TurnId,this.m_Index);if(t){var i=e.GetRoleData(t.noA),o=e.GetRoleData(t.noB);this.check1.selected=i.power>=o.power,this.check2.selected=!this.check1.selected,this.SetAttData(i,this.att1,this.role1,this.check1),this.SetAttData(o,this.att2,this.role2,this.check2),this.m_BetData&&(this.check1.selected=1==this.m_BetData.no,this.check2.selected=2==this.m_BetData.no)}for(var n=this.m_BetData?this.m_BetData.typ-1:-1,a=function(e){var t=r.items[e],i=GameGlobal.Config.XianDuMatchStakeBaseConfig[e+1];t.item.data=i.cost;var o=e;t.item.mCallback=function(){ViewManager.ins().open(XiandaoBetTipPanel,o)},t.price.type=i.cost.id,t.price.price=i.cost.count,n>=0&&(t.price.visible=!0,t.btn.visible=!1,t.yaImg.visible=n==e)},r=this,s=0;s<this.items.length;s++)a(s)},t.prototype.SetAttData=function(e,t,i,o){if(e){var n=this.GetAttLabel(t);n[0].text=GameString.GetSerAndName(e.serverId,e.roleName),n[1].text="Lv."+e.lv,n[2].textFlow=TextFlowMaker.generateTextFlow("战力：|C:0x019704&T:"+e.power+"|"),o.label=GameString.GetSerAndName(e.serverId,e.roleName),i.SetShowImage(e.shows)}},t.prototype._OnCheck=function(e){return this.m_TurnData?this.m_BetData?(this.check1.selected=1==this.m_BetData.no,void(this.check2.selected=2==this.m_BetData.no)):void(e.currentTarget.selected?e.currentTarget==this.check1?this.check2.selected=!1:this.check1.selected=!1:e.currentTarget.selected=!0):void 0},t.prototype._OnClick=function(e){var t=parseInt(e.currentTarget.name);GameGlobal.XiandaoModel.SendGamble(this.m_Index,this.check1.selected?0:1,t)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(XiandaoBetPanel.prototype,"XiandaoBetPanel");var XiandaoBetItem=function(){function e(e){this.mGroup=e,this.item=e.getChildByName("item"),this.btn=e.getChildByName("btn"),this.price=e.getChildByName("price"),this.yaImg=e.getChildByName("ya")}return e}();__reflect(XiandaoBetItem.prototype,"XiandaoBetItem");var XiandaoBetTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XiandaoBetTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=GameGlobal.Config.XianDuMatchStakeBaseConfig[i+1];o&&(this.winDesc.textFlow=TextFlowMaker.generateTextFlow(this.GetStr(o.rewardwin,o.pointswin)),this.loseDesc.textFlow=TextFlowMaker.generateTextFlow(this.GetStr(o.rewardlose,o.pointslose)))},t.prototype.GetItemStr=function(e){if(0==e.type)return MoneyConstToName[e.id]+"*"+e.count;var t=GameGlobal.Config.ItemConfig[e.id];return"|C:"+Color.GetStr(ItemBase.QUALITY_COLOR[t.quality])+"&T:"+t.name+"*"+e.count+"|"},t.prototype.GetStr=function(e,t){for(var i=[],o=0,n=e;o<n.length;o++){var a=n[o];i.push(this.GetItemStr(a))}return"可获得"+i.join("、")},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XiandaoBetTipPanel.prototype,"XiandaoBetTipPanel");var XiandaoKnockoutView=function(e){function t(){var t=e.call(this)||this;t.headList=[],t.groupList=[],t.skinName="XiandaoKnockoutSkin",UIHelper.SetLinkStyleLabel(t.goLabel);for(var i=0;3>=i;i++)t.groupList.push([]);t.GetGroup(t.group,3);for(var o=0,n=t.groupList;o<n.length;o++)for(var a=n[o],i=0;i<a.length;i++)a[i].index=i;return t.GetHeadComps(t.headGroup),t}return __extends(t,e),t.prototype.OnOpen=function(){this.myTimeGroup.visible=!1,this.observe(MessageDef.XIANDAO_UPDATE,this.UpdateContent),this.AddClick(this.goLabel,this.OnClick),this.UpdateHeadList(),this.UpdateContent()},t.prototype.OnClick=function(e){switch(e.currentTarget){case this.goLabel:GameGlobal.XiandaoModel.mMyTime&&GameGlobal.XiandaoModel.mMyTime.ret&&UserFb.CheckFighting()&&GameGlobal.XiandaoModel.SendEnterKnockout()}},t.prototype.UpdateRankType=function(){this.rankLabel.text=GameGlobal.XiandaoModel.GetGroupTypeStr(),this.rankTypeLabel.text=t.RANK_PRO_STR[GameGlobal.XiandaoModel.GetKnockoutId()],this.startTimeLabel.text="（晚上21点进行）"},t.prototype.UpdateMyTime=function(){var e=GameGlobal.XiandaoModel.mMyTime;return e&&e.ret?void(this.myTimeGroup.visible||(this.myTimeGroup.visible=!0,this.AddTimer(1e3,0,this.UpdateTime))):(this.myTimeGroup.visible=!1,void TimerManager.ins().remove(this.UpdateTime,this))},t.prototype.UpdateTime=function(){GameGlobal.XiandaoModel.mMyTime?this.nextTime.text=DateUtils.format_5(1e3*Math.max(GameGlobal.XiandaoModel.mMyTime.timeout-GameServer.serverTime,0),3):this.nextTime.text=""},t.prototype.UpdateContent=function(){this.UpdateRankType(),this.UpdateMyTime();for(var e=GameGlobal.XiandaoModel.GetKnockoutData(),t=e.turnDatas,i=0;i<this.groupList.length;i++)for(var o=0,n=this.groupList[i];o<n.length;o++){var a=n[o];a.SetEmpty()}for(var r=GameGlobal.XiandaoModel.GetKnockoutId(),i=0,s=r;s>=i;i++){var l=this.groupList[i],c=t[i];if(c){var u=void 0;u=i==s?GameGlobal.XiandaoModel.IsGame()?1:2:3;for(var p=0,h=0,d=l;h<d.length;h++){var _=d[h],f=c[p];f&&_.SetType(u,f.winPart),++p}}}for(var m=e?e.roleNoList||[]:[],g=this.groupList[0],i=0;8>i;i++){var v=2*i,y=m[v],C=m[v+1];g[i].noA=y,g[i].noB=C}if(3==GameGlobal.XiandaoModel.GetKnockoutId()){this.unHead1.visible=!1,this.unHead2.visible=!1;var c=t[3][0];if(c){var b=GameGlobal.XiandaoModel.GetRoleData(c.noA),S=GameGlobal.XiandaoModel.GetRoleData(c.noB);b&&UIHelper.SetHead(this.head1,b.shows.job,b.shows.sex),S&&UIHelper.SetHead(this.head2,S.shows.job,S.shows.sex)}}else this.unHead1.visible=!0,this.unHead2.visible=!0},t.prototype.UpdateHeadList=function(){for(var e=GameGlobal.XiandaoModel.GetKnockoutData(),t=e?e.roleNoList||[]:[],i=0,o=this.headList.length;o>i;i++){var n=this.headList[i],a=t[i],r=GameGlobal.XiandaoModel.GetRoleData(a);r?(UIHelper.SetHead(n.head,r.shows.job,r.shows.sex),n.nameLabel.text=GameString.GetSerAndName(r.serverId,r.roleName)):(UIHelper.SetHead(n.head,null,null),n.nameLabel.text="暂无")}},t.prototype.GetHeadComps=function(e){for(var t=0;t<e.numChildren;t++){var i=e.getChildAt(t);egret.is(i,"eui.Group")?this.GetHeadComps(i):this.headList.push(i)}},t.prototype.GetGroup=function(e,t){if(e&&!(0>t)){var i=e.getChildByName("upLine"),o=e.getChildByName("downLine"),n=e.getChildByName("video"),a=e.getChildByName("ya");this.GetGroup(i,t-1),this.GetGroup(o,t-1);if(i&&o){var r=new XiandaoKnockoutItem;r.turnId=t,r.upLine=i,r.downLine=o,r.video=n,n&&(n.itemData=r),r.yaBtn=a,a&&(a.itemData=r),this._AddClick(n,this._OnClickVideo),this._AddClick(a,this._OnClickYa),r.Init(),this.groupList[t].push(r)}}},t.prototype._OnClickYa=function(e){var t=e.currentTarget.itemData;ViewManager.ins().open(XiandaoBetPanel,t.turnId,t.index)},t.prototype._OnClickVideo=function(e){var t=e.currentTarget.itemData;ViewManager.ins().open(XiandaoVideoPanel,t.turnId,t.index)},t.RANK_TYPE_STR=(_a={},_a[1]="帝王榜",_a[2]="神道榜",_a[3]="守护榜",_a[4]="地界榜",_a),t.RANK_PRO_STR=(_b={},_b[0]="16进8强赛",_b[1]="8进4强赛",_b[2]="4进2强赛",_b[3]="决赛",_b),t}(BaseView);__reflect(XiandaoKnockoutView.prototype,"XiandaoKnockoutView",["ICommonWindowTitle"]);var XiandaoKnockoutItem=function(){function e(){this.img1=[],this.img2=[]}return e.prototype.GetImg=function(e){if(!e)return[];for(var t=[],i=0;i<e.numChildren;i++){var o=e.getChildAt(i);egret.is(o,"eui.Image")&&t.push(o)}return t},e.prototype.Init=function(){this.SetEmpty(),this.img1=this.GetImg(this.upLine),this.img2=this.GetImg(this.downLine)},e.prototype.SetVis=function(e,t){for(var i=0,o=e;i<o.length;i++){var n=o[i];[n.visible=t]}},e.prototype.SetWin=function(e){this.SetVis(this.img1,1==e),this.SetVis(this.img2,2==e),this.video&&(this.video.visible=!0),this.yaBtn&&(this.yaBtn.visible=!1)},e.prototype.SetEmpty=function(){this.SetVis(this.img1,!1),this.SetVis(this.img2,!1),this.video&&(this.video.visible=!1),this.yaBtn&&(this.yaBtn.visible=!1)},e.prototype.SetType=function(e,t){void 0===t&&(t=null),3==e?(this.SetVis(this.img1,1==t),this.SetVis(this.img2,2==t)):(this.SetVis(this.img1,!1),this.SetVis(this.img2,!1)),this.video&&(this.video.visible=2!=e),this.yaBtn&&(this.yaBtn.visible=2==e)&&(this.yaBtn.iconDisplay.filters=GameGlobal.XiandaoModel.GetBetData(this.index)?Color.GetFilter():null)},e}();__reflect(XiandaoKnockoutItem.prototype,"XiandaoKnockoutItem");var _a,_b,XiandaoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XiandaoSkin",t.group.tabChildren=[TabView.CreateTabViewData(XiandaoRankView),TabView.CreateTabViewData(XiandaoKnockoutView),TabView.CreateTabViewData(XiandaoApplyView)],t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.shopBtn,this._OnClick)},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.shopBtn:ViewManager.ins().open(ShopLayer,[ShopController.EN_SHOP_XIANDU])}},t.prototype.UpdateContent=function(){this.UpdateView()},t.prototype.OnOpen=function(){this.group.selectedIndex=-1},t.prototype.OnClose=function(){this.group.CloseView()},t.prototype.UpdateView=function(){var e=GameGlobal.XiandaoModel;e.IsKnockout()?this.group.selectedIndex=1:this.group.selectedIndex=2},t.RedPointCheck=function(){return GameGlobal.XiandaoModel.mRedPoint.IsRedPoint()},t.NAME="仙道会",t}(BaseView);__reflect(XiandaoPanel.prototype,"XiandaoPanel",["ICommonWindowTitle"]);var XiandaoRankPanel=function(e){function t(){var i=e.call(this)||this;return i.windowTitleIconName=t.NAME,i.skinName=UIHelper.PANEL_NO_TAB,i}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(XiandaoRankView)])},t.prototype.OnOpen=function(){this.mCommonWindowBg.OnAdded(this)},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="预选赛排行",t}(BaseEuiView);__reflect(XiandaoRankPanel.prototype,"XiandaoRankPanel",["ICommonWindow","ICommonWindowTitle"]);var XiandaoRankView=function(e){function t(){var t=e.call(this)||this;return t.skinName="XiandaoRankSkin",t.list.itemRenderer=XiandaoRankItem,t.list2.itemRenderer=XiandaoRankItem2,t}return __extends(t,e),t.prototype.OnOpen=function(){this.observe(MessageDef.XIANDAO_UPDATE,this.UpdateRank),this.UpdateRank(),GameGlobal.XiandaoModel.SendGetRank()},t.prototype.OnClose=function(){},t.prototype.UpdateRank=function(){var e=GameGlobal.XiandaoModel,t=e.GetRankData();this.list.dataProvider=new eui.ArrayCollection(t);var i=e.GetMyRankData();this.myRank.textFlow=TextFlowMaker.generateTextFlow("我的排名：|C:0x019704&T:"+i.GetRank()+"|"),this.myScore.textFlow=TextFlowMaker.generateTextFlow("我的积分：|C:0x019704&T:"+i.score+"|"),this.titleLabel.text=e.GetGroupTypeStr();var o=e.GetRankRecord();o.sort(function(e,t){return t.trunId-e.trunId}),this.list2.dataProvider=new eui.ArrayCollection(o)},t.prototype.UpdateContent=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseView);__reflect(XiandaoRankView.prototype,"XiandaoRankView",["ICommonWindowTitle"]);var XiandaoRankItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.bg.visible=this.itemIndex%2==0;var e=this.data;this.rankLabel.text=e.rank+"",this.nameLabel.text=GameString.GetSerAndName(e.serverId,e.roleName),this.scoreLabel.text=e.score+""},t}(eui.ItemRenderer);__reflect(XiandaoRankItem.prototype,"XiandaoRankItem");var XiandaoRankItem2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.turn.text="第"+StringUtils.numberToChinese(e.trunId)+"局",this.retImg.source=e.isWin?"ui_xdh_bm_icon_sheng":"ui_xdh_bm_icon_bai",this.retImg1.visible=e.isWin,this.retImg2.visible=!e.isWin,this.nameLabel1.text=GameString.GetSerAndName(e.server1,e.name1),this.nameLabel2.text=GameString.GetSerAndName(e.server2,e.name2)},t}(eui.ItemRenderer);__reflect(XiandaoRankItem2.prototype,"XiandaoRankItem2");var XiandaoResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XiandaoResultSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.AddTimer(4e3,1,this.CloseSelf);var i=e[0],o=e[1];this.retImg.source=i?"ui_xdh_bm_shengli":"ui_xdh_bm_shibai",this.Set(this.head1,this.levelLabel1,this.nameLabel1,this.ret1,1,0,o[0]),this.Set(this.head2,this.levelLabel2,this.nameLabel2,this.ret2,1,0,o[1])},t.prototype.Set=function(e,t,i,o,n,a,r){UIHelper.SetHead(e,n,a,!1);var s="";null!=r.addpoint&&(s="\n积分：+"+r.addpoint),i.text=GameString.GetSerAndName(r.serverid,r.name)+s,t.text="Lv."+r.level,o.source=r.win?"ui_xdh_bm_sheng":"ui_xdh_bm_bai"},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XiandaoResultPanel.prototype,"XiandaoResultPanel");var XiandaoSceneView=function(e){function t(){var t=e.call(this)||this;return t.m_ExitTime=-1,t.skinName="XiandaoSceneSkin",UIHelper.SetLinkStyleLabel(t.look),t._AddClick(t.arrBtn,t._OnClick),t._AddClick(t.look,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.m_ExitTime=-1,this.observe(MessageDef.UPDATE_CHAT_ZOOM,this._UpdateChatPos),this.observe(MessageDef.XIANDAO_MAP_UPDATE,this._UpdateRank),GameGlobal.MessageCenter.dispatch(MessageDef.MINICHATSCAL),this._UpdateChatPos(),this._UpdateRank(),this.AddTimer(1e3,0,this._UpdateTime),GameGlobal.XiandaoModel.IsKnockout()?(this.titleLabel.text=XiandaoKnockoutView.RANK_PRO_STR[GameGlobal.XiandaoModel.GetKnockoutId()],this.rankGroup.visible=!1):(this.titleLabel.text="预选赛",this.rankGroup.visible=!0)},t.prototype.OnClose=function(){this.removeObserve(),TimerManager.ins().removeAll(this)},t.prototype._UpdateChatPos=function(){this.globalToLocal(0,MiniChatPanel.POS,egret.$TempPoint),this.group.y=egret.$TempPoint.y},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.arrBtn:var t=this.infoGroup.visible=!this.infoGroup.visible;this.arrBtn.icon=t?"ui_zd_bt_shousuo":"ui_zd_bt_zhankai";break;case this.look:ViewManager.ins().open(XiandaoRankPanel)}},t.prototype._UpdateMyTime=function(){this.m_ExitTime<0&&(this.m_ExitTime=3);var e=this.m_ExitTime--;return 0>=e&&(GameGlobal.CommonRaidModel.MapLeave(),TimerManager.ins().removeAll(this)),e},t.prototype._UpdateTime=function(){var e=GameGlobal.XiandaoModel;if(e.IsKnockout())if(e.mMyTime&&!e.mMyTime.ret){var t=this._UpdateMyTime();this.timeLabel.text="活动结束，将在"+t+"秒后退出场景"}else this.timeLabel.text="下一场预计在"+Math.max(e.mMyTime.timeout-GameServer.serverTime,0)+"秒后进行";else{if(e.IsExitGame()||e.IsCloseAct()){var t=this._UpdateMyTime();return void(e.IsExitGame()?this.timeLabel.text="您已败了3场比赛，将在"+t+"秒后退出场景":this.timeLabel.text="活动结束，将在"+t+"秒后退出场景")}this.timeLabel.text="下一场预计在"+e.GetNextTime()+"秒后进行"}},t.prototype._UpdateRank=function(){for(var e=GameGlobal.XiandaoModel.GetSimpleRankData(),t=[],i=[],o=0;3>o;o++){var n=e[o],a=o+1+"     ";n?(a+=n.roleName,i.push(n.score)):(a+="暂无",i.push(0)),t.push(a)}this.rankLabel.text=t.join("\n"),this.rankValue.text=i.join("\n");var r=GameGlobal.XiandaoModel.GetSimpleMyRank();r||(r="未上榜"),this.myRank.text="我的排名："+r+"	积分："+GameGlobal.XiandaoModel.GetSimpleMyRankScore()},t.LAYER_LEVEL=LayerManager.UI_BATTLE,t}(BaseView);__reflect(XiandaoSceneView.prototype,"XiandaoSceneView");var XiandaoVideoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XiandaoVideoSkin",t.list.itemRenderer=XiandaoVideoItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.mCommonWindowBg.OnAdded(this);var n=GameGlobal.XiandaoModel,a=this.m_TurnData=n.GetTurnData(i,o);if(a){var r=n.GetRoleData(a.noA),s=n.GetRoleData(a.noB);this.SetAttData(r,this.att1,this.role1),this.SetAttData(s,this.att2,this.role2);for(var l=[],c=0;c<a.fightRecord.length;c++)l.push({turn:a,role1:r,role2:s,turnId:i,index:o});this.list.dataProvider=new eui.ArrayCollection(l)}},t.prototype.OnClose=function(){},t.prototype.GetAttLabel=function(e){for(var t=[],i=0,o=e.$children;i<o.length;i++)for(var n=o[i],a=0,r=n.$children;a<r.length;a++){var s=r[a];if(egret.is(s,"eui.Label")){t.push(s);break}}return t},t.prototype.SetAttData=function(e,t,i){if(e){var o=this.GetAttLabel(t);o[0].text=GameString.GetSerAndName(e.serverId,e.roleName),o[1].text="Lv."+e.lv,o[2].textFlow=TextFlowMaker.generateTextFlow("战力：|C:0x019704&T:"+e.power+"|"),i.SetShowImage(e.shows)}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(XiandaoVideoPanel.prototype,"XiandaoVideoPanel");var XiandaoVideoItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){UIHelper.SetLinkStyleLabel(this.videoLabel),this.videoLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){this.data.turn;GameGlobal.XiandaoModel.SendVideo([16,8,4,2][this.data.turnId],this.data.index+1,this.itemIndex+1)},t.prototype.dataChanged=function(){if(this.data){var e=this.data.turn;this.turn.text="第"+StringUtils.numberToChinese(this.itemIndex+1)+"局";var t=e.noA==e.winNo,i=this.data.role1,o=this.data.role2;this.nameLabel1.text=GameString.GetSerAndName(i.serverId,i.roleName),this.nameLabel2.text=GameString.GetSerAndName(o.serverId,o.roleName),this.retImg1.source=t?"ui_xdh_bm_icon_sheng":"ui_xdh_bm_icon_bai",this.retImg2.source=t?"ui_xdh_bm_icon_bai":"ui_xdh_bm_icon_sheng"}},t}(eui.ItemRenderer);__reflect(XiandaoVideoItem.prototype,"XiandaoVideoItem");var XianlvFzModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_XIANLV_FZ)||this;return t.mMsgDefUpdateExp=MessageDef.XIANLV_FZ_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.XIANLV_FZ_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.XIANLV_FZ_UPDATE,t.mMsgDefInit=MessageDef.XIANLV_FZ_INIT,t.mMsgDefUpdateEquip=MessageDef.XIANLV_FZ_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_XIANLV_FZ_EQUIP_UP,t.mRedPoint=new XianlvFzRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.CircleBaseConfig,this.LvproConfig=GameGlobal.Config.CircleLvproConfig,this.SkillConfig=GameGlobal.Config.CircleSkillConfig,this.AttrsConfig=GameGlobal.Config.CircleAttrsConfig,this.ProgressConfig=GameGlobal.Config.CircleProgressConfig,this.SkinConfig=GameGlobal.Config.CircleSkinConfig,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this),GameGlobal.RaidMgr.UpdateRoleXianlvFz(this.mDressId)},t}(UserTemplate);__reflect(XianlvFzModel.prototype,"XianlvFzModel");var XianlvFzRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.XIAN_FZ,t}return __extends(t,e),t.prototype.IsRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_17,!0)?e.prototype.IsRedPoint.call(this):!1},t}(UserTemplateRedPoint);__reflect(XianlvFzRedPoint.prototype,"XianlvFzRedPoint");var XianlvModel=function(e){function t(){var t=e.call(this)||this;return t.MAX_LEVEL=10,t.MAX_STAR=10,t.MAX_QY_LEVEL=20,t.mXianlvList={},t.mBattleList=[],t.mRedPoint=new XianlvModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_xianlv_init,t._DoInitInfo),t}return __extends(t,e),t.prototype.Init=function(){var e=GameGlobal.Config.partnerBiographyConfig;for(var i in e){var o=new XianlvInfo;o.mXianlvId=parseInt(i),this.mXianlvList[i]=o;var n=e[i].material.id;t.MATERIAL_ID[n]=Number(i),GameGlobal.UserBag.AddListenerItem(n,MessageDef.BAG_XIANLV_ACT_ITEM)}for(var i in GameGlobal.Config.partnerLvproConfig){this.MAX_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.partnerLvproConfig[i]),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.partnerLvproConfig[i][0].cost[1].id,MessageDef.BAG_XIANLV_RANK_ITEM);break}for(var i in GameGlobal.Config.partnerAttrsConfig)GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.partnerAttrsConfig[i][0].cost[0].id,MessageDef.BAG_XIANLV_STAR_ITEM);for(var i in GameGlobal.Config.partnerAttrsConfig){this.MAX_STAR=CommonUtils.getObjectLength(GameGlobal.Config.partnerAttrsConfig[i]);break}this.MAX_QY_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.partnerFreshSkillConfig)},t.prototype._DoInitInfo=function(e){for(var t=0,i=e.list;t<i.length;t++){var o=i[t],n=this.mXianlvList[o.id];n&&n.UpdateInfo(o)}this.mBattleList=e.outbound,GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_INIT_INFO)},t.prototype.GetXianlvId=function(){for(var e=0,t=this.mBattleList;e<t.length;e++){var i=t[e];if(i)return i}return 0},t.prototype.SendActive=function(e){var t=this,i=new Sproto.cs_xianlv_active_request;i.id=e,this.Rpc(C2sProtocol.cs_xianlv_active,i,function(i){if(i.ret){if(t.mXianlvList[e]){t.mXianlvList[e].Active();for(var o=!1,n=0,a=t.mBattleList;n<a.length;n++){var r=a[n];if(r){o=!0;break}}o||(t.SendBattle(e,0),GameGlobal.RaidMgr.UpdateRoleXianlv(t.GetXianlvId()))}else console.error("not active pet => petid "+e);GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_ACTIVE),GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_UPATE_INFO)}},this)},t.prototype.SendDress=function(e){},t.prototype.SendBattle=function(e,t){var i=CommonUtils.copyDataHandler(this.mBattleList);i[t]=e;var o=new Sproto.cs_xianlv_outbound_request;o.first=i[0]||0,o.second=i[1]||0,CommonUtils.ArrayEqual(this.mBattleList,i)||(this.mBattleList=i,this.Rpc(C2sProtocol.cs_xianlv_outbound,o),GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_UPATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_UPATE_BATTLE),GameGlobal.RaidMgr.UpdateRoleXianlv(this.GetXianlvId()))},t.prototype.SendUnBattle=function(e){for(var t=this.mBattleList,i=0;i<t.length;i++){var o=t[i];if(o==e){this.SendBattle(0,i);break}}},t.prototype.SendUpLevel=function(e,t){var i=this,o=new Sproto.cs_xianlv_addexp_request;o.id=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_xianlv_addexp,o,function(t){var o=i.mXianlvList[e];o?t.ret&&(o.mExp=t.exp,o.mLevel=t.level,GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_UPATE_EXP),GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_UPATE_INFO)):console.error("not SendUpLevel petid => "+e)},this)},t.prototype.SendUpStar=function(e){var t=this,i=new Sproto.cs_xianlv_upstar_request;i.id=e,this.Rpc(C2sProtocol.cs_xianlv_upstar,i,function(i){var o=t.mXianlvList[e];o?i.ret&&(o.mStar=i.star,GameGlobal.MessageCenter.dispatch(MessageDef.XIANLV_UPATE_INFO)):console.error("not SendUpLevel petid => "+e)},this)},t.prototype.HasXianlv=function(e){return e&&this.mXianlvList[e]&&this.mXianlvList[e].mLevel?!0:!1},t.prototype.HasBattle=function(e){return-1!=this.mBattleList.indexOf(e)},t.prototype.GetBattlePos=function(e){return this.mBattleList.indexOf(e)},t.prototype.getBattledXianlv=function(){return this.mBattleList[0]},t.prototype.GetXianlvInfo=function(e){return this.mXianlvList[e]},t.prototype.GetLevel=function(e){return e?this.mXianlvList[e].mLevel||0:0},t.prototype.GetAllPower=function(){var e=0;for(var t in this.mXianlvList){var i=this.mXianlvList[t];e+=i.GetPower()}return e},t.prototype.GetAllAttrsByType=function(e){var t=[];for(var i in this.mXianlvList){var o=this.mXianlvList[i];if(o.mLevel){var n=o[e].call(o);if(n)for(var a=0;a<n.length;a++){var r=n[a];t[a]?t[a].value+=r.value:t[a]={type:r.type,value:r.value}}}}return t},t.prototype.GetAllAttrs=function(){var e=this.GetAllAttrsByType("GetAttrs");return 0==e.length?XianlvConst.GetBaseAttrs():e},t.prototype.GetAllQyAttr=function(){var e=this.GetQyLevel();return e?GameGlobal.Config.partnerFreshSkillConfig[e].attrs:XianlvConst.GetQyAttrs()},t.prototype.GetQyLevel=function(){for(var e=this.GetAllLevel(),t=GameGlobal.Config.partnerFreshSkillConfig,i=0,o=1;99>o;o++){var n=t[o];if(!n)break;if(e<n.lv)break;i=o}return i},t.prototype.GetBattleCount=function(){for(var e=0,t=0,i=this.mBattleList;t<i.length;t++){var o=i[t];o&&++e}return e},t.prototype.GetActiveCount=function(){var e=0;for(var t in this.mXianlvList){var i=this.mXianlvList[t];i.mLevel&&++e}return e},t.prototype.GetAllLevel=function(){var e=0;for(var t in this.mXianlvList){var i=this.mXianlvList[t];i.mLevel&&(e+=i.mLevel)}return e},t.prototype.IsRedPointXianlv=function(e){return this.mRedPoint.IsRedAct(e)?!0:this.mRedPoint.IsRedStar(e)?!0:!1},t.prototype.SetShowId=function(e){var t=[],i={type:6,value:e};t.push(i),GameGlobal.Chat.chatShareInfo(12,t)},t.MATERIAL_ID={},t}(BaseSystem);__reflect(XianlvModel.prototype,"XianlvModel");var XianlvModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.m_ActiveList={},i.m_RankList={},i.m_StarList={},i.m_Model=t,i}return __extends(t,e),t.prototype.IsRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_15,!0)?e.prototype.IsRedPoint.call(this):!1},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e[t.INDEX_RANK]=this.GetIndexRank,e[t.INDEX_STAR]=this.GetIndexStar,e[t.INDEX_BATTLE]=this.GetIndexBattle,e;var e},t.prototype.OnMessage=function(i){return i==MessageDef.BAG_XIANLV_RANK_ITEM?this.ClearFlag(t.INDEX_RANK):e.prototype.OnMessage.call(this,i),!0},t.prototype.OnChange=function(e){e==t.INDEX_ACT?GameGlobal.MessageCenter.dispatch(MessageDef.RP_BAG_XIANLV_ACT_ITEM):GameGlobal.MessageCenter.dispatch(MessageDef.RP_XIANLV)},t.prototype.GetMessageDef=function(){return[MessageDef.BAG_XIANLV_ACT_ITEM,MessageDef.XIANLV_ACTIVE,MessageDef.XIANLV_INIT_INFO,MessageDef.BAG_XIANLV_RANK_ITEM,MessageDef.BAG_XIANLV_STAR_ITEM,MessageDef.XIANLV_UPATE_BATTLE]},t.prototype.GetIndexRank=function(){this.m_RankList={};var e=this.m_Model.mXianlvList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mLevel<this.m_Model.MAX_LEVEL){for(var o=i.GetLevelConfig(),n=1,a=!0,r=0,s=o.cost;r<s.length;r++){var l=s[r];if(!Checker.Data({type:l.type,id:l.id,count:l.count*n},!1)){a=!1;break}}a&&(this.m_RankList[i.mXianlvId]=!0)}}for(var t in this.m_RankList)return!0;return!1},t.prototype.GetIndexStar=function(){this.m_StarList={};var e=this.m_Model.mXianlvList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mStar<this.m_Model.MAX_STAR){var o=GameGlobal.Config.partnerAttrsConfig[i.mXianlvId][(i.mStar||1)-1];Checker.Datas(o.cost,!1)&&(this.m_StarList[i.mXianlvId]=!0)}}for(var t in this.m_StarList)return!0;return!1},t.prototype.GetIndexBattle=function(){for(var e=0,t=0,i=this.m_Model.mBattleList;t<i.length;t++){var o=i[t];o||e++}if(!e)return!1;var n=this.m_Model.mXianlvList;for(var a in n){var r=n[a];if(r.mLevel>0&&!this.m_Model.HasBattle(r.mXianlvId))return!0}return!1},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.m_ActiveList)if(e)return!0;return!1},t.prototype.DoActive=function(){this.m_ActiveList={};var e=GameGlobal.Config.partnerBiographyConfig;for(var t in e)if(!this.m_Model.HasXianlv(parseInt(t))){var i=e[t].material;GameGlobal.UserBag.GetCount(i.id)>=i.count&&(this.m_ActiveList[t]=!0)}},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.m_ActiveList[e]},t.prototype.IsRedRank=function(e){return this.m_RankList[e]?!0:!1},t.prototype.IsRedStar=function(e){return this.m_StarList[e]?!0:!1},t.INDEX_ACT=0,t.INDEX_RANK=1,t.INDEX_STAR=2,t.INDEX_BATTLE=3,t}(IRedPoint);__reflect(XianlvModelRedPoint.prototype,"XianlvModelRedPoint");var XianlvXwModel=function(e){function t(){var t=e.call(this,UserTemplate.TYPE_XIANLV_XW)||this;return t.mMsgDefUpdateExp=MessageDef.XIANLV_XW_UPDATE_EXP,t.mMsgDefUpdateDrug=MessageDef.XIANLV_XW_UPDATE_DRUG,t.mMsgDefUpdate=MessageDef.XIANLV_XW_UPDATE,t.mMsgDefInit=MessageDef.XIANLV_XW_INIT,t.mMsgDefUpdateEquip=MessageDef.XIANLV_XW_UPDATE_EQUIP,t.mMsgDefEquipRedPoint=MessageDef.RP_BAG_XIANLV_XW_EQUIP_UP,t.mRedPoint=new XianlvXwRedPoint(t),t}return __extends(t,e),t.prototype.Init=function(){this.BaseConfig=GameGlobal.Config.PositionBaseConfig,this.LvproConfig=GameGlobal.Config.PositionLvproConfig,this.SkillConfig=GameGlobal.Config.PositionSkillConfig,this.AttrsConfig=GameGlobal.Config.PositionAttrsConfig,this.ProgressConfig=GameGlobal.Config.PositionProgressConfig,this.SkinConfig=GameGlobal.Config.PositionSkinConfig,e.prototype.Init.call(this)},t.prototype.UpdateDress=function(){e.prototype.UpdateDress.call(this),GameGlobal.RaidMgr.UpdateRoleXianlvXw(this.mDressId)},t}(UserTemplate);__reflect(XianlvXwModel.prototype,"XianlvXwModel");var XianlvXwRedPoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mEquipType=ItemType.XIAN_XW,t}return __extends(t,e),t.prototype.IsRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_18,!0)?e.prototype.IsRedPoint.call(this):!1},t}(UserTemplateRedPoint);__reflect(XianlvXwRedPoint.prototype,"XianlvXwRedPoint");var XianlvConst=function(){function e(){}return e.GetSkin=function(e){return AppearanceConfig.GetUIPath(e)},e.SetSkillIcon=function(){},e.GetHeadIcon=function(e){return GameGlobal.Config.partnerBiographyConfig[e].icon},e.GetBaseAttrs=function(){return this.BASE_ATTR||(this.BASE_ATTR=PetConst.GetDefaultAttrs(GameGlobal.Config.partnerLvproConfig,"attrs",2)),this.BASE_ATTR},e.GetQyAttrs=function(){return this.QY_ATTR||(this.QY_ATTR=PetConst.GetDefaultAttrs(GameGlobal.Config.partnerFreshSkillConfig,"attrs",1)),this.QY_ATTR},e.GetSkillDesc=function(e,t){var i;if(!GameGlobal.Config.partnerAttrsConfig[e])return"";if(i=GameGlobal.Config.partnerAttrsConfig[e][t-1]){var o=GameGlobal.Config.SkillsConfig[i.skillid];
if(o)return o[GameGlobal.Config.SkillsConfig_keys.desc]}return""},e.GetSkillId=function(e,t){var i;return GameGlobal.Config.partnerAttrsConfig[e]?(i=GameGlobal.Config.partnerAttrsConfig[e][t-1],i?i.skillid:0):0},e}();__reflect(XianlvConst.prototype,"XianlvConst");var XianlvInfo=function(){function e(){this.mExp=0,this.mLevel=0,this.mStar=0,this.mPower=0}return e.prototype.UpdateInfo=function(e){this.mExp=e.exp,this.mLevel=e.level,this.mStar=e.star},e.prototype.Active=function(){this.mLevel=1,this.mStar=1},e.prototype.GetLevelConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.partnerBiographyConfig[this.mXianlvId],o=GameGlobal.Config.partnerLvproConfig[i.quality][t-1];return o},e.prototype.GetGradeConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.partnerBiographyConfig[this.mXianlvId],o=GameGlobal.Config.partnerGiftConfig[i.quality][t-1];return o},e.prototype.GetPower=function(e){var t=this.GetAttrs(e);return t?ItemConfig.CalcAttrScoreValue(t):0},e.prototype.GetSkin=function(){return XianlvConst.GetSkin(this.mXianlvId)},e.prototype.GetAttrs=function(e){var t=this.GetGradeConfig(e);return t?AttributeData.AttrAddition(GameGlobal.Config.partnerBiographyConfig[this.mXianlvId].attrs,t.attrs):[]},e.prototype.GetSkillId=function(e){void 0===e&&(e=0);var t=GameGlobal.Config.partnerAttrsConfig[this.mXianlvId];if(t){var i=t[this.mStar-1+e]||t[0];return i.skillid[0]}return 0},e.prototype.GetNextSkillId=function(){var e=GameGlobal.Config.partnerAttrsConfig[this.mXianlvId];if(e){var t=e[this.mStar]||e[0];return t.skillid[0]}return 0},e}();__reflect(XianlvInfo.prototype,"XianlvInfo");var XianlvAllAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianlvAllAttrSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){var e=GameGlobal.XianlvModel;this.powerLabel.text=e.GetAllPower(),this.levelAttr.textFlow=AttributeData.GetAttrTabString(e.GetAllAttrs()),this.zizhiAttr.textFlow=AttributeData.GetAttrTabString(e.GetAllQyAttr()),this.commonDialog.OnAdded(this);for(var t=0,i=0,o=e.mBattleList;i<o.length;i++){var n=o[i];if(n){t=n;break}}for(var n in e.mXianlvList)if(e.HasXianlv(parseInt(n))){t=parseInt(n);break}t&&this.showPanel.SetBody(XianlvConst.GetSkin(t))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianlvAllAttrPanel.prototype,"XianlvAllAttrPanel");var XianlvAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianlvAttrSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=GameGlobal.XianlvModel.GetXianlvInfo(i);this.powerLabel.text=o.GetPower(),this.levelAttr.textFlow=AttributeData.GetAttrTabString(o.GetAttrs()),XianlvBaseInfoPanel.SetStarGroup(this.starGroup,o.mStar),this.commonDialog.OnAdded(this),this.lbLev.text=o.mLevel+"\n阶",this.showPanel.SetBody(XianlvConst.GetSkin(i))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianlvAttrPanel.prototype,"XianlvAttrPanel");var MsMovieClipData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.$mcData=null,t.numFrames=1,t.frames=[],t.frameRate=0,t}return __extends(t,e),t.prototype.$init=function(e,t){this.m_JsonData=t,this.setMCData(e)},t.prototype.getKeyFrameData=function(e){var t=this.frames[e-1];return t.frame&&(t=this.frames[t.frame-1]),t},t.prototype.getTextureByFrame=function(e){var t=this.getKeyFrameData(e);return t.res?this.getTextureByResName(t.res):null},t.prototype.$getOffsetByFrame=function(e,t){var i=this.getKeyFrameData(e);i.res&&t.setTo(0|i.x,0|i.y)},t.prototype.getTextureByResName=function(e){return this.m_JsonData.res[e]},t.prototype.$isDataValid=function(){return this.frames.length>0},t.prototype.$isTextureValid=function(){return null!=this.$mcData},t.prototype.$fillMCData=function(e){this.frameRate=e.frameRate||24,this.fillFramesData(e.frames)},t.prototype.fillFramesData=function(e){for(var t,i=this.frames,o=e?e.length:0,n=0;o>n;n++){var a=e[n];if(i.push(a),a.duration){var r=parseInt(a.duration);if(r>1){t=i.length;for(var s=1;r>s;s++)i.push({frame:t})}}}this.numFrames=i.length},Object.defineProperty(t.prototype,"mcData",{get:function(){return this.$mcData},set:function(e){this.setMCData(e)},enumerable:!0,configurable:!0}),t.prototype.setMCData=function(e){this.$mcData!=e&&(this.$mcData=e,e&&this.$fillMCData(e))},t}(egret.HashObject);__reflect(MsMovieClipData.prototype,"MsMovieClipData");var XianlvBattlePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianlvBattleSkin",t._AddClick(t.btn1,t._OnClick),t._AddClick(t.btn2,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_SelXianlvId=e[0],this.commonDialog.OnAdded(this),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){var t=0;switch(e.currentTarget){case this.btn1:t=0;break;case this.btn2:t=1}GameGlobal.XianlvModel.SendBattle(this.m_SelXianlvId,t),this.CloseSelf()},t.prototype.UpdateContent=function(){for(var e=GameGlobal.XianlvModel,t=0;2>t;t++){var i=this["head"+(t+1)],o=e.mBattleList[t];o?(i.visible=!0,XianlvHeadItem.SetContentByInfo(i,e.GetXianlvInfo(o))):i.visible=!1}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianlvBattlePanel.prototype,"XianlvBattlePanel");var XianlvFzPanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=6,t.mHasDress=!1,t.mModel=GameGlobal.XianlvFzModel,t.mModelRedPoint=GameGlobal.XianlvFzModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.xianlv_position,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.help,this._click)},t.RedPointCheck=function(){return GameGlobal.XianlvFzModel.mRedPoint.IsRedPoint()},t.prototype._click=function(){ViewManager.ins().open(ActivityDescPanel,6,"规则说明")},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_17)},t.NAME="法阵",t}(RoleTemplatePanel);__reflect(XianlvFzPanel.prototype,"XianlvFzPanel");var XianlvInactiveView=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianlvInactiveSkin",t.baseView.currentState="inactive",t.baseView.powerLabel.checkAttr&&(t.baseView.powerLabel.checkAttr.visible=!1),t._AddClick(t.getwayLabel,t._OnClick),t._AddClick(t.actBtn,t._OnClick),t._AddClick(t.btnYuanfen,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){this.btnYuanfen.visible=Deblocking.Check(GameGlobal.Config.FateBaseConfig.openlv,!0),UIHelper.ShowRedPoint(this.btnYuanfen,GameGlobal.YuanfenModel.IsRedPoint())},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.getwayLabel:break;case this.actBtn:var t=GameGlobal.Config.partnerBiographyConfig[this.m_XianlvId];t&&Checker.Data(t.material)&&GameGlobal.XianlvModel.SendActive(this.m_XianlvId);break;case this.btnYuanfen:ViewManager.ins().open(YuanfenMainWin)}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t),this.m_XianlvId=t;var i=GameGlobal.Config.partnerBiographyConfig[t];this.needItemView.SetItemId(i.material.id,i.material.count),this.actBtn.visible=GameGlobal.UserBag.GetCount(i.material.id)>=i.material.count,(this.getwayLabel.visible=!this.actBtn.visible)&&this.getwayLabel.SetId(i.material.id)},t.prototype.SetContext=function(e){this.mContext=e},t}(XianlvBaseInfoPanel);__reflect(XianlvInactiveView.prototype,"XianlvInactiveView");var XianlvinactiveSkillItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){0==this.itemIndex?this.useTypeImg.visible=!0:this.useTypeImg.visible=!1},t}(eui.ItemRenderer);__reflect(XianlvinactiveSkillItem.prototype,"XianlvinactiveSkillItem");var XianLvInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianLvInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.skillIcon,this._OnClick),this.commonDialog.title="详细属性"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),0!=e.length&&(this.xianLvinfo=e[0],this.UpdateContent())},t.prototype.UpdateContent=function(){var e=(GameGlobal.XianlvModel,this.xianLvinfo);this.xianlvId=e.id,this.img.source=PetConst.XUXING_IMG[e.fiveele];var t=new PetInfo;t.mPetId=e.id,t.mName=e.name,this.name_label.textColor=ItemBase.GetColorByQuality(e.quality),this.name_label.text=e.name,this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrs),this.petShowPanel.SetBody(PetConst.GetSkin(e.id)),this.skillDesc.text=XianlvConst.GetSkillDesc(e.id,1),PetSkillIconItem.SetContent(this.skillIcon,XianlvConst.GetSkillId(e.id,1),0),this.attr0Txt.text=AttributeData.getAttStr(e.attrs,0,0,":",!1,"#ffffff","            "),this.starNum.text=e.star||1},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.skillIcon:var t=(GameGlobal.XianlvModel.GetXianlvInfo(this.xianlvId),XianlvConst.GetSkillId(this.xianlvId,1)),i=XianlvConst.GetSkillId(this.xianlvId,2);ViewManager.ins().open(XianlvSkillTipPanel,t,i,1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianLvInfoPanel.prototype,"XianLvInfoPanel",["ICommonWindowTitle"]);var XianlvMainPanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.mXianlvList=[],t.skinName="XianlvMainSkin",t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,112),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.viewStack.tabChildren=[TabView.CreateTabViewData(XianlvUpLevelPanel,{skinName:"XianlvUpLevelSkin",mContext:this}),TabView.CreateTabViewData(XianlvupStarPanel,{skinName:"XianlvupStarSkin",mContext:this}),TabView.CreateTabViewData(XianlvFzPanel,{mContext:this}),TabView.CreateTabViewData(XianlvXwPanel,{mContext:this})],this.commonWindowBg.SetViewStack(this.viewStack),this.list.itemRenderer=XianlvHeadItem,this.mXianlvList=CommonUtils.GetArray(GameGlobal.Config.partnerBiographyConfig,"id");var e=function(e){var t=e.id,i=GameGlobal.XianlvModel;if(i.HasBattle(e.id)){var o=i.GetBattlePos(e.id);return t=o-1e7}if(i.HasXianlv(e.id)){var n=GameGlobal.Config.partnerBiographyConfig[e.id].quality;t=t-1e6-1e4*n}else if(i.mRedPoint.IsRedAct(e.id))return e.id-1e5;return t};this.mXianlvList.sort(function(t,i){return e(t)-e(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mXianlvList),this.list.selectedIndex=this.mSelectIndex,this._AddItemClick(this.list,this._OnItemTap),this._AddClick(this.help,this._click)},t.prototype._click=function(){this.commonWindowBg.setHelp(5,"规则说明")},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]||0),this.OnOpenIndex(e[0]||0),this.observe(MessageDef.XIANLV_UPATE_INFO,this.UpdateContent),this.observe(MessageDef.RP_BAG_XIANLV_ACT_ITEM,this.UpdateRedPointIndex),this.observe(MessageDef.RP_XIANLV,this.UpdateRedPointIndex),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateRedPointIndex),this.UpdateRedPointIndex(),this.observe(GameGlobal.XianlvFzModel.GetItemRpUpdateMsg(),this.UpdateRedPointIndex2),this.observe(GameGlobal.XianlvFzModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPointIndex2),this.UpdateRedPointIndex2(),this.observe(GameGlobal.XianlvXwModel.GetItemRpUpdateMsg(),this.UpdateRedPointIndex3),this.observe(GameGlobal.XianlvXwModel.GetItemEquipRpUpdateMsg(),this.UpdateRedPointIndex3),this.UpdateRedPointIndex3(),this.mListLRBtnCtrl.OnRefresh(),this.UpdateContent(),this.observe(MessageDef.ACTIVITY_ADVANCED_ICON_SHOW,this.updateJiJieBtnPng),this.updateJiJieBtnPng()},t.prototype.updateJiJieBtnPng=function(){ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(2),[ActivityKaiFuJiJieType.xianlv_position]),ActivityKaiFuModel.ShowJiJieKuangHuanIcon(this.commonWindowBg.tabBar.getChildAt(3),[ActivityKaiFuJiJieType.xianlv_circle])},t.prototype.OnClose=function(){this._ClosePetView(),MainBottomPanel.CloseNav(this)},t.prototype._OnItemTap=function(e){var t=e.itemIndex;this.mSelectIndex=t,this.UpdateContent()},t.prototype.UpdateList=function(){for(var e=[],t=0,i=this.mXianlvList;t<i.length;t++){var o=i[t];e.push(XianlvHeadItem.RedPoint(o.id))}this.mListLRBtnCtrl.SetRedPointList(e),this.mListLRBtnCtrl.OnRefresh(),UIHelper.ListRefresh(this.list)},t.prototype.UpdateContent=function(){this.UpdateList(),this.commonWindowBg.GetCurViewStackElement().UpdateContent(),this._UpdatePetView()},t.prototype._UpdatePetView=function(){var e=this.mXianlvList[this.mSelectIndex].id;GameGlobal.XianlvModel.HasXianlv(e)?this._ClosePetView():(this.mXianlvInactiveView||(this.mXianlvInactiveView=new XianlvInactiveView,this.mXianlvInactiveView.SetContext(this)),this.mXianlvInactiveView.parent||(this.group.addChild(this.mXianlvInactiveView),this.mXianlvInactiveView.DoOpen([])),this.mXianlvInactiveView.UpdateInfo(e))},t.prototype.UpdateRedPointIndex=function(){this.UpdateList(),this.commonWindowBg.CheckTalRedPoint(0),this.commonWindowBg.CheckTalRedPoint(1)},t.prototype.UpdateRedPointIndex2=function(){this.commonWindowBg.CheckTalRedPoint(2)},t.prototype.UpdateRedPointIndex3=function(){this.commonWindowBg.CheckTalRedPoint(3)},t.prototype._ClosePetView=function(){this.mXianlvInactiveView&&this.mXianlvInactiveView.parent&&(this.mXianlvInactiveView.DoClose(),DisplayUtils.removeFromParent(this.mXianlvInactiveView))},t.prototype.OnOpenIndex=function(e){var t=0==e||1==e;return this.showGroup.visible=t,!0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_15)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(XianlvMainPanel.prototype,"XianlvMainPanel",["ICommonWindow"]);var XianlvHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.starGroup.itemRenderer=XianlvStar,this.starGroup.visible=!0},t.prototype.dataChanged=function(){var e=this.data;t.SetContent(this,e);var i=GameGlobal.XianlvModel;i.HasBattle(e.id)?this.imgBattle.source="ui_bm_chuzhan":this.imgBattle.source="",null==this.mStarList&&(this.mStarList=[]);var o=i.GetXianlvInfo(e.id);this.starGroup.numChildren!=o.mStar&&(this.mStarList.length=o.mStar,this.starGroup.dataProvider=new eui.ArrayCollection(this.mStarList)),this.redPoint.visible=t.RedPoint(e.id)},t.RedPoint=function(e){return GameGlobal.XianlvModel.IsRedPointXianlv(e)||GameGlobal.XianlvModel.mRedPoint.IsRedRank(e)},t.SetContent=function(e,t){e.lbName.text=t.name,e.lbName.textColor=ItemBase.GetColorByQuality(t.quality),e.lbLev.text=GameGlobal.XianlvModel.HasXianlv(t.id)?GameGlobal.XianlvModel.GetLevel(t.id)+"阶":"",e.item.SetQuality(t.quality),e.item.setItemImg("resource/assets/image/head/xianlv/"+t.icon+".png"),e.item.setGray(!GameGlobal.XianlvModel.HasXianlv(t.id)),null!=t.jicon?(e.jicon.visible=!0,e.jicon.source=t.jicon):e.jicon.visible=!1},t.SetContentByInfo=function(e,t){this.SetContent(e,GameGlobal.Config.partnerBiographyConfig[t.mXianlvId])},t}(eui.ItemRenderer);__reflect(XianlvHeadItem.prototype,"XianlvHeadItem");var XianlvStar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.ItemRenderer);__reflect(XianlvStar.prototype,"XianlvStar");var XianlvQyPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianlvQySkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=GameGlobal.XianlvModel,t=e.GetAllLevel(),i=GameGlobal.Config.partnerFreshSkillConfig,o=0,n=1;99>n;n++){var a=i[n];if(!a)break;if(t<a.lv)break;o=n}1>o?UIHelper.SetVisible(this.curGroup,!1):o>=e.MAX_QY_LEVEL&&UIHelper.SetVisible(this.nextGroup,!1);var r=i[o];r?(this.levelLabel.textFlow=TextFlowMaker.generateTextFlow("等级|C:0x019704:&T:"+r.lv+"|"),this.curValue.text=AttributeData.getAttStr(r.attrs,1)):this.levelLabel.textFlow=TextFlowMaker.generateTextFlow("|C:0x019704:&T:未激活|");var s=i[o+1];s&&(this.nextValue.text=AttributeData.getAttStr(s.attrs,1),this.conLabel.textFlow=TextFlowMaker.generateTextFlow("仙侣总等阶达到|C:0x019704:&T:"+s.lv+"阶|可激活"),this.curAllLevel.text="当前总等阶段："+t)},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianlvQyPanel.prototype,"XianlvQyPanel");var XianlvSkillTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianlvSkillTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1],n=Math.max(e[2],1);if(PetSkillIconItem.SetContent(this.skillIcon,i,0),this.skillName.text=PetConst.GetSkillName(i),this.skillDesc.text=PetConst.GetSkillDesc(i),this.starNum.text=n.toString(),n>=GameGlobal.XianlvModel.MAX_STAR)return this.nextGroup.visible=!1,this.bgImg.$setHeight(280),this.curGroup.$setY(132),void this.mainGroup.$setY(360);this.nextSkillDesc.text=PetConst.GetSkillDesc(o);var a="仙侣星级达到|C:0x2ECA22&T:"+(n+1)+"|星";this.condiDesc.textFlow=TextFlowMaker.generateTextFlow(a)},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianlvSkillTipPanel.prototype,"XianlvSkillTipPanel");var XianlvupAttr=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addAttrType=function(e,t){for(var i=0;i<e.length;i++)e[i].type==t[i].type&&(e[i].value+=t[i].value);return e},t.prototype.setAttrNol=function(e,t){this.currentState="normal";for(var i=0;i<e.length;i++)this["text"+i].text=AttributeData.TYPE_TO_NAME[e[i].type]+"+"+e[i].value;for(var i=0;i<e.length;i++)this["newtext"+i].text=AttributeData.TYPE_TO_NAME[t[i].type]+"+"+t[i].value;this.zdl.text="战斗力：+"+(ItemConfig.CalcAttrScoreValue(t)-ItemConfig.CalcAttrScoreValue(e))},t.prototype.setAttrFull=function(e){this.currentState="full";for(var t=0;t<e.length;t++)this["text"+t].text=AttributeData.TYPE_TO_NAME[e[t].type]+"+"+e[t].value},t.prototype.setStarNol=function(e,t){this.starLv0.text=e,this.starLv1.text=t},t.prototype.setStarFull=function(e){this.starLv0.text=e},t.prototype.setSkillNol=function(e,t){this.skill0.source=e[0],this.skilltext0.text=e[1],this.say0.text=e[2],this.skill1.source=t[0],this.skilltext1.text=t[1],this.say1.text=t[2]},t.prototype.setSkillFull=function(e){this.skill0.source=e[0],this.skilltext0.text=e[1],this.say0.text=e[2]},t}(eui.Component);__reflect(XianlvupAttr.prototype,"XianlvupAttr",["eui.UIComponent","egret.DisplayObject"]);var XianlvUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=5,t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动升级"}),t.mRoleSendCheckData=new RoleSendCheckData(function(e){var i=t.GetXianlvInfo();i&&GameGlobal.XianlvModel.SendUpLevel(i.mXianlvId,e)},function(){var e=t.GetXianlvInfo();if(e){var i=e.GetLevelConfig();if(i){var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]}}return[null]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.btnAdd,this._OnClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.baseView.btnZZ,this._OnClick),this._AddClick(this.baseView.btnShow,this._OnClick),this._AddClick(this.btnYuanfen,this._OnClick)},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.observe(MessageDef.RP_XIANLV,this.UpdateRedPoint),this.observe(MessageDef.XIANLV_UPATE_INFO,this.UpdateContent),this.observe(MessageDef.XIANLV_UPATE_EXP,this._DoUpdateExp),this.observe(MessageDef.BAG_XIANLV_RANK_ITEM,this._UpdateExp),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateYuanfenRedPoint),this.btnYuanfen.visible=Deblocking.Check(GameGlobal.Config.FateBaseConfig.openlv,!0)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateYuanfenRedPoint=function(){UIHelper.ShowRedPoint(this.btnYuanfen,GameGlobal.YuanfenModel.CanActInList(null))},t.prototype._OnClick=function(e){var t=this.mContext.mXianlvList[this.mContext.mSelectIndex],i=t.id;switch(e.currentTarget){case this.btnAdd:this._SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle();break;case this.baseView.btnZZ:GameGlobal.XianlvModel.HasBattle(i)?GameGlobal.XianlvModel.SendUnBattle(i):ViewManager.ins().open(XianlvBattlePanel,i);break;case this.baseView.btnShow:GameGlobal.XianlvModel.SetShowId(i);break;case this.btnYuanfen:ViewManager.ins().open(YuanfenMainWin)}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t);var i=GameGlobal.XianlvModel,o=GameGlobal.XianlvModel.GetXianlvInfo(t);o.mLevel>=i.MAX_LEVEL?this.currentState="full":this.currentState="normal",this._UpdateExp(),this.UpdateRedPoint(),this.UpdateYuanfenRedPoint()},t.prototype.GetXianlvInfo=function(){var e=this.mContext.mXianlvList[this.mContext.mSelectIndex],t=e.id;return GameGlobal.XianlvModel.GetXianlvInfo(t)},t.prototype._DoUpdateExp=function(){this.mRoleAutoSendData.Continue(),this._UpdateExp()},t.prototype._UpdateExp=function(){var e=this.GetXianlvInfo();if(e){var t=e.GetLevelConfig();t&&(this.bar.maximum=t.proexp,this.bar.value=e.mExp*t.exp,this.consumeLabel.Set(t.cost))}},t.prototype._SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype.UpdateRedPoint=function(){var e=this.mContext.mXianlvList[this.mContext.mSelectIndex],t=e.id,i=GameGlobal.XianlvModel.mRedPoint;UIHelper.ShowRedPoint(this.baseView.btnZZ,!GameGlobal.XianlvModel.HasBattle(t)&&i.Get(XianlvModelRedPoint.INDEX_BATTLE)),UIHelper.ShowRedPoint(this.btnAdd,i.IsRedRank(t)),UIHelper.ShowRedPoint(this.btnCulture,i.IsRedRank(t))},t.RedPointCheck=function(){return GameGlobal.XianlvModel.mRedPoint.Get(XianlvModelRedPoint.INDEX_ACT)||GameGlobal.XianlvModel.mRedPoint.Get(XianlvModelRedPoint.INDEX_RANK)||GameGlobal.XianlvModel.mRedPoint.Get(XianlvModelRedPoint.INDEX_BATTLE)||GameGlobal.YuanfenModel.IsRedPoint()},t.NAME="仙侣",t}(XianlvBaseInfoPanel);__reflect(XianlvUpLevelPanel.prototype,"XianlvUpLevelPanel");var XianlvupStarPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mWindowHelpId=5,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.curSkill,this._OnClick),this._AddClick(this.nextSkill,this._OnClick),this._AddClick(this.baseView.btnZZ,this._OnClick)},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.observe(MessageDef.XIANLV_UPATE_INFO,this.UpdateContent)},t.prototype.XianlvUpAttr=function(){var e=GameGlobal.XianlvModel,t=this.mContext.mXianlvList[this.mContext.mSelectIndex],i=t.id,o=e.GetXianlvInfo(i),n=GameGlobal.Config.partnerBiographyConfig[i].quality,a=(GameGlobal.Config.partnerLvproConfig[n][o.mLevel],GameGlobal.Config.partnerAttrsConfig[i][o.mStar-1]),r=GameGlobal.Config.partnerAttrsConfig[i][o.mStar],s=GameGlobal.Config.SkillsConfig[a.skillid];if(r){var l=GameGlobal.Config.SkillsConfig[r.skillid],c=a.attrs,u=r.attrs;this.XianlvupAttr.setAttrNol(c,u),this.XianlvupAttr.setStarNol(o.mStar,o.mStar+1),this.XianlvupAttr.setSkillNol([s[7],s[8],s[9]],[l[7],l[8],l[9]])}else{var c=a.attrs;this.XianlvupAttr.setAttrFull(c),this.XianlvupAttr.setStarFull(o.mStar),this.XianlvupAttr.setSkillFull([s[7],s[8],s[9]])}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t),this.m_XianlvId=t;var i=GameGlobal.XianlvModel,o=GameGlobal.XianlvModel.GetXianlvInfo(t);o.mStar>=i.MAX_STAR?this.currentState="full":this.currentState="normal";var n=GameGlobal.Config.partnerAttrsConfig[o.mXianlvId][o.mStar-1];n&&this.needItemView.SetItemId(n.cost[0].id,n.cost[0].count),PetSkillIconItem.SetContent(this.curSkill,o.GetSkillId(),0);var a=Math.max(o.mStar,1);this.curStarNum.text=a.toString(),PetSkillIconItem.SetContent(this.nextSkill,o.GetSkillId(1),0),this.nextStarNum.text=(a+1).toString(),this.XianlvUpAttr()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCulture:this._Send();break;case this.curSkill:var t=GameGlobal.XianlvModel.GetXianlvInfo(this.m_XianlvId);ViewManager.ins().open(XianlvSkillTipPanel,t.GetSkillId(),t.GetSkillId(1),t.mStar);break;case this.nextSkill:var t=GameGlobal.XianlvModel.GetXianlvInfo(this.m_XianlvId);ViewManager.ins().open(XianlvSkillTipPanel,t.GetSkillId(1),t.GetSkillId(2),t.mStar+1);break;case this.baseView.btnZZ:GameGlobal.XianlvModel.HasBattle(this.m_XianlvId)?GameGlobal.XianlvModel.SendUnBattle(this.m_XianlvId):ViewManager.ins().open(XianlvBattlePanel,this.m_XianlvId)}},t.prototype._Send=function(){var e=GameGlobal.XianlvModel.GetXianlvInfo(this.m_XianlvId),t=GameGlobal.Config.partnerAttrsConfig[e.mXianlvId][e.mStar-1];t&&Checker.CheckDatas(t.cost,!1)&&GameGlobal.XianlvModel.SendUpStar(e.mXianlvId)},t.RedPointCheck=function(){return GameGlobal.XianlvModel.mRedPoint.Get(XianlvModelRedPoint.INDEX_STAR)},t.NAME="升星",t}(XianlvBaseInfoPanel);__reflect(XianlvupStarPanel.prototype,"XianlvupStarPanel");var XianlvXwPanel=function(e){function t(){var t=e.call(this)||this;return t.mWindowHelpId=7,t.mHasDress=!1,t.mModel=GameGlobal.XianlvXwModel,t.mModelRedPoint=GameGlobal.XianlvXwModel.mRedPoint,t.m_activityJiJieId=ActivityKaiFuJiJieType.xianlv_circle,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.help,this._click)},t.RedPointCheck=function(){return GameGlobal.XianlvXwModel.mRedPoint.IsRedPoint()},t.prototype._click=function(){ViewManager.ins().open(ActivityDescPanel,7,"规则说明")},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_18)},t.NAME="仙位",t}(RoleTemplatePanel);__reflect(XianlvXwPanel.prototype,"XianlvXwPanel");var XianJunModel=function(e){function t(){var t=e.call(this)||this;return t.MAX_LEVEL=10,t.MAX_STAR=10,t.mXianJunList={},t.mBattleList=[],t.mRedPoint=new XianJunModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_xianjun_init,t._DoInitInfo),t}return __extends(t,e),t.prototype.GetShowId=function(){for(var e=0,t=this.mBattleList;e<t.length;e++){var i=t[e];if(i)return i}return 0},t.prototype.GetSkin=function(e){return AppearanceConfig.GetUIPath(e)},t.prototype.Init=function(){var e=GameGlobal.Config.StarKingListConfig;for(var i in e){var o=new XianJunInfo;o.mXianJunId=parseInt(i),this.mXianJunList[i]=o;var n=e[i].material.id;t.MATERIAL_ID[n]=Number(i),GameGlobal.UserBag.AddListenerItem(n,MessageDef.BAG_XIANJUN_ACT_ITEM)}for(var i in GameGlobal.Config.StarKingLvproConfig){this.MAX_LEVEL=CommonUtils.getObjectLength(GameGlobal.Config.StarKingLvproConfig[i]),GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.StarKingLvproConfig[i][0].cost[1].id,MessageDef.BAG_XIANJUN_RANK_ITEM);break}for(var i in GameGlobal.Config.StarKingAttrsConfig)GameGlobal.UserBag.AddListenerItem(GameGlobal.Config.StarKingAttrsConfig[i][0].cost[0].id,MessageDef.BAG_XIANJUN_STAR_ITEM);for(var i in GameGlobal.Config.StarKingAttrsConfig){this.MAX_STAR=CommonUtils.getObjectLength(GameGlobal.Config.StarKingAttrsConfig[i]);break}},t.prototype._DoInitInfo=function(e){for(var t=0,i=e.list;t<i.length;t++){var o=i[t],n=this.mXianJunList[o.id];n&&n.UpdateInfo(o)}this.mBattleList=e.outbound,GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_INIT_INFO)},t.prototype.GetXianJunId=function(){for(var e=0,t=this.mBattleList;e<t.length;e++){var i=t[e];if(i)return i}return 0},t.prototype.SendActive=function(e){var t=this,i=new Sproto.cs_xianjun_active_request;i.id=e,this.Rpc(C2sProtocol.cs_xianjun_active,i,function(i){if(i.ret){if(t.mXianJunList[e]){t.mXianJunList[e].Active();for(var o=!1,n=0,a=t.mBattleList;n<a.length;n++){var r=a[n];if(r){o=!0;break}}o||(t.SendBattle(e,0),GameGlobal.RaidMgr.UpdateRoleXianJun(t.GetXianJunId()))}else console.error("not active pet => petid "+e);GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_ACTIVE),GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_UPATE_INFO)}},this)},t.prototype.SendDress=function(e){},t.prototype.SendBattle=function(e,t){var i=CommonUtils.copyDataHandler(this.mBattleList);i[t]=e;var o=new Sproto.cs_xianjun_outbound_request;o.first=i[0]||0,o.second=i[1]||0,o.third=i[2]||0,o.four=i[3]||0,CommonUtils.ArrayEqual(this.mBattleList,i)||(this.mBattleList=i,this.Rpc(C2sProtocol.cs_xianjun_outbound,o),GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_UPATE_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_UPATE_BATTLE),GameGlobal.RaidMgr.UpdateRoleXianJun(this.GetShowId()))},t.prototype.SendUnBattle=function(e){for(var t=this.mBattleList,i=0;i<t.length;i++){var o=t[i];if(o==e){this.SendBattle(0,i);break}}},t.prototype.SendUpLevel=function(e,t){var i=this,o=new Sproto.cs_xianjun_addexp_request;o.id=e,o.autoBuy=t,this.Rpc(C2sProtocol.cs_xianjun_addexp,o,function(t){var o=i.mXianJunList[e];o?t.ret?(o.mExp=t.exp,o.mLevel=t.level,GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_UPATE_EXP),GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_UPATE_INFO)):UserTips.ins().showTips("升阶失败"):console.error("not SendUpLevel petid => "+e)},this)},t.prototype.SendUpStar=function(e){var t=this,i=new Sproto.cs_xianjun_upstar_request;i.id=e,this.Rpc(C2sProtocol.cs_xianjun_upstar,i,function(i){var o=t.mXianJunList[e];o?i.ret&&(o.mStar=i.star,GameGlobal.MessageCenter.dispatch(MessageDef.XIANJUN_UPATE_INFO)):console.error("not SendUpLevel petid => "+e)},this)},t.prototype.SendHeCheng=function(e){var t=new Sproto.cs_tianshen_exchange_request;t.no=e,this.Rpc(C2sProtocol.cs_tianshen_exchange,t)},t.prototype.HasXianJun=function(e){return e&&this.mXianJunList[e]&&this.mXianJunList[e].mLevel?!0:!1},t.prototype.HasBattle=function(e){return-1!=this.mBattleList.indexOf(e)},t.prototype.GetBattlePos=function(e){return this.mBattleList.indexOf(e)},t.prototype.getBattledXianJun=function(){return this.mBattleList[0]},t.prototype.GetXianJunInfo=function(e){return this.mXianJunList[e]},t.prototype.GetLevel=function(e){return e?this.mXianJunList[e].mLevel||0:0},t.prototype.GetAllPower=function(){var e=0;for(var t in this.mXianJunList){var i=this.mXianJunList[t];e+=i.GetPower()}return e},t.prototype.GetAllAttrsByType=function(e){var t=[];for(var i in this.mXianJunList){var o=this.mXianJunList[i];if(o.mLevel){var n=o[e].call(o);if(n)for(var a=0;a<n.length;a++){var r=n[a];t[a]?t[a].value+=r.value:t[a]={type:r.type,value:r.value}}}}return t},t.prototype.GetAllAttrs=function(){var e=this.GetAllAttrsByType("GetAttrs");return 0==e.length?XianJunConst.GetBaseAttrs():e},t.prototype.GetBattleCount=function(){for(var e=0,t=0,i=this.mBattleList;t<i.length;t++){var o=i[t];o&&++e}return e},t.prototype.GetActiveCount=function(){var e=0;for(var t in this.mXianJunList){var i=this.mXianJunList[t];i.mLevel&&++e}return e},t.prototype.GetAllLevel=function(){var e=0;for(var t in this.mXianJunList){var i=this.mXianJunList[t];i.mLevel&&(e+=i.mLevel)}return e},t.prototype.IsRedPointXianJun=function(e){return this.mRedPoint.IsRedAct(e)?!0:this.mRedPoint.IsRedStar(e)?!0:!1},t.prototype.SetShowId=function(e){var t=[],i={type:6,value:e};t.push(i),GameGlobal.Chat.chatShareInfo(12,t)},t.MATERIAL_ID={},t}(BaseSystem);__reflect(XianJunModel.prototype,"XianJunModel");var XianJunModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.m_ActiveList={},i.m_RankList={},i.m_StarList={},i.m_Model=t,i}return __extends(t,e),t.prototype.IsRedPoint=function(){return Deblocking.Check(DeblockingType.TYPE_15,!0)?e.prototype.IsRedPoint.call(this):!1},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e[t.INDEX_RANK]=this.GetIndexRank,e[t.INDEX_STAR]=this.GetIndexStar,e[t.INDEX_BATTLE]=this.GetIndexBattle,e;var e},t.prototype.OnMessage=function(i){return i==MessageDef.BAG_XIANJUN_RANK_ITEM?this.ClearFlag(t.INDEX_RANK):e.prototype.OnMessage.call(this,i),!0
},t.prototype.OnChange=function(e){e==t.INDEX_ACT?GameGlobal.MessageCenter.dispatch(MessageDef.RP_BAG_XIANJUN_ACT_ITEM):GameGlobal.MessageCenter.dispatch(MessageDef.RP_XIANJUN)},t.prototype.GetMessageDef=function(){return[MessageDef.BAG_XIANJUN_ACT_ITEM,MessageDef.XIANJUN_ACTIVE,MessageDef.XIANJUN_INIT_INFO,MessageDef.BAG_XIANJUN_RANK_ITEM,MessageDef.BAG_XIANJUN_STAR_ITEM,MessageDef.XIANJUN_UPATE_BATTLE]},t.prototype.GetIndexRank=function(){this.m_RankList={};var e=this.m_Model.mXianJunList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mLevel<this.m_Model.MAX_LEVEL){for(var o=i.GetLevelConfig(),n=1,a=!0,r=0,s=o.cost;r<s.length;r++){var l=s[r];if(!Checker.Data({type:l.type,id:l.id,count:l.count*n},!1)){a=!1;break}}a&&(this.m_RankList[i.mXianJunId]=!0)}}for(var t in this.m_RankList)return!0;return!1},t.prototype.GetIndexStar=function(){this.m_StarList={};var e=this.m_Model.mXianJunList;for(var t in e){var i=e[t];if(i.mLevel>0&&i.mStar<this.m_Model.MAX_STAR){var o=GameGlobal.Config.StarKingAttrsConfig[i.mXianJunId][(i.mStar||1)-1];Checker.Datas(o.cost,!1)&&(this.m_StarList[i.mXianJunId]=!0)}}for(var t in this.m_StarList)return!0;return!1},t.prototype.GetIndexBattle=function(){for(var e=0,t=0,i=this.m_Model.mBattleList;t<i.length;t++){var o=i[t];o||e++}if(!e)return!1;var n=this.m_Model.mXianJunList;for(var a in n){var r=n[a];if(r.mLevel>0&&!this.m_Model.HasBattle(r.mXianJunId))return!0}return!1},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.m_ActiveList)if(e)return!0;return!1},t.prototype.DoActive=function(){this.m_ActiveList={};var e=GameGlobal.Config.StarKingListConfig;for(var t in e)if(!this.m_Model.HasXianJun(parseInt(t))){var i=e[t].material;GameGlobal.UserBag.GetCount(i.id)>=i.count&&(this.m_ActiveList[t]=!0)}},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.m_ActiveList[e]},t.prototype.IsRedRank=function(e){return this.m_RankList[e]?!0:!1},t.prototype.IsRedStar=function(e){return this.m_StarList[e]?!0:!1},t.INDEX_ACT=0,t.INDEX_RANK=1,t.INDEX_STAR=2,t.INDEX_BATTLE=3,t}(IRedPoint);__reflect(XianJunModelRedPoint.prototype,"XianJunModelRedPoint");var XianJunConst=function(){function e(){}return e.GetSkin=function(e){return AppearanceConfig.GetUIPath(e)},e.SetSkillIcon=function(){},e.GetHeadIcon=function(e){return GameGlobal.Config.StarKingListConfig[e].icon},e.GetBaseAttrs=function(){return this.BASE_ATTR||(this.BASE_ATTR=PetConst.GetDefaultAttrs(GameGlobal.Config.StarKingLvproConfig,"attrs",2)),this.BASE_ATTR},e.GetSkillDesc=function(e,t){var i;if(!GameGlobal.Config.StarKingAttrsConfig[e])return"";if(i=GameGlobal.Config.StarKingAttrsConfig[e][t-1]){var o=GameGlobal.Config.SkillsConfig[i.skillid];if(o)return o[GameGlobal.Config.SkillsConfig_keys.desc]}return""},e.GetSkillId=function(e,t){var i;return GameGlobal.Config.StarKingAttrsConfig[e]?(i=GameGlobal.Config.StarKingAttrsConfig[e][t-1],i?i.skillid:0):0},e}();__reflect(XianJunConst.prototype,"XianJunConst");var XianJunInfo=function(){function e(){this.mExp=0,this.mLevel=0,this.mStar=0,this.mPower=0}return e.prototype.UpdateInfo=function(e){this.mExp=e.exp,this.mLevel=e.level,this.mStar=e.star},e.prototype.Active=function(){this.mLevel=1,this.mStar=1},e.prototype.GetLevelConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.StarKingListConfig[this.mXianJunId],o=GameGlobal.Config.StarKingLvproConfig[i.quality][t-1];return o},e.prototype.GetGradeConfig=function(e){var t=null!=e?e:this.mLevel,i=GameGlobal.Config.StarKingListConfig[this.mXianJunId],o=GameGlobal.Config.StarKingGiftConfig[i.quality][t-1];return o},e.prototype.GetPower=function(e){var t=this.GetAttrs(e);return t?ItemConfig.CalcAttrScoreValue(t):0},e.prototype.GetSkin=function(){return XianJunConst.GetSkin(this.mXianJunId)},e.prototype.GetAttrs=function(e){var t=this.GetGradeConfig(e);return t?AttributeData.AttrAddition(GameGlobal.Config.StarKingListConfig[this.mXianJunId].attrs,t.attrs):[]},e.prototype.GetSkillId=function(e,t){void 0===t&&(t=0);var i=GameGlobal.Config.StarKingListConfig[this.mXianJunId];if(i){var o=i;return 0==e?o.buffskill[0]:1==e?o.skill[0]:o.skill[1]}return 0},e.prototype.GetSkillIds=function(){var e=[],t=GameGlobal.Config.StarKingListConfig[this.mXianJunId];return e.push(t.skill[0]),e.push(t.skill[1]),e.push(t.buffskill),e},e.prototype.GetNextSkillId=function(){var e=GameGlobal.Config.StarKingAttrsConfig[this.mXianJunId];if(e){var t=e[this.mStar]||e[0];return t.buffskill[0]}return 0},e}();__reflect(XianJunInfo.prototype,"XianJunInfo");var HeChengMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(XianJunHeChengPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.mCommonWindowBg.OnAdded(this,i)},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateTabBtnRedPoint=function(){},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.prototype.OnOpenIndex=function(e){var t=-1;return 1==e?t=GameGlobal.Config.FateBaseConfig.openlv2:2==e?t=GameGlobal.Config.FateBaseConfig.openlv3:3==e&&(t=GameGlobal.Config.FateBaseConfig.openlv4),Deblocking.Check(t)},t.NAME="合成",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(HeChengMainWin.prototype,"HeChengMainWin");var XianJunAllAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunAllAttrSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){var e=GameGlobal.XianJunModel;this.powerLabel.text=e.GetAllPower(),this.levelAttr.textFlow=AttributeData.GetAttrTabString(e.GetAllAttrs()),this.commonDialog.OnAdded(this);for(var t=0,i=0,o=e.mBattleList;i<o.length;i++){var n=o[i];if(n){t=n;break}}for(var n in e.mXianJunList)if(e.HasXianJun(parseInt(n))){t=parseInt(n);break}t&&this.showPanel.SetBody(XianJunConst.GetSkin(t))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianJunAllAttrPanel.prototype,"XianJunAllAttrPanel");var XianJunAttrPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunAttrSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=GameGlobal.XianJunModel.GetXianJunInfo(i);this.powerLabel.text=o.GetPower(),this.levelAttr.textFlow=AttributeData.GetAttrTabString(o.GetAttrs()),XianJunBaseInfoPanel.SetStarGroup(this.starGroup,o.mStar),this.commonDialog.OnAdded(this),this.lbLev.text=o.mLevel+"\n阶",this.showPanel.SetBody(XianJunConst.GetSkin(i))},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianJunAttrPanel.prototype,"XianJunAttrPanel");var MsMovieClipDataFactory=function(){function e(){}return e.generateMovieClipData=function(e,t){if(void 0===e&&(e=""),""==e&&t)for(e in t.mc)break;if(""==e)return null;var i=this.findFromCache(e);return i||(i=new MsMovieClipData,this.fillData(e,i,t)),i},e.findFromCache=function(e){return this.m_Cache[e]?this.m_Cache[e]:null},e.fillData=function(e,t,i){if(i){if(!i.__handle__){var o=i.width,n=i.height,a=i.res;for(var r in a)for(var s=a[r].m1,l=0,c=s.length;c>l;++l)s[l]=s[l]/(l%2==0?o:n);i.__handle__=1}var u=i.mc[e];u&&(t.$init(u,i),this.m_Cache[e]=t)}},e.m_Cache={},e}();__reflect(MsMovieClipDataFactory.prototype,"MsMovieClipDataFactory");var XianJunBattlePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunBattleSkin",t._AddClick(t.btn1,t._OnClick),t._AddClick(t.btn2,t._OnClick),t._AddClick(t.btn3,t._OnClick),t._AddClick(t.btn4,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.m_SelXianJunId=e[0],this.commonDialog.OnAdded(this),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){var t=0;switch(e.currentTarget){case this.btn1:t=0;break;case this.btn2:t=1;break;case this.btn3:t=2;break;case this.btn4:t=3}GameGlobal.XianJunModel.SendBattle(this.m_SelXianJunId,t),this.CloseSelf()},t.prototype.UpdateContent=function(){for(var e=GameGlobal.XianJunModel,t=0;4>t;t++){var i=this["head"+(t+1)],o=e.mBattleList[t];o?(i.visible=!0,XianJunHeadItem.SetContentByInfo(i,e.GetXianJunInfo(o))):i.visible=!1}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianJunBattlePanel.prototype,"XianJunBattlePanel");var XianJunDetailWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunDetailSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];this.item.setDataByConfig(i),this.item.setCount(""+(o||"")),this.labItemName.text=i.name,this.labItemName.textColor=ItemBase.GetColorByQuality(i.quality);var n=GameGlobal.Config.StarKingListConfig[i.pid];this.labName.text=n.name,this.labName.textColor=ItemBase.GetColorByQuality(n.quality),this.labItemDesc.text="可用于激活星君【"+n.name+"】",this.labDesc.text=i.desc,this.showPanel.SetBody(GameGlobal.XianJunModel.GetSkin(i.pid))},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianJunDetailWin.prototype,"XianJunDetailWin");var XianJunHeChengPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunHeChengSkin",t.mType=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=XianJunHeChengItem,this.mHeChengList=CommonUtils.GetArray(GameGlobal.Config.StarKingSynthesisConfig,"id"),this.list.dataProvider=new eui.ArrayCollection(this.mHeChengList)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.RP_BAG_XIANJUN_ACT_ITEM,this.UpdateContent)},t.prototype.UpdateContent=function(){this.list.dataProvider=new eui.ArrayCollection(this.mHeChengList)},t.NAME="合成",t}(BaseView);__reflect(XianJunHeChengPanel.prototype,"XianJunHeChengPanel",["ICommonWindowTitle"]);var XianJunHeChengItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.XianJunId=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.btnHC.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.getwayLabel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClickHandler=function(e){GameGlobal.XianJunModel.SendHeCheng(this.XianJunId)},t.prototype.onClick=function(){UserWarn.ins().setBuyGoodsWarn(this.data.cost.id)},t.prototype.dataChanged=function(){if(this.data){this.XianJunId=this.data.id,this.needItemView.SetItemId(this.data.cost.id,this.data.cost.count);var e=UserBag.ins().GetCount(this.data.cost.id)>=this.data.cost.count;this.btnHC.visible=e,this.getwayLabel.visible=!e,this.getwayLabel.textFlow=(new egret.HtmlTextParser).parser('<a href="event:"><u>获取'+GameGlobal.GetItemName(this.XianJunId)+"碎片</u></a>")}},t}(eui.ItemRenderer);__reflect(XianJunHeChengItem.prototype,"XianJunHeChengItem");var XianJunInactiveView=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunInactiveSkin",t.baseView.currentState="inactive",t.baseView.powerLabel.checkAttr&&(t.baseView.powerLabel.checkAttr.visible=!1),t._AddClick(t.getwayLabel,t._OnClick),t._AddClick(t.actBtn,t._OnClick),t}return __extends(t,e),t.prototype.OnOpen=function(){},t.prototype.OnClose=function(){},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.getwayLabel:break;case this.actBtn:var t=GameGlobal.Config.StarKingListConfig[this.m_XianJunId];t&&Checker.Data(t.material)&&GameGlobal.XianJunModel.SendActive(this.m_XianJunId)}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t),this.m_XianJunId=t;var i=GameGlobal.Config.StarKingListConfig[t];this.needItemView.SetItemId(i.material.id,i.material.count),this.actBtn.visible=GameGlobal.UserBag.GetCount(i.material.id)>=i.material.count,(this.getwayLabel.visible=!this.actBtn.visible)&&this.getwayLabel.SetId(i.material.id)},t.prototype.SetContext=function(e){this.mContext=e},t}(XianJunBaseInfoPanel);__reflect(XianJunInactiveView.prototype,"XianJunInactiveView");var XianJuninactiveSkillItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){0==this.itemIndex?this.useTypeImg.visible=!0:this.useTypeImg.visible=!1},t}(eui.ItemRenderer);__reflect(XianJuninactiveSkillItem.prototype,"XianJuninactiveSkillItem");var XianJunInfoPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunInfoSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this.skillIcon,this._OnClick),this.commonDialog.title="详细属性"},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),0!=e.length&&(this.XianJuninfo=e[0],this.UpdateContent())},t.prototype.UpdateContent=function(){var e=(GameGlobal.XianJunModel,this.XianJuninfo);this.XianJunId=e.id,this.img.source=PetConst.XUXING_IMG[e.fiveele];var t=new PetInfo;t.mPetId=e.id,t.mName=e.name,this.name_label.textColor=ItemBase.GetColorByQuality(e.quality),this.name_label.text=e.name,this.powerLabel.text=ItemConfig.CalcAttrScoreValue(e.attrs),this.petShowPanel.SetBody(PetConst.GetSkin(e.id)),this.skillDesc.text=XianJunConst.GetSkillDesc(e.id,1),PetSkillIconItem.SetContent(this.skillIcon,XianJunConst.GetSkillId(e.id,1),0),this.attr0Txt.text=AttributeData.getAttStr(e.attrs,0,0,":",!1,"#ffffff","            "),this.starNum.text=e.star||1},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.skillIcon:var t=(GameGlobal.XianJunModel.GetXianJunInfo(this.XianJunId),XianJunConst.GetSkillId(this.XianJunId,1)),i=XianJunConst.GetSkillId(this.XianJunId,2);ViewManager.ins().open(XianJunSkillTipPanel,t,i,1)}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianJunInfoPanel.prototype,"XianJunInfoPanel",["ICommonWindowTitle"]);var XianJunMainPanel=function(e){function t(){var t=e.call(this)||this;return t.mSelectIndex=0,t.mXianJunList=[],t.skinName="XianJunMainSkin",t.mListLRBtnCtrl=new ListLRBtnCtrl(t.list,t.leftBtn,t.rightBtn,112),t}return __extends(t,e),t.prototype.childrenCreated=function(){this.viewStack.tabChildren=[TabView.CreateTabViewData(XianJunUpLevelPanel,{skinName:"XianJunUpLevelSkin",mContext:this}),TabView.CreateTabViewData(XianJunupStarPanel,{skinName:"XianJunupStarSkin",mContext:this})],this.commonWindowBg.SetViewStack(this.viewStack),this.list.itemRenderer=XianJunHeadItem,this.mXianJunList=CommonUtils.GetArray(GameGlobal.Config.StarKingListConfig,"id");var e=function(e){var t=e.id,i=GameGlobal.XianJunModel;if(i.HasBattle(e.id)){var o=i.GetBattlePos(e.id);return t=o-1e7}if(i.HasXianJun(e.id)){var n=GameGlobal.Config.StarKingListConfig[e.id].quality;t=t-1e6-1e4*n}else if(i.mRedPoint.IsRedAct(e.id))return e.id-1e5;return t};this.mXianJunList.sort(function(t,i){return e(t)-e(i)}),this.list.dataProvider=new eui.ArrayCollection(this.mXianJunList),this.list.selectedIndex=this.mSelectIndex,this._AddItemClick(this.list,this._OnItemTap)},t.prototype._click=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonWindowBg.OnAdded(this,e[0]||0),this.OnOpenIndex(e[0]||0),this.observe(MessageDef.XIANJUN_UPATE_INFO,this.UpdateContent),this.observe(MessageDef.RP_BAG_XIANJUN_ACT_ITEM,this.UpdateRedPointIndex),this.observe(MessageDef.RP_XIANJUN,this.UpdateRedPointIndex),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateRedPointIndex),this.UpdateRedPointIndex(),this.mListLRBtnCtrl.OnRefresh(),this.UpdateContent()},t.prototype.OnClose=function(){this._ClosePetView(),MainBottomPanel.CloseNav(this)},t.prototype._OnItemTap=function(e){var t=e.itemIndex;this.mSelectIndex=t,this.UpdateContent()},t.prototype.UpdateList=function(){for(var e=[],t=0,i=this.mXianJunList;t<i.length;t++){var o=i[t];e.push(XianJunHeadItem.RedPoint(o.id))}this.mListLRBtnCtrl.SetRedPointList(e),this.mListLRBtnCtrl.OnRefresh(),UIHelper.ListRefresh(this.list)},t.prototype.UpdateContent=function(){this.UpdateList(),this.commonWindowBg.GetCurViewStackElement().UpdateContent(),this._UpdatePetView()},t.prototype._UpdatePetView=function(){var e=this.mXianJunList[this.mSelectIndex].id;GameGlobal.XianJunModel.HasXianJun(e)?this._ClosePetView():(this.mXianJunInactiveView||(this.mXianJunInactiveView=new XianJunInactiveView,this.mXianJunInactiveView.SetContext(this)),this.mXianJunInactiveView.parent||(this.group.addChild(this.mXianJunInactiveView),this.mXianJunInactiveView.DoOpen([])),this.mXianJunInactiveView.UpdateInfo(e))},t.prototype.UpdateRedPointIndex=function(){this.UpdateList(),this.commonWindowBg.CheckTalRedPoint(0),this.commonWindowBg.CheckTalRedPoint(1)},t.prototype.UpdateRedPointIndex2=function(){this.commonWindowBg.CheckTalRedPoint(2)},t.prototype.UpdateRedPointIndex3=function(){this.commonWindowBg.CheckTalRedPoint(3)},t.prototype._ClosePetView=function(){this.mXianJunInactiveView&&this.mXianJunInactiveView.parent&&(this.mXianJunInactiveView.DoClose(),DisplayUtils.removeFromParent(this.mXianJunInactiveView))},t.prototype.OnOpenIndex=function(e){var t=0==e||1==e;return this.showGroup.visible=t,!0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_15)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(XianJunMainPanel.prototype,"XianJunMainPanel",["ICommonWindow"]);var XianJunHeadItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.starGroup.itemRenderer=XianJunStar,this.starGroup.visible=!0},t.prototype.dataChanged=function(){var e=this.data;t.SetContent(this,e);var i=GameGlobal.XianJunModel,o=i.mBattleList.indexOf(e.id);0==o?this.imgBattle.source="ui_bm_chuzhan":-1==o?this.imgBattle.source="":this.imgBattle.source="ui_bm_beizhan",null==this.mStarList&&(this.mStarList=[]);var n=i.GetXianJunInfo(e.id);this.starGroup.numChildren!=n.mStar&&(this.mStarList.length=n.mStar,this.starGroup.dataProvider=new eui.ArrayCollection(this.mStarList)),this.redPoint.visible=t.RedPoint(e.id)},t.RedPoint=function(e){return GameGlobal.XianJunModel.IsRedPointXianJun(e)||GameGlobal.XianJunModel.mRedPoint.IsRedRank(e)},t.SetContent=function(e,t){e.lbName.text=t.name,e.lbName.textColor=ItemBase.GetColorByQuality(t.quality),e.lbLev.text=GameGlobal.XianJunModel.HasXianJun(t.id)?GameGlobal.XianJunModel.GetLevel(t.id)+"阶":"",e.item.SetQuality(t.quality),e.item.setItemImg("resource/assets/image/head/XianJun/"+t.icon+".png"),e.item.setGray(!GameGlobal.XianJunModel.HasXianJun(t.id)),null!=t.jicon?(e.jicon.visible=!0,e.jicon.source=t.jicon):e.jicon.visible=!1},t.SetContentByInfo=function(e,t){this.SetContent(e,GameGlobal.Config.StarKingListConfig[t.mXianJunId])},t}(eui.ItemRenderer);__reflect(XianJunHeadItem.prototype,"XianJunHeadItem");var XianJunStar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(eui.ItemRenderer);__reflect(XianJunStar.prototype,"XianJunStar");var XianJunSkillTipPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="XianJunSkillTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=e[1];o?PetSkillIconItem.SetContent(this.skillIcon,i,0):(PetSkillIconItem.SetContent(this.skillIcon,i,1),this.skillType.text="类型：被动技能"),this.skillName.text=PetConst.GetSkillName(i),this.skillDesc.text=PetConst.GetSkillDesc(i)},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(XianJunSkillTipPanel.prototype,"XianJunSkillTipPanel");var XianJunupAttr=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addAttrType=function(e,t){for(var i=0;i<e.length;i++)e[i].type==t[i].type&&(e[i].value+=t[i].value);return e},t.prototype.setAttrNol=function(e,t){this.currentState="normal";for(var i=0;i<e.length;i++)this["text"+i].text=AttributeData.TYPE_TO_NAME[e[i].type]+"+"+e[i].value;for(var i=0;i<e.length;i++)this["newtext"+i].text=AttributeData.TYPE_TO_NAME[t[i].type]+"+"+t[i].value;this.zdl.text="战斗力：+"+(ItemConfig.CalcAttrScoreValue(t)-ItemConfig.CalcAttrScoreValue(e))},t.prototype.setAttrFull=function(e){this.currentState="full";for(var t=0;t<e.length;t++)this["text"+t].text=AttributeData.TYPE_TO_NAME[e[t].type]+"+"+e[t].value},t.prototype.setStarNol=function(e,t){this.starLv0.text=e,this.starLv1.text=t},t.prototype.setStarFull=function(e){this.starLv0.text=e},t.prototype.setSkillNol=function(e,t){this.skill0.source=e[0],this.skilltext0.text=e[1],this.say0.text=e[2],this.skill1.source=t[0],this.skilltext1.text=t[1],this.say1.text=t[2]},t.prototype.setSkillFull=function(e){this.skill0.source=e[0],this.skilltext0.text=e[1],this.say0.text=e[2]},t}(eui.Component);__reflect(XianJunupAttr.prototype,"XianJunupAttr",["eui.UIComponent","egret.DisplayObject"]);var XianJunUpLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.mRoleAutoSendData=new RoleAutoSendData(function(){t._SendUp()||t.mRoleAutoSendData.Stop()},function(){t.mRoleAutoSendData.mIsAuto?t.btnCulture.label="停止":t.btnCulture.label="自动升级"}),t.mRoleSendCheckData=new RoleSendCheckData(function(e){var i=t.GetXianJunInfo();i&&GameGlobal.XianJunModel.SendUpLevel(i.mXianJunId,e)},function(){var e=t.GetXianJunInfo();if(e){var i=e.GetLevelConfig();if(i){var o=i.cost;return[o[0].id,o[0].count,o[1].id,o[1].count]}}return[null]},function(){return t.checkBox.selected},function(){t.mRoleAutoSendData.Toggle()}),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.btnAdd,this._OnClick),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.baseView.btnZZ,this._OnClick),this._AddClick(this.baseView.btnShow,this._OnClick),this._AddClick(this.btnZizhi,this._OnClick)},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.observe(MessageDef.RP_XIANJUN,this.UpdateRedPoint),this.observe(MessageDef.XIANJUN_UPATE_INFO,this.UpdateContent),this.observe(MessageDef.XIANJUN_UPATE_EXP,this._DoUpdateExp),this.observe(MessageDef.BAG_XIANJUN_RANK_ITEM,this._UpdateExp),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateYuanfenRedPoint)},t.prototype.OnClose=function(){this.mRoleAutoSendData.Stop()},t.prototype.UpdateYuanfenRedPoint=function(){},t.prototype._OnClick=function(e){var t=this.mContext.mXianJunList[this.mContext.mSelectIndex],i=t.id;switch(e.currentTarget){case this.btnAdd:this._SendUp();break;case this.btnCulture:this.mRoleAutoSendData.Toggle();break;case this.baseView.btnZZ:GameGlobal.XianJunModel.HasBattle(i)?GameGlobal.XianJunModel.SendUnBattle(i):ViewManager.ins().open(XianJunBattlePanel,i);break;case this.baseView.btnShow:GameGlobal.XianJunModel.SetShowId(i);break;case this.btnZizhi:UserTips.ins().showTips("下个版本开放")}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t);var i=GameGlobal.XianJunModel,o=GameGlobal.XianJunModel.GetXianJunInfo(t);o.mLevel>=i.MAX_LEVEL?this.currentState="full":this.currentState="normal",this._UpdateExp(),this.UpdateRedPoint(),this.UpdateYuanfenRedPoint()},t.prototype.GetXianJunInfo=function(){var e=this.mContext.mXianJunList[this.mContext.mSelectIndex],t=e.id;return GameGlobal.XianJunModel.GetXianJunInfo(t)},t.prototype._DoUpdateExp=function(){this.mRoleAutoSendData.Continue(),this._UpdateExp()},t.prototype._UpdateExp=function(){var e=this.GetXianJunInfo();if(e){var t=e.GetLevelConfig();t&&(this.bar.maximum=t.proexp,this.bar.value=e.mExp*t.exp,this.consumeLabel.Set(t.cost))}},t.prototype._SendUp=function(){return this.mRoleSendCheckData.SendUp()},t.prototype.UpdateRedPoint=function(){var e=this.mContext.mXianJunList[this.mContext.mSelectIndex],t=e.id,i=GameGlobal.XianJunModel.mRedPoint;UIHelper.ShowRedPoint(this.baseView.btnZZ,!GameGlobal.XianJunModel.HasBattle(t)&&i.Get(XianJunModelRedPoint.INDEX_BATTLE)),UIHelper.ShowRedPoint(this.btnAdd,i.IsRedRank(t)),UIHelper.ShowRedPoint(this.btnCulture,i.IsRedRank(t))},t.RedPointCheck=function(){return GameGlobal.XianJunModel.mRedPoint.Get(XianJunModelRedPoint.INDEX_ACT)||GameGlobal.XianJunModel.mRedPoint.Get(XianJunModelRedPoint.INDEX_RANK)||GameGlobal.XianJunModel.mRedPoint.Get(XianJunModelRedPoint.INDEX_BATTLE)||GameGlobal.YuanfenModel.IsRedPoint()},t.NAME="星君",t}(XianJunBaseInfoPanel);__reflect(XianJunUpLevelPanel.prototype,"XianJunUpLevelPanel");var XianJunupStarPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._AddClick(this.btnCulture,this._OnClick),this._AddClick(this.curSkill,this._OnClick),this._AddClick(this.nextSkill,this._OnClick),this._AddClick(this.baseView.btnZZ,this._OnClick)},t.prototype.OnOpen=function(){e.prototype.OnOpen.call(this),this.observe(MessageDef.XIANJUN_UPATE_INFO,this.UpdateContent)},t.prototype.XianJunUpAttr=function(){var e=GameGlobal.XianJunModel,t=this.mContext.mXianJunList[this.mContext.mSelectIndex],i=t.id,o=e.GetXianJunInfo(i),n=GameGlobal.Config.StarKingListConfig[i].quality,a=(GameGlobal.Config.StarKingLvproConfig[n][o.mLevel],GameGlobal.Config.StarKingAttrsConfig[i][o.mStar-1]),r=GameGlobal.Config.StarKingAttrsConfig[i][o.mStar];GameGlobal.Config.SkillsConfig[a.skillid];if(r){var s=(GameGlobal.Config.SkillsConfig[r.skillid],a.attrs),l=r.attrs;this.XianJunupAttr.setAttrNol(s,l),this.XianJunupAttr.setStarNol(o.mStar,o.mStar+1)}else{var s=a.attrs;this.XianJunupAttr.setAttrFull(s),this.XianJunupAttr.setStarFull(o.mStar)}},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t),this.m_XianJunId=t;var i=GameGlobal.XianJunModel,o=GameGlobal.XianJunModel.GetXianJunInfo(t);o.mStar>=i.MAX_STAR?(this.currentState="full",this.consume.visible=!1):this.currentState="normal";var n=GameGlobal.Config.StarKingAttrsConfig[o.mXianJunId][o.mStar-1];n&&this.consumeLabel.Set(n.cost);var a=Math.max(o.mStar,1);this.curStarNum.text=a.toString(),PetSkillIconItem.SetContent(this.nextSkill,o.GetSkillId(1),0),this.nextStarNum.text=(a+1).toString(),this.XianJunUpAttr()},t.prototype._OnClick=function(e){switch(e.currentTarget){case this.btnCulture:this._Send();break;case this.baseView.btnZZ:GameGlobal.XianJunModel.HasBattle(this.m_XianJunId)?GameGlobal.XianJunModel.SendUnBattle(this.m_XianJunId):ViewManager.ins().open(XianJunBattlePanel,this.m_XianJunId)}},t.prototype._Send=function(){var e=GameGlobal.XianJunModel.GetXianJunInfo(this.m_XianJunId),t=GameGlobal.Config.StarKingAttrsConfig[e.mXianJunId][e.mStar-1];t&&Checker.CheckDatas(t.cost,!1)&&GameGlobal.XianJunModel.SendUpStar(e.mXianJunId)},t.RedPointCheck=function(){return GameGlobal.XianJunModel.mRedPoint.Get(XianJunModelRedPoint.INDEX_STAR)},t.NAME="升星",t}(XianJunBaseInfoPanel);__reflect(XianJunupStarPanel.prototype,"XianJunupStarPanel");var ShouDaoPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.skinName="ShouDaoSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.jieshou,this._OnClick),this._AddClick(this.jujue,this._OnClick),this._AddClick(this.next,this._OnClick),this.list0.itemRenderer=ItemBaseNotName,this.updateContent()},t.prototype.updateContent=function(){if(0==GameGlobal.YingYuanModel.askMarry.length)return void ViewManager.ins().close(this);this.index==GameGlobal.YingYuanModel.askMarry.length-1&&(this.next.label="取消");var e=GameGlobal.YingYuanModel.askMarry[this.index];if(!e)return void ViewManager.ins().close(this);var t=GameGlobal.Config.MarryConfig[e.grade];this.hunType.source=t.marryicon,this.list0.dataProvider=new eui.ArrayCollection(t.id),this.text.text=e.name+" "+e.level+"级   "+e.power+"战斗力",this.face.face.source=ResDataPath.GetHeadImgName(e.job,e.sex);var i=GameGlobal.Config.MarryBaseConfig.frequency;this.DayTimes.text="今日还可结婚："+(i-GameGlobal.YingYuanModel.marryInfo.today)+"/"+i},t.prototype._OnClick=function(e){switch(e.target){case this.jieshou:var t=GameGlobal.Config.MarryBaseConfig.frequency;if(t-GameGlobal.YingYuanModel.marryInfo.today==0)return void UserTips.InfoTip("今日没有结婚次数");GameGlobal.YingYuanModel.marryAnswer(1,GameGlobal.YingYuanModel.askMarry[this.index].fromid);break;case this.jujue:GameGlobal.YingYuanModel.marryAnswer(0,GameGlobal.YingYuanModel.askMarry[this.index].fromid),GameGlobal.YingYuanModel.removeAnswer(GameGlobal.YingYuanModel.askMarry[this.index].fromid),this.updateContent();break;case this.next:if(this.index==GameGlobal.YingYuanModel.askMarry.length-1)return void ViewManager.ins().close(this);this.index++,this.updateContent()}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ShouDaoPanel.prototype,"ShouDaoPanel",["ICommonWindow"]);var ShouDaoXianHuaPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.skinName="ShouDaoXianHuaSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.jieshou,this._OnClick),this._AddClick(this.jujue,this._OnClick),this._AddClick(this.next,this._OnClick),this.updateContent()},t.prototype.updateContent=function(){this.userChatData=new Sproto.chat_data;var e=GameGlobal.YingYuanModel.getOther();this.userChatData.id=e.dbid,this.userChatData.job=e.job,this.userChatData.sex=e.sex,this.userChatData.name=e.name;var t=GameGlobal.YingYuanModel.marrySFlower;if(0==t.length)return void ViewManager.ins().close(this);this.index==t.length-1&&(this.next.label="取消");var i=t[this.index];return i?(this.text.text=i.name+"赠送你"+i.flower+"*"+i.count,void(this.text0.text="恩爱有加的你们亲密度各自增加了"+i.intimacy+"您想对Ta做出什么回应昵？")):(this.text.text="",void(this.text0.text=""))},t.prototype._OnClick=function(e){switch(e.target){case this.jieshou:ViewManager.ins().open(YingYuanXianHuaPanel),GameGlobal.YingYuanModel.flower(this.index),this.updateContent();break;case this.jujue:ViewManager.ins().open(PlayerChatpanel,this.userChatData);break;case this.next:if("取消"==this.next.label)return ViewManager.ins().close(this),void GameGlobal.YingYuanModel.removeAllFlower();if(this.index==GameGlobal.YingYuanModel.marrySFlower.length-1)return void ViewManager.ins().close(this);this.index++,this.updateContent()}},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ShouDaoXianHuaPanel.prototype,"ShouDaoXianHuaPanel",["ICommonWindow"]);var YingyuanAddItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="YingYuanItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.bnt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick,this)},t.prototype.onclick=function(){this.data;GameGlobal.YingYuanModel.getFriendData(this.data)},t.prototype.dataChanged=function(){var e=this.data;this.jsname.text=e.friendInfo.name,this.lv.text=e.friendInfo.level,this.zdl.text=e.friendInfo.power},t}(eui.ItemRenderer);__reflect(YingyuanAddItem.prototype,"YingyuanAddItem");var YingYuanAddPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="YingYuanAddSkin",t.list.itemRenderer=YingyuanAddItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="求婚对象",this.updateContent()},t.prototype.updateContent=function(){for(var e=GameGlobal.FriendModel.FriendData.friendsDate,t=[],i=0;i<e.length;i++)0==e[i].friendInfo.offlineTime&&t.push(e[i]);for(var o=[],n=0;n<t.length;n++){var a=GameGlobal.YingYuanModel.getMarryFriends(t[n].friendInfo.dbid);a&&!a.ismarry&&o.push(t[n])}this.list.dataProvider=new eui.ArrayCollection(o);for(var r=0;r<this.list.numChildren;r++)r%2==0?this.list.$children[r].bg.source="ui_sbm_005":this.list.$children[r].bg.source="i_sbm_002"
},t.prototype._OnClick=function(e){},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanAddPanel.prototype,"YingYuanAddPanel",["ICommonWindow"]);var YingYuanEnAiInfoPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=YingYuanEnAiItem},t.prototype.OnOpen=function(){GameGlobal.YingYuanModel.SendLoveInfo(),this.observe(MessageDef.MARRY_LOVE_INFO,this.UpdateContent),this.observe(MessageDef.IS_MARRY_INFO,this.UpdateContent),TimerManager.ins().doTimer(1e3,0,this.updataTime,this)},t.prototype.updataTime=function(){GameGlobal.YingYuanModel.TimeLove(),this.UpdateContent()},t.prototype.UpdateContent=function(){this.num.text=GameGlobal.YingYuanModel.marryInfo.intimate+"";var e=GameGlobal.Config.LoveConfig,t=[];for(var i in e)t.push(i);this.list.dataProvider=new eui.ArrayCollection(t)},t.NAME="恩爱",t}(BaseView);__reflect(YingYuanEnAiInfoPanel.prototype,"YingYuanEnAiInfoPanel",["ICommonWindowTitle"]);var YingYuanEnAiItem=function(e){function t(){var t=e.call(this)||this;return t.ICONIMG=["ui_ea_bm_qianshou","ui_ea_bm_yonbao","ui_ea_bm_qinwen","ui_ea_bm_chongxing"],t}return __extends(t,e),t.prototype.childrenCreated=function(){this.huifu_bnt.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.do_bnt.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(e){var t=Number(this.data);switch(e.target){case this.do_bnt:GameGlobal.YingYuanModel.UseMarryLove(Number(this.data));break;case this.huifu_bnt:var i="one",o=GameGlobal.Config.LoveConfig[t];ViewManager.ins().open(YingYuanEnAiPanel,i,o.recoverymaterial,o.price,function(){GameGlobal.YingYuanModel.RevertMarryLove(t)})}},t.prototype.dataChanged=function(){var e=Number(this.data),t=GameGlobal.Config.LoveConfig[e],i=GameGlobal.YingYuanModel.getMarryLove(e);i&&(this.icon.source=this.ICONIMG[e-1],this.doName.text=t.category,this.tianNum.text=t.intimate+"点",this.dayTimes.text=t.quantity-i.daycount+"/"+t.quantity,0==t.frequency&&(this.times.visible=!1,this.timesText.visible=!1),this.times.text=i.count+"/"+t.frequency,this.do_bnt.label=t.category,t.recoverymaterial&&0==t.frequency?(this.do_bnt.visible=t.quantity-i.daycount!=0,this.huifu_bnt.visible=t.quantity-i.daycount==0):t.recoverymaterial?(this.do_bnt.visible=0!=i.count,this.huifu_bnt.visible=0==i.count):(this.do_bnt.visible=!0,this.huifu_bnt.visible=!1),0==i.count?this.times.textColor=16711680:this.times.textColor=104196,t.quantity-i.daycount==0?this.dayTimes.textColor=16711680:this.dayTimes.textColor=104196,t.price?(this.priceicon.setType(t.price.id),this.priceicon.setPrice(t.price.count)):this.priceicon.visible=!1,this.updataTime())},t.prototype.updataTime=function(){var e=Number(this.data),t=GameGlobal.YingYuanModel.getMarryLove(e);if(t.time<=0)return void(this.time.text="");var i=GameServer.serverTime+t.time;this.time.text="("+GameServer.GetPkTime(i)+")后恢复次数"},t}(eui.ItemRenderer);__reflect(YingYuanEnAiItem.prototype,"YingYuanEnAiItem");var YingYuanEnAiPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="YingYuanEnAiWupingSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="提示",this._AddClick(this.bnt,this.OnClick),this._AddClick(this.bnt0,this._OnClick),this._AddClick(this.shop,this.GoShop),this.currentState=e[0],e[1]&&(this.base.setItemData(e[1]),this.shop0.text=this.base.getText()+"*"+this.base.getCount()),e[2]&&(this.priceicon.setType(e[2].id),this.priceicon.setPrice(e[2].count)),this.fun=e[3]},t.prototype.OnClick=function(){this.fun()},t.prototype.GoShop=function(){ViewManager.ins().close(this)},t.prototype._OnClick=function(){ViewManager.ins().close(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanEnAiPanel.prototype,"YingYuanEnAiPanel",["ICommonWindow"]);var YingYuanHeLiPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.select=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.skinName="YingYuanHeliSkin",this.list.itemRenderer=YingYuanHeadItem,this.list1.itemRenderer=YingYuanHuLiItem,this.list2.itemRenderer=ItemBaseNotName},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="喜结连理",this._AddClick(this.bnt,this.click),this._AddClick(this.bnt0,this.Close),this.list1.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnClick,this),this.list1.selectedIndex=this.select,this.updateContent()},t.prototype.updateContent=function(){var e=GameGlobal.Config.GiftsConfig,t=[],i=[];i.push(GameGlobal.YingYuanModel.marryInvita[0].husband),i.push(GameGlobal.YingYuanModel.marryInvita[0].wife),this.list.dataProvider=new eui.ArrayCollection(i),this.list2.dataProvider=new eui.ArrayCollection(e[this.select+1].showreward);for(var o in e)t.push(o);this.list1.dataProvider=new eui.ArrayCollection(t)},t.prototype.click=function(){GameGlobal.YingYuanModel.marryGreeting(GameGlobal.YingYuanModel.marryInvita[0].dbid,this.select+1)},t.prototype._OnClick=function(e){this.select=this.list1.selectedIndex,this.updateContent()},t.prototype.Close=function(){GameGlobal.YingYuanModel.marryInvita.splice(0,1),GameGlobal.MessageCenter.dispatch(MessageDef.INVITATION_INFO),ViewManager.ins().close(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanHeLiPanel.prototype,"YingYuanHeLiPanel",["ICommonWindow"]);var YingYuanHuLiItem=function(e){function t(){var t=e.call(this)||this;return t.type=["普通贺礼","热闹贺礼","豪华贺礼"],t.skinName="YingYuanHeLiItemSkin",t.list2.itemRenderer=ItemBase,t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=Number(this.data);if(e){var t=GameGlobal.Config.GiftsConfig;this.list2.dataProvider=new eui.ArrayCollection([t[e].reward]),this.typeName.text=this.type[e-1],this.priceicon.setType(t[e].price.id),this.priceicon.setPrice(t[e].price.count),this.list2.touchEnabled=!1,this.list2.touchChildren=!1}},t}(eui.ItemRenderer);__reflect(YingYuanHuLiItem.prototype,"YingYuanHuLiItem");var YingYuanInfoPanel=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grade=1,t.spouse=1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list1.itemRenderer=ItemBase,this.list0.itemRenderer=ItemBaseNotName},t.prototype.OnOpen=function(){GameGlobal.YingYuanModel.sendMarryFriends(),this.observe(MessageDef.YING_YUAN_HEAD,this.UpdataHead),this.observe(MessageDef.IS_MARRY_INFO,this.UpdateContent),this._AddClick(this.chage,this._OnClick),this._AddClick(this.girl,this._OnClick),this._AddClick(this.box,this._OnClick),this._AddClick(this.btnPrev0,this._OnClick),this._AddClick(this.btnNext0,this._OnClick),this._AddClick(this.jieHunBtn,this._OnClick),this._AddClick(this.Bnt,this._OnClick),this._AddClick(this.xianHuaBnt,this._OnClick),this._AddClick(this.jieHunBnt,this._OnClick),this._AddClick(this.liHunBnt,this._OnClick),this._AddClick(this.wenHao,this._OnClick),this._AddClick(this.helpBtn,this._OnClick),this.box.selected=!0,this.girl.selected=!1,this.touchEnabled=!1},t.prototype._OnClick=function(e){switch(e.target){case this.xianHuaBnt:ViewManager.ins().open(YingYuanXianHuaPanel);break;case this.jieHunBnt:ViewManager.ins().open(YingYuanZhengShuPanel);break;case this.liHunBnt:ViewManager.ins().open(YingYuanLiHunPanel);break;case this.chage:ViewManager.ins().open(YingYuanAddPanel);break;case this.girl:this.box.selected=!this.girl.selected,this.box.selected?this.spouse=1:this.spouse=2;break;case this.box:this.girl.selected=!this.box.selected,this.box.selected?this.spouse=1:this.spouse=2;break;case this.btnPrev0:if(this.grade--,0==this.grade)return void(this.grade=1);this.MarryType(this.grade);break;case this.btnNext0:if(this.grade++,this.grade>GameGlobal.YingYuanModel.MarryConfigLen())return void(this.grade=GameGlobal.YingYuanModel.MarryConfigLen());this.MarryType(this.grade);break;case this.jieHunBtn:if(!GameGlobal.YingYuanModel.marryFRIend)return;var t=GameGlobal.Config.MarryBaseConfig.frequency;if(t-GameGlobal.YingYuanModel.marryInfo.today==0)return void UserTips.InfoTip("今日没有结婚次数");GameGlobal.YingYuanModel.marryPropose(GameGlobal.YingYuanModel.marryFRIend.friendInfo.dbid,this.grade,this.spouse);break;case this.Bnt:var i=GameGlobal.Config.IntimateConfig[GameGlobal.YingYuanModel.marryInfo.level+1],o=GameGlobal.YingYuanModel.marryInfo;if(o.intimate<i.intimate)return;GameGlobal.YingYuanModel.marryLevelUp();break;case this.wenHao:ViewManager.ins().open(ActivityDescPanel,45,"甜蜜值");break;case this.helpBtn:ViewManager.ins().open(ActivityDescPanel,18,"规则说明")}},t.prototype.UpdateContent=function(){GameGlobal.YingYuanModel.iSMarry()?(this.currentState="married",this.UpExp()):(this.currentState="unmarried",this.MarryType(this.grade),this.UpdataHead())},t.prototype.UpExp=function(){var e=GameGlobal.Config.IntimateConfig[GameGlobal.YingYuanModel.marryInfo.level+1],t=GameGlobal.YingYuanModel.marryInfo;this.qingLv.text=e.name+"(Lv."+t.level+")",this.bar.maximum=e.intimate,this.bar.value=t.intimate,this.pro.text=t.intimate+"/"+e.intimate,this.list1.dataProvider=new eui.ArrayCollection(e.reward);var i=GameGlobal.YingYuanModel.marryInfo.husband,o=GameGlobal.YingYuanModel.marryInfo.wife;this.roleShowPanel0.SetShowMarry(i),this.roleShowPanel1.SetShowMarry(o);var n,a=GameGlobal.Config.IntimateConfig;for(var r in a)if(a[r].level>t.level&&a[r].id){n=a[r];break}n?(this.pGroupRewar.visible=!0,this.itemBaee.data=n.id,this.lbPassLvReward.text=n.caption):this.pGroupRewar.visible=!1},t.prototype.UpdataHead=function(){var e=GameGlobal.YingYuanModel;if(e.marryFRIend){var t={name:e.marryFRIend.friendInfo.name,job:e.marryFRIend.friendInfo.job,sex:e.marryFRIend.friendInfo.sex};this.head.data=t}else var t=null;var i=GameGlobal.Config.MarryBaseConfig.frequency;this.DayTimes.text="今日还可结婚："+(i-GameGlobal.YingYuanModel.marryInfo.today)+"/"+i},t.prototype.MarryType=function(e){var t=GameGlobal.Config.MarryConfig[e];this.imgIcon0.source=t.marryicon,this.priceicon.setType(t.price.id),this.priceicon.setPrice(t.price.count),this.list0.dataProvider=new eui.ArrayCollection(t.id)},t.NAME="婚姻",t}(BaseView);__reflect(YingYuanInfoPanel.prototype,"YingYuanInfoPanel",["ICommonWindowTitle"]);var YingYuanHeadItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data;e&&(this.username.text=e.name,this.face.face.source=ResDataPath.GetHeadImgName(e.job,e.sex))},t}(eui.ItemRenderer);__reflect(YingYuanHeadItem.prototype,"YingYuanHeadItem");var YingYuanLiHunPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="YingYuanXiuShuSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="一纸休书",this._AddClick(this.bnt,this._OnClick),this.updateContent()},t.prototype.updateContent=function(){var e=GameGlobal.Config.MarryBaseConfig.frequency;this.DayTimes.text="今日还可结婚："+(e-GameGlobal.YingYuanModel.marryInfo.today)+"/"+e},t.prototype._OnClick=function(){GameGlobal.YingYuanModel.marryDivorce(),ViewManager.ins().close(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanLiHunPanel.prototype,"YingYuanLiHunPanel",["ICommonWindow"]);var YingYuanModel=function(e){function t(){var t=e.call(this)||this;return t.marryFRIend=null,t.askMarry=[],t.marryInvita=[],t.marrySFlower=[],t.friend=[],t.marryLove=[],t.partner=null,t.time=Math.floor(2*Math.random()+300),t.isOpenEff=!1,t.EFFXY=[[300,300],[300,700],[700,700],[700,200],[450,450]],t.regNetMsg(S2cProtocol.sc_marry_info,t.getMarryInfo),t.regNetMsg(S2cProtocol.sc_marry_asked,t.marryAsked),t.regNetMsg(S2cProtocol.sc_marry_remove_asked,t.removeAsked),t.regNetMsg(S2cProtocol.sc_marry_invitation,t.marryInvitation),t.regNetMsg(S2cProtocol.sc_marry_recv_flower,t.marryRecvFlower),t.regNetMsg(S2cProtocol.sc_marry_login_tip,t.marryLoginTip),t.regNetMsg(S2cProtocol.sc_marry_new,t.marryNew),t.regNetMsg(S2cProtocol.sc_marry_friends,t.marryFriends),t.regNetMsg(S2cProtocol.sc_marry_divorce_bro,t.divorceBro),t.regNetMsg(S2cProtocol.sc_marry_love_info,t.MarryLoveInfo),t.regNetMsg(S2cProtocol.sc_marry_house_partner_up,t.DoAddHouseShareExp),t.regNetMsg(S2cProtocol.sc_marry_flower_bro,t.marryFlowerBro),t}return __extends(t,e),t.prototype.getRole=function(e){var t=new EntityRole;return t.parserBase({ownerid:e.dbid,handler:e.dbid,type:EntityType.Role,shows:{job:e.job,sex:e.sex,shows:e.shows}}),t.entityName=e.name,t},t.prototype.TimeLove=function(){for(var e=0;e<this.marryLove.length;e++)this.marryLove[e].time>0&&this.marryLove[e].time--},t.prototype.UseMarryLove=function(e){var t=new Sproto.cs_marry_love_use_request;t.lovetype=e,this.Rpc(C2sProtocol.cs_marry_love_use,t,this.UseMarryLoveRule)},t.prototype.UseMarryLoveRule=function(e){e.ret},t.prototype.RevertMarryLove=function(e){var t=new Sproto.cs_marry_love_revert_request;t.lovetype=e,this.Rpc(C2sProtocol.cs_marry_love_revert,t,this.ReverMarryLoveRule)},t.prototype.ReverMarryLoveRule=function(e){e.ret},t.prototype.SendLoveInfo=function(){this.Rpc(C2sProtocol.cs_marry_love_info)},t.prototype.MarryLoveInfo=function(e){this.marryLove=e.loves,GameGlobal.MessageCenter.dispatch(MessageDef.MARRY_LOVE_INFO)},t.prototype.getMarryLove=function(e){for(var t=0;t<this.marryLove.length;t++)if(this.marryLove[t].lovetype==e)return this.marryLove[t]},t.prototype.iSMarry=function(){return this.marryInfo?this.marryInfo.marry:!1},t.prototype.getOther=function(){return this.iSMarry()?this.marryInfo.husband.dbid!=GameGlobal.GameLogic.actorModel.actorID?this.marryInfo.husband:this.marryInfo.wife:void 0},t.prototype.divorceBro=function(e){for(var t=0;t<this.marryInvita.length;t++)if(this.marryInvita[t].dbid==e.ids[0]||this.marryInvita[t].dbid==e.ids[1]){this.marryInvita.splice(t,1);break}this.removeAllFlower(),GameGlobal.MessageCenter.dispatch(MessageDef.INVITATION_INFO)},t.prototype.getOtherData=function(){return this.iSMarry()?this.marryInfo.husband.dbid==GameGlobal.actorModel.actorID?this.marryInfo.wife:this.marryInfo.husband:void 0},t.prototype.sendMarryFriends=function(){this.Rpc(C2sProtocol.cs_marry_friends)},t.prototype.getMarryInfo=function(e){this.marryInfo=e,this.askMarry=[],ViewManager.ins().close(ShouDaoPanel),GameGlobal.MessageCenter.dispatch(MessageDef.IS_MARRY_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.QIU_MARRY_INFO),GameGlobal.MessageCenter.dispatch(MessageDef.HOUSE_UPDATE_INFO),0==this.marryInfo.marry&&this.marryInfo.grade>0&&(this.shareUpInfo=null,GameGlobal.MessageCenter.dispatch(MessageDef.HOUSE_SHARED_NOTICE),GameGlobal.MessageCenter.dispatch(MessageDef.HOUSE_UPDATE_SINGLE))},t.prototype.marryPropose=function(e,t,i){var o=new Sproto.cs_marry_propose_request;o.targetid=e,o.grade=t,o.spouse=i,this.Rpc(C2sProtocol.cs_marry_propose,o,this.marryProRule)},t.prototype.marryProRule=function(e){0==e.ret&&UserTips.InfoTip("已发送")},t.prototype.MarryConfigLen=function(){var e=GameGlobal.Config.MarryConfig,t=0;for(var i in e)t++;return t},t.prototype.getFriendData=function(e){this.marryFRIend=e,ViewManager.ins().close(YingYuanAddPanel),GameGlobal.MessageCenter.dispatch(MessageDef.YING_YUAN_HEAD)},t.prototype.marryAsked=function(e){this.askMarry.push(e),this.askMarry.sort(function(e,t){return e.power-t.power}),GameGlobal.MessageCenter.dispatch(MessageDef.QIU_MARRY_INFO)},t.prototype.removeAsked=function(e){for(var t=0;t<this.askMarry.length;t++)this.askMarry[t].fromid==e.fromid&&this.askMarry.splice(t,1);GameGlobal.MessageCenter.dispatch(MessageDef.QIU_MARRY_INFO)},t.prototype.marryAnswer=function(e,t){var i=new Sproto.cs_marry_answer_request;i.agree=e,i.fromid=t,this.Rpc(C2sProtocol.cs_marry_answer,i)},t.prototype.removeAnswer=function(e){for(var t=0;t<this.askMarry.length;t++)this.askMarry[t].fromid==e&&this.askMarry.splice(t,1);GameGlobal.MessageCenter.dispatch(MessageDef.QIU_MARRY_INFO)},t.prototype.marryLevelUp=function(){this.Rpc(C2sProtocol.cs_marry_levelup)},t.prototype.marryDivorce=function(){this.Rpc(C2sProtocol.cs_marry_divorce),UserTips.InfoTip("离婚成功")},t.prototype.marryInvitation=function(e){this.marryInvita.push(e),GameGlobal.MessageCenter.dispatch(MessageDef.INVITATION_INFO),e.effect&&(this.mcName="eff_ui_yanhua",this.openEff())},t.prototype.marryGreeting=function(e,t){var i=new Sproto.cs_marry_greeting_request;i.dbid=e,i.quantity=t,this.Rpc(C2sProtocol.cs_marry_greeting,i,this.marryGreetingRule)},t.prototype.marryGreetingRule=function(e){0==e.ret&&(ViewManager.ins().close(YingYuanHeLiPanel),this.marryInvita.splice(0,1),GameGlobal.MessageCenter.dispatch(MessageDef.INVITATION_INFO))},t.prototype.marryFlower=function(e,t,i){var o=new Sproto.cs_marry_flower_request;o.quantity=e,o.count=t,o.autobuy=i,this.Rpc(C2sProtocol.cs_marry_flower,o,this.marryFlowerRule)},t.prototype.marryFlowerRule=function(e){0==e.ret&&(ViewManager.ins().close(YingYuanXianHuaPanel),this.mcName="eff_ui_huaban",this.openEff2())},t.prototype.marryLoginTip=function(e){this.partner=e.partner,ViewManager.ins().open(YingYuanZjmPanel)},t.prototype.marryRecvFlower=function(e){this.marrySFlower.push(e),GameGlobal.MessageCenter.dispatch(MessageDef.FLOWER_INFO),this.mcName="eff_ui_huaban",this.openEff2()},t.prototype.flower=function(e){this.marrySFlower.splice(e,1),GameGlobal.MessageCenter.dispatch(MessageDef.FLOWER_INFO)},t.prototype.marryNew=function(){this.mcName="eff_ui_yanhua",this.openEff()},t.prototype.marryFlowerBro=function(e){e.effect&&(this.mcName="eff_ui_huaban",this.openEff2())},t.prototype.openEff=function(){this.isOpenEff&&(this.isOpenEff=!1)},t.prototype.closeEff=function(){this.isOpenEff=!0},t.prototype.openEff2=function(){},t.prototype.marryFriends=function(e){this.friend=e.friends},t.prototype.getMarryFriends=function(e){for(var t=0;t<this.friend.length;t++)if(this.friend[t].dbid==e)return this.friend[t]},t.prototype.removeAllFlower=function(){this.marrySFlower=[],GameGlobal.MessageCenter.dispatch(MessageDef.FLOWER_INFO)},t.prototype.DoAddHouseShareExp=function(e){this.shareUpInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.HOUSE_SHARED_NOTICE)},t.prototype.SendAddHouseExp=function(){this.Rpc(C2sProtocol.cs_marry_house_addexp)},t.prototype.SendHouseBuild=function(e){var t=new Sproto.cs_marry_house_grade_request;t.grade=e,this.Rpc(C2sProtocol.cs_marry_house_grade,t,function(e){e.ret},this)},t.prototype.SendAddHouseShareExp=function(){this.Rpc(C2sProtocol.cs_marry_house_use_partner_up),this.shareUpInfo=null,GameGlobal.MessageCenter.dispatch(MessageDef.HOUSE_SHARED_NOTICE)},t.prototype.GetIntimacy=function(){return this.marryInfo?this.marryInfo.intimacy:0},t.prototype.GetHouseGrade=function(){return this.marryInfo?this.marryInfo.grade||0:0},t.prototype.GetHouseLv=function(){return this.marryInfo?[this.marryInfo.houselv,this.marryInfo.houseup]:[]},t.prototype.GetPower=function(){return this.marryInfo?HouseConst.GetPower(this.marryInfo.grade,this.marryInfo.houselv,this.marryInfo.houseup):0},t.prototype.GetCurAttr=function(){return HouseConst.GetHouseTotalAttr(this.marryInfo.grade,this.marryInfo.houselv,this.marryInfo.houseup)},t.prototype.GetNextAttr=function(){return this.marryInfo?HouseConst.GetHouseLevelAttr(this.marryInfo.grade,this.marryInfo.houselv+1):0},t.prototype.IsMaxLevel=function(){return this.marryInfo?HouseConst.IsMaxLevel(this.marryInfo.grade,this.marryInfo.houselv):!1},t.prototype.GetCostIntimacy=function(){var e=HouseConst.GetHouseConfig(this.marryInfo.grade,this.marryInfo.houselv);return e?e.Intimacy||0:0},t.prototype.GetHouseUpnum=function(){var e=HouseConst.GetHouseConfig(this.marryInfo.grade,this.marryInfo.houselv);return(e?e.exp:0)*GameGlobal.Config.MarryBaseConfig.exp},t.prototype.IsMaxGrage=function(){var e=HouseConst.GetHouseShowConfig(this.marryInfo.grade+1);return null==e},t.prototype.GetBuildCost=function(e){var t=HouseConst.GetHouseShowConfig(e),i=HouseConst.GetHouseShowConfig(this.marryInfo.grade);return{type:t.price.type,id:t.price.id,count:t.price.count-i.price.count}},t.prototype.CanUpgrade=function(){return this.marryInfo&&this.marryInfo.marry&&!this.IsMaxLevel()?this.GetCostIntimacy()<=this.GetIntimacy():!1},t}(BaseSystem);__reflect(YingYuanModel.prototype,"YingYuanModel");var YingYuanWin=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="YingyueWinSkin",this.commonWindowBg.SetTabView([TabView.CreateTabViewData(YingYuanInfoPanel,{skinName:"YingyueInfoSkin"}),TabView.CreateTabViewData(HouseUpgradePanel,{skinName:"HouseUpgradeSkin"}),TabView.CreateTabViewData(TeacherPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],o=this.OnOpenIndex(i);this.commonWindowBg.OnAdded(this,o?i:Deblocking.Check(DeblockingType.TYPE_39)?0:2),this.observe(MessageDef.HOUSE_UPDATE_INFO,this.UpdateTabBtnRedPoint),this.observe(GameGlobal.LingtongModel.GetItemRpUpdateMsg(),this.UpdateTeacherRedPoint),this.observe(GameGlobal.LingtongModel.GetItemEquipRpUpdateMsg(),this.UpdateTeacherRedPoint),this.observe(MessageDef.RP_LINGTONG,this.UpdateTeacherRedPoint),this.UpdateTeacherRedPoint(),this.UpdateTabBtnRedPoint()},t.prototype.UpdateTabBtnRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(1,GameGlobal.YingYuanModel.CanUpgrade())},t.prototype.UpdateTeacherRedPoint=function(){this.commonWindowBg.ShowTalRedPoint(2,GameGlobal.TeacherController.teacherInfo.messageData.length>0)},t.prototype.OnClose=function(){this.removeObserve(),this.commonWindowBg.OnRemoved()},t.prototype.checkIsOpen=function(e){},t.prototype.OnOpenIndex=function(e){return 3==e?(ViewManager.ins().open(LingtongMainPanel),!1):2==e?Deblocking.Check(DeblockingType.TYPE_41,!1):1==e?GameGlobal.YingYuanModel.iSMarry()?!0:(UserTips.ins().showTips("结婚后开启功能"),!1):0==e?Deblocking.Check(DeblockingType.TYPE_39,!1):!0},t.prototype.updateRedPoint=function(){},t.prototype.OnBackClick=function(e){return 0},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Deblocking.Check(DeblockingType.TYPE_39)},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(YingYuanWin.prototype,"YingYuanWin",["ICommonWindow"]);var YingYuanXianHuaPanel=function(e){function t(){var t=e.call(this)||this;return t.index=0,t.num=1,t.autoBuy=0,t.freeMaxNum=0,t.buyMaxNum=0,t.skinName="YingYuanXianHuaSkin",t.list1.itemRenderer=YingyuanXianHuaItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.commonDialog.OnAdded(this),this.commonDialog.title="赠送鲜花",this._AddClick(this.sub1Btn,this.click),this._AddClick(this.add1Btn,this.click),this._AddClick(this.add10Btn,this.click),this._AddClick(this.sub10Btn,this.click),this._AddClick(this.buyBtn,this.click),this._AddClick(this.freeBuy,this.click),this.list1.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnClick,this),this.list1.selectedIndex=this.index,this.updateContent()},t.prototype.click=function(e){switch(e.target){case this.sub1Btn:this.numChange(-1,!0);break;case this.add1Btn:this.numChange(1,!0);break;case this.add10Btn:var t=this.freeBuy.selected?this.freeMaxNum+this.buyMaxNum:this.freeMaxNum;this.numChange(t,!1);break;case this.sub10Btn:this.numChange(1,!1);break;case this.buyBtn:GameGlobal.YingYuanModel.marryFlower(this.index+1,this.num,this.autoBuy);break;case this.freeBuy:this.autoBuy=this.freeBuy.selected?2:0;var i=Math.min(this.num,this.freeMaxNum);this.numChange(i,!1)}},t.prototype.numChange=function(e,t){t&&(e=this.num+e);var i=this.freeBuy.selected?this.freeMaxNum+this.buyMaxNum:this.freeMaxNum;this.num=Math.min(Math.max(e,1),i),this.upText()},t.prototype.upText=function(){this.numLabel.text=this.num+"",this.numLabel.touchChildren=!1,this.numLabel.touchEnabled=!1;var e=GameGlobal.Config.FlowersConfig,t=e[this.index+1].price,i=0;this.freeBuy.selected&&(i=t.count*Math.max(this.num-this.freeMaxNum,0)),this.totalPrice.setType(t.id),this.totalPrice.setPrice(i)},t.prototype.updateContent=function(){var e=GameGlobal.Config.FlowersConfig,t=[];for(var i in e)t.push(Number(i));this.otherName.text=GameGlobal.YingYuanModel.getOtherData().name,this.list1.dataProvider=new eui.ArrayCollection(t);var o=e[this.index+1];this.item.data=o.ID,this.item.setItemCount(!1),this.item.nameTxt.text=this.item.nameTxt.text+"*"+this.getNum(o.ID),this.freeMaxNum=GameGlobal.UserBag.GetCount(o.ID);var n=GameGlobal.actorModel.GetNum(o.price.id);this.buyMaxNum=Math.floor(n/o.price.count),this.num=this.freeMaxNum,this.upText()},t.prototype.getNum=function(e){var t=GameGlobal.UserBag.getBagItemById(e);return t?t.count:0},t.prototype._OnClick=function(e){this.index=this.list1.selectedIndex,this.updateContent()},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanXianHuaPanel.prototype,"YingYuanXianHuaPanel",["ICommonWindow"]);var YingyuanXianHuaItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){var e=this.data,t=GameGlobal.Config.FlowersConfig;this.item1.touchEnabled=!1,this.item1.touchChildren=!1,this.item1.setDataByConfig(GlobalConfig.ins().ItemConfig[t[e].ID]),this.item1.setItemCount(!1),this.num.text="数量："+this.getNum(t[e].ID),this.num.textColor=this.item1.getTextColor()},t.prototype.getNum=function(e){var t=GameGlobal.UserBag.getBagItemById(e);return t?t.count:0},t}(eui.ItemRenderer);__reflect(YingyuanXianHuaItem.prototype,"YingyuanXianHuaItem");var YingYuanZhengShuPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="YingYuanZhengShuSkin",t.list.itemRenderer=YingYuanHeadItem,t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(MessageDef.IS_MARRY_INFO,this.updateContent),this.commonDialog.OnAdded(this),this.commonDialog.title="结婚证书",this._AddClick(this.bnt,this._OnClick),this.updateContent()},t.prototype.updateContent=function(){var e=[];e.push(GameGlobal.YingYuanModel.marryInfo.husband),e.push(GameGlobal.YingYuanModel.marryInfo.wife),this.list.dataProvider=new eui.ArrayCollection(e),this.marryTime.text="登记日期："+GameServer.JieHun(GameGlobal.YingYuanModel.marryInfo.time)},t.prototype._OnClick=function(){ViewManager.ins().close(this)},t.prototype.OnClose=function(){this.commonDialog.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanZhengShuPanel.prototype,"YingYuanZhengShuPanel",["ICommonWindow"]);var YingYuanZjmPanel=function(e){function t(){var t=e.call(this)||this;return t.m_EndTime=5,t.skinName="YingYuanZjmSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.updateContent(),this.m_EndTime=5,this.AddClick(this.closeBtn,this._OnClick),this.AddTimer(1e3,6,this.updateCloseBtnLabel)},t.prototype.updateContent=function(){var e=GameGlobal.YingYuanModel.partner;this.face.face.source=ResDataPath.GetHeadImgName(e.job,e.sex)},t.prototype.updateCloseBtnLabel=function(){this.m_EndTime--,this.m_EndTime<=0&&ViewManager.ins().close(this),this.closeBtn.label="确定("+this.m_EndTime+"s)"},t.prototype._OnClick=function(e){ViewManager.ins().close(this)},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YingYuanZjmPanel.prototype,"YingYuanZjmPanel",["ICommonWindow"]);var YuanfenModel=function(e){function t(){var t=e.call(this)||this;return t.actMap={},t.mRedPoint=new YuanfenModelRedPoint(t),t.regNetMsg(S2cProtocol.sc_brother_info,t._DoInitInfo),t}return __extends(t,e),t.prototype.Init=function(){},t.prototype._DoInitInfo=function(e){for(var t=0,i=e.data||[];t<i.length;t++){var o=i[t];this.actMap[o]=!0}GameGlobal.MessageCenter.dispatch(MessageDef.YUANFEN_INIT)},t.prototype.SendActCombo=function(e){var t=this,i=new Sproto.cs_brother_activation_request;i.no=e,this.Rpc(C2sProtocol.cs_brother_activation,i,function(e){e.ret&&(t.actMap[e.no]=!0,GameGlobal.MessageCenter.dispatch(MessageDef.YUANFEN_UPDATE_LIST))},this)},t.prototype.GetDataList=function(e){var t=this,i=[];for(var o in GameGlobal.Config.FateConfig){var n=GameGlobal.Config.FateConfig[o];n.type==e&&i.push(n)}var a=function(e){var i=e.id;return t.CanYuanfenAct(i)?i-1e5:t.HasAct(i)?i-1e4:i};return i.sort(function(e,t){return a(e)-a(t)}),i},t.prototype.HasAct=function(e){return this.actMap[e]},t.prototype.CanYuanfenAct=function(e){if(this.actMap[e])return!1;for(var t=GameGlobal.Config.FateConfig[e],i=0,o=t.group;i<o.length;i++){var n=o[i];if(!this._HasOne(n.type,n.id))return!1}return!0},t.prototype.GetAllPower=function(){var e=0;for(var t in this.actMap){var i=parseInt(t),o=GameGlobal.Config.FateConfig[i];o&&(e+=ItemConfig.CalcAttrScoreValue(o.attrs))}return e},t.prototype._HasOne=function(e,t){var i;switch(e){case 1:i=GameGlobal.PetModel.HasPet(t);break;case 2:i=GameGlobal.TianShenModel.HasTianShen(t);break;case 3:i=GameGlobal.XianlvModel.HasXianlv(t)}return i},t.prototype.CanActInList=function(e){if(e&&!Deblocking.Check(e+89,!0))return!1;for(var t in GameGlobal.Config.FateConfig){var i=GameGlobal.Config.FateConfig[t];if((i.type==e||null==e)&&this.CanYuanfenAct(i.id))return!0}return!1},t.prototype.IsRedPointYuanfen=function(e){return this.mRedPoint.IsRedAct(e)},t.prototype.IsRedPoint=function(){return this.mRedPoint.IsRedPoint()},t}(BaseSystem);__reflect(YuanfenModel.prototype,"YuanfenModel");var YuanfenModelRedPoint=function(e){function t(t){var i=e.call(this)||this;return i.mRedPointMap={},i.mModel=t,i}return __extends(t,e),t.prototype.GetMessageDef=function(){return[MessageDef.YUANFEN_INIT,MessageDef.YUANFEN_UPDATE_LIST,MessageDef.PET_ACTIVE,MessageDef.XIANLV_ACTIVE,MessageDef.TIANSHEN_ACTIVE]},t.prototype.GetCheckFuncList=function(){return e={},e[t.INDEX_ACT]=this.GetIndexAct,e;var e},t.prototype.OnChange=function(e){e==t.INDEX_ACT&&GameGlobal.MessageCenter.dispatch(MessageDef.YUANFEN_ALL_NOTICE)},t.prototype.GetIndexAct=function(){this.DoActive();for(var e in this.mRedPointMap)if(this.mRedPointMap[e])return!0;return!1},t.prototype.DoActive=function(){this.mRedPointMap[t.TYPE_1]=this.mModel.CanActInList(1),this.mRedPointMap[t.TYPE_2]=this.mModel.CanActInList(2),this.mRedPointMap[t.TYPE_3]=this.mModel.CanActInList(3),this.mRedPointMap[t.TYPE_4]=this.mModel.CanActInList(4)},t.prototype.IsRedAct=function(e){return this.Get(t.INDEX_ACT),this.mRedPointMap[e]},t.INDEX_ACT=0,t.TYPE_1=1,t.TYPE_2=2,t.TYPE_3=3,t.TYPE_4=4,t}(IRedPoint);__reflect(YuanfenModelRedPoint.prototype,"YuanfenModelRedPoint");var YuanfenMainWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.mCommonWindowBg.SetTabView([TabView.CreateTabViewData(YuanfenQixingPanel),TabView.CreateTabViewData(YuanfenTianbingPanel),TabView.CreateTabViewData(YuanfenTiangongPanel)])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.mCommonWindowBg.OnAdded(this,i),this.observe(MessageDef.YUANFEN_UPDATE_LIST,this.UpdateTabBtnRedPoint),this.UpdateTabBtnRedPoint()},t.prototype.OnClose=function(){this.mCommonWindowBg.OnRemoved()},t.prototype.UpdateTabBtnRedPoint=function(){this.mCommonWindowBg.ShowTalRedPoint(0,GameGlobal.YuanfenModel.IsRedPointYuanfen(YuanfenModelRedPoint.TYPE_1)),this.mCommonWindowBg.ShowTalRedPoint(1,GameGlobal.YuanfenModel.IsRedPointYuanfen(YuanfenModelRedPoint.TYPE_2)),this.mCommonWindowBg.ShowTalRedPoint(2,GameGlobal.YuanfenModel.IsRedPointYuanfen(YuanfenModelRedPoint.TYPE_3))},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];
return!0},t.prototype.OnOpenIndex=function(e){var t=-1;return 1==e?t=GameGlobal.Config.FateBaseConfig.openlv2:2==e?t=GameGlobal.Config.FateBaseConfig.openlv3:3==e&&(t=GameGlobal.Config.FateBaseConfig.openlv4),Deblocking.Check(t)},t.NAME="缘份",t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(YuanfenMainWin.prototype,"YuanfenMainWin");var ActorName=function(e){function t(){var t=e.call(this)||this;return t.m_IsMonth01=!1,t.m_IsMonth02=!1,t.m_VipLv=0,t.m_Name="",t.m_Align=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"actorName",{set:function(e){this.m_Name=e,this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"month",{set:function(e){this.m_IsMonth02=Boolean(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zun",{set:function(e){this.m_IsMonth01=Boolean(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vipLv",{set:function(e){this.m_VipLv=Number(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{set:function(e){this.m_Align=Boolean(e),this._UpdateContent()},enumerable:!0,configurable:!0}),t.prototype.Set=function(e,t,i,o){this.m_Name=e,this.m_VipLv=t,this.m_IsMonth02=i?!0:!1,this.m_IsMonth01=o?!0:!1,this._UpdateContent()},t.prototype.Set2=function(e,t,i,o,n,a){this.m_Name=e,this.m_VipLv=t,this.m_IsMonth02=i?!0:!1,this.m_IsMonth01=o?!0:!1,this.m_Lv=n,this.m_ZsLv=a,this._UpdateContent()},t.prototype._UpdateContent=function(){if(this.$stage){var e="";this.m_IsMonth01&&(e+="尊"),this.m_IsMonth02&&(e+="月"),this.m_VipLv>0&&(e+="V"+this.m_VipLv),""==e?(this.lv.visible=!1,this.lv.includeInLayout=!1):(this.lv.text=e,this.lv.visible=!0,this.lv.includeInLayout=!0),this.label&&(null==this.m_Name?this.label.text="":"string"==typeof this.m_Name?this.label.text=this.m_Name:this.label.textFlow=this.m_Name),this.levelLabel&&(null!=this.m_Lv?this.levelLabel.text="   "+GameString.GetLvName(this.m_ZsLv,this.m_Lv):this.levelLabel.text="")}},t}(eui.Component);__reflect(ActorName.prototype,"ActorName",["eui.UIComponent","egret.DisplayObject"]);var YuanfenTianbingPanel=function(e){function t(){var t=e.call(this)||this;return t.mType=2,t}return __extends(t,e),t.NAME="天兵天将",t}(YuanfenQixingPanel);__reflect(YuanfenTianbingPanel.prototype,"YuanfenTianbingPanel");var YuanfenTiangongPanel=function(e){function t(){var t=e.call(this)||this;return t.mType=3,t}return __extends(t,e),t.NAME="大闹天宫",t}(YuanfenQixingPanel);__reflect(YuanfenTiangongPanel.prototype,"YuanfenTiangongPanel");var YuanfenTipWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="YuanfenTipSkin",t._AddClick(t,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this.labGain1,this._OnClicked);var i=e[0];switch(i.type){case 1:this.mConfig=this.SetPetInfo(i.id);break;case 2:this.mConfig=this.SetTianshenInfo(i.id);break;case 3:this.mConfig=this.SetXianlvInfo(i.id)}if(this.mConfig)for(var o=GameGlobal.Config.GainItemConfig[this.mConfig.material.id],n=1;3>n;n++){var a=o.gainWay[n-1];this["labGain"+n].visible=null!=a,a&&(this["labGain"+n].text=a[0],UIHelper.SetLinkStyleLabel(this["labGain"+n]))}},t.prototype._OnClicked=function(e){switch(e.currentTarget){case this.labGain1:this.HandleClick(0);break;case this.labGain2:this.HandleClick(1)}},t.prototype.HandleClick=function(e){var t=GameGlobal.Config.GainItemConfig[this.mConfig.material.id],i=t.gainWay[e];i&&(ViewManager.ins().Guide(i[1][0],i[1][1]),ViewManager.ins().close(this))},t.prototype.SetPetInfo=function(e){var t=GameGlobal.Config.petBiographyConfig[e];if(t)return this.labName.text=t.name,this.labName.textColor=ItemBase.GetColorByQuality(t.quality),YuanfenHeadIcon.setInfo(this.compHead,t.quality,PetConst.GetHeadIcon(e)),this.labPower.text="获得可提升战力 "+ItemConfig.CalcAttrScoreValue(t.attrs),t},t.prototype.SetXianlvInfo=function(e){var t=GameGlobal.Config.partnerBiographyConfig[e];if(t)return this.labName.text=t.name,this.labName.textColor=ItemBase.GetColorByQuality(t.quality),YuanfenHeadIcon.setInfo(this.compHead,t.quality,"resource/assets/image/head/xianlv/"+t.icon+".png"),this.labPower.text="获得可提升战力 "+ItemConfig.CalcAttrScoreValue(t.attrs),t},t.prototype.SetTianshenInfo=function(e){var t=GameGlobal.Config.AirMarshalListConfig[e];if(t)return this.labName.text=t.name,this.labName.textColor=ItemBase.GetColorByQuality(t.quality),YuanfenHeadIcon.setInfo(this.compHead,t.quality,"resource/assets/image/head/tianshen/"+t.icon+".png"),this.labPower.text="获得可提升战力 "+ItemConfig.CalcAttrScoreValue(t.attrs),t},t.prototype.OnClose=function(){},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(YuanfenTipWin.prototype,"YuanfenTipWin");var YuanfenHeadIcon=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.setInfo=function(e,t,i){e.item.SetQuality(t),e.item.setItemImg(i)},t}(eui.Component);__reflect(YuanfenHeadIcon.prototype,"YuanfenHeadIcon");var YuanfenXingsuPanel=function(e){function t(){var t=e.call(this)||this;return t.mType=4,t}return __extends(t,e),t.NAME="星宿神君",t}(YuanfenQixingPanel);__reflect(YuanfenXingsuPanel.prototype,"YuanfenXingsuPanel");var JingCaiActivityWin=function(e){function t(){var t=e.call(this)||this;return t.skinName=UIHelper.PANEL_NO_TAB,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.commonWindowBg.SetTabView([TabView.CreateTabViewData(ZhuangPanActivityPanel),TabView.CreateTabViewData(GBattleGangRankPanel),TabView.CreateTabViewData(GBattleHKRankPanel),TabView.CreateTabViewData(GBattleScoreRankPanel)])},t.prototype.changeTitle=function(e){this.commonWindowBg.SetTitle(e[0])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0]||0;this.commonWindowBg.OnAdded(this,i);var o=e[1];o&&this.commonWindowBg.GetCurViewStackElement().OnOpen(null,o)},t.prototype.OnClose=function(){this.commonWindowBg.OnRemoved()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(JingCaiActivityWin.prototype,"JingCaiActivityWin");var zheKouBasePanel=function(e){function t(){var t=e.call(this)||this;return t.activityType=ActivityKaiFuFuncType.ACT_26_DisCountShop,t.skinName="zhuangPanShopSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=zhekouShopItem,this.list.dataProvider=new eui.ArrayCollection([])},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._activityId=e[0],this.observe(MessageDef.ACTIVITY_INFO,this.UpdateContent),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateContent),this.AddClick(this.getwayLabel,this._OnClick),this.UpdateContent(),this.AddTimer(1e3,0,this.updateTime),this.updateTime()},Object.defineProperty(t.prototype,"activityId",{set:function(e){this._activityId=e,this.UpdateContent()},enumerable:!0,configurable:!0}),t.prototype.updateTime=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);e?this.time_txt.textFlow=TextFlowMaker.generateTextFlow(e.getRemindTimeString()):this.time_txt.textFlow=TextFlowMaker.generateTextFlow("活动未开启")},t.prototype.getReward=function(){var e,t=[],i=ActivityConst.GetConfigByActityType(this.activityType)[this._activityId],o=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),n=i.length;for(e=0;n>e;e++){var a=i[e];if(a.Id==this._activityId){var r={};if(r.cfg=a,r.actType=this.activityType,r.weight=a.index,o){var s=o.canGetRecordByIndex(a.index),l=o.GetRecordByIndex(a.index);s?l?r.weight+=1e3:r.weight-=1e3:l&&(r.weight+=1e3)}t.push(r)}}return t},t.prototype.OnClose=function(){},t.prototype.UpdateContent=function(){if(this.visible&&this._activityId){var e=this.getReward();SortTools.sortMap(e,"weight"),this.list.dataProvider?this.list.dataProvider.replaceAll(e):this.list.dataProvider=new eui.ArrayCollection(e)}},t.prototype._OnClick=function(e){},t}(BaseView);__reflect(zheKouBasePanel.prototype,"zheKouBasePanel",["ICommonWindow"]);var zhekouShopItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.btn_buy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.gainway_txt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(e){if(e.currentTarget==this.btn_buy){if(!Checker.Money(this.data.cfg.gold.id,this.data.cfg.gold.count,!0))return;GameGlobal.ActivityKaiFuModel.sendReward(this.data.cfg.Id,this.data.cfg.index)}else if(e.currentTarget==this.gainway_txt){var t=this.data.cfg;GameGlobal.ViewManager.Guide(t.gainway[0][1][0])}},t.prototype.dataChanged=function(){var e=(this.data.type,this.data.cfg),t=(this.data.actType,GameGlobal.ActivityKaiFuModel.GetActivityDataById(e.Id));this.itemIcon.data=e.itemid,this.itemIcon.isShowName(!1),this.itemIcon.setCount(e.count);var i=GameGlobal.Config.ItemConfig[e.itemid];this.name_txt.textColor=ItemBase.QUALITY_COLOR[i.quality],this.name_txt.text=i.name;var o=0;2==e.type.type?this.limit_txt.text="不限购":(t&&(o=t.buynums[e.index-1]),this.limit_txt.text="限购（"+o+"/"+e.type.value+"）");e.value;this.imgBuyEnd.visible=!1,2!=e.type.type&&e.type.value<=o?this.imgBuyEnd.visible=!0:-1==KaiFuTargetShopPanel.curLookIndex&&(KaiFuTargetShopPanel.curLookIndex=e.index,GameGlobal.MessageCenter.dispatch(MessageDef.ACTIVITY_TARGET_ShOP_LOOK,e.index,e.pid,e.itemtype)),this.btn_buy.visible=this.imgBuyEnd.visible?!1:!0,this.priceIcon1.text=e.showgold,this.priceIcon2.text=e.gold.count,e.gainway&&(this.gainway_txt.text=e.gainway[0][0],UIHelper.SetLinkStyleLabel(this.gainway_txt,e.gainway[0][0])),this.gainway_txt.visible=e.gainway},t}(eui.ItemRenderer);__reflect(zhekouShopItem.prototype,"zhekouShopItem");var ZhuangPanActivityPanel=function(e){function t(){var t=e.call(this)||this;return t.dataList=[],t.listIcon=[],t.activityIconList=[],t.index=0,t.skinName="KaiFuActivityPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=(GameServer.serverOpenDay,GameGlobal.Config.ActivityConfig),t=GameGlobal.Config.ActivitySumBtnConfig;this.dataList=[];for(var i in t)4==t[Number(i)].openId&&this.dataList.push(Number(i));for(var o=0;o<this.dataList.length;o++){var n=this.dataList[o],a=void 0;6==e[n].activityType&&(a=ZhuangPanShopPanel),26==e[n].activityType&&(a=zheKouBasePanel);var r=GameGlobal.ActivityKaiFuModel.GetActivityDataById(n);r&&r.openState&&null!=a&&this.activityIconList.push({cls:a,icon:t[n].icon,actid:n,title:e[n].tabicon})}this.mListLRBtnCtrl=new ListLRBtnCtrl(this.list,this.leftBtn,this.rightBtn,130);var s=[];this.listIcon=[];for(var l=0,c=this.activityIconList;l<c.length;l++){var u=c[l];null!=u.cls&&(s.push(TabView.CreateTabViewData(u.cls)),this.listIcon.push(this.UpdateList(u.icon,!1)))}this.tabEuiView.tabChildren=s,this.list.itemRenderer=KaiFuBtnItem,this.list.dataProvider=new eui.ArrayCollection(this.listIcon)},t.prototype.UpdateList=function(e,t){return{icon:e,redPoint:t}},t.prototype.OnClickMenu=function(e){this.openPage(e.itemIndex)},t.prototype.openPage=function(e){var t=this.activityIconList[e];this.index=e,t&&this.tabEuiView.OpenIndex(this.index,t.actid)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e[0]&&(this.index=e[0]),this.list.selectedIndex=0,e[1])for(var i=0;i<this.activityIconList.length;i++)if(this.activityIconList[i].cls==e[1]){this.index=i;break}this.mListLRBtnCtrl.OnRefresh(),this.observe(MessageDef.ACTIVITY_ADVANCED_INFO,this.UpdateContent),this.observe(MessageDef.ACTIVITY_UPDATE,this.getUpList),this.AddItemClick(this.list,this.OnClickMenu),this.openPage(this.index),this.UpdateContent()},t.prototype.UpdateContent=function(){var e,t=this.activityIconList.length;for(e=0;t>e;e++){var i=this.activityIconList[e];i.redPoint=!1;var o=i.actid;GameGlobal.ActivityKaiFuModel.GetActivityDataById(o)}var n=this.list.dataProvider;n.replaceAll(this.listIcon),this.getUpList()},t.prototype.OnClose=function(){this.tabEuiView.CloseView()},t.prototype.getUpList=function(){var e=GameGlobal.Config.ActivityConfig;this.listIcon=[];for(var t=0;t<this.activityIconList.length;t++){var i=GameGlobal.ActivityKaiFuModel.jingCaiRedPoint(e[this.activityIconList[t].actid].activityType,this.activityIconList[t].actid,t);this.listIcon.push(this.UpdateListRedPoint(i))}var o=this.list.dataProvider;o.replaceAll(this.listIcon)},t.prototype.UpdateListRedPoint=function(e){return this.UpdateList(this.activityIconList[e[0]].icon,e[1])},t.LAYER_LEVEL=LayerManager.UI_Main,t.NAME="精彩活动",t}(BaseEuiView);__reflect(ZhuangPanActivityPanel.prototype,"ZhuangPanActivityPanel",["ICommonWindowTitle"]);var ZhuangPanResultPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="zhuangPanResultSkin",t.group.itemRenderer=ItemBase,t._AddClick(t.bg,t.CloseSelf),t._AddClick(t.btn0,t.CloseSelf),t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.data=i,this.group.dataProvider=new eui.ArrayCollection(i.rewards);for(var o=0,n=i.rewards;o<n.length;o++){var a=n[o];UserBag.ShowItemTips(a.id,a.count)}this.mTime=4,this.AddTimer(1e3,this.mTime,this.UpdateTime),this.UpdateTime()},t.prototype.UpdateTime=function(){this.timeLabel.textFlow=TextFlowMaker.generateTextFlow("点击任意区域关闭|C:0x019704&T:("+--this.mTime+"s)"),this.mTime<0&&this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ZhuangPanResultPanel.prototype,"ZhuangPanResultPanel");var ZhuangPanShopPanel=function(e){function t(){var t=e.call(this)||this;return t.click=!0,t.index=0,t.skinName="zhuangPanPanelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._activityId=e[0],this._AddClick(this.cj,this._Onclick),this.observe(MessageDef.ACTIVITY_UPDATE,this.UpdateIndex),this.observe(MessageDef.ACTIVITY_ADVANCED_ZHUANG_PAN_RULE,this._anminRota),this.AddTimer(1e3,0,this.UpdataTime),this.UpdateContent()},t.prototype.OnClose=function(){},t.prototype._Onclick=function(){return 0==this.activityData.openState&&this.activityData.drawtime<=0?void UserTips.InfoTip("活动结束"):this.activityData.drawtime<=0?void UserTips.InfoTip("没有次数"):void(this.click&&GameGlobal.ActivityKaiFuModel.sendReward(this._activityId,1))},t.prototype._anminRota=function(e){var t=this,i=360*Math.random()+2520;this.click&&(this.click=!1,egret.Tween.get(this.bnt).to({rotation:i},3e3,egret.Ease.sineInOut).call(function(){ViewManager.ins().open(ZhuangPanResultPanel,e),t.click=!0,t.bnt.rotation=0}))},t.prototype.UpdateIndex=function(e){e==this._activityId&&this.UpdateContent()},t.prototype.UpdateContent=function(){this.activityData=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId),this.index=this.activityData.reachindex||0,10==this.index&&(this.index=9),this.times.text="次数:"+(this.activityData.drawtime||0),this.UpdateItems(),this.UpdateBar(),this.UpdataTime(),this.UpdataBg()},t.prototype.UpdateItems=function(){for(var e=GameGlobal.Config.ActivityType6Config[this._activityId][this.index],t=0;t<this.items.numChildren;t++){var i=this.items.getChildAt(t);i.data=e.showitem[t]}},t.prototype.UpdataTime=function(){var e=GameGlobal.ActivityKaiFuModel.GetActivityDataById(this._activityId);e?this.lastTime.textFlow=TextFlowMaker.generateTextFlow(e.getRemindTimeString()):this.lastTime.textFlow=TextFlowMaker.generateTextFlow("活动未开启")},t.prototype.UpdateBar=function(){var e=this.index;10==this.index&&(e=9);var t=GameGlobal.Config.ActivityType6Config[this._activityId][e];this.zhuangPanBg.source=t.pic,this.bar.maximum=t.value,this.bar.value=this.activityData.value||0;var i=t.text,o=i.split("%s");this.barText.text=o[0]+""+(t.value-(this.activityData.value||0))+o[1]+t.count+o[2],t.value-this.activityData.value<=0&&9==e&&(this.barText.text="已达到最大数额")},t.prototype.UpdataBg=function(){0==this.activityData.openState?(this.lastTime.visible=!1,this.activityData.drawtime<=0?this.say.text="活动结束":this.say.text="活动结束 \n 您还有"+(this.activityData.drawtime||0)+"次抽奖请尽快使用"):this.say.text=""},t}(BaseView);__reflect(ZhuangPanShopPanel.prototype,"ZhuangPanShopPanel",["ICommonWindow"]);var ZhuangPanitem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.dataChanged=function(){this.item.data=this.data,this.quality.source="",4==GameGlobal.Config.ItemConfig[this.data.id].quality&&(this.quality.source="ui_jchd_bm_zhenping"),5==GameGlobal.Config.ItemConfig[this.data.id].quality&&(this.quality.source="ui_jchd_bm_zhenxi")},t}(eui.ItemRenderer);__reflect(ZhuangPanitem.prototype,"ZhuangPanitem");var CommonRaidModel=function(e){function t(){var t=e.call(this)||this;return t.m_Raid={},t.regNetMsg(S2cProtocol.sc_map_enter,t._MapEnter),t.regNetMsg(S2cProtocol.sc_map_other_enter,t._MapOtherEnter),t.regNetMsg(S2cProtocol.sc_map_other_leave,t._MapOtherLeave),t.regNetMsg(S2cProtocol.sc_map_other_move,t._MapOtherMove),t.regNetMsg(S2cProtocol.sc_map_other_fly,t._MapOtherFly),t.regNetMsg(S2cProtocol.sc_map_maincity_info,t._MainCityInfo),t.regNetMsg(S2cProtocol.sc_map_player_update,t._PlayerUpdate),t.regNetMsg(S2cProtocol.sc_map_player_status,t._PlayerStatus),t}return __extends(t,e),t.prototype.GetRaid=function(){for(var e in this.m_Raid)if(Number(e)!=GameMap.TYPE_ID_CITY)return this.m_Raid[e];return null},t.prototype.ClearRaid=function(){for(var e in this.m_Raid)Number(e)!=GameMap.TYPE_ID_CITY&&delete this.m_Raid[e]},Object.defineProperty(t.prototype,"OpenClick",{get:function(){return null!=this.GetRaid()},enumerable:!0,configurable:!0}),t.prototype.OnSocketClose=function(){this.m_Raid={}},t.prototype._MapEnter=function(e){var t=e.mapid,i=GameGlobal.Config.MapConfig[t],o=new GameMapData;o.fubenID=t,o.mapX=e.x,o.mapY=e.y,o.fbType=i.type;var n=GameGlobal.RaidMgr.EnterNewMapRaid(o);this.m_Raid[t]=n,n.CreateRole(e.myself),n.CreateRoleList(e.entitylist),GameGlobal.MessageCenter.dispatch(MessageDef.MINI_MAP_UPDATE_LIST),ViewManager.ins().close(PlayFunView),ViewManager.ins().close(GameCityPanel),ViewManager.ins().close(MainTop2Panel)},t.prototype._MapOtherEnter=function(e){var t=this.m_Raid[e.mapid];t&&(t.CreateRole(e.entity),GameGlobal.MessageCenter.dispatch(MessageDef.MINI_MAP_UPDATE_LIST))},t.prototype._MapOtherLeave=function(e){var t=this.m_Raid[e.mapid];t&&(e.id==GameGlobal.GameLogic.actorModel.actorID?this.EnterNormapMap():(t.RemoveEntity(e.id),GameGlobal.MessageCenter.dispatch(MessageDef.MINI_MAP_UPDATE_LIST)))},t.prototype._MapOtherMove=function(e){var t=this.m_Raid[e.mapid];t&&(t.OtherMoveTo(e.id,e.x,e.y),GameGlobal.MessageCenter.dispatch(MessageDef.MINI_MAP_UPDATE_LIST))},t.prototype._MapMove=function(e,t,i){var o=new Sproto.cs_map_move_request;o.mapid=e,o.x=t,o.y=i,this.Rpc(C2sProtocol.cs_map_move,o)},t.prototype._cs_map_fly=function(e,t,i){var o=new Sproto.cs_map_fly_request;o.mapid=e,o.x=t,o.y=i,this.Rpc(C2sProtocol.cs_map_fly,o)},t.prototype._MapOtherFly=function(e){var t=this.m_Raid[e.mapid];t&&t.FlyTo(e.id,e.x,e.y)},t.prototype._PlayerUpdate=function(e){var t=this.m_Raid[e.mapid];t&&t.UpdateOtherRole(e)},t.prototype._PlayerStatus=function(e){var t=this.m_Raid[e.mapid];t&&t.UpdatePlayerStatus(e.id,e.status)},t.prototype._MainCityInfo=function(e){this.mMainCityInfo=e,GameGlobal.MessageCenter.dispatch(MessageDef.MAIN_CITY_INFO)},t.prototype.EnterNormapMap=function(){var e=this.GetRaid();if(e){e.mFbType==UserFb.FB_TYPE_CLOUD_NINE&&SubRoles.ins().GetRoleData().ClearTmpData(),this.ClearRaid(),GameGlobal.ViewManagerImpl.CheckMainTop2Panel(),GameGlobal.ViewManagerImpl.CheckPlayFunviewState();var t=new GameMapData;t.fubenID=GameGlobal.UserFb.config.sid,GameGlobal.RaidMgr.EnterNewMapRaid(t),console.log("已经退出")}},t.prototype.MapLeave=function(){var e=this,t=this.GetRaid();if(t){t.OnLeave();var i=new Sproto.cs_map_leave_request;i.mapid=t.mMapId,this.Rpc(C2sProtocol.cs_map_leave,i,function(t){t.ret&&e.EnterNormapMap()})}},t.prototype._MapGo=function(e){var t=new Sproto.cs_map_enter_request;t.mapid=e,this.Rpc(C2sProtocol.cs_map_enter,t,function(e){e.ret&&console.log("已经进入")})},t.prototype.SendEnterCity=function(e){var t=new Sproto.cs_map_maincity_enter_request;t.channelId=e,this.Rpc(C2sProtocol.cs_map_maincity_enter,t,function(e){e.ret||UserTips.ins().showTips("|C:0xdb0000&T:进入主城失败|")},this)},t.prototype.SendWorship=function(e){var t=new Sproto.cs_map_maincity_worship_request;t.type=e,this.Rpc(C2sProtocol.cs_map_maincity_worship,t,function(e){e.ret},this)},t.prototype.SendGetChannelInfo=function(){var e=this,t=new Sproto.cs_map_maincity_channel_info_request;this.Rpc(C2sProtocol.cs_map_maincity_channel_info,t,function(t){e.mChannelInfos=t.channels,GameGlobal.MessageCenter.dispatch(MessageDef.CHANNEL_UPDATE_INFO)},this)},t.prototype.GetPointSource=function(e){var t=1,i="";for(var o in GameGlobal.Config.CityXStateConfig){var n=GameGlobal.Config.CityXStateConfig[o];if(n.range>=e){t=parseInt(o);break}}switch(t){case 1:i="ui_zc_bm_xian_lv";break;case 2:i="ui_zc_bm_xian_huang";break;case 3:i="ui_zc_bm_xian_hong"}return i},t.prototype.RefreshChannelList=function(){GameGlobal.MessageCenter.dispatch(MessageDef.CHANNEL_UPDATE_LIST)},t.prototype.IsInCurMap=function(e){return null!=this.m_Raid[e]},t}(BaseSystem);__reflect(CommonRaidModel.prototype,"CommonRaidModel");var RaidMgr=function(e){function t(){var t=e.call(this)||this;return t.m_LastTime=0,t.mShowType=0,t}return __extends(t,e),t.prototype.GetCurMapId=function(){return this.mMapRaid?this.mMapRaid.GetSceneId():0},t.prototype.UpdateBGM=function(){this.mShowType==t.TYPE_NORMAL?!this.mBattleRaid||this.mBattleRaid.mIsExit||egret.is(this.mBattleRaid,"NormalBattleRaid")?GameGlobal.SoundManager.PlayBg("guaji_mp3"):GameGlobal.SoundManager.PlayBg("war_mp3"):GameGlobal.SoundManager.PlayBg("city_mp3")},t.prototype.UpdateSetting=function(e){this.mMapRaid&&this.mMapRaid.UpdateSetting(e),this.mBattleRaid&&this.mBattleRaid.UpdateSetting(e)},t.prototype.Init=function(){GameMap.SetShowState(this.mShowType),GameGlobal.MessageCenter.addListener(MessageDef.NAME_CHANGE,this._OnChangeName,this),egret.startTick(this.UpdateTime,this)},t.prototype._OnChangeNameRaid=function(e){if(e)for(var t in e.mEntityList){var i=e.mEntityList[t],o=i.GetHandle();if(o==GameGlobal.SubRoles.GetRoleData().handle||o==GameGlobal.actorModel.actorID){i.GetInfo().entityName=GameGlobal.actorModel.name,i.UpdateInfo();break}}},t.prototype._OnChangeName=function(){this._OnChangeNameRaid(this.mMapRaid),this._OnChangeNameRaid(this.mBattleRaid)},t.prototype.UpdateTime=function(e){var t=e-this.m_LastTime;this.m_LastTime=e,this.m_NextRaid&&(this.m_CurRaid&&(this.m_CurRaid.mIsExit=!0,this.m_CurRaid.OnExit()),this.m_CurRaid=this.m_NextRaid,this.m_NextRaid=null,this.m_CurRaid.mIsExit=!1,this.m_CurRaid.OnEnter());var i=Math.min(t,40);return this.m_CurRaid&&this.m_CurRaid.DoUpdate(i),!1},t.prototype.Clear=function(){this.mMapRaid&&(this.mMapRaid.OnExit(),this.mMapRaid.Clear(),this.mMapRaid.mFbId=0,this.mMapRaid.mFbType=0),this.mBattleRaid&&this.mBattleRaid.OnExit(),this.mShowType=t.TYPE_NORMAL,GameMap.SetShowState(t.TYPE_NORMAL)},t.prototype.SetNextRaid=function(e){this.m_NextRaid=e},t.prototype.OnMapClick=function(e,t){this.mMapRaid&&this.mMapRaid.OnMapClick(e,t)},t.prototype.GetMapRaid=function(e,t){return this.mMapRaid&&(this.mMapRaid.mFbType!=e||this.mMapRaid.mFbId!=t)&&(this.mMapRaid.Clear(),this.mMapRaid=null),this.mMapRaid||(e?e==UserFb.FB_TYPE_CLOUD_NINE?this.mMapRaid=new MapCloudNine:e==UserFb.FB_TYPE_XIANDAO?this.mMapRaid=new MapRaidXiandao:100001==t?this.mMapRaid=new MapRaidCrossBattle:e==UserFb.FB_TYPE_GUILD_WAR?this.mMapRaid=new MapRaidGangBattle(t):e==UserFb.KF_BOSS?this.mMapRaid=new MapRaidAcrossBoss:e==UserFb.FB_TYPE_GANG_BOSS?this.mMapRaid=new MapRaidGangBoss:e==UserFb.FB_TYPE_GANGMAP?this.mMapRaid=new MapRaidGangMap:(console.error("GetMapRaid not def fbtype => "+e+", fbid => "+t),this.mMapRaid=new CommonMapRaid):this.mMapRaid=new NormalMapRaid,this.mMapRaid.mMapId=t,this.mMapRaid.mFbType=e,this.mMapRaid.mFbId=t,this.mMapRaid.Init()),this.mMapRaid},t.prototype.ExitFbRewardAndEnterMap=function(){GameGlobal.RaidModel.SendGetBossReward(),GameGlobal.RaidMgr.ExitFbAndEnterMap()},t.prototype.ExitFbAndEnterMap=function(){GameGlobal.UserFb.sendExitFb(),GameGlobal.RaidMgr.EnterCurMapRaid()},t.prototype.EnterCurMapRaid=function(){var e=this.mMapRaid;e||(e=this.GetMapRaid(0,0)),this.EnterMapRaid(e)},t.prototype.EnterNewMapRaid=function(e,t){void 0===t&&(t=!0),GameMap.parser(e);var i=GameGlobal.RaidMgr.GetMapRaid(GameMap.fbType,GameMap.fubenID);return t?(this.EnterMapRaid(i),GameGlobal.ViewManagerImpl.CheckPlayFunviewState(),GameGlobal.ViewManagerImpl.DoMapChange(),i):void 0},t.prototype.EnterMapRaid=function(e){BattleMap.Exit()&&GameGlobal.ViewManagerImpl.DoBattleChange(),this.SetNextRaid(e)},t.prototype.EnterNormalBattle=function(){var e=new NormalBattleRaid;e.Init(),e.SetBattleData(),this.mBattleRaid=e,this.SetNextRaid(e)},t.prototype.EnterCatchPet=function(){var e=new BattleMapData;e.mFbId=UserFb.FB_TYPE_CATCH_PET,e.mMapId=0,e.mFbType=UserFb.FB_TYPE_CATCH_PET,e.mFbName="",e.mFbDesc="",BattleMap.Parse(e);var t=new CatchPetRaid;t.Init(),t.SetBattleData(),this.mBattleRaid=t,this.SetNextRaid(t),GameGlobal.ViewManagerImpl.DoBattleChange()},t.prototype.BuZhuoPet=function(){var e=this.mBattleRaid;egret.is(e,"CatchPetRaid")&&e.Turn(e.CreatSkill())},t.prototype.EnterBattleRaid=function(e){var t;return t=e.mFbType==UserFb.FB_TYPE_PUBLIC_BOSS?new BattleRaidPubBoss:new BattleRaid,t.Init(),t.SetBattleData(e.entitys),this.mBattleRaid=t,BattleMap.Parse(e),this.SetNextRaid(t),GameGlobal.ViewManagerImpl.DoBattleChange(),GameGlobal.MessageCenter.dispatch(MessageDef.FUBEN_CHANGE),t},t.prototype.GetRaid=function(){return this.m_CurRaid},t.prototype.CreateEntity=function(e){this.GetRaid().CreateEntity(e)},t.prototype.DoExitFb=function(){return this.GetRaid().DoExitFb()},t.prototype.GetNextRaid=function(){return this.m_NextRaid},t.prototype.GetNormalMapRaid=function(){return this.mMapRaid&&Util.GetClass(this.mMapRaid)==NormalMapRaid?this.mMapRaid:null},t.prototype.UpdateRole=function(){var e=this.GetNormalMapRaid();e&&e.UpdateRole()},t.prototype.UpdateRolePet=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRolePet(e)},t.prototype.UpdateRoleTiannv=function(){var e=this.GetNormalMapRaid();e&&e.UpdateRoleTiannv()},t.prototype.UpdateRoleXianlv=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleXianlv(e)},t.prototype.UpdateRoleXianJun=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleXianJun(e)},t.prototype.UpdateRoleXianlvXw=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleXianlvXw(e)},t.prototype.UpdateRolePetTongl=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRolePetTongl(e)},t.prototype.UpdateRolePetShouh=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRolePetShouh(e)},t.prototype.UpdateRoleXianlvFz=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleXianlvFz(e)},t.prototype.UpdateRoleTiannvLq=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleTiannvLq(e)},t.prototype.UpdateRoleTiannvHua=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleTiannvHua(e)},t.prototype.UpdateRoleTianshen=function(e){var t=this.GetNormalMapRaid();t&&t.UpdateRoleTianshen(e)},t.prototype.GetCurMapRaid=function(){return this.mMapRaid},t.prototype.FinishRewardChapterBattle=function(){this.mBattleRaid&&BattleMap.mFbType==UserFb.FB_TYPE_GUANQIABOSS&&this.mBattleRaid.FinishBattleAndReward()},t.TYPE_NORMAL=0,t.TYPE_CITY=1,t}(BaseSystem);__reflect(RaidMgr.prototype,"RaidMgr");var RaidModel=function(e){function t(){var t=e.call(this)||this;return t.regNetMsg(S2cProtocol.sc_battle_action,t._DoBattleAction),t.regNetMsg(S2cProtocol.sc_battle_entitys,t._DoBattleRaid),t.regNetMsg(S2cProtocol.sc_raid_chapter_boss_result,t._DoBossResult),t.regNetMsg(S2cProtocol.sc_raid_sweep_reward,t.onlyResult),t.regNetMsg(S2cProtocol.sc_raid_chapter_mondata,t._DoChapterMonData),t.regNetMsg(S2cProtocol.sc_arena_pk_result,t._DoArenaPkResult),t.regNetMsg(S2cProtocol.sc_battle_record,t._DoBattleRecord),t.regNetMsg(S2cProtocol.sc_battle_manual,t._DoBattleManual),t.regNetMsg(S2cProtocol.sc_battle_set_auto,t._DoBattleSetAuto),t}return __extends(t,e),t.prototype.GetBattleRaid=function(){return GameGlobal.RaidMgr.mBattleRaid},t.prototype._DoChapterMonData=function(e){for(var t={},i=0,o=e.mondata;i<o.length;i++){var n=o[i];t[n.id]=n}this.mChapterData={fbcfg:e.fbcfg,mondata:t}},t.prototype._DoBossResult=function(e){var i=this.GetBattleRaid();if(i){var o=(GameMap.fbType==UserFb.KF_BOSS||GameMap.fbType==UserFb.FB_TYPE_GANG_BOSS)&&null!=i.mFinishAction;if(!o){var n=new BattleDefaultFinishData;n.ret=e.result,n.isWin=1==e.result,t.IS_FIGHT_WIN=1==e.result,n.rewards=RewardData.ToRewardDatas(e.rewards),n.star=e.star,i.SetFinishAction(n)}}GameGlobal.MessageCenter.dispatch(MessageDef.GUANQIA_CHANGE)},t.prototype.OnCrossBossResult=function(e){var t=this.GetBattleRaid();if(t&&(GameMap.fbType==UserFb.KF_BOSS||GameMap.fbType==UserFb.FB_TYPE_GANG_BOSS)){var i=new CrossBossFinishData;i.rewards=e.rewards,t.SetFinishAction(i)}},t.prototype.onlyResult=function(e){ViewManager.ins().open(e.result?ResultWinPanel:ResultFailPanel,e.rewards,function(){})},t.prototype._DoArenaPkResult=function(e){if(e.iskill)return e.rewards=RewardData.ToRewardDatas(e.rewards),void ViewManager.ins().open(ArenaPKResultPanel,e.result?!0:!1,e.rewards,e.maxrank,e.rank,e.lastrank,function(){GameGlobal.Arena.sendGetRewards(),GameGlobal.Arena.sendArenaData()});var t=this.GetBattleRaid();if(t){var i=new ArenaPKFinishData;i.isWin=1==e.result,i.rewards=RewardData.ToRewardDatas(e.rewards),i.maxrank=e.lastmaxrank,i.lastrank=e.lastrank,i.rank=e.rank,t.SetFinishAction(i)}},t.prototype._DoBattleAction=function(e){var t=BattleTurnDataParse.Parse(e),i=this.GetBattleRaid();i&&(i.mIsManual?i.Turn(t[0]):i.TurnAll(t))},t.prototype._DoBattleRecord=function(e){var t=e.raidType,i=(e.manual,e.entitydatas);if(!i)return void console.error("_DoBattleRecord entitydatas == null");for(var o=[],n=[],a=0,r=i;a<r.length;a++){var s=r[a],l=this._GetEntityData(s);s.side==EntityBattleSide.Def?o.push(l):n.push(l)}var c=this.EnterBattle(t,e.fbid,[o,n]);c&&(c.mIsVideo=!0,c.TurnAll(BattleTurnDataParse.Parse(e)),c.SetFinishAction(new BattleVideoFinishData(function(){ViewManager.ins().open(ArenaWin,1)}))),ViewManager.ins().close(XiandaoVideoPanel),ViewManager.ins().close(ArenaWin)},t.prototype._DoBattleRaid=function(e){for(var t=e.raidType,i=e.manual,o=e.entitydatas,n=[],a=[],r=0,s=o;r<s.length;r++){var l=s[r],c=this._GetEntityData(l);l.side==EntityBattleSide.Def?n.push(c):a.push(c)}var u=this.EnterBattle(t,e.fbid,[n,a]);i&&u&&u.SetManual(!0)},t.prototype.EnterBattle=function(e,t,i){var o=new BattleMapData;if(e==UserFb.FB_TYPE_GUANQIABOSS){var n=GameGlobal.RaidModel.mChapterData.fbcfg;o.mFbId=n.fbid,o.mMapId=n.scenes[0],o.mFbType=UserFb.FB_TYPE_GUANQIABOSS,o.mFbName=n.name,o.mFbDesc=n.desc}else{var n=GameGlobal.Config.InstanceConfig[t];o.mFbId=t,o.mMapId=n[GameGlobal.Config.InstanceConfig_keys.scenes][0],o.mFbType=e,o.mFbName=n[GameGlobal.Config.InstanceConfig_keys.name],o.mFbDesc=n[GameGlobal.Config.InstanceConfig_keys.desc]}return o.entitys=i,GameGlobal.RaidMgr.EnterBattleRaid(o)},t.prototype._GetEntityData=function(e){var t;return e.type==EntityType.Role?t=new EntityRole:e.type==EntityType.Monster?t=new EntityData:e.type==EntityType.Xianlv?t=new EntityXianlv:e.type==EntityType.Pet?t=new EntityPet:e.type==EntityType.Tiannv?t=new EntityTiannv:e.type==EntityType.Shenjiang?t=new EntityTianshen:e.type==EntityType.Lingtong?t=new EntityLingtong:e.type==EntityType.Xianjun?t=new EntityXianjun:console.error("not entity type => "+e.type),t&&(t.parserBase(e),t.posIndex=e.pos,t.side=e.side),t},t.prototype.SendGetBossReward=function(){this.Rpc(C2sProtocol.cs_raid_get_boss_reward,new Sproto.cs_raid_get_boss_reward_request)},t.prototype._DoBattleManual=function(e){GameGlobal.RaidMgr.mBattleRaid.StartManual(e.time,e.useskills)
},t.prototype._DoBattleSetAuto=function(e){GameGlobal.RaidMgr.mBattleRaid.SetAuto(1==e.isauto)},t.IS_FIGHT_WIN=!0,t}(BaseSystem);__reflect(RaidModel.prototype,"RaidModel");var AttrLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"labelColorL",{set:function(e){this._labelColorL=e,this.attrLabel&&(this.attrLabel.textColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideBg",{set:function(e){this.m_HideBg=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{set:function(e){this.m_Gap=parseInt(e),this.attrGroup&&(this.attrGroup.layout.gap=this.m_Gap)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{set:function(e){this.m_Text=e,this._UpdateText()},enumerable:!0,configurable:!0}),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.m_HideBg&&this.attrBg&&(this.attrBg.visible=!1),null!=this.m_Gap&&(this.attrGroup.layout.gap=this.m_Gap),null!=this.m_Text&&this._UpdateText(),this._labelColorL&&(this.attrLabel.textColor=this._labelColorL)},t.prototype._UpdateText=function(){this.$stage&&null!=this.m_Text&&(this.attrLabel.text=this.m_Text,this.arrows.visible=!1,this.nextAttrLabel.visible=!1)},t.prototype.SetCurAttr=function(e){this.attrLabel.text=e,this.arrows.visible=!1,this.nextAttrLabel.visible=!1},t.prototype.SetNextAttr=function(e){this.nextAttrLabel.text=e,this.arrows.visible=!0,this.nextAttrLabel.visible=!0},t.prototype.SetCurAttrByAddType=function(e,t){var i=AttributeData.getAttStr(AttributeData.AttrAddition(e.attr,t.attr),1);this.SetCurAttr(i)},t.prototype.SetNextAttrByAddType=function(e,t){var i=AttributeData.getAttStr(AttributeData.AttrAddition(e.attr,t.attr),1);this.SetNextAttr(i)},t.prototype.moveAttr=function(){var e=egret.Tween.get(this.attrLabel),t=this.attrLabel.x,i=this.nextAttrLabel.x;e.to({x:t+200,alpha:0},100).to({x:t-200},100).to({x:t,alpha:1},100);var o=egret.Tween.get(this.nextAttrLabel);o.to({x:i+200,alpha:0},100).to({x:i-200},100).to({x:i,alpha:1},100)},t.prototype.GetAttrLabel=function(){return this.attrLabel},t.prototype.GetNextAttrLabel=function(){return this.nextAttrLabel},t}(eui.Component);__reflect(AttrLabel.prototype,"AttrLabel",["eui.UIComponent","egret.DisplayObject"]);var CmLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this.val=e,this.UpdateLabel()},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){this.UpdateLabel()},t.prototype.UpdateLabel=function(){this.$stage&&(this.label.text=this.val||"")},t}(eui.Component);__reflect(CmLabel.prototype,"CmLabel");var AIUnitBuff=function(){function e(){this.mBuffId=0}return e.prototype.GetEff=function(){var e=GameGlobal.Config.EffectsConfig[this.mBuffId];if(e){var t=e[GameGlobal.Config.EffectsConfig_keys.effID];if(t){var i=GameGlobal.Config.BuffEffConfig[t];if(i)return i}}},e}();__reflect(AIUnitBuff.prototype,"AIUnitBuff");var CommonDialog=function(e){function t(){var t=e.call(this)||this;return t._Added=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"title",{set:function(e){this.m_Title=e,this._UpdateTitle()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideBtn",{set:function(e){this.m_HideBtn=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topBtn",{set:function(e){this.m_TopBtn=!0},enumerable:!0,configurable:!0}),t.prototype.setBgVisible=function(e){this.imgBg.visible=e},t.prototype._UpdateTitle=function(){this.titleLabel&&this.m_Title&&this.$stage&&(this.titleLabel.text=this.m_Title)},t.prototype.SetReturnButton=function(e){return e?(this.dialogReturnBtn&&(this.cacheReturnBtn=this.dialogReturnBtn,this.dialogReturnBtn.visible=!1),void(this.dialogReturnBtn=e)):void(this.cacheReturnBtn&&(this.dialogReturnBtn=this.cacheReturnBtn,this.dialogReturnBtn.visible=!0,this.cacheReturnBtn=null))},t.prototype.$setParent=function(t){var i=e.prototype.$setParent.call(this,t);if(i&&t){var o=Util.GetParentByType(t,BaseEuiView);o&&(o.mDialog=this)}return i},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this._UpdateTitle(),this.m_HideBtn&&(this.dialogCloseBtn.visible=!1),this.m_TopBtn&&this.parent&&(this.m_TempTimer=Timer.TimeOut(function(){DisplayUtils.SetParent(t.dialogReturnBtn,t.parent)},50))},t.prototype.OnAdded=function(e){this._Added=!0;for(var i=0,o=t.SHOW_DIALOG_LIST;i<o.length;i++){var n=o[i];n!=this&&(n.dialogMask.visible=!1)}t.SHOW_DIALOG_LIST.push(this),this.m_Target=e,this.dialogCloseBtn&&this.dialogCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogReturnBtn&&this.dialogReturnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask&&this.dialogMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.OnRemoved=function(){if(this._Added){this._Added=!1;for(var e=t.SHOW_DIALOG_LIST.length-1;e>=0;--e){var i=t.SHOW_DIALOG_LIST[e];if(null!=i&&i!=this){i.dialogMask.visible=!0;break}t.SHOW_DIALOG_LIST.splice(e,1)}this.dialogReturnBtn&&this.dialogReturnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogCloseBtn&&this.dialogCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask&&this.dialogMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_TempTimer&&this.m_TempTimer.Stop()}},t.prototype._Close=function(){return this.mCallback?void this.mCallback():void(this.m_Target&&ViewManager.ins().close(this.m_Target))},t.prototype._OnClick=function(e){if(this.dialogReturnBtn&&e.currentTarget==this.dialogReturnBtn&&this._Close(),!this.m_HideBtn)switch(e.currentTarget){case this.dialogMask:if(this.notClickMask)break;case this.dialogCloseBtn:this._Close()}},t.prototype.showReturnBtn=function(e){this.dialogReturnBtn&&(this.dialogReturnBtn.visible=e)},t.prototype.showCloseBtn=function(e){this.dialogCloseBtn.visible=e},t.prototype.addCustomImgBg=function(e){this.addChildAt(e,this.getChildIndex(this.dialogReturnBtn))},t.SHOW_DIALOG_LIST=[],t}(eui.Component);__reflect(CommonDialog.prototype,"CommonDialog",["eui.UIComponent","egret.DisplayObject"]);var CommonMiddleDialog=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"hideBtn",{set:function(e){this.m_HideBtn=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topBtn",{set:function(e){this.m_TopBtn=!0},enumerable:!0,configurable:!0}),t.prototype.SetReturnButton=function(e){return e?(this.btnReturn&&(this.cacheReturnBtn=this.btnReturn,this.btnReturn.visible=!1),void(this.btnReturn=e)):void(this.cacheReturnBtn&&(this.btnReturn=this.cacheReturnBtn,this.btnReturn.visible=!0,this.cacheReturnBtn=null))},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.m_HideBtn&&(this.btnClose.visible=!1),this.m_TopBtn&&this.parent&&(this.m_TempTimer=Timer.TimeOut(function(){DisplayUtils.SetParent(t.btnReturn,t.parent)},50))},t.prototype.OnAdded=function(e){for(var i=0,o=t.SHOW_DIALOG_LIST;i<o.length;i++){var n=o[i];n!=this&&(n.dialogMask.visible=!1)}t.SHOW_DIALOG_LIST.push(this),this.m_Target=e,this.btnClose&&this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.btnReturn&&this.btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask&&this.dialogMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype.OnRemoved=function(){for(var e=t.SHOW_DIALOG_LIST.length-1;e>=0;--e){var i=t.SHOW_DIALOG_LIST[e];if(null!=i&&i!=this){i.dialogMask.visible=!0;break}t.SHOW_DIALOG_LIST.splice(e,1)}this.btnReturn&&this.btnReturn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.btnClose&&this.btnClose.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.dialogMask&&this.dialogMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this),this.m_TempTimer&&this.m_TempTimer.Stop()},t.prototype._Close=function(){return this.mCallback?void this.mCallback():void(this.m_Target&&ViewManager.ins().close(this.m_Target))},t.prototype._OnClick=function(e){if(this.btnReturn&&e.currentTarget==this.btnReturn&&this._Close(),!this.m_HideBtn)switch(e.currentTarget){case this.dialogMask:if(this.notClickMask)break;case this.btnClose:this._Close()}},t.prototype.showReturnBtn=function(e){this.btnReturn.visible=e},t.prototype.showCloseBtn=function(e){this.btnClose.visible=e},t.SHOW_DIALOG_LIST=[],t}(eui.Component);__reflect(CommonMiddleDialog.prototype,"CommonMiddleDialog",["eui.UIComponent","egret.DisplayObject"]);var AIUnitMoveData=function(){function e(){this.mOffset=0,this.mAStar=null,this.mDir=1}return e.prototype.GetNextStar=function(e,t,i){if(!this.mAStar)return!1;var o=this.mAStar.pop();return o?(this.mAStar.length||(this.mAStar=null),this.DoInit(e,t,Const.PosToPixel(o.nX),Const.PosToPixel(o.nY),MoveTeam.MOVE_SPEED,this.mOffset)?(this.time=i,!0):!1):!1},e.prototype.InitByAStar=function(e,t,i,o,n){return void 0===n&&(n=0),this.mAStar=i,this.mOffset=n,this.GetNextStar(e,t,0)},e.prototype.Init=function(e,t,i,o,n,a){return void 0===a&&(a=0),this.mAStar=null,this.DoInit(e,t,i,o,n,a)},e.prototype.DoInit=function(e,t,i,o,n,a){void 0===a&&(a=0),this.sx=e,this.sy=t,this.ex=i,this.ey=o,this.mDir=DirUtil.GetDir(e,t,i,o);var r=e-i,s=t-o,l=Math.sqrt(r*r+s*s);if(a){if(a>=l)return this.duration=0,this.time=0,!1;l-=a;var c=egret.$TempPoint;MathUtils.VectorMagnitude(i-e,o-t,l,c),this.ex=this.sx+c.x,this.ey=this.sy+c.y}return this.duration=Math.ceil(l/n*1e3),this.time=0,this.duration>1},e.prototype.Update=function(t,i){if(!this.duration)return e.STATE_FINISH;var o,n=!1;this.time+=t;var a=this.sx,r=this.sy,s=this.ex,l=this.ey;if(this.time>=this.duration){var c=this.time-this.duration;n=!0,o=1,this.duration=0,this.mAStar&&this.GetNextStar(this.ex,this.ey,c)&&(n=!1)}else o=this.time/this.duration;MathUtils.TEMP_POS;return MathUtils.Lerp(a,r,s,l,o,i),n?e.STATE_FINISH:e.STATE_CONTINUE},e.prototype.GetGap=function(){return MathUtils.GetDisSqrt(this.sx,this.sy,this.ex,this.ey)},e.prototype.Stop=function(){this.duration=0,this.mAStar=null},e.STATE_FINISH=2,e.STATE_CONTINUE=1,e.STATE_NONE=0,e}();__reflect(AIUnitMoveData.prototype,"AIUnitMoveData");var AIUnitDeadFlash=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnEnter=function(){var e=this;e.remain=800,e.alpha=1,e.alphaDir=-1,e.cv=.1*AIUnitDeadState.speed,this.m_UnitState.mUnit.mEntity.UpdateAction(EntityClipType.DIE,!0)},t.prototype.OnUpdate=function(e){var t=this;return t.remain-=e,t.remain<=0?AIUnitReturn.NEXT:(t.remain<=600&&(t.alpha+=t.alphaDir*t.cv,(t.alpha<=0||t.alpha>=1)&&(t.alphaDir=-t.alphaDir),this.GetEntity().alpha=t.alpha),AIUnitReturn.CONTINUE)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),this.GetEntity().visible=!1},t}(AIUnitAction);__reflect(AIUnitDeadFlash.prototype,"AIUnitDeadFlash");var AIUnitDeadKickOut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.way=1,t.wayInvt=0,t.top=50,t.bottom=StageUtils.HEIGHT,t.left=0,t.right=820,t}return __extends(t,e),t.prototype.OnEnter=function(){var e=this;e.radius=50,e.count=0;var t=AIUnitDeadState.speed;t=1.5*t+1;var i=this.GetEntity().GetInfo(),o=i.posIndex,n=3;(9==o||10==o||4==o||5==o)&&(n=-5),2==i.side?(e.vx=12*t,e.vy=(12-n)*t):(e.vx=-12*t,e.vy=-(12-n)*t)},t.prototype.OnUpdate=function(e){var t=this,i=this.GetEntity(),o=i.x,n=i.y;return t.wayInvt+=e,t.wayInvt>100&&(t.way++,t.wayInvt=0,i.scaleX=t.way%2==0?1:-1),i.x+=t.vx,i.y+=t.vy,t.count>=2&&(t.radius=-100),o+t.radius>t.right?(i.x=t.right-t.radius,t.vx*=-1,t.count++):n+t.radius>t.bottom?(i.y=t.bottom-t.radius,t.vy*=-1,t.count++):o-t.radius<t.left?(i.x=t.left+t.radius,t.vx*=-1,t.count++):n-t.radius<t.top&&(i.y=t.top+t.radius,t.vy*=-1,t.count++),t.count>=3?(i.visible=!1,AIUnitReturn.NEXT):AIUnitReturn.CONTINUE},t}(AIUnitAction);__reflect(AIUnitDeadKickOut.prototype,"AIUnitDeadKickOut");var AIUnitDelayAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mDelay=0,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.mDelay=e,i},t.prototype.OnUpdate=function(e){return(this.mDelay-=e)>0?AIUnitReturn.CONTINUE:AIUnitReturn.NEXT},t}(AIUnitAction);__reflect(AIUnitDelayAction.prototype,"AIUnitDelayAction");var AIUnitEvadeAction=function(e){function t(){var t=e.call(this)||this;return t.m_Move=null,t.m_Time=0,t}return __extends(t,e),t.prototype.OnEnter=function(){this.m_Time=0,this.m_Move=null,this.m_Pos||(this.m_Pos={});var e=this.GetEntity().GetInfo();BattleCtrl.GetPos(e.IsSide(),e.posIndex,this.m_Pos)},t.prototype.OnExit=function(){var e=this.GetEntity();e.x=this.m_Pos.x,e.y=this.m_Pos.y},t.prototype.OnUpdate=function(e){this.m_Time+=e;var t=this.m_Time/600,i=this.GetEntity();if(t>=1)return i.x=this.m_Pos.x,i.y=this.m_Pos.y,AIUnitReturn.NEXT;var o=40*Math.sin(t*Math.PI);return i.x=this.m_Pos.x-o,AIUnitReturn.CONTINUE},t}(AIUnitAction);__reflect(AIUnitEvadeAction.prototype,"AIUnitEvadeAction");var AIUnitHitAction=function(e){function t(){var t=e.call(this)||this;return t.m_Move=null,t.mHit=0,t}return __extends(t,e),t.prototype.OnEnter=function(){this.m_Move=null,this.mHit=AIConfig.PLAY_ANIM_TIME-200,this.m_UnitState.mUnit.mEntity.UpdateAction(EntityClipType.HIT,!0),this.m_Pos||(this.m_Pos={});var e=this.GetEntity();this.m_Pos.x=e.x,this.m_Pos.y=e.y},t.prototype.OnExit=function(){var e=this.GetEntity();e.x=this.m_Pos.x,e.y=this.m_Pos.y,this.m_UnitState.mUnit.mEntity.UpdateAction(EntityClipType.STAND,!1)},t.prototype.OnUpdate=function(e){var t=this.mHit-=e;if(0>=t)return this.m_Move=null,this.mHit=0,AIUnitReturn.NEXT;var i=this.GetEntity(),o=80;if(o>t){var n=this.m_Move;null==n&&(n=this.m_Move={sx:i.x,sy:i.y}),MathUtils.Lerp(n.sx,n.sy,this.m_Pos.x,this.m_Pos.y,(o-t)/o,i)}else if(t>300||120>t){var a=!i.GetInfo().IsSide(),r=(a?-1.2:1.2)*AIUnitDeadState.speed,s=(a?-1.2:1.2)*AIUnitDeadState.speed;i.x+=r,i.y+=s}return AIUnitReturn.CONTINUE},t}(AIUnitAction);__reflect(AIUnitHitAction.prototype,"AIUnitHitAction");var AIUnitJumpAction=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.CreateMove=function(e,t){var i=this.CreateByTarget(e,t);return i.m_Entity=t,i},t.CreateByTarget=function(e,t){var i=egret.$TempPoint;return e?BattleCtrl.GetOffsetPos(e,i):(i.x=t.x,i.y=t.y),this.Create(i.x,i.y)},t.CreateByBlock=function(e,t){var i=egret.$TempPoint;return e?BattleCtrl.GetOffsetBlockPos(e,i):(i.x=t.mEntity.x,i.y=t.mEntity.y),this.Create(i.x,i.y)},t.Create=function(e,i){var o=new t;return o.m_EndX=e,o.m_EndY=i,o},t.prototype.GetY=function(e,i){e*=.001,i*=.001;var o=t.SPEED_A;return i*i*o/8>t.MAX_A&&(o=8*t.MAX_A/(i*i)),.5*o*i*e-.5*o*e*e},t.prototype.OnUpdate=function(e){var t=this.m_SX,i=this.m_SY;this.m_Time=this.m_Time+e;var o;if(this.m_Time>=this.m_Duration)o=1;else{o=this.m_Time/this.m_Duration;var n=o-1;o=n*n*n+1}var a=MathUtils.TEMP_POS;return MathUtils.Lerp(t,i,this.m_EndX,this.m_EndY,o,a),this.m_Entity.SetPos(a.x,a.y),o>=1?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE},t.prototype.OnEnter=function(){null==this.m_Entity&&(this.m_Entity=this.GetEntity()),this.m_Entity.UpdateAction(EntityClipType.JUMP,!0);var e=this.m_SX=this.m_Entity.x,i=this.m_SY=this.m_Entity.y,o=e-this.m_EndX,n=i-this.m_EndY;this.m_Duration=Math.ceil(Math.sqrt(o*o+n*n)/t.SPEED),this.m_Time=0},t.SPEED=1.42,t.SPEED_A=1e3,t.MAX_A=150,t}(AIUnitAction);__reflect(AIUnitJumpAction.prototype,"AIUnitJumpAction");var AIUnitPlayAction=function(e){function t(t){var i=e.call(this)||this;return i.m_Anim=t,i}return __extends(t,e),t.prototype.OnEnter=function(){this.GetUnit().mEntity.UpdateAction(this.m_Anim,!1)},t.prototype.OnUpdate=function(e){return AIUnitReturn.NEXT},t}(AIUnitAction);__reflect(AIUnitPlayAction.prototype,"AIUnitPlayAction");var AIUnitRunAction=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.OnUpdate=function(e){var t=this.m_SX,i=this.m_SY;this.m_Time=this.m_Time+e;var o;o=this.m_Time>=this.m_Duration?1:this.m_Time/this.m_Duration;var n=MathUtils.TEMP_POS;return MathUtils.Lerp(t,i,this.m_EndX,this.m_EndY,o,n),this.GetEntity().SetPos(n.x,n.y),o>=1?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE},t.prototype.OnEnter=function(){var e=this.m_SX=this.GetUnit().mEntity.x,t=this.m_SY=this.GetUnit().mEntity.y,i=this.GetArgs();this.m_EndX=i.mEndX,this.m_EndY=i.mEndY;var o=e-i.mEndX,n=t-i.mEndY;this.GetUnit().mEntity.LookPos(i.mEndX,i.mEndY),this.m_Duration=Math.ceil(Math.sqrt(o*o+n*n)/Const.GetMoveSpeed()*1e3),this.m_Time=0},t}(AIUnitAction);__reflect(AIUnitRunAction.prototype,"AIUnitRunAction");var AIUnitTriggerBlockAction=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.CreateByData=function(e,i){var o=new t;return o.handle=e,o.beHandle=i,o},t.prototype.OnEnter=function(){var e=this.m_UnitState.mUnit.mEntity.mRaid.GetEntity(this.handle);e.mAI.Protect(this.handle,this.beHandle)},t}(AIUnitAction);__reflect(AIUnitTriggerBlockAction.prototype,"AIUnitTriggerBlockAction");var AIUnitTriggerProtectAction=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.CreateByData=function(e,i){var o=new t;return o.handle=e,o.beHandle=i,o},t.prototype.OnEnter=function(){var e=this.m_UnitState.mUnit.mEntity.mRaid.GetEntity(this.handle);e.mAI.Protect(this.handle,this.beHandle)},t}(AIUnitAction);__reflect(AIUnitTriggerProtectAction.prototype,"AIUnitTriggerProtectAction");var AIUnitWaitAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mWait=!0,t}return __extends(t,e),t.prototype.OnUpdate=function(e){return this.mWait?AIUnitReturn.CONTINUE:AIUnitReturn.NEXT},t}(AIUnitAction);__reflect(AIUnitWaitAction.prototype,"AIUnitWaitAction");var ListAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mList=[],t.mIndex=0,t.m_DoEnter=!0,t}return __extends(t,e),t.Create=function(e){var t=new ParallelAction;return t.mList=e,t},t.prototype.Init=function(t){e.prototype.Init.call(this,t);for(var i=0,o=this.mList;i<o.length;i++){var n=o[i];n.Init(t)}},t.prototype.OnUpdate=function(e){var t=this.mList[this.mIndex];if(t){this.m_DoEnter&&(t.OnEnter(),this.m_DoEnter=!1);var i=t.OnUpdate(e);return i!=AIUnitReturn.CONTINUE&&(++this.mIndex,this.m_DoEnter=!0),AIUnitReturn.CONTINUE}return AIUnitReturn.NEXT},t.prototype.OnExit=function(){for(var e=0,t=this.mList;e<t.length;e++){var i=t[e];i.OnExit()}},t}(AIUnitAction);__reflect(ListAction.prototype,"ListAction");var ParallelAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mList=[],t}return __extends(t,e),t.Create=function(e){var i=new t;return i.mList=e,i},t.prototype.Init=function(t){e.prototype.Init.call(this,t);for(var i=0,o=this.mList;i<o.length;i++){var n=o[i];n.Init(t)}},t.prototype.OnEnter=function(){for(var e=0,t=this.mList;e<t.length;e++){var i=t[e];i.OnEnter()}},t.prototype.OnUpdate=function(e){for(var t=this.mList.length-1;t>=0;--t){var i=this.mList[t];i.OnUpdate(e)!=AIUnitReturn.CONTINUE&&this.mList.splice(t,1)}return this.mList.length<1?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE},t.prototype.OnExit=function(){for(var e=0,t=this.mList;e<t.length;e++){var i=t[e];i.OnExit()}},t}(AIUnitAction);__reflect(ParallelAction.prototype,"ParallelAction");var RaidAIUnit=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Init=function(t){var i=this,o=function(e){i.mStateList[e.mType]=e};o(AIUnit.GetStandState(this));var n=new AIUnitDeadState;n.Init(this),o(n),e.prototype.Init.call(this,t),this.mCurState.OnEnter()},t}(AIUnit);__reflect(RaidAIUnit.prototype,"RaidAIUnit");var BDelayAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mDelay=0,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.mDelay=e,i},t.prototype.OnUpdate=function(e){return(this.mDelay-=e)>0?AIUnitReturn.CONTINUE:AIUnitReturn.NEXT},t}(BUnitAction);__reflect(BDelayAction.prototype,"BDelayAction");var CommonWindowBg=function(e){function t(){var t=e.call(this)||this;return t.mHelpId=null,t.mHelpTitle=null,t._Added=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"title",{set:function(e){this.m_Title=e},enumerable:!0,configurable:!0}),t.prototype.setHelp=function(e,t){this.mHelpId=e,t&&(this.mHelpTitle=t)},t.prototype.$setParent=function(t){var i=e.prototype.$setParent.call(this,t);return i&&t&&(egret.is(t,"BaseEuiView")?t.mCommonWindowBg?console.error("repeat add commonwindowbg => "+egret.getQualifiedClassName(t)):t.mCommonWindowBg=this:console.error("parent not baseeuiview ")),i},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.viewStack&&(this.viewStack.touchEnabled=!1),this.m_TabDatas=this.viewStack,null==this.viewStack&&(this.viewStack=t.EMPTY_CLS),null==this.tabBar&&(this.tabBar=t.EMPTY_CLS),this.tabBar.itemRenderer=WindowTabBarItem},t.prototype.OnTap=function(e){var t=e.target;if(t==this.helpBtn&&this.mHelpId)return void ViewManager.ins().open(ActivityDescPanel,this.mHelpId,this.mHelpTitle);var i=0;switch(t){case this.returnBtn:i=0;break;case this.closeBtn:i=1}this.m_CommonWindow&&this.m_CommonWindow.OnBackClick?0==this.m_CommonWindow.OnBackClick(i)&&ViewManager.ins().close(this.m_CommonWindow):ViewManager.ins().close(this.m_CommonWindow)},t.prototype._CheckTab=function(e){var t=null;if(t=egret.is(this.viewStack,"TabView")?this.viewStack.GetElementCls(e):Util.GetClass(this.viewStack.getElementAt(e)),t&&t.openCheck&&!t.openCheck())return!1;var i=this.m_CommonWindow.OnOpenIndex?this.m_CommonWindow.OnOpenIndex(e):!0;return i?!0:!1},t.prototype._OnTabTap=function(){var e=this._CheckTab(this.tabBar.selectedIndex);e||(this.tabBar.selectedIndex=this.m_OldIndex)},t.prototype._OnTabChange=function(){this.viewStack.selectedIndex!=this.m_OldIndex&&(this.m_OldIndex=this.viewStack.selectedIndex,this._UpdateRoleSelectVisible(),this._UpdateTitle(),this._UpdateHelpBtn(),this._SetCurShowView(this._GetCurViewStackElement()),this._UpdateViewContent())},t.prototype.SetTabIndex=function(e){this._CheckTab(e)&&(this.viewStack.selectedIndex=e,this._OnTabChange())},t.prototype._OnRoleSelect=function(){this._UpdateViewContent()},t.prototype._GetCurViewStackElement=function(){var e=this.viewStack.getElementAt(this.viewStack.selectedIndex);return e},t.prototype.GetCurViewStackElement=function(){return this.viewStack.getElementAt(this.viewStack.selectedIndex)},t.prototype.GetViewStackElementByIndex=function(e){return this.viewStack.getElementAt(e)},t.prototype.GetViewByClassType=function(e){for(var t=0;t<this.viewStack.length;t++){var i=this.viewStack.getElementAt(t);if(i&&Util.GetClass(i)==e)return i}return null},t.prototype._UpdateTitle=function(){var e,t=this._GetCurViewStackElement();t&&(e=t.windowTitleIconName,e||this.m_Title||(e=t.name)),e||egret.is(this.m_CommonWindow,"ICommonWindowTitle")&&(e=this.m_CommonWindow.windowTitleIconName),e||(e=this.m_Title),e&&this.nameIcon&&(egret.is(this.nameIcon,"eui.BitmapLabel")?this.nameIcon.text=e:this.nameIcon.source=e)},t.prototype.SetTitle=function(e){egret.is(this.nameIcon,"eui.BitmapLabel")?this.nameIcon.text=e:this.nameIcon.source=e},t.prototype._UpdateViewContent=function(){var e=this._GetCurViewStackElement();e?e.UpdateContent&&e.UpdateContent():egret.is(this.m_CommonWindow,"ICommonWindowTitle")&&this.m_CommonWindow.UpdateContent()},t.prototype._SetCurShowView=function(e,t){void 0===t&&(t=null),this.m_CurShowView&&this.m_CurShowView.DoClose&&(this.m_CurShowView.DoClose(),this.m_CurShowView=null),this.m_CurShowView=e,this.m_CurShowView&&this.m_CurShowView.DoOpen&&(egret.is(e,"ICommonWindowRoleSelect"),egret.is(e,"BaseView"),null!=t&&(t=[t]),this.m_CurShowView.DoOpen(t))},t.prototype._UpdateRoleSelectVisible=function(){this._GetCurViewStackElement()},t.prototype.SetTabView=function(e){if(!egret.is(this.viewStack,"TabView"))return void console.error("not tabview !!!");var t=this.viewStack;t.tabChildren=e},t.prototype.SetViewStack=function(e){return null==e?void console.error("commonwindowbg:setviewstack stack is null!!!"):(this.viewStack=e,void(this.m_TabDatas=this.viewStack))},t.prototype.SetTabDatas=function(e){this.m_TabDatas=e},t.prototype.AddChildStack=function(e){this.viewStack.addChild(e)},t.prototype.SetChildStack=function(e){this.viewStack.elementsContent=e},t.prototype.OnAdded=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=null),this._Added=!0,this.m_CommonWindow=e;var o=this.m_TabDatas?this.m_TabDatas.length||0:0;t>=o&&(t=0),this.m_OldIndex=t,this.tabBar.dataProvider=this.m_TabDatas,this.TabBarSetData(this.tabBar,this.m_TabDatas),this.tabBar.validateNow(),this.viewStack.selectedIndex=t,this.returnBtn&&this.returnBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.helpBtn&&this.helpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.tabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnTabTap,this),this.tabBar.addEventListener(egret.Event.CHANGE,this._OnTabChange,this),this._UpdateTitle(),this._UpdateHelpBtn(),this._UpdateRoleSelectVisible(),this._SetCurShowView(this._GetCurViewStackElement(),i),this._UpdateViewContent(),this.m_CommonWindow&&DisplayUtils.ChangeParent(this.closeBtn,this.m_CommonWindow),this.m_CommonWindow&&this.helpBtn&&DisplayUtils.ChangeParent(this.helpBtn,this.m_CommonWindow)},t.prototype.OnRemoved=function(){this._Added&&(this._Added=!1,this.returnBtn&&this.returnBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnTap,this),this.tabBar.removeEventListener(egret.Event.CHANGE,this._OnTabChange,this),this.tabBar.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this._OnTabTap,this),this.helpBtn&&this.helpBtn.removeEventListener(egret.TouchEvent.CHANGE,this.OnTap,this),null!=this.tabBar&&(this.tabBar.dataProvider=null),this.tabBar.itemRenderer=WindowTabBarItem,this._SetCurShowView(null),this.m_CommonWindow=null)},t.prototype.OnDestroy=function(){for(var e=0;e<this.viewStack.numChildren;++e){var t=this.viewStack.getChildAt(e);t&&t.OnDestroy&&t.OnDestroy()}},t.prototype._UpdateHelpBtn=function(){if(this.helpBtn){var e,t=this._GetCurViewStackElement();t&&(e=t.mWindowHelpId),e||(e=this.m_CommonWindow.mWindowHelpId),this.helpBtn.visible=null!=e,this.mHelpId=e}},t.prototype.GetSelectedIndex=function(){return this.viewStack.selectedIndex},t.prototype.CloseStack=function(e){this.viewStack.getElementAt(e).DoClose()},t.prototype.ClearTalRedPoint=function(){for(var e=0;e<this.tabBar.numChildren;++e)this.ShowTalRedPoint(e,!1)},t.prototype._GetTalRedTarget=function(e){if(!(e>=this.tabBar.numElements)){var t=this.tabBar.getElementAt(e);if(t)return t.redPoint}},t.prototype.ShowTalRedPoint=function(e,t){var i=this._GetTalRedTarget(e);i&&(i.visible=t)},t.prototype.CheckTalRedPoint=function(e){var t=null;if(egret.is(this.viewStack,"TabView")){var i=this.viewStack.childrenList;if(i){var o=i[e];o&&(t=o.obj?Util.GetClass(o.obj):egret.getDefinitionByName(o.className))}}else t=Util.GetClass(this.viewStack.getElementAt(e));if(t&&t.RedPointCheck){var n=t.RedPointCheck();this.ShowTalRedPoint(e,n)}},t.prototype.CheckTabRedPoint=function(){for(var e=!1,t=0;t<this.viewStack.numElements;++t){var i=this.viewStack.getElementAt(t);if(i.CheckRedPoint){var o=i.CheckRedPoint();this.ShowTalRedPoint(t,o),o&&(e=!0)}}return e},t.prototype.TabBarSetData=function(e,t){var i=e.$dataProvider;i&&egret.is(i,"TabView")&&(i.removeEventListener(eui.PropertyEvent.PROPERTY_CHANGE,e.onViewStackIndexChange,e),e.removeEventListener(egret.Event.CHANGE,e.onIndexChanged,e)),t&&egret.is(t,"TabView")&&(t.addEventListener(eui.PropertyEvent.PROPERTY_CHANGE,e.onViewStackIndexChange,e),e.addEventListener(egret.Event.CHANGE,e.onIndexChanged,e))},t.EMPTY_CLS={getCurRole:function(){return 0},DoOpen:function(){},onViewStackIndexChange:function(){},DoClose:function(){},addEventListener:function(){},removeEventListener:function(){},visible:!1,numElements:0,numChildren:0,selectedIndex:0,validateNow:function(){},getElementAt:function(){}},t}(eui.Component);__reflect(CommonWindowBg.prototype,"CommonWindowBg",["eui.UIComponent","egret.DisplayObject"]);var WindowTabBarItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.labelDisplay.text=e.name,e.notShow?UIHelper.SetVisible(this,!1):UIHelper.SetVisible(this,!0)},t}(eui.ItemRenderer);__reflect(WindowTabBarItem.prototype,"WindowTabBarItem");var BUnitAtkAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_Triggers=[],t.m_TriggerIndex=0,t}return __extends(t,e),t.Create=function(e,i,o,n){var a=new t;return a.mRaid=e,a.mSelf=i,a.skillId=o,a.event=n,a.m_SkillEffConfig=SkillsConfig.GetSkillEffConfig(o),a},t.prototype.OnEnter=function(){this.InitTriggerList(),e.prototype.OnEnter.call(this)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),this.mSelf&&this.mSelf.UpdateAction(EntityClipType.STAND,!1),this.event=[[]],this.m_Triggers=[]},t.prototype.OnUpdate=function(e){var t=this.m_Triggers[this.m_TriggerIndex];return t?t.time>=0&&(t.time-=e)>0?AIUnitReturn.CONTINUE:t.event&&t.event.call(this,e,t.data)?AIUnitReturn.CONTINUE:++this.m_TriggerIndex>=this.m_Triggers.length?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE:AIUnitReturn.NEXT},t.prototype.ExeAction=function(e){e.mType==BattleTurnDataParse.TYPE_ACTIONHP?this.DamageFunc(e):(e.Execute(this.mRaid),e.mType==BattleTurnDataParse.TYPE_REMOVEBUFF||e.mType==BattleTurnDataParse.TYPE_ACTIONBUFF||e.mType==BattleTurnDataParse.TYPE_BUFFSTATUSHP||console.error("not impl DamageFunc type => "+e.mType))},t.prototype.ExecuteFunc=function(e,t){if(t)for(var i=(this.mRaid,0),o=t;i<o.length;i++){var n=o[i];this.ExeAction(n)}},t.prototype.DelayExecuteFunc=function(e,t){return t.index>=t.data.length?!1:t.time<125?(t.time+=e,!0):(t.time=0,this.ExeAction(t.data[t.index++]),t.index>=t.data.length?!1:!0)},t.prototype.PreExecuteFunc=function(e){if(e){var t=this.m_SkillEffConfig?this.m_SkillEffConfig.becastPos:SkillsConfig.BECAST_TYPE.TYPE_0;if(t==SkillsConfig.BECAST_TYPE.TYPE_1)for(var i=(this.mRaid,0),o=e;i<o.length;i++){var n=o[i],a=n,r=this.mRaid.GetEntity(a.target);r&&GameGlobal.EntityEffMgr.PlayEffByPos(this.m_SkillEffConfig,r.x,r.y)}}},t.prototype.DamageFunc=function(e){var t=this.mRaid.GetEntity(e.target);if(t){var i=DamageData.Set(t.GetInfo().team,t.x,t.y,e.type,e.value,this.skillId);if(e.type==DamageTypes.Evade)t.mAI.Evade(i);else{t.mAI.Hit(i,e.HasDead());var o=t.GetInfo();o&&(this.m_SkillEffConfig&&this.m_SkillEffConfig.becastPos!=SkillsConfig.BECAST_TYPE.TYPE_1&&GameGlobal.EntityEffMgr.PlayBecastEff(this.m_SkillEffConfig,e.target,o.x,o.y,t.GetDir()),this.mRaid.OnEventDamage(o.handle))}}},t.prototype.InitTriggerList=function(){this.m_Triggers=[],this.m_TriggerIndex=0;var e=[];if(this.event.length>0){e[0]={time:0,event:this.PlayFunc,data:null};for(var t=30,i=-t,o=0,n=this.event;o<n.length;o++){var a=n[o];i+=t;var r=this.m_SkillEffConfig.animId;if(100==r){var s=new BUnitAtkDelayExeData;s.data=a||[],s.index=0,s.time=0,e.push({time:t,event:this.DelayExecuteFunc,data:s})}else e.push({time:t,event:this.ExecuteFunc,data:a})}e[1].time=AIConfig.HIT_TIME,e.push({time:Math.max(AIConfig.HIT_RESET_TIME-i,0),event:null,data:null})}this.m_Triggers=e},t.prototype.PlayFunc=function(){var e=this.m_SkillEffConfig;return e?(this.mSelf.mAI.ClearOtherAnim(),this.mSelf.ReplayAction(EntityClipType.ATTACK,!0),this.event&&this.event[0]&&this.PreExecuteFunc(this.event[0]),void GameGlobal.EntityEffMgr.PlayCastSkillEff(e,this.mSelf)):void console.warn("not skilleff config => "+this.skillId)
},t}(BUnitAction);__reflect(BUnitAtkAction.prototype,"BUnitAtkAction");var BUnitAtkDelayExeData=function(){function e(){}return e}();__reflect(BUnitAtkDelayExeData.prototype,"BUnitAtkDelayExeData");var BUnitJumpAction=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.CreateByTarget=function(e,t){var i=egret.$TempPoint;return e?BattleCtrl.GetOffsetPos(e,i):(i.x=t.x,i.y=t.y),this.Create(i.x,i.y,t)},t.CreateByBlock=function(e,t){var i=egret.$TempPoint;return e?BattleCtrl.GetOffsetBlockPos(e,i):(i.x=t.x,i.y=t.y),this.Create(i.x,i.y,t)},t.Create=function(e,i,o){var n=new t;return n.m_EndX=e,n.m_EndY=i,n.m_Entity=o,n},t.prototype.OnUpdate=function(e){this.m_SX,this.m_SY;this.m_Time=this.m_Time+e;var t;if(this.m_Time>=this.m_Duration)t=1;else{t=this.m_Time/this.m_Duration;var i=t-1;t=i*i*i+1}var o=MathUtils.TEMP_POS;return this.bezier.Get(t,o),this.m_Entity.SetPos(o.x,o.y),t>=1?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE},t.prototype.OnEnter=function(){this.m_Entity.UpdateAction(EntityClipType.JUMP,!0);var e=this.m_SX=this.m_Entity.x,i=this.m_SY=this.m_Entity.y,o=e-this.m_EndX,n=i-this.m_EndY,a=this.m_EndX-e,r=this.m_EndY-i;this.m_Duration=Math.ceil(Math.sqrt(o*o+n*n)/t.SPEED),this.m_Time=0,this.bezier=new Bezier([{x:e,y:i},{x:e+.25*a,y:i+.25*r-70},{x:e+.75*a,y:i+.75*r-70},{x:this.m_EndX,y:this.m_EndY}])},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),GameMap.GetBattleView().UpdateSort()},t.SPEED=1.42,t.SPEED_A=1e3,t.MAX_A=150,t}(BUnitAction);__reflect(BUnitJumpAction.prototype,"BUnitJumpAction");var ConsumeLabel=function(e){function t(){var t=e.call(this)||this;return t.mIsImg=!1,t.m_IsMaxTip=null,t.m_overLengthFlag=!1,t}return __extends(t,e),t.prototype._Complete=function(){UIHelper.SetRatio(this.typeImg,44,44)},Object.defineProperty(t.prototype,"consumeItemId",{get:function(){return this.m_ConsumeItemId},set:function(e){var t=Number(e),i=GameGlobal.Config.ItemConfig[t];i?this.consumeType=i.name:this.consumeType="",this.m_ConsumeItemId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consumeType",{get:function(){return this.m_ConsumeType},set:function(e){this.m_ConsumeType=e,this.m_ConsumeItemId=null},enumerable:!0,configurable:!0}),t.prototype.SetData=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.consumeType=e,null!=i?this.m_CurValue=i:this.m_CurValue=null,null!=t?this.m_ConsumeValue=t:this.m_ConsumeValue=null,this._UpdateContent()},t.prototype.SetItem=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.consumeItemId=e,null!=i&&(this.m_CurValue=i),null!=t&&(this.m_ConsumeValue=t),this._UpdateContent()},Object.defineProperty(t.prototype,"overLengthFlag",{set:function(e){this.m_overLengthFlag=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{set:function(e){this._textColor=e,this.label&&(this.label.textColor=this._textColor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxTip",{set:function(e){this.m_IsMaxTip=e,this.$stage&&this._UpdateMaxTip()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consumeValue",{get:function(){return this.m_ConsumeValue},set:function(e){this.m_ConsumeValue=parseInt(e),this._UpdateContent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curValue",{get:function(){return this.m_CurValue},set:function(e){this.m_CurValue=parseInt(e),this._UpdateContent()},enumerable:!0,configurable:!0}),t.prototype._UpdateMaxTip=function(){return StringUtils.IsNullOrEmpty(this.m_IsMaxTip)?!1:(this.label.visible=!0,this.label.text=this.m_IsMaxTip,!0)},t.prototype._UpdateContent=function(){if(this.$stage&&!this._UpdateMaxTip()){this._textColor&&(this.label.textColor=this._textColor),this.label.visible=!0;var e="";if(this.mIsImg?(UIHelper.SetVisible(this.imgGroup,!0),this.typeImg.source=RewardData.GetCurrencyMiniRes(this.m_ConsumeItemId)):(UIHelper.SetVisible(this.imgGroup,!1),this.m_ConsumeType&&(e+=this.m_ConsumeType),e+="："),null!=this.m_CurValue&&!isNaN(this.m_CurValue)){var t=this.m_overLengthFlag?CommonUtils.overLength(this.m_CurValue):this.m_CurValue;e+=null!=this.m_ConsumeValue?(this.m_CurValue<this.m_ConsumeValue?"|C:0xff0000&T:":"|C:0x019704&T:")+t+"|/":this.m_CurValue+"/"}e+=null!=this.m_ConsumeValue?this.m_ConsumeValue:0,this.label.textFlow=TextFlowMaker.generateTextFlow(e)}},t.GetValueColor=function(e,t){return e=e||0,TextFlowMaker.generateTextFlow(StringUtils.addColor(e,e>=t?104196:Color.Red)+"/"+t)},t.GetValue=function(e,t){return e>=t?!0:!1},t.GetValueColor2=function(e,t,i){return void 0===i&&(i=null),e=e||0,i=i||104196,TextFlowMaker.generateTextFlow(StringUtils.addColor(e,e>=t?i:Color.Red)+"/"+t)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._textColor&&this.label&&(this.label.textColor=this._textColor),this.imgGroup.includeInLayout=!1,this.typeImg.addEventListener(egret.Event.COMPLETE,this._Complete,this),this._UpdateContent()},t.prototype.ShowMaxTip=function(e){e&&(this.m_CacheValue=this.label.text,this.label.text=e)},t}(eui.Component);__reflect(ConsumeLabel.prototype,"ConsumeLabel",["eui.UIComponent","egret.DisplayObject"]);var BUnitParallelAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mList=[],t}return __extends(t,e),t.Create=function(e){var i=new t;return i.mList=e,i},t.prototype.Init=function(e){for(var t=0,i=this.mList;t<i.length;t++){var o=i[t];o.Init(e)}},t.prototype.OnEnter=function(){for(var e=0,t=this.mList;e<t.length;e++){var i=t[e];i.OnEnter()}},t.prototype.OnUpdate=function(e){for(var t=this.mList.length-1;t>=0;--t){var i=this.mList[t];i.OnUpdate(e)!=AIUnitReturn.CONTINUE&&this.mList.splice(t,1)}return this.mList.length<1?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE},t.prototype.OnExit=function(){for(var e=0,t=this.mList;e<t.length;e++){var i=t[e];i.OnExit()}},t}(BUnitAction);__reflect(BUnitParallelAction.prototype,"BUnitParallelAction");var BUnitPlayAction=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.Create=function(e,i,o){void 0===o&&(o=!0);var n=new t;return n.m_Anim=i,n.m_Src=e,n},t.prototype.OnEnter=function(){this.m_Src.UpdateAction(this.m_Anim,this.m_Once)},t}(BUnitAction);__reflect(BUnitPlayAction.prototype,"BUnitPlayAction");var BUnitPlayWordAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mTime=500,t}return __extends(t,e),t.Create=function(e,i){var o=new t;return o.m_Anim=i,o.m_Src=e.GetHandle(),o},t.prototype.OnEnter=function(){var e=this.mContext.GetEntity(this.m_Src);e?(this.mTime=AIConfig.WORD_EFF_TIME,GameMap.GetBattleView().bloodLayer.ShowSkillName(e.x,e.y,this.m_Anim)):this.mTime=0},t.prototype.OnUpdate=function(e){return(this.mTime-=e)<=0?AIUnitReturn.NEXT:AIUnitReturn.CONTINUE},t}(BUnitAction);__reflect(BUnitPlayWordAction.prototype,"BUnitPlayWordAction");var AIUnitDeadState=function(e){function t(){var t=e.call(this)||this;return t.mType=AIUnitStateType.Die,t}return __extends(t,e),t.prototype.OnEnter=function(){GameGlobal.EntityEffMgr.UnbindByHandle(this.mUnit.mEntity.GetHandle());var t=this.mUnit.mEntity,i=t.GetInfo(),o=!1;i&&i.type==EntityType.Monster&&(o=Math.random()>.3),o?this.mAction=[new AIUnitDeadFlash]:this.mAction=[new AIUnitDeadKickOut];for(var n=0,a=this.mAction;n<a.length;n++){var r=a[n];r.Init(this)}e.prototype.OnEnter.call(this)},t.prototype.OnExit=function(){},t.speed=1.5,t}(AIUnitState);__reflect(AIUnitDeadState.prototype,"AIUnitDeadState");var AIUnitProtectState=function(e){function t(){var t=e.call(this)||this;return t.mType=AIUnitStateType.PROTECT,t}return __extends(t,e),t.prototype.PlayHit=function(){this.mAction[1].mWait=!1;var e=this.mAction[2];return e?e.mHit||0:void 0},t.prototype.OnEnter=function(){var t=this.mUnit.mEntity.mRaid,i=t.GetEntity(this.mAIUnitArgs.mBlockSrc),o=t.GetEntity(this.mAIUnitArgs.mBeBlockSrc);this.mAction=[AIUnitJumpAction.CreateByBlock(o,i.mAI),new AIUnitWaitAction,new AIUnitHitAction,AIUnitJumpAction.Create(i.x,i.y)];for(var n=0,a=this.mAction;n<a.length;n++){var r=a[n];r.Init(this)}e.prototype.OnEnter.call(this)},t.prototype.OnExit=function(){},t}(AIUnitState);__reflect(AIUnitProtectState.prototype,"AIUnitProtectState");var AIUnitStandState=function(e){function t(){var t=e.call(this)||this;return t.mType=AIUnitStateType.STAND,t}return __extends(t,e),t.prototype.PlayHit=function(){this.m_Play&&(egret.is(this.m_Play,"AIUnitHitAction")||(this.m_Play.OnExit(),this.m_Play=null));var e=this.m_Play;return e||(this.m_Hit||(this.m_Hit=new AIUnitHitAction,this.m_Hit.Init(this)),e=this.m_Hit,e.OnEnter(),this.m_Play=e),e.mHit},t.prototype.PlayEvade=function(){return this.m_Play||(this.m_Evade||(this.m_Evade=new AIUnitEvadeAction,this.m_Evade.Init(this)),this.m_Play=this.m_Evade,this.m_Play.OnEnter()),0},t.prototype.ClearOtherAnim=function(){this.m_Play&&(this.m_Play.OnExit(),this.m_Play=null)},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.mUnit.mEntity.UpdateAction(EntityClipType.STAND,!1)},t.prototype.OnUpdate=function(e){this.m_Play&&this.m_Play.OnUpdate(e)==AIUnitReturn.NEXT&&(this.m_Play.OnExit(),this.m_Play=null)},t.prototype.OnExit=function(){},t}(AIUnitState);__reflect(AIUnitStandState.prototype,"AIUnitStandState");var BattleCtrl=function(){function e(){}return e.GetPos=function(t,i,o){void 0===o&&(o=null);var n=t?e.POS_MY:e.POS_EM;return null==o&&(o={x:0,y:0}),n[i]?(o.x=n[i][0],o.y=n[i][1]):(o.x=0,o.y=0),o},e.GetOffsetPos=function(t,i){void 0===i&&(i=null);var o=t.GetInfo().IsSide(),n=this.GetPos(o,t.GetInfo().posIndex,i);return o?(n.x-=e.POS_OFFSET.x,n.y-=e.POS_OFFSET.y):(n.x+=e.POS_OFFSET.x,n.y+=e.POS_OFFSET.y),n},e.GetOffsetBlockPos=function(t,i){void 0===i&&(i=null);var o=t.GetInfo().IsSide(),n=this.GetPos(o,t.GetInfo().posIndex,i);return o?(n.x-=e.BLOCK_POS_OFFSET.x,n.y-=e.BLOCK_POS_OFFSET.y):(n.x+=e.BLOCK_POS_OFFSET.x,n.y+=e.BLOCK_POS_OFFSET.y),n},e.POS_EM=[[0,253],[0,253],[93,206],[186,159],[279,111],[372,64],[-80,189],[13,142],[106,95],[199,47],[292,0]],e.POS_MY=[[95,466],[95,466],[188,419],[281,372],[374,324],[467,277],[176,529],[269,482],[362,435],[455,387],[548,340]],e.POS_CENTER={x:e.POS_EM[3][0]+e.POS_MY[3][0]>>1,y:e.POS_EM[3][1]+e.POS_MY[3][1]>>1},e.POS_OFFSET={x:80,y:60},e.BLOCK_POS_OFFSET={x:64,y:48},e.MAX_INDEX=9999,e}();__reflect(BattleCtrl.prototype,"BattleCtrl");var BattleMgr=function(){function e(){this.m_EntityTeams=[],this.m_Entity={},this.m_UseSkill={},this.m_StartTime=1,this.m_Check=!1}return e.prototype.Init=function(e){this.mRaid=e},e.prototype.OnEnter=function(){this.mOverData=null},e.prototype.Update=function(e){this.m_StartTime>0&&(this.m_StartTime-=e)<=0&&this.StartTurn()},e.prototype.OnExit=function(){this.m_EntityTeams=[],this.m_Entity=[]},e.prototype.UseSkill=function(e){for(var t=this.m_UseSkill={},i=0,o=e;i<o.length;i++){var n=o[i];t[n.handle]=n}this.ManualTurn()},e.prototype.GetRaidUnit=function(e){return this.m_Entity[e]},e.prototype.SetBattleData=function(e){for(var t=0,i=e;t<i.length;t++){for(var o=i[t],n=[],a=0,r=o;a<r.length;a++){var s=r[a],l=Util.GetClass(s),c=new l;CommonUtils.CopyTo(s,c);var u=new BattleUnit;u.Init(this,c,this.m_EntityTeams.length),this.m_Entity[u.mInfo.handle]=u,n.push(u)}this.m_EntityTeams.push(n)}this.m_StartTime=5},e.prototype.OnUnitDead=function(e){this.m_Check=!0},e.prototype.OnAttack=function(e){for(var t=this.m_EntityTeams[e.mTeamIndex],i=0,o=t;i<o.length;i++){var n=o[i];if(!BattleUnit.Equal(n,e)&&n.CanBlock())return n}return null},e.prototype.GetEntityTargetList=function(e){for(var t=[],i=0,o=e;i<o.length;i++){var n=o[i];n.IsTarget()&&t.push(n.mInfo.handle)}return t},e.prototype.GetAllEmemyList=function(e){var t=this.m_EntityTeams[(e+1)%2];return this.GetEntityTargetList(t)},e.prototype.GetAllFriendlyList=function(e){var t=this.m_EntityTeams[e];return this.GetEntityTargetList(t)},e.prototype.StartTurn=function(){this.mRaid.mIsManual?this.mRaid.StartManual(15,null):this.AutoTurn()},e.prototype.AutoTurn=function(){for(var e=[],t=null,i=0;99>i;++i){var o=[];if(t=this.Turn(o),!o||!o.length)break;if(e.push(o),t)break}t?this.mOverData=t:console.error("not over data"),this.mRaid.TurnAll(e),this.mRaid.SetFinishAction(t)},e.prototype.TurnExecuteFinish=function(){this.mOverData||this.mRaid.StartManual(15,null)},e.prototype.ManualTurn=function(){var e=[],t=this.Turn(e);e&&e.length&&this.mRaid.Turn(e),t&&(this.mOverData=t,this.mRaid.SetFinishAction(t))},e.prototype.Turn=function(e){e.push(new BTurnStartAction);for(var t=[],i=0,o=this.m_EntityTeams;i<o.length;i++){var n=o[i];t.push(n)}t.sort(function(e,t){for(var i=0,o=0,n=e;o<n.length;o++){var a=n[o];i+=a.mInfo.getAtt(AttributeType.atSpeed)}for(var r=0,s=0,l=t;s<l.length;s++){var a=l[s];r+=a.mInfo.getAtt(AttributeType.atSpeed)}return r-i});for(var a=0,r=t;a<r.length;a++){var n=r[a];n.sort(function(e,t){return t.mInfo.getAtt(AttributeType.atSpeed)-e.mInfo.getAtt(AttributeType.atSpeed)});for(var s=0,l=n;s<l.length;s++){var c=l[s];c.TurnBuff(e)}for(var u=0,p=n;u<p.length;u++){var c=p[u];c.Turn(e);var h=this.UnitCheckDead(e);if(h)return h}}return null},e.prototype.UnitCheckDead=function(e){if(!this.m_Check)return null;this.m_Check=!1;for(var t=0;t<this.m_EntityTeams.length;++t){for(var i=this.m_EntityTeams[t],o=!1,n=0,a=i;n<a.length;n++){var r=a[n];if(!r.IsDead()){o=!0;break}}if(!o){var r=new BattleNormalFinishData;return r.isWin=0==t?!0:!1,r}}return null},e}();__reflect(BattleMgr.prototype,"BattleMgr");var BattleTurnDataParse=function(){function e(){}return e.Parse=function(e){for(var t=[],i=[],o=0,n=e.events;o<n.length;o++){var a=n[o],r=this.ParseData(a);0==a.type?(i=[],t.push(i),i.push(r)):i.push(r)}return t},e.ParseDatas=function(e){if(!e)return null;for(var t=[],i=0,o=e;i<o.length;i++){var n=o[i],a=this.ParseData(n);a&&t.push(a)}return t},e.ParseData=function(t){var i=t.type;return i==e.TYPE_ROUND?new BTurnStartAction:i==e.TYPE_USESKILL?this.CreateBattleSkillAction(t):i==e.TYPE_USEACTION?BUseSkillAtkAction.Create(t):i==e.TYPE_ACTIONHP?BattleDamageBaseData.Create(t):i==e.TYPE_DEAD?this.CreateDeadAction(t):i==e.TYPE_OUTBOUND?BOutBound.Create(t):i==e.TYPE_BUFFSTATUSHP?BBuffStatusHpAction.Create(t):i==e.TYPE_BUFFSTATUSACT?BBuffStateAct.Create(t):i==e.TYPE_RELIVE?BReliveAction.Create(t):i==e.TYPE_BUFFHP?BBuffChangeHpAction.Create(t):i==e.TYPE_ACTIONBUFF?BAddBuffAction.Create(t):i==e.TYPE_REMOVEBUFF?BRemoveBuffAction.Create(t):(console.warn("not ParseData type => "+i),null)},e.CreateDeadAction=function(e){return new BDeadAction},e.CreateBattleSkillAction=function(t){var i=new BUseSkillAction;i.skillId=t.id,i.targets=t.targets,i.src=t.src;for(var o=0,n=t.actions;o<n.length;o++){var a=n[o],r=this.ParseData(a);r&&(a.type==e.TYPE_USEACTION?r.skill=i:console.warn("battle not impl type => "+a.type),i.actions.push(r))}return i},e.TYPE_ROUND=0,e.TYPE_USESKILL=1,e.TYPE_USEACTION=2,e.TYPE_ACTIONHP=3,e.TYPE_ACTIONBUFF=4,e.TYPE_BUFFHP=5,e.TYPE_DEAD=6,e.TYPE_OUTBOUND=7,e.TYPE_BUFFSTATUSHP=8,e.TYPE_BUFFSTATUSACT=9,e.TYPE_RELIVE=10,e.TYPE_REMOVEBUFF=11,e.TYPE_FINISH=9999,e}();__reflect(BattleTurnDataParse.prototype,"BattleTurnDataParse");var BattleUnit=function(){function e(){this.mSkill=[],this.mBuffs={}}return e.Equal=function(e,t){return e&&t?e.mInfo.handle==t.mInfo.handle:!1},e.prototype.Init=function(e,t,i){this.mRaid=e,this.mInfo=t,this.mTeamIndex=i,this.action=new BattleAtkAction,this.action.Init(this);var o=t.GetSkillIDs();this.mSkill=[];for(var n=0,a=o;n<a.length;n++){var r=a[n];r&&this.mSkill.push(new SUnitSkill(this,r))}for(var s=0,l=this.mSkill;s<l.length;s++){var c=l[s];c.Init()}this.mBuffs={}},e.prototype.IsDead=function(){return this.mInfo.getAtt(AttributeType.atHp)<=0},e.prototype.CanUseSkill=function(){return!0},e.prototype.CanBlock=function(){return this.IsDead()?!1:!0},e.prototype.GetMaxHp=function(){return Math.floor(this.mInfo.getAtt(AttributeType.atMaxHp))},e.prototype.IsTarget=function(){return!this.IsDead()},e.prototype.Turn=function(e){if(!this.IsDead()){var t=this.action.Turn();t&&e.push(t)}},e.prototype.Hit=function(e,t,i){this.UpdateHp(t,i)},e.prototype.UpdateHp=function(e,t){var i=this;if(!i.IsDead()){var o=i.mInfo.getAtt(AttributeType.atHp)+e,n=i.GetMaxHp();o=o>n?n:o,o=0>o?0:o,i.mInfo.setAtt(AttributeType.atHp,o),0>=o&&this.mRaid.OnUnitDead(i.mInfo.handle)}},e.prototype.TurnBuff=function(e){for(var t in this.mBuffs){var i=this.mBuffs[t];i.Turn()||this.RemoveBuff(e,Number(t))}},e.prototype.RemoveBuff=function(e,t){var i=this.mBuffs[t];i&&(delete this.mBuffs[t],e.push(i.OnRemove()))},e.prototype.CheckBuff=function(e,t){var i=GameGlobal.Config.EffectsConfig[t];if(i){var o=i[GameGlobal.Config.EffectsConfig_keys.group],n=[];for(var a in this.mBuffs){var r=GameGlobal.Config.EffectsConfig[Number(a)];r&&r[GameGlobal.Config.EffectsConfig_keys.group]==o&&n.push(Number(a))}for(var s=0,l=n;s<l.length;s++){var c=l[s];this.RemoveBuff(e,c)}}},e.prototype.AddBuffs=function(e,t,i){for(var o=0,n=i;o<n.length;o++){var a=n[o];this.AddBuff(e,t,a)}var r=new BAddBuffAction;r.src=t,r.target=this.mInfo.handle,r.args=i,e.push(r)},e.prototype.AddBuff=function(e,t,i){var o=GameGlobal.Config.EffectsConfig[i];if(o){this.CheckBuff(e,i);var n=new BattleUnitBuff;n.mTarget=this,n.mBuffId=i,n.mConfig=o,n.mTurn=0,n.OnAdd(),this.mBuffs[i]=n}},e}();__reflect(BattleUnit.prototype,"BattleUnit");var BattleUnitBuff=function(){function e(){this.mTurn=0}return e.prototype.Turn=function(){return++this.mTurn,this.mTurn>=this.mConfig[GameGlobal.Config.EffectsConfig_keys.duration]?!1:!0},e.prototype.OnAdd=function(){},e.prototype.OnRemove=function(){var e=new BRemoveBuffAction;return e.src=this.mTarget.mInfo.handle,e.id=this.mBuffId,e.args=[0],e},e.prototype.Execute=function(){},e}();__reflect(BattleUnitBuff.prototype,"BattleUnitBuff");var CatchPetSUnitSkill=function(){function e(e,t){this.mTargets=[],this.handle=0,this.mSkillId=e,this.handle=t}return e.prototype.Init=function(){this.m_SkillConfig=GameGlobal.Config.SkillsConfig[this.mSkillId]},e.prototype.Use=function(e){this.mTargets=e||[];var t=new CatchSkillAction;t.src=this.handle,t.skillId=this.mSkillId,t.targets=e;if(e){for(var i=this.m_SkillConfig[GameGlobal.Config.SkillsConfig_keys.actions],o=[],n=0,a=i;n<a.length;n++){var r=a[n],s=this.ExecuteAction(r,this.handle,e);s.skill=t,o.push(s)}t.actions=o}else console.warn("not enm");return t},e.prototype.ExecuteAction=function(e,t,i){var o=new BUseSkillAtkAction;o.src=t,o.actionId=e;var n=GameGlobal.Config.SkillsExeConfig[e];if(!n)return console.error("not config id => "+e),o;var a=i;if(!a||0==a.length)return o.targets=[],console.log("not target => "+e),o;o.targets=i;for(var r=0,s=a;r<s.length;r++){var l=(s[r],new BattleDamageBaseData);l.target=i,l.type=0,l.value=null,o.event.push(l)}return o},e}();__reflect(CatchPetSUnitSkill.prototype,"CatchPetSUnitSkill");var SUnitSkill=function(){function e(e,t){this.penetrate=0,this.mTargets=[],this.m_GetTargetFunc={},this.mUnit=e,this.mSkillId=t}return e.prototype.IsAbilitySkill=function(){return null!=this.m_SkillConfig},e.prototype.Init=function(){this.m_SkillConfig=GameGlobal.Config.SkillsConfig[this.mSkillId]},e.prototype.CheckCondition=function(){return!0},e.prototype._IsRoleType=function(e){return e.mInfo.type==EntityType.Role},e.prototype.ScanEnemyByData=function(e,t){if(1==e)return[this.mUnit.mInfo.handle];if(2==e)return this.mUnit.mRaid.GetAllFriendlyList(this.mUnit.mTeamIndex);if(3==e){var i=this.mUnit.mRaid.GetAllFriendlyList(this.mUnit.mTeamIndex),o=t;return o&&o.count?MathUtils.RandomArrayData(i,o.count):i}if(4==e)return this.mUnit.mRaid.GetAllEmemyList(this.mUnit.mTeamIndex);if(5==e){var i=this.mUnit.mRaid.GetAllEmemyList(this.mUnit.mTeamIndex),o=t;return o&&o.count?MathUtils.RandomArrayData(i,o.count):i}return console.warn("not impl targetType => "+e),[]},e.prototype.ScanEnemy=function(){return this.m_SkillConfig?this.ScanEnemyByData(this.m_SkillConfig[GameGlobal.Config.SkillsConfig_keys.ttype],this.m_SkillConfig[GameGlobal.Config.SkillsConfig_keys.targetType]):[]},e.prototype.ConcatArgs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i="",o=0,n=e;o<n.length;o++){var a=n[o];a&&(i+=a+"_")}return i.substr(0,i.length-1)},e.prototype.GetTarget=function(e){var t=e[GameGlobal.Config.SkillsExeConfig_keys.ttype];if(1e4>t)return this.ScanEnemyByData(t,e[GameGlobal.Config.SkillsExeConfig_keys.targetType]);var i=e[GameGlobal.Config.SkillsExeConfig_keys.targetType],o=t,n=this.m_GetTargetFunc[o];if(!n){var a=egret.getDefinitionByName("SUnitSkillGetTarget"+o);if(!a)return console.error("not GetTarget func key => "+o),null;n=this.m_GetTargetFunc[o]=new a,n.Init(this.mTargets,i)}return n.Get()},e.prototype.Use=function(e){if(this.m_SkillConfig){this.mTargets=e||[],this.m_GetTargetFunc={};var t=new BUseSkillAction;t.src=this.mUnit.mInfo.handle,t.skillId=this.mSkillId,t.targets=e;if(e&&e.length){for(var i=this.m_SkillConfig[GameGlobal.Config.SkillsConfig_keys.actions],o=[],n=0,a=i;n<a.length;n++){var r=a[n],s=this.ExecuteAction(r);s.skill=t,o.push(s)}t.actions=o}else console.warn("not enm");return t}},e.prototype.ExecuteAction=function(e){var t=new BUseSkillAtkAction;t.src=this.mUnit.mInfo.handle,t.actionId=e;var i=GameGlobal.Config.SkillsExeConfig[e];if(!i)return console.error("not config id => "+e),t;var o=this.GetTarget(i);if(!o||0==o.length)return t.targets=[],console.log("not target => "+e),t;t.targets=o;for(var n=i[GameGlobal.Config.SkillsExeConfig_keys.args],a=i[GameGlobal.Config.SkillsExeConfig_keys.type],r=0,s=o;r<s.length;r++){var l=s[r],c=this.mUnit.mRaid.GetRaidUnit(l);if(c)if(1==a){var u=this.AffectType1(c,n);u&&t.event.push(u)}else 2==a?this.AffectType2(t.event,c,n):console.error("not impl atkType => "+a);else t.event.push({target:l,type:DamageTypes.INVALID})}return t},e.prototype.AffectType2=function(e,t,i){var o=!0;i.p&&i.p<1&&(o=Math.random()>i.p),o&&t.AddBuffs(e,this.mUnit.mInfo.handle,i.id)},e.prototype.AffectType1=function(e,t){if(!e.IsDead()){var i,o,n=Math.random(),a=this.mUnit.mInfo,r=e.mInfo,s=Math.min(Math.max(.05+(a.GetAttr(AttributeType.atCrit)-r.GetAttr(AttributeType.atTough))/100,.05),.5);if(s>n)i=DamageTypes.CRIT;else{n-=s;var l=1-Math.max(.8+(a.GetAttr(AttributeType.atHitRate)-r.GetAttr(AttributeType.atEvade))/100,.5);l>n?(i=DamageTypes.Evade,o=0):i=DamageTypes.HIT}if(i!=DamageTypes.Evade){var c=a.GetAttr(AttributeType.atPVEEnhance)-r.GetAttr(AttributeType.atPVEReduction);o=Math.max(Math.max(a.GetAttr(AttributeType.atAttack)-Math.max(r.GetAttr(AttributeType.atDef)-Math.max(a.GetAttr(AttributeType.atDefy)-r.GetAttr(AttributeType.atDefyReduction),0),0),0)*Math.max(1+(a.GetAttr(AttributeType.atDamageEnhancePerc)-r.GetAttr(AttributeType.atDamageReductionPerc)+c)/1e4,0)+a.GetAttr(AttributeType.atDamageEnhance)-r.GetAttr(AttributeType.atDamageReduction),1)*t.a+t.b,i==DamageTypes.CRIT&&(o*=2+Math.max((a.GetAttr(AttributeType.atCritEnhance)-r.GetAttr(AttributeType.atCritReduction))/1e4,-1))}o=Math.floor(o||0),o=Math.max(o,1);var u=new BattleDamageBaseData;return u.target=r.handle,u.type=i,u.value=-o,e.Hit(i,-o,this.mUnit),e.IsDead()&&u.Push(new BDeadAction),u}},e}();__reflect(SUnitSkill.prototype,"SUnitSkill");var SUnitSkillGetTarget=function(){function e(){this.mTargets=[]}return e.prototype.Init=function(e,t){this.mArgs=t,CommonUtils.CopyTo(e,this.mTargets)},e}();__reflect(SUnitSkillGetTarget.prototype,"SUnitSkillGetTarget");var SUnitSkillGetTarget10001=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Get=function(){return this.mTargets},t}(SUnitSkillGetTarget);__reflect(SUnitSkillGetTarget10001.prototype,"SUnitSkillGetTarget10001");var SUnitSkillGetTarget10002=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mIndex=0,t}return __extends(t,e),t.prototype.Get=function(){return[this.mTargets[this.mIndex++%this.mTargets.length]]},t}(SUnitSkillGetTarget);__reflect(SUnitSkillGetTarget10002.prototype,"SUnitSkillGetTarget10002");var SUnitSkillGetTarget10003=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Get=function(){if(0==this.mTargets.length)return[];var e=MathUtils.limitInteger(0,this.mTargets.length-1),t=[this.mTargets[e]];return this.mTargets.splice(e,1),t},t}(SUnitSkillGetTarget);__reflect(SUnitSkillGetTarget10003.prototype,"SUnitSkillGetTarget10003");var SUnitSkillGetTarget10004=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Get=function(){return MathUtils.RandomArrayData(this.mTargets,this.mArgs?this.mArgs.count:1)},t}(SUnitSkillGetTarget);__reflect(SUnitSkillGetTarget10004.prototype,"SUnitSkillGetTarget10004");var BattleAtkAction=function(){function e(){this.tmpCheck=0}return e.prototype.Init=function(e){this.mUnit=e},e.prototype.Turn=function(){var e=this.GetUseSkill();if(!e)return void console.error("not can use skill => ");var t=e.ScanEnemy();return e.Use(t)},e.prototype.GetUseSkill=function(){if(!this.mUnit.CanUseSkill())return null;for(var e=this.tmpCheck++,t=0,i=this.mUnit.mSkill.length;i>t;t++){var o=(t+e)%i,n=this.mUnit.mSkill[o];if(n.IsAbilitySkill()&&n.CheckCondition())return n}return null},e}();__reflect(BattleAtkAction.prototype,"BattleAtkAction");var BAddBuffAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_ACTIONBUFF,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.src=e.src,i.target=e.target,i.args=e.args,i},t.prototype.OnUpdate=function(e){return this.DoExecute(),AIUnitReturn.NEXT},t.prototype.DoExecute=function(){var e=this.mContext.GetEntity(this.target);if(e)for(var t=0,i=this.args;t<i.length;t++){var o=i[t];e.mAI.AddBuff(o)}},t}(BUnitAction);__reflect(BAddBuffAction.prototype,"BAddBuffAction");var BattleDamageBaseData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_ACTIONHP,t}return __extends(t,e),t.Create=function(e){var i=new t;if(i.target=e.target,i.type=e.args[0],i.value=e.args[1],e.actions)for(var o=0,n=e.actions;o<n.length;o++){var a=n[o],r=BattleTurnDataParse.ParseData(a);r&&i.Push(r)}return i},t.prototype.HasDead=function(){if(this.actions)for(var e=0,t=this.actions;e<t.length;e++){var i=t[e];if(i.mType==BattleTurnDataParse.TYPE_DEAD)return!0}return!1},t.prototype.Push=function(e){this.actions||(this.actions=[]),this.actions.push(e)},t}(BUnitAction);__reflect(BattleDamageBaseData.prototype,"BattleDamageBaseData");var BattleFinishData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_FINISH,t.ret=0,t}return __extends(t,e),t.prototype.DoExecute=function(){},t}(BUnitAction);__reflect(BattleFinishData.prototype,"BattleFinishData");var BattleVideoFinishData=function(e){function t(t){var i=e.call(this)||this;return i.cb=t,i}return __extends(t,e),t.prototype.DoExecute=function(){GameGlobal.RaidMgr.EnterCurMapRaid(),this.cb&&(this.cb(),this.cb=null)},t}(BattleFinishData);__reflect(BattleVideoFinishData.prototype,"BattleVideoFinishData");var BattleNormalFinishData=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.DoExecute=function(){var e=this;GameMap.GetBattleView().StartHide(function(){GameGlobal.RaidMgr.mBattleRaid==e.mContext&&(GameGlobal.RaidMgr.EnterCurMapRaid(),GameGlobal.UserFb.sendWaveMonster())})},t}(BattleFinishData);__reflect(BattleNormalFinishData.prototype,"BattleNormalFinishData");var BattleDefaultFinishData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewards=[],t.star=null,t}return __extends(t,e),t.prototype.DoExecute=function(){var e=this;return BattleMap.mFbType==UserFb.FB_TYPE_GANGMAP?1==this.ret?(GameGlobal.RaidModel.SendGetBossReward(),void GameGlobal.RaidMgr.ExitFbAndEnterMap()):void GameGlobal.UserFb.sendExitFb():void(1==this.ret||3==this.ret?ViewManager.ins().open(ResultWinPanel,this.rewards,function(){return GameGlobal.RaidModel.SendGetBossReward(),BattleMap.mFbType==UserFb.FB_TYPE_GUILD_WAR&&GameGlobal.GangBattleModel.NeedJumpToOutsider()&&3==e.ret?(GameGlobal.UserFb.sendExitFb(),void GameGlobal.GangBattleModel.SendEnterBattle()):void GameGlobal.RaidMgr.ExitFbAndEnterMap()},this.star,this.ret):(BattleMap.IsGuanQiaBoss()&&(GameGlobal.UserFb.mAuto=!1),ViewManager.ins().open(ResultFailPanel,this.rewards,function(){return GameGlobal.UserFb.bCbtAutoFight&&(GameGlobal.UserFb.bCbtAutoFight=!1),GameGlobal.UserFb.bTianTingAutoFight&&(GameGlobal.UserFb.bTianTingAutoFight=!1),BattleMap.mFbType!=UserFb.FB_TYPE_GUILD_WAR&&BattleMap.mFbType!=UserFb.FB_TYPE_GUILD_WAR_PK||!GameGlobal.GangBattleModel.NeedJumpToOutsider()?void GameGlobal.RaidMgr.ExitFbAndEnterMap():GameGlobal.GangBattleModel.IsInOutsideScience()?(GameGlobal.RaidMgr.ExitFbAndEnterMap(),void GameGlobal.GangBattleModel.SendEnterBattle()):(GameGlobal.UserFb.sendExitFb(),void GameGlobal.GangBattleModel.SendEnterBattle())},this.ret)))},t}(BattleFinishData);__reflect(BattleDefaultFinishData.prototype,"BattleDefaultFinishData");var ArenaPKFinishData=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.DoExecute=function(){!this.isWin&&BattleMap.IsGuanQiaBoss()&&(GameGlobal.UserFb.mAuto=!1),ViewManager.ins().open(ArenaPKResultPanel,this.isWin,this.rewards,this.maxrank,this.rank,this.lastrank,function(){GameGlobal.Arena.sendGetRewards(),GameGlobal.RaidMgr.ExitFbAndEnterMap()})},t}(BattleDefaultFinishData);__reflect(ArenaPKFinishData.prototype,"ArenaPKFinishData");var CrossFinishData=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.DoExecute=function(){ViewManager.ins().open(this.iswin?CrossBattleResultWin:CrossBattleResultFailWin,this.commonpoint,function(){GameGlobal.RaidMgr.ExitFbAndEnterMap()})},t}(BattleDefaultFinishData);__reflect(CrossFinishData.prototype,"CrossFinishData");var CatchPetFinishData=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.DoExecute=function(){ViewManager.ins().open(this.iswin?CatchPetResultWin:CatchPetResultFailWin,this.id,function(){GameGlobal.RaidMgr.EnterCurMapRaid()})},t}(BattleDefaultFinishData);__reflect(CatchPetFinishData.prototype,"CatchPetFinishData");var XiandaoFinishData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roleData=[],t}return __extends(t,e),t.prototype.DoExecute=function(){GameGlobal.XiandaoModel.IsKnockout()?GameGlobal.XiandaoModel.SendGetTime():GameGlobal.XiandaoModel.SendGetMapInfo(),GameGlobal.RaidMgr.ExitFbAndEnterMap(),ViewManager.ins().open(XiandaoResultPanel,this.isWin,this.roleData)},t}(BattleDefaultFinishData);__reflect(XiandaoFinishData.prototype,"XiandaoFinishData");var CrossBossFinishData=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewards=[],t}return __extends(t,e),t.prototype.DoExecute=function(){var e=ViewManager.ins().open(ResultAcrossBossPanel,this.rewards);e.SetCloseFunc(function(){GameGlobal.RaidModel.SendGetBossReward(),GameGlobal.RaidMgr.ExitFbAndEnterMap()})},t}(BattleFinishData);__reflect(CrossBossFinishData.prototype,"CrossBossFinishData");var LadderFinishData=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.DoExecute=function(){ViewManager.ins().open(LadderResultWin,this.isWin,this.list,this.upGrade,this.upStar,this.changeStar)},t}(BattleFinishData);__reflect(LadderFinishData.prototype,"LadderFinishData");var BUseSkillAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_USESKILL,t.actions=[],t}return __extends(t,e),t.prototype.Init=function(t){e.prototype.Init.call(this,t),this.mList=this.actions;var i=t.GetEntity(this.src);if(!i)return void console.log("not found entity => "+this.src);var o=i.GetInfo();this.mList.push(BUnitPlayAction.Create(i,EntityClipType.STAND,!1)),this.mList.push(BUnitJumpAction.Create(o.x,o.y,i)),this.mList.push(BUnitPlayAction.Create(i,EntityClipType.STAND,!1))
},t}(BUnitListAction);__reflect(BUseSkillAction.prototype,"BUseSkillAction");var CatchSkillAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_USESKILL,t.actions=[],t}return __extends(t,e),t.prototype.Init=function(t){e.prototype.Init.call(this,t),this.mList=this.actions;var i=t.mEntityList[this.src],o=i.GetInfo(),n=t.mEntityList[this.targets[0]];this.mList.push(BUnitPlayAction.Create(i,EntityClipType.ATTACK,!1));var a=new BUnitParallelAction;a.mList.push(BUnitJumpAction.Create(o.x,o.y,i)),a.mList.push(BUnitJumpAction.CreateByTarget(i,n)),this.mList.push(a),GameGlobal.CatchPetModel.result||this.mList.push(BUnitJumpAction.Create(n.GetInfo().x,n.GetInfo().y,n))},t}(BUnitListAction);__reflect(CatchSkillAction.prototype,"CatchSkillAction");var BTurnStartAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_ROUND,t}return __extends(t,e),t}(BUnitAction);__reflect(BTurnStartAction.prototype,"BTurnStartAction");var BDeadAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_DEAD,t}return __extends(t,e),t}(BUnitAction);__reflect(BDeadAction.prototype,"BDeadAction");var BattleAction=function(){function e(){}return e.prototype.Excute=function(e){},e}();__reflect(BattleAction.prototype,"BattleAction");var BattleAttackEventProtect=function(){function e(e,t){this.type="protect",this.handle=e,this.beHandle=t}return e.prototype.Create=function(){return AIUnitTriggerProtectAction.CreateByData(this.handle,this.beHandle)},e}();__reflect(BattleAttackEventProtect.prototype,"BattleAttackEventProtect",["IBattleAttackEvent"]);var BattleAttackEventBlock=function(){function e(e,t){this.type="block",this.handle=e,this.beHandle=t}return e.prototype.Create=function(){return AIUnitTriggerBlockAction.CreateByData(this.handle,this.beHandle)},e}();__reflect(BattleAttackEventBlock.prototype,"BattleAttackEventBlock",["IBattleAttackEvent"]);var BBuffChangeHpAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_BUFFHP,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.src=e.src,i.target=e.target,i.arg=e.arg,i.actions=BattleTurnDataParse.ParseDatas(e.actions),i},t.prototype.OnUpdate=function(e){return this.DoExecute(),AIUnitReturn.NEXT},t.prototype.DoExecute=function(){console.log("Change HP Buff",this.src,this.target,this.arg);var e=this.mContext.GetEntity(this.target);e&&e.mAI.ChangeHp(0,this.arg,this.HasDead())},t}(BUnitAction);__reflect(BBuffChangeHpAction.prototype,"BBuffChangeHpAction");var BBuffStateAct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_BUFFSTATUSACT,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.src=e.src,i.target=e.target,i.args=e.args,i.actions=BattleTurnDataParse.ParseDatas(e.actions),i},t.prototype.OnUpdate=function(e){return this.DoExecute(),AIUnitReturn.NEXT},t.prototype.DoExecute=function(){console.log("Status HP Buff",this.src,this.target,this.args);var e=this.mContext.GetEntity(this.target);e&&e.mAI.BuffAct(this.args[0],this.args[1],this.HasDead())},t}(BUnitAction);__reflect(BBuffStateAct.prototype,"BBuffStateAct");var BBuffStatusHpAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_BUFFSTATUSHP,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.src=e.src,i.target=e.target,i.args=e.args,i.actions=BattleTurnDataParse.ParseDatas(e.actions),i},t.prototype.IsLianji=function(){return this.args&&this.args[0]==BuffType.TYPE_10},t.prototype.IsFanji=function(){return this.args&&this.args[0]==BuffType.TYPE_5},t.prototype.OnUpdate=function(e){return this.DoExecute(),AIUnitReturn.NEXT},t.prototype.DoExecute=function(){var e=this.mContext.GetEntity(this.src);e&&e.mAI.ChangeHp(this.args[0],this.args[1],this.HasDead())},t}(BUnitAction);__reflect(BBuffStatusHpAction.prototype,"BBuffStatusHpAction");var BOutBound=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_OUTBOUND,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.target=e.target,i.id=e.id,i},t.prototype.OnUpdate=function(e){if(null==this.m_Create){var t=this.DoExecute();if(t){var i=this.mContext.GetEntity(t);if(i){var o=egret.$TempPoint,n=i.GetInfo();BattleCtrl.GetPos(n.IsSide(),n.posIndex+5,o);var a=i.x,r=i.y;i.SetPos(o.x,o.y),this.m_MoveData=new AIUnitMoveData,this.m_MoveData.Init(o.x,o.y,a,r,2*MoveTeam.MOVE_SPEED,0)}}return this.m_Create=t||0,AIUnitReturn.CONTINUE}var i=this.mContext.GetEntity(this.m_Create);if(i&&this.m_MoveData){var o=egret.$TempPoint,s=this.m_MoveData.Update(e,o);return i.SetPos(o.x,o.y),s==AIUnitMoveData.STATE_FINISH?(this.m_MoveData=null,AIUnitReturn.NEXT):AIUnitReturn.CONTINUE}return AIUnitReturn.NEXT},t.prototype.DoExecute=function(){for(var e=0,t=this.mContext.mEntityDatas;e<t.length;e++)for(var i=t[e],o=0,n=i;o<n.length;o++){var a=n[o];if(a.handle==this.target)return a.posIndex=this.id,this.mContext.Create(a),a.handle}return 0},t}(BUnitAction);__reflect(BOutBound.prototype,"BOutBound");var BReliveAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_RELIVE,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.mSrc=e.src,i},t.prototype.OnUpdate=function(e){return this.DoExecute(),AIUnitReturn.NEXT},t.prototype.DoExecute=function(){var e=this.mContext.GetEntity(this.mSrc);e&&e.mAI.Relive()},t}(BUnitAction);__reflect(BReliveAction.prototype,"BReliveAction");var BRemoveBuffAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_REMOVEBUFF,t}return __extends(t,e),t.Create=function(e){var i=new t;return i.id=e.id,i.src=e.src,i.args=e.args,i},t.prototype.OnUpdate=function(e){return this.DoExecute(),AIUnitReturn.NEXT},t.prototype.DoExecute=function(){var e=this.mContext.GetEntity(this.src);e&&e.mAI.RemoveBuff(this.id,2==this.args[0])},t}(BUnitAction);__reflect(BRemoveBuffAction.prototype,"BRemoveBuffAction");var BUseSkillAtkAction=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mType=BattleTurnDataParse.TYPE_USEACTION,t.event=[],t}return __extends(t,e),t.Create=function(e){var i=new t;i.actionId=e.id,i.src=e.src,i.targets=e.targets;for(var o=0,n=BattleTurnDataParse.ParseDatas(e.actions);o<n.length;o++){var a=n[o];i.event.push(a)}return i},t.prototype.Init=function(t){e.prototype.Init.call(this,t);var i=t.GetEntity(this.src);if(this.targets.length){var o=this.targets[0],n=t.GetEntity(o);if(!n)return void console.error("not entity => ");var a=GameGlobal.Config.SkillsExeConfig[this.actionId];if(!a)return void console.error("not exeConfig => "+this.actionId);var r=a[GameGlobal.Config.SkillsExeConfig_keys.type];if(1==r){var s=[],l=GameGlobal.Config.SkillEffConfig[GameGlobal.Config.SkillsConfig[this.skill.skillId][GameGlobal.Config.SkillsConfig_keys.effectId]];if(l){l.wordEff&&s.push(BUnitPlayWordAction.Create(i,l.wordEff));var c=l.animType;1==c?s.push(BUnitJumpAction.CreateByTarget(n,i)):3==c?s.push(BUnitJumpAction.Create(BattleCtrl.POS_CENTER.x,BattleCtrl.POS_CENTER.y,i)):2==c||console.error("not impl anim type => "+c)}else s.push(BUnitJumpAction.CreateByTarget(n,i));var u=null;if(this.event)for(var p=this.event.length-1;p>=0;--p){var h=this.event[p];h.mType==BattleTurnDataParse.TYPE_BUFFSTATUSHP&&(h.IsLianji()||h.IsFanji())&&(u||(u=[]),u.push(h),this.event.splice(p,1))}if(s.push(BUnitAtkAction.Create(t,i,this.skill.skillId,[this.event])),u){u.reverse();for(var d=0,_=u;d<_.length;d++){var h=_[d];if(h.IsLianji()){var f=new BattleDamageBaseData;f.target=h.target,f.type=DamageTypes.BUFF_TYPE_10,f.value=h.args[1],h.HasDead()&&f.Push(new BDeadAction),s.push(BUnitAtkAction.Create(t,i,this.skill.skillId,[[f]]))}else if(h.IsFanji()){var f=new BattleDamageBaseData;f.target=h.target,f.type=DamageTypes.BUFF_TYPE_5,f.value=h.args[1],h.HasDead()&&f.Push(new BDeadAction);var m=t.GetEntity(h.src);m&&(s.push(BDelayAction.Create(100)),s.push(BUnitAtkAction.Create(t,t.GetEntity(h.src),EntityData.default_skill_ids[0],[[f]])))}else console.warn("not impl type => ",h)}}this.mList=s}else 2==r?this.mList=this.event:console.warn("not impl exeConfigType => "+r)}},t}(BUnitListAction);__reflect(BUseSkillAtkAction.prototype,"BUseSkillAtkAction");var BuffType;!function(e){e[e.TYPE_1=1]="TYPE_1",e[e.TYPE_2=2]="TYPE_2",e[e.TYPE_3=3]="TYPE_3",e[e.TYPE_4=4]="TYPE_4",e[e.TYPE_5=5]="TYPE_5",e[e.TYPE_6=6]="TYPE_6",e[e.TYPE_7=7]="TYPE_7",e[e.TYPE_8=8]="TYPE_8",e[e.TYPE_9=9]="TYPE_9",e[e.TYPE_10=10]="TYPE_10",e[e.TYPE_11=11]="TYPE_11",e[e.TYPE_12=12]="TYPE_12",e[e.TYPE_13=13]="TYPE_13",e[e.TYPE_14=14]="TYPE_14"}(BuffType||(BuffType={}));var CommonMoveTeam=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(MoveTeam);__reflect(CommonMoveTeam.prototype,"CommonMoveTeam");var DamageData=function(){function e(){}return e.Set=function(e,t,i,o,n,a){return this.ins.team=e,this.ins.x=t,this.ins.y=i,this.ins.type=o,this.ins.value=n,this.ins.skillId=a,this.ins},e.ins=new e,e}();__reflect(DamageData.prototype,"DamageData");var DamageSourceData=function(){function e(){}return e.Get=function(t,i,o,n,a){var r=this.list.pop()||new e;return r.team=t,r.x=i,r.y=o,r.job=a,r.entityType=n,r},e.Set=function(e){this.list.push(e)},e.list=[],e}();__reflect(DamageSourceData.prototype,"DamageSourceData");var DamageTypes;!function(e){e[e.INVALID=0]="INVALID",e[e.CRIT=1]="CRIT",e[e.Evade=2]="Evade",e[e.HIT=3]="HIT",e[e.BUFF_TYPE_5=105]="BUFF_TYPE_5",e[e.BUFF_TYPE_10=110]="BUFF_TYPE_10"}(DamageTypes||(DamageTypes={}));var ConsumeTwoLabel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Set=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];this.Data(o)}},t.prototype.childrenCreated=function(){this.typeImg.addEventListener(egret.Event.COMPLETE,this._Complete,this)},t.prototype._Complete=function(){UIHelper.SetRatio(this.typeImg,44,44)},t.prototype.Data=function(e){1==e.type?(this.typeImg.source=RewardData.GetCurrencyMiniRes(e.id),this.priceLabel.textFlow=ConsumeLabel.GetValueColor(GameGlobal.UserBag.GetCount(e.id),e.count)):(this.priceicon.type=e.id,this.priceicon.price=e.count)},t}(eui.Component);__reflect(ConsumeTwoLabel.prototype,"ConsumeTwoLabel",["eui.UIComponent","egret.DisplayObject"]);var EntityEffData=function(){function e(){}return e.Get=function(e,t,i,o,n,a,r){var s=this.m_List;return s.mSkillData=e,s.mSourceHandle=t,s.mTargetX=i,s.mTargetY=o,s.mSelfDir=n,s.mSelfX=a,s.mSelfY=r,s},e.m_List=new e,e}();__reflect(EntityEffData.prototype,"EntityEffData");var EntityEffMgr=function(){function e(){this.m_IsUpdate=!1,this.m_IsPlayEffTimer=!0,this.m_PlayEffTimer=null,this.m_List=[],this.m_MvList=[],this.m_PlayMvList=[],this.m_ResName={},this.REF_LIST={},this.m_LastTime=0}return e.prototype.RefActorEff=function(e){try{for(var t={},i=[],o=0;10>o;o++){var n=SkillsConfig.GetSkillId(e,o);if(!n)break;i.push(n)}for(var a=0,r=i;a<r.length;a++){var s=r[a],l=GameGlobal.Config.SkillsConfig[s][GameGlobal.Config.SkillsConfig_keys.effectId];if(l){var c=GameGlobal.Config.SkillEffConfig[l];c&&(c.castEff&&(t[c.castEff]=!0),c.becastEff&&(t[c.becastEff]=!0))}}for(var l in t){this.RefEff(l);var c=GameGlobal.Config.EffConfig[l];c&&(c.dir1&&this.RefEff(l+c.dir1),c.dir3&&this.RefEff(l+c.dir3))}}catch(u){console.error(u)}},e.prototype.RefEff=function(e){this.REF_LIST[e]||(this.REF_LIST[e]=!0,ResMgr.Ref(ResDataPath.GetSkillPathByID(e)+".png"))},e.prototype.AddResName=function(e){e+=".png",this.m_ResName[e]||(ResMgr.Ref(e),this.m_ResName[e]=!0)},e.prototype.HasDir=function(e){var t=GameGlobal.Config.EffConfig[e];return t&&t.dir?!0:!1},e.prototype.GetScale=function(e){var t=GameGlobal.Config.EffConfig[e];return t&&t.scale?100/t.scale:1},e.prototype.GetEffName=function(e,t){var i=GameGlobal.Config.EffConfig[e];if(!i)return e;t=DirUtil.Get5DirBy8Dir(t);var o=i["dir"+t];return o&&o?e+o:e},e.prototype.CreateData=function(t,i){var o=this.m_MvList.pop()||new EntityEffPlayData;return null==o.mc&&(o.mc=new MovieBaseObject),o.mc.SetFrameRate(SystemSettingPanel.GetSpeed()),o.mc.scaleX=o.mc.scaleY=e.SCALE,o.preTime=0,o.skillData=t,o.mc.rotation=0,o.bindHandle=null,o.ft=null,o.time=AIConfig.GetEffTime(i),this.m_PlayMvList.push(o),o},e.prototype.CacheData=function(e){e.mc.ClearCache(),egret.Tween.removeTweens(e.mc),DisplayUtils.removeFromParent(e.mc),this.m_MvList.push(e)},e.prototype.PlayCastSkillEff=function(t,i){var o=t.castEff;if(o){var n=this.CreateData(t,o),a=o,r=i.GetDir();n.resName=ResDataPath.GetSkillPathByID(this.GetEffName(a,r)),n.mc.x=i.x,n.mc.y=i.y,n.mc.scaleX=i.GetDir()>4?-e.SCALE:e.SCALE,this.StartUpdate()}},e.prototype.PlayBecastEff=function(e,t,i,o,n){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===n&&(n=null),e&&e.becastEff){var a=this.CreateData(e,e.becastEff),r=e.becastEff,s=1;this.HasDir(r)&&(n=DirUtil.DirOpposit(n),r=this.GetEffName(r,n),s=n>4?-1:1),a.resName=ResDataPath.GetSkillPathByID(r);var l=void 0;e.becastPos==SkillsConfig.BECAST_TYPE.TYPE_2?(l=0,a.mc.x=i,a.mc.y=o-AIConfig.BODY_OFFSET):e.becastPos==SkillsConfig.BECAST_TYPE.TYPE_3?(l=0,a.mc.x=i,a.mc.y=o):(l=t,a.mc.x=0,a.mc.y=-AIConfig.BODY_OFFSET),a.bindHandle=l;var c=this.GetScale(r);a.mc.scaleX=c*s,a.mc.scaleY=c,this.StartUpdate()}},e.prototype.PlayEffByPos=function(e,t,i){if(e&&e.becastEff){var o=this.CreateData(e,e.becastEff),n=e.becastEff;o.resName=ResDataPath.GetSkillPathByID(n),o.mc.x=t,o.mc.y=i;var a=this.GetScale(n);o.mc.scaleX=o.mc.scaleY=a,this.StartUpdate()}},e.prototype.PlayBecastBuff=function(e,t){if(e&&e.targetEff){var i=this.CreateData(e,e.targetEff),o=e.targetEff;i.resName=ResDataPath.GetSkillPathByID(o),i.mc.x=0,i.mc.y=0,i.bindHandle=t,this.StartUpdate()}},e.prototype.PlayScene=function(e){},e.prototype.Clear=function(e){void 0===e&&(e=!1);for(var t=this.m_PlayMvList.length-1;t>=0;--t){var i=this.m_PlayMvList[t];this.CacheData(i),this.m_PlayMvList.splice(t,1)}if(e){for(var o in this.m_ResName)ResMgr.Unref(o);this.m_ResName={}}},e.prototype.RemoveByHandle=function(e){for(var t=this.m_PlayMvList.length-1;t>=0;--t){var i=this.m_PlayMvList[t];i.bindHandle==e&&(i.time=0,i.preTime=-1,i.ft=null)}},e.prototype.UnbindByHandle=function(e){for(var t=this.m_PlayMvList.length-1;t>=0;--t){var i=this.m_PlayMvList[t];i.bindHandle==e&&(i.bindHandle=0,GameMap.AddBattleEntity(i.mc))}},e.prototype.Create=function(e,t,i,o){var n=this.CreateData(e,t);return n.resName=ResDataPath.GetSkillPathByID(t+""),n.mc.x=i,n.mc.y=o,n},e.prototype.StartUpdate=function(){this.m_IsUpdate||(this.m_IsUpdate=!0,this.m_LastTime=egret.getTimer(),egret.startTick(this.Update,this))},e.prototype.Update=function(e){var t=e-this.m_LastTime;this.m_LastTime=e;for(var i=this.m_PlayMvList.length-1;i>=0;--i){var o=this.m_PlayMvList[i];if(o.preTime>=0){if((o.preTime-=t)<0)if(o.bindHandle){var n=GameGlobal.RaidMgr.mBattleRaid.GetEntity(o.bindHandle);n?(o.LoadByUrl(-1==o.time?-1:1),n.addChild(o.mc)):o.time=0}else o.skillData.mount&&2==o.skillData.mount.type?(o.LoadByUrl(-1==o.time?-1:1),LayerManager.UI_BATTLE.addChild(o.mc)):(o.LoadByUrl(-1==o.time?-1:1),GameMap.AddBattleEntity(o.mc))}else if(null==o.ft)-1!=o.time&&(o.time-=t)<=0&&(this.CacheData(o),this.m_PlayMvList.splice(i,1));else{o.ft+=t;var a=o.ft/o.et;if(MathUtils.Lerp(o.sx,o.sy,o.ex,o.ey,a,MathUtils.TEMP_POS),o.mc.x=MathUtils.TEMP_POS.x,o.mc.y=MathUtils.TEMP_POS.y,a>=1){this.CacheData(o),this.m_PlayMvList.splice(i,1);var r=o.skillData.becastEff;r&&this.Create(o.skillData,r,MathUtils.TEMP_POS.x,MathUtils.TEMP_POS.y)}}}return!1},e.SCALE=1,e}();__reflect(EntityEffMgr.prototype,"EntityEffMgr");var EntityEffPlayData=function(){function e(){}return e.prototype.LoadByUrl=function(e){this.mc&&this.resName&&(GameGlobal.EntityEffMgr.AddResName(this.resName),this.mc.LoadByUrl(this.resName,e))},e}();__reflect(EntityEffPlayData.prototype,"EntityEffPlayData");var EntityLingtong=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t),this.configID=this.mSex=t.shows.id},t.prototype.GetSkillIDs=function(){return this.skillsData},t.prototype.GetBodyId=function(){if(this.mSex){var e=GameGlobal.Config.BabySkinConfig[1];if(e)return e.pid}return 0},t.prototype.GetName=function(){var e=GameGlobal.Config.BabyActivationConfig[this.mSex];return e?e.name:""},t.prototype.GetBodyResPath=function(){return AppearanceConfig.GetAppe(this.GetBodyId(),1,this.mSex-1)},t}(EntityData);__reflect(EntityLingtong.prototype,"EntityLingtong");var EntityManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.isMySubRole=function(e){return SubRoles.ins().GetRoleData().handle==e?!0:!1},t.prototype.IsHideMap=function(){return!1},t.prototype.IsHideMapType2=function(){return!1},t.prototype.IsShadownEntityMap=function(){return!1},t.prototype.HasWillBoss=function(){return!1},t.prototype.onTouchBegin=function(){},t.prototype.removeWillBoss=function(){},t.prototype.UpdateWingShowState=function(e){},t.prototype.IsHideOther=function(){return FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_GAME_OTHER_PLAYER)},t.prototype.CountShowNum=function(){return 0},t.prototype.HideOtherEntity=function(){},t.prototype.GetLookAtRole=function(){return GameGlobal.RaidMgr.GetRaid().GetLookAtRole()},t.prototype.IsHideEntity=function(e){return!1},t.prototype.ShowHideSomeOne=function(e){},t.prototype.HideByHandle=function(e){},t.MAX_SHOW_NUM=10,t}(BaseClass);__reflect(EntityManager.prototype,"EntityManager");var EntityPet=function(e){function t(){var t=e.call(this)||this;return t.mTlId=0,t.mShId=0,t}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t),this.configID=t.shows.id,t.shows&&t.shows.shows&&(this.mTlId=UserTemplate.GetAppaId(GameGlobal.PetTonglModel.SkinConfig,t.shows.shows[RoleShowDataType.PET_TL]),this.mShId=UserTemplate.GetAppaId(GameGlobal.PetShouhModel.SkinConfig,t.shows.shows[RoleShowDataType.PET_SH]))},t.prototype.GetSkillIDs=function(){var t=GameGlobal.Config.petBiographyConfig[this.configID];return t?t.skill:e.prototype.GetSkillIDs.call(this)},t.prototype.GetBodyId=function(){return this.configID},t.prototype.GetName=function(){return this.entityName||""},t}(EntityData);__reflect(EntityPet.prototype,"EntityPet");var DurationLabel=function(e){function t(){var t=e.call(this)||this;return t.skinName="DurationLabelSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.label.text="",this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.OnRemove,this)},t.prototype.SetCallbackFunc=function(e){this.mCbFun=e},t.prototype.SetEndTime=function(e,i){void 0===i&&(i=t.TIMETEXT_TYPE_HHMMSS),this.mEndTime=e,this.mType=i;var o=this.mEndTime-GameServer.serverTime;this.label.text=this._GetText(Math.max(o,0)),TimerManager.ins().remove(this._DoTimer,this),TimerManager.ins().doTimer(1e3,0,this._DoTimer,this)},t.prototype.SetTextFormat=function(e){this.mTextFormat=e},t.prototype.SetColor=function(e){this.label.textColor=e},t.prototype.SetTextSize=function(e){this.label.size=e},t.prototype.Stop=function(){TimerManager.ins().remove(this._DoTimer,this)},t.prototype._DoTimer=function(){var e=this.mEndTime-GameServer.serverTime;return 0>=e?(TimerManager.ins().remove(this._DoTimer,this),this.label.text="",void(this.mCbFun&&this.mCbFun())):void(this.label.text=this._GetText(e))},t.prototype.OnRemove=function(){TimerManager.ins().remove(this._DoTimer,this)},t.prototype._GetText=function(e){var t=this._GetTimeText(e);return this.mTextFormat?this.mTextFormat.replace("{0}",t):t},t.prototype._GetTimeText=function(e){if(this.mType==t.TIMETEXT_TYPE_ONLYSS)return""+e;var i=Math.floor(e/3600),o=Math.floor(e/60)%60,n=e%60;if(this.mType==t.TIMETEXT_TYPE_DDHH_HHMMSS){if(23>i)return i+":"+this._Complement(o)+":"+this._Complement(n);var a=Math.floor(i/24);return i%=24,a+"天"+i+"时"}return this.mType==t.TIMETEXT_TYPE_HHMMSS?i+":"+this._Complement(o)+":"+this._Complement(n):this.mType==t.TIMETEXT_TYPE_HHMM?i+":"+this._Complement(o):this._Complement(60*i+o)+":"+this._Complement(n)},t.prototype._Complement=function(e){return 9>=e?"0"+e:e},t.TIMETEXT_TYPE_HHMMSS=1,t.TIMETEXT_TYPE_MMSS=2,t.TIMETEXT_TYPE_HHMM=3,t.TIMETEXT_TYPE_ONLYSS=4,t.TIMETEXT_TYPE_DDHH_HHMMSS=5,t}(eui.Component);__reflect(DurationLabel.prototype,"DurationLabel",["eui.UIComponent","egret.DisplayObject"]);var EntityTiannv=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t),t.shows.shows&&(this.mBodyId=t.shows.shows[0],t.shows&&t.shows.shows&&(this.mLq=UserTemplate.GetAppaId(GameGlobal.HavingLingqModel.SkinConfig,t.shows.shows[RoleShowDataType.TIANNV_LQ]),this.mHua=UserTemplate.GetAppaId(GameGlobal.HavingHuanModel.SkinConfig,t.shows.shows[RoleShowDataType.TIANNV_HUA])))},t.prototype.GetSkillIDs=function(){return this.skillsData},t.prototype.GetBodyId=function(){if(this.mBodyId){var e=GameGlobal.Config.FemaleDevaSkinConfig[this.mBodyId];if(e)return e.pid}return 0},t.prototype.GetName=function(){return GameGlobal.Config.FemaleDevaBaseConfig.name||""},t}(EntityData);__reflect(EntityTiannv.prototype,"EntityTiannv");var EntityTianshen=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t),this.configID=t.shows.id,t.shows&&GameGlobal.TianShenModel.mTianShenList[this.configID]&&(this.fly=UserTemplate.GetAppaId(GameGlobal.XianlvXwModel.SkinConfig,GameGlobal.TianShenModel.mTianShenList[this.configID].mFeisLevel))},t.prototype.GetBodyId=function(){return this.configID},t.prototype.GetName=function(){var e=GameGlobal.Config.AirMarshalListConfig[this.configID];return e?e.name||"":""},t}(EntityData);__reflect(EntityTianshen.prototype,"EntityTianshen");var EntityType;!function(e){e[e.Role=1]="Role",e[e.Pet=2]="Pet",e[e.Xianlv=3]="Xianlv",e[e.Tiannv=4]="Tiannv",e[e.Shenjiang=5]="Shenjiang",e[e.Monster=6]="Monster",e[e.Boss=7]="Boss",e[e.Lingtong=8]="Lingtong",e[e.Xianjun=9]="Xianjun",e[e.NPC=99]="NPC",e[e.FriendlyRole=1e3]="FriendlyRole"}(EntityType||(EntityType={}));var EntityBattleSide;!function(e){e[e.Def=1]="Def",e[e.Attack=2]="Attack"}(EntityBattleSide||(EntityBattleSide={}));var EntityXianjun=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t),this.configID=t.shows.id},t.prototype.GetSkillIDs=function(){return this.skillsData&&this.skillsData.length?this.skillsData:EntityData.default_skill_ids},t.prototype.GetBodyId=function(){return this.configID},t}(EntityData);__reflect(EntityXianjun.prototype,"EntityXianjun");var EntityXianlv=function(e){function t(){var t=e.call(this)||this;return t.mFazId=0,t.mXianwId=0,t}return __extends(t,e),t.prototype.parserBase=function(t){e.prototype.parserBase.call(this,t),this.configID=t.shows.id,t.shows&&t.shows.shows&&(this.mFazId=UserTemplate.GetAppaId(GameGlobal.XianlvFzModel.SkinConfig,t.shows.shows[RoleShowDataType.XIANLV_FZ]),this.mXianwId=UserTemplate.GetAppaId(GameGlobal.XianlvXwModel.SkinConfig,t.shows.shows[RoleShowDataType.XIANLV_XW]))},t.prototype.GetSkillIDs=function(){return this.skillsData},t.prototype.GetBodyId=function(){return this.configID},t}(EntityData);__reflect(EntityXianlv.prototype,"EntityXianlv");var MapEntity=function(e){function t(){var t=e.call(this)||this;t.m_IsMyTeam=!1,t.touchEnabled=!1,t.touchChildren=!1,t.mPart=new MapEntityPart(t);var i=new eui.Image;return i.source="jiaodi",i.x=-36,i.y=-22,t.addChild(i),t}return __extends(t,e),t.prototype.GetHandle=function(){return this.m_Info?this.m_Info.handle:-1},t.prototype.GetInfo=function(){return this.m_Info},t.prototype.GetTeam=function(){return this.m_Info?this.m_Info.team:Team.WillEntity},t.prototype.AddEff=function(){},t.prototype.addBattleBuff=function(e){this.mBattleBuff||(this.mBattleBuff=new egret.DisplayObjectContainer,this.mBattleBuff.x=2006,this.mBattleBuff.y=0,this.addChild(this.mBattleBuff)),this.mBattleBuff.addChild(e)},t.prototype.removeBattleBuff=function(e){if(this.mBattleBuff){var t=this.mBattleBuff.getChildByName(e+"");t&&(DisplayUtils.removeFromParent(t),0==this.mBattleBuff.$children.length&&(DisplayUtils.removeFromParent(this.mBattleBuff),this.mBattleBuff=null))}},t.prototype.UpdateSetting=function(e){var t=this.m_Info;if(t){var i=this.m_Model;i&&(e==FuncOpenModel.SAVE_SYSTEM_SETTING_CH?FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_CH)?i.ClearTitle():i.UpdateTitle(this.m_Info):e==FuncOpenModel.SAVE_SYSTEM_SETTING_CB||e==FuncOpenModel.SAVE_SYSTEM_SETTING_TX?t.type==EntityType.Role&&i.UpdateSetting(e):e==FuncOpenModel.SAVE_SYSTEM_SETTING_XW||e==FuncOpenModel.SAVE_SYSTEM_SETTING_FZ?t.type==EntityType.Xianlv&&i.UpdateSetting(e):(e==FuncOpenModel.SAVE_SYSTEM_SETTING_TL||e==FuncOpenModel.SAVE_SYSTEM_SETTING_SH)&&t.type==EntityType.Pet&&i.UpdateSetting(e))}},t.prototype.SetFootRing=function(e){},t.prototype.GetBar=function(){if(null==this.m_Bar){var e=new eui.Skin;e.skinParts=["thumb"],e.width=54;var t=new eui.Image;t.percentWidth=100,t.source="ui_hpback",t.scale9Grid=new egret.Rectangle(5,5,1,1);var i=new eui.Image;i.left=2,i.right=2,i.top=1,i.source="ui_hpbar",i.scale9Grid=new egret.Rectangle(4,5,1,1),e.thumb=i,e.elementsContent=[t,i];var o=new eui.ProgressBar;o.skinName=e,o.x=-27,this.m_Bar=o}return this.m_Bar},t.prototype.GetDir=function(){return this.m_Model?this.m_Model.GetDir():3},t.prototype.Init=function(e,t){this.mTeamHandle=null,this.scaleX=1,this.alpha=1,this.mAI=null,this.mRaid=e,this.visible=!0,this.touchEnabled=!1,this.touchChildren=!1,this.m_Info=t,this.m_IsMyTeam=t.IsSide(),t.type==EntityType.Role||t.type==EntityType.FriendlyRole?this.m_Model=ObjectPool.pop("RoleBattleEntity"):t.type==EntityType.Pet?this.m_Model=ObjectPool.pop("PetBattleEntity"):t.type==EntityType.Xianlv?this.m_Model=ObjectPool.pop("XianlvBattleEntity"):t.type==EntityType.Shenjiang?this.m_Model=ObjectPool.pop("TianshenBattleEntity"):t.type==EntityType.Tiannv?this.m_Model=ObjectPool.pop("TiannvBattleEntity"):this.m_Model=ObjectPool.pop("BattleEntity"),this.m_Bar&&DisplayUtils.removeFromParent(this.m_Bar),this.addChildAt(this.m_Model,1),this.m_Model.Init(t),this.UpateName(),t.type==EntityType.Role&&this.UpatePingJi(t),this.UpdateBloodPos(this.m_Model.GetTopPos())},t.prototype.SetPlot=function(e){this.mPart.SetPlot(e)},t.prototype.SetAI=function(e){this.mAI=e,this.mAI.Init(this)},t.prototype.ShowBloodBar=function(){this.addChildAt(this.GetBar(),this.numChildren),this.SetBarValue(100,100),this.UpdateBloodPos(this.m_Model.GetTopPos())},t.prototype.UpdateBloodPos=function(e){this.m_Bar&&(this.m_Bar.y=e-10)},t.prototype.SetBarValue=function(e,t){this.m_Bar&&(this.m_Bar.maximum=t,this.m_Bar.value=e)},t.prototype.Dispose=function(){if(this.alpha=1,this.m_Model&&(this.m_Model.Dispose(),ObjectPool.push(this.m_Model),DisplayUtils.removeFromParent(this.m_Model),this.m_Model=null),egret.is(this.mRaid,"MapRaid")){var e=this.mRaid;e.ClearSelectEntity(this.GetHandle())}this.mPart.Dispose(),DisplayUtils.removeFromParent(this),this.m_NameTxt&&DisplayUtils.removeFromParent(this.m_NameTxt),this.m_PingJiaTxt&&DisplayUtils.removeFromParent(this.m_PingJiaTxt),this.mIsClick&&(this.touchEnabled=!1,this.touchChildren=!1,this.mIsClick=!1,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this)),this.mBattleBuff&&(DisplayUtils.removeFromParent(this.mBattleBuff),this.mBattleBuff=null),this.m_Info=null,this.mAI=null,this.mRaid=null},t.prototype.LookPos=function(e,t){var i=this.x,o=this.y;Math.abs(i-e)<.5&&Math.abs(o-t)<.5||this.SetDir(DirUtil.GetDir(this.x,this.y,e,t))},t.prototype.SetDir=function(e){this.m_Model&&this.m_Model.SetDir(e)},t.prototype.UpdateAction=function(e,t){this.m_Model&&this.m_Model.UpdateAction(e,t)},t.prototype.ReplayAction=function(e,t){this.m_Model&&this.m_Model.ReplayAction(e,t)},t.prototype.UpateName=function(){if(this.mRaid&&this.m_Info.type==EntityType.Role){var e=this.mRaid.GetEntityNameStyle(this.m_Info),t="";if(this.mRaid&&this.mRaid.mIsShowGuild&&(t=this.m_Info.guildName),this.m_Info&&!e)return void(this.m_NameTxt&&(this.m_NameTxt.visible=!1));this.m_NameTxt?this.m_NameTxt.visible=!0:this.m_NameTxt=new MapEntityTxt,this.addChild(this.m_NameTxt),this.m_NameTxt.text=e,this.m_Info.entityPingJi>0&&this.m_NameTxt.SetJjLv(this.m_Info.entityPingJi),this.m_NameTxt.SetNextText(t);var i=!1;t&&GameGlobal.actorModel.guildID&&this.m_Info.guildID!=GameGlobal.actorModel.guildID&&(i=!0),this.m_NameTxt.SetNameColor(i)}},t.prototype.UpatePingJi=function(e){return this.m_Info.entityPingJi?(this.m_PingJiaTxt?this.m_PingJiaTxt.visible=!0:this.m_PingJiaTxt=new MapEntityPingJiaTxt,this.addChild(this.m_PingJiaTxt),void(this.m_PingJiaTxt.text=RoleShowData.GetPingJiAppId(e.entityPingJi))):void(this.m_PingJiaTxt&&(this.m_PingJiaTxt.visible=!1))},t.prototype.UpdateInfo=function(e){if(void 0===e&&(e=null),e){if(this.m_Info.handle!=e.handle)return void console.error("update info error handle");this.m_Info=e,e.type==EntityType.Role&&this.UpatePingJi(e)}this.m_Model.UpdateInfo(this.m_Info),this.UpateName(),this.UpdateBloodPos(this.m_Model.GetTopPos())},t.prototype.SetPos=function(e,t){this.x=e,this.y=t},t.prototype.SetClick=function(e){void 0===e&&(e=!0),GameGlobal.GameLogic.actorModel.actorID!=this.m_Info.handle&&(this.mIsShowZdView=e,this.mIsClick||(this.touchEnabled=!0,this.touchChildren=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.OnClick,this),this.mIsClick=!0))},t.prototype.ChageStatus=function(e){this.mPart.ChageStatus(e)},t.prototype.SetType=function(e){this.mPart.SetType(e)},t.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var o=this.$getInvertedConcatenatedMatrix(),n=o.a*t+o.c*i+o.tx,a=o.b*t+o.d*i+o.ty;if(!(n>80||-80>n||a>100||-100>a)){var r=this.$scrollRect?this.$scrollRect:this.$maskRect;if(r&&!r.contains(n,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var s=this.$children,l=!1,c=null,u=s.length-1;u>=0;u--){var p=s[u];if(!p.$maskedObject&&(c=p.$hitTest(t,i))){if(l=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:l?this:e.prototype.$hitTest.call(this,t,i)}},t.prototype.OnClick=function(e){if(!(e.localX>80||e.localX<-80||e.localY>100||e.localY<-100)){var t=null;if(egret.is(this.mRaid,"MapRaid")&&(t=this.mRaid),t&&t.OnPreEntityClick(this.GetHandle()))return this.mIsShowZdView?void t.SetSelectEntity(this.GetHandle()):void t.OnEntityClick(this.GetHandle())}},t}(egret.DisplayObjectContainer);__reflect(MapEntity.prototype,"MapEntity");var MapEntityPingJiaTxt=function(e){function t(){var t=e.call(this)||this;t.y=43,t.width=0,t.height=25,t.touchEnabled=!1,t.touchChildren=!1;var i=t.img=new eui.Image;i.source="ui_cm_black",i.alpha=.5,i.height=25,i.width=120,i.horizontalCenter=0,t.addChild(i);var o=t.pjimg=new eui.Image;o.source="ui_zypf_bm_jczy",o.scaleX=.4,o.scaleY=.4,o.x=-50,t.addChild(o);var n=t.txt=new eui.Label;return n.y=3,n.horizontalCenter=0,n.size=18,n.textColor=61468,n.bold=!0,t.addChild(n),t.cacheAsBitmap=!0,t}return __extends(t,e),t.prototype.SetNameColor=function(e){this.txt.textColor=e?Color.Red:61468},Object.defineProperty(t.prototype,"text",{set:function(e){this.txt.text=e,this.img.width=this.txt.width+12,this.nextText&&DisplayUtils.removeFromParent(this.nextText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFlow",{set:function(e){this.txt.textFlow=e,this.img.width=this.txt.width+12,this.nextText&&DisplayUtils.removeFromParent(this.nextText)},enumerable:!0,configurable:!0}),t.prototype.SetNextText=function(e){if(!e)return void(this.nextText&&DisplayUtils.removeFromParent(this.nextText));var t=this.nextText;t||(t=this.nextText=new eui.Label,t.y=30,t.horizontalCenter=0,t.size=18,t.textColor=Color.White,t.bold=!0),this.addChild(t),t.text="帮："+e
},t}(eui.Group);__reflect(MapEntityPingJiaTxt.prototype,"MapEntityPingJiaTxt");var MapEntityTxt=function(e){function t(){var t=e.call(this)||this;t.y=18,t.width=0,t.height=25,t.touchEnabled=!1,t.touchChildren=!1;var i=t.img=new eui.Image;i.source="ui_cm_black",i.alpha=.5,i.height=25,i.horizontalCenter=0,t.addChild(i);var o=t.jjimg=new eui.Image;o.height=25,o.width=60,t.addChild(o);var n=t.jjtxt=new eui.Label;n.y=3,n.size=18,n.bold=!0,t.addChild(n);var a=t.txt=new eui.Label;return a.y=4,a.horizontalCenter=0,a.size=17,a.textColor=61468,a.bold=!0,t.addChild(a),t.cacheAsBitmap=!0,t}return __extends(t,e),t.prototype.SetNameColor=function(e){this.txt.textColor=e?Color.Red:61468},t.prototype.SetJjLv=function(e){this.jjimg.source=ResDataPath.GetRealmIcon(e),this.jjtxt.text=RoleShowData.GetJinJieAppId(e),this.jjimg.x=-(this.img.width+12),this.jjtxt.x=-(this.img.width+2)},Object.defineProperty(t.prototype,"text",{set:function(e){this.txt.text=e,this.img.width=this.txt.width+12,this.nextText&&DisplayUtils.removeFromParent(this.nextText)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFlow",{set:function(e){this.txt.textFlow=e,this.img.width=this.txt.width+12,this.nextText&&DisplayUtils.removeFromParent(this.nextText)},enumerable:!0,configurable:!0}),t.prototype.SetNextText=function(e){if(!e)return void(this.nextText&&DisplayUtils.removeFromParent(this.nextText));var t=this.nextText;t||(t=this.nextText=new eui.Label,t.y=30,t.horizontalCenter=0,t.size=18,t.textColor=Color.White,t.bold=!0),this.addChild(t),t.text="帮："+e},t}(eui.Group);__reflect(MapEntityTxt.prototype,"MapEntityTxt");var MapEntityPart=function(){function e(e){this.m_Entity=e}return e.prototype._GetFootRingContainer=function(){return this.footRingContainer||(this.footRingContainer=new egret.DisplayObjectContainer,this.m_Entity.addChildAt(this.footRingContainer,0)),this.footRingContainer},e.prototype._DeleteFootRingContainer=function(){this.footRingContainer&&(egret.Tween.removeTweens(this.footRingContainer),this.footRingContainer.removeChildren(),DisplayUtils.removeFromParent(this.footRingContainer),this.footRingContainer.visible=!1,this.footRingContainer=null)},e.prototype.SetType=function(e){this.mZhengYingView||(this.mZhengYingView=new EntityZhengYingView),this.mZhengYingView.SetType(e),this.m_Entity.addChild(this.mZhengYingView)},e.prototype.ChageStatus=function(e){e?(this.mStatusView||(this.mStatusView=new EntityStatusView),this.mStatusView.SetType(e),this.m_Entity.addChild(this.mStatusView)):this.mStatusView&&DisplayUtils.removeFromParent(this.mStatusView)},e.prototype.RemovePlot=function(){this.mPlotView&&(DisplayUtils.removeFromParent(this.mPlotView),this.mPlotView=null)},e.prototype.SetPlot=function(e){this.mPlotView||(this.mPlotView=new PlotSimplePanel),this.mPlotView.SetMsg(e),this.m_Entity.addChildAt(this.mPlotView,this.m_Entity.numChildren)},e.prototype.Dispose=function(){this._DeleteFootRingContainer(),this.mZhengYingView&&(DisplayUtils.removeFromParent(this.mZhengYingView),this.mZhengYingView=null),this.mStatusView&&(DisplayUtils.removeFromParent(this.mStatusView),this.mStatusView=null),this.RemovePlot()},e}();__reflect(MapEntityPart.prototype,"MapEntityPart");var EntityStatusView=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.sate=new eui.Image,this.sate.x=-28,this.sate.y=-200,this.addChild(this.sate)},t.prototype.SetType=function(e){this.sate.source=t.TYPE[e]||""},t.NONE=1,t.ATK=2,t.DIE=3,t.TYPE=(_a={},_a[1]="",_a[2]="ui_hddt_bm_zhandouzhong",_a[3]="ui_zd_bm_youling",_a),t}(egret.DisplayObjectContainer);__reflect(EntityStatusView.prototype,"EntityStatusView");var EntityZhengYingView=function(e){function t(){var t=e.call(this)||this;return t.Init(),t}return __extends(t,e),t.prototype.Init=function(){this.typeImg=new eui.Image,this.typeImg.y=0,this.typeImg.x=-100,this.addChild(this.typeImg)},t.prototype.SetType=function(e){this.typeImg.source=e},t}(egret.DisplayObjectContainer);__reflect(EntityZhengYingView.prototype,"EntityZhengYingView");var _a,MapNpcEntity=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.UpdateInfo=function(t){this.UpateName(t.GetName()),e.prototype.UpdateInfo.call(this,t)},t.prototype.UpateName=function(e){return e?(this.m_NameTxt?this.m_NameTxt.visible=!0:this.m_NameTxt=new MapEntityTxt,this.addChild(this.m_NameTxt),void(this.m_NameTxt.textFlow=TextFlowMaker.generateTextFlow(e))):void(this.m_NameTxt&&(this.m_NameTxt.visible=!1))},t}(RoleBattleEntity);__reflect(MapNpcEntity.prototype,"MapNpcEntity");var GetwayLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.m_Text},set:function(e){this.m_Text=e,this._Update()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{set:function(e){this.m_TextColor=e,this._Update()},enumerable:!0,configurable:!0}),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._Update(),this.m_TextColor&&(this.label.textColor=this.m_TextColor)},t.prototype._Update=function(){this.$stage&&(this.m_TextColor&&(this.label.textColor=this.m_TextColor),UIHelper.SetLinkStyleLabel(this.label,this.m_Text))},t.prototype.SetUnLabel=function(e){this.label.text=e,this.label.textColor=16711680},t.prototype.SetDefault=function(){this.textColor=3066402},t.prototype.PlayEff=function(e){if(!e)return void(this.m_Eff&&(this.m_Eff.visible=!1));var t=this.m_Eff;t||(t=this.m_Eff=new MovieClip,t.touchEnabled=!1,this.m_Text.length>4?(t.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_wzlj_002"),!0,-1),t.scaleX=this.label.width/100):t.loadUrl(ResDataPath.GetUIEffePath2("eff_ui_wzlj_001"),!0,-1),this.addChild(t)),this.m_Text.length>4?(t.x=this.label.width>>1,t.y=8):(t.x=32,t.y=8),t.visible=!0},t.GainItemLabel=function(e){var t=GameGlobal.Config.GainItemConfig[e];return t?t.gainWay[0][0]:null},t.GainItemWay=function(e){var t=GameGlobal.Config.GainItemConfig[e];return t?t.gainWay[0][1][0]:null},t}(eui.Component);__reflect(GetwayLabel.prototype,"GetwayLabel",["eui.UIComponent","egret.DisplayObject"]);var Team;!function(e){e[e.My=2]="My",e[e.Monster=16]="Monster",e[e.WillEntity=64]="WillEntity",e[e.Neutral=82]="Neutral"}(Team||(Team={}));var BattleMvData=function(e){function t(t,i){void 0===i&&(i=!1);var o=e.call(this)||this;return o.offset=null,o.job=null,o.sex=null,o.mIsShow=!0,o.mIsPlayWayAnim=!1,o.m_NotState=!1,o.m_isFir=!1,o.m_Number=1,o.m_Context=t,i&&o.mv&&(o.mv.visible=!1),o}return __extends(t,e),t.prototype.GetName=function(){return this.replaceName?this.replaceName:this.name},t.prototype.GetClipName=function(){var e=this.m_Context.GetClipType();return this.mAnimType&&(this.mAnimType[e]||(e=EntityClipType.STAND)),!this.replaceName&&this.ride&&(e=100+e),e},t.prototype.SetNotState=function(){this.m_NotState=!0,this.mv&&(this.mv.m_LoadAndPlay=!1)},t.prototype.SetPayNum=function(e){this.m_Number=e,this.m_isFir=!0},t.prototype.SetOffset=function(e){this.mv?(this.mv.x=e.x,this.mv.y=e.y):this.offset=e},t.prototype.UpdateSetting=function(e){this.mSettingId==e&&this.mv&&(this.mv.visible=this.IsSettingShow())},t.prototype.IsSettingShow=function(){return this.mSettingId?!FuncOpenModel.HasSaveData(this.mSettingId):!0},t.prototype.Init=function(){this.replaceName=null,this.mIsShow=!0,this.mIsPlayWayAnim=!1},t.prototype.SetParent=function(e,t){this.mParent=e,this.mIndex=t},t.prototype.AddToParent=function(){return this.mParent?void(this.mv&&this.mParent.addChildAt(this.mv,this.mIndex||0)):void console.log("not parent")},t.prototype.Create=function(){this.mv=new EntityMovieObject,this.mv.$hashCode=this.hashCode,this.offset&&(this.mv.x=this.offset.x,this.mv.y=this.offset.y,this.offset=null)},t.prototype.SetId=function(e){e?this.name=AppearanceConfig.GetAppe(e,this.job,this.sex):(this.name=null,this.mv&&(this.mv.visible=!1,this.mv.stop()))},t.prototype.Load=function(){if(this.mIsShow){var e=this.GetName(),t=this.mv;if(e){if(t&&t.stop(),null!=this.mSettingId&&FuncOpenModel.HasSaveData(this.mSettingId))return;if(this.mIsHead){var i=!1,o=GameGlobal.Config.AppearancePosConfig[this.name];if(o){var n=this.m_Context.GetDir();i=2>n||n>6?o.upRes:o.downRes}i?(this.mv&&(this.mv.visible=!0),e+="_h"):(e=null,this.mv&&this.mv.visible&&(this.mv.visible=!1,this.mv.stop()))}if(!e)return;t||(this.Create(),t=this.mv,t.addEventListener(egret.Event.CHANGE,this.SyncFrame,this),this.m_NotState&&!this.m_isFir&&(this.mv.m_LoadAndPlay=!1)),t.parent||this.mParent.addChildAt(this.mv,this.mIndex),this.m_NotState?this.m_Context.LoadMcAnim(t,e,null,null,this.m_Number):this.m_Context.LoadMcAnim(t,e,this.m_Context.GetDir(),this.GetClipName())}}},t.prototype.SyncFrame=function(e){var t=e.currentTarget;t.movieClipData.$isDataValid()&&this.m_Context.mBody.mv&&t.gotoAndPlay(this.m_Context.mBody.mv.currentFrame,this.m_Context.GetPlayCount())},t.prototype.SetShowState=function(e){if(this.mIsShow=e,this.mv){var t=this.mv;e?t.parent||this.AddToParent():t.parent&&DisplayUtils.removeFromParent(t)}},t.prototype.ClearCache=function(){this.mv&&this.mv.ClearCache()},t.prototype.UpdateWayTween=function(){var e=this.m_Context.GetDir(),t=this.mv;if(t){var i,o;e>4?(this.m_NotState||(this.mv.scaleX=-1),i=100,o=-100):(this.m_NotState||(this.mv.scaleX=1),i=-100,o=-100),(2>=e||e>=6)&&(o+=40),this.mIsPlayWayAnim&&t.$stage?(t.x!=i||t.y!=o)&&(egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:i,y:o},1300,egret.Ease.sineOut)):(t.x=i,t.y=o,this.mIsPlayWayAnim=!0)}},t}(egret.HashObject);__reflect(BattleMvData.prototype,"BattleMvData");var MonShowPanel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.SetBody=function(e){this.m_Body=e,this._Update()},t.prototype._SetSource=function(e,t){e&&(StringUtils.IsNullOrEmpty(t)?e.LoadByUrl(null):e.LoadByUrl("resource/assets/movie/mon_show/"+t,-1,!0))},t.prototype._NewMovieObject=function(){var e=new MovieObject;return e.x=this.width>>1,e.y=this.height>>1,this.addChild(e),e},t.prototype._Update=function(){this.$stage&&(this.bodyMv=this._InitMv(this.m_Body,this.bodyMv),this._SetSource(this.bodyMv,this.m_Body))},t.prototype._InitMv=function(e,t){return StringUtils.IsNullOrEmpty(e)?t&&t.LoadByUrl(null):t||(t=this._NewMovieObject()),t},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._Update()},t}(eui.Component);__reflect(MonShowPanel.prototype,"MonShowPanel",["eui.UIComponent","egret.DisplayObject"]);var EntityClipType;!function(e){e[e.ATTACK=0]="ATTACK",e[e.STAND=1]="STAND",e[e.RUN=2]="RUN",e[e.DIE=3]="DIE",e[e.HIT=4]="HIT",e[e.JUMP=5]="JUMP",e[e.RIDE_ATTACK=100]="RIDE_ATTACK",e[e.RIDE_STAND=101]="RIDE_STAND",e[e.RIDE_RUN=102]="RIDE_RUN",e[e.RIDE_DIE=103]="RIDE_DIE",e[e.RIDE_HIT=104]="RIDE_HIT",e[e.RIDE_JUMP=105]="RIDE_JUMP"}(EntityClipType||(EntityClipType={}));var EntityClipTypeToName=(_a={},_a[EntityClipType.ATTACK]=["a","attack"],_a[EntityClipType.STAND]=["s"],_a[EntityClipType.RUN]=["r"],_a[EntityClipType.DIE]=["a","die"],_a[EntityClipType.HIT]=["a","hit"],_a[EntityClipType.JUMP]=["s"],_a[EntityClipType.RIDE_ATTACK]=["i","attack"],_a[EntityClipType.RIDE_STAND]=["p"],_a[EntityClipType.RIDE_RUN]=["o"],_a[EntityClipType.RIDE_DIE]=["p"],_a[EntityClipType.RIDE_HIT]=["i","hit"],_a[EntityClipType.RIDE_JUMP]=["p"],_a),_a,PetBattleEntity=function(e){function t(){var t=e.call(this)||this;return t._tl=new BattleMvData(t,!1),t._sh=new BattleMvData(t,!1),t._tl.mSettingId=FuncOpenModel.SAVE_SYSTEM_SETTING_TL,t._tl.SetNotState(),t._tl.SetParent(t,CharMcOrder.OTHER_TYPE),t._sh.mSettingId=FuncOpenModel.SAVE_SYSTEM_SETTING_SH,t._sh.SetNotState(),t._sh.SetParent(t,CharMcOrder.TITLE_TYPE),t}return __extends(t,e),t.prototype.Init=function(t){this._tl.Init(),this._sh.Init(),e.prototype.Init.call(this,t)},t.prototype.UpdateSetting=function(t){e.prototype.UpdateSetting.call(this,t),t==FuncOpenModel.SAVE_SYSTEM_SETTING_TL?this._tl.UpdateSetting(t):t==FuncOpenModel.SAVE_SYSTEM_SETTING_SH&&this._sh.UpdateSetting(t)},t.prototype.Dispose=function(){e.prototype.Dispose.call(this),this._tl.ClearCache(),this._sh.ClearCache()},t.prototype.UpdateInfo=function(t){this._tl.SetId(t.mTlId),this._sh.SetId(t.mShId),e.prototype.UpdateInfo.call(this,t)},t.prototype._BodyLoaded=function(){e.prototype._BodyLoaded.call(this),this._tl.Load(),this._sh.Load(),this._sh.UpdateWayTween()},t}(BattleEntity);__reflect(PetBattleEntity.prototype,"PetBattleEntity");var NeedItemView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.SetItemId=function(e,t){var i=GameGlobal.Config.ItemConfig[e];i&&(this.mItemId=e,this.item.data=e,StringUtils.addColor,UIHelper.SetLabelText(this.matLabel,StringUtils.addColor(i.name,ItemBase.QUALITY_COLOR[i.quality]),"*"+t),UIHelper.SetLabelText(this.useCountLabel,"拥有：",GameGlobal.UserBag.GetCount(e)+""))},t}(eui.Component);__reflect(NeedItemView.prototype,"NeedItemView");var TiannvBattleEntity=function(e){function t(){var t=e.call(this)||this;return t._hua=new BattleMvData(t,!1),t._hua.SetParent(t,CharMcOrder.OTHER_TYPE),t._hua.SetNotState(),t._xw=new eui.Image,t._xw.y=-94+BattleEntity.POS,t._xw.x=-90,t.addChildAt(t._xw,CharMcOrder.TITLE_TYPE),t}return __extends(t,e),t.prototype.GetTopPos=function(){return-84+BattleEntity.POS+60},t.prototype.UpdateSetting=function(t){e.prototype.UpdateSetting.call(this,t)},t.prototype.Dispose=function(){e.prototype.Dispose.call(this),this._hua.ClearCache(),this._xw.source=""},t.prototype.UpdateInfo=function(t){if(this._hua.SetId(t.mHua),!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_XW))if(t.mLq){var i=AppearanceConfig.GetAppe(t.mLq);this._xw.source=i.substring(i.lastIndexOf("/")+1)}else this._xw.source="";e.prototype.UpdateInfo.call(this,t)},t.prototype._BodyLoaded=function(){e.prototype._BodyLoaded.call(this),this._hua.Load()},t}(BattleEntity);__reflect(TiannvBattleEntity.prototype,"TiannvBattleEntity");var TianshenBattleEntity=function(e){function t(){var t=e.call(this)||this;return t._xw=new eui.Image,t._xw.y=-94+BattleEntity.POS,t._xw.x=-90,t.addChildAt(t._xw,CharMcOrder.TITLE_TYPE),t}return __extends(t,e),t.prototype.GetTopPos=function(){return-84+BattleEntity.POS+60},t.prototype.UpdateSetting=function(t){e.prototype.UpdateSetting.call(this,t)},t.prototype.Dispose=function(){e.prototype.Dispose.call(this),this._xw.source=""},t.prototype.UpdateInfo=function(t){if(!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_XW))if(t.fly){var i=AppearanceConfig.GetAppe(t.fly);this._xw.source=i.substring(i.lastIndexOf("/")+1)}else this._xw.source="";e.prototype.UpdateInfo.call(this,t)},t.prototype._BodyLoaded=function(){e.prototype._BodyLoaded.call(this)},t}(BattleEntity);__reflect(TianshenBattleEntity.prototype,"TianshenBattleEntity");var XianJunBattleEntity=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.UpdateSetting=function(t){e.prototype.UpdateSetting.call(this,t)},t.prototype.Dispose=function(){e.prototype.Dispose.call(this)},t.prototype.UpdateInfo=function(t){e.prototype.UpdateInfo.call(this,t)},t.prototype._BodyLoaded=function(){e.prototype._BodyLoaded.call(this)},t}(BattleEntity);__reflect(XianJunBattleEntity.prototype,"XianJunBattleEntity");var XianlvBattleEntity=function(e){function t(){var t=e.call(this)||this;return t._fz=new BattleMvData(t,!1),t._fz.mSettingId=FuncOpenModel.SAVE_SYSTEM_SETTING_FZ,t._fz.SetParent(t,CharMcOrder.OTHER_TYPE),t._fz.SetNotState(),t._xw=new eui.Image,t._xw.y=-64+BattleEntity.POS,t._xw.x=-72,t.addChildAt(t._xw,CharMcOrder.TITLE_TYPE),t}return __extends(t,e),t.prototype.UpdateSetting=function(t){e.prototype.UpdateSetting.call(this,t),t==FuncOpenModel.SAVE_SYSTEM_SETTING_FZ?this._fz.UpdateSetting(t):t==FuncOpenModel.SAVE_SYSTEM_SETTING_XW&&FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_XW)&&this._xw&&(this._xw.source="")},t.prototype.Dispose=function(){e.prototype.Dispose.call(this),this._fz.ClearCache(),this._xw.source=""},t.prototype.UpdateInfo=function(t){if(this._fz.SetId(t.mFazId),!FuncOpenModel.HasSaveData(FuncOpenModel.SAVE_SYSTEM_SETTING_XW))if(t.mXianwId){var i=AppearanceConfig.GetAppe(t.mXianwId);this._xw.source=i.substring(i.lastIndexOf("/")+1)}else this._xw.source="";e.prototype.UpdateInfo.call(this,t)},t.prototype._BodyLoaded=function(){e.prototype._BodyLoaded.call(this),this._fz.Load()},t}(BattleEntity);__reflect(XianlvBattleEntity.prototype,"XianlvBattleEntity");var PageButton=function(e){function t(){var t=e.call(this)||this;return t._page=-1,t._max=-1,t.skinName="PageButtonSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickHandler,this)},t.prototype.setPage=function(e){e!=this._page&&(1>e&&(e=1),this._max>-1&&e>this._max&&(e=this._max),this._page=e,this.checkEnabled())},t.prototype.setMax=function(e){e!=this._max&&(1>e&&(e=1),this._page>e&&(this._page=e),this._max=e,this.checkEnabled())},t.prototype.onClickHandler=function(e){var t=e.currentTarget==this.leftBtn?-1:1,i=this._page+t;this.setPage(i),MessageCenter.ins().dispatch(MessageDef.PAGE_BUTTON_UPDATE,i)},t.prototype.checkEnabled=function(){this.pageTxt.text=this._page+"/"+this._max,this.leftBtn.enabled=this.rightBtn.enabled=!1,this._max>1&&(this._page>1&&(this.leftBtn.enabled=!0),this._page<this._max&&(this.rightBtn.enabled=!0))},t}(eui.Component);__reflect(PageButton.prototype,"PageButton",["eui.UIComponent","egret.DisplayObject"]);var PetShowPanel=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(RideShowPanel);__reflect(PetShowPanel.prototype,"PetShowPanel");var CatchPetRaid=function(e){function t(){var t=e.call(this)||this;return t.mNotShowBlood=!0,t.list1=[],t.list2=[],t}return __extends(t,e),t.prototype.FinishBattle=function(){GameGlobal.RaidMgr.EnterCurMapRaid()},t.prototype.SetBattleData=function(){var i=[],o=this.GetCatchPet(GameGlobal.CatchPetModel.monsterid);o&&(o.posIndex=8,i.push(o));var n=[],a=t.GetMyRole();a.posIndex=8,n.push(a);var r=NormalBattleRaid.GetMyPet();r&&(r.posIndex=3,n.push(r));for(var s=0;2>s;s++){var l=NormalBattleRaid.GetXianlv(s);l&&(l.posIndex=0==s?7:9,n.push(l))}var c=NormalBattleRaid.GetXianjun();c&&(c.posIndex=4,n.push(c));for(var u=0,p=n;u<p.length;u++){var h=p[u];h.side=2}var d=[i,n];this.list1=i,this.list2=n,e.prototype.SetBattleData.call(this,d)},t.prototype.GetCatchPet=function(e){var t=e;if(t){var i=GameGlobal.PetModel.GetPetInfo(e),o=new EntityPet,n=MonstersConfig.GetHandle();return o.parserBase({type:EntityType.Pet,handler:n,monid:t,ownerid:GameGlobal.actorModel.actorID,attrs:NormalBattleRaid.CopyAttr(i.GetAttrs()),shows:{id:t}}),o}},t.GetMyRole=function(){var e=NormalBattleRaid.GetMyRole();return e&&(e.skillsData=[99001]),e},t.prototype.CreatSkill=function(){var e=ViewManager.ins().getView(GameCatchPanel);if(e&&e.Catch(),!this.list1[0]||!this.list2[0])return[];var t=this.list2[0],i=this.list1[0],o=t.GetSkillIDs()[0];if(!o)return[];var n=new CatchPetSUnitSkill(o,t.handle);return n.Init(),[n.Use([i.handle])]},t.prototype.OpenBattlePanel=function(){return ViewManager.ins().open(GameCatchPanel)},t}(BattleRaid);__reflect(CatchPetRaid.prototype,"CatchPetRaid");var PowerLabel=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"text",{set:function(e){this.m_Value=e,this._SetText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideBg",{set:function(e){this.m_HideBg=!0},enumerable:!0,configurable:!0}),t.prototype._SetText=function(){null!=this.m_Value&&this.$stage&&(this.label.text=" "+this.m_Value)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._SetText(),this.m_HideBg&&(this.bg.visible=!1),this.checkAttr&&this.checkAttr.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnClick,this)},t.prototype._OnClick=function(){this.dispatchEventWith(egret.TouchEvent.TOUCH_TAP)},t}(eui.Component);__reflect(PowerLabel.prototype,"PowerLabel",["eui.UIComponent","egret.DisplayObject"]);var ResMgr=function(){function e(){}return e.GetNoneList=function(){return this.NONE_LIST||(this.NONE_LIST=(e={},e[ResDataPath.GetUIEffePath("eff_ui_zb_001")+".png"]=1,e[ResDataPath.GetUIEffePath("eff_ui_zb_002")+".png"]=1,e[ResDataPath.GetUIEffePath("eff_ui_zb_003")+".png"]=1,e)),this.NONE_LIST;var e},e.GetName=function(e){var t=this.m_ResConfig.getName(e);return t?t:e},e.ins=function(){return this.m_Instance||(this.m_Instance=new e),this.m_Instance},e.Init=function(){this.m_ResConfig=RES.configInstance},e.GmInit=function(){},e._DoUpdate=function(){var e=0,t=0,i=egret.getTimer();for(var o in this.m_Wait){if(++e,t>=this.MAX_OP_COUNT)break;i>=this.m_Wait[o]&&(this.DestroyRes(o)&&(this.LOG&&console.log("destroy name => "+o),++t),delete this.m_Wait[o],--e)}1>e&&(TimerManager.ins().remove(this._DoUpdate,this),this.m_IsUpdate=!1)},e.Ref=function(t){t&&(e.GetNoneList()[t]||(this.m_Wait[t]&&delete this.m_Wait[t],this.m_Ref[t]?++this.m_Ref[t]:this.m_Ref[t]=1))},e.Unref=function(t,i){return void 0===i&&(i=null),t?e.GetNoneList()[t]?!1:this.m_Ref[t]&&--this.m_Ref[t]<=0?(delete this.m_Ref[t],this.m_Wait[t]=egret.getTimer()+(i||this.LIFE_TIME),this.m_IsUpdate||(this.m_IsUpdate=!0,TimerManager.ins().doTimer(this.LOOP_TIME,0,this._DoUpdate,this)),!0):!1:!1},e.ForceUnref=function(e){this.m_Ref[e]&&delete this.m_Ref[e],this.m_Wait[e]=egret.getTimer()+5},e.RefSkin=function(t){if(t){var i=RES_REF?RES_REF[t]:null;if(i)for(var o=0,n=i;o<n.length;o++){var a=n[o];e.Ref(a)}}},e.UnrefSkin=function(t){if(t){var i=RES_REF?RES_REF[t]:null;if(i)for(var o=0,n=i;o<n.length;o++){var a=n[o];e.Unref(a,e.IMG_LIFT_TIME)}}},e.DestroyRes=function(e){return RES.destroyRes(e)},e.DebugPrint=function(){var e=[];for(var t in this.m_Ref)e.push("key => "+t+" => "+this.m_Ref[t]);console.log("ref ======================"),console.log(e.join("\n")),e.length=0;var i=egret.getTimer();console.log("wait ======================",i);for(var t in this.m_Wait){var o=this.m_Wait[t];e.push("key => "+t+"; time => "+o+"; left => "+(o-i))}console.log(e.join("\n"))},e.getRefCount=function(e){return this.m_Ref[e]?this.m_Ref[e]:0},e.NONE_LIST=null,e.IMG_LIFT_TIME=3e4,e.LIFE_TIME=3e3,e.LOOP_TIME=3e3,e.MAX_OP_COUNT=40,e.LOG=!1,e.m_Ref={},e.m_Wait={},e.m_IsUpdate=!1,e}();__reflect(ResMgr.prototype,"ResMgr");var NormalBattleRaid=function(e){function t(){var t=e.call(this)||this;return t.mIsManual=!1,t.mMySide=2,t.battleMgr=new BattleMgr,t}return __extends(t,e),t.prototype.ShowBattleLayer=function(){GameMap.GetBattleView().ShowDefault()},t.prototype.Init=function(){e.prototype.Init.call(this),this.battleMgr.Init(this)},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.m_StartTime=this.m_StartTime>>1,this.battleMgr.OnEnter()},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),this.battleMgr.OnExit()},t.prototype.ClearEntityEffMgr=function(){GameGlobal.EntityEffMgr.Clear(!1)},t.prototype.Update=function(t){e.prototype.Update.call(this,t),this.battleMgr.Update(t)},t.prototype.UseSkill=function(e){this.battleMgr.UseSkill(e)},t.prototype.TurnFinish=function(){this.mIsManual&&this.battleMgr.TurnExecuteFinish(),e.prototype.TurnFinish.call(this)},t.prototype.SetBattleData=function(){for(var i=[],o=GameGlobal.UserFb.config,n=MathUtils.limitInteger(o.minunm,o.maxnum),a=0,r=o.waveMonsterId,s=t.POS_ARR,l=GameGlobal.UserFb.guanqiaID>100?.5:1,c=0;n>c;c++){var u=r[a++%r.length],p=MonstersConfig.CreateByData(u.id,u,l);i.push(p),p.posIndex=s[c]}var h=[],d=t.GetMyRole();if(d){d.posIndex=8,h.push(d);var _=t.GetMyPet();_&&(_.posIndex=3,h.push(_));var f=t.CreateLingtong();f&&(f.posIndex=2,h.push(f));for(var c=0;2>c;c++){var m=t.GetXianlv(c);m&&(m.posIndex=0==c?7:9,h.push(m))}var g=t.GetXianjun();g&&(g.posIndex=4,h.push(g));var v=this.GetTiannv();v&&(v.posIndex=6,h.push(v));var y=t.GetTianshen();y&&(y.posIndex=10,h.push(y));for(var C=0,b=h;C<b.length;C++){var S=b[C];S.side=2}var G=[i,h];e.prototype.SetBattleData.call(this,G),this.battleMgr.SetBattleData(G)}},t.GetMyPet=function(){var e=GameGlobal.PetModel.GetShowId();if(e){var t=GameGlobal.PetModel.GetPetInfo(e),i=new EntityPet,o=MonstersConfig.GetHandle();return i.parserBase({type:EntityType.Pet,handler:o,monid:e,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(SubRoles.ins().GetRoleData().attributeData),shows:{name:t?t.mName:"",id:e,shows:[GameGlobal.PetTonglModel.mDressId,GameGlobal.PetShouhModel.mDressId]}}),i}},t.CopyAttr=function(e){for(var t=[],i=0,o=e;i<o.length;i++){var n=o[i];t[n.type]=n.value}for(var a=0;a<AttributeType.atCount;a++)t[a]||(t[a]=0);return t[AttributeType.atHp]=t[AttributeType.atMaxHp],t},t.GetXianlv=function(e){var t=GameGlobal.XianlvModel.mBattleList[e];if(t){var i=GameGlobal.XianlvModel.GetXianlvInfo(t),o=new EntityXianlv,n=MonstersConfig.GetHandle();return o.parserBase({type:EntityType.Xianlv,handler:n,monid:t,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(SubRoles.ins().GetRoleData().attributeData),shows:{id:t,shows:[GameGlobal.XianlvFzModel.mDressId,GameGlobal.XianlvXwModel.mDressId]}}),o.skillsData=[i.GetSkillId()],o}},t.GetXianjun=function(){var e=GameGlobal.XianJunModel.GetShowId();if(e){var t=GameGlobal.XianJunModel.GetXianJunInfo(e),i=new EntityXianjun,o=MonstersConfig.GetHandle();return i.parserBase({type:EntityType.Xianlv,handler:o,monid:e,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(SubRoles.ins().GetRoleData().attributeData),shows:{id:e}}),i.skillsData=t.GetSkillIds(),i}},t.prototype.GetTiannv=function(){if(!GameGlobal.HavingModel.IsDeblocking())return null;if(!GameGlobal.HavingModel.mLevel)return null;var e=new EntityTiannv,t=MonstersConfig.GetHandle();return e.parserBase({type:EntityType.Tiannv,handler:t,monid:0,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(SubRoles.ins().GetRoleData().attributeData),shows:{shows:[GameGlobal.HavingModel.mDressId,GameGlobal.HavingLingqModel.mDressId,GameGlobal.HavingHuanModel.mDressId]}}),e.skillsData=GameGlobal.HavingModel.GetSkillIds(),e},t.GetTianshen=function(){var e=GameGlobal.TianShenModel.mBattleID;if(!e)return null;var t=GameGlobal.TianShenModel.mTianShenList[e];if(!t)return null;var i=new EntityTianshen,o=MonstersConfig.GetHandle();return i.parserBase({type:EntityType.Shenjiang,handler:o,monid:e,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(SubRoles.ins().GetRoleData().attributeData),shows:{id:e,shows:[t.mFeisLevel]}}),i},t.CreateLingtong=function(){if(!GameGlobal.LingtongAttrModel.IsActive())return null;var e=new EntityLingtong,t=MonstersConfig.GetHandle();return e.parserBase({type:EntityType.Lingtong,handler:t,monid:0,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(SubRoles.ins().GetRoleData().attributeData),shows:{id:GameGlobal.LingtongAttrModel.mSex}}),e.skillsData=CommonUtils.copyDataHandler(GameGlobal.LingtongAttrModel.GetCurSkill()),e},t.GetMyRole=function(){var e=SubRoles.ins().GetRoleData();if(!e)return null;var t=new EntityRole,i=GameGlobal.actorModel.actorID;return t.parserBase({type:EntityType.Role,handler:i,monid:0,ownerid:GameGlobal.actorModel.actorID,attrs:CommonUtils.copyDataHandler(e.attributeData),shows:{pingji:GameGlobal.actorModel.pingji,name:GameGlobal.actorModel.name,shows:[GameGlobal.UserRide.mDressId,GameGlobal.UserWing.mDressId,GameGlobal.TianxModel.mDressId,GameGlobal.SwordModel.mDressId,GameGlobal.UserSkin.getWearId(),GameGlobal.UserTitle.getWearId()],job:e.job,sex:e.sex}}),t.skillsData=CommonUtils.copyDataHandler(e.GetCurSkillSortIds()),t},t.POS_ARR=[8,3,7,9,6,10,2,4,1,5],t}(BattleRaid);__reflect(NormalBattleRaid.prototype,"NormalBattleRaid");var NormalMapRaid=function(e){function t(){var t=e.call(this)||this;return t.m_ExitTime=0,t.m_CheckTime=1,t.mCreateFlag=0,t.mCreateOther=1500,t.mCreateCount=4,t.mMonsterMap={},t.mMonsterPosMap={},t.mRefMonDatas=[],t.m_ShowRidePids=[],t.m_ShowWingPids=[],t.m_ShowTianxPids=[],t.m_ShowSwordPids=[],t.m_ShowPids=[],t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),GameGlobal.MessageCenter.addListener(MessageDef.DAILY_FOMALHAUT_MONSTERID,this.UpdateMonsterInfo,this),this.UpdateMonsterInfo(),this.mCreateFlag=0,this.mCreateCount=GameGlobal.UserFb.guanqiaID<=50?6:4;try{for(var t=GameGlobal.UserFb.config.waveMonsterId,i=0,o=t;i<o.length;i++){var n=o[i],a=ResDataPath.GetMoviePath(AppearanceConfig.GetAppe(n.avatar));EntityMovieObject.Ref(a),this.mRefMonDatas.push(a)}}catch(r){console.error(r)}},t.prototype.AddToMap=function(e){this.GetMapEntityView().AddEntity(e)},t.prototype.GetSceneId=function(){return GameGlobal.UserFb.config.sid},t.prototype.GetNextTime=function(){var e=15,t=GameGlobal.Config.ScenesConfig[this.GetSceneId()];return t&&t.interval&&(e=t.interval||15),1e3*Math.max(this.m_ExitTime+e-GameServer.serverTime,5)},t.prototype.Update=function(t){e.prototype.Update.call(this,t),this.m_CheckTime>0&&(this.m_CheckTime-=t)<=0&&this.InnerEnterBattle(),this.mCreateFlag<this.mCreateCount&&(0==this.mCreateFlag?(this.mCreateFlag++,this.CreateMyRole()):this.mCreateOther>0&&(this.mCreateOther-=t)<=0&&(this.mCreateFlag++,this.CreateOtherRole(),this.mCreateOther=1500))},t.prototype.CreateEntity=function(e){return console.log("normal map create entity !!!"),null},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.m_CheckTime=this.GetNextTime()},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),this.m_ExitTime=GameServer.serverTime},t.prototype.Clear=function(){e.prototype.Clear.call(this),this.m_ExitTime=0,this.mCreateFlag=0,this.mCreateOther=1e3;for(var t=0,i=this.mRefMonDatas;t<i.length;t++){var o=i[t];EntityMovieObject.Unref(o)}this.mRefMonDatas=[]},t.prototype.CreateMyRole=function(){var e=[],t=NormalBattleRaid.GetMyRole();if(t){var i=GameGlobal.Config.ScenesConfig[this.GetSceneId()];i&&(t.x=Const.PosToPixel(i.enterX),t.y=Const.PosToPixel(i.enterY)),e.push(t),GameGlobal.PetModel.GetShowId()&&e.push(this.CreatePet(GameGlobal.PetModel.GetShowId(),t.handle));var o=GameGlobal.XianlvModel.GetXianlvId();o&&e.push(this.CreateXianlv(o,t.handle));var n=GameGlobal.XianJunModel.GetXianJunId();if(n&&e.push(this.CreateXianJun(n,t.handle)),GameGlobal.HavingModel.IsDeblocking()){var a=GameGlobal.HavingModel.mDressId;a&&e.push(this.CreateTiannv(GameGlobal.HavingModel.mDressId,t.handle))}var r=NormalBattleRaid.GetTianshen();r&&e.push(r),this.AddTeam(GameGlobal.actorModel.actorID,e)}},t.prototype.GetRobotPid=function(e,t){var i;return t&&t.length>=2&&(i=t[MathUtils.limitInteger(0,t.length-1)]),null!=i&&(i=Math.min(0+MathUtils.limitInteger(0,e.mLevel),e.mLevel),t&&-1==t.indexOf(i)&&t.push(i)),i},t.prototype.CreateOtherRole=function(){var e=[],t=(SubRoles.ins().GetRoleData(),MathUtils.limitInteger(1,3)),i=new EntityRole,o=MonstersConfig.GetHandle(),n=(this.mCreateCount>4,this.GetRobotPid(GameGlobal.UserRide,this.m_ShowRidePids)),a=this.GetRobotPid(GameGlobal.UserWing,this.m_ShowWingPids),r=this.GetRobotPid(GameGlobal.TianxModel,this.m_ShowTianxPids),s=this.GetRobotPid(GameGlobal.SwordModel,this.m_ShowSwordPids);n||(s=0,a=0);var l,c=GameGlobal.UserTitle.getOwnList();if(c&&c.length){var u=c[MathUtils.limit(0,c.length-1)];u&&(l=u.id)}l||(l=0);var p=GameGlobal.Config.RobotNameConfig[GameGlobal.actorModel.sex][MathUtils.limitInteger(0,49)];if(i.parserBase({type:EntityType.Role,handler:o,monid:0,ownerid:o,attrs:[],shows:{name:p?p.name:"",shows:[n,a,r,s,0,l],job:t,sex:MathUtils.limitInteger(0,1)}}),i.skillsData=[],e.push(i),this.m_ShowPids.length>=3)e.push(this.CreateOtherPet(this.m_ShowPids[MathUtils.limitInteger(0,this.m_ShowPids.length-1)],o));else{var h=this.getRamNum(this.petArry());h&&(-1==this.m_ShowPids.indexOf(h)&&this.m_ShowPids.push(h),e.push(this.CreateOtherPet(h,o)))
}if(this.mCreateFlag<=4){var d=this.getRamNum(this.xlArry());d&&e.push(this.CreateOtherXianlv(d,o))}this.AddTeam(o,e)},t.prototype.petArry=function(){var e=GameGlobal.Config.petBiographyConfig,t=[],i=GameGlobal.PetModel.mPetList;for(var o in i)i[Number(o)].mLevel>0&&e[Number(o)].type<2&&t.push(Number(o));return t},t.prototype.xlArry=function(){var e=GameGlobal.Config.partnerBiographyConfig,t=[],i=GameGlobal.XianlvModel.mXianlvList;for(var o in i)i[Number(o)].mLevel>0&&e[Number(o)].quality<5&&t.push(Number(o));return t},t.prototype.getRamNum=function(e){var t=e;return t[Math.floor(Math.random()*t.length)]},t.prototype.CreateOtherXianlv=function(e,t){var i=new EntityXianlv,o=this.GetRobotPid(GameGlobal.XianlvXwModel,null),n=this.GetRobotPid(GameGlobal.XianlvFzModel,null);return i.parserBase({type:EntityType.Xianlv,handler:MonstersConfig.GetHandle(),ownerid:t,shows:{id:e,shows:[n,o]}}),i},t.prototype.CreateOtherPet=function(e,t){var i=new EntityPet;return i.parserBase({type:EntityType.Pet,handler:MonstersConfig.GetHandle(),ownerid:t,shows:{id:e}}),i},t.prototype.CreateTeam=function(){return new NormalMoveTeam},t.prototype.InnerEnterBattle=function(){GameGlobal.UserFb.CheckAutoPKBoss()||SubRoles.ins().GetRoleData()&&GameGlobal.RaidMgr.EnterNormalBattle()},t.prototype.CreatePet=function(e,t){var i=new EntityPet,o=GameGlobal.PetModel.GetPetInfo(e);return i.parserBase({type:EntityType.Pet,handler:MonstersConfig.GetHandle(),ownerid:t,shows:{id:e,name:o?o.mName:"",shows:[GameGlobal.PetTonglModel.mDressId,GameGlobal.PetShouhModel.mDressId]}}),i},t.prototype.CreateXianlv=function(e,t){var i=new EntityXianlv;return i.parserBase({type:EntityType.Xianlv,handler:MonstersConfig.GetHandle(),ownerid:t,shows:{id:e,shows:[GameGlobal.XianlvFzModel.mDressId,GameGlobal.XianlvXwModel.mDressId]}}),i},t.prototype.CreateXianJun=function(e,t){var i=new EntityXianjun;return i.parserBase({type:EntityType.Xianjun,handler:MonstersConfig.GetHandle(),ownerid:t,shows:{id:e}}),i},t.prototype.CreateTiannv=function(e,t){var i=new EntityTiannv;return i.parserBase({type:EntityType.Tiannv,handler:MonstersConfig.GetHandle(),ownerid:t,shows:{shows:[e,GameGlobal.HavingLingqModel.mDressId,GameGlobal.HavingHuanModel.mDressId]}}),i},t.prototype.GetOwnEntity=function(e){var t=SubRoles.ins().GetRoleData().handle,i=GameGlobal.actorModel.actorID;for(var o in this.mEntityList){var n=this.mEntityList[o],a=n.GetInfo();if(a.type==e&&a.masterHandle){var r=this.mEntityList[a.masterHandle];if(r){var s=r.GetHandle();if(s==t||s==i)return n}}}return null},t.prototype.UpdateRolePet=function(e){if(this.IsCreateMy()){var t=SubRoles.ins().GetRoleData().handle,i=this.GetOwnEntity(EntityType.Pet);i?e?(i.GetInfo().configID=e,i.UpdateInfo()):this.RemoveEntity(i.GetHandle()):e&&this.AddEntityToTeamByHandle(GameGlobal.actorModel.actorID,this.CreatePet(e,t))}},t.prototype.UpdateRolePetTongl=function(e){var t=this.GetOwnEntity(EntityType.Pet);t&&(t.GetInfo().mTlId=UserTemplate.GetAppaId(GameGlobal.PetTonglModel.SkinConfig,e),t.UpdateInfo())},t.prototype.UpdateRolePetShouh=function(e){var t=this.GetOwnEntity(EntityType.Pet);t&&(t.GetInfo().mShId=UserTemplate.GetAppaId(GameGlobal.PetShouhModel.SkinConfig,e),t.UpdateInfo())},t.prototype.UpdateRoleXianlv=function(e){var t=SubRoles.ins().GetRoleData().handle,i=this.GetOwnEntity(EntityType.Xianlv);i?e?(i.GetInfo().configID=e,i.UpdateInfo()):this.RemoveEntity(i.GetHandle()):e&&this.AddEntityToTeamByHandle(GameGlobal.actorModel.actorID,this.CreateXianlv(e,t))},t.prototype.UpdateRoleXianJun=function(e){var t=SubRoles.ins().GetRoleData().handle,i=this.GetOwnEntity(EntityType.Xianjun);i?e?(i.GetInfo().configID=e,i.UpdateInfo()):this.RemoveEntity(i.GetHandle()):e&&this.AddEntityToTeamByHandle(GameGlobal.actorModel.actorID,this.CreateXianJun(e,t))},t.prototype.UpdateRoleXianlvFz=function(e){var t=this.GetOwnEntity(EntityType.Xianlv);t&&(t.GetInfo().mFazId=UserTemplate.GetAppaId(GameGlobal.XianlvFzModel.SkinConfig,e),t.UpdateInfo())},t.prototype.UpdateRoleXianlvXw=function(e){var t=this.GetOwnEntity(EntityType.Xianlv);t&&(t.GetInfo().mXianwId=UserTemplate.GetAppaId(GameGlobal.XianlvXwModel.SkinConfig,e),t.UpdateInfo())},t.prototype.UpdateRoleTiannv=function(){if(this.IsCreateMy()){var e=SubRoles.ins().GetRoleData().handle,t=this.GetOwnEntity(EntityType.Tiannv);if(t)console.log("not imple create UpdateRoleTiannv");else{var i=GameGlobal.HavingModel.mDressId;i&&this.AddEntityToTeamByHandle(GameGlobal.actorModel.actorID,this.CreateTiannv(GameGlobal.HavingModel.mDressId,e))}}},t.prototype.IsCreateMy=function(){return null!=this.mEntityList[SubRoles.ins().GetRoleData().handle]},t.prototype.UpdateRoleTiannvLq=function(e){var t=this.GetOwnEntity(EntityType.Tiannv);t&&(t.GetInfo().mLq=UserTemplate.GetAppaId(GameGlobal.HavingLingqModel.SkinConfig,e),t.UpdateInfo())},t.prototype.UpdateRoleTiannvHua=function(e){var t=this.GetOwnEntity(EntityType.Tiannv);t&&(t.GetInfo().mHua=UserTemplate.GetAppaId(GameGlobal.HavingHuanModel.SkinConfig,e),t.UpdateInfo())},t.prototype.UpdateRoleTianshen=function(e){var t=(SubRoles.ins().GetRoleData().handle,this.GetOwnEntity(EntityType.Shenjiang));t?e?(t.GetInfo().configID=e,t.GetInfo().fly=UserTemplate.GetAppaId(GameGlobal.XianlvXwModel.SkinConfig,GameGlobal.TianShenModel.mTianShenList[GameGlobal.TianShenModel.mBattleID].mFeisLevel),t.UpdateInfo()):this.RemoveEntity(t.GetHandle()):e&&this.AddEntityToTeamByHandle(GameGlobal.actorModel.actorID,NormalBattleRaid.GetTianshen())},t.prototype.UpdateMonsterInfo=function(){this._ResetMapEntity();for(var e=GameGlobal.DailyModel.GetMonsterList(),t=0,i=e;t<i.length;t++){var o=i[t];this.CreateMyMonster(o)}},t.prototype.CreateMyMonster=function(e,t){t||(t=this._GetRandomPos());var i=GameGlobal.RaidMgr.mMapRaid.CreateMonster(e,Const.PosToPixel(t.x),Const.PosToPixel(t.y));i.SetClick(!1);var o=i.GetHandle();this.mMonsterMap[o]=e;var n=t.x+"_"+t.y;this.mMonsterPosMap[n]=o},t.prototype._GetRandomPos=function(){for(var e=new egret.Point;;){var t=Math.floor(GameMap.COL/2),i=Math.floor(GameMap.ROW/2);GameMap.GetRandomPos(t,i,t-2,i-2,e);var o=e.x+"_"+e.y;if(!this.mMonsterPosMap[o])return e}},t.prototype.OnEntityClick=function(e){var t=this.mMonsterMap[e],i=GameGlobal.DailyModel.GetTaskIndex(t);-1!=i&&ViewManager.ins().open(DailyFomalhautTaskPanel,i)},t.prototype._ResetMapEntity=function(){for(var e in this.mMonsterMap){var t=parseInt(e);this.RemoveEntity(t)}this.mMonsterMap={},this.mMonsterPosMap={}},t.REFRESH_TIME=8e3,t}(MapRaid);__reflect(NormalMapRaid.prototype,"NormalMapRaid");var BattleRaidPubBoss=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.ShowBattleLayer=function(){e.prototype.ShowBattleLayer.call(this);var t=ViewManager.ins().getView(GameBattlePanel);this.view||(this.view=new GameBattlePubBossView),t.AddChildBaseView(this.view),this.view.UpdateHp(0,0)},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.UpdateHp()},t.prototype.UpdateHp=function(){if(this.mBossHandle){var e=this.GetEntity(this.mBossHandle);if(e){var t=e.GetInfo();this.view&&this.view.UpdateHp(t.getAtt(AttributeType.atHp),t.getAtt(AttributeType.atMaxHp))}}},t.prototype.OnEventDamage=function(e){this.mBossHandle&&this.mBossHandle==e&&this.UpdateHp()},t}(BattleRaid);__reflect(BattleRaidPubBoss.prototype,"BattleRaidPubBoss");var MapCloudNine=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this);var t=ViewManager.ins().getView(GameMapPanel);t.setOnLeaveDlgStr("退出后进入冷却时间"+GameGlobal.Config.ClimbTowerBaseConfig.cd+"秒"),this.view||(this.view=new CloudNineSceneView),this.AddView(this.view)},t.prototype.GetEntityNameStyle=function(e){return this.GetEntityNameStyleSvr(e)},t.prototype.OnEntityClick=function(e){if(GameGlobal.CloudNineModel.checkPk(e))GameGlobal.UserTips.showTips("目标战斗中");else{var t=GameGlobal.CloudNineModel.getMonsterServersId(e);t?GameGlobal.CloudNineModel.checkPk(t)?GameGlobal.UserTips.showTips("目标战斗中"):GameGlobal.CloudNineModel.sendPk(t):GameGlobal.CloudNineModel.sendPk(e)}},t.prototype.Create=function(t){var i=e.prototype.Create.call(this,t);return i&&i.SetClick(),i},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),ViewManager.ins().close(CloudNineSceneView)},t.prototype.Clear=function(){e.prototype.Clear.call(this)},t.prototype.OnLeave=function(){GameGlobal.CloudNineModel.sendLeave()},t}(CommonMapRaid);__reflect(MapCloudNine.prototype,"MapCloudNine");var MapRaidAcrossBoss=function(e){function t(){var t=e.call(this)||this;return t.mIsShowGuild=!0,t.m_HelpId=20,t.mAcrossBossBox={},t.mSelList=[],t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.GetRebornData=function(){return GameGlobal.Config.KfBossBaseConfig.revivecost},t.prototype.UpdateSel=function(e,t){this.mSelList=t,0==e?this.HideBoss():2==e&&this.AutoChallenge()},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.mPreState=GameGlobal.AcrossBossController.status;var t=new AcrossBossSceneView(this);this.AddView(t),this.SetRebornCheckbox(t.checkBox3),GameGlobal.MessageCenter.addListener(MessageDef.KF_BOSS_BOX,this.UpdateBox,this),GameGlobal.MessageCenter.addListener(MessageDef.KF_BOSS_BOX_COLLENT,this.UpdateBoxBar,this),GameGlobal.MessageCenter.addListener(MessageDef.KF_BOSS_UPDATE_INFO,this.UpdateState,this),GameGlobal.MessageCenter.addListener(MessageDef.KF_BOSS_DEAD,this.UpdateDead,this),this.UpdateBox(!0),this.UpdateBoxBar();var i=GameGlobal.AcrossBossController.status;i==AcrossBossState.BOSS?this.CreateBossModel():i==AcrossBossState.KILL&&this.RemoveBoss(),this.UpdateDead()},t.prototype.Create=function(t){var i=e.prototype.Create.call(this,t);return i&&i.SetClick(),i},t.prototype.GetEntityNameStyle=function(e){return this.GetEntityNameStyleSvr(e)},t.prototype.MoveOrder=function(t,i,o,n){void 0===n&&(n=0);var a=e.prototype.MoveOrder.call(this,t,i,o,n),r=GameGlobal.AcrossBossController.mCollectNow;for(var s in r)for(var l=0,c=r[s];l<c.length;l++){var u=c[l];if(u.playerid==GameGlobal.actorModel.actorID)return GameGlobal.AcrossBossController.RemoveCollentBox(),a}return a},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),GameGlobal.MessageCenter.removeAll(this)},t.prototype.Clear=function(){e.prototype.Clear.call(this);var t=this.mAcrossBossBox;for(var i in t)t[i].DoRemoved(),delete t[i];this.mAcrossBossBox={},this.mBossHandle=0,GameGlobal.AcrossBossController.ClearData()},t.prototype.UpdateState=function(){var e=GameGlobal.AcrossBossController.status;this.mPreState<AcrossBossState.BOSS&&e==AcrossBossState.BOSS?(this.CreateBossModel(),this.AutoChallenge()):e==AcrossBossState.KILL&&this.RemoveBoss(),this.mPreState=e},t.prototype.RemoveBoss=function(){this.mBossHandle&&(this.RemoveEntity(this.mBossHandle),this.mBossHandle=null)},t.prototype.CreateBossModel=function(){if(!this.mBossHandle){var e=GameGlobal.Config.KfBossBaseConfig,t=this.CreateMonster(e.bossid,e.bossbron[0],e.bossbron[1]);t&&(this.mBossHandle=t.GetHandle(),t.SetClick(),this.mSelList[0]&&(t.visible=!1))}},t.prototype.OnPreEntityClick=function(e){var t=this.GetEntity(e);return t&&t.m_Info&&t.m_Info.guildID==GameGlobal.actorModel.guildID?(UserTips.InfoTip("不能挑战同帮会玩家"),!1):!0},t.prototype.OnEntityClick=function(e){var t=this.GetEntity(e);t&&this.MoveOrder(e,t.x,t.y)},t.prototype.UpdateBox=function(e){void 0===e&&(e=!1);var t=GameGlobal.AcrossBossController.mBox,i=this.mAcrossBossBox;for(var o in i)t[o]||(i[o].DoRemoved(),delete i[o]);for(var o in t)if(!i[o]){var n=i[o]=new AcrossBossBox(t[o],GameGlobal.Config.KfBossBaseConfig.coltime);n.OnAdded(e)}},t.prototype.OnMoveLeval=function(e,t,i,o){if(GameGlobal.actorModel.actorID==t){var n=this.mAcrossBossBox[e];if(n)return void GameGlobal.AcrossBossManage.sendCollectBox(e);if(this.mBossHandle==e)return void GameGlobal.AcrossBossManage.sendChallenge(null);var a=this.GetEntity(e);return a?void GameGlobal.AcrossBossManage.sendChallenge(e):void 0}},t.prototype.GetMyBoxBar=function(){var e=GameGlobal.actorModel.actorID,t=GameGlobal.AcrossBossController.mCollectNow;for(var i in t)for(var o=0,n=t[i];o<n.length;o++){var a=n[o];if(a.playerid==e&&a.time>GameServer.serverTime)return a.time}return null},t.prototype.UpdateBoxBar=function(){var e=GameGlobal.AcrossBossController.mCollectNow,t=this.mAcrossBossBox;for(var i in t){var o=t[i];e[i]?o.ShowBars(e[i]):o.RemoveBar()}},t.prototype.GetRebornYb=function(){return GameGlobal.Config.KfBossBaseConfig.revivecost},t.prototype.SendRelive=function(){GameGlobal.AcrossBossManage.sendRelive()},t.prototype.UpdateDead=function(){var e=GameGlobal.AcrossBossController.GetDeadTime();e>0?this.ShowRebornView(e):(this.RemoveRebornView(),this.AutoChallenge())},t.prototype.AutoChallenge=function(){this.mSelList[2]&&this.mBossHandle&&this.OnEntityClick(this.mBossHandle)},t.prototype.HideBoss=function(){var e=this.GetEntity(this.mBossHandle);e&&(e.visible=this.mSelList[0]?!1:!0)},t}(CommonMapRaid);__reflect(MapRaidAcrossBoss.prototype,"MapRaidAcrossBoss");var MapRaidCity=function(e){function t(){var t=e.call(this)||this;return t.mIsOpen=!1,t.mNpcMap={},t.m_CreateGapSetting=.2,t}return __extends(t,e),t.prototype.IsBackground=function(){return GameGlobal.RaidMgr.mShowType!=RaidMgr.TYPE_CITY},t.prototype.DoEnter=function(){this.OnOpen()},t.prototype.DoExit=function(){},t.prototype.OnShowView=function(){},t.prototype.OnHideView=function(){},t.prototype.OnBackground=function(){e.prototype.OnBackground.call(this),ViewManager.ins().close(GameCityPanel),GameGlobal.MessageCenter.removeAll(this),this.mIsOpen=!1},t.prototype.OnForeground=function(){e.prototype.OnForeground.call(this),this.OnOpen()},t.prototype.OnOpen=function(){this.mIsOpen||(this.mIsOpen=!0,ViewManager.ins().open(GameCityPanel),GameGlobal.MessageCenter.addListener(MessageDef.MAIN_CITY_INFO,this._UpdateInfo,this),this._UpdateInfo())},t.prototype.GetMapEntityView=function(){return GameMap.GetMap().mCityEntityView},t.prototype._UpdateInfo=function(){this.CreateNpcList();var e=GameGlobal.CommonRaidModel.mMainCityInfo;if(e&&0==e.championid){var t=GameGlobal.Config.CityBaseConfig.onepos;this.mTheTipHandle=this.CreateImage("ui_zjm_bm_zhanlidiyi",t[0]-85,t[1]-90)}if(e&&e.championid&&e.shows)if(e.shows.shows[RoleShowDataType.ROLE_TITLE]=1902,this.mWorshipModel){var i=new EntityRole;i.parserBase({shows:e.shows}),this.mWorshipModel.UpdateInfo(i)}else{var o=new MapNpcEntity,i=new EntityRole;i.parserBase({shows:e.shows}),o.UpdateInfo(i);var t=GameGlobal.Config.CityBaseConfig.onepos;this.mTheFirstHandle=this.CreateObject(o,t[0],t[1]),o.SetDir(5),o.UpdateAction(EntityClipType.STAND,!1),this.mWorshipModel=o}},t.prototype.Create=function(t){var i=e.prototype.Create.call(this,t);return i&&i.SetClick(!1),i},t.prototype.OnEntityClick=function(e){if(e==this.mTheTipHandle)return void UserTips.ins().showTips("全服战力第一，每天24:00刷新");if(e==this.mTheFirstHandle)return void ViewManager.ins().open(TheFirstPlayerTipWin);var t=this.GetNpcId(e);if(-1!=t)return void ViewManager.ins().open(NpcDialogPopWin,t);var i=this.GetEntity(e);this.OnMapClick(i.$getX(),i.$getY()),GameGlobal.MessageCenter.dispatch(MessageDef.PLAYER_VIEW_ONCITYMAP,e),GameGlobal.PlayerInfoModel.sendOtherId(e)},t.prototype.CreateNpcList=function(){for(var e in GameGlobal.Config.CityNpcConfig){var t=GameGlobal.Config.CityNpcConfig[e];if(!this.mNpcMap[t.id]){var i=this.CreateMonster(t.npcid,t.npcpos[0],t.npcpos[1]);this.mNpcMap[t.id]=i.GetHandle()}}},t.prototype.GetNpcId=function(e){for(var t in this.mNpcMap)if(this.mNpcMap[t]==e)return parseInt(t);return-1},t.prototype.RemoveAllEntity=function(){e.prototype.RemoveAllEntity.call(this),this.mNpcMap={}},t}(CommonMapRaid);__reflect(MapRaidCity.prototype,"MapRaidCity");var MapRaidCrossBattle=function(e){function t(){var t=e.call(this)||this;return t.m_HelpId=23,t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),GameMap.GetMap().addMapCity()},t.prototype.Clear=function(){e.prototype.Clear.call(this),GameMap.GetMap().removeMapCity(),GameGlobal.ViewManagerImpl.Destroy(CrossBattleWin)},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),GameGlobal.MessageCenter.addListener(MessageDef.FUHUO_UPDATE_INFO,this._DoFuHuoUpData,this),this._DoFuHuoUpData(),GameGlobal.ViewManagerImpl.Open(CrossBattleWin);var t=this.GetGameMapPanel();t&&(t.helpBtn.y=230)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),GameGlobal.ViewManagerImpl.Close(CrossBattleWin),GameGlobal.MessageCenter.removeAll(this)},t.prototype.GetRebornYb=function(){return GameGlobal.Config.KingBaseConfig.revivecost},t.prototype.SendRelive=function(){GameGlobal.CrossBattleModel.fuHuo()},t.prototype._DoFuHuoUpData=function(){var e=GameGlobal.CrossBattleModel.GetDeadTime();e>0?this.ShowRebornView(e):this.RemoveRebornView()},t.prototype.MoveOrder=function(t,i,o){return 3==GameGlobal.CrossBattleModel.status?void UserTips.ErrorTip("无法移动，处于死亡状态"):4==GameGlobal.CrossBattleModel.status?void UserTips.ErrorTip("无法移动，处于守城状态"):(GameGlobal.MessageCenter.dispatch(MessageDef.MOVE_UPDATE_INFO,i,o),e.prototype.MoveOrder.call(this,t,i,o))},t.prototype.Create=function(t){var i=e.prototype.Create.call(this,t);return i&&i.SetClick(),GameGlobal.CrossBattleModel.DelayAddfightingIcon(),i},t.prototype.OnEntityClick=function(e){return 1==GameGlobal.CrossBattleModel.status||1==GameGlobal.CrossBattleModel.getPlayerStatus(e)?void UserTips.ErrorTip("活动未开始，请在出生点等待"):3==GameGlobal.CrossBattleModel.status||3==GameGlobal.CrossBattleModel.getPlayerStatus(e)?void UserTips.ErrorTip("无法攻击，处于死亡状态"):4==GameGlobal.CrossBattleModel.status||4==GameGlobal.CrossBattleModel.getPlayerStatus(e)?void UserTips.ErrorTip("无法攻击，处于守城状态"):void GameGlobal.CrossBattleModel.freePk(e)},t.prototype.OnMoveLeval=function(e,t,i,o){GameGlobal.CrossBattleModel.getCity(e,t)},t.prototype.OnLeave=function(){GameGlobal.CrossBattleModel.kingLeave(),GameGlobal.CrossBattleTeamModel.mTeamInfo.Clear()},t.prototype.UpdatePlayerStatus=function(e,t){},t.prototype.GetTeamModel=function(){return GameGlobal.CrossBattleTeamModel},t}(CommonMapRaid);__reflect(MapRaidCrossBattle.prototype,"MapRaidCrossBattle");var MapRaidGangBattle=function(e){function t(t){var i=e.call(this)||this;return i.mIsShowGuild=!0,i.mBossMap={},i.mType=t,i}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),this.CreateBoss(),this.CreateDragonGuard(),GameGlobal.MessageCenter.addListener(MessageDef.GANGBATTLE_UPDATE_KINGINFO,this.SetKingBossHide,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGBATTLE_UPDATE_MYINFO,this.RemoveDragon,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGBATTLE_SHOW_GUARDTIP,this.CreateDragonGuard,this),GameGlobal.MessageCenter.addListener(MessageDef.UPDATE_TEAM_MAIN_INFO,this.DelayUpdateTeam,this),GameGlobal.GangBattleTeamModel.SendGetMyTeamInfos()},t.prototype.OnEnter=function(){if(e.prototype.OnEnter.call(this),!this.view)switch(this.mType){case t.GANG_BATTLE_TYPE_OUTSIDER:this.view=GBattleOutsiderScieneWin;break;case t.GANG_BATTLE_TYPE_DRAGON:this.view=GBattleDragonScieneWin;break;case t.GANG_BATTLE_TYPE_TEMPLE:this.view=GBattleTempleScieneWin}GameGlobal.ViewManagerImpl.Open(this.view);var i=this.GetGameMapPanel();i&&i.showReturnBtn(!1),this.UpdateReborn()},t.prototype.OnMapClick=function(t,i){return GameGlobal.MessageCenter.dispatch(MessageDef.MOVE_UPDATE_INFO,t,i),e.prototype.OnMapClick.call(this,t,i)},t.prototype.CreateBoss=function(){if(this.mType!=t.GANG_BATTLE_TYPE_OUTSIDER){if(this.mType!=t.GANG_BATTLE_TYPE_TEMPLE&&!GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_DRAGON)){var e=GameGlobal.Config.GuildBattleBaseConfig.sboss_bronpos,i=GameGlobal.Config.GuildBattleBaseConfig.sbossid,o=GameGlobal.RaidMgr.mMapRaid.CreateMonster(i,e[0],e[1]);o.SetClick();var n=o.GetHandle();this.mBossMap[n]=this.mType}}else for(var a=GangBattleConst.GetKingList(),r=0,s=a;r<s.length;r++){var l=s[r],c=GameGlobal.RaidMgr.mMapRaid.CreateMonster(l.bossid,l.pos[0],l.pos[1]);c.SetClick();var u=c.GetHandle();this.mBossMap[u]=l.id}},t.prototype.Create=function(t){var i=e.prototype.Create.call(this,t);return i&&i.SetClick(),i},t.prototype.OnEntityClick=function(e){var i=this.mBossMap[e];if(i)return i==t.GANG_BATTLE_TYPE_TEMPLE?void ViewManager.ins().open(GBattleDragonGuardWin):GameGlobal.GangBattleModel.IsKingAlive(i)?i==t.GANG_BATTLE_TYPE_DRAGON&&GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_DRAGON)?void UserTips.ins().showTips("BOSS已经死亡"):void GameGlobal.GangBattleModel.SendAttackBoss(i):void UserTips.ins().showTips("BOSS未复活");var o=this.mEntityList[e];return o.GetInfo().guildID==GameGlobal.actorModel.guildID?void UserTips.ins().showTips("不可攻击同帮会玩家"):void GameGlobal.GangBattleModel.SendAttackPlayer(e)},t.prototype.OnMoveLeval=function(e,t,i,o){var n=e;GameGlobal.GangBattleModel.IsKingAlive(n)&&GameGlobal.GangBattleModel.SendAttackBoss(n)},t.prototype.SetKingBossHide=function(){var e=this,t=function(t){var o=parseInt(t),n=i.mBossMap[o];if(!GameGlobal.GangBattleModel.IsKingAlive(n)){i.RemoveEntity(o),i.mBossMap[o]=null;var a=GameGlobal.GangBattleModel.GetKingRebornDiffTime(n);TimerManager.ins().doTimer(1e3*a,1,function(){var t=GangBattleConst.GetKingConfig(n),i=GameGlobal.RaidMgr.mMapRaid.CreateMonster(t.bossid,t.pos[0],t.pos[1]);i.SetClick();var o=i.GetHandle();e.mBossMap[o]=t.id},i)}},i=this;for(var o in this.mBossMap)t(o)},t.prototype.RemoveDragon=function(){for(var e in this.mBossMap)if(t.GANG_BATTLE_TYPE_DRAGON==this.mBossMap[e]&&GameGlobal.GangBattleModel.IsBroken(GangBattleModel.ACTIVE_TYPE_DRAGON)){var i=parseInt(e);this.RemoveEntity(i),this.mBossMap[i]=null;break}},t.prototype.CreateDragonGuard=function(){var e=this;if(this.mType==t.GANG_BATTLE_TYPE_TEMPLE){var i=GameGlobal.GangBattleModel.mGuardShowTime;if(i){var o=Math.max(i-GameServer.serverTime,0);TimerManager.ins().doTimer(1e3*o,1,function(){var t=GameGlobal.Config.GuildBattleBaseConfig.lboss_bronpos,i=GameGlobal.Config.GuildBattleBaseConfig.lbossid,o=GameGlobal.RaidMgr.mMapRaid.CreateMonster(i,t[0],t[1]);o.SetClick();var n=o.GetHandle();e.mBossMap[n]=e.mType},this)}}},t.prototype.UpdateReborn=function(){var e=GameGlobal.GangBattleModel.GetRebornTime();e>0?this.ShowRebornView(e):this.RemoveRebornView()},t.prototype.GetRebornYb=function(){return GameGlobal.Config.GuildBattleBaseConfig.revivecost},t.prototype.SendRelive=function(){GameGlobal.GangBattleModel.SendClearRebornCD()},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),GameGlobal.ViewManagerImpl.Close(this.view)},t.prototype.Clear=function(){e.prototype.Clear.call(this),GameGlobal.MessageCenter.removeAll(this),TimerManager.ins().removeAll(this),GameGlobal.ViewManagerImpl.Destroy(this.view),this.view=null},t.prototype.GetTeamModel=function(){return GameGlobal.GangBattleTeamModel},t.GANG_BATTLE_TYPE_OUTSIDER=100004,t.GANG_BATTLE_TYPE_DRAGON=100005,t.GANG_BATTLE_TYPE_TEMPLE=100006,t}(CommonMapRaid);__reflect(MapRaidGangBattle.prototype,"MapRaidGangBattle");var MapRaidGangBoss=function(e){function t(){var t=e.call(this)||this;return t.mIsShowGuild=!0,t.m_HelpId=31,t.mAcrossBossBox={},t.mSelList=[],t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this)},t.prototype.GetRebornData=function(){return GameGlobal.Config.GuildBossBaseConfig.revivecost},t.prototype.UpdateSel=function(e,t){this.mSelList=t,0==e?this.HideBoss():2==e&&this.AutoChallenge()},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.mPreState=GameGlobal.GangBossModel.status;var t=new GangBossSceneView(this);this.AddView(t),this.SetRebornCheckbox(t.checkBox3),GameGlobal.MessageCenter.addListener(MessageDef.GANGBOSS_BOX,this.UpdateBox,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGBOSS_BOX_COLLENT,this.UpdateBoxBar,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGBOSS_UPDATE_INFO,this.UpdateState,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGBOSS_DEAD,this.UpdateDead,this),this.UpdateBox(!0),this.UpdateBoxBar();var i=GameGlobal.GangBossModel.status;i==AcrossBossState.BOSS?this.CreateBossModel():(i==AcrossBossState.KILL||i==AcrossBossState.REBORNING)&&this.RemoveBoss(),this.UpdateDead()},t.prototype.Create=function(t){var i=e.prototype.Create.call(this,t);return i&&i.SetClick(),i},t.prototype.GetEntityNameStyle=function(e){return this.GetEntityNameStyleSvr(e)},t.prototype.MoveOrder=function(t,i,o,n){void 0===n&&(n=0);var a=e.prototype.MoveOrder.call(this,t,i,o,n),r=GameGlobal.GangBossModel.mCollectNow;for(var s in r)for(var l=0,c=r[s];l<c.length;l++){var u=c[l];if(u.playerid==GameGlobal.actorModel.actorID)return GameGlobal.GangBossModel.RemoveCollentBox(),a}return a},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),GameGlobal.MessageCenter.removeAll(this)},t.prototype.Clear=function(){e.prototype.Clear.call(this);var t=this.mAcrossBossBox;for(var i in t)t[i].DoRemoved(),delete t[i];this.mAcrossBossBox={},this.mBossHandle=0,GameGlobal.GangBossModel.ClearData()},t.prototype.UpdateState=function(){var e=GameGlobal.GangBossModel.status;e==AcrossBossState.BOSS?(this.CreateBossModel(),this.AutoChallenge()):(e==AcrossBossState.KILL||e==AcrossBossState.REBORNING)&&this.RemoveBoss(),this.mPreState=e},t.prototype.RemoveBoss=function(){if(this.mBossHandle&&(this.RemoveEntity(this.mBossHandle),this.mBossHandle=null),!this.mBossDeadImgHandle){var e=GameGlobal.Config.GuildBossBaseConfig;this.mBossDeadImgHandle=this.CreateImage("bossshiwang",e.bossbron[0]-180,e.bossbron[1]-160,!1)}},t.prototype.CreateBossModel=function(){if(this.mBossDeadImgHandle&&(this.RemoveEntity(this.mBossDeadImgHandle),this.mBossDeadImgHandle=null),!this.mBossHandle){var e=GameGlobal.Config.GuildBossBaseConfig,t=this.CreateMonster(e.bossid,e.bossbron[0],e.bossbron[1]);t&&(this.mBossHandle=t.GetHandle(),t.SetClick(),this.mSelList[0]&&(t.visible=!1))}},t.prototype.OnPreEntityClick=function(e){var t=this.GetEntity(e);return t&&t.m_Info&&t.m_Info.guildID==GameGlobal.actorModel.guildID?(UserTips.InfoTip("不能挑战同帮会玩家"),!1):!0},t.prototype.OnEntityClick=function(e){var t=this.GetEntity(e);t&&this.MoveOrder(e,t.x,t.y)},t.prototype.UpdateBox=function(e){void 0===e&&(e=!1);var t=GameGlobal.GangBossModel.mBox,i=this.mAcrossBossBox;for(var o in i)t[o]||(i[o].DoRemoved(),delete i[o]);for(var o in t)if(!i[o]){var n=i[o]=new AcrossBossBox(t[o],GameGlobal.Config.GuildBossBaseConfig.coltime);n.OnAdded(e)}},t.prototype.OnMoveLeval=function(e,t,i,o){if(GameGlobal.actorModel.actorID==t){var n=this.mAcrossBossBox[e];if(n)return void GameGlobal.GangBossModel.sendCollectBox(e);if(this.mBossHandle==e)return void GameGlobal.GangBossModel.sendChallenge(null);var a=this.GetEntity(e);return a?void GameGlobal.GangBossModel.sendChallenge(e):void 0}},t.prototype.GetMyBoxBar=function(){var e=GameGlobal.actorModel.actorID,t=GameGlobal.GangBossModel.mCollectNow;for(var i in t)for(var o=0,n=t[i];o<n.length;o++){var a=n[o];if(a.playerid==e&&a.time>GameServer.serverTime)return a.time}return null},t.prototype.UpdateBoxBar=function(){var e=GameGlobal.GangBossModel.mCollectNow,t=this.mAcrossBossBox;for(var i in t){var o=t[i];e[i]?o.ShowBars(e[i]):o.RemoveBar()}},t.prototype.GetRebornYb=function(){return GameGlobal.Config.GuildBossBaseConfig.revivecost},t.prototype.SendRelive=function(){GameGlobal.GangBossModel.sendRelive()},t.prototype.UpdateDead=function(){var e=GameGlobal.GangBossModel.GetDeadTime();e>0?this.ShowRebornView(e):(this.RemoveRebornView(),this.AutoChallenge())},t.prototype.AutoChallenge=function(){this.mSelList[2]&&this.mBossHandle&&this.OnEntityClick(this.mBossHandle)},t.prototype.HideBoss=function(){var e=this.GetEntity(this.mBossHandle);e&&(e.visible=this.mSelList[0]?!1:!0)},t}(CommonMapRaid);__reflect(MapRaidGangBoss.prototype,"MapRaidGangBoss");var MapRaidGangMap=function(e){function t(){var t=e.call(this)||this;return t.mCountMap={},t.mEntityMap={},t.mPosMap={},t.mRobotMap={},t.mMemberCount=0,t.mAuto=!1,t}return __extends(t,e),t.prototype.Init=function(){e.prototype.Init.call(this),GameGlobal.MessageCenter.addListener(MessageDef.GANGMAP_MAPENTITY_INIT,this.InitEntity,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGMAP_UPDATE_UPDATEENTITY,this.UpdateEntityInfo,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGMAP_AUTO_TASK,this.UpdateAutoTask,this),GameGlobal.MessageCenter.addListener(MessageDef.GANGMAP_RESET_MAPENTITY,this._ResetMapEntity,this),this.CreateRobotList()},t.prototype.Clear=function(){e.prototype.Clear.call(this),GameGlobal.MessageCenter.removeAll(this),TimerManager.ins().removeAll(this),GameGlobal.ViewManagerImpl.Destroy(GangMapScieneWin)},t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),GameGlobal.ViewManagerImpl.Open(GangMapScieneWin)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),GameGlobal.ViewManagerImpl.Close(GangMapScieneWin)},t.prototype.InitEntity=function(){this._CalculateCount(GangMapConst.TYPE_MONSTER),this._CalculateCount(GangMapConst.TYPE_PLANT),this._CreateEntityList(GangMapConst.TYPE_MONSTER),this._CreateEntityList(GangMapConst.TYPE_PLANT)},t.prototype.OnEntityClick=function(e){var t=this._GetPosByHandle(e);t&&GameGlobal.RaidMgr.mMapRaid.MoveOrder(e,Const.PosToPixel(parseInt(t[0])),Const.PosToPixel(parseInt(t[1])))},t.prototype.OnMoveLeval=function(e,t,i,o){var n=this,a=this.mEntityMap[e],r=GangMapConst.GetGangMapTaskId(a);if(r){if(a==GangMapConst.TYPE_PLANT){GameGlobal.GangMapModel.StartPickPlantNotice();var s=GameGlobal.Config.GuildConfig.collectiontime;return void TimerManager.ins().doTimer(1e3*s,1,function(){n.RemoveEntity(e),n._RemovePosRecord(e),n.mEntityMap[e]=null,GameGlobal.GangMapModel.SendFinishTask(r)},this)}this.RemoveEntity(e),this._RemovePosRecord(e),this.mEntityMap[e]=null,GameGlobal.GangMapModel.SendFinishTask(r)}},t.prototype.OnMapClick=function(t,i){return GameGlobal.GangMapModel.HidePickProgressNoticy(),TimerManager.ins().removeAll(this),e.prototype.OnMapClick.call(this,t,i)},t.prototype.UpdateEntityInfo=function(){this._UpdateMapEntity(GangMapConst.TYPE_MONSTER),this._UpdateMapEntity(GangMapConst.TYPE_PLANT),this._StartAutoTasks()},t.prototype.UpdateAutoTask=function(e){this.mAuto=e,this._StartAutoTasks()},t.prototype._StartAutoTasks=function(){this.mAuto&&(this._StarAutoTask(GangMapConst.TYPE_MONSTER)||this._StarAutoTask(GangMapConst.TYPE_PLANT))},t.prototype._StarAutoTask=function(e){var t,i=GangMapConst.GetGangMapTaskId(e);return!GameGlobal.GangMapModel.IsTaskDone(i)&&(t=this._GetMapEntityHandle(e))?(this.OnEntityClick(t),!0):!1},t.prototype._UpdateMapEntity=function(e){if(!(this._GetCurCountInMap(e)>=(this.mCountMap[e]||0))){var t=GangMapConst.GetGangMapTaskId(e);return GameGlobal.GangMapModel.IsTaskDone(t)?void this._ResetMapEntity():void this._CreateGMapEntity(e)}},t.prototype._CalculateCount=function(e){var t=GangMapConst.GetGangMapTaskId(e);if(GameGlobal.GangMapModel.IsTaskDone(t))return void(this.mCountMap[e]=0);var i=GameGlobal.Config.GuildConfig.count;e==GangMapConst.TYPE_MONSTER?this.mCountMap[e]=Math.floor(Math.random()*(i-2))+1:this.mCountMap[e]=i-this.mCountMap[GangMapConst.TYPE_MONSTER]},t.prototype._CreateEntityList=function(e){for(var t=this.mCountMap[e],i=0;t>i;i++)this._CreateGMapEntity(e)},t.prototype._CreateGMapEntity=function(e){var t,i,o=GangMapConst.GetGangMapEntityId(e),n=this._GetRandomPos();e==GangMapConst.TYPE_MONSTER?(t=GameGlobal.RaidMgr.mMapRaid.CreateMonster(o,Const.PosToPixel(n.x),Const.PosToPixel(n.y)),t.SetClick(!1),i=t.GetHandle()):i=GameGlobal.RaidMgr.mMapRaid.CreateImage(o,Const.PosToPixel(n.x)-80,Const.PosToPixel(n.y)-160),this.mEntityMap[i]=e;var a=n.x+"_"+n.y;this.mPosMap[a]=i},t.prototype._GetRandomPos=function(){for(var e=new egret.Point;;){var t=Math.floor(GameMap.COL/2),i=Math.floor(GameMap.ROW/2);GameMap.GetRandomPos(t,i,t-2,i-2,e);var o=e.x+"_"+e.y;if(!this.mPosMap[o])return e}},t.prototype._RemovePosRecord=function(e){for(var t in this.mPosMap)if(this.mPosMap[t]==e){this.mPosMap[t]=null;break}},t.prototype._GetCurCountInMap=function(e){var t=0;for(var i in this.mEntityMap)this.mEntityMap[i]==e&&t++;return t},t.prototype._ResetMapEntity=function(){for(var e in this.mEntityMap){var t=parseInt(e);
this.RemoveEntity(t)}this.mEntityMap={},this.mCountMap={},this.mPosMap={},this._CalculateCount(GangMapConst.TYPE_MONSTER),this._CalculateCount(GangMapConst.TYPE_PLANT),this._CreateEntityList(GangMapConst.TYPE_MONSTER),this._CreateEntityList(GangMapConst.TYPE_PLANT)},t.prototype._GetMapEntityHandle=function(e){for(var t in this.mEntityMap)if(this.mEntityMap[t]==e)return parseInt(t)},t.prototype._GetPosByHandle=function(e){for(var t in this.mPosMap)if(this.mPosMap[t]==e)return t.split("_")},t.prototype.CreateRole=function(t){this.RemoveRobot(t.id),this.mMemberCount++,e.prototype.CreateRole.call(this,t)},t.prototype.CreateRobotRole=function(e){var t=[],i=new EntityRole;i.parserBase({ownerid:e.id,handler:e.id,type:EntityType.Role,shows:{job:e.job,sex:e.sex,shows:e.shows}}),i.entityName=e.name,t.push(i),this.AddRobotTeam(e.id,t)},t.prototype.AddRobotTeam=function(e,t){for(var i=1;i<t.length;i++)t[i].x=t[i-1].x-50,t[i].y=t[i-1].y;for(var o=[],n=0,a=t;n<a.length;n++){var r=a[n],s=this.Create(r);s&&o.push(s)}if(o.length){var l=this.CreateRobotTeam();l.mMasterHandle=e,l.Init(o),this.cTeam[e]=l}},t.prototype.CreateRobotTeam=function(){return new NormalMoveTeam},t.prototype.RemoveEntity=function(t){return this.mEntityMap[t]||this.mRobotMap[t]||this.mMemberCount--,e.prototype.RemoveEntity.call(this,t)},t.prototype.RemoveRobot=function(e){this.mRobotMap[e]&&this.RemoveEntity(e),this.mRobotMap[e]=null},t.prototype.CreateRobotList=function(){for(var e=GameGlobal.GangMapModel.mRobotList,t=this.mMemberCount,i=t;10>i;i++){var o=e[i];if(!o)break;this.mRobotMap[o.id]||(this.mRobotMap[o.id]=o.id,this.CreateRobotRole(o))}},t}(CommonMapRaid);__reflect(MapRaidGangMap.prototype,"MapRaidGangMap");var MapRaidXiandao=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.OnEnter=function(){e.prototype.OnEnter.call(this),this.view||(this.view=new XiandaoSceneView),this.AddView(this.view)},t.prototype.Clear=function(){e.prototype.Clear.call(this),GameGlobal.XiandaoModel.ClearGetMapInfo()},t}(CommonMapRaid);__reflect(MapRaidXiandao.prototype,"MapRaidXiandao");var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activity=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.activity&&o.wi(t.activity,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.cs_activity_enter_request=s,__reflect(s.prototype,"Sproto.cs_activity_enter_request"),e.ALL_DICT.cs_activity_enter_request={en:i,de:t};var l=function(){function e(){}return e}();e.cs_activity_hall_request=l,__reflect(l.prototype,"Sproto.cs_activity_hall_request"),e.ALL_DICT.cs_activity_hall_request={en:n,de:o};var c=function(){function e(){}return e}();e.cs_activity_info_req_request=c,__reflect(c.prototype,"Sproto.cs_activity_info_req_request"),e.ALL_DICT.cs_activity_info_req_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activity=e.ri();break;case 1:t.isopen=e.rb();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.activity&&o.wi(t.activity,0),void 0!=t.isopen&&o.wb(t.isopen,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activitys=e.roa("activity_brief");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.activitys&&o.woa("activity_brief",t.activitys,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.answer=e.rs();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.answer&&o.ws(t.answer,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activity=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.activity&&o.wi(t.activity,0),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.activity_brief=c,__reflect(c.prototype,"Sproto.activity_brief"),e.ALL_DICT.activity_brief={en:i,de:t};var u=function(){function e(){}return e}();e.sc_activity_hall_request=u,__reflect(u.prototype,"Sproto.sc_activity_hall_request"),e.ALL_DICT.sc_activity_hall_request={en:n,de:o};var p=function(){function e(){}return e}();e.sc_activity_info_res_request=p,__reflect(p.prototype,"Sproto.sc_activity_info_res_request"),e.ALL_DICT.sc_activity_info_res_request={en:r,de:a};var h=function(){function e(){}return e}();e.sc_activity_msg_request=h,__reflect(h.prototype,"Sproto.sc_activity_msg_request"),e.ALL_DICT.sc_activity_msg_request={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.num=e.ri();break;case 2:t.typ=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.num&&o.wi(t.num,1),void 0!=t.typ&&o.wi(t.typ,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.typ=e.ri();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.typ&&o.wi(t.typ,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_advanced_buy_request=c,__reflect(c.prototype,"Sproto.cs_advanced_buy_request"),e.ALL_DICT.cs_advanced_buy_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_advanced_charger_reward_request=u,__reflect(u.prototype,"Sproto.cs_advanced_charger_reward_request"),e.ALL_DICT.cs_advanced_charger_reward_request={en:n,de:o};var p=function(){function e(){}return e}();e.cs_advanced_lv_reward_request=p,__reflect(p.prototype,"Sproto.cs_advanced_lv_reward_request"),e.ALL_DICT.cs_advanced_lv_reward_request={en:r,de:a};var h=function(){function e(){}return e}();e.cs_advanced_rank_request=h,__reflect(h.prototype,"Sproto.cs_advanced_rank_request"),e.ALL_DICT.cs_advanced_rank_request={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.typ=e.ri();break;case 1:t.reward=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.typ&&o.wi(t.typ,0),void 0!=t.reward&&o.wia(t.reward,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dayCharger=e.ri();break;case 1:t.chargerReward=e.ria();break;case 2:t.shop=e.roa("advanced_shop");break;case 3:t.advancedReward=e.roa("advanced_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.dayCharger&&o.wi(t.dayCharger,0),void 0!=t.chargerReward&&o.wia(t.chargerReward,1),void 0!=t.shop&&o.woa("advanced_shop",t.shop,2),void 0!=t.advancedReward&&o.woa("advanced_data",t.advancedReward,3),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.typ=e.ri();break;case 1:t.datas=e.roa("rank_data_list");break;case 2:t.selfRank=e.ri();break;case 3:t.selfPower=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.typ&&o.wi(t.typ,0),void 0!=t.datas&&o.woa("rank_data_list",t.datas,1),void 0!=t.selfRank&&o.wi(t.selfRank,2),void 0!=t.selfPower&&o.wi(t.selfPower,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dayCharger=e.ri();break;case 1:t.chargerReward=e.ria();break;case 2:t.shop=e.roa("advanced_shop");break;case 3:t.advancedReward=e.roa("advanced_data");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.dayCharger&&o.wi(t.dayCharger,0),void 0!=t.chargerReward&&o.wia(t.chargerReward,1),void 0!=t.shop&&o.woa("advanced_shop",t.shop,2),void 0!=t.advancedReward&&o.woa("advanced_data",t.advancedReward,3),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.advanced_data=p,__reflect(p.prototype,"Sproto.advanced_data"),e.ALL_DICT.advanced_data={en:i,de:t};var h=function(){function e(){}return e}();e.advanced_shop=h,__reflect(h.prototype,"Sproto.advanced_shop"),e.ALL_DICT.advanced_shop={en:n,de:o};var d=function(){function e(){}return e}();e.sc_advanced_info_request=d,__reflect(d.prototype,"Sproto.sc_advanced_info_request"),e.ALL_DICT.sc_advanced_info_request={en:r,de:a};var _=function(){function e(){}return e}();e.sc_advanced_rank_request=_,__reflect(_.prototype,"Sproto.sc_advanced_rank_request"),e.ALL_DICT.sc_advanced_rank_request={en:l,de:s};var f=function(){function e(){}return e}();e.sc_advanced_update_request=f,__reflect(f.prototype,"Sproto.sc_advanced_update_request"),e.ALL_DICT.sc_advanced_update_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.answer=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.answer&&o.wi(t.answer,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_answer_answer_request=c,__reflect(c.prototype,"Sproto.cs_answer_answer_request"),e.ALL_DICT.cs_answer_answer_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_answer_answer_rank_request=u,__reflect(u.prototype,"Sproto.cs_answer_answer_rank_request"),e.ALL_DICT.cs_answer_answer_rank_request={en:n,de:o};var p=function(){function e(){}return e}();e.cs_answer_answer_ui_request=p,__reflect(p.prototype,"Sproto.cs_answer_answer_ui_request"),e.ALL_DICT.cs_answer_answer_ui_request={en:r,de:a};var h=function(){function e(){}return e}();e.cs_answer_answer_ui_response=h,__reflect(h.prototype,"Sproto.cs_answer_answer_ui_response"),e.ALL_DICT.cs_answer_answer_ui_response={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.point=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.point&&o.wi(t.point,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.rank=e.roa("answer_rank");break;case 2:t.answerNum=e.ri();break;case 3:t.answerNo=e.ri();break;case 4:t.answerList=e.ria();break;case 5:t.point=e.ri();break;case 6:t.rankNo=e.ri();break;case 7:t.operation=e.ri();break;case 8:t.timeout=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.rank&&o.woa("answer_rank",t.rank,1),void 0!=t.answerNum&&o.wi(t.answerNum,2),void 0!=t.answerNo&&o.wi(t.answerNo,3),void 0!=t.answerList&&o.wia(t.answerList,4),void 0!=t.point&&o.wi(t.point,5),void 0!=t.rankNo&&o.wi(t.rankNo,6),void 0!=t.operation&&o.wi(t.operation,7),void 0!=t.timeout&&o.wi(t.timeout,8),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rank=e.roa("answer_rank");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rank&&o.woa("answer_rank",t.rank,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.point=e.ri();break;case 1:t.rankNo=e.ri();break;case 2:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.point&&o.wi(t.point,0),void 0!=t.rankNo&&o.wi(t.rankNo,1),void 0!=t.rewards&&o.woa("reward_data",t.rewards,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.answerNum=e.ri();break;case 2:t.answerNo=e.ri();break;case 3:t.answerList=e.ria();break;case 4:t.point=e.ri();break;case 5:t.operation=e.ri();break;case 6:t.timeout=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.answerNum&&o.wi(t.answerNum,1),void 0!=t.answerNo&&o.wi(t.answerNo,2),void 0!=t.answerList&&o.wia(t.answerList,3),void 0!=t.point&&o.wi(t.point,4),void 0!=t.operation&&o.wi(t.operation,5),void 0!=t.timeout&&o.wi(t.timeout,6),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.answer_rank=p,__reflect(p.prototype,"Sproto.answer_rank"),e.ALL_DICT.answer_rank={en:i,de:t};var h=function(){function e(){}return e}();e.sc_answer_info_request=h,__reflect(h.prototype,"Sproto.sc_answer_info_request"),e.ALL_DICT.sc_answer_info_request={en:n,de:o};var d=function(){function e(){}return e}();e.sc_answer_rank_res_request=d,__reflect(d.prototype,"Sproto.sc_answer_rank_res_request"),e.ALL_DICT.sc_answer_rank_res_request={en:r,de:a};var _=function(){function e(){}return e}();e.sc_answer_reward_request=_,__reflect(_.prototype,"Sproto.sc_answer_reward_request"),e.ALL_DICT.sc_answer_reward_request={en:l,de:s};var f=function(){function e(){}return e}();e.sc_answer_update_request=f,__reflect(f.prototype,"Sproto.sc_answer_update_request"),e.ALL_DICT.sc_answer_update_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targets=e.roa("arena_target_data");break;case 1:t.rank=e.ri();break;case 2:t.maxrank=e.ri();break;case 3:t.pkcount=e.ri();break;case 4:t.remaintime=e.ri();break;case 5:t.buycount=e.ri();break;case 6:t.medal=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.targets&&o.woa("arena_target_data",t.targets,0),void 0!=t.rank&&o.wi(t.rank,1),void 0!=t.maxrank&&o.wi(t.maxrank,2),void 0!=t.pkcount&&o.wi(t.pkcount,3),void 0!=t.remaintime&&o.wi(t.remaintime,4),void 0!=t.buycount&&o.wi(t.buycount,5),void 0!=t.medal&&o.wi(t.medal,6),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rank=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rank&&o.wi(t.rank,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ranklist=e.roa("rank_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ranklist&&o.woa("rank_data",t.ranklist,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.pkcount=e.ri();break;case 2:t.buycount=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.pkcount&&o.wi(t.pkcount,1),void 0!=t.buycount&&o.wi(t.buycount,2),e.SprotoCore.CloseSerialize(o)}var g=function(){function e(){}return e}();e.cs_arena_get_reward_request=g,__reflect(g.prototype,"Sproto.cs_arena_get_reward_request"),e.ALL_DICT.cs_arena_get_reward_request={en:i,de:t};var v=function(){function e(){}return e}();e.cs_arena_info_request=v,__reflect(v.prototype,"Sproto.cs_arena_info_request"),e.ALL_DICT.cs_arena_info_request={en:n,de:o};var y=function(){function e(){}return e}();e.cs_arena_info_response=y,__reflect(y.prototype,"Sproto.cs_arena_info_response"),e.ALL_DICT.cs_arena_info_response={en:r,de:a};var C=function(){function e(){}return e}();e.cs_arena_pk_request=C,__reflect(C.prototype,"Sproto.cs_arena_pk_request"),e.ALL_DICT.cs_arena_pk_request={en:l,de:s};var b=function(){function e(){}return e}();e.cs_arena_rank_request=b,__reflect(b.prototype,"Sproto.cs_arena_rank_request"),e.ALL_DICT.cs_arena_rank_request={en:u,de:c};var S=function(){function e(){}return e}();e.cs_arena_rank_response=S,__reflect(S.prototype,"Sproto.cs_arena_rank_response"),e.ALL_DICT.cs_arena_rank_response={en:h,de:p};var G=function(){function e(){}return e}();e.cs_buy_pk_request=G,__reflect(G.prototype,"Sproto.cs_buy_pk_request"),e.ALL_DICT.cs_buy_pk_request={en:_,de:d};var T=function(){function e(){}return e}();e.cs_buy_pk_response=T,__reflect(T.prototype,"Sproto.cs_buy_pk_response"),e.ALL_DICT.cs_buy_pk_response={en:m,de:f}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;case 2:t.iskill=e.rb();break;case 3:t.maxrank=e.ri();break;case 4:t.lastmaxrank=e.ri();break;case 5:t.rank=e.ri();break;case 6:t.lastrank=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),void 0!=t.iskill&&o.wb(t.iskill,2),void 0!=t.maxrank&&o.wi(t.maxrank,3),void 0!=t.lastmaxrank&&o.wi(t.lastmaxrank,4),void 0!=t.rank&&o.wi(t.rank,5),void 0!=t.lastrank&&o.wi(t.lastrank,6),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_arena_pk_result_request=o,__reflect(o.prototype,"Sproto.sc_arena_pk_result_request"),e.ALL_DICT.sc_arena_pk_result_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.guildid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.guildid&&o.wi(t.guildid,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.auctype=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.auctype&&o.wi(t.auctype,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.guildid=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.guildid&&o.wi(t.guildid,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.itemid=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.itemid&&o.wi(t.itemid,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dealprice=e.ri();break;case 1:t.addprice=e.ri();break;case 2:t.price=e.ri();break;case 3:t.numerictype=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.dealprice&&o.wi(t.dealprice,0),void 0!=t.addprice&&o.wi(t.addprice,1),void 0!=t.price&&o.wi(t.price,2),void 0!=t.numerictype&&o.wi(t.numerictype,3),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.auctype=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.auctype&&o.wi(t.auctype,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.choose=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.choose&&o.wi(t.choose,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.guildid=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.guildid&&o.wi(t.guildid,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}var y=function(){function e(){}return e}();e.cs_auction_buy_request=y,__reflect(y.prototype,"Sproto.cs_auction_buy_request"),e.ALL_DICT.cs_auction_buy_request={en:i,de:t};var C=function(){function e(){}return e}();e.cs_auction_list_request=C,__reflect(C.prototype,"Sproto.cs_auction_list_request"),e.ALL_DICT.cs_auction_list_request={en:n,de:o};var b=function(){function e(){}return e}();e.cs_auction_offer_request=b,__reflect(b.prototype,"Sproto.cs_auction_offer_request"),e.ALL_DICT.cs_auction_offer_request={en:r,de:a};var S=function(){function e(){}return e}();e.cs_auction_query_item_request=S,__reflect(S.prototype,"Sproto.cs_auction_query_item_request"),e.ALL_DICT.cs_auction_query_item_request={en:l,de:s};var G=function(){function e(){}return e}();e.cs_auction_query_item_response=G,__reflect(G.prototype,"Sproto.cs_auction_query_item_response"),e.ALL_DICT.cs_auction_query_item_response={en:u,de:c};var T=function(){function e(){}return e}();e.cs_auction_record_request=T,__reflect(T.prototype,"Sproto.cs_auction_record_request"),e.ALL_DICT.cs_auction_record_request={en:h,de:p};var I=function(){function e(){}return e}();e.cs_auction_select_request=I,__reflect(I.prototype,"Sproto.cs_auction_select_request"),e.ALL_DICT.cs_auction_select_request={en:_,de:d};var w=function(){function e(){}return e}();e.cs_auction_update_request=w,__reflect(w.prototype,"Sproto.cs_auction_update_request"),e.ALL_DICT.cs_auction_update_request={en:m,de:f};var A=function(){function e(){}return e}();e.cs_auction_useitem_request=A,__reflect(A.prototype,"Sproto.cs_auction_useitem_request"),e.ALL_DICT.cs_auction_useitem_request={en:v,de:g}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.itemid=e.ri();break;case 2:t.count=e.ri();break;case 3:t.price=e.ri();break;case 4:t.playername=e.rs();break;case 5:t.offername=e.rs();break;case 6:t.status=e.ri();break;case 7:t.createtime=e.ri();break;case 8:t.dealtime=e.ri();break;case 9:t.isbuy=e.ri();break;case 10:t.dealprice=e.ri();break;case 11:t.addprice=e.ri();break;case 12:t.numerictype=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,13);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.itemid&&o.wi(t.itemid,1),void 0!=t.count&&o.wi(t.count,2),void 0!=t.price&&o.wi(t.price,3),void 0!=t.playername&&o.ws(t.playername,4),void 0!=t.offername&&o.ws(t.offername,5),void 0!=t.status&&o.wi(t.status,6),void 0!=t.createtime&&o.wi(t.createtime,7),void 0!=t.dealtime&&o.wi(t.dealtime,8),void 0!=t.isbuy&&o.wi(t.isbuy,9),void 0!=t.dealprice&&o.wi(t.dealprice,10),void 0!=t.addprice&&o.wi(t.addprice,11),void 0!=t.numerictype&&o.wi(t.numerictype,12),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ratio=e.ri();break;case 1:t.ratioAct=e.ri();break;case 2:t.lockratio=e.ri();break;case 3:t.guildid=e.ri();break;case 4:t.items=e.roa("auction_item");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.ratio&&o.wi(t.ratio,0),void 0!=t.ratioAct&&o.wi(t.ratioAct,1),void 0!=t.lockratio&&o.wi(t.lockratio,2),void 0!=t.guildid&&o.wi(t.guildid,3),void 0!=t.items&&o.woa("auction_item",t.items,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guildid=e.ri();break;case 1:t.items=e.roa("auction_item");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.guildid&&o.wi(t.guildid,0),void 0!=t.items&&o.woa("auction_item",t.items,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.guildid=e.ri();break;case 2:t.item=e.ro("auction_item");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.guildid&&o.wi(t.guildid,1),void 0!=t.item&&o.wo("auction_item",t.item,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ratio=e.ri();break;case 1:t.ratioAct=e.ri();break;case 2:t.lockratio=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ratio&&o.wi(t.ratio,0),void 0!=t.ratioAct&&o.wi(t.ratioAct,1),void 0!=t.lockratio&&o.wi(t.lockratio,2),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.auction_item=d,__reflect(d.prototype,"Sproto.auction_item"),e.ALL_DICT.auction_item={en:i,de:t};var _=function(){function e(){}return e}();e.sc_auction_list_request=_,__reflect(_.prototype,"Sproto.sc_auction_list_request"),e.ALL_DICT.sc_auction_list_request={en:n,de:o};var f=function(){function e(){}return e}();e.sc_auction_record_request=f,__reflect(f.prototype,"Sproto.sc_auction_record_request"),e.ALL_DICT.sc_auction_record_request={en:r,de:a};var m=function(){function e(){}return e}();e.sc_auction_select_request=m,__reflect(m.prototype,"Sproto.sc_auction_select_request"),e.ALL_DICT.sc_auction_select_request={en:l,de:s};var g=function(){function e(){}return e}();e.sc_auction_update_request=g,__reflect(g.prototype,"Sproto.sc_auction_update_request"),e.ALL_DICT.sc_auction_update_request={en:u,de:c};var v=function(){function e(){}return e}();e.sc_ratio_change_request=v,__reflect(v.prototype,"Sproto.sc_ratio_change_request"),e.ALL_DICT.sc_ratio_change_request={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.sex=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.sex&&o.wi(t.sex,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.locklist=e.ria();break;case 2:t.type=e.ri();break;case 3:t.autoBuy=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.locklist&&o.wia(t.locklist,1),void 0!=t.type&&o.wi(t.type,2),void 0!=t.autoBuy&&o.wi(t.autoBuy,3),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new Z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.xilian=e.ri();break;case 2:t.xilianSkills=e.ria();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.xilian&&o.wi(t.xilian,1),void 0!=t.xilianSkills&&o.wia(t.xilianSkills,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new $,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.name=e.rs();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.name=e.rs();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.name&&o.ws(t.name,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new it,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.buffs=e.ria();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.buffs&&o.wia(t.buffs,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.num=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.num&&o.wi(t.num,0),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.num=e.ri();break;case 2:t.cost=e.ri();break;case 3:t.star=e.ri();break;case 4:t.data=e.roa("baby_start_data");break;case 5:t.msgData=e.roa("baby_star_msg");break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.num&&o.wi(t.num,1),void 0!=t.cost&&o.wi(t.cost,2),void 0!=t.star&&o.wi(t.star,3),void 0!=t.data&&o.woa("baby_start_data",t.data,4),void 0!=t.msgData&&o.woa("baby_star_msg",t.msgData,5),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new at,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()
}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new st,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.idList=e.roa("baby_start_smelt");break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.idList&&o.woa("baby_start_smelt",t.idList,1),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new ct,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.pos=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pos&&o.wi(t.pos,1),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.pos=e.ri();break;case 2:t.no=e.ri();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.no&&o.wi(t.no,2),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.pos=e.ri();break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.pos&&o.wi(t.pos,1),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.pos=e.ri();break;case 2:t.no=e.ri();break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.no&&o.wi(t.no,2),e.SprotoCore.CloseSerialize(o)}var W=function(){function e(){}return e}();e.baby_start_data=W,__reflect(W.prototype,"Sproto.baby_start_data"),e.ALL_DICT.baby_start_data={en:i,de:t};var z=function(){function e(){}return e}();e.baby_start_smelt=z,__reflect(z.prototype,"Sproto.baby_start_smelt"),e.ALL_DICT.baby_start_smelt={en:n,de:o};var j=function(){function e(){}return e}();e.cs_baby_active_request=j,__reflect(j.prototype,"Sproto.cs_baby_active_request"),e.ALL_DICT.cs_baby_active_request={en:r,de:a};var X=function(){function e(){}return e}();e.cs_baby_active_response=X,__reflect(X.prototype,"Sproto.cs_baby_active_response"),e.ALL_DICT.cs_baby_active_response={en:l,de:s};var K=function(){function e(){}return e}();e.cs_baby_addgift_request=K,__reflect(K.prototype,"Sproto.cs_baby_addgift_request"),e.ALL_DICT.cs_baby_addgift_request={en:u,de:c};var J=function(){function e(){}return e}();e.cs_baby_addgift_response=J,__reflect(J.prototype,"Sproto.cs_baby_addgift_response"),e.ALL_DICT.cs_baby_addgift_response={en:h,de:p};var Q=function(){function e(){}return e}();e.cs_baby_refreshskill_request=Q,__reflect(Q.prototype,"Sproto.cs_baby_refreshskill_request"),e.ALL_DICT.cs_baby_refreshskill_request={en:_,de:d};var Z=function(){function e(){}return e}();e.cs_baby_refreshskill_response=Z,__reflect(Z.prototype,"Sproto.cs_baby_refreshskill_response"),e.ALL_DICT.cs_baby_refreshskill_response={en:m,de:f};var $=function(){function e(){}return e}();e.cs_baby_rename_request=$,__reflect($.prototype,"Sproto.cs_baby_rename_request"),e.ALL_DICT.cs_baby_rename_request={en:v,de:g};var et=function(){function e(){}return e}();e.cs_baby_rename_response=et,__reflect(et.prototype,"Sproto.cs_baby_rename_response"),e.ALL_DICT.cs_baby_rename_response={en:C,de:y};var tt=function(){function e(){}return e}();e.cs_baby_setskillin_request=tt,__reflect(tt.prototype,"Sproto.cs_baby_setskillin_request"),e.ALL_DICT.cs_baby_setskillin_request={en:S,de:b};var it=function(){function e(){}return e}();e.cs_baby_setskillin_response=it,__reflect(it.prototype,"Sproto.cs_baby_setskillin_response"),e.ALL_DICT.cs_baby_setskillin_response={en:T,de:G};var ot=function(){function e(){}return e}();e.cs_baby_start_get_request=ot,__reflect(ot.prototype,"Sproto.cs_baby_start_get_request"),e.ALL_DICT.cs_baby_start_get_request={en:w,de:I};var nt=function(){function e(){}return e}();e.cs_baby_start_get_response=nt,__reflect(nt.prototype,"Sproto.cs_baby_start_get_response"),e.ALL_DICT.cs_baby_start_get_response={en:k,de:A};var at=function(){function e(){}return e}();e.cs_baby_start_light_request=at,__reflect(at.prototype,"Sproto.cs_baby_start_light_request"),e.ALL_DICT.cs_baby_start_light_request={en:M,de:E};var rt=function(){function e(){}return e}();e.cs_baby_start_light_response=rt,__reflect(rt.prototype,"Sproto.cs_baby_start_light_response"),e.ALL_DICT.cs_baby_start_light_response={en:P,de:D};var st=function(){function e(){}return e}();e.cs_baby_start_smelt_request=st,__reflect(st.prototype,"Sproto.cs_baby_start_smelt_request"),e.ALL_DICT.cs_baby_start_smelt_request={en:R,de:L};var lt=function(){function e(){}return e}();e.cs_baby_start_smelt_response=lt,__reflect(lt.prototype,"Sproto.cs_baby_start_smelt_response"),e.ALL_DICT.cs_baby_start_smelt_response={en:B,de:x};var ct=function(){function e(){}return e}();e.cs_baby_start_up_lv_request=ct,__reflect(ct.prototype,"Sproto.cs_baby_start_up_lv_request"),e.ALL_DICT.cs_baby_start_up_lv_request={en:N,de:U};var ut=function(){function e(){}return e}();e.cs_baby_start_up_lv_response=ut,__reflect(ut.prototype,"Sproto.cs_baby_start_up_lv_response"),e.ALL_DICT.cs_baby_start_up_lv_response={en:F,de:O};var pt=function(){function e(){}return e}();e.cs_baby_start_use_request=pt,__reflect(pt.prototype,"Sproto.cs_baby_start_use_request"),e.ALL_DICT.cs_baby_start_use_request={en:q,de:V};var ht=function(){function e(){}return e}();e.cs_baby_start_use_response=ht,__reflect(ht.prototype,"Sproto.cs_baby_start_use_response"),e.ALL_DICT.cs_baby_start_use_response={en:Y,de:H}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.buffs=e.ria();break;case 2:t.giftexp=e.ri();break;case 3:t.giftlv=e.ri();break;case 4:t.xilian=e.ri();break;case 5:t.xilianSkills=e.ria();break;case 6:t.sex=e.ri();break;case 7:t.open=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.buffs&&o.wia(t.buffs,1),void 0!=t.giftexp&&o.wi(t.giftexp,2),void 0!=t.giftlv&&o.wi(t.giftlv,3),void 0!=t.xilian&&o.wi(t.xilian,4),void 0!=t.xilianSkills&&o.wia(t.xilianSkills,5),void 0!=t.sex&&o.wi(t.sex,6),void 0!=t.open&&o.wi(t.open,7),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.star=e.ri();break;case 1:t.data=e.ria();break;case 2:t.msgData=e.roa("baby_star_msg");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.star&&o.wi(t.star,0),void 0!=t.data&&o.wia(t.data,1),void 0!=t.msgData&&o.woa("baby_star_msg",t.msgData,2),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_baby_init_request=a,__reflect(a.prototype,"Sproto.sc_baby_init_request"),e.ALL_DICT.sc_baby_init_request={en:i,de:t};var r=function(){function e(){}return e}();e.sc_baby_star_init_request=r,__reflect(r.prototype,"Sproto.sc_baby_star_init_request"),e.ALL_DICT.sc_baby_star_init_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bagNum=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bagNum&&o.wi(t.bagNum,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.uuid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.uuid&&o.wi(t.uuid,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.itemHandle=e.ria();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.itemHandle&&o.wia(t.itemHandle,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.itemHandle=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.itemHandle&&o.wia(t.itemHandle,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_bag_add_grid_request=p,__reflect(p.prototype,"Sproto.cs_bag_add_grid_request"),e.ALL_DICT.cs_bag_add_grid_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_bag_get_goods_by_store_request=h,__reflect(h.prototype,"Sproto.cs_bag_get_goods_by_store_request"),e.ALL_DICT.cs_bag_get_goods_by_store_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_bag_recycle_request=d,__reflect(d.prototype,"Sproto.cs_bag_recycle_request"),e.ALL_DICT.cs_bag_recycle_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_bag_smelt_request=_,__reflect(_.prototype,"Sproto.cs_bag_smelt_request"),e.ALL_DICT.cs_bag_smelt_request={en:l,de:s};var f=function(){function e(){}return e}();e.cs_bag_use_item_request=f,__reflect(f.prototype,"Sproto.cs_bag_use_item_request"),e.ALL_DICT.cs_bag_use_item_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.data=e.ro("item_data");break;case 2:t.showTip=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.data&&o.wo("item_data",t.data,1),void 0!=t.showTip&&o.wi(t.showTip,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.handle=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.handle&&o.wi(t.handle,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.state=e.ri();break;case 1:t.goldCount=e.ri();break;case 2:t.len=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.state&&o.wi(t.state,0),void 0!=t.goldCount&&o.wi(t.goldCount,1),void 0!=t.len&&o.wi(t.len,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.state=e.ri();break;case 1:t.goldCount=e.ri();break;case 2:t.len=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.state&&o.wi(t.state,0),void 0!=t.goldCount&&o.wi(t.goldCount,1),void 0!=t.len&&o.wi(t.len,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bagNum=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bagNum&&o.wi(t.bagNum,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ria();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.handle&&o.wia(t.handle,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.code=e.ri();break;case 1:t.type=e.ri();break;case 2:t.datas=e.roa("item_data");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.code&&o.wi(t.code,0),void 0!=t.type&&o.wi(t.type,1),void 0!=t.datas&&o.woa("item_data",t.datas,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.handle=e.ri();break;case 2:t.num=e.ri();break;case 3:t.showTip=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.handle&&o.wi(t.handle,1),void 0!=t.num&&o.wi(t.num,2),void 0!=t.showTip&&o.wi(t.showTip,3),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.tipIndex=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.tipIndex&&o.wi(t.tipIndex,0),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.item_count_base=b,__reflect(b.prototype,"Sproto.item_count_base"),e.ALL_DICT.item_count_base={en:i,de:t};var S=function(){function e(){}return e}();e.sc_bag_deal_add_item_request=S,__reflect(S.prototype,"Sproto.sc_bag_deal_add_item_request"),e.ALL_DICT.sc_bag_deal_add_item_request={en:n,de:o};var G=function(){function e(){}return e}();e.sc_bag_deal_delete_item_request=G,__reflect(G.prototype,"Sproto.sc_bag_deal_delete_item_request"),e.ALL_DICT.sc_bag_deal_delete_item_request={en:r,de:a};var T=function(){function e(){}return e}();e.sc_bag_deal_recycle_result_request=T,__reflect(T.prototype,"Sproto.sc_bag_deal_recycle_result_request"),e.ALL_DICT.sc_bag_deal_recycle_result_request={en:l,de:s};var I=function(){function e(){}return e}();e.sc_bag_deal_smelt_result_request=I,__reflect(I.prototype,"Sproto.sc_bag_deal_smelt_result_request"),e.ALL_DICT.sc_bag_deal_smelt_result_request={en:u,de:c};var w=function(){function e(){}return e}();e.sc_bag_deal_valumn_add_request=w,__reflect(w.prototype,"Sproto.sc_bag_deal_valumn_add_request"),e.ALL_DICT.sc_bag_deal_valumn_add_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_bag_get_treasure_equip_request=A,__reflect(A.prototype,"Sproto.sc_bag_get_treasure_equip_request"),e.ALL_DICT.sc_bag_get_treasure_equip_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_bag_init_data_request=k,__reflect(k.prototype,"Sproto.sc_bag_init_data_request"),e.ALL_DICT.sc_bag_init_data_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_bag_update_item_data_request=E,__reflect(E.prototype,"Sproto.sc_bag_update_item_data_request"),e.ALL_DICT.sc_bag_update_item_data_request={en:v,de:g};var M=function(){function e(){}return e}();e.sc_bag_user_item_back_request=M,__reflect(M.prototype,"Sproto.sc_bag_user_item_back_request"),e.ALL_DICT.sc_bag_user_item_back_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.isauto=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.isauto&&o.wi(t.isauto,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.use_skill_list=e.roa("use_skill_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.use_skill_list&&o.woa("use_skill_data",t.use_skill_list,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handler=e.ri();break;case 1:t.skillid=e.ri();break;case 2:t.targets=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.handler&&o.wi(t.handler,0),void 0!=t.skillid&&o.wi(t.skillid,1),void 0!=t.targets&&o.wia(t.targets,2),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_battle_play_finish_request=c,__reflect(c.prototype,"Sproto.cs_battle_play_finish_request"),e.ALL_DICT.cs_battle_play_finish_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_battle_set_auto_request=u,__reflect(u.prototype,"Sproto.cs_battle_set_auto_request"),e.ALL_DICT.cs_battle_set_auto_request={en:n,de:o};var p=function(){function e(){}return e}();e.cs_battle_use_skill_request=p,__reflect(p.prototype,"Sproto.cs_battle_use_skill_request"),e.ALL_DICT.cs_battle_use_skill_request={en:r,de:a};var h=function(){function e(){}return e}();e.use_skill_data=h,__reflect(h.prototype,"Sproto.use_skill_data"),e.ALL_DICT.use_skill_data={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.id=e.ri();break;case 2:t.src=e.ri();break;case 3:t.targets=e.ria();break;case 4:t.target=e.ri();break;case 5:t.args=e.ria();break;case 6:t.arg=e.ri();break;case 7:t.actions=e.roa("battle_event");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.src&&o.wi(t.src,2),void 0!=t.targets&&o.wia(t.targets,3),void 0!=t.target&&o.wi(t.target,4),void 0!=t.args&&o.wia(t.args,5),void 0!=t.arg&&o.wi(t.arg,6),void 0!=t.actions&&o.woa("battle_event",t.actions,7),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ownerid=e.ri();break;case 1:t.handler=e.ri();break;case 2:t.type=e.ri();break;case 3:t.side=e.ri();break;case 4:t.pos=e.ri();break;case 5:t.attrs=e.ria();break;case 6:t.sattrs=e.roa("spec_attr");break;case 7:t.shows=e.ro("entity_shows");break;case 8:t.monid=e.ri();break;case 9:t.skills=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,10);return void 0!=t.ownerid&&o.wi(t.ownerid,0),void 0!=t.handler&&o.wi(t.handler,1),void 0!=t.type&&o.wi(t.type,2),void 0!=t.side&&o.wi(t.side,3),void 0!=t.pos&&o.wi(t.pos,4),void 0!=t.attrs&&o.wia(t.attrs,5),void 0!=t.sattrs&&o.woa("spec_attr",t.sattrs,6),void 0!=t.shows&&o.wo("entity_shows",t.shows,7),void 0!=t.monid&&o.wi(t.monid,8),void 0!=t.skills&&o.wia(t.skills,9),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ria();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.id=e.ri();break;case 4:t.name=e.rs();break;case 5:t.serverid=e.ri();break;case 6:t.guildid=e.ri();break;case 7:t.guildname=e.rs();break;case 8:t.level=e.ri();break;case 9:t.pingji=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,10);return void 0!=t.shows&&o.wia(t.shows,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.id&&o.wi(t.id,3),void 0!=t.name&&o.ws(t.name,4),void 0!=t.serverid&&o.wi(t.serverid,5),void 0!=t.guildid&&o.wi(t.guildid,6),void 0!=t.guildname&&o.ws(t.guildname,7),void 0!=t.level&&o.wi(t.level,8),void 0!=t.pingji&&o.wi(t.pingji,9),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handler=e.ri();break;case 1:t.skills=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.handler&&o.wi(t.handler,0),void 0!=t.skills&&o.wia(t.skills,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.events=e.roa("battle_event");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.events&&o.woa("battle_event",t.events,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidType=e.ri();break;case 1:t.fbid=e.ri();break;case 2:t.manual=e.ri();break;case 3:t.entitydatas=e.roa("entity_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.raidType&&o.wi(t.raidType,0),void 0!=t.fbid&&o.wi(t.fbid,1),void 0!=t.manual&&o.wi(t.manual,2),void 0!=t.entitydatas&&o.woa("entity_data",t.entitydatas,3),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.time=e.ri();break;case 1:t.useskills=e.roa("entity_skill");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.time&&o.wi(t.time,0),void 0!=t.useskills&&o.woa("entity_skill",t.useskills,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidType=e.ri();break;case 1:t.fbid=e.ri();break;case 2:t.manual=e.ri();break;case 3:t.entitydatas=e.roa("entity_data");break;case 4:t.events=e.roa("battle_event");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.raidType&&o.wi(t.raidType,0),void 0!=t.fbid&&o.wi(t.fbid,1),void 0!=t.manual&&o.wi(t.manual,2),void 0!=t.entitydatas&&o.woa("entity_data",t.entitydatas,3),void 0!=t.events&&o.woa("battle_event",t.events,4),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.isauto=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.isauto&&o.wi(t.isauto,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.atttype=e.ri();break;case 1:t.value=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.atttype&&o.wi(t.atttype,0),void 0!=t.value&&o.wi(t.value,1),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.battle_event=b,__reflect(b.prototype,"Sproto.battle_event"),e.ALL_DICT.battle_event={en:i,de:t};var S=function(){function e(){}return e}();e.entity_data=S,__reflect(S.prototype,"Sproto.entity_data"),e.ALL_DICT.entity_data={en:n,de:o};var G=function(){function e(){}return e}();e.entity_shows=G,__reflect(G.prototype,"Sproto.entity_shows"),e.ALL_DICT.entity_shows={en:r,de:a};var T=function(){function e(){}return e}();e.entity_skill=T,__reflect(T.prototype,"Sproto.entity_skill"),e.ALL_DICT.entity_skill={en:l,de:s};var I=function(){function e(){}return e}();e.sc_battle_action_request=I,__reflect(I.prototype,"Sproto.sc_battle_action_request"),e.ALL_DICT.sc_battle_action_request={en:u,de:c};var w=function(){function e(){}return e}();e.sc_battle_entitys_request=w,__reflect(w.prototype,"Sproto.sc_battle_entitys_request"),e.ALL_DICT.sc_battle_entitys_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_battle_manual_request=A,__reflect(A.prototype,"Sproto.sc_battle_manual_request"),e.ALL_DICT.sc_battle_manual_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_battle_record_request=k,__reflect(k.prototype,"Sproto.sc_battle_record_request"),e.ALL_DICT.sc_battle_record_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_battle_set_auto_request=E,__reflect(E.prototype,"Sproto.sc_battle_set_auto_request"),e.ALL_DICT.sc_battle_set_auto_request={en:v,de:g};var M=function(){function e(){}return e}();e.spec_attr=M,__reflect(M.prototype,"Sproto.spec_attr"),e.ALL_DICT.spec_attr={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rebornmark=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rebornmark&&o.wi(t.rebornmark,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_public_boss_challenge_request=p,__reflect(p.prototype,"Sproto.cs_public_boss_challenge_request"),e.ALL_DICT.cs_public_boss_challenge_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_public_boss_challenge_reborn_request=h,__reflect(h.prototype,"Sproto.cs_public_boss_challenge_reborn_request"),e.ALL_DICT.cs_public_boss_challenge_reborn_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_public_boss_reborn_mark_request=d,__reflect(d.prototype,"Sproto.cs_public_boss_reborn_mark_request"),e.ALL_DICT.cs_public_boss_reborn_mark_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_public_boss_record_attack_request=_,__reflect(_.prototype,"Sproto.cs_public_boss_record_attack_request"),e.ALL_DICT.cs_public_boss_record_attack_request={en:l,de:s};var f=function(){function e(){}return e}();e.cs_public_boss_record_kill_request=f,__reflect(f.prototype,"Sproto.cs_public_boss_record_kill_request"),e.ALL_DICT.cs_public_boss_record_kill_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.injure=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.injure&&o.wi(t.injure,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.hp=e.ri();break;case 2:t.iskill=e.rb();break;case 3:t.reborntime=e.ri();break;case 4:t.fightnum=e.ri();break;case 5:t.reborn=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.hp&&o.wi(t.hp,1),void 0!=t.iskill&&o.wb(t.iskill,2),void 0!=t.reborntime&&o.wi(t.reborntime,3),void 0!=t.fightnum&&o.wi(t.fightnum,4),void 0!=t.reborn&&o.wb(t.reborn,5),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.power=e.ri();break;case 2:t.killtime=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.power&&o.wi(t.power,1),void 0!=t.killtime&&o.wi(t.killtime,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossInfos=e.roa("public_boss_info");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossInfos&&o.woa("public_boss_info",t.bossInfos,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.attackinfos=e.roa("public_attack_info");break;case 1:t.rank=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.attackinfos&&o.woa("public_attack_info",t.attackinfos,0),void 0!=t.rank&&o.wi(t.rank,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.killinfos=e.roa("public_kill_info");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.killinfos&&o.woa("public_kill_info",t.killinfos,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.attackinfos=e.roa("public_attack_info");break;case 1:t.myattackinfo=e.ro("public_attack_info");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.attackinfos&&o.woa("public_attack_info",t.attackinfos,0),void 0!=t.myattackinfo&&o.wo("public_attack_info",t.myattackinfo,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.challengenum=e.ri();break;case 1:t.recovertiem=e.ri();break;case 2:t.purchasecount=e.ri();break;case 3:t.reborncount=e.ri();break;case 4:t.rebornmark=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.challengenum&&o.wi(t.challengenum,0),void 0!=t.recovertiem&&o.wi(t.recovertiem,1),void 0!=t.purchasecount&&o.wi(t.purchasecount,2),void 0!=t.reborncount&&o.wi(t.reborncount,3),void 0!=t.rebornmark&&o.wi(t.rebornmark,4),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossInfo=e.ro("public_boss_info");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossInfo&&o.wo("public_boss_info",t.bossInfo,0),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.public_attack_info=b,__reflect(b.prototype,"Sproto.public_attack_info"),e.ALL_DICT.public_attack_info={en:i,de:t};var S=function(){function e(){}return e}();e.public_boss_info=S,__reflect(S.prototype,"Sproto.public_boss_info"),e.ALL_DICT.public_boss_info={en:n,de:o};var G=function(){function e(){}return e}();e.public_kill_info=G,__reflect(G.prototype,"Sproto.public_kill_info"),e.ALL_DICT.public_kill_info={en:r,de:a};var T=function(){function e(){}return e}();e.sc_public_boss_base_list_request=T,__reflect(T.prototype,"Sproto.sc_public_boss_base_list_request"),e.ALL_DICT.sc_public_boss_base_list_request={en:l,de:s};var I=function(){function e(){}return e}();e.sc_public_boss_challenge_fail_request=I,__reflect(I.prototype,"Sproto.sc_public_boss_challenge_fail_request"),e.ALL_DICT.sc_public_boss_challenge_fail_request={en:u,de:c};var w=function(){function e(){}return e}();e.sc_public_boss_record_attack_request=w,__reflect(w.prototype,"Sproto.sc_public_boss_record_attack_request"),e.ALL_DICT.sc_public_boss_record_attack_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_public_boss_record_kill_request=A,__reflect(A.prototype,"Sproto.sc_public_boss_record_kill_request"),e.ALL_DICT.sc_public_boss_record_kill_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_public_boss_update_attack_request=k,__reflect(k.prototype,"Sproto.sc_public_boss_update_attack_request"),e.ALL_DICT.sc_public_boss_update_attack_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_public_boss_update_challenge_request=E,__reflect(E.prototype,"Sproto.sc_public_boss_update_challenge_request"),e.ALL_DICT.sc_public_boss_update_challenge_request={en:v,de:g};var M=function(){function e(){}return e}();e.sc_public_boss_update_one_request=M,__reflect(M.prototype,"Sproto.sc_public_boss_update_one_request"),e.ALL_DICT.sc_public_boss_update_one_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_brother_activation_request=a,__reflect(a.prototype,"Sproto.cs_brother_activation_request"),e.ALL_DICT.cs_brother_activation_request={en:i,de:t};var r=function(){function e(){}return e
}();e.cs_brother_activation_response=r,__reflect(r.prototype,"Sproto.cs_brother_activation_response"),e.ALL_DICT.cs_brother_activation_response={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.wia(t.data,0),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_brother_info_request=o,__reflect(o.prototype,"Sproto.sc_brother_info_request"),e.ALL_DICT.sc_brother_info_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.buddyType=e.ri();break;case 1:t.pos=e.ri();break;case 2:t.washType=e.ri();break;case 3:t.lock=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.buddyType&&o.wi(t.buddyType,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.washType&&o.wi(t.washType,2),void 0!=t.lock&&o.wia(t.lock,3),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.cs_buddy_wash_request=o,__reflect(o.prototype,"Sproto.cs_buddy_wash_request"),e.ALL_DICT.cs_buddy_wash_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.buddyType=e.ri();break;case 1:t.pos=e.ri();break;case 2:t.washType=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.buddyType&&o.wi(t.buddyType,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.washType&&o.wi(t.washType,2),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_buddy_wash_request=o,__reflect(o.prototype,"Sproto.sc_buddy_wash_request"),e.ALL_DICT.sc_buddy_wash_request={en:i,de:t}}(Sproto||(Sproto={}));var C2sProtocol=function(e){function t(){var t=e.call(this)||this,i=t.Protocol;return i.Set(7654,"CreateActor_request","CreateActor_response"),i.Set(7653,"EnterGame_request","EnterGame_response"),i.Set(7652,"QueryList_request","QueryList_response"),i.Set(7655,"RandName_request","RandName_response"),i.Set(7651,"checkAccount_request","checkAccount_response"),i.Set(132,"cs_accu_login_get_request",null),i.Set(2607,"cs_activity_action_request",null),i.Set(22002,"cs_activity_enter_request",null),i.Set(22003,"cs_activity_hall_request",null),i.Set(22001,"cs_activity_info_req_request",null),i.Set(2606,"cs_activity_open_request",null),i.Set(2605,null,null),i.Set(2603,"cs_activity_send_dabiao_info_request",null),i.Set(2604,"cs_activity_send_level_info_request",null),i.Set(2602,"cs_activity_send_reward_request",null),i.Set(5904,"cs_advanced_buy_request",null),i.Set(5901,"cs_advanced_charger_reward_request",null),i.Set(5902,"cs_advanced_lv_reward_request",null),i.Set(5903,"cs_advanced_rank_request",null),i.Set(5801,"cs_answer_answer_request",null),i.Set(5803,"cs_answer_answer_rank_request",null),i.Set(5802,"cs_answer_answer_ui_request","cs_answer_answer_ui_response"),i.Set(13003,"cs_arena_get_reward_request",null),i.Set(13001,"cs_arena_info_request","cs_arena_info_response"),i.Set(13002,"cs_arena_pk_request",null),i.Set(13005,"cs_arena_rank_request","cs_arena_rank_response"),i.Set(2806,"cs_auction_buy_request",null),i.Set(2803,"cs_auction_list_request",null),i.Set(2804,"cs_auction_offer_request",null),i.Set(2808,"cs_auction_query_item_request","cs_auction_query_item_response"),i.Set(2805,"cs_auction_record_request",null),i.Set(2802,"cs_auction_select_request",null),i.Set(2807,"cs_auction_update_request",null),i.Set(2801,"cs_auction_useitem_request",null),i.Set(8201,"cs_baby_active_request","cs_baby_active_response"),i.Set(8202,"cs_baby_addgift_request","cs_baby_addgift_response"),i.Set(8204,"cs_baby_refreshskill_request","cs_baby_refreshskill_response"),i.Set(8203,"cs_baby_rename_request","cs_baby_rename_response"),i.Set(8205,"cs_baby_setskillin_request","cs_baby_setskillin_response"),i.Set(8206,"cs_baby_start_get_request","cs_baby_start_get_response"),i.Set(8210,"cs_baby_start_light_request","cs_baby_start_light_response"),i.Set(8209,"cs_baby_start_smelt_request","cs_baby_start_smelt_response"),i.Set(8208,"cs_baby_start_up_lv_request","cs_baby_start_up_lv_response"),i.Set(8207,"cs_baby_start_use_request","cs_baby_start_use_response"),i.Set(401,"cs_bag_add_grid_request",null),i.Set(403,"cs_bag_get_goods_by_store_request",null),i.Set(410,"cs_bag_recycle_request",null),i.Set(409,"cs_bag_smelt_request",null),i.Set(402,"cs_bag_use_item_request",null),i.Set(7656,null,null),i.Set(125,"cs_baserecord_info_request",null),i.Set(7001,"cs_battle_play_finish_request",null),i.Set(7002,"cs_battle_set_auto_request",null),i.Set(7e3,"cs_battle_use_skill_request",null),i.Set(8001,"cs_brother_activation_request","cs_brother_activation_response"),i.Set(13004,"cs_buy_pk_request","cs_buy_pk_response"),i.Set(2202,"cs_cashCow_box_rewards_request",null),i.Set(2201,"cs_cashCow_shake_request",null),i.Set(122,"cs_change_player_name_request",null),i.Set(107,null,null),i.Set(3116,"cs_chat_check_online_request","cs_chat_check_online_response"),i.Set(3111,"cs_chat_private_send_init_request",null),i.Set(3101,"cs_chat_send_info_request",null),i.Set(3120,"cs_chat_share_info_request",null),i.Set(26003,"cs_climb_all_rank_request",null),i.Set(26004,"cs_climb_curr_rank_request",null),i.Set(26005,"cs_climb_get_reward_request",null),i.Set(26006,"cs_climb_leave_request",null),i.Set(26007,"cs_climb_leave_time_request","cs_climb_leave_time_response"),i.Set(102,"cs_create_new_sub_role_request",null),i.Set(26001,"cs_crimb_join_request","cs_crimb_join_response"),i.Set(26002,"cs_crimb_pk_request",null),i.Set(130,"cs_cross_team_reward_count_request",null),i.Set(5703,"cs_dailyTask_activity_find_request","cs_dailyTask_activity_find_response"),i.Set(5704,"cs_dailyTask_activity_find_all_exp_request","cs_dailyTask_activity_find_all_exp_response"),i.Set(5702,"cs_dailyTask_activity_reward_request","cs_dailyTask_activity_reward_response"),i.Set(5705,"cs_dailyTask_otherActivity_complete_request",null),i.Set(5707,"cs_dailyTask_otherActivity_monster_request",null),i.Set(5706,"cs_dailyTask_otherActivity_reward_request",null),i.Set(5701,"cs_dailyTask_up_level_request","cs_dailyTask_up_level_response"),i.Set(5708,"cs_dailyTask_up_monster_request",null),i.Set(14011,"cs_effect_skin_activate_request",null),i.Set(14012,"cs_effect_skin_change_request",null),i.Set(14001,"cs_effect_title_activate_request",null),i.Set(14002,"cs_effect_title_change_request",null),i.Set(28003,"cs_eightyOneHard_buy_request",null),i.Set(28004,"cs_eightyOneHard_record_request","cs_eightyOneHard_record_response"),i.Set(28001,"cs_eightyOneHard_sweep_request",null),i.Set(28002,"cs_eightyOneHard_sweep_all_request",null),i.Set(6301,"cs_enhance_get_reward_request","cs_enhance_get_reward_response"),i.Set(511,"cs_equip_forge_request",null),i.Set(522,"cs_equip_red_generate_request",null),i.Set(521,"cs_equip_red_inject_request","cs_equip_red_inject_response"),i.Set(523,"cs_equip_red_upgrade_request",null),i.Set(503,"cs_equip_upgrade_request",null),i.Set(501,"cs_equip_wear_request",null),i.Set(20006,"cs_escort_avenge_request",null),i.Set(20016,"cs_escort_catch_info_request","cs_escort_catch_info_response"),i.Set(20001,"cs_escort_enter_request",null),i.Set(20010,"cs_escort_get_reward_request",null),i.Set(20015,"cs_escort_perform_request",null),i.Set(20003,"cs_escort_quick_complete_request",null),i.Set(20002,"cs_escort_refresh_quality_request",null),i.Set(20004,"cs_escort_rob_list_request","cs_escort_rob_list_response"),i.Set(20005,"cs_escort_rob_perform_request",null),i.Set(19001,"cs_exchange_gold_info_request","cs_exchange_gold_info_response"),i.Set(19002,"cs_exchange_gold_perform_request","cs_exchange_gold_perform_response"),i.Set(11001,null,null),i.Set(11004,"cs_field_boss_challenge_request",null),i.Set(5601,"cs_formation_activation_request","cs_formation_activation_response"),i.Set(5603,"cs_formation_add_exp_request","cs_formation_add_exp_response"),i.Set(5602,"cs_formation_drug_request","cs_formation_drug_response"),i.Set(5606,"cs_formation_skill_up_request","cs_formation_skill_up_response"),i.Set(5604,"cs_formation_soul_add_exp_request","cs_formation_soul_add_exp_response"),i.Set(5605,"cs_formation_use_request","cs_formation_use_response"),i.Set(30005,"cs_friend_add_blacklist_request",null),i.Set(30001,"cs_friend_add_follow_request","cs_friend_add_follow_response"),i.Set(30006,"cs_friend_del_blacklist_request",null),i.Set(30002,"cs_friend_del_follow_request",null),i.Set(30016,"cs_friend_follow_nominate_request",null),i.Set(30011,"cs_friend_gift_friendcoin_request",null),i.Set(30012,"cs_friend_receive_friendcoin_request",null),i.Set(5205,"cs_fuben_heaven_reward_request",null),i.Set(5201,"cs_fuben_join_request",null),i.Set(5203,"cs_fuben_star_reward_request",null),i.Set(5202,"cs_fuben_sweep_request",null),i.Set(5204,"cs_fuben_wildgeeseFb_hard_request",null),i.Set(123,"cs_get_gongnengyugao_reward_request","cs_get_gongnengyugao_reward_response"),i.Set(126,null,"cs_get_kefu_qq_response"),i.Set(120,"cs_get_other_actor_equip_request",null),i.Set(116,"cs_get_other_actor_info_request",null),i.Set(119,"cs_get_other_actor_item_request",null),i.Set(118,"cs_get_other_actor_pet_request",null),i.Set(117,"cs_get_other_actor_spellsRes_request",null),i.Set(121,"cs_get_other_actor_xianlv_request",null),i.Set(114,"cs_get_server_time_request",null),i.Set(3831,"cs_guild_apply_list_request",null),i.Set(3872,"cs_guild_boss_info_request",null),i.Set(3873,"cs_guild_boss_pk_request",null),i.Set(3874,"cs_guild_boss_reward_request",null),i.Set(3814,"cs_guild_change_notice_request",null),i.Set(3809,"cs_guild_change_office_request",null),i.Set(3804,"cs_guild_create_request",null),i.Set(3842,"cs_guild_donate_request",null),i.Set(3871,"cs_guild_dungeon_info_request","cs_guild_dungeon_info_response"),i.Set(3807,null,null),i.Set(3822,null,null),i.Set(3801,null,null),i.Set(3803,null,null),i.Set(3802,null,null),i.Set(3825,null,null),i.Set(3806,"cs_guild_join_request",null),i.Set(3811,"cs_guild_kick_request",null),i.Set(3866,"cs_guild_map_exchange_info_request","cs_guild_map_exchange_info_response"),i.Set(3868,"cs_guild_map_exchange_pay_request","cs_guild_map_exchange_pay_response"),i.Set(3867,"cs_guild_map_exchange_refresh_request","cs_guild_map_exchange_refresh_response"),i.Set(3865,"cs_guild_map_reward_request","cs_guild_map_reward_response"),i.Set(3862,"cs_guild_map_task_complete_request",null),i.Set(3861,"cs_guild_map_task_info_request","cs_guild_map_task_info_response"),i.Set(3864,"cs_guild_map_task_quick_request","cs_guild_map_task_quick_response"),i.Set(3863,"cs_guild_map_task_reset_request","cs_guild_map_task_reset_response"),i.Set(3875,"cs_guild_member_recruit_request",null),i.Set(3847,"cs_guild_peach_eat_request",null),i.Set(3846,"cs_guild_peach_info_request",null),i.Set(3848,"cs_guild_peach_reward_request",null),i.Set(3853,"cs_guild_protector_everyday_reward_request",null),i.Set(3851,"cs_guild_protector_info_request",null),i.Set(3852,"cs_guild_protector_uplevel_request",null),i.Set(3805,null,null),i.Set(3829,"cs_guild_rename_request",null),i.Set(3826,"cs_guild_sendchat_request",null),i.Set(3827,"cs_guild_sendshare_request",null),i.Set(3808,"cs_guild_setapply_request",null),i.Set(3828,"cs_guild_setautoadd_request",null),i.Set(3856,"cs_guild_skill_info_request",null),i.Set(3857,"cs_guild_skill_learn_request",null),i.Set(32002,"cs_guildboss_challenge_request",null),i.Set(32004,null,null),i.Set(32003,"cs_guildboss_collect_box_start_request",null),i.Set(32001,null,null),i.Set(32007,null,"cs_guildboss_get_rewards_response"),i.Set(32006,null,null),i.Set(32005,null,null),i.Set(25001,"cs_guildmine_enter_request",null),i.Set(25007,"cs_guildmine_force_join_request","cs_guildmine_force_join_response"),i.Set(25011,"cs_guildmine_gather_request","cs_guildmine_gather_response"),i.Set(25006,"cs_guildmine_join_mine_request","cs_guildmine_join_mine_response"),i.Set(25008,"cs_guildmine_leave_mine_request",null),i.Set(25002,"cs_guildmine_mine_info_request",null),i.Set(25016,"cs_guildmine_score_rank_request",null),i.Set(27030,"cs_guildwar_all_guild_rank_info_request",null),i.Set(27031,"cs_guildwar_all_player_rank_info_request",null),i.Set(27006,"cs_guildwar_attack_boss_request",null),i.Set(27005,"cs_guildwar_attack_player_request","cs_guildwar_attack_player_response"),i.Set(27011,"cs_guildwar_clear_attackcd_request","cs_guildwar_clear_attackcd_response"),i.Set(27012,"cs_guildwar_clear_reborncd_request","cs_guildwar_clear_reborncd_response"),i.Set(27001,"cs_guildwar_enter_request","cs_guildwar_enter_response"),i.Set(27036,"cs_guildwar_exit_barrier_request",null),i.Set(27041,"cs_guildwar_get_score_reward_request",null),i.Set(27003,"cs_guildwar_last_barrier_request","cs_guildwar_last_barrier_response"),i.Set(27002,"cs_guildwar_next_barrier_request","cs_guildwar_next_barrier_response"),i.Set(27042,"cs_guildwar_team_recruit_request",null),i.Set(6102,"cs_holy_pet_get_info_request","cs_holy_pet_get_info_response"),i.Set(6101,"cs_holy_pet_get_reward_request",null),i.Set(6103,"cs_holy_pet_luck_draw_request","cs_holy_pet_luck_draw_response"),i.Set(6602,"cs_holy_xinjun_get_info_request","cs_holy_xinjun_get_info_response"),i.Set(6603,"cs_holy_xinjun_luck_draw_request","cs_holy_xinjun_luck_draw_response"),i.Set(2102,"cs_kfboss_challenge_request",null),i.Set(2104,null,null),i.Set(2103,"cs_kfboss_collect_box_start_request",null),i.Set(2101,null,null),i.Set(2107,null,"cs_kfboss_get_rewards_response"),i.Set(2106,null,null),i.Set(2105,null,null),i.Set(24004,"cs_king_city_attack_request",null),i.Set(24002,"cs_king_city_data_request",null),i.Set(24003,"cs_king_city_guard_request",null),i.Set(24008,"cs_king_get_point_reward_request",null),i.Set(24001,"cs_king_join_request","cs_king_join_response"),i.Set(24007,"cs_king_leave_request",null),i.Set(24011,"cs_king_my_guard_city_request",null),i.Set(24006,"cs_king_pay_revive_request",null),i.Set(24005,"cs_king_pk_request",null),i.Set(24009,"cs_king_point_data_request",null),i.Set(24012,"cs_king_team_recruit_request",null),i.Set(24010,"cs_king_transform_request",null),i.Set(3506,"cs_ladder_buy_count_request",null),i.Set(3505,"cs_ladder_get_rank_info_request",null),i.Set(3502,"cs_ladder_get_some_one_request",null),i.Set(3504,"cs_ladder_get_week_reward_request",null),i.Set(3508,null,null),i.Set(3509,null,null),i.Set(3501,"cs_ladder_info_request",null),i.Set(3503,"cs_ladder_start_play_request",null),i.Set(3507,"cs_ladder_worship_request",null),i.Set(2702,"cs_luck_draw_request",null),i.Set(2701,"cs_luck_info_request",null),i.Set(2703,"cs_luck_tianshen_request","cs_luck_tianshen_response"),i.Set(901,"cs_mail_get_content_request",null),i.Set(902,"cs_mail_get_reward_request",null),i.Set(23001,"cs_map_enter_request","cs_map_enter_response"),i.Set(23004,"cs_map_fly_request",null),i.Set(23002,"cs_map_leave_request","cs_map_leave_response"),i.Set(23031,"cs_map_maincity_channel_info_request","cs_map_maincity_channel_info_response"),i.Set(23032,"cs_map_maincity_enter_request","cs_map_maincity_enter_response"),i.Set(23033,"cs_map_maincity_worship_request","cs_map_maincity_worship_response"),i.Set(23003,"cs_map_move_request",null),i.Set(8103,"cs_marry_answer_request",null),i.Set(8107,null,null),i.Set(8106,"cs_marry_flower_request","cs_marry_flower_response"),i.Set(8101,null,null),i.Set(8104,"cs_marry_greeting_request","cs_marry_greeting_response"),i.Set(8112,null,null),i.Set(8113,"cs_marry_house_grade_request","cs_marry_house_grade_response"),i.Set(8114,null,null),i.Set(8105,null,null),i.Set(8109,null,null),i.Set(8111,"cs_marry_love_revert_request","cs_marry_love_revert_response"),i.Set(8110,"cs_marry_love_use_request","cs_marry_love_use_response"),i.Set(8102,"cs_marry_propose_request","cs_marry_propose_response"),i.Set(3704,"cs_money_recharge_get_request",null),i.Set(3702,null,null),i.Set(3703,"cs_money_tree_reward_request",null),i.Set(16001,"cs_panacea_use_request",null),i.Set(601,"cs_pet_active_request","cs_pet_active_response"),i.Set(603,"cs_pet_addexp_request","cs_pet_addexp_response"),i.Set(604,"cs_pet_addgift_request","cs_pet_addgift_response"),i.Set(621,null,null),i.Set(609,"cs_pet_fly_addexp_request","cs_pet_fly_addexp_response"),i.Set(610,"cs_pet_fly_restore_request",null),i.Set(602,"cs_pet_outbound_request",null),i.Set(606,"cs_pet_refreshskill_request","cs_pet_refreshskill_response"),i.Set(605,"cs_pet_rename_request","cs_pet_rename_response"),i.Set(608,"cs_pet_setshow_request",null),i.Set(607,"cs_pet_setskillin_request","cs_pet_setskillin_response"),i.Set(6501,"cs_position_getawards_request","cs_position_getawards_response"),i.Set(12001,null,null),i.Set(12010,"cs_public_boss_challenge_request",null),i.Set(12011,"cs_public_boss_challenge_reborn_request",null),i.Set(12002,null,null),i.Set(12030,"cs_public_boss_reborn_mark_request",null),i.Set(12015,"cs_public_boss_record_attack_request",null),i.Set(12016,"cs_public_boss_record_kill_request",null),i.Set(3707,"cs_qd_get_reward_request",null),i.Set(3706,"cs_qd_recharge_get_request",null),i.Set(3705,null,null),i.Set(22104,"cs_qualifyingMgr_gamble_request","cs_qualifyingMgr_gamble_response"),i.Set(22101,"cs_qualifyingMgr_info_request",null),i.Set(22106,"cs_qualifyingMgr_map_info_request",null),i.Set(22103,"cs_qualifyingMgr_rank_request","cs_qualifyingMgr_rank_response"),i.Set(22102,"cs_qualifyingMgr_sign_up_request","cs_qualifyingMgr_sign_up_response"),i.Set(22107,"cs_qualifyingMgr_timeout_request","cs_qualifyingMgr_timeout_response"),i.Set(22105,"cs_qualifyingMgr_video_request",null),i.Set(211,"cs_raid_add_count_request",null),i.Set(218,"cs_raid_assist_pkboss_request","cs_raid_assist_pkboss_response"),i.Set(212,"cs_raid_call_boss_play_request",null),i.Set(210,"cs_raid_challenget_request",null),i.Set(208,"cs_raid_chapter_config_request","cs_raid_chapter_config_response"),i.Set(204,"cs_raid_exit_raid_request",null),i.Set(205,"cs_raid_get_award_request",null),i.Set(203,"cs_raid_get_boss_reward_request",null),i.Set(216,"cs_raid_get_chapter_reward_request","cs_raid_get_chapter_reward_response"),i.Set(206,"cs_raid_get_world_award_request",null),i.Set(214,null,null),i.Set(215,null,null),i.Set(217,"cs_raid_open_auto_request",null),i.Set(202,"cs_raid_pk_boss_request",null),i.Set(201,"cs_raid_wave_complete_request",null),i.Set(1901,"cs_rank_req_request",null),i.Set(133,"cs_rank_worship_request",null),i.Set(1904,"cs_rank_worship_all_count_request",null),i.Set(1902,"cs_rank_worship_data_req_request",null),i.Set(1903,"cs_rank_worship_once_request",null),i.Set(1803,"cs_recharge_first_reward_request",null),i.Set(1807,"cs_recharge_get_choice_reward_request",null),i.Set(1806,"cs_recharge_get_dailyrecharge_reward_request",null),i.Set(1802,null,"cs_recharge_get_order_number_response"),i.Set(1801,"cs_recharge_normal_request",null),i.Set(6402,"cs_rechargew_getawards_request",null),i.Set(6401,"cs_rechargew_setpop_request",null),i.Set(3002,"cs_rolefly_add_xiuwei_request","cs_rolefly_add_xiuwei_response"),i.Set(3003,"cs_rolefly_get_addnum_request","cs_rolefly_get_addnum_response"),i.Set(3e3,"cs_rolefly_up_request","cs_rolefly_up_response"),i.Set(3001,"cs_rolefly_up_skill_request","cs_rolefly_up_skill_response"),i.Set(128,"cs_send_client_point_request",null),i.Set(199,"cs_send_heart_beat_request",null),i.Set(127,"cs_send_kefu_msg_request",null),i.Set(100,"cs_sene_gm_command_request",null),i.Set(124,"cs_set_clientvalue_request",null),i.Set(1701,"cs_shop_buy_request",null),i.Set(1706,"cs_shop_mystical_buy_request","cs_shop_mystical_buy_response"),i.Set(1707,"cs_shop_mystical_refresh_request","cs_shop_mystical_refresh_response"),i.Set(129,"cs_show_rank_player_request",null),i.Set(306,"cs_skill_sort_release_request",null),i.Set(304,"cs_skill_upgrade_request",null),i.Set(305,"cs_skill_upgrade_all_request",null),i.Set(5403,"cs_spellsRes_lock_request","cs_spellsRes_lock_response"),i.Set(5401,"cs_spellsRes_make_request","cs_spellsRes_make_response"),i.Set(5405,"cs_spellsRes_smelt_request","cs_spellsRes_smelt_response"),i.Set(5404,"cs_spellsRes_up_lv_request","cs_spellsRes_up_lv_response"),i.Set(5402,"cs_spellsRes_use_request","cs_spellsRes_use_response"),i.Set(18001,"cs_task_info_request",null),i.Set(18002,"cs_task_reward_request",null),i.Set(29004,"cs_teachers_apply_confirm_request",null),i.Set(29003,"cs_teachers_apply_teacher_request","cs_teachers_apply_teacher_response"),i.Set(29009,"cs_teachers_force_get_reward_request","cs_teachers_force_get_reward_response"),i.Set(29006,"cs_teachers_get_exp_request",null),i.Set(29002,"cs_teachers_get_message_request","cs_teachers_get_message_response"),i.Set(29007,"cs_teachers_graduation_request",null),i.Set(29001,"cs_teachers_message_request","cs_teachers_message_response"),i.Set(29005,"cs_teachers_teach_exp_request",null),i.Set(17011,"cs_team_call_robot_request",null),i.Set(17012,"cs_team_condition_request",null),i.Set(17003,"cs_team_create_request","cs_team_create_response"),i.Set(17010,"cs_team_fight_request","cs_team_fight_response"),i.Set(17001,"cs_team_info_request",null),i.Set(17005,"cs_team_join_request","cs_team_join_response"),i.Set(17008,"cs_team_kick_request","cs_team_kick_response"),i.Set(17006,"cs_team_leave_request","cs_team_leave_response"),i.Set(17002,"cs_team_list_request",null),i.Set(17009,"cs_team_quick_request","cs_team_quick_response"),i.Set(5005,"cs_template_buy_clothes_request",null),i.Set(5004,"cs_template_clothes_request",null),i.Set(5006,"cs_template_drug_request",null),i.Set(5003,"cs_template_equip_request",null),i.Set(5007,"cs_template_reward_request",null),i.Set(5001,"cs_template_up_level_request",null),i.Set(5002,"cs_template_up_skill_request",null),i.Set(5008,"cs_template_up_stage_request",null),i.Set(5302,"cs_tiannv_wash_replace_req_request",null),i.Set(5301,"cs_tiannv_wash_req_request",null),i.Set(5502,"cs_tianshen_activation_request","cs_tianshen_activation_response"),i.Set(5503,"cs_tianshen_drug_request","cs_tianshen_drug_response"),i.Set(5501,"cs_tianshen_exchange_request",null),i.Set(5506,"cs_tianshen_fight_request","cs_tianshen_fight_response"),i.Set(5508,"cs_tianshen_fly_addexp_request","cs_tianshen_fly_addexp_response"),i.Set(5505,"cs_tianshen_promotion_request","cs_tianshen_promotion_response"),i.Set(5507,"cs_tianshen_spells_request","cs_tianshen_spells_response"),i.Set(5504,"cs_tianshen_up_level_request","cs_tianshen_up_level_response"),i.Set(6202,"cs_totems_add_exp_request","cs_totems_add_exp_response"),i.Set(6203,"cs_totems_breach_request","cs_totems_breach_response"),i.Set(6201,"cs_totems_open_request","cs_totems_open_response"),i.Set(8108,"cs_use_gift_request",null),i.Set(15001,"cs_vein_Breakthrough_request",null),i.Set(21001,"cs_vip_get_awards_request",null),i.Set(21002,"cs_vip_get_other_awards_request",null),i.Set(6004,"cs_vipboss_challenge_request",null),i.Set(6001,null,null),i.Set(131,null,null),i.Set(31006,"cs_welfare_bonus_open_request","cs_welfare_bonus_open_response"),i.Set(31011,"cs_welfare_get_loginreward_request",null),i.Set(31051,"cs_welfare_lv_reward_request","cs_welfare_lv_reward_response"),i.Set(31053,"cs_welfare_redeemcode_request","cs_welfare_redeemcode_response"),i.Set(31052,"cs_welfare_reward_request","cs_welfare_reward_response"),i.Set(31001,"cs_welfare_signin_req_request","cs_welfare_signin_req_response"),i.Set(5104,"cs_wing_dress_request","cs_wing_dress_response"),i.Set(5105,"cs_wing_drug_request","cs_wing_drug_response"),i.Set(5103,"cs_wing_equip_request",null),i.Set(5101,"cs_wing_upgrade_level_request",null),i.Set(5102,"cs_wing_upgrade_skill_request",null),i.Set(801,"cs_xianjun_active_request","cs_xianjun_active_response"),i.Set(803,"cs_xianjun_addexp_request","cs_xianjun_addexp_response"),i.Set(802,"cs_xianjun_outbound_request",null),i.Set(804,"cs_xianjun_upstar_request","cs_xianjun_upstar_response"),i.Set(701,"cs_xianlv_active_request","cs_xianlv_active_response"),i.Set(703,"cs_xianlv_addexp_request","cs_xianlv_addexp_response"),i.Set(702,"cs_xianlv_outbound_request",null),i.Set(704,"cs_xianlv_upstar_request","cs_xianlv_upstar_response"),i.Set(213,"sc_raid_clear_cd_request",null),t}return __extends(t,e),t.cs_sene_gm_command=100,t.cs_create_new_sub_role=102,t.cs_change_role_level=107,t.cs_get_server_time=114,t.cs_get_other_actor_info=116,t.cs_get_other_actor_spellsRes=117,t.cs_get_other_actor_pet=118,t.cs_get_other_actor_item=119,t.cs_get_other_actor_equip=120,t.cs_get_other_actor_xianlv=121,t.cs_change_player_name=122,t.cs_get_gongnengyugao_reward=123,t.cs_set_clientvalue=124,t.cs_baserecord_info=125,t.cs_get_kefu_qq=126,t.cs_send_kefu_msg=127,t.cs_send_client_point=128,t.cs_show_rank_player=129,t.cs_cross_team_reward_count=130,t.cs_welcome_confirm=131,t.cs_accu_login_get=132,t.cs_rank_worship=133,t.cs_send_heart_beat=199,t.cs_raid_wave_complete=201,t.cs_raid_pk_boss=202,t.cs_raid_get_boss_reward=203,t.cs_raid_exit_raid=204,t.cs_raid_get_award=205,t.cs_raid_get_world_award=206,t.cs_raid_chapter_config=208,t.cs_raid_challenget=210,t.cs_raid_add_count=211,t.cs_raid_call_boss_play=212,t.sc_raid_clear_cd=213,t.cs_raid_goto2=214,t.cs_raid_next_map=215,t.cs_raid_get_chapter_reward=216,t.cs_raid_open_auto=217,t.cs_raid_assist_pkboss=218,t.cs_skill_upgrade=304,t.cs_skill_upgrade_all=305,t.cs_skill_sort_release=306,t.cs_bag_add_grid=401,t.cs_bag_use_item=402,t.cs_bag_get_goods_by_store=403,t.cs_bag_smelt=409,t.cs_bag_recycle=410,t.cs_equip_wear=501,t.cs_equip_upgrade=503,t.cs_equip_forge=511,t.cs_equip_red_inject=521,t.cs_equip_red_generate=522,t.cs_equip_red_upgrade=523,t.cs_pet_active=601,t.cs_pet_outbound=602,t.cs_pet_addexp=603,t.cs_pet_addgift=604,t.cs_pet_rename=605,t.cs_pet_refreshskill=606,t.cs_pet_setskillin=607,t.cs_pet_setshow=608,t.cs_pet_fly_addexp=609,t.cs_pet_fly_restore=610,t.cs_pet_catch=621,t.cs_xianlv_active=701,t.cs_xianlv_outbound=702,t.cs_xianlv_addexp=703,t.cs_xianlv_upstar=704,t.cs_xianjun_active=801,t.cs_xianjun_outbound=802,t.cs_xianjun_addexp=803,t.cs_xianjun_upstar=804,t.cs_mail_get_content=901,t.cs_mail_get_reward=902,t.cs_shop_buy=1701,t.cs_shop_mystical_buy=1706,t.cs_shop_mystical_refresh=1707,t.cs_recharge_normal=1801,t.cs_recharge_get_order_number=1802,t.cs_recharge_first_reward=1803,t.cs_recharge_get_dailyrecharge_reward=1806,t.cs_recharge_get_choice_reward=1807,t.cs_rank_req=1901,t.cs_rank_worship_data_req=1902,t.cs_rank_worship_once=1903,t.cs_rank_worship_all_count=1904,t.cs_kfboss_entermap=2101,t.cs_kfboss_challenge=2102,t.cs_kfboss_collect_box_start=2103,t.cs_kfboss_collect_box_cancel=2104,t.cs_kfboss_relive=2105,t.cs_kfboss_getranks=2106,t.cs_kfboss_get_rewards=2107,t.cs_cashCow_shake=2201,t.cs_cashCow_box_rewards=2202,t.cs_activity_send_reward=2602,t.cs_activity_send_dabiao_info=2603,t.cs_activity_send_level_info=2604,t.cs_activity_race_history=2605,t.cs_activity_open=2606,t.cs_activity_action=2607,t.cs_luck_info=2701,t.cs_luck_draw=2702,t.cs_luck_tianshen=2703,t.cs_auction_useitem=2801,t.cs_auction_select=2802,t.cs_auction_list=2803,t.cs_auction_offer=2804,t.cs_auction_record=2805,t.cs_auction_buy=2806,t.cs_auction_update=2807,t.cs_auction_query_item=2808,t.cs_rolefly_up=3e3,t.cs_rolefly_up_skill=3001,t.cs_rolefly_add_xiuwei=3002,t.cs_rolefly_get_addnum=3003,t.cs_chat_send_info=3101,t.cs_chat_private_send_init=3111,t.cs_chat_check_online=3116,t.cs_chat_share_info=3120,t.cs_ladder_info=3501,t.cs_ladder_get_some_one=3502,t.cs_ladder_start_play=3503,t.cs_ladder_get_week_reward=3504,t.cs_ladder_get_rank_info=3505,t.cs_ladder_buy_count=3506,t.cs_ladder_worship=3507,t.cs_ladder_get_winner_info=3508,t.cs_ladder_get_winner_records=3509,t.cs_money_tree_play=3702,t.cs_money_tree_reward=3703,t.cs_money_recharge_get=3704,t.cs_qd_recharge_info=3705,t.cs_qd_recharge_get=3706,t.cs_qd_get_reward=3707,t.cs_guild_getinfo=3801,t.cs_guild_getmembers=3802,t.cs_guild_getlist=3803,t.cs_guild_create=3804,t.cs_guild_quit=3805,t.cs_guild_join=3806,t.cs_guild_getapply=3807,t.cs_guild_setapply=3808,t.cs_guild_change_office=3809,t.cs_guild_kick=3811,t.cs_guild_change_notice=3814,t.cs_guild_gethistory=3822,t.cs_guild_getplayerinfo=3825,t.cs_guild_sendchat=3826,t.cs_guild_sendshare=3827,t.cs_guild_setautoadd=3828,t.cs_guild_rename=3829,t.cs_guild_apply_list=3831,t.cs_guild_donate=3842,t.cs_guild_peach_info=3846,t.cs_guild_peach_eat=3847,t.cs_guild_peach_reward=3848,t.cs_guild_protector_info=3851,t.cs_guild_protector_uplevel=3852,t.cs_guild_protector_everyday_reward=3853,t.cs_guild_skill_info=3856,t.cs_guild_skill_learn=3857,t.cs_guild_map_task_info=3861,t.cs_guild_map_task_complete=3862,t.cs_guild_map_task_reset=3863,t.cs_guild_map_task_quick=3864,t.cs_guild_map_reward=3865,t.cs_guild_map_exchange_info=3866,t.cs_guild_map_exchange_refresh=3867,t.cs_guild_map_exchange_pay=3868,t.cs_guild_dungeon_info=3871,t.cs_guild_boss_info=3872,t.cs_guild_boss_pk=3873,t.cs_guild_boss_reward=3874,t.cs_guild_member_recruit=3875,t.cs_template_up_level=5001,t.cs_template_up_skill=5002,t.cs_template_equip=5003,t.cs_template_clothes=5004,t.cs_template_buy_clothes=5005,t.cs_template_drug=5006,t.cs_template_reward=5007,t.cs_template_up_stage=5008,t.cs_wing_upgrade_level=5101,t.cs_wing_upgrade_skill=5102,t.cs_wing_equip=5103,t.cs_wing_dress=5104,t.cs_wing_drug=5105,t.cs_fuben_join=5201,t.cs_fuben_sweep=5202,t.cs_fuben_star_reward=5203,t.cs_fuben_wildgeeseFb_hard=5204,t.cs_fuben_heaven_reward=5205,t.cs_tiannv_wash_req=5301,t.cs_tiannv_wash_replace_req=5302,t.cs_spellsRes_make=5401,t.cs_spellsRes_use=5402,t.cs_spellsRes_lock=5403,t.cs_spellsRes_up_lv=5404,t.cs_spellsRes_smelt=5405,t.cs_tianshen_exchange=5501,t.cs_tianshen_activation=5502,t.cs_tianshen_drug=5503,t.cs_tianshen_up_level=5504,t.cs_tianshen_promotion=5505,t.cs_tianshen_fight=5506,t.cs_tianshen_spells=5507,t.cs_tianshen_fly_addexp=5508,t.cs_formation_activation=5601,t.cs_formation_drug=5602,t.cs_formation_add_exp=5603,t.cs_formation_soul_add_exp=5604,t.cs_formation_use=5605,t.cs_formation_skill_up=5606,t.cs_dailyTask_up_level=5701,t.cs_dailyTask_activity_reward=5702,t.cs_dailyTask_activity_find=5703,t.cs_dailyTask_activity_find_all_exp=5704,t.cs_dailyTask_otherActivity_complete=5705,t.cs_dailyTask_otherActivity_reward=5706,t.cs_dailyTask_otherActivity_monster=5707,t.cs_dailyTask_up_monster=5708,t.cs_answer_answer=5801,t.cs_answer_answer_ui=5802,t.cs_answer_answer_rank=5803,t.cs_advanced_charger_reward=5901,t.cs_advanced_lv_reward=5902,t.cs_advanced_rank=5903,t.cs_advanced_buy=5904,t.cs_vipboss_list=6001,t.cs_vipboss_challenge=6004,t.cs_holy_pet_get_reward=6101,t.cs_holy_pet_get_info=6102,t.cs_holy_pet_luck_draw=6103,t.cs_totems_open=6201,t.cs_totems_add_exp=6202,t.cs_totems_breach=6203,t.cs_enhance_get_reward=6301,t.cs_rechargew_setpop=6401,t.cs_rechargew_getawards=6402,t.cs_position_getawards=6501,t.cs_holy_xinjun_get_info=6602,t.cs_holy_xinjun_luck_draw=6603,t.cs_battle_use_skill=7e3,t.cs_battle_play_finish=7001,t.cs_battle_set_auto=7002,t.checkAccount=7651,t.QueryList=7652,t.EnterGame=7653,t.CreateActor=7654,t.RandName=7655,t.cs_base_get_game_time=7656,t.cs_brother_activation=8001,t.cs_marry_friends=8101,t.cs_marry_propose=8102,t.cs_marry_answer=8103,t.cs_marry_greeting=8104,t.cs_marry_levelup=8105,t.cs_marry_flower=8106,t.cs_marry_divorce=8107,t.cs_use_gift=8108,t.cs_marry_love_info=8109,t.cs_marry_love_use=8110,t.cs_marry_love_revert=8111,t.cs_marry_house_addexp=8112,t.cs_marry_house_grade=8113,t.cs_marry_house_use_partner_up=8114,t.cs_baby_active=8201,t.cs_baby_addgift=8202,t.cs_baby_rename=8203,t.cs_baby_refreshskill=8204,t.cs_baby_setskillin=8205,t.cs_baby_start_get=8206,t.cs_baby_start_use=8207,t.cs_baby_start_up_lv=8208,t.cs_baby_start_smelt=8209,t.cs_baby_start_light=8210,t.cs_field_boss_boss_list=11001,t.cs_field_boss_challenge=11004,t.cs_public_boss_buy_challenge=12001,t.cs_public_boss_info_list=12002,t.cs_public_boss_challenge=12010,t.cs_public_boss_challenge_reborn=12011,t.cs_public_boss_record_attack=12015,t.cs_public_boss_record_kill=12016,t.cs_public_boss_reborn_mark=12030,t.cs_arena_info=13001,t.cs_arena_pk=13002,t.cs_arena_get_reward=13003,t.cs_buy_pk=13004,t.cs_arena_rank=13005,t.cs_effect_title_activate=14001,t.cs_effect_title_change=14002,t.cs_effect_skin_activate=14011,t.cs_effect_skin_change=14012,t.cs_vein_Breakthrough=15001,t.cs_panacea_use=16001,t.cs_team_info=17001,t.cs_team_list=17002,t.cs_team_create=17003,t.cs_team_join=17005,t.cs_team_leave=17006,t.cs_team_kick=17008,t.cs_team_quick=17009,t.cs_team_fight=17010,t.cs_team_call_robot=17011,t.cs_team_condition=17012,t.cs_task_info=18001,t.cs_task_reward=18002,t.cs_exchange_gold_info=19001,t.cs_exchange_gold_perform=19002,t.cs_escort_enter=20001,t.cs_escort_refresh_quality=20002,t.cs_escort_quick_complete=20003,t.cs_escort_rob_list=20004,t.cs_escort_rob_perform=20005,t.cs_escort_avenge=20006,t.cs_escort_get_reward=20010,t.cs_escort_perform=20015,t.cs_escort_catch_info=20016,t.cs_vip_get_awards=21001,t.cs_vip_get_other_awards=21002,t.cs_activity_info_req=22001,t.cs_activity_enter=22002,t.cs_activity_hall=22003,t.cs_qualifyingMgr_info=22101,t.cs_qualifyingMgr_sign_up=22102,t.cs_qualifyingMgr_rank=22103,t.cs_qualifyingMgr_gamble=22104,t.cs_qualifyingMgr_video=22105,t.cs_qualifyingMgr_map_info=22106,t.cs_qualifyingMgr_timeout=22107,t.cs_map_enter=23001,t.cs_map_leave=23002,t.cs_map_move=23003,t.cs_map_fly=23004,t.cs_map_maincity_channel_info=23031,t.cs_map_maincity_enter=23032,t.cs_map_maincity_worship=23033,t.cs_king_join=24001,t.cs_king_city_data=24002,t.cs_king_city_guard=24003,t.cs_king_city_attack=24004,t.cs_king_pk=24005,t.cs_king_pay_revive=24006,t.cs_king_leave=24007,t.cs_king_get_point_reward=24008,t.cs_king_point_data=24009,t.cs_king_transform=24010,t.cs_king_my_guard_city=24011,t.cs_king_team_recruit=24012,t.cs_guildmine_enter=25001,t.cs_guildmine_mine_info=25002,t.cs_guildmine_join_mine=25006,t.cs_guildmine_force_join=25007,t.cs_guildmine_leave_mine=25008,t.cs_guildmine_gather=25011,t.cs_guildmine_score_rank=25016,t.cs_crimb_join=26001,t.cs_crimb_pk=26002,t.cs_climb_all_rank=26003,t.cs_climb_curr_rank=26004,t.cs_climb_get_reward=26005,t.cs_climb_leave=26006,t.cs_climb_leave_time=26007,t.cs_guildwar_enter=27001,t.cs_guildwar_next_barrier=27002,t.cs_guildwar_last_barrier=27003,t.cs_guildwar_attack_player=27005,t.cs_guildwar_attack_boss=27006,t.cs_guildwar_clear_attackcd=27011,t.cs_guildwar_clear_reborncd=27012,t.cs_guildwar_all_guild_rank_info=27030,t.cs_guildwar_all_player_rank_info=27031,t.cs_guildwar_exit_barrier=27036,t.cs_guildwar_get_score_reward=27041,t.cs_guildwar_team_recruit=27042,t.cs_eightyOneHard_sweep=28001,t.cs_eightyOneHard_sweep_all=28002,t.cs_eightyOneHard_buy=28003,t.cs_eightyOneHard_record=28004,t.cs_teachers_message=29001,t.cs_teachers_get_message=29002,t.cs_teachers_apply_teacher=29003,t.cs_teachers_apply_confirm=29004,t.cs_teachers_teach_exp=29005,t.cs_teachers_get_exp=29006,t.cs_teachers_graduation=29007,t.cs_teachers_force_get_reward=29009,t.cs_friend_add_follow=30001,t.cs_friend_del_follow=30002,t.cs_friend_add_blacklist=30005,t.cs_friend_del_blacklist=30006,t.cs_friend_gift_friendcoin=30011,t.cs_friend_receive_friendcoin=30012,t.cs_friend_follow_nominate=30016,t.cs_welfare_signin_req=31001,t.cs_welfare_bonus_open=31006,t.cs_welfare_get_loginreward=31011,t.cs_welfare_lv_reward=31051,t.cs_welfare_reward=31052,t.cs_welfare_redeemcode=31053,t.cs_guildboss_entermap=32001,t.cs_guildboss_challenge=32002,t.cs_guildboss_collect_box_start=32003,t.cs_guildboss_collect_box_cancel=32004,t.cs_guildboss_relive=32005,t.cs_guildboss_getranks=32006,t.cs_guildboss_get_rewards=32007,t
}(Sproto.ProtocolBase);__reflect(C2sProtocol.prototype,"C2sProtocol");var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxid&&o.wi(t.boxid,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_cashCow_box_rewards_request=a,__reflect(a.prototype,"Sproto.cs_cashCow_box_rewards_request"),e.ALL_DICT.cs_cashCow_box_rewards_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_cashCow_shake_request=r,__reflect(r.prototype,"Sproto.cs_cashCow_shake_request"),e.ALL_DICT.cs_cashCow_shake_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.odds=e.ri();break;case 3:t.shake=e.ri();break;case 4:t.drawBin=e.ria();break;case 5:t.amplitude=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.odds&&o.wi(t.odds,2),void 0!=t.shake&&o.wi(t.shake,3),void 0!=t.drawBin&&o.wia(t.drawBin,4),void 0!=t.amplitude&&o.wi(t.amplitude,5),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_cashCow_info_request=o,__reflect(o.prototype,"Sproto.sc_cashCow_info_request"),e.ALL_DICT.sc_cashCow_info_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerIdArray=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.playerIdArray&&o.wia(t.playerIdArray,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.onlineStatus=e.rba();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.onlineStatus&&o.wba(t.onlineStatus,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetId=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetId&&o.wi(t.targetId,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.str=e.rs();break;case 2:t.recId=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.str&&o.ws(t.str,1),void 0!=t.recId&&o.wi(t.recId,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shareId=e.ri();break;case 1:t.params=e.roa("client_chat_param");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.shareId&&o.wi(t.shareId,0),void 0!=t.params&&o.woa("client_chat_param",t.params,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_chat_check_online_request=p,__reflect(p.prototype,"Sproto.cs_chat_check_online_request"),e.ALL_DICT.cs_chat_check_online_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_chat_check_online_response=h,__reflect(h.prototype,"Sproto.cs_chat_check_online_response"),e.ALL_DICT.cs_chat_check_online_response={en:n,de:o};var d=function(){function e(){}return e}();e.cs_chat_private_send_init_request=d,__reflect(d.prototype,"Sproto.cs_chat_private_send_init_request"),e.ALL_DICT.cs_chat_private_send_init_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_chat_send_info_request=_,__reflect(_.prototype,"Sproto.cs_chat_send_info_request"),e.ALL_DICT.cs_chat_send_info_request={en:l,de:s};var f=function(){function e(){}return e}();e.cs_chat_share_info_request=f,__reflect(f.prototype,"Sproto.cs_chat_share_info_request"),e.ALL_DICT.cs_chat_share_info_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.id=e.ri();break;case 2:t.name=e.rs();break;case 4:t.job=e.ri();break;case 5:t.sex=e.ri();break;case 6:t.vip=e.ri();break;case 7:t.str=e.rs();break;case 8:t.serverid=e.ri();break;case 9:t.shareId=e.ri();break;case 10:t.share=e.ro("share_date");break;case 11:t.time=e.ri();break;case 12:t.headframe=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,13);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.name&&o.ws(t.name,2),void 0!=t.job&&o.wi(t.job,4),void 0!=t.sex&&o.wi(t.sex,5),void 0!=t.vip&&o.wi(t.vip,6),void 0!=t.str&&o.ws(t.str,7),void 0!=t.serverid&&o.wi(t.serverid,8),void 0!=t.shareId&&o.wi(t.shareId,9),void 0!=t.share&&o.wo("share_date",t.share,10),void 0!=t.time&&o.wi(t.time,11),void 0!=t.headframe&&o.wi(t.headframe,12),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.player=e.roa("chat_player_data");break;case 1:t.role=e.roa("chat_role_data");break;case 2:t.equip=e.ro("equip_data");break;case 3:t.pet=e.ro("pet_info");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.player&&o.woa("chat_player_data",t.player,0),void 0!=t.role&&o.woa("chat_role_data",t.role,1),void 0!=t.equip&&o.wo("equip_data",t.equip,2),void 0!=t.pet&&o.wo("pet_info",t.pet,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.id=e.ri();break;case 2:t.vip=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.vip&&o.wi(t.vip,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.job=e.ri();break;case 1:t.sex=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.job&&o.wi(t.job,0),void 0!=t.sex&&o.wi(t.sex,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.filter=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.filter&&o.wi(t.filter,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.chatDatas=e.roa("chat_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.chatDatas&&o.woa("chat_data",t.chatDatas,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.success=e.rb();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.success&&o.wb(t.success,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.chatData=e.ro("chat_data");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.chatData&&o.wo("chat_data",t.chatData,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.session=e.rs();break;case 1:t.chatData=e.roa("chat_data");break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.session&&o.ws(t.session,0),void 0!=t.chatData&&o.woa("chat_data",t.chatData,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.session=e.rs();break;case 1:t.chatData=e.ro("chat_data");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.session&&o.ws(t.session,0),void 0!=t.chatData&&o.wo("chat_data",t.chatData,1),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.chat_data=b,__reflect(b.prototype,"Sproto.chat_data"),e.ALL_DICT.chat_data={en:i,de:t};var S=function(){function e(){}return e}();e.chat_need_infos=S,__reflect(S.prototype,"Sproto.chat_need_infos"),e.ALL_DICT.chat_need_infos={en:n,de:o};var G=function(){function e(){}return e}();e.chat_player_data=G,__reflect(G.prototype,"Sproto.chat_player_data"),e.ALL_DICT.chat_player_data={en:r,de:a};var T=function(){function e(){}return e}();e.chat_role_data=T,__reflect(T.prototype,"Sproto.chat_role_data"),e.ALL_DICT.chat_role_data={en:l,de:s};var I=function(){function e(){}return e}();e.sc_chat_filte_list_request=I,__reflect(I.prototype,"Sproto.sc_chat_filte_list_request"),e.ALL_DICT.sc_chat_filte_list_request={en:u,de:c};var w=function(){function e(){}return e}();e.sc_chat_init_msg_request=w,__reflect(w.prototype,"Sproto.sc_chat_init_msg_request"),e.ALL_DICT.sc_chat_init_msg_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_chat_is_send_success_request=A,__reflect(A.prototype,"Sproto.sc_chat_is_send_success_request"),e.ALL_DICT.sc_chat_is_send_success_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_chat_new_msg_request=k,__reflect(k.prototype,"Sproto.sc_chat_new_msg_request"),e.ALL_DICT.sc_chat_new_msg_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_chat_private_init_msg_request=E,__reflect(E.prototype,"Sproto.sc_chat_private_init_msg_request"),e.ALL_DICT.sc_chat_private_init_msg_request={en:v,de:g};var M=function(){function e(){}return e}();e.sc_chat_private_new_msg_request=M,__reflect(M.prototype,"Sproto.sc_chat_private_new_msg_request"),e.ALL_DICT.sc_chat_private_new_msg_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.time=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.time&&o.wi(t.time,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}var y=function(){function e(){}return e}();e.cs_climb_all_rank_request=y,__reflect(y.prototype,"Sproto.cs_climb_all_rank_request"),e.ALL_DICT.cs_climb_all_rank_request={en:i,de:t};var C=function(){function e(){}return e}();e.cs_climb_curr_rank_request=C,__reflect(C.prototype,"Sproto.cs_climb_curr_rank_request"),e.ALL_DICT.cs_climb_curr_rank_request={en:n,de:o};var b=function(){function e(){}return e}();e.cs_climb_get_reward_request=b,__reflect(b.prototype,"Sproto.cs_climb_get_reward_request"),e.ALL_DICT.cs_climb_get_reward_request={en:r,de:a};var S=function(){function e(){}return e}();e.cs_climb_leave_request=S,__reflect(S.prototype,"Sproto.cs_climb_leave_request"),e.ALL_DICT.cs_climb_leave_request={en:l,de:s};var G=function(){function e(){}return e}();e.cs_climb_leave_time_request=G,__reflect(G.prototype,"Sproto.cs_climb_leave_time_request"),e.ALL_DICT.cs_climb_leave_time_request={en:u,de:c};var T=function(){function e(){}return e}();e.cs_climb_leave_time_response=T,__reflect(T.prototype,"Sproto.cs_climb_leave_time_response"),e.ALL_DICT.cs_climb_leave_time_response={en:h,de:p};var I=function(){function e(){}return e}();e.cs_crimb_join_request=I,__reflect(I.prototype,"Sproto.cs_crimb_join_request"),e.ALL_DICT.cs_crimb_join_request={en:_,de:d};var w=function(){function e(){}return e}();e.cs_crimb_join_response=w,__reflect(w.prototype,"Sproto.cs_crimb_join_response"),e.ALL_DICT.cs_crimb_join_response={en:m,de:f};var A=function(){function e(){}return e}();e.cs_crimb_pk_request=A,__reflect(A.prototype,"Sproto.cs_crimb_pk_request"),e.ALL_DICT.cs_crimb_pk_request={en:v,de:g}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;case 3:t.monsterid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),void 0!=t.monsterid&&o.wi(t.monsterid,3),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.rank=e.ri();break;case 2:t.serverid=e.ri();break;case 3:t.name=e.rs();break;case 4:t.score=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.rank&&o.wi(t.rank,1),void 0!=t.serverid&&o.wi(t.serverid,2),void 0!=t.name&&o.ws(t.name,3),void 0!=t.score&&o.wi(t.score,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ro("climb_shows");break;case 1:t.serverid=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.shows&&o.wo("climb_shows",t.shows,0),void 0!=t.serverid&&o.wi(t.serverid,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ria();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.id=e.ri();break;case 4:t.name=e.rs();break;case 5:t.serverid=e.ri();break;case 6:t.guildid=e.ri();break;case 7:t.guildname=e.rs();break;case 8:t.level=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.shows&&o.wia(t.shows,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.id&&o.wi(t.id,3),void 0!=t.name&&o.ws(t.name,4),void 0!=t.serverid&&o.wi(t.serverid,5),void 0!=t.guildid&&o.wi(t.guildid,6),void 0!=t.guildname&&o.ws(t.guildname,7),void 0!=t.level&&o.wi(t.level,8),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ranklist=e.roa("climb_rank_data");break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.shows=e.ria();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ranklist&&o.woa("climb_rank_data",t.ranklist,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.shows&&o.wia(t.shows,3),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ranklist=e.roa("climb_rank_data");break;case 1:t.king=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ranklist&&o.woa("climb_rank_data",t.ranklist,0),void 0!=t.king&&o.wi(t.king,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.isfighting=e.rb();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.isfighting&&o.wb(t.isfighting,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.score=e.ri();break;case 1:t.rewardsocre=e.ri();break;case 2:t.fighting=e.ria();break;case 3:t.monsters=e.roa("climb_mon");break;case 4:t.king=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.score&&o.wi(t.score,0),void 0!=t.rewardsocre&&o.wi(t.rewardsocre,1),void 0!=t.fighting&&o.wia(t.fighting,2),void 0!=t.monsters&&o.woa("climb_mon",t.monsters,3),void 0!=t.king&&o.wi(t.king,4),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.dbid&&o.wi(t.dbid,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.monsters=e.roa("climb_mon");break;case 1:t.flag=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.monsters&&o.woa("climb_mon",t.monsters,0),void 0!=t.flag&&o.wi(t.flag,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewards=e.roa("reward_data");break;case 1:t.sharedata=e.ro("climb_report_sharedata");break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.rewards&&o.woa("reward_data",t.rewards,0),void 0!=t.sharedata&&o.wo("climb_report_sharedata",t.sharedata,1),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.score=e.ri();break;case 1:t.rewardsocre=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.score&&o.wi(t.score,0),void 0!=t.rewardsocre&&o.wi(t.rewardsocre,1),e.SprotoCore.CloseSerialize(o)}var I=function(){function e(){}return e}();e.climb_mon=I,__reflect(I.prototype,"Sproto.climb_mon"),e.ALL_DICT.climb_mon={en:i,de:t};var w=function(){function e(){}return e}();e.climb_rank_data=w,__reflect(w.prototype,"Sproto.climb_rank_data"),e.ALL_DICT.climb_rank_data={en:n,de:o};var A=function(){function e(){}return e}();e.climb_report_sharedata=A,__reflect(A.prototype,"Sproto.climb_report_sharedata"),e.ALL_DICT.climb_report_sharedata={en:r,de:a};var k=function(){function e(){}return e}();e.climb_shows=k,__reflect(k.prototype,"Sproto.climb_shows"),e.ALL_DICT.climb_shows={en:l,de:s};var E=function(){function e(){}return e}();e.sc_climb_all_rank_request=E,__reflect(E.prototype,"Sproto.sc_climb_all_rank_request"),e.ALL_DICT.sc_climb_all_rank_request={en:u,de:c};var M=function(){function e(){}return e}();e.sc_climb_curr_rank_request=M,__reflect(M.prototype,"Sproto.sc_climb_curr_rank_request"),e.ALL_DICT.sc_climb_curr_rank_request={en:h,de:p};var D=function(){function e(){}return e}();e.sc_climb_fighting_change_request=D,__reflect(D.prototype,"Sproto.sc_climb_fighting_change_request"),e.ALL_DICT.sc_climb_fighting_change_request={en:_,de:d};var P=function(){function e(){}return e}();e.sc_climb_info_request=P,__reflect(P.prototype,"Sproto.sc_climb_info_request"),e.ALL_DICT.sc_climb_info_request={en:m,de:f};var L=function(){function e(){}return e}();e.sc_climb_king_request=L,__reflect(L.prototype,"Sproto.sc_climb_king_request"),e.ALL_DICT.sc_climb_king_request={en:v,de:g};var R=function(){function e(){}return e}();e.sc_climb_refresh_mon_request=R,__reflect(R.prototype,"Sproto.sc_climb_refresh_mon_request"),e.ALL_DICT.sc_climb_refresh_mon_request={en:C,de:y};var x=function(){function e(){}return e}();e.sc_climb_report_request=x,__reflect(x.prototype,"Sproto.sc_climb_report_request"),e.ALL_DICT.sc_climb_report_request={en:S,de:b};var B=function(){function e(){}return e}();e.sc_climb_score_info_request=B,__reflect(B.prototype,"Sproto.sc_climb_score_info_request"),e.ALL_DICT.sc_climb_score_info_request={en:T,de:G}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activityNo=e.ri();break;case 1:t.cashtype=e.ri();break;case 2:t.findType=e.ri();break;case 3:t.num=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.activityNo&&o.wi(t.activityNo,0),void 0!=t.cashtype&&o.wi(t.cashtype,1),void 0!=t.findType&&o.wi(t.findType,2),void 0!=t.num&&o.wi(t.num,3),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exp=e.ri();break;case 2:t.activityNo=e.ri();break;case 3:t.num=e.ri();break;case 4:t.findType=e.ri();break;case 5:t.findExpNum=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.activityNo&&o.wi(t.activityNo,2),void 0!=t.num&&o.wi(t.num,3),void 0!=t.findType&&o.wi(t.findType,4),void 0!=t.findExpNum&&o.wi(t.findExpNum,5),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.findExpNum=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.findExpNum&&o.wi(t.findExpNum,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardNo=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rewardNo&&o.wi(t.rewardNo,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.activityReward=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.activityReward&&o.wi(t.activityReward,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherActivity=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.otherActivity&&o.wi(t.otherActivity,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherActivity=e.ri();break;case 1:t.reward=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.otherActivity&&o.wi(t.otherActivity,0),void 0!=t.reward&&o.wi(t.reward,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.lv=e.ri();break;case 2:t.exp=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.exp&&o.wi(t.exp,2),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}var I=function(){function e(){}return e}();e.cs_dailyTask_activity_find_request=I,__reflect(I.prototype,"Sproto.cs_dailyTask_activity_find_request"),e.ALL_DICT.cs_dailyTask_activity_find_request={en:i,de:t};var w=function(){function e(){}return e}();e.cs_dailyTask_activity_find_response=w,__reflect(w.prototype,"Sproto.cs_dailyTask_activity_find_response"),e.ALL_DICT.cs_dailyTask_activity_find_response={en:n,de:o};var A=function(){function e(){}return e}();e.cs_dailyTask_activity_find_all_exp_request=A,__reflect(A.prototype,"Sproto.cs_dailyTask_activity_find_all_exp_request"),e.ALL_DICT.cs_dailyTask_activity_find_all_exp_request={en:r,de:a};var k=function(){function e(){}return e}();e.cs_dailyTask_activity_find_all_exp_response=k,__reflect(k.prototype,"Sproto.cs_dailyTask_activity_find_all_exp_response"),e.ALL_DICT.cs_dailyTask_activity_find_all_exp_response={en:l,de:s};var E=function(){function e(){}return e}();e.cs_dailyTask_activity_reward_request=E,__reflect(E.prototype,"Sproto.cs_dailyTask_activity_reward_request"),e.ALL_DICT.cs_dailyTask_activity_reward_request={en:u,de:c};var M=function(){function e(){}return e}();e.cs_dailyTask_activity_reward_response=M,__reflect(M.prototype,"Sproto.cs_dailyTask_activity_reward_response"),e.ALL_DICT.cs_dailyTask_activity_reward_response={en:h,de:p};var D=function(){function e(){}return e}();e.cs_dailyTask_otherActivity_complete_request=D,__reflect(D.prototype,"Sproto.cs_dailyTask_otherActivity_complete_request"),e.ALL_DICT.cs_dailyTask_otherActivity_complete_request={en:_,de:d};var P=function(){function e(){}return e}();e.cs_dailyTask_otherActivity_monster_request=P,__reflect(P.prototype,"Sproto.cs_dailyTask_otherActivity_monster_request"),e.ALL_DICT.cs_dailyTask_otherActivity_monster_request={en:m,de:f};var L=function(){function e(){}return e}();e.cs_dailyTask_otherActivity_reward_request=L,__reflect(L.prototype,"Sproto.cs_dailyTask_otherActivity_reward_request"),e.ALL_DICT.cs_dailyTask_otherActivity_reward_request={en:v,de:g};var R=function(){function e(){}return e}();e.cs_dailyTask_up_level_request=R,__reflect(R.prototype,"Sproto.cs_dailyTask_up_level_request"),e.ALL_DICT.cs_dailyTask_up_level_request={en:C,de:y};var x=function(){function e(){}return e}();e.cs_dailyTask_up_level_response=x,__reflect(x.prototype,"Sproto.cs_dailyTask_up_level_response"),e.ALL_DICT.cs_dailyTask_up_level_response={en:S,de:b};var B=function(){function e(){}return e}();e.cs_dailyTask_up_monster_request=B,__reflect(B.prototype,"Sproto.cs_dailyTask_up_monster_request"),e.ALL_DICT.cs_dailyTask_up_monster_request={en:T,de:G}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.num=e.ri();break;case 1:t.reward=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.num&&o.wi(t.num,0),void 0!=t.reward&&o.wi(t.reward,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.monsterList=e.ria();break;case 1:t.num=e.ri();break;case 2:t.time=e.ri();break;case 3:t.reward=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.monsterList&&o.wia(t.monsterList,0),void 0!=t.num&&o.wi(t.num,1),void 0!=t.time&&o.wi(t.time,2),void 0!=t.reward&&o.wi(t.reward,3),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.today=e.roa("dailyTask_data");break;case 3:t.yesterday=e.roa("dailyTask_data");break;case 4:t.findItem=e.roa("dailyTask_data");break;case 5:t.findExp=e.roa("dailyTask_data");break;case 6:t.active=e.ri();break;case 7:t.activeReward=e.ri();break;case 8:t.monster=e.ro("otherActivity_monster");break;case 9:t.chapterWar=e.ro("otherActivity_data");break;case 10:t.teamFB=e.ro("otherActivity_data");break;case 11:t.find=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,12);return void 0!=t.lv&&o.wi(t.lv,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.today&&o.woa("dailyTask_data",t.today,2),void 0!=t.yesterday&&o.woa("dailyTask_data",t.yesterday,3),void 0!=t.findItem&&o.woa("dailyTask_data",t.findItem,4),void 0!=t.findExp&&o.woa("dailyTask_data",t.findExp,5),void 0!=t.active&&o.wi(t.active,6),void 0!=t.activeReward&&o.wi(t.activeReward,7),void 0!=t.monster&&o.wo("otherActivity_monster",t.monster,8),void 0!=t.chapterWar&&o.wo("otherActivity_data",t.chapterWar,9),void 0!=t.teamFB&&o.wo("otherActivity_data",t.teamFB,10),void 0!=t.find&&o.wi(t.find,11),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.today=e.roa("dailyTask_data");break;case 3:t.yesterday=e.roa("dailyTask_data");break;case 4:t.findItem=e.roa("dailyTask_data");break;case 5:t.findExp=e.roa("dailyTask_data");break;case 6:t.active=e.ri();break;case 7:t.activeReward=e.ri();break;case 8:t.monster=e.ro("otherActivity_monster");break;case 9:t.chapterWar=e.ro("otherActivity_data");break;case 10:t.teamFB=e.ro("otherActivity_data");break;case 11:t.find=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,12);return void 0!=t.lv&&o.wi(t.lv,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.today&&o.woa("dailyTask_data",t.today,2),void 0!=t.yesterday&&o.woa("dailyTask_data",t.yesterday,3),void 0!=t.findItem&&o.woa("dailyTask_data",t.findItem,4),void 0!=t.findExp&&o.woa("dailyTask_data",t.findExp,5),void 0!=t.active&&o.wi(t.active,6),void 0!=t.activeReward&&o.wi(t.activeReward,7),void 0!=t.monster&&o.wo("otherActivity_monster",t.monster,8),void 0!=t.chapterWar&&o.wo("otherActivity_data",t.chapterWar,9),void 0!=t.teamFB&&o.wo("otherActivity_data",t.teamFB,10),void 0!=t.find&&o.wi(t.find,11),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.dailyTask_data=p,__reflect(p.prototype,"Sproto.dailyTask_data"),e.ALL_DICT.dailyTask_data={en:i,de:t};var h=function(){function e(){}return e}();e.otherActivity_data=h,__reflect(h.prototype,"Sproto.otherActivity_data"),e.ALL_DICT.otherActivity_data={en:n,de:o};var d=function(){function e(){}return e}();e.otherActivity_monster=d,__reflect(d.prototype,"Sproto.otherActivity_monster"),e.ALL_DICT.otherActivity_monster={en:r,de:a};var _=function(){function e(){}return e}();e.sc_dailyTask_info_request=_,__reflect(_.prototype,"Sproto.sc_dailyTask_info_request"),e.ALL_DICT.sc_dailyTask_info_request={en:l,de:s};var f=function(){function e(){}return e}();e.sc_dailyTask_update_request=f,__reflect(f.prototype,"Sproto.sc_dailyTask_update_request"),e.ALL_DICT.sc_dailyTask_update_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.index&&o.wi(t.index,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.name&&o.ws(t.name,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.job=e.ri();break;case 1:t.sex=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.job&&o.wi(t.job,0),void 0!=t.sex&&o.wi(t.sex,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;
default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.index&&o.wi(t.index,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.index&&o.wi(t.index,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new Z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.qq=e.rs();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.qq&&o.ws(t.qq,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new $,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;case 1:t.slot=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.otherid&&o.wi(t.otherid,0),void 0!=t.slot&&o.wi(t.slot,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.otherid&&o.wi(t.otherid,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;case 1:t.itemhandle=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.otherid&&o.wi(t.otherid,0),void 0!=t.itemhandle&&o.wi(t.itemhandle,1),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new it,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;case 1:t.petid=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.otherid&&o.wi(t.otherid,0),void 0!=t.petid&&o.wi(t.petid,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;case 1:t.pos=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.otherid&&o.wi(t.otherid,0),void 0!=t.pos&&o.wi(t.pos,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.otherid&&o.wi(t.otherid,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new at,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new rt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new st,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.point=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.point&&o.wi(t.point,0),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new lt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.msg=e.rs();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.msg&&o.ws(t.msg,0),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.cmd=e.rs();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.cmd&&o.ws(t.cmd,0),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.value=e.ri();break;case 1:t.list=e.ria();break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.value&&o.wi(t.value,0),void 0!=t.list&&o.wia(t.list,1),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.otherid=e.ri();break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.otherid&&o.wi(t.otherid,0),e.SprotoCore.CloseSerialize(o)}var W=function(){function e(){}return e}();e.cs_accu_login_get_request=W,__reflect(W.prototype,"Sproto.cs_accu_login_get_request"),e.ALL_DICT.cs_accu_login_get_request={en:i,de:t};var z=function(){function e(){}return e}();e.cs_baserecord_info_request=z,__reflect(z.prototype,"Sproto.cs_baserecord_info_request"),e.ALL_DICT.cs_baserecord_info_request={en:n,de:o};var j=function(){function e(){}return e}();e.cs_change_player_name_request=j,__reflect(j.prototype,"Sproto.cs_change_player_name_request"),e.ALL_DICT.cs_change_player_name_request={en:r,de:a};var X=function(){function e(){}return e}();e.cs_create_new_sub_role_request=X,__reflect(X.prototype,"Sproto.cs_create_new_sub_role_request"),e.ALL_DICT.cs_create_new_sub_role_request={en:l,de:s};var K=function(){function e(){}return e}();e.cs_cross_team_reward_count_request=K,__reflect(K.prototype,"Sproto.cs_cross_team_reward_count_request"),e.ALL_DICT.cs_cross_team_reward_count_request={en:u,de:c};var J=function(){function e(){}return e}();e.cs_get_gongnengyugao_reward_request=J,__reflect(J.prototype,"Sproto.cs_get_gongnengyugao_reward_request"),e.ALL_DICT.cs_get_gongnengyugao_reward_request={en:h,de:p};var Q=function(){function e(){}return e}();e.cs_get_gongnengyugao_reward_response=Q,__reflect(Q.prototype,"Sproto.cs_get_gongnengyugao_reward_response"),e.ALL_DICT.cs_get_gongnengyugao_reward_response={en:_,de:d};var Z=function(){function e(){}return e}();e.cs_get_kefu_qq_response=Z,__reflect(Z.prototype,"Sproto.cs_get_kefu_qq_response"),e.ALL_DICT.cs_get_kefu_qq_response={en:m,de:f};var $=function(){function e(){}return e}();e.cs_get_other_actor_equip_request=$,__reflect($.prototype,"Sproto.cs_get_other_actor_equip_request"),e.ALL_DICT.cs_get_other_actor_equip_request={en:v,de:g};var et=function(){function e(){}return e}();e.cs_get_other_actor_info_request=et,__reflect(et.prototype,"Sproto.cs_get_other_actor_info_request"),e.ALL_DICT.cs_get_other_actor_info_request={en:C,de:y};var tt=function(){function e(){}return e}();e.cs_get_other_actor_item_request=tt,__reflect(tt.prototype,"Sproto.cs_get_other_actor_item_request"),e.ALL_DICT.cs_get_other_actor_item_request={en:S,de:b};var it=function(){function e(){}return e}();e.cs_get_other_actor_pet_request=it,__reflect(it.prototype,"Sproto.cs_get_other_actor_pet_request"),e.ALL_DICT.cs_get_other_actor_pet_request={en:T,de:G};var ot=function(){function e(){}return e}();e.cs_get_other_actor_spellsRes_request=ot,__reflect(ot.prototype,"Sproto.cs_get_other_actor_spellsRes_request"),e.ALL_DICT.cs_get_other_actor_spellsRes_request={en:w,de:I};var nt=function(){function e(){}return e}();e.cs_get_other_actor_xianlv_request=nt,__reflect(nt.prototype,"Sproto.cs_get_other_actor_xianlv_request"),e.ALL_DICT.cs_get_other_actor_xianlv_request={en:k,de:A};var at=function(){function e(){}return e}();e.cs_get_server_time_request=at,__reflect(at.prototype,"Sproto.cs_get_server_time_request"),e.ALL_DICT.cs_get_server_time_request={en:M,de:E};var rt=function(){function e(){}return e}();e.cs_rank_worship_request=rt,__reflect(rt.prototype,"Sproto.cs_rank_worship_request"),e.ALL_DICT.cs_rank_worship_request={en:P,de:D};var st=function(){function e(){}return e}();e.cs_send_client_point_request=st,__reflect(st.prototype,"Sproto.cs_send_client_point_request"),e.ALL_DICT.cs_send_client_point_request={en:R,de:L};var lt=function(){function e(){}return e}();e.cs_send_heart_beat_request=lt,__reflect(lt.prototype,"Sproto.cs_send_heart_beat_request"),e.ALL_DICT.cs_send_heart_beat_request={en:B,de:x};var ct=function(){function e(){}return e}();e.cs_send_kefu_msg_request=ct,__reflect(ct.prototype,"Sproto.cs_send_kefu_msg_request"),e.ALL_DICT.cs_send_kefu_msg_request={en:N,de:U};var ut=function(){function e(){}return e}();e.cs_sene_gm_command_request=ut,__reflect(ut.prototype,"Sproto.cs_sene_gm_command_request"),e.ALL_DICT.cs_sene_gm_command_request={en:F,de:O};var pt=function(){function e(){}return e}();e.cs_set_clientvalue_request=pt,__reflect(pt.prototype,"Sproto.cs_set_clientvalue_request"),e.ALL_DICT.cs_set_clientvalue_request={en:q,de:V};var ht=function(){function e(){}return e}();e.cs_show_rank_player_request=ht,__reflect(ht.prototype,"Sproto.cs_show_rank_player_request"),e.ALL_DICT.cs_show_rank_player_request={en:Y,de:H}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new ft,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.hp=e.ri();break;case 2:t.dhp=e.ri();break;case 3:t.showType=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.hp&&o.wi(t.hp,1),void 0!=t.dhp&&o.wi(t.dhp,2),void 0!=t.showType&&o.wi(t.showType,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.handle=e.ri();break;case 2:t.configID=e.ri();break;case 3:t.masterHandle=e.ri();break;case 4:t.x=e.ri();break;case 5:t.y=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.handle&&o.wi(t.handle,1),void 0!=t.configID&&o.wi(t.configID,2),void 0!=t.masterHandle&&o.wi(t.masterHandle,3),void 0!=t.x&&o.wi(t.x,4),void 0!=t.y&&o.wi(t.y,5),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.mp=e.ri();break;case 3:t.playEff=e.rb();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.mp&&o.wi(t.mp,1),void 0!=t.playEff&&o.wb(t.playEff,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.upexp=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.upexp&&o.wi(t.upexp,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new Ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new bt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new St,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.value=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.value&&o.wi(t.value,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new Gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.endX=e.ri();break;case 2:t.endY=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.endX&&o.wi(t.endX,1),void 0!=t.endY&&o.wi(t.endY,2),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guildID=e.ri();break;case 1:t.guildName=e.rs();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.guildID&&o.wi(t.guildID,0),void 0!=t.guildName&&o.ws(t.guildName,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new It,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.itemid=e.ri();break;case 2:t.count=e.ri();break;case 3:t.type=e.ri();break;case 4:t.str=e.rs();break;case 5:t.time=e.ri();break;case 6:t.id=e.ri();break;case 7:t.serverid=e.ri();break;case 8:t.job=e.ri();break;case 9:t.sex=e.ri();break;case 10:t.vip=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.itemid&&o.wi(t.itemid,1),void 0!=t.count&&o.wi(t.count,2),void 0!=t.type&&o.wi(t.type,3),void 0!=t.str&&o.ws(t.str,4),void 0!=t.time&&o.wi(t.time,5),void 0!=t.id&&o.wi(t.id,6),void 0!=t.serverid&&o.wi(t.serverid,7),void 0!=t.job&&o.wi(t.job,8),void 0!=t.sex&&o.wi(t.sex,9),void 0!=t.vip&&o.wi(t.vip,10),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.type=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.type&&o.wi(t.type,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new At,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.count=e.ri();break;case 1:t.record=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.count&&o.wi(t.count,0),void 0!=t.record&&o.wi(t.record,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new kt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.actorid=e.ri();break;case 2:t.serverid=e.ri();break;case 3:t.actorname=e.rs();break;case 4:t.job=e.ri();break;case 5:t.sex=e.ri();break;case 6:t.level=e.ri();break;case 7:t.exp=e.ri();break;case 8:t.power=e.ri();break;case 9:t.gold=e.ri();break;case 10:t.yuanbao=e.ri();break;case 11:t.byb=e.ri();break;case 12:t.contrib=e.ri();break;case 13:t.vip=e.ri();break;case 14:t.bagnum=e.ri();break;case 15:t.clientvalue=e.ri();break;case 16:t.clientvaluelist=e.ria();break;case 17:t.guildid=e.ri();break;case 18:t.guildname=e.rs();break;case 19:t.friendcoin=e.ri();break;case 20:t.pingji=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,21);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.actorid&&o.wi(t.actorid,1),void 0!=t.serverid&&o.wi(t.serverid,2),void 0!=t.actorname&&o.ws(t.actorname,3),void 0!=t.job&&o.wi(t.job,4),void 0!=t.sex&&o.wi(t.sex,5),void 0!=t.level&&o.wi(t.level,6),void 0!=t.exp&&o.wi(t.exp,7),void 0!=t.power&&o.wi(t.power,8),void 0!=t.gold&&o.wi(t.gold,9),void 0!=t.yuanbao&&o.wi(t.yuanbao,10),void 0!=t.byb&&o.wi(t.byb,11),void 0!=t.contrib&&o.wi(t.contrib,12),void 0!=t.vip&&o.wi(t.vip,13),void 0!=t.bagnum&&o.wi(t.bagnum,14),void 0!=t.clientvalue&&o.wi(t.clientvalue,15),void 0!=t.clientvaluelist&&o.wia(t.clientvaluelist,16),void 0!=t.guildid&&o.wi(t.guildid,17),void 0!=t.guildname&&o.ws(t.guildname,18),void 0!=t.friendcoin&&o.wi(t.friendcoin,19),void 0!=t.pingji&&o.wi(t.pingji,20),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new Et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.count=e.ri();break;case 1:t.clear=e.roa("fb_clear_count");break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.count&&o.wi(t.count,0),void 0!=t.clear&&o.woa("fb_clear_count",t.clear,1),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new Mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.ro("equip_data");break;case 1:t.slot=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.data&&o.wo("equip_data",t.data,0),void 0!=t.slot&&o.wi(t.slot,1),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Dt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.ro("item_data");break;case 1:t.itemhandle=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.data&&o.wo("item_data",t.data,0),void 0!=t.itemhandle&&o.wi(t.itemhandle,1),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new Pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.level=e.ri();break;case 2:t.star=e.ri();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.star&&o.wi(t.star,2),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new Lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.status=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.status&&o.wi(t.status,0),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new Rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.total=e.ri();break;case 1:t.today=e.ri();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.total&&o.wi(t.total,0),void 0!=t.today&&o.wi(t.today,1),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.record=e.ro("record_data");break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.record&&o.wo("record_data",t.record,1),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new Bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.record=e.roa("record_data");break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.record&&o.woa("record_data",t.record,1),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new Ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.count=e.ri();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.count&&o.wi(t.count,0),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new Nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.name=e.rs();break;default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.name&&o.ws(t.name,1),e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new Ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pet=e.ro("pet_info");break;case 1:t.petid=e.ri();break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pet&&o.wo("pet_info",t.pet,0),void 0!=t.petid&&o.wi(t.petid,1),e.SprotoCore.CloseSerialize(o)}function Q(e){for(var t=new Ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;case 2:t.level=e.ri();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;case 5:t.power=e.ri();break;case 6:t.vip=e.ri();break;case 7:t.guildName=e.rs();break;case 8:t.partner=e.rs();break;case 9:t.petList=e.ria();break;case 10:t.xianlvList=e.ria();break;case 11:t.shows=e.ria();break;case 12:t.attributeData=e.ria();break;case 13:t.equipsData=e.roa("equip_data");break;case 14:t.headframe=e.ri();break;default:e.nod()}return t}function Z(t,i){var o=e.SprotoCore.GetSerialize(i,15);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),void 0!=t.power&&o.wi(t.power,5),void 0!=t.vip&&o.wi(t.vip,6),void 0!=t.guildName&&o.ws(t.guildName,7),void 0!=t.partner&&o.ws(t.partner,8),void 0!=t.petList&&o.wia(t.petList,9),void 0!=t.xianlvList&&o.wia(t.xianlvList,10),void 0!=t.shows&&o.wia(t.shows,11),void 0!=t.attributeData&&o.wia(t.attributeData,12),void 0!=t.equipsData&&o.woa("equip_data",t.equipsData,13),void 0!=t.headframe&&o.wi(t.headframe,14),e.SprotoCore.CloseSerialize(o)}function $(e){for(var t=new Vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.spellsNo=e.ri();break;case 1:t.lv=e.ri();break;default:e.nod()}return t}function et(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.spellsNo&&o.wi(t.spellsNo,0),void 0!=t.lv&&o.wi(t.lv,1),e.SprotoCore.CloseSerialize(o)}function tt(e){for(var t=new qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerData=e.ro("actor_base_data");break;case 1:t.roleList=e.roa("role_data");break;default:e.nod()}return t}function it(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.playerData&&o.wo("actor_base_data",t.playerData,0),void 0!=t.roleList&&o.woa("role_data",t.roleList,1),e.SprotoCore.CloseSerialize(o)}function ot(e){for(var t=new Ht,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function nt(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function at(e){for(var t=new Yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function rt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function st(e){for(var t=new Wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.endX=e.ri();break;case 2:t.endY=e.ri();break;default:e.nod()}return t}function lt(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.endX&&o.wi(t.endX,1),void 0!=t.endY&&o.wi(t.endY,2),e.SprotoCore.CloseSerialize(o)}function ct(e){for(var t=new zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.roleID=e.ri();break;case 1:t.attributeData=e.ria();break;case 2:t.power=e.ri();break;default:e.nod()}return t}function ut(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.roleID&&o.wi(t.roleID,0),void 0!=t.attributeData&&o.wia(t.attributeData,1),void 0!=t.power&&o.wi(t.power,2),e.SprotoCore.CloseSerialize(o)}function pt(e){for(var t=new jt,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.roleList=e.ro("role_data");break;default:e.nod()}return t}function ht(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.roleList&&o.wo("role_data",t.roleList,1),e.SprotoCore.CloseSerialize(o)}function dt(e){for(var t=new Xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.type=e.ri();break;case 2:t.x=e.ri();break;case 3:t.y=e.ri();break;case 4:t.arg1=e.ri();break;default:e.nod()}return t}function _t(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.type&&o.wi(t.type,1),void 0!=t.x&&o.wi(t.x,2),void 0!=t.y&&o.wi(t.y,3),void 0!=t.arg1&&o.wi(t.arg1,4),e.SprotoCore.CloseSerialize(o)}var ft=function(){function e(){}return e}();e.actor_die_notice_request=ft,__reflect(ft.prototype,"Sproto.actor_die_notice_request"),e.ALL_DICT.actor_die_notice_request={en:i,de:t};var mt=function(){function e(){}return e}();e.blood_update_request=mt,__reflect(mt.prototype,"Sproto.blood_update_request"),e.ALL_DICT.blood_update_request={en:n,de:o};var gt=function(){function e(){}return e}();e.entity_model_base=gt,__reflect(gt.prototype,"Sproto.entity_model_base"),e.ALL_DICT.entity_model_base={en:r,de:a};var vt=function(){function e(){}return e}();e.entity_mp_update_request=vt,__reflect(vt.prototype,"Sproto.entity_mp_update_request"),e.ALL_DICT.entity_mp_update_request={en:l,de:s};var yt=function(){function e(){}return e}();e.exp_change_request=yt,__reflect(yt.prototype,"Sproto.exp_change_request"),e.ALL_DICT.exp_change_request={en:u,de:c};var Ct=function(){function e(){}return e}();e.fb_clear_count=Ct,__reflect(Ct.prototype,"Sproto.fb_clear_count"),e.ALL_DICT.fb_clear_count={en:h,de:p};var bt=function(){function e(){}return e}();e.first_register_request=bt,__reflect(bt.prototype,"Sproto.first_register_request"),e.ALL_DICT.first_register_request={en:_,de:d};var St=function(){function e(){}return e}();e.gold_change_request=St,__reflect(St.prototype,"Sproto.gold_change_request"),e.ALL_DICT.gold_change_request={en:m,de:f};var Gt=function(){function e(){}return e}();e.move_entity_request=Gt,__reflect(Gt.prototype,"Sproto.move_entity_request"),e.ALL_DICT.move_entity_request={en:v,de:g};var Tt=function(){function e(){}return e}();e.player_guild_change_request=Tt,__reflect(Tt.prototype,"Sproto.player_guild_change_request"),e.ALL_DICT.player_guild_change_request={en:C,de:y};var It=function(){function e(){}return e}();e.record_data=It,__reflect(It.prototype,"Sproto.record_data"),e.ALL_DICT.record_data={en:S,de:b};var wt=function(){function e(){}return e}();e.remove_entity_request=wt,__reflect(wt.prototype,"Sproto.remove_entity_request"),e.ALL_DICT.remove_entity_request={en:T,de:G};var At=function(){function e(){}return e}();e.sc_accu_login_request=At,__reflect(At.prototype,"Sproto.sc_accu_login_request"),e.ALL_DICT.sc_accu_login_request={en:w,de:I};var kt=function(){function e(){}return e}();e.sc_actor_base_request=kt,__reflect(kt.prototype,"Sproto.sc_actor_base_request"),e.ALL_DICT.sc_actor_base_request={en:k,de:A};var Et=function(){function e(){}return e}();e.sc_cross_team_reward_count_request=Et,__reflect(Et.prototype,"Sproto.sc_cross_team_reward_count_request"),e.ALL_DICT.sc_cross_team_reward_count_request={en:M,de:E};var Mt=function(){function e(){}return e}();e.sc_other_equip_request=Mt,__reflect(Mt.prototype,"Sproto.sc_other_equip_request"),e.ALL_DICT.sc_other_equip_request={en:P,de:D};var Dt=function(){function e(){}return e}();e.sc_other_item_request=Dt,__reflect(Dt.prototype,"Sproto.sc_other_item_request"),e.ALL_DICT.sc_other_item_request={en:R,de:L};var Pt=function(){function e(){}return e}();e.sc_other_xianlv_request=Pt,__reflect(Pt.prototype,"Sproto.sc_other_xianlv_request"),e.ALL_DICT.sc_other_xianlv_request={en:B,de:x};var Lt=function(){function e(){}return e}();e.sc_rank_worship_request=Lt,__reflect(Lt.prototype,"Sproto.sc_rank_worship_request"),e.ALL_DICT.sc_rank_worship_request={en:N,de:U};var Rt=function(){function e(){}return e}();e.sc_recharge_count_request=Rt,__reflect(Rt.prototype,"Sproto.sc_recharge_count_request"),e.ALL_DICT.sc_recharge_count_request={en:F,de:O};var xt=function(){function e(){}return e}();e.sc_record_add_request=xt,__reflect(xt.prototype,"Sproto.sc_record_add_request"),e.ALL_DICT.sc_record_add_request={en:q,de:V};var Bt=function(){function e(){}return e}();e.sc_record_datas_request=Bt,__reflect(Bt.prototype,"Sproto.sc_record_datas_request"),e.ALL_DICT.sc_record_datas_request={en:Y,de:H};var Ut=function(){function e(){}return e}();e.sc_rename_count_request=Ut,__reflect(Ut.prototype,"Sproto.sc_rename_count_request"),e.ALL_DICT.sc_rename_count_request={en:z,de:W};var Nt=function(){function e(){}return e}();e.sc_rename_result_request=Nt,__reflect(Nt.prototype,"Sproto.sc_rename_result_request"),e.ALL_DICT.sc_rename_result_request={en:X,de:j};var Ot=function(){function e(){}return e}();e.sc_show_other_pet_request=Ot,__reflect(Ot.prototype,"Sproto.sc_show_other_pet_request"),e.ALL_DICT.sc_show_other_pet_request={en:J,de:K};var Ft=function(){function e(){}return e}();e.sc_show_other_player_request=Ft,__reflect(Ft.prototype,"Sproto.sc_show_other_player_request"),e.ALL_DICT.sc_show_other_player_request={en:Z,de:Q};var Vt=function(){function e(){}return e}();e.sc_show_other_spellsRes_request=Vt,__reflect(Vt.prototype,"Sproto.sc_show_other_spellsRes_request"),e.ALL_DICT.sc_show_other_spellsRes_request={en:et,de:$};var qt=function(){function e(){}return e}();e.sc_show_rank_player_request=qt,__reflect(qt.prototype,"Sproto.sc_show_rank_player_request"),e.ALL_DICT.sc_show_rank_player_request={en:it,de:tt};var Ht=function(){function e(){}return e}();e.sc_welcome_request=Ht,__reflect(Ht.prototype,"Sproto.sc_welcome_request"),e.ALL_DICT.sc_welcome_request={en:nt,de:ot};var Yt=function(){function e(){}return e}();e.show_server_tip_request=Yt,__reflect(Yt.prototype,"Sproto.show_server_tip_request"),e.ALL_DICT.show_server_tip_request={en:rt,de:at};var Wt=function(){function e(){}return e}();e.stop_move_entity_request=Wt,__reflect(Wt.prototype,"Sproto.stop_move_entity_request"),e.ALL_DICT.stop_move_entity_request={en:lt,de:st};var zt=function(){function e(){}return e}();e.sub_role_att_change_request=zt,__reflect(zt.prototype,"Sproto.sub_role_att_change_request"),e.ALL_DICT.sub_role_att_change_request={en:ut,de:ct};var jt=function(){function e(){}return e}();e.sub_roles_request=jt,__reflect(jt.prototype,"Sproto.sub_roles_request"),e.ALL_DICT.sub_roles_request={en:ht,de:pt};var Xt=function(){function e(){}return e}();e.sync_entity_pos_request=Xt,__reflect(Xt.prototype,"Sproto.sync_entity_pos_request"),e.ALL_DICT.sync_entity_pos_request={en:_t,de:dt}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_effect_skin_activate_request=c,__reflect(c.prototype,"Sproto.cs_effect_skin_activate_request"),e.ALL_DICT.cs_effect_skin_activate_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_effect_skin_change_request=u,__reflect(u.prototype,"Sproto.cs_effect_skin_change_request"),e.ALL_DICT.cs_effect_skin_change_request={en:n,de:o};var p=function(){function e(){}return e}();e.cs_effect_title_activate_request=p,__reflect(p.prototype,"Sproto.cs_effect_title_activate_request"),e.ALL_DICT.cs_effect_title_activate_request={en:r,de:a};var h=function(){function e(){}return e}();e.cs_effect_title_change_request=h,__reflect(h.prototype,"Sproto.cs_effect_title_change_request"),e.ALL_DICT.cs_effect_title_change_request={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.term=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.term&&o.wi(t.term,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.wearid=e.ri();break;case 1:t.ownlist=e.roa("effect_item");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.wearid&&o.wi(t.wearid,0),void 0!=t.ownlist&&o.woa("effect_item",t.ownlist,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.wearid=e.ri();break;case 1:t.ownlist=e.roa("effect_item");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.wearid&&o.wi(t.wearid,0),void 0!=t.ownlist&&o.woa("effect_item",t.ownlist,1),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.effect_item=s,__reflect(s.prototype,"Sproto.effect_item"),e.ALL_DICT.effect_item={en:i,de:t};var l=function(){function e(){}return e}();e.sc_effect_skin_update_request=l,__reflect(l.prototype,"Sproto.sc_effect_skin_update_request"),e.ALL_DICT.sc_effect_skin_update_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_effect_title_update_request=c,__reflect(c.prototype,"Sproto.sc_effect_title_update_request"),e.ALL_DICT.sc_effect_title_update_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.first=e.ro("eightyOneHard_clear_data");break;case 1:t.fast=e.ro("eightyOneHard_clear_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.first&&o.wo("eightyOneHard_clear_data",t.first,0),void 0!=t.fast&&o.wo("eightyOneHard_clear_data",t.fast,1),e.SprotoCore.CloseSerialize(o)
}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name1=e.rs();break;case 1:t.name2=e.rs();break;case 2:t.name3=e.rs();break;case 3:t.round=e.ri();break;case 4:t.time=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name1&&o.ws(t.name1,0),void 0!=t.name2&&o.ws(t.name2,1),void 0!=t.name3&&o.ws(t.name3,2),void 0!=t.round&&o.wi(t.round,3),void 0!=t.time&&o.wi(t.time,4),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.cs_eightyOneHard_buy_request=d,__reflect(d.prototype,"Sproto.cs_eightyOneHard_buy_request"),e.ALL_DICT.cs_eightyOneHard_buy_request={en:i,de:t};var _=function(){function e(){}return e}();e.cs_eightyOneHard_record_request=_,__reflect(_.prototype,"Sproto.cs_eightyOneHard_record_request"),e.ALL_DICT.cs_eightyOneHard_record_request={en:n,de:o};var f=function(){function e(){}return e}();e.cs_eightyOneHard_record_response=f,__reflect(f.prototype,"Sproto.cs_eightyOneHard_record_response"),e.ALL_DICT.cs_eightyOneHard_record_response={en:r,de:a};var m=function(){function e(){}return e}();e.cs_eightyOneHard_sweep_request=m,__reflect(m.prototype,"Sproto.cs_eightyOneHard_sweep_request"),e.ALL_DICT.cs_eightyOneHard_sweep_request={en:l,de:s};var g=function(){function e(){}return e}();e.cs_eightyOneHard_sweep_all_request=g,__reflect(g.prototype,"Sproto.cs_eightyOneHard_sweep_all_request"),e.ALL_DICT.cs_eightyOneHard_sweep_all_request={en:u,de:c};var v=function(){function e(){}return e}();e.eightyOneHard_clear_data=v,__reflect(v.prototype,"Sproto.eightyOneHard_clear_data"),e.ALL_DICT.eightyOneHard_clear_data={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.key1=e.ri();break;case 1:t.key2=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.key1&&o.wi(t.key1,0),void 0!=t.key2&&o.wi(t.key2,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.clear=e.ri();break;case 1:t.helpReward=e.ri();break;case 2:t.buy=e.roa("eightyOneHard_data");break;case 3:t.todayClearlist=e.roa("eightyOneHard_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.clear&&o.wi(t.clear,0),void 0!=t.helpReward&&o.wi(t.helpReward,1),void 0!=t.buy&&o.woa("eightyOneHard_data",t.buy,2),void 0!=t.todayClearlist&&o.woa("eightyOneHard_data",t.todayClearlist,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.clear=e.ri();break;case 1:t.helpReward=e.ri();break;case 2:t.buy=e.roa("eightyOneHard_data");break;case 3:t.todayClearlist=e.roa("eightyOneHard_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.clear&&o.wi(t.clear,0),void 0!=t.helpReward&&o.wi(t.helpReward,1),void 0!=t.buy&&o.woa("eightyOneHard_data",t.buy,2),void 0!=t.todayClearlist&&o.woa("eightyOneHard_data",t.todayClearlist,3),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.eightyOneHard_data=s,__reflect(s.prototype,"Sproto.eightyOneHard_data"),e.ALL_DICT.eightyOneHard_data={en:i,de:t};var l=function(){function e(){}return e}();e.sc_fuben_eightyOneHard_info_request=l,__reflect(l.prototype,"Sproto.sc_fuben_eightyOneHard_info_request"),e.ALL_DICT.sc_fuben_eightyOneHard_info_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_fuben_eightyOneHard_info_update_request=c,__reflect(c.prototype,"Sproto.sc_fuben_eightyOneHard_info_update_request"),e.ALL_DICT.sc_fuben_eightyOneHard_info_update_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_enhance_get_reward_request=a,__reflect(a.prototype,"Sproto.cs_enhance_get_reward_request"),e.ALL_DICT.cs_enhance_get_reward_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_enhance_get_reward_response=r,__reflect(r.prototype,"Sproto.cs_enhance_get_reward_response"),e.ALL_DICT.cs_enhance_get_reward_response={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.val=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.val&&o.wi(t.val,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.val=e.ri();break;case 2:t.point=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.val&&o.wi(t.val,1),void 0!=t.point&&o.wi(t.point,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("enhance_data");break;case 1:t.point=e.ri();break;case 2:t.rewards=e.ria();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.data&&o.woa("enhance_data",t.data,0),void 0!=t.point&&o.wi(t.point,1),void 0!=t.rewards&&o.wia(t.rewards,2),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.enhance_data=s,__reflect(s.prototype,"Sproto.enhance_data"),e.ALL_DICT.enhance_data={en:i,de:t};var l=function(){function e(){}return e}();e.sc_enhance_add_info_request=l,__reflect(l.prototype,"Sproto.sc_enhance_add_info_request"),e.ALL_DICT.sc_enhance_add_info_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_enhance_info_request=c,__reflect(c.prototype,"Sproto.sc_enhance_info_request"),e.ALL_DICT.sc_enhance_info_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.forgeType=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.forgeType&&o.wi(t.forgeType,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.slot=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.slot&&o.wi(t.slot,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.slot=e.ri();break;case 1:t.mode=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.slot&&o.wi(t.slot,0),void 0!=t.mode&&o.wi(t.mode,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.slot=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.slot&&o.wi(t.slot,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.isgodequip=e.rb();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.isgodequip&&o.wb(t.isgodequip,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.itemHandle=e.ri();break;case 1:t.pos=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.itemHandle&&o.wi(t.itemHandle,0),void 0!=t.pos&&o.wi(t.pos,1),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.cs_equip_forge_request=f,__reflect(f.prototype,"Sproto.cs_equip_forge_request"),e.ALL_DICT.cs_equip_forge_request={en:i,de:t};var m=function(){function e(){}return e}();e.cs_equip_red_generate_request=m,__reflect(m.prototype,"Sproto.cs_equip_red_generate_request"),e.ALL_DICT.cs_equip_red_generate_request={en:n,de:o};var g=function(){function e(){}return e}();e.cs_equip_red_inject_request=g,__reflect(g.prototype,"Sproto.cs_equip_red_inject_request"),e.ALL_DICT.cs_equip_red_inject_request={en:r,de:a};var v=function(){function e(){}return e}();e.cs_equip_red_inject_response=v,__reflect(v.prototype,"Sproto.cs_equip_red_inject_response"),e.ALL_DICT.cs_equip_red_inject_response={en:l,de:s};var y=function(){function e(){}return e}();e.cs_equip_red_upgrade_request=y,__reflect(y.prototype,"Sproto.cs_equip_red_upgrade_request"),e.ALL_DICT.cs_equip_red_upgrade_request={en:u,de:c};var C=function(){function e(){}return e}();e.cs_equip_upgrade_request=C,__reflect(C.prototype,"Sproto.cs_equip_upgrade_request"),e.ALL_DICT.cs_equip_upgrade_request={en:h,de:p};var b=function(){function e(){}return e}();e.cs_equip_wear_request=b,__reflect(b.prototype,"Sproto.cs_equip_wear_request"),e.ALL_DICT.cs_equip_wear_request={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.forgeType=e.ri();break;case 1:t.forgeLevel=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.forgeType&&o.wi(t.forgeType,0),void 0!=t.forgeLevel&&o.wia(t.forgeLevel,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.roleID=e.ri();break;case 1:t.equipPos=e.ri();break;case 2:t.data=e.ro("item_data");break;case 3:t.reddata=e.ro("equip_red_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.roleID&&o.wi(t.roleID,0),void 0!=t.equipPos&&o.wi(t.equipPos,1),void 0!=t.data&&o.wo("item_data",t.data,2),void 0!=t.reddata&&o.wo("equip_red_data",t.reddata,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.suitlv=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.suitlv&&o.wi(t.suitlv,0),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.sc_equip_forge_request=s,__reflect(s.prototype,"Sproto.sc_equip_forge_request"),e.ALL_DICT.sc_equip_forge_request={en:i,de:t};var l=function(){function e(){}return e}();e.sc_equip_update_data_request=l,__reflect(l.prototype,"Sproto.sc_equip_update_data_request"),e.ALL_DICT.sc_equip_update_data_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_equip_update_suitlv_request=c,__reflect(c.prototype,"Sproto.sc_equip_update_suitlv_request"),e.ALL_DICT.sc_equip_update_suitlv_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.recordId=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.recordId&&o.wi(t.recordId,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerId=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.playerId&&o.wi(t.playerId,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.escortInfo=e.ro("escort_info");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.escortInfo&&o.wo("escort_info",t.escortInfo,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.escortList=e.roa("escort_info");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.escortList&&o.woa("escort_info",t.escortList,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerId=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.playerId&&o.wi(t.playerId,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.quality=e.ri();break;case 1:t.power=e.ri();break;case 2:t.playerName=e.rs();break;case 3:t.playerid=e.ri();break;case 4:t.catchCount=e.ri();break;case 5:t.finishTime=e.ri();break;case 6:t.guildName=e.rs();break;case 7:t.robMark=e.rb();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.quality&&o.wi(t.quality,0),void 0!=t.power&&o.wi(t.power,1),void 0!=t.playerName&&o.ws(t.playerName,2),void 0!=t.playerid&&o.wi(t.playerid,3),void 0!=t.catchCount&&o.wi(t.catchCount,4),void 0!=t.finishTime&&o.wi(t.finishTime,5),void 0!=t.guildName&&o.ws(t.guildName,6),void 0!=t.robMark&&o.wb(t.robMark,7),e.SprotoCore.CloseSerialize(o)}var I=function(){function e(){}return e}();e.cs_escort_avenge_request=I,__reflect(I.prototype,"Sproto.cs_escort_avenge_request"),e.ALL_DICT.cs_escort_avenge_request={en:i,de:t};var w=function(){function e(){}return e}();e.cs_escort_catch_info_request=w,__reflect(w.prototype,"Sproto.cs_escort_catch_info_request"),e.ALL_DICT.cs_escort_catch_info_request={en:n,de:o};var A=function(){function e(){}return e}();e.cs_escort_catch_info_response=A,__reflect(A.prototype,"Sproto.cs_escort_catch_info_response"),e.ALL_DICT.cs_escort_catch_info_response={en:r,de:a};var k=function(){function e(){}return e}();e.cs_escort_enter_request=k,__reflect(k.prototype,"Sproto.cs_escort_enter_request"),e.ALL_DICT.cs_escort_enter_request={en:l,de:s};var E=function(){function e(){}return e}();e.cs_escort_get_reward_request=E,__reflect(E.prototype,"Sproto.cs_escort_get_reward_request"),e.ALL_DICT.cs_escort_get_reward_request={en:u,de:c};var M=function(){function e(){}return e}();e.cs_escort_perform_request=M,__reflect(M.prototype,"Sproto.cs_escort_perform_request"),e.ALL_DICT.cs_escort_perform_request={en:h,de:p};var D=function(){function e(){}return e}();e.cs_escort_quick_complete_request=D,__reflect(D.prototype,"Sproto.cs_escort_quick_complete_request"),e.ALL_DICT.cs_escort_quick_complete_request={en:_,de:d};var P=function(){function e(){}return e}();e.cs_escort_refresh_quality_request=P,__reflect(P.prototype,"Sproto.cs_escort_refresh_quality_request"),e.ALL_DICT.cs_escort_refresh_quality_request={en:m,de:f};var L=function(){function e(){}return e}();e.cs_escort_rob_list_request=L,__reflect(L.prototype,"Sproto.cs_escort_rob_list_request"),e.ALL_DICT.cs_escort_rob_list_request={en:v,de:g};var R=function(){function e(){}return e}();e.cs_escort_rob_list_response=R,__reflect(R.prototype,"Sproto.cs_escort_rob_list_response"),e.ALL_DICT.cs_escort_rob_list_response={en:C,de:y};var x=function(){function e(){}return e}();e.cs_escort_rob_perform_request=x,__reflect(x.prototype,"Sproto.cs_escort_rob_perform_request"),e.ALL_DICT.cs_escort_rob_perform_request={en:S,de:b};var B=function(){function e(){}return e}();e.escort_info=B,__reflect(B.prototype,"Sproto.escort_info"),e.ALL_DICT.escort_info={en:T,de:G}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.robId=e.ri();break;case 1:t.name=e.rs();break;case 2:t.isWin=e.rb();break;case 3:t.guildName=e.rs();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.robId&&o.wi(t.robId,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.isWin&&o.wb(t.isWin,2),void 0!=t.guildName&&o.ws(t.guildName,3),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.recordId=e.ri();break;case 1:t.type=e.ri();break;case 2:t.quality=e.ri();break;case 3:t.time=e.ri();break;case 4:t.playerId=e.ri();break;case 5:t.name=e.rs();break;case 6:t.isWin=e.rb();break;case 7:t.operate=e.rb();break;case 8:t.power=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.recordId&&o.wi(t.recordId,0),void 0!=t.type&&o.wi(t.type,1),void 0!=t.quality&&o.wi(t.quality,2),void 0!=t.time&&o.wi(t.time,3),void 0!=t.playerId&&o.wi(t.playerId,4),void 0!=t.name&&o.ws(t.name,5),void 0!=t.isWin&&o.wb(t.isWin,6),void 0!=t.operate&&o.wb(t.operate,7),void 0!=t.power&&o.wi(t.power,8),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.escortCount=e.ri();break;case 1:t.robCount=e.ri();break;case 2:t.status=e.ri();break;case 3:t.quality=e.ri();break;case 4:t.finishTime=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.escortCount&&o.wi(t.escortCount,0),void 0!=t.robCount&&o.wi(t.robCount,1),void 0!=t.status&&o.wi(t.status,2),void 0!=t.quality&&o.wi(t.quality,3),void 0!=t.finishTime&&o.wi(t.finishTime,4),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.records=e.roa("record_info");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.records&&o.woa("record_info",t.records,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.record=e.ro("record_info");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.record&&o.wo("record_info",t.record,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.quality=e.ri();break;case 1:t.record=e.roa("catch_escort_info");break;case 2:t.reachReward=e.roa("reward_data");break;case 3:t.lossReward=e.roa("reward_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.quality&&o.wi(t.quality,0),void 0!=t.record&&o.woa("catch_escort_info",t.record,1),void 0!=t.reachReward&&o.woa("reward_data",t.reachReward,2),void 0!=t.lossReward&&o.woa("reward_data",t.lossReward,3),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.catch_escort_info=d,__reflect(d.prototype,"Sproto.catch_escort_info"),e.ALL_DICT.catch_escort_info={en:i,de:t};var _=function(){function e(){}return e}();e.record_info=_,__reflect(_.prototype,"Sproto.record_info"),e.ALL_DICT.record_info={en:n,de:o};var f=function(){function e(){}return e}();e.sc_escort_info_update_request=f,__reflect(f.prototype,"Sproto.sc_escort_info_update_request"),e.ALL_DICT.sc_escort_info_update_request={en:r,de:a};var m=function(){function e(){}return e}();e.sc_escort_record_data_request=m,__reflect(m.prototype,"Sproto.sc_escort_record_data_request"),e.ALL_DICT.sc_escort_record_data_request={en:l,de:s};var g=function(){function e(){}return e}();e.sc_escort_record_update_request=g,__reflect(g.prototype,"Sproto.sc_escort_record_update_request"),e.ALL_DICT.sc_escort_record_update_request={en:u,de:c};var v=function(){function e(){}return e}();e.sc_escort_reward_show_request=v,__reflect(v.prototype,"Sproto.sc_escort_reward_show_request"),e.ALL_DICT.sc_escort_reward_show_request={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.exchangeCount=e.ri();break;case 1:t.goldnum=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.exchangeCount&&o.wi(t.exchangeCount,0),void 0!=t.goldnum&&o.wi(t.goldnum,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exchangeCount=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exchangeCount&&o.wi(t.exchangeCount,1),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_exchange_gold_info_request=c,__reflect(c.prototype,"Sproto.cs_exchange_gold_info_request"),e.ALL_DICT.cs_exchange_gold_info_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_exchange_gold_info_response=u,__reflect(u.prototype,"Sproto.cs_exchange_gold_info_response"),e.ALL_DICT.cs_exchange_gold_info_response={en:n,de:o};var p=function(){function e(){}return e}();e.cs_exchange_gold_perform_request=p,__reflect(p.prototype,"Sproto.cs_exchange_gold_perform_request"),e.ALL_DICT.cs_exchange_gold_perform_request={en:r,de:a};var h=function(){function e(){}return e}();e.cs_exchange_gold_perform_response=h,__reflect(h.prototype,"Sproto.cs_exchange_gold_perform_response"),e.ALL_DICT.cs_exchange_gold_perform_response={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.cs_field_boss_challenge_request=o,__reflect(o.prototype,"Sproto.cs_field_boss_challenge_request"),e.ALL_DICT.cs_field_boss_challenge_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.hp=e.ri();break;case 2:t.status=e.ri();break;case 3:t.ownerId=e.ri();break;case 4:t.ownerName=e.rs();break;case 5:t.ownerSex=e.ri();break;case 6:t.ownerJob=e.ri();break;case 7:t.time=e.ri();break;case 8:t.ischallenge=e.rb();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.hp&&o.wi(t.hp,1),void 0!=t.status&&o.wi(t.status,2),void 0!=t.ownerId&&o.wi(t.ownerId,3),void 0!=t.ownerName&&o.ws(t.ownerName,4),void 0!=t.ownerSex&&o.wi(t.ownerSex,5),void 0!=t.ownerJob&&o.wi(t.ownerJob,6),void 0!=t.time&&o.wi(t.time,7),void 0!=t.ischallenge&&o.wb(t.ischallenge,8),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossInfos=e.roa("field_boss_info");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossInfos&&o.woa("field_boss_info",t.bossInfos,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossInfo=e.ro("field_boss_info");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossInfo&&o.wo("field_boss_info",t.bossInfo,0),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.field_boss_info=s,__reflect(s.prototype,"Sproto.field_boss_info"),e.ALL_DICT.field_boss_info={en:i,de:t};var l=function(){function e(){}return e}();e.sc_field_boss_base_list_request=l,__reflect(l.prototype,"Sproto.sc_field_boss_base_list_request"),e.ALL_DICT.sc_field_boss_base_list_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_field_boss_update_one_request=c,__reflect(c.prototype,"Sproto.sc_field_boss_update_one_request"),e.ALL_DICT.sc_field_boss_update_one_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.skillNo=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;case 4:t.soulLv=e.ri();break;case 5:t.soulUpNum=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.skillNo&&o.wi(t.skillNo,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),void 0!=t.soulLv&&o.wi(t.soulLv,4),void 0!=t.soulUpNum&&o.wi(t.soulUpNum,5),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.useNum=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.useNum&&o.wi(t.useNum,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.drugNum=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.drugNum&&o.wi(t.drugNum,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.skillNo=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.skillNo&&o.wi(t.skillNo,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.soulLv=e.ri();break;case 3:t.soulUpNum=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.soulLv&&o.wi(t.soulLv,2),void 0!=t.soulUpNum&&o.wi(t.soulUpNum,3),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.use=e.ri();break;case 2:t.disuse=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.use&&o.wi(t.use,1),void 0!=t.disuse&&o.wi(t.disuse,2),e.SprotoCore.CloseSerialize(o)}var I=function(){function e(){}return e}();e.cs_formation_activation_request=I,__reflect(I.prototype,"Sproto.cs_formation_activation_request"),e.ALL_DICT.cs_formation_activation_request={en:i,de:t};var w=function(){function e(){}return e}();e.cs_formation_activation_response=w,__reflect(w.prototype,"Sproto.cs_formation_activation_response"),e.ALL_DICT.cs_formation_activation_response={en:n,de:o};var A=function(){function e(){}return e}();e.cs_formation_add_exp_request=A,__reflect(A.prototype,"Sproto.cs_formation_add_exp_request"),e.ALL_DICT.cs_formation_add_exp_request={en:r,de:a};var k=function(){function e(){}return e}();e.cs_formation_add_exp_response=k,__reflect(k.prototype,"Sproto.cs_formation_add_exp_response"),e.ALL_DICT.cs_formation_add_exp_response={en:l,de:s};var E=function(){function e(){}return e}();e.cs_formation_drug_request=E,__reflect(E.prototype,"Sproto.cs_formation_drug_request"),e.ALL_DICT.cs_formation_drug_request={en:u,de:c};var M=function(){function e(){}return e}();e.cs_formation_drug_response=M,__reflect(M.prototype,"Sproto.cs_formation_drug_response"),e.ALL_DICT.cs_formation_drug_response={en:h,de:p};var D=function(){function e(){}return e}();e.cs_formation_skill_up_request=D,__reflect(D.prototype,"Sproto.cs_formation_skill_up_request"),e.ALL_DICT.cs_formation_skill_up_request={en:_,de:d};var P=function(){function e(){}return e}();e.cs_formation_skill_up_response=P,__reflect(P.prototype,"Sproto.cs_formation_skill_up_response"),e.ALL_DICT.cs_formation_skill_up_response={en:m,de:f};var L=function(){function e(){}return e}();e.cs_formation_soul_add_exp_request=L,__reflect(L.prototype,"Sproto.cs_formation_soul_add_exp_request"),e.ALL_DICT.cs_formation_soul_add_exp_request={en:v,de:g};var R=function(){function e(){}return e}();e.cs_formation_soul_add_exp_response=R,__reflect(R.prototype,"Sproto.cs_formation_soul_add_exp_response"),e.ALL_DICT.cs_formation_soul_add_exp_response={en:C,de:y};var x=function(){function e(){}return e}();e.cs_formation_use_request=x,__reflect(x.prototype,"Sproto.cs_formation_use_request"),e.ALL_DICT.cs_formation_use_request={en:S,de:b};var B=function(){function e(){}return e}();e.cs_formation_use_response=B,__reflect(B.prototype,"Sproto.cs_formation_use_response"),e.ALL_DICT.cs_formation_use_response={en:T,de:G}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.skillNo=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;case 4:t.soulLv=e.ri();break;case 5:t.soulUpNum=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.skillNo&&o.wi(t.skillNo,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),void 0!=t.soulLv&&o.wi(t.soulLv,4),void 0!=t.soulUpNum&&o.wi(t.soulUpNum,5),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.use=e.ri();break;case 1:t.infoList=e.roa("formation_data");break;case 2:t.drugNum=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);
return void 0!=t.use&&o.wi(t.use,0),void 0!=t.infoList&&o.woa("formation_data",t.infoList,1),void 0!=t.drugNum&&o.wi(t.drugNum,2),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.formation_data=a,__reflect(a.prototype,"Sproto.formation_data"),e.ALL_DICT.formation_data={en:i,de:t};var r=function(){function e(){}return e}();e.sc_formation_info_request=r,__reflect(r.prototype,"Sproto.sc_formation_info_request"),e.ALL_DICT.sc_formation_info_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}var g=function(){function e(){}return e}();e.cs_friend_add_blacklist_request=g,__reflect(g.prototype,"Sproto.cs_friend_add_blacklist_request"),e.ALL_DICT.cs_friend_add_blacklist_request={en:i,de:t};var v=function(){function e(){}return e}();e.cs_friend_add_follow_request=v,__reflect(v.prototype,"Sproto.cs_friend_add_follow_request"),e.ALL_DICT.cs_friend_add_follow_request={en:n,de:o};var y=function(){function e(){}return e}();e.cs_friend_add_follow_response=y,__reflect(y.prototype,"Sproto.cs_friend_add_follow_response"),e.ALL_DICT.cs_friend_add_follow_response={en:r,de:a};var C=function(){function e(){}return e}();e.cs_friend_del_blacklist_request=C,__reflect(C.prototype,"Sproto.cs_friend_del_blacklist_request"),e.ALL_DICT.cs_friend_del_blacklist_request={en:l,de:s};var b=function(){function e(){}return e}();e.cs_friend_del_follow_request=b,__reflect(b.prototype,"Sproto.cs_friend_del_follow_request"),e.ALL_DICT.cs_friend_del_follow_request={en:u,de:c};var S=function(){function e(){}return e}();e.cs_friend_follow_nominate_request=S,__reflect(S.prototype,"Sproto.cs_friend_follow_nominate_request"),e.ALL_DICT.cs_friend_follow_nominate_request={en:h,de:p};var G=function(){function e(){}return e}();e.cs_friend_gift_friendcoin_request=G,__reflect(G.prototype,"Sproto.cs_friend_gift_friendcoin_request"),e.ALL_DICT.cs_friend_gift_friendcoin_request={en:_,de:d};var T=function(){function e(){}return e}();e.cs_friend_receive_friendcoin_request=T,__reflect(T.prototype,"Sproto.cs_friend_receive_friendcoin_request"),e.ALL_DICT.cs_friend_receive_friendcoin_request={en:m,de:f}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.friendInfo=e.ro("player_whole_data");break;case 1:t.gift=e.rb();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.friendInfo&&o.wo("player_whole_data",t.friendInfo,0),void 0!=t.gift&&o.wb(t.gift,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.funsInfo=e.ro("player_whole_data");break;case 1:t.gift=e.rb();break;case 2:t.gifttime=e.ri();break;case 3:t.receive=e.rb();break;case 4:t.isfriend=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.funsInfo&&o.wo("player_whole_data",t.funsInfo,0),void 0!=t.gift&&o.wb(t.gift,1),void 0!=t.gifttime&&o.wi(t.gifttime,2),void 0!=t.receive&&o.wb(t.receive,3),void 0!=t.isfriend&&o.wb(t.isfriend,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.blacklist=e.roa("player_whole_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.blacklist&&o.woa("player_whole_data",t.blacklist,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.blackdata=e.ro("player_whole_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.blackdata&&o.wo("player_whole_data",t.blackdata,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.friendlist=e.roa("friend_data");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.friendlist&&o.woa("friend_data",t.friendlist,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerinfos=e.roa("player_whole_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.playerinfos&&o.woa("player_whole_data",t.playerinfos,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.friendinfo=e.ro("friend_data");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.friendinfo&&o.wo("friend_data",t.friendinfo,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.funslist=e.roa("funs_data");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.funslist&&o.woa("funs_data",t.funslist,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.dbid&&o.wi(t.dbid,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.funsinfo=e.ro("funs_data");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.funsinfo&&o.wo("funs_data",t.funsinfo,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.gifttime=e.ri();break;case 1:t.receivetime=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.gifttime&&o.wi(t.gifttime,0),void 0!=t.receivetime&&o.wi(t.receivetime,1),e.SprotoCore.CloseSerialize(o)}var G=function(){function e(){}return e}();e.friend_data=G,__reflect(G.prototype,"Sproto.friend_data"),e.ALL_DICT.friend_data={en:i,de:t};var T=function(){function e(){}return e}();e.funs_data=T,__reflect(T.prototype,"Sproto.funs_data"),e.ALL_DICT.funs_data={en:n,de:o};var I=function(){function e(){}return e}();e.sc_friend_black_list_request=I,__reflect(I.prototype,"Sproto.sc_friend_black_list_request"),e.ALL_DICT.sc_friend_black_list_request={en:r,de:a};var w=function(){function e(){}return e}();e.sc_friend_blacklist_update_request=w,__reflect(w.prototype,"Sproto.sc_friend_blacklist_update_request"),e.ALL_DICT.sc_friend_blacklist_update_request={en:l,de:s};var A=function(){function e(){}return e}();e.sc_friend_follow_data_request=A,__reflect(A.prototype,"Sproto.sc_friend_follow_data_request"),e.ALL_DICT.sc_friend_follow_data_request={en:u,de:c};var k=function(){function e(){}return e}();e.sc_friend_follow_nominate_list_request=k,__reflect(k.prototype,"Sproto.sc_friend_follow_nominate_list_request"),e.ALL_DICT.sc_friend_follow_nominate_list_request={en:h,de:p};var E=function(){function e(){}return e}();e.sc_friend_follow_update_request=E,__reflect(E.prototype,"Sproto.sc_friend_follow_update_request"),e.ALL_DICT.sc_friend_follow_update_request={en:_,de:d};var M=function(){function e(){}return e}();e.sc_friend_funs_data_request=M,__reflect(M.prototype,"Sproto.sc_friend_funs_data_request"),e.ALL_DICT.sc_friend_funs_data_request={en:m,de:f};var D=function(){function e(){}return e}();e.sc_friend_funs_remove_request=D,__reflect(D.prototype,"Sproto.sc_friend_funs_remove_request"),e.ALL_DICT.sc_friend_funs_remove_request={en:v,de:g};var P=function(){function e(){}return e}();e.sc_friend_funs_update_request=P,__reflect(P.prototype,"Sproto.sc_friend_funs_update_request"),e.ALL_DICT.sc_friend_funs_update_request={en:C,de:y};var L=function(){function e(){}return e}();e.sc_friend_gift_receive_info_request=L,__reflect(L.prototype,"Sproto.sc_friend_gift_receive_info_request"),e.ALL_DICT.sc_friend_gift_receive_info_request={en:S,de:b}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fubenNo=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fubenNo&&o.wi(t.fubenNo,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fubenType=e.ri();break;case 1:t.fubenNo=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.fubenType&&o.wi(t.fubenType,0),void 0!=t.fubenNo&&o.wi(t.fubenNo,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mapNo=e.ri();break;case 1:t.reward=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.mapNo&&o.wi(t.mapNo,0),void 0!=t.reward&&o.wi(t.reward,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fubenType=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fubenType&&o.wi(t.fubenType,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_fuben_heaven_reward_request=p,__reflect(p.prototype,"Sproto.cs_fuben_heaven_reward_request"),e.ALL_DICT.cs_fuben_heaven_reward_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_fuben_join_request=h,__reflect(h.prototype,"Sproto.cs_fuben_join_request"),e.ALL_DICT.cs_fuben_join_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_fuben_star_reward_request=d,__reflect(d.prototype,"Sproto.cs_fuben_star_reward_request"),e.ALL_DICT.cs_fuben_star_reward_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_fuben_sweep_request=_,__reflect(_.prototype,"Sproto.cs_fuben_sweep_request"),e.ALL_DICT.cs_fuben_sweep_request={en:l,de:s};var f=function(){function e(){}return e}();e.cs_fuben_wildgeeseFb_hard_request=f,__reflect(f.prototype,"Sproto.cs_fuben_wildgeeseFb_hard_request"),e.ALL_DICT.cs_fuben_wildgeeseFb_hard_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fubenNo=e.ri();break;case 1:t.clearanceNum=e.ri();break;case 2:t.todayNum=e.ri();break;case 3:t.buyNum=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.fubenNo&&o.wi(t.fubenNo,0),void 0!=t.clearanceNum&&o.wi(t.clearanceNum,1),void 0!=t.todayNum&&o.wi(t.todayNum,2),void 0!=t.buyNum&&o.wi(t.buyNum,3),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.layer=e.ri();break;case 1:t.todayLayer=e.ri();break;case 2:t.rewardNo=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.layer&&o.wi(t.layer,0),void 0!=t.todayLayer&&o.wi(t.todayLayer,1),void 0!=t.rewardNo&&o.wia(t.rewardNo,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardNo=e.ria();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rewardNo&&o.wia(t.rewardNo,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fuben_data=e.roa("fuben_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fuben_data&&o.woa("fuben_data",t.fuben_data,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("treasuremapn_data");break;case 1:t.starReward=e.roa("star_reward_data");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.data&&o.woa("treasuremapn_data",t.data,0),void 0!=t.starReward&&o.woa("star_reward_data",t.starReward,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.starReward=e.roa("star_reward_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.starReward&&o.woa("star_reward_data",t.starReward,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.hard=e.ri();break;case 1:t.layer=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.hard&&o.wi(t.hard,0),void 0!=t.layer&&o.wi(t.layer,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.reward=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.reward&&o.wi(t.reward,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fubenNo=e.ri();break;case 1:t.todayNum=e.ri();break;case 2:t.star=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.fubenNo&&o.wi(t.fubenNo,0),void 0!=t.todayNum&&o.wi(t.todayNum,1),void 0!=t.star&&o.wi(t.star,2),e.SprotoCore.CloseSerialize(o)}var y=function(){function e(){}return e}();e.fuben_data=y,__reflect(y.prototype,"Sproto.fuben_data"),e.ALL_DICT.fuben_data={en:i,de:t};var C=function(){function e(){}return e}();e.sc_fuben_heavenFb_info_request=C,__reflect(C.prototype,"Sproto.sc_fuben_heavenFb_info_request"),e.ALL_DICT.sc_fuben_heavenFb_info_request={en:n,de:o};var b=function(){function e(){}return e}();e.sc_fuben_heavenFb_reward_request=b,__reflect(b.prototype,"Sproto.sc_fuben_heavenFb_reward_request"),e.ALL_DICT.sc_fuben_heavenFb_reward_request={en:r,de:a};var S=function(){function e(){}return e}();e.sc_fuben_material_info_request=S,__reflect(S.prototype,"Sproto.sc_fuben_material_info_request"),e.ALL_DICT.sc_fuben_material_info_request={en:l,de:s};var G=function(){function e(){}return e}();e.sc_fuben_treasuremap_info_request=G,__reflect(G.prototype,"Sproto.sc_fuben_treasuremap_info_request"),e.ALL_DICT.sc_fuben_treasuremap_info_request={en:u,de:c};var T=function(){function e(){}return e}();e.sc_fuben_treasuremap_star_reward_request=T,__reflect(T.prototype,"Sproto.sc_fuben_treasuremap_star_reward_request"),e.ALL_DICT.sc_fuben_treasuremap_star_reward_request={en:h,de:p};var I=function(){function e(){}return e}();e.sc_fuben_wildgeeseFb_info_request=I,__reflect(I.prototype,"Sproto.sc_fuben_wildgeeseFb_info_request"),e.ALL_DICT.sc_fuben_wildgeeseFb_info_request={en:_,de:d};var w=function(){function e(){}return e}();e.star_reward_data=w,__reflect(w.prototype,"Sproto.star_reward_data"),e.ALL_DICT.star_reward_data={en:m,de:f};var A=function(){function e(){}return e}();e.treasuremapn_data=A,__reflect(A.prototype,"Sproto.treasuremapn_data"),e.ALL_DICT.treasuremapn_data={en:v,de:g}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.actorname=e.rs();break;case 1:t.sex=e.ri();break;case 2:t.job=e.ri();break;case 3:t.icon=e.ri();break;case 4:t.pf=e.rs();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.actorname&&o.ws(t.actorname,0),void 0!=t.sex&&o.wi(t.sex,1),void 0!=t.job&&o.wi(t.job,2),void 0!=t.icon&&o.wi(t.icon,3),void 0!=t.pf&&o.ws(t.pf,4),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.actorid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.actorid&&o.wi(t.actorid,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.actorid=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.actorid&&o.wi(t.actorid,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.QQ=e.rs();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.QQ&&o.ws(t.QQ,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.code=e.rb();break;case 1:t.actorid=e.ri();break;case 2:t.actorlist=e.roa("actorlist");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.code&&o.wb(t.code,0),void 0!=t.actorid&&o.wi(t.actorid,1),void 0!=t.actorlist&&o.woa("actorlist",t.actorlist,2),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.sex=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.sex&&o.wi(t.sex,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.actorname=e.rs();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.actorname&&o.ws(t.actorname,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.serverindex=e.ri();break;case 2:t.actorname=e.rs();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;case 5:t.level=e.ri();break;case 6:t.zhuansheng_lv=e.ri();break;case 7:t.totalpower=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.serverindex&&o.wi(t.serverindex,1),void 0!=t.actorname&&o.ws(t.actorname,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),void 0!=t.level&&o.wi(t.level,5),void 0!=t.zhuansheng_lv&&o.wi(t.zhuansheng_lv,6),void 0!=t.totalpower&&o.wi(t.totalpower,7),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.accountname=e.rs();break;case 1:t.password=e.rs();break;case 2:t.platformuid=e.rs();break;case 3:t.token=e.rs();break;case 4:t.serverid=e.ri();break;case 5:t.lid=e.rs();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.accountname&&o.ws(t.accountname,0),void 0!=t.password&&o.ws(t.password,1),void 0!=t.platformuid&&o.ws(t.platformuid,2),void 0!=t.token&&o.ws(t.token,3),void 0!=t.serverid&&o.wi(t.serverid,4),void 0!=t.lid&&o.ws(t.lid,5),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.result&&o.wi(t.result,0),e.SprotoCore.CloseSerialize(o)}var G=function(){function e(){}return e}();e.CreateActor_request=G,__reflect(G.prototype,"Sproto.CreateActor_request"),e.ALL_DICT.CreateActor_request={en:i,de:t};var T=function(){function e(){}return e}();e.CreateActor_response=T,__reflect(T.prototype,"Sproto.CreateActor_response"),e.ALL_DICT.CreateActor_response={en:n,de:o};var I=function(){function e(){}return e}();e.EnterGame_request=I,__reflect(I.prototype,"Sproto.EnterGame_request"),e.ALL_DICT.EnterGame_request={en:r,de:a};var w=function(){function e(){}return e}();e.EnterGame_response=w,__reflect(w.prototype,"Sproto.EnterGame_response"),e.ALL_DICT.EnterGame_response={en:l,de:s};var A=function(){function e(){}return e}();e.QueryList_request=A,__reflect(A.prototype,"Sproto.QueryList_request"),e.ALL_DICT.QueryList_request={en:u,de:c};var k=function(){function e(){}return e}();e.QueryList_response=k,__reflect(k.prototype,"Sproto.QueryList_response"),e.ALL_DICT.QueryList_response={en:h,de:p};var E=function(){function e(){}return e}();e.RandName_request=E,__reflect(E.prototype,"Sproto.RandName_request"),e.ALL_DICT.RandName_request={en:_,de:d};var M=function(){function e(){}return e}();e.RandName_response=M,__reflect(M.prototype,"Sproto.RandName_response"),e.ALL_DICT.RandName_response={en:m,de:f};var D=function(){function e(){}return e}();e.actorlist=D,__reflect(D.prototype,"Sproto.actorlist"),e.ALL_DICT.actorlist={en:v,de:g};var P=function(){function e(){}return e}();e.checkAccount_request=P,__reflect(P.prototype,"Sproto.checkAccount_request"),e.ALL_DICT.checkAccount_request={en:C,de:y};var L=function(){function e(){}return e}();e.checkAccount_response=L,__reflect(L.prototype,"Sproto.checkAccount_response"),e.ALL_DICT.checkAccount_response={en:S,de:b}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.time=e.ri();break;case 1:t.serverRunDay=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.time&&o.wi(t.time,0),void 0!=t.serverRunDay&&o.wi(t.serverRunDay,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.day=e.ri();break;case 2:t.loginDay=e.ri();break;case 3:t.mergeDay=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.day&&o.wi(t.day,1),void 0!=t.loginDay&&o.wi(t.loginDay,2),void 0!=t.mergeDay&&o.wi(t.mergeDay,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.code=e.ri();break;case 1:t.msg=e.rs();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.code&&o.wi(t.code,0),void 0!=t.msg&&o.ws(t.msg,1),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.sc_base_game_time_request=s,__reflect(s.prototype,"Sproto.sc_base_game_time_request"),e.ALL_DICT.sc_base_game_time_request={en:i,de:t};var l=function(){function e(){}return e}();e.sc_base_open_day_request=l,__reflect(l.prototype,"Sproto.sc_base_open_day_request"),e.ALL_DICT.sc_base_open_day_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_error_code_request=c,__reflect(c.prototype,"Sproto.sc_error_code_request"),e.ALL_DICT.sc_error_code_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;case 2:t.level=e.ri();break;case 3:t.vip=e.ri();break;case 4:t.power=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.vip&&o.wi(t.vip,3),void 0!=t.power&&o.wi(t.power,4),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.zsLv=e.ri();break;case 4:t.lv=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.zsLv&&o.wi(t.zsLv,3),void 0!=t.lv&&o.wi(t.lv,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.iskill=e.rb();break;case 2:t.rank=e.ri();break;case 3:t.power=e.ri();break;case 4:t.name=e.rs();break;case 5:t.job=e.ri();break;case 6:t.sex=e.ri();break;case 7:t.shows=e.ria();break;case 8:t.monId=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.iskill&&o.wb(t.iskill,1),void 0!=t.rank&&o.wi(t.rank,2),void 0!=t.power&&o.wi(t.power,3),void 0!=t.name&&o.ws(t.name,4),void 0!=t.job&&o.wi(t.job,5),void 0!=t.sex&&o.wi(t.sex,6),void 0!=t.shows&&o.wia(t.shows,7),void 0!=t.monId&&o.wi(t.monId,8),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.value=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.value&&o.wi(t.value,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new Ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.value=e.ri();break;case 2:t.strvalue=e.rs();break;case 3:t.valueEx=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.value&&o.wi(t.value,1),void 0!=t.strvalue&&o.ws(t.strvalue,2),void 0!=t.valueEx&&o.wi(t.valueEx,3),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dressId=e.ri();break;case 2:t.invalidtime=e.ri();break;case 3:t.dressLevel=e.ri();break;case 4:t.dressExp=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.dressId&&o.wi(t.dressId,0),void 0!=t.invalidtime&&o.wi(t.invalidtime,2),void 0!=t.dressLevel&&o.wi(t.dressLevel,3),void 0!=t.dressExp&&o.wi(t.dressExp,4),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new St,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.strengthen=e.ri();break;case 1:t.refine=e.ri();break;case 2:t.anneal=e.ri();break;case 3:t.gem=e.ri();break;case 4:t.item=e.ro("equip_item_data");break;case 5:t.reddata=e.ro("equip_red_data");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.strengthen&&o.wi(t.strengthen,0),void 0!=t.refine&&o.wi(t.refine,1),void 0!=t.anneal&&o.wi(t.anneal,2),void 0!=t.gem&&o.wi(t.gem,3),void 0!=t.item&&o.wo("equip_item_data",t.item,4),void 0!=t.reddata&&o.wo("equip_red_data",t.reddata,5),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new Gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.attrs=e.roa("attribute_data");break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.attrs&&o.woa("attribute_data",t.attrs,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.injectstage=e.ri();break;case 1:t.injectcount=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.injectstage&&o.wi(t.injectstage,0),void 0!=t.injectcount&&o.wi(t.injectcount,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new It,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.openStatus=e.rb();break;case 1:t.level=e.ri();break;case 2:t.equipDatas=e.roa("item_data");break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.openStatus&&o.wb(t.openStatus,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.equipDatas&&o.woa("item_data",t.equipDatas,2),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;case 1:t.star=e.ri();break;case 2:t.exp=e.ri();break;case 3:t.openStatus=e.rb();break;case 4:t.dressId=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.lv&&o.wi(t.lv,0),void 0!=t.star&&o.wi(t.star,1),void 0!=t.exp&&o.wi(t.exp,2),void 0!=t.openStatus&&o.wb(t.openStatus,3),void 0!=t.dressId&&o.wi(t.dressId,4),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new At,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.id=e.ri();break;case 2:t.count=e.ri();break;case 3:t.attrs=e.roa("attribute_data");break;case 4:t.invalidtime=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.count&&o.wi(t.count,2),void 0!=t.attrs&&o.woa("attribute_data",t.attrs,3),void 0!=t.invalidtime&&o.wi(t.invalidtime,4),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new kt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.stage=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.stage&&o.wi(t.stage,1),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new Et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.isActivate=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.isActivate&&o.wi(t.isActivate,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new Mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.stage=e.ri();break;case 1:t.level=e.ri();break;case 2:t.exp=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.stage&&o.wi(t.stage,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.exp&&o.wi(t.exp,2),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Dt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.lv=e.ri();break;case 2:t.star=e.ri();break;case 3:t.exp=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.star&&o.wi(t.star,2),void 0!=t.exp&&o.wi(t.exp,3),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new Pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.id=e.ri();break;case 2:t.vip=e.ri();break;case 3:t.guildid=e.ri();break;case 4:t.guildName=e.rs();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.vip&&o.wi(t.vip,2),void 0!=t.guildid&&o.wi(t.guildid,3),void 0!=t.guildName&&o.ws(t.guildName,4),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new Lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.vip=e.ri();break;case 4:t.level=e.ri();break;case 5:t.power=e.ri();break;case 6:t.offlineTime=e.ri();break;case 7:t.guildId=e.ri();break;case 8:t.guildName=e.rs();break;case 9:t.dbid=e.ri();break;case 10:t.headframe=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.vip&&o.wi(t.vip,3),void 0!=t.level&&o.wi(t.level,4),void 0!=t.power&&o.wi(t.power,5),void 0!=t.offlineTime&&o.wi(t.offlineTime,6),void 0!=t.guildId&&o.wi(t.guildId,7),void 0!=t.guildName&&o.ws(t.guildName,8),void 0!=t.dbid&&o.wi(t.dbid,9),void 0!=t.headframe&&o.wi(t.headframe,10),e.SprotoCore.CloseSerialize(o)
}function O(e){for(var t=new Rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.x=e.ri();break;case 1:t.y=e.ri();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.x&&o.wi(t.x,0),void 0!=t.y&&o.wi(t.y,1),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.server=e.ri();break;case 2:t.point=e.ri();break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.server&&o.wi(t.server,1),void 0!=t.point&&o.wi(t.point,2),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new Bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;case 2:t.rank=e.ri();break;case 3:t.value=e.ri();break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.rank&&o.wi(t.rank,2),void 0!=t.value&&o.wi(t.value,3),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new Ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.job=e.ri();break;case 1:t.sex=e.ri();break;case 2:t.clothID=e.ri();break;case 3:t.swordID=e.ri();break;case 4:t.wingOpenStatus=e.rb();break;case 5:t.wingLevel=e.ri();break;case 6:t.zhuangbei=e.ria();break;case 7:t.legendDress=e.ri();break;case 8:t.exring=e.ri();break;case 9:t.wingDress=e.ri();break;case 10:t.godswordDress=e.ri();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.job&&o.wi(t.job,0),void 0!=t.sex&&o.wi(t.sex,1),void 0!=t.clothID&&o.wi(t.clothID,2),void 0!=t.swordID&&o.wi(t.swordID,3),void 0!=t.wingOpenStatus&&o.wb(t.wingOpenStatus,4),void 0!=t.wingLevel&&o.wi(t.wingLevel,5),void 0!=t.zhuangbei&&o.wia(t.zhuangbei,6),void 0!=t.legendDress&&o.wi(t.legendDress,7),void 0!=t.exring&&o.wi(t.exring,8),void 0!=t.wingDress&&o.wi(t.wingDress,9),void 0!=t.godswordDress&&o.wi(t.godswordDress,10),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new Nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.id=e.ri();break;case 2:t.count=e.ri();break;default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.count&&o.wi(t.count,2),e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new Ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}function Q(e){for(var t=new Ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.power=e.ri();break;case 1:t.skillDatas=e.ria();break;case 2:t.skillSortDatas=e.ria();break;case 3:t.equipsData=e.roa("equip_data");break;case 4:t.attributeData=e.ria();break;case 5:t.attributeExData=e.ria();break;default:e.nod()}return t}function Z(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.power&&o.wi(t.power,0),void 0!=t.skillDatas&&o.wia(t.skillDatas,1),void 0!=t.skillSortDatas&&o.wia(t.skillSortDatas,2),void 0!=t.equipsData&&o.woa("equip_data",t.equipsData,3),void 0!=t.attributeData&&o.wia(t.attributeData,4),void 0!=t.attributeExData&&o.wia(t.attributeExData,5),e.SprotoCore.CloseSerialize(o)}function $(e){for(var t=new Vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function et(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function tt(e){for(var t=new qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shareId=e.ri();break;case 1:t.showInfo=e.roa("client_chat_param");break;case 2:t.player=e.roa("player_data");break;default:e.nod()}return t}function it(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.shareId&&o.wi(t.shareId,0),void 0!=t.showInfo&&o.woa("client_chat_param",t.showInfo,1),void 0!=t.player&&o.woa("player_data",t.player,2),e.SprotoCore.CloseSerialize(o)}function ot(e){for(var t=new Ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.datas=e.ria();break;case 2:t.limittime=e.ria();break;default:e.nod()}return t}function nt(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.datas&&o.wia(t.datas,1),void 0!=t.limittime&&o.wia(t.limittime,2),e.SprotoCore.CloseSerialize(o)}function at(e){for(var t=new Yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.itemId=e.ri();break;case 1:t.petId=e.ri();break;case 2:t.treasureId=e.ri();break;case 3:t.rideId=e.ri();break;case 4:t.fubenId=e.ri();break;default:e.nod()}return t}function rt(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.itemId&&o.wi(t.itemId,0),void 0!=t.petId&&o.wi(t.petId,1),void 0!=t.treasureId&&o.wi(t.treasureId,2),void 0!=t.rideId&&o.wi(t.rideId,3),void 0!=t.fubenId&&o.wi(t.fubenId,4),e.SprotoCore.CloseSerialize(o)}function st(e){for(var t=new Wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.isOpen=e.rb();break;default:e.nod()}return t}function lt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.isOpen&&o.wb(t.isOpen,1),e.SprotoCore.CloseSerialize(o)}function ct(e){for(var t=new zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.titleid=e.ri();break;case 1:t.titleEndTime=e.ri();break;default:e.nod()}return t}function ut(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.titleid&&o.wi(t.titleid,0),void 0!=t.titleEndTime&&o.wi(t.titleEndTime,1),e.SprotoCore.CloseSerialize(o)}function pt(e){for(var t=new jt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;case 1:t.star=e.ri();break;case 2:t.exp=e.ri();break;case 3:t.openStatus=e.rb();break;case 4:t.equipDatas=e.roa("item_data");break;case 5:t.dressId=e.ri();break;default:e.nod()}return t}function ht(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.lv&&o.wi(t.lv,0),void 0!=t.star&&o.wi(t.star,1),void 0!=t.exp&&o.wi(t.exp,2),void 0!=t.openStatus&&o.wb(t.openStatus,3),void 0!=t.equipDatas&&o.woa("item_data",t.equipDatas,4),void 0!=t.dressId&&o.wi(t.dressId,5),e.SprotoCore.CloseSerialize(o)}function dt(e){for(var t=new Xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.rank=e.ri();break;case 2:t.growupID=e.ri();break;default:e.nod()}return t}function _t(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.rank&&o.wi(t.rank,1),void 0!=t.growupID&&o.wi(t.growupID,2),e.SprotoCore.CloseSerialize(o)}var ft=function(){function e(){}return e}();e.actor_base_data=ft,__reflect(ft.prototype,"Sproto.actor_base_data"),e.ALL_DICT.actor_base_data={en:i,de:t};var mt=function(){function e(){}return e}();e.actor_simple_data=mt,__reflect(mt.prototype,"Sproto.actor_simple_data"),e.ALL_DICT.actor_simple_data={en:n,de:o};var gt=function(){function e(){}return e}();e.arena_target_data=gt,__reflect(gt.prototype,"Sproto.arena_target_data"),e.ALL_DICT.arena_target_data={en:r,de:a};var vt=function(){function e(){}return e}();e.attribute_data=vt,__reflect(vt.prototype,"Sproto.attribute_data"),e.ALL_DICT.attribute_data={en:l,de:s};var yt=function(){function e(){}return e}();e.baby_star_msg=yt,__reflect(yt.prototype,"Sproto.baby_star_msg"),e.ALL_DICT.baby_star_msg={en:u,de:c};var Ct=function(){function e(){}return e}();e.client_chat_param=Ct,__reflect(Ct.prototype,"Sproto.client_chat_param"),e.ALL_DICT.client_chat_param={en:h,de:p};var bt=function(){function e(){}return e}();e.dress_time_info=bt,__reflect(bt.prototype,"Sproto.dress_time_info"),e.ALL_DICT.dress_time_info={en:_,de:d};var St=function(){function e(){}return e}();e.equip_data=St,__reflect(St.prototype,"Sproto.equip_data"),e.ALL_DICT.equip_data={en:m,de:f};var Gt=function(){function e(){}return e}();e.equip_item_data=Gt,__reflect(Gt.prototype,"Sproto.equip_item_data"),e.ALL_DICT.equip_item_data={en:v,de:g};var Tt=function(){function e(){}return e}();e.equip_red_data=Tt,__reflect(Tt.prototype,"Sproto.equip_red_data"),e.ALL_DICT.equip_red_data={en:C,de:y};var It=function(){function e(){}return e}();e.fuwen_data=It,__reflect(It.prototype,"Sproto.fuwen_data"),e.ALL_DICT.fuwen_data={en:S,de:b};var wt=function(){function e(){}return e}();e.godswords_data=wt,__reflect(wt.prototype,"Sproto.godswords_data"),e.ALL_DICT.godswords_data={en:T,de:G};var At=function(){function e(){}return e}();e.item_data=At,__reflect(At.prototype,"Sproto.item_data"),e.ALL_DICT.item_data={en:w,de:I};var kt=function(){function e(){}return e}();e.jingmai_data=kt,__reflect(kt.prototype,"Sproto.jingmai_data"),e.ALL_DICT.jingmai_data={en:k,de:A};var Et=function(){function e(){}return e}();e.legend_data=Et,__reflect(Et.prototype,"Sproto.legend_data"),e.ALL_DICT.legend_data={en:M,de:E};var Mt=function(){function e(){}return e}();e.long_hun_data=Mt,__reflect(Mt.prototype,"Sproto.long_hun_data"),e.ALL_DICT.long_hun_data={en:P,de:D};var Dt=function(){function e(){}return e}();e.longzhuang_data=Dt,__reflect(Dt.prototype,"Sproto.longzhuang_data"),e.ALL_DICT.longzhuang_data={en:R,de:L};var Pt=function(){function e(){}return e}();e.player_data=Pt,__reflect(Pt.prototype,"Sproto.player_data"),e.ALL_DICT.player_data={en:B,de:x};var Lt=function(){function e(){}return e}();e.player_whole_data=Lt,__reflect(Lt.prototype,"Sproto.player_whole_data"),e.ALL_DICT.player_whole_data={en:N,de:U};var Rt=function(){function e(){}return e}();e.position=Rt,__reflect(Rt.prototype,"Sproto.position"),e.ALL_DICT.position={en:F,de:O};var xt=function(){function e(){}return e}();e.qualifyingMgr_rank_data=xt,__reflect(xt.prototype,"Sproto.qualifyingMgr_rank_data"),e.ALL_DICT.qualifyingMgr_rank_data={en:q,de:V};var Bt=function(){function e(){}return e}();e.rank_data=Bt,__reflect(Bt.prototype,"Sproto.rank_data"),e.ALL_DICT.rank_data={en:Y,de:H};var Ut=function(){function e(){}return e}();e.rank_subrole=Ut,__reflect(Ut.prototype,"Sproto.rank_subrole"),e.ALL_DICT.rank_subrole={en:z,de:W};var Nt=function(){function e(){}return e}();e.reward_data=Nt,__reflect(Nt.prototype,"Sproto.reward_data"),e.ALL_DICT.reward_data={en:X,de:j};var Ot=function(){function e(){}return e}();e.ring_data=Ot,__reflect(Ot.prototype,"Sproto.ring_data"),e.ALL_DICT.ring_data={en:J,de:K};var Ft=function(){function e(){}return e}();e.role_data=Ft,__reflect(Ft.prototype,"Sproto.role_data"),e.ALL_DICT.role_data={en:Z,de:Q};var Vt=function(){function e(){}return e}();e.rune_data=Vt,__reflect(Vt.prototype,"Sproto.rune_data"),e.ALL_DICT.rune_data={en:et,de:$};var qt=function(){function e(){}return e}();e.share_date=qt,__reflect(qt.prototype,"Sproto.share_date"),e.ALL_DICT.share_date={en:it,de:tt};var Ht=function(){function e(){}return e}();e.shop_data=Ht,__reflect(Ht.prototype,"Sproto.shop_data"),e.ALL_DICT.shop_data={en:nt,de:ot};var Yt=function(){function e(){}return e}();e.showInfo_data=Yt,__reflect(Yt.prototype,"Sproto.showInfo_data"),e.ALL_DICT.showInfo_data={en:rt,de:at};var Wt=function(){function e(){}return e}();e.star_data=Wt,__reflect(Wt.prototype,"Sproto.star_data"),e.ALL_DICT.star_data={en:lt,de:st};var zt=function(){function e(){}return e}();e.title_data=zt,__reflect(zt.prototype,"Sproto.title_data"),e.ALL_DICT.title_data={en:ut,de:ct};var jt=function(){function e(){}return e}();e.wings_data=jt,__reflect(jt.prototype,"Sproto.wings_data"),e.ALL_DICT.wings_data={en:ht,de:pt};var Xt=function(){function e(){}return e}();e.zhuzai_data=Xt,__reflect(Xt.prototype,"Sproto.zhuzai_data"),e.ALL_DICT.zhuzai_data={en:_t,de:dt}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new xt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new Bt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new Ut,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new Nt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new Ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.text=e.rs();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.text&&o.ws(t.text,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new Ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.office=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.office&&o.wi(t.office,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new Vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new Ht,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.profitCount=e.ri();break;case 1:t.assistCount=e.ri();break;case 2:t.firstReach=e.ria();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.profitCount&&o.wi(t.profitCount,0),void 0!=t.assistCount&&o.wi(t.assistCount,1),void 0!=t.firstReach&&o.wia(t.firstReach,2),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new Wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.playerid&&o.wi(t.playerid,0),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new jt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new Xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.exchangeInfo=e.ro("exchange_info");break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.exchangeInfo&&o.wo("exchange_info",t.exchangeInfo,0),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new Kt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new Jt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exchangeInfo=e.ro("exchange_info");break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exchangeInfo&&o.wo("exchange_info",t.exchangeInfo,1),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Qt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new Zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exchangeInfo=e.ro("exchange_info");break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exchangeInfo&&o.wo("exchange_info",t.exchangeInfo,1),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new $t,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskId=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.taskId&&o.wi(t.taskId,0),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new ei,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new ti,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskId=e.ri();break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.taskId&&o.wi(t.taskId,0),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new ii,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new oi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskInfo=e.roa("task_info");break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.taskInfo&&o.woa("task_info",t.taskInfo,0),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new ni,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskId=e.ri();break;default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.taskId&&o.wi(t.taskId,0),e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new ai,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.taskInfo=e.ro("task_info");break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.taskInfo&&o.wo("task_info",t.taskInfo,1),e.SprotoCore.CloseSerialize(o)}function Q(e){for(var t=new ri,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskId=e.ri();break;default:e.nod()}return t}function Z(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.taskId&&o.wi(t.taskId,0),e.SprotoCore.CloseSerialize(o)}function $(e){for(var t=new si,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.taskInfo=e.ro("task_info");break;default:e.nod()}return t}function et(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.taskInfo&&o.wo("task_info",t.taskInfo,1),e.SprotoCore.CloseSerialize(o)}function tt(e){for(var t=new li,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function it(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function ot(e){for(var t=new ci,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function nt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function at(e){for(var t=new ui,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function rt(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function st(e){for(var t=new pi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function lt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function ct(e){for(var t=new hi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardId=e.ri();break;default:e.nod()}return t}function ut(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rewardId&&o.wi(t.rewardId,0),e.SprotoCore.CloseSerialize(o)}function pt(e){for(var t=new di,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function ht(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function dt(e){for(var t=new _i,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _t(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function ft(e){for(var t=new fi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guildName=e.rs();break;default:e.nod()}return t}function mt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.guildName&&o.ws(t.guildName,0),e.SprotoCore.CloseSerialize(o)}function gt(e){for(var t=new mi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.str=e.rs();break;default:e.nod()}return t}function vt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.str&&o.ws(t.str,0),e.SprotoCore.CloseSerialize(o)}function yt(e){for(var t=new gi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shareId=e.ri();break;case 1:t.params=e.roa("client_chat_param");break;default:e.nod()}return t}function Ct(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.shareId&&o.wi(t.shareId,0),void 0!=t.params&&o.woa("client_chat_param",t.params,1),e.SprotoCore.CloseSerialize(o)}function bt(e){for(var t=new vi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.result=e.ri();break;default:e.nod()}return t}function St(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.result&&o.wi(t.result,1),e.SprotoCore.CloseSerialize(o)}function Gt(e){for(var t=new yi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.auto=e.ri();break;case 1:t.power=e.ri();break;default:e.nod()}return t}function Tt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.auto&&o.wi(t.auto,0),void 0!=t.power&&o.wi(t.power,1),e.SprotoCore.CloseSerialize(o)}function It(e){for(var t=new Ci,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function wt(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function At(e){for(var t=new bi,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function kt(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function Et(e){for(var t=new Si,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.refreshTime=e.ri();break;case 1:t.refreshCount=e.ri();break;case 2:t.exchangeList=e.ria();break;case 3:t.guildBag=e.roa("guild_bag");break;case 4:t.exchangeMark=e.ri();break;default:e.nod()}return t}function Mt(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.refreshTime&&o.wi(t.refreshTime,0),void 0!=t.refreshCount&&o.wi(t.refreshCount,1),void 0!=t.exchangeList&&o.wia(t.exchangeList,2),void 0!=t.guildBag&&o.woa("guild_bag",t.guildBag,3),void 0!=t.exchangeMark&&o.wi(t.exchangeMark,4),e.SprotoCore.CloseSerialize(o)}function Dt(e){for(var t=new Gi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function Pt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}function Lt(e){for(var t=new Ti,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;case 2:t.recount=e.ri();break;case 3:t.rewardStatus=e.rb();break;default:e.nod()}return t}function Rt(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),void 0!=t.recount&&o.wi(t.recount,2),void 0!=t.rewardStatus&&o.wb(t.rewardStatus,3),e.SprotoCore.CloseSerialize(o)}var xt=function(){function e(){}return e}();e.cs_guild_apply_list_request=xt,__reflect(xt.prototype,"Sproto.cs_guild_apply_list_request"),e.ALL_DICT.cs_guild_apply_list_request={en:i,de:t};var Bt=function(){function e(){}return e}();e.cs_guild_boss_info_request=Bt,__reflect(Bt.prototype,"Sproto.cs_guild_boss_info_request"),e.ALL_DICT.cs_guild_boss_info_request={en:n,de:o};var Ut=function(){function e(){}return e}();e.cs_guild_boss_pk_request=Ut,__reflect(Ut.prototype,"Sproto.cs_guild_boss_pk_request"),e.ALL_DICT.cs_guild_boss_pk_request={en:r,de:a};var Nt=function(){function e(){}return e}();e.cs_guild_boss_reward_request=Nt,__reflect(Nt.prototype,"Sproto.cs_guild_boss_reward_request"),e.ALL_DICT.cs_guild_boss_reward_request={en:l,de:s};var Ot=function(){function e(){}return e}();e.cs_guild_change_notice_request=Ot,__reflect(Ot.prototype,"Sproto.cs_guild_change_notice_request"),e.ALL_DICT.cs_guild_change_notice_request={en:u,de:c};var Ft=function(){function e(){}return e}();e.cs_guild_change_office_request=Ft,__reflect(Ft.prototype,"Sproto.cs_guild_change_office_request"),e.ALL_DICT.cs_guild_change_office_request={en:h,de:p};var Vt=function(){function e(){}return e}();e.cs_guild_create_request=Vt,__reflect(Vt.prototype,"Sproto.cs_guild_create_request"),e.ALL_DICT.cs_guild_create_request={en:_,de:d};var qt=function(){function e(){}return e}();e.cs_guild_donate_request=qt,__reflect(qt.prototype,"Sproto.cs_guild_donate_request"),e.ALL_DICT.cs_guild_donate_request={en:m,de:f};var Ht=function(){function e(){}return e}();e.cs_guild_dungeon_info_request=Ht,__reflect(Ht.prototype,"Sproto.cs_guild_dungeon_info_request"),e.ALL_DICT.cs_guild_dungeon_info_request={en:v,de:g};var Yt=function(){function e(){}return e}();e.cs_guild_dungeon_info_response=Yt,__reflect(Yt.prototype,"Sproto.cs_guild_dungeon_info_response"),e.ALL_DICT.cs_guild_dungeon_info_response={en:C,de:y};var Wt=function(){function e(){}return e}();e.cs_guild_join_request=Wt,__reflect(Wt.prototype,"Sproto.cs_guild_join_request"),e.ALL_DICT.cs_guild_join_request={en:S,de:b};var zt=function(){function e(){}return e}();e.cs_guild_kick_request=zt,__reflect(zt.prototype,"Sproto.cs_guild_kick_request"),e.ALL_DICT.cs_guild_kick_request={en:T,de:G};var jt=function(){function e(){}return e}();e.cs_guild_map_exchange_info_request=jt,__reflect(jt.prototype,"Sproto.cs_guild_map_exchange_info_request"),e.ALL_DICT.cs_guild_map_exchange_info_request={en:w,de:I};var Xt=function(){function e(){}return e}();e.cs_guild_map_exchange_info_response=Xt,__reflect(Xt.prototype,"Sproto.cs_guild_map_exchange_info_response"),e.ALL_DICT.cs_guild_map_exchange_info_response={en:k,de:A};var Kt=function(){function e(){}return e}();e.cs_guild_map_exchange_pay_request=Kt,__reflect(Kt.prototype,"Sproto.cs_guild_map_exchange_pay_request"),e.ALL_DICT.cs_guild_map_exchange_pay_request={en:M,de:E};var Jt=function(){function e(){}return e}();e.cs_guild_map_exchange_pay_response=Jt,__reflect(Jt.prototype,"Sproto.cs_guild_map_exchange_pay_response"),e.ALL_DICT.cs_guild_map_exchange_pay_response={en:P,de:D};var Qt=function(){function e(){}return e}();e.cs_guild_map_exchange_refresh_request=Qt,__reflect(Qt.prototype,"Sproto.cs_guild_map_exchange_refresh_request"),e.ALL_DICT.cs_guild_map_exchange_refresh_request={en:R,de:L};var Zt=function(){function e(){}return e}();e.cs_guild_map_exchange_refresh_response=Zt,__reflect(Zt.prototype,"Sproto.cs_guild_map_exchange_refresh_response"),e.ALL_DICT.cs_guild_map_exchange_refresh_response={en:B,de:x};var $t=function(){function e(){}return e}();e.cs_guild_map_reward_request=$t,__reflect($t.prototype,"Sproto.cs_guild_map_reward_request"),e.ALL_DICT.cs_guild_map_reward_request={en:N,de:U};var ei=function(){function e(){}return e}();e.cs_guild_map_reward_response=ei,__reflect(ei.prototype,"Sproto.cs_guild_map_reward_response"),e.ALL_DICT.cs_guild_map_reward_response={en:F,de:O};var ti=function(){function e(){}return e}();e.cs_guild_map_task_complete_request=ti,__reflect(ti.prototype,"Sproto.cs_guild_map_task_complete_request"),e.ALL_DICT.cs_guild_map_task_complete_request={en:q,de:V};var ii=function(){function e(){}return e}();e.cs_guild_map_task_info_request=ii,__reflect(ii.prototype,"Sproto.cs_guild_map_task_info_request"),e.ALL_DICT.cs_guild_map_task_info_request={en:Y,de:H};var oi=function(){function e(){}return e}();e.cs_guild_map_task_info_response=oi,__reflect(oi.prototype,"Sproto.cs_guild_map_task_info_response"),e.ALL_DICT.cs_guild_map_task_info_response={en:z,de:W};var ni=function(){function e(){}return e}();e.cs_guild_map_task_quick_request=ni,__reflect(ni.prototype,"Sproto.cs_guild_map_task_quick_request"),e.ALL_DICT.cs_guild_map_task_quick_request={en:X,de:j};var ai=function(){function e(){}return e}();e.cs_guild_map_task_quick_response=ai,__reflect(ai.prototype,"Sproto.cs_guild_map_task_quick_response"),e.ALL_DICT.cs_guild_map_task_quick_response={en:J,de:K};var ri=function(){function e(){}return e}();e.cs_guild_map_task_reset_request=ri,__reflect(ri.prototype,"Sproto.cs_guild_map_task_reset_request"),e.ALL_DICT.cs_guild_map_task_reset_request={en:Z,de:Q};var si=function(){function e(){}return e}();e.cs_guild_map_task_reset_response=si,__reflect(si.prototype,"Sproto.cs_guild_map_task_reset_response"),e.ALL_DICT.cs_guild_map_task_reset_response={en:et,de:$};var li=function(){function e(){}return e}();e.cs_guild_member_recruit_request=li,__reflect(li.prototype,"Sproto.cs_guild_member_recruit_request"),e.ALL_DICT.cs_guild_member_recruit_request={en:it,de:tt};var ci=function(){function e(){}return e}();e.cs_guild_peach_eat_request=ci,__reflect(ci.prototype,"Sproto.cs_guild_peach_eat_request"),e.ALL_DICT.cs_guild_peach_eat_request={en:nt,de:ot};var ui=function(){function e(){}return e}();e.cs_guild_peach_info_request=ui,__reflect(ui.prototype,"Sproto.cs_guild_peach_info_request"),e.ALL_DICT.cs_guild_peach_info_request={en:rt,de:at};var pi=function(){function e(){}return e}();e.cs_guild_peach_reward_request=pi,__reflect(pi.prototype,"Sproto.cs_guild_peach_reward_request"),e.ALL_DICT.cs_guild_peach_reward_request={en:lt,de:st};var hi=function(){function e(){}return e}();e.cs_guild_protector_everyday_reward_request=hi,__reflect(hi.prototype,"Sproto.cs_guild_protector_everyday_reward_request"),e.ALL_DICT.cs_guild_protector_everyday_reward_request={en:ut,de:ct};var di=function(){function e(){}return e}();e.cs_guild_protector_info_request=di,__reflect(di.prototype,"Sproto.cs_guild_protector_info_request"),e.ALL_DICT.cs_guild_protector_info_request={en:ht,de:pt};var _i=function(){function e(){}return e}();e.cs_guild_protector_uplevel_request=_i,__reflect(_i.prototype,"Sproto.cs_guild_protector_uplevel_request"),e.ALL_DICT.cs_guild_protector_uplevel_request={en:_t,de:dt};var fi=function(){function e(){}return e}();e.cs_guild_rename_request=fi,__reflect(fi.prototype,"Sproto.cs_guild_rename_request"),e.ALL_DICT.cs_guild_rename_request={en:mt,de:ft};var mi=function(){function e(){}return e}();e.cs_guild_sendchat_request=mi,__reflect(mi.prototype,"Sproto.cs_guild_sendchat_request"),e.ALL_DICT.cs_guild_sendchat_request={en:vt,de:gt};var gi=function(){function e(){}return e}();e.cs_guild_sendshare_request=gi,__reflect(gi.prototype,"Sproto.cs_guild_sendshare_request"),e.ALL_DICT.cs_guild_sendshare_request={en:Ct,de:yt};var vi=function(){function e(){}return e}();e.cs_guild_setapply_request=vi,__reflect(vi.prototype,"Sproto.cs_guild_setapply_request"),e.ALL_DICT.cs_guild_setapply_request={en:St,de:bt};var yi=function(){function e(){}return e}();e.cs_guild_setautoadd_request=yi,__reflect(yi.prototype,"Sproto.cs_guild_setautoadd_request"),e.ALL_DICT.cs_guild_setautoadd_request={en:Tt,de:Gt};var Ci=function(){function e(){}return e}();e.cs_guild_skill_info_request=Ci,__reflect(Ci.prototype,"Sproto.cs_guild_skill_info_request"),e.ALL_DICT.cs_guild_skill_info_request={en:wt,de:It};var bi=function(){function e(){}return e}();e.cs_guild_skill_learn_request=bi,__reflect(bi.prototype,"Sproto.cs_guild_skill_learn_request"),e.ALL_DICT.cs_guild_skill_learn_request={en:kt,de:At};var Si=function(){function e(){}return e}();e.exchange_info=Si,__reflect(Si.prototype,"Sproto.exchange_info"),e.ALL_DICT.exchange_info={en:Mt,de:Et};var Gi=function(){function e(){}return e}();e.guild_bag=Gi,__reflect(Gi.prototype,"Sproto.guild_bag"),e.ALL_DICT.guild_bag={en:Pt,de:Dt};var Ti=function(){function e(){}return e}();e.task_info=Ti,__reflect(Ti.prototype,"Sproto.task_info"),e.ALL_DICT.task_info={en:Rt,de:Lt}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new Et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.vip=e.ri();break;case 2:t.job=e.ri();break;case 3:t.sex=e.ri();break;case 4:t.power=e.ri();break;case 5:t.playername=e.rs();break;case 6:t.level=e.ri();break;case 7:t.logouttime=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.vip&&o.wi(t.vip,1),void 0!=t.job&&o.wi(t.job,2),void 0!=t.sex&&o.wi(t.sex,3),void 0!=t.power&&o.wi(t.power,4),void 0!=t.playername&&o.ws(t.playername,5),void 0!=t.level&&o.wi(t.level,6),void 0!=t.logouttime&&o.wi(t.logouttime,7),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new Mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();
break;case 1:t.content=e.rs();break;case 2:t.playerid=e.ri();break;case 3:t.name=e.rs();break;case 4:t.job=e.ri();break;case 5:t.sex=e.ri();break;case 6:t.vip=e.ri();break;case 7:t.office=e.ri();break;case 8:t.time=e.ri();break;case 9:t.share=e.ro("share_date");break;case 10:t.headframe=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.content&&o.ws(t.content,1),void 0!=t.playerid&&o.wi(t.playerid,2),void 0!=t.name&&o.ws(t.name,3),void 0!=t.job&&o.wi(t.job,4),void 0!=t.sex&&o.wi(t.sex,5),void 0!=t.vip&&o.wi(t.vip,6),void 0!=t.office&&o.wi(t.office,7),void 0!=t.time&&o.wi(t.time,8),void 0!=t.share&&o.wo("share_date",t.share,9),void 0!=t.headframe&&o.wi(t.headframe,10),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new Dt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.time=e.ri();break;case 1:t.type=e.ri();break;case 2:t.param1=e.ri();break;case 3:t.param2=e.ri();break;case 4:t.param3=e.ri();break;case 5:t.name1=e.rs();break;case 6:t.name2=e.rs();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.time&&o.wi(t.time,0),void 0!=t.type&&o.wi(t.type,1),void 0!=t.param1&&o.wi(t.param1,2),void 0!=t.param2&&o.wi(t.param2,3),void 0!=t.param3&&o.wi(t.param3,4),void 0!=t.name1&&o.ws(t.name1,5),void 0!=t.name2&&o.ws(t.name2,6),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new Pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ria();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.id=e.ri();break;case 4:t.name=e.rs();break;case 5:t.serverid=e.ri();break;case 6:t.guildid=e.ri();break;case 7:t.guildname=e.rs();break;case 8:t.level=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.shows&&o.wia(t.shows,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.id&&o.wi(t.id,3),void 0!=t.name&&o.ws(t.name,4),void 0!=t.serverid&&o.wi(t.serverid,5),void 0!=t.guildid&&o.wi(t.guildid,6),void 0!=t.guildname&&o.ws(t.guildname,7),void 0!=t.level&&o.wi(t.level,8),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new Lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.historyRecord=e.ro("guild_history");break;case 2:t.chatRecord=e.ro("guild_chat");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.historyRecord&&o.wo("guild_history",t.historyRecord,1),void 0!=t.chatRecord&&o.wo("guild_chat",t.chatRecord,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new Rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.level=e.ri();break;case 2:t.playercount=e.ri();break;case 3:t.name=e.rs();break;case 4:t.leaderinfo=e.ro("member_info");break;case 5:t.needPower=e.ri();break;case 6:t.totalpower=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.playercount&&o.wi(t.playercount,2),void 0!=t.name&&o.ws(t.name,3),void 0!=t.leaderinfo&&o.wo("member_info",t.leaderinfo,4),void 0!=t.needPower&&o.wi(t.needPower,5),void 0!=t.totalpower&&o.wi(t.totalpower,6),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.playername=e.rs();break;case 2:t.office=e.ri();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;case 5:t.vip=e.ri();break;case 8:t.contribute=e.ri();break;case 9:t.todayContri=e.ri();break;case 10:t.curcontribute=e.ri();break;case 11:t.power=e.ri();break;case 12:t.logouttime=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,12);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.playername&&o.ws(t.playername,1),void 0!=t.office&&o.wi(t.office,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),void 0!=t.vip&&o.wi(t.vip,5),void 0!=t.contribute&&o.wi(t.contribute,8),void 0!=t.todayContri&&o.wi(t.todayContri,9),void 0!=t.curcontribute&&o.wi(t.curcontribute,10),void 0!=t.power&&o.wi(t.power,11),void 0!=t.logouttime&&o.wi(t.logouttime,12),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new Bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.fund=e.ri();break;case 2:t.notice=e.rs();break;case 3:t.autoJoin=e.ri();break;case 4:t.needPower=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.fund&&o.wi(t.fund,1),void 0!=t.notice&&o.ws(t.notice,2),void 0!=t.autoJoin&&o.wi(t.autoJoin,3),void 0!=t.needPower&&o.wi(t.needPower,4),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new Ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.time=e.ri();break;case 1:t.peachId=e.ri();break;case 2:t.playerName=e.rs();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.time&&o.wi(t.time,0),void 0!=t.peachId&&o.wi(t.peachId,1),void 0!=t.playerName&&o.ws(t.playerName,2),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskId=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.taskId&&o.wi(t.taskId,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new Ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.applyinfo=e.roa("guild_apply");break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.applyinfo&&o.woa("guild_apply",t.applyinfo,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new Ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guilds=e.roa("guild_summary");break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.guilds&&o.woa("guild_summary",t.guilds,0),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new Vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.autoJoin=e.ri();break;case 1:t.needPower=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.autoJoin&&o.wi(t.autoJoin,0),void 0!=t.needPower&&o.wi(t.needPower,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.event=e.ri();break;case 1:t.status=e.ri();break;case 2:t.countdown=e.ri();break;case 3:t.maxhp=e.ri();break;case 4:t.hp=e.ri();break;case 5:t.canreward=e.rb();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.event&&o.wi(t.event,0),void 0!=t.status&&o.wi(t.status,1),void 0!=t.countdown&&o.wi(t.countdown,2),void 0!=t.maxhp&&o.wi(t.maxhp,3),void 0!=t.hp&&o.wi(t.hp,4),void 0!=t.canreward&&o.wb(t.canreward,5),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new Ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.text=e.rs();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.text&&o.ws(t.text,1),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new Yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.office=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.office&&o.wi(t.office,1),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.totalNum=e.ri();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.totalNum&&o.wi(t.totalNum,0),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new jt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.rb();break;case 1:t.id=e.ri();break;case 2:t.totalNum=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.result&&o.wb(t.result,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.totalNum&&o.wi(t.totalNum,2),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new Xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fund=e.ri();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fund&&o.wi(t.fund,0),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new Kt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;case 2:t.variable=e.ro("other_guild_info");break;case 3:t.summary=e.ro("guild_summary");break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.variable&&o.wo("other_guild_info",t.variable,2),void 0!=t.summary&&o.wo("guild_summary",t.summary,3),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new Jt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.playerid&&o.wi(t.playerid,0),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new Qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guilds=e.roa("guild_summary");break;case 1:t.receiveCount=e.ri();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.guilds&&o.woa("guild_summary",t.guilds,0),void 0!=t.receiveCount&&o.wi(t.receiveCount,1),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new Zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;case 2:t.recount=e.ri();break;case 3:t.rewardStatus=e.rb();break;default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),void 0!=t.recount&&o.wi(t.recount,2),void 0!=t.rewardStatus&&o.wb(t.rewardStatus,3),e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new $t,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.reward=e.roa("reward_data");break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.reward&&o.woa("reward_data",t.reward,0),e.SprotoCore.CloseSerialize(o)}function Q(e){for(var t=new ei,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.members=e.roa("member_info");break;default:e.nod()}return t}function Z(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.members&&o.woa("member_info",t.members,0),e.SprotoCore.CloseSerialize(o)}function $(e){for(var t=new ti,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.result=e.ri();break;default:e.nod()}return t}function et(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.result&&o.wi(t.result,1),e.SprotoCore.CloseSerialize(o)}function tt(e){for(var t=new ii,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardMark=e.ri();break;case 2:t.eatStatus=e.rb();break;default:e.nod()}return t}function it(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.rewardMark&&o.wi(t.rewardMark,0),void 0!=t.eatStatus&&o.wb(t.eatStatus,2),e.SprotoCore.CloseSerialize(o)}function ot(e){for(var t=new oi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.peachExp=e.ri();break;case 1:t.eatRecord=e.roa("peach_record");break;default:e.nod()}return t}function nt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.peachExp&&o.wi(t.peachExp,0),void 0!=t.eatRecord&&o.woa("peach_record",t.eatRecord,1),e.SprotoCore.CloseSerialize(o)}function at(e){for(var t=new ni,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.peachExp=e.ri();break;case 1:t.eatRecord=e.ro("peach_record");break;default:e.nod()}return t}function rt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.peachExp&&o.wi(t.peachExp,0),void 0!=t.eatRecord&&o.wo("peach_record",t.eatRecord,1),e.SprotoCore.CloseSerialize(o)}function st(e){for(var t=new ai,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.contribute=e.ri();break;case 1:t.curcontribute=e.ri();break;case 2:t.office=e.ri();break;default:e.nod()}return t}function lt(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.contribute&&o.wi(t.contribute,0),void 0!=t.curcontribute&&o.wi(t.curcontribute,1),void 0!=t.office&&o.wi(t.office,2),e.SprotoCore.CloseSerialize(o)}function ct(e){for(var t=new ri,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.todayActive=e.ri();break;case 1:t.totalActive=e.ri();break;case 2:t.protectorLv=e.ri();break;case 3:t.rewardMark=e.ri();break;default:e.nod()}return t}function ut(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.todayActive&&o.wi(t.todayActive,0),void 0!=t.totalActive&&o.wi(t.totalActive,1),void 0!=t.protectorLv&&o.wi(t.protectorLv,2),void 0!=t.rewardMark&&o.wi(t.rewardMark,3),e.SprotoCore.CloseSerialize(o)}function pt(e){for(var t=new si,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.taskinfos=e.roa("protector_task_info");break;default:e.nod()}return t}function ht(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.taskinfos&&o.woa("protector_task_info",t.taskinfos,0),e.SprotoCore.CloseSerialize(o)}function dt(e){for(var t=new li,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.record=e.ro("guild_record");break;default:e.nod()}return t}function _t(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.record&&o.wo("guild_record",t.record,0),e.SprotoCore.CloseSerialize(o)}function ft(e){for(var t=new ci,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.records=e.roa("guild_record");break;default:e.nod()}return t}function mt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.records&&o.woa("guild_record",t.records,0),e.SprotoCore.CloseSerialize(o)}function gt(e){for(var t=new ui,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.count=e.ri();break;default:e.nod()}return t}function vt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.count&&o.wi(t.count,0),e.SprotoCore.CloseSerialize(o)}function yt(e){for(var t=new pi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.newGuildName=e.rs();break;case 1:t.errorInfo=e.rs();break;default:e.nod()}return t}function Ct(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.newGuildName&&o.ws(t.newGuildName,0),void 0!=t.errorInfo&&o.ws(t.errorInfo,1),e.SprotoCore.CloseSerialize(o)}function bt(e){for(var t=new hi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.robotlist=e.roa("guild_map_shows");break;default:e.nod()}return t}function St(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.robotlist&&o.woa("guild_map_shows",t.robotlist,0),e.SprotoCore.CloseSerialize(o)}function Gt(e){for(var t=new di,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skillInfos=e.roa("skill_info");break;default:e.nod()}return t}function Tt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.skillInfos&&o.woa("skill_info",t.skillInfos,0),e.SprotoCore.CloseSerialize(o)}function It(e){for(var t=new _i,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skillInfo=e.ro("skill_info");break;case 1:t.learnPos=e.ri();break;default:e.nod()}return t}function wt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.skillInfo&&o.wo("skill_info",t.skillInfo,0),void 0!=t.learnPos&&o.wi(t.learnPos,1),e.SprotoCore.CloseSerialize(o)}function At(e){for(var t=new fi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.posId=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function kt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.posId&&o.wi(t.posId,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}var Et=function(){function e(){}return e}();e.guild_apply=Et,__reflect(Et.prototype,"Sproto.guild_apply"),e.ALL_DICT.guild_apply={en:i,de:t};var Mt=function(){function e(){}return e}();e.guild_chat=Mt,__reflect(Mt.prototype,"Sproto.guild_chat"),e.ALL_DICT.guild_chat={en:n,de:o};var Dt=function(){function e(){}return e}();e.guild_history=Dt,__reflect(Dt.prototype,"Sproto.guild_history"),e.ALL_DICT.guild_history={en:r,de:a};var Pt=function(){function e(){}return e}();e.guild_map_shows=Pt,__reflect(Pt.prototype,"Sproto.guild_map_shows"),e.ALL_DICT.guild_map_shows={en:l,de:s};var Lt=function(){function e(){}return e}();e.guild_record=Lt,__reflect(Lt.prototype,"Sproto.guild_record"),e.ALL_DICT.guild_record={en:u,de:c};var Rt=function(){function e(){}return e}();e.guild_summary=Rt,__reflect(Rt.prototype,"Sproto.guild_summary"),e.ALL_DICT.guild_summary={en:h,de:p};var xt=function(){function e(){}return e}();e.member_info=xt,__reflect(xt.prototype,"Sproto.member_info"),e.ALL_DICT.member_info={en:_,de:d};var Bt=function(){function e(){}return e}();e.other_guild_info=Bt,__reflect(Bt.prototype,"Sproto.other_guild_info"),e.ALL_DICT.other_guild_info={en:m,de:f};var Ut=function(){function e(){}return e}();e.peach_record=Ut,__reflect(Ut.prototype,"Sproto.peach_record"),e.ALL_DICT.peach_record={en:v,de:g};var Nt=function(){function e(){}return e}();e.protector_task_info=Nt,__reflect(Nt.prototype,"Sproto.protector_task_info"),e.ALL_DICT.protector_task_info={en:C,de:y};var Ot=function(){function e(){}return e}();e.sc_guild_apply_request=Ot,__reflect(Ot.prototype,"Sproto.sc_guild_apply_request"),e.ALL_DICT.sc_guild_apply_request={en:S,de:b};var Ft=function(){function e(){}return e}();e.sc_guild_apply_list_request=Ft,__reflect(Ft.prototype,"Sproto.sc_guild_apply_list_request"),e.ALL_DICT.sc_guild_apply_list_request={en:T,de:G};var Vt=function(){function e(){}return e}();e.sc_guild_autoadd_ret_request=Vt,__reflect(Vt.prototype,"Sproto.sc_guild_autoadd_ret_request"),e.ALL_DICT.sc_guild_autoadd_ret_request={en:w,de:I};var qt=function(){function e(){}return e}();e.sc_guild_boss_info_request=qt,__reflect(qt.prototype,"Sproto.sc_guild_boss_info_request"),e.ALL_DICT.sc_guild_boss_info_request={en:k,de:A};var Ht=function(){function e(){}return e}();e.sc_guild_change_notice_ret_request=Ht,__reflect(Ht.prototype,"Sproto.sc_guild_change_notice_ret_request"),e.ALL_DICT.sc_guild_change_notice_ret_request={en:M,de:E};var Yt=function(){function e(){}return e}();e.sc_guild_change_office_ret_request=Yt,__reflect(Yt.prototype,"Sproto.sc_guild_change_office_ret_request"),e.ALL_DICT.sc_guild_change_office_ret_request={en:P,de:D};var Wt=function(){function e(){}return e}();e.sc_guild_create_ret_request=Wt,__reflect(Wt.prototype,"Sproto.sc_guild_create_ret_request"),e.ALL_DICT.sc_guild_create_ret_request={en:R,de:L};var zt=function(){function e(){}return e}();e.sc_guild_donate_info_request=zt,__reflect(zt.prototype,"Sproto.sc_guild_donate_info_request"),e.ALL_DICT.sc_guild_donate_info_request={en:B,de:x};var jt=function(){function e(){}return e}();e.sc_guild_donate_ret_request=jt,__reflect(jt.prototype,"Sproto.sc_guild_donate_ret_request"),e.ALL_DICT.sc_guild_donate_ret_request={en:N,de:U};var Xt=function(){function e(){}return e}();e.sc_guild_fund_request=Xt,__reflect(Xt.prototype,"Sproto.sc_guild_fund_request"),e.ALL_DICT.sc_guild_fund_request={en:F,de:O};var Kt=function(){function e(){}return e}();e.sc_guild_info_request=Kt,__reflect(Kt.prototype,"Sproto.sc_guild_info_request"),e.ALL_DICT.sc_guild_info_request={en:q,de:V};var Jt=function(){function e(){}return e}();e.sc_guild_kick_ret_request=Jt,__reflect(Jt.prototype,"Sproto.sc_guild_kick_ret_request"),e.ALL_DICT.sc_guild_kick_ret_request={en:Y,de:H};var Qt=function(){function e(){}return e}();e.sc_guild_list_request=Qt,__reflect(Qt.prototype,"Sproto.sc_guild_list_request"),e.ALL_DICT.sc_guild_list_request={en:z,de:W};var Zt=function(){function e(){}return e}();e.sc_guild_map_one_update_request=Zt,__reflect(Zt.prototype,"Sproto.sc_guild_map_one_update_request"),e.ALL_DICT.sc_guild_map_one_update_request={en:X,de:j};var $t=function(){function e(){}return e}();e.sc_guild_map_reward_request=$t,__reflect($t.prototype,"Sproto.sc_guild_map_reward_request"),e.ALL_DICT.sc_guild_map_reward_request={en:J,de:K};var ei=function(){function e(){}return e}();e.sc_guild_members_request=ei,__reflect(ei.prototype,"Sproto.sc_guild_members_request"),e.ALL_DICT.sc_guild_members_request={en:Z,de:Q};var ti=function(){function e(){}return e}();e.sc_guild_notice_apply_request=ti,__reflect(ti.prototype,"Sproto.sc_guild_notice_apply_request"),e.ALL_DICT.sc_guild_notice_apply_request={en:et,de:$};var ii=function(){function e(){}return e}();e.sc_guild_peach_info_request=ii,__reflect(ii.prototype,"Sproto.sc_guild_peach_info_request"),e.ALL_DICT.sc_guild_peach_info_request={en:it,de:tt};var oi=function(){function e(){}return e}();e.sc_guild_peach_record_request=oi,__reflect(oi.prototype,"Sproto.sc_guild_peach_record_request"),e.ALL_DICT.sc_guild_peach_record_request={en:nt,de:ot};var ni=function(){function e(){}return e}();e.sc_guild_peach_record_add_request=ni,__reflect(ni.prototype,"Sproto.sc_guild_peach_record_add_request"),e.ALL_DICT.sc_guild_peach_record_add_request={en:rt,de:at};var ai=function(){function e(){}return e}();e.sc_guild_playerinfo_request=ai,__reflect(ai.prototype,"Sproto.sc_guild_playerinfo_request"),e.ALL_DICT.sc_guild_playerinfo_request={en:lt,de:st};var ri=function(){function e(){}return e}();e.sc_guild_protector_info_request=ri,__reflect(ri.prototype,"Sproto.sc_guild_protector_info_request"),e.ALL_DICT.sc_guild_protector_info_request={en:ut,de:ct};var si=function(){function e(){}return e}();e.sc_guild_protector_task_info_request=si,__reflect(si.prototype,"Sproto.sc_guild_protector_task_info_request"),e.ALL_DICT.sc_guild_protector_task_info_request={en:ht,de:pt};var li=function(){function e(){}return e}();e.sc_guild_record_add_request=li,__reflect(li.prototype,"Sproto.sc_guild_record_add_request"),e.ALL_DICT.sc_guild_record_add_request={en:_t,de:dt};var ci=function(){function e(){}return e}();e.sc_guild_record_data_request=ci,__reflect(ci.prototype,"Sproto.sc_guild_record_data_request"),e.ALL_DICT.sc_guild_record_data_request={en:mt,de:ft};var ui=function(){function e(){}return e}();e.sc_guild_rename_request=ui,__reflect(ui.prototype,"Sproto.sc_guild_rename_request"),e.ALL_DICT.sc_guild_rename_request={en:vt,de:gt};var pi=function(){function e(){}return e}();e.sc_guild_rename_ret_request=pi,__reflect(pi.prototype,"Sproto.sc_guild_rename_ret_request"),e.ALL_DICT.sc_guild_rename_ret_request={en:Ct,de:yt};var hi=function(){function e(){}return e}();e.sc_guild_robot_datas_request=hi,__reflect(hi.prototype,"Sproto.sc_guild_robot_datas_request"),e.ALL_DICT.sc_guild_robot_datas_request={en:St,de:bt};var di=function(){function e(){}return e}();e.sc_guild_skill_info_request=di,__reflect(di.prototype,"Sproto.sc_guild_skill_info_request"),e.ALL_DICT.sc_guild_skill_info_request={en:Tt,de:Gt};var _i=function(){function e(){}return e}();e.sc_guild_skill_learn_ret_request=_i,__reflect(_i.prototype,"Sproto.sc_guild_skill_learn_ret_request"),e.ALL_DICT.sc_guild_skill_learn_ret_request={en:wt,de:It};var fi=function(){function e(){}return e}();e.skill_info=fi,__reflect(fi.prototype,"Sproto.skill_info"),e.ALL_DICT.skill_info={en:kt,de:At}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.challengeid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.challengeid&&o.wi(t.challengeid,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxid&&o.wi(t.boxid,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.success=e.rb();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.success&&o.wb(t.success,0),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.cs_guildboss_challenge_request=s,__reflect(s.prototype,"Sproto.cs_guildboss_challenge_request"),e.ALL_DICT.cs_guildboss_challenge_request={en:i,de:t};var l=function(){function e(){}return e}();e.cs_guildboss_collect_box_start_request=l,__reflect(l.prototype,"Sproto.cs_guildboss_collect_box_start_request"),e.ALL_DICT.cs_guildboss_collect_box_start_request={en:n,de:o};var c=function(){function e(){}return e}();e.cs_guildboss_get_rewards_response=c,__reflect(c.prototype,"Sproto.cs_guildboss_get_rewards_response"),e.ALL_DICT.cs_guildboss_get_rewards_response={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.boxid=e.ri();break;case 2:t.time=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.boxid&&o.wi(t.boxid,1),void 0!=t.time&&o.wi(t.time,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.serverid=e.ri();break;case 2:t.guildid=e.ri();break;case 3:t.guildname=e.rs();break;case 4:t.damage=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.serverid&&o.wi(t.serverid,1),void 0!=t.guildid&&o.wi(t.guildid,2),void 0!=t.guildname&&o.ws(t.guildname,3),void 0!=t.damage&&o.wi(t.damage,4),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.serverid=e.ri();break;case 2:t.damage=e.ri();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.serverid&&o.wi(t.serverid,1),void 0!=t.damage&&o.wi(t.damage,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxinfos=e.roa("guildboss_boxinfo");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxinfos&&o.woa("guildboss_boxinfo",t.boxinfos,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxinfo=e.ro("guildboss_boxinfo");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxinfo&&o.wo("guildboss_boxinfo",t.boxinfo,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.infos=e.roa("guildboss_collect_info");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.infos&&o.woa("guildboss_collect_info",t.infos,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.info=e.ro("guildboss_collect_info");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.info&&o.wo("guildboss_collect_info",t.info,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.status=e.ri();break;case 1:t.changetime=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.status&&o.wi(t.status,0),void 0!=t.changetime&&o.wi(t.changetime,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.deadtime=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.deadtime&&o.wi(t.deadtime,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.firstinfo=e.ro("guildboss_firstinfo");break;case 1:t.playerranks=e.roa("guildboss_rank");break;case 2:t.mydamage=e.ri();break;case 3:t.myrank=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.firstinfo&&o.wo("guildboss_firstinfo",t.firstinfo,0),void 0!=t.playerranks&&o.woa("guildboss_rank",t.playerranks,1),void 0!=t.mydamage&&o.wi(t.mydamage,2),void 0!=t.myrank&&o.wi(t.myrank,3),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerranks=e.roa("guildboss_rank");break;case 1:t.mydamage=e.ri();break;case 2:t.myrank=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.playerranks&&o.woa("guildboss_rank",t.playerranks,0),void 0!=t.mydamage&&o.wi(t.mydamage,1),void 0!=t.myrank&&o.wi(t.myrank,2),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shieldvalue=e.ri();break;case 1:t.hp=e.ri();break;case 2:t.hpperc=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.shieldvalue&&o.wi(t.shieldvalue,0),void 0!=t.hp&&o.wi(t.hp,1),void 0!=t.hpperc&&o.wi(t.hpperc,2),e.SprotoCore.CloseSerialize(o)}var E=function(){function e(){}return e}();e.guildboss_boxinfo=E,__reflect(E.prototype,"Sproto.guildboss_boxinfo"),e.ALL_DICT.guildboss_boxinfo={en:i,de:t};var M=function(){function e(){}return e}();e.guildboss_collect_info=M,__reflect(M.prototype,"Sproto.guildboss_collect_info"),e.ALL_DICT.guildboss_collect_info={en:n,de:o};var D=function(){function e(){}return e}();e.guildboss_firstinfo=D,__reflect(D.prototype,"Sproto.guildboss_firstinfo"),e.ALL_DICT.guildboss_firstinfo={en:r,de:a};var P=function(){function e(){}return e}();e.guildboss_rank=P,__reflect(P.prototype,"Sproto.guildboss_rank"),e.ALL_DICT.guildboss_rank={en:l,de:s};var L=function(){function e(){}return e}();e.sc_guildboss_box_all_request=L,__reflect(L.prototype,"Sproto.sc_guildboss_box_all_request"),e.ALL_DICT.sc_guildboss_box_all_request={en:u,de:c};var R=function(){function e(){}return e}();e.sc_guildboss_box_one_request=R,__reflect(R.prototype,"Sproto.sc_guildboss_box_one_request"),e.ALL_DICT.sc_guildboss_box_one_request={en:h,de:p};var x=function(){function e(){}return e}();e.sc_guildboss_collect_all_request=x,__reflect(x.prototype,"Sproto.sc_guildboss_collect_all_request"),e.ALL_DICT.sc_guildboss_collect_all_request={en:_,de:d};var B=function(){function e(){}return e}();e.sc_guildboss_collect_now_request=B,__reflect(B.prototype,"Sproto.sc_guildboss_collect_now_request"),e.ALL_DICT.sc_guildboss_collect_now_request={en:m,de:f};var U=function(){function e(){}return e}();e.sc_guildboss_info_request=U,__reflect(U.prototype,"Sproto.sc_guildboss_info_request"),e.ALL_DICT.sc_guildboss_info_request={en:v,de:g};var N=function(){function e(){}return e}();e.sc_guildboss_player_dead_request=N,__reflect(N.prototype,"Sproto.sc_guildboss_player_dead_request"),e.ALL_DICT.sc_guildboss_player_dead_request={en:C,de:y};var O=function(){function e(){}return e}();e.sc_guildboss_rank_last_request=O,__reflect(O.prototype,"Sproto.sc_guildboss_rank_last_request"),e.ALL_DICT.sc_guildboss_rank_last_request={en:S,de:b};var F=function(){function e(){}return e}();e.sc_guildboss_rank_now_request=F,__reflect(F.prototype,"Sproto.sc_guildboss_rank_now_request"),e.ALL_DICT.sc_guildboss_rank_now_request={en:T,de:G};var V=function(){function e(){}return e}();e.sc_guildboss_rewards_request=V,__reflect(V.prototype,"Sproto.sc_guildboss_rewards_request"),e.ALL_DICT.sc_guildboss_rewards_request={en:w,de:I};var q=function(){function e(){}return e}();e.sc_guildboss_update_info_request=q,__reflect(q.prototype,"Sproto.sc_guildboss_update_info_request"),e.ALL_DICT.sc_guildboss_update_info_request={en:k,de:A}}(Sproto||(Sproto={}));
var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mineId=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mineId&&o.wi(t.mineId,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mineId=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mineId&&o.wi(t.mineId,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mineId=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mineId&&o.wi(t.mineId,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rankType=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rankType&&o.wi(t.rankType,0),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.cs_guildmine_enter_request=b,__reflect(b.prototype,"Sproto.cs_guildmine_enter_request"),e.ALL_DICT.cs_guildmine_enter_request={en:i,de:t};var S=function(){function e(){}return e}();e.cs_guildmine_force_join_request=S,__reflect(S.prototype,"Sproto.cs_guildmine_force_join_request"),e.ALL_DICT.cs_guildmine_force_join_request={en:n,de:o};var G=function(){function e(){}return e}();e.cs_guildmine_force_join_response=G,__reflect(G.prototype,"Sproto.cs_guildmine_force_join_response"),e.ALL_DICT.cs_guildmine_force_join_response={en:r,de:a};var T=function(){function e(){}return e}();e.cs_guildmine_gather_request=T,__reflect(T.prototype,"Sproto.cs_guildmine_gather_request"),e.ALL_DICT.cs_guildmine_gather_request={en:l,de:s};var I=function(){function e(){}return e}();e.cs_guildmine_gather_response=I,__reflect(I.prototype,"Sproto.cs_guildmine_gather_response"),e.ALL_DICT.cs_guildmine_gather_response={en:u,de:c};var w=function(){function e(){}return e}();e.cs_guildmine_join_mine_request=w,__reflect(w.prototype,"Sproto.cs_guildmine_join_mine_request"),e.ALL_DICT.cs_guildmine_join_mine_request={en:h,de:p};var A=function(){function e(){}return e}();e.cs_guildmine_join_mine_response=A,__reflect(A.prototype,"Sproto.cs_guildmine_join_mine_response"),e.ALL_DICT.cs_guildmine_join_mine_response={en:_,de:d};var k=function(){function e(){}return e}();e.cs_guildmine_leave_mine_request=k,__reflect(k.prototype,"Sproto.cs_guildmine_leave_mine_request"),e.ALL_DICT.cs_guildmine_leave_mine_request={en:m,de:f};var E=function(){function e(){}return e}();e.cs_guildmine_mine_info_request=E,__reflect(E.prototype,"Sproto.cs_guildmine_mine_info_request"),e.ALL_DICT.cs_guildmine_mine_info_request={en:v,de:g};var M=function(){function e(){}return e}();e.cs_guildmine_score_rank_request=M,__reflect(M.prototype,"Sproto.cs_guildmine_score_rank_request"),e.ALL_DICT.cs_guildmine_score_rank_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.level=e.ri();break;case 2:t.power=e.ri();break;case 3:t.hp=e.ri();break;case 4:t.job=e.ri();break;case 5:t.sex=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.power&&o.wi(t.power,2),void 0!=t.hp&&o.wi(t.hp,3),void 0!=t.job&&o.wi(t.job,4),void 0!=t.sex&&o.wi(t.sex,5),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.status=e.ri();break;case 1:t.guard=e.roa("guard_info");break;case 2:t.mineId=e.ri();break;case 3:t.guildName=e.rs();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.status&&o.wi(t.status,0),void 0!=t.guard&&o.woa("guard_info",t.guard,1),void 0!=t.mineId&&o.wi(t.mineId,2),void 0!=t.guildName&&o.ws(t.guildName,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mineinfos=e.roa("mine_info");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mineinfos&&o.woa("mine_info",t.mineinfos,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.status=e.ri();break;case 1:t.mineId=e.ri();break;case 2:t.gatherTime=e.ri();break;case 3:t.chainrate=e.ri();break;case 4:t.attackTime=e.ri();break;case 5:t.guildRank=e.ri();break;case 6:t.guildScore=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.status&&o.wi(t.status,0),void 0!=t.mineId&&o.wi(t.mineId,1),void 0!=t.gatherTime&&o.wi(t.gatherTime,2),void 0!=t.chainrate&&o.wi(t.chainrate,3),void 0!=t.attackTime&&o.wi(t.attackTime,4),void 0!=t.guildRank&&o.wi(t.guildRank,5),void 0!=t.guildScore&&o.wi(t.guildScore,6),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mineinfo=e.ro("mine_info");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mineinfo&&o.wo("mine_info",t.mineinfo,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.level=e.ri();break;case 2:t.serverId=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.serverId&&o.wi(t.serverId,2),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rankType=e.ri();break;case 1:t.rankdatas=e.roa("score_info");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.rankType&&o.wi(t.rankType,0),void 0!=t.rankdatas&&o.woa("score_info",t.rankdatas,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guildId=e.ri();break;case 1:t.guildName=e.rs();break;case 2:t.score=e.ri();break;case 3:t.rank=e.ri();break;case 4:t.serverId=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.guildId&&o.wi(t.guildId,0),void 0!=t.guildName&&o.ws(t.guildName,1),void 0!=t.score&&o.wi(t.score,2),void 0!=t.rank&&o.wi(t.rank,3),void 0!=t.serverId&&o.wi(t.serverId,4),e.SprotoCore.CloseSerialize(o)}var g=function(){function e(){}return e}();e.guard_info=g,__reflect(g.prototype,"Sproto.guard_info"),e.ALL_DICT.guard_info={en:i,de:t};var v=function(){function e(){}return e}();e.mine_info=v,__reflect(v.prototype,"Sproto.mine_info"),e.ALL_DICT.mine_info={en:n,de:o};var y=function(){function e(){}return e}();e.sc_guildmine_mine_info_request=y,__reflect(y.prototype,"Sproto.sc_guildmine_mine_info_request"),e.ALL_DICT.sc_guildmine_mine_info_request={en:r,de:a};var C=function(){function e(){}return e}();e.sc_guildmine_mine_mystatus_request=C,__reflect(C.prototype,"Sproto.sc_guildmine_mine_mystatus_request"),e.ALL_DICT.sc_guildmine_mine_mystatus_request={en:l,de:s};var b=function(){function e(){}return e}();e.sc_guildmine_mine_one_info_request=b,__reflect(b.prototype,"Sproto.sc_guildmine_mine_one_info_request"),e.ALL_DICT.sc_guildmine_mine_one_info_request={en:u,de:c};var S=function(){function e(){}return e}();e.sc_guildmine_rob_info_request=S,__reflect(S.prototype,"Sproto.sc_guildmine_rob_info_request"),e.ALL_DICT.sc_guildmine_rob_info_request={en:h,de:p};var G=function(){function e(){}return e}();e.sc_guildmine_score_rank_day_request=G,__reflect(G.prototype,"Sproto.sc_guildmine_score_rank_day_request"),e.ALL_DICT.sc_guildmine_score_rank_day_request={en:_,de:d};var T=function(){function e(){}return e}();e.score_info=T,__reflect(T.prototype,"Sproto.score_info"),e.ALL_DICT.score_info={en:m,de:f}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossid=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossid&&o.wi(t.bossid,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardid=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rewardid&&o.wi(t.rewardid,0),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new Z,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new $,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new et,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var U=function(){function e(){}return e}();e.cs_guildwar_all_guild_rank_info_request=U,__reflect(U.prototype,"Sproto.cs_guildwar_all_guild_rank_info_request"),e.ALL_DICT.cs_guildwar_all_guild_rank_info_request={en:i,de:t};var N=function(){function e(){}return e}();e.cs_guildwar_all_player_rank_info_request=N,__reflect(N.prototype,"Sproto.cs_guildwar_all_player_rank_info_request"),e.ALL_DICT.cs_guildwar_all_player_rank_info_request={en:n,de:o};var O=function(){function e(){}return e}();e.cs_guildwar_attack_boss_request=O,__reflect(O.prototype,"Sproto.cs_guildwar_attack_boss_request"),e.ALL_DICT.cs_guildwar_attack_boss_request={en:r,de:a};var F=function(){function e(){}return e}();e.cs_guildwar_attack_player_request=F,__reflect(F.prototype,"Sproto.cs_guildwar_attack_player_request"),e.ALL_DICT.cs_guildwar_attack_player_request={en:l,de:s};var V=function(){function e(){}return e}();e.cs_guildwar_attack_player_response=V,__reflect(V.prototype,"Sproto.cs_guildwar_attack_player_response"),e.ALL_DICT.cs_guildwar_attack_player_response={en:u,de:c};var q=function(){function e(){}return e}();e.cs_guildwar_clear_attackcd_request=q,__reflect(q.prototype,"Sproto.cs_guildwar_clear_attackcd_request"),e.ALL_DICT.cs_guildwar_clear_attackcd_request={en:h,de:p};var H=function(){function e(){}return e}();e.cs_guildwar_clear_attackcd_response=H,__reflect(H.prototype,"Sproto.cs_guildwar_clear_attackcd_response"),e.ALL_DICT.cs_guildwar_clear_attackcd_response={en:_,de:d};var Y=function(){function e(){}return e}();e.cs_guildwar_clear_reborncd_request=Y,__reflect(Y.prototype,"Sproto.cs_guildwar_clear_reborncd_request"),e.ALL_DICT.cs_guildwar_clear_reborncd_request={en:m,de:f};var W=function(){function e(){}return e}();e.cs_guildwar_clear_reborncd_response=W,__reflect(W.prototype,"Sproto.cs_guildwar_clear_reborncd_response"),e.ALL_DICT.cs_guildwar_clear_reborncd_response={en:v,de:g};var z=function(){function e(){}return e}();e.cs_guildwar_enter_request=z,__reflect(z.prototype,"Sproto.cs_guildwar_enter_request"),e.ALL_DICT.cs_guildwar_enter_request={en:C,de:y};var j=function(){function e(){}return e}();e.cs_guildwar_enter_response=j,__reflect(j.prototype,"Sproto.cs_guildwar_enter_response"),e.ALL_DICT.cs_guildwar_enter_response={en:S,de:b};var X=function(){function e(){}return e}();e.cs_guildwar_exit_barrier_request=X,__reflect(X.prototype,"Sproto.cs_guildwar_exit_barrier_request"),e.ALL_DICT.cs_guildwar_exit_barrier_request={en:T,de:G};var K=function(){function e(){}return e}();e.cs_guildwar_get_score_reward_request=K,__reflect(K.prototype,"Sproto.cs_guildwar_get_score_reward_request"),e.ALL_DICT.cs_guildwar_get_score_reward_request={en:w,de:I};var J=function(){function e(){}return e}();e.cs_guildwar_last_barrier_request=J,__reflect(J.prototype,"Sproto.cs_guildwar_last_barrier_request"),e.ALL_DICT.cs_guildwar_last_barrier_request={en:k,de:A};var Q=function(){function e(){}return e}();e.cs_guildwar_last_barrier_response=Q,__reflect(Q.prototype,"Sproto.cs_guildwar_last_barrier_response"),e.ALL_DICT.cs_guildwar_last_barrier_response={en:M,de:E};var Z=function(){function e(){}return e}();e.cs_guildwar_next_barrier_request=Z,__reflect(Z.prototype,"Sproto.cs_guildwar_next_barrier_request"),e.ALL_DICT.cs_guildwar_next_barrier_request={en:P,de:D};var $=function(){function e(){}return e}();e.cs_guildwar_next_barrier_response=$,__reflect($.prototype,"Sproto.cs_guildwar_next_barrier_response"),e.ALL_DICT.cs_guildwar_next_barrier_response={en:R,de:L};var et=function(){function e(){}return e}();e.cs_guildwar_team_recruit_request=et,__reflect(et.prototype,"Sproto.cs_guildwar_team_recruit_request"),e.ALL_DICT.cs_guildwar_team_recruit_request={en:B,de:x}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.serverId=e.ri();break;case 4:t.guildName=e.rs();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.serverId&&o.wi(t.serverId,3),void 0!=t.guildName&&o.ws(t.guildName,4),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guildId=e.ri();break;case 1:t.guildName=e.rs();break;case 2:t.serverId=e.ri();break;case 3:t.score=e.ri();break;case 4:t.throughNum=e.ri();break;case 5:t.rankData=e.ro("guildwar_rank_data");break;case 6:t.leaderName=e.rs();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.guildId&&o.wi(t.guildId,0),void 0!=t.guildName&&o.ws(t.guildName,1),void 0!=t.serverId&&o.wi(t.serverId,2),void 0!=t.score&&o.wi(t.score,3),void 0!=t.throughNum&&o.wi(t.throughNum,4),void 0!=t.rankData&&o.wo("guildwar_rank_data",t.rankData,5),void 0!=t.leaderName&&o.ws(t.leaderName,6),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossid=e.ri();break;case 1:t.reborntime=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.bossid&&o.wi(t.bossid,0),void 0!=t.reborntime&&o.wi(t.reborntime,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.job=e.ri();break;case 3:t.sex=e.ri();break;case 4:t.serverId=e.ri();break;case 5:t.guildName=e.rs();break;case 6:t.rankData=e.ro("guildwar_rank_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.job&&o.wi(t.job,2),void 0!=t.sex&&o.wi(t.sex,3),void 0!=t.serverId&&o.wi(t.serverId,4),void 0!=t.guildName&&o.ws(t.guildName,5),void 0!=t.rankData&&o.wo("guildwar_rank_data",t.rankData,6),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.injure=e.ri();break;case 1:t.injureRank=e.ri();break;case 2:t.holdtracks=e.ri();break;case 3:t.holdtracksRank=e.ri();break;case 4:t.score=e.ri();break;case 5:t.scoreRank=e.ri();break;case 6:t.kill=e.ri();break;case 7:t.killRank=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.injure&&o.wi(t.injure,0),void 0!=t.injureRank&&o.wi(t.injureRank,1),void 0!=t.holdtracks&&o.wi(t.holdtracks,2),void 0!=t.holdtracksRank&&o.wi(t.holdtracksRank,3),void 0!=t.score&&o.wi(t.score,4),void 0!=t.scoreRank&&o.wi(t.scoreRank,5),void 0!=t.kill&&o.wi(t.kill,6),void 0!=t.killRank&&o.wi(t.killRank,7),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new Z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rank=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rank&&o.wi(t.rank,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new $,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.victory=e.rs();break;case 1:t.serverid=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.victory&&o.ws(t.victory,0),void 0!=t.serverid&&o.wi(t.serverid,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rankinfos=e.roa("guildwar_guild_info");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rankinfos&&o.woa("guildwar_guild_info",t.rankinfos,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.killrank=e.roa("guildwar_player_data");break;case 1:t.injurerank=e.roa("guildwar_player_data");break;case 2:t.scorerank=e.roa("guildwar_player_data");break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.killrank&&o.woa("guildwar_player_data",t.killrank,0),void 0!=t.injurerank&&o.woa("guildwar_player_data",t.injurerank,1),void 0!=t.scorerank&&o.woa("guildwar_player_data",t.scorerank,2),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new it,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.barrierId=e.ri();break;case 1:t.playerNum=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.barrierId&&o.wi(t.barrierId,0),void 0!=t.playerNum&&o.wi(t.playerNum,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.barrierId=e.ri();break;case 1:t.shield=e.ri();break;case 2:t.hp=e.ri();break;case 3:t.recovertime=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.barrierId&&o.wi(t.barrierId,0),void 0!=t.shield&&o.wi(t.shield,1),void 0!=t.hp&&o.wi(t.hp,2),void 0!=t.recovertime&&o.wi(t.recovertime,3),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guildinfos=e.roa("guildwar_guild_info");break;case 1:t.countdown=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.guildinfos&&o.woa("guildwar_guild_info",t.guildinfos,0),void 0!=t.countdown&&o.wi(t.countdown,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new at,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.championGuild=e.ro("guildwar_guild_info");break;case 1:t.guildinfos=e.roa("guildwar_guild_info");break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.championGuild&&o.wo("guildwar_guild_info",t.championGuild,0),void 0!=t.guildinfos&&o.woa("guildwar_guild_info",t.guildinfos,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossinfos=e.roa("guildwar_king_data");break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossinfos&&o.woa("guildwar_king_data",t.bossinfos,0),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new st,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guardtype=e.ri();break;case 1:t.holdtime=e.ri();break;case 2:t.resistNum=e.ri();break;case 3:t.hp=e.ri();break;case 4:t.guardinfos=e.roa("guildwar_guard_info");break;case 5:t.ownerGuildId=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.guardtype&&o.wi(t.guardtype,0),void 0!=t.holdtime&&o.wi(t.holdtime,1),void 0!=t.resistNum&&o.wi(t.resistNum,2),void 0!=t.hp&&o.wi(t.hp,3),void 0!=t.guardinfos&&o.woa("guildwar_guard_info",t.guardinfos,4),void 0!=t.ownerGuildId&&o.wi(t.ownerGuildId,5),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.barrierId=e.ri();break;case 1:t.playerNum=e.ri();break;case 2:t.throughNum=e.ri();break;case 3:t.rankData=e.ro("guildwar_rank_data");break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.barrierId&&o.wi(t.barrierId,0),void 0!=t.playerNum&&o.wi(t.playerNum,1),void 0!=t.throughNum&&o.wi(t.throughNum,2),void 0!=t.rankData&&o.wo("guildwar_rank_data",t.rankData,3),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.barrierId=e.ri();break;case 1:t.guildinfos=e.roa("guildwar_guild_info");break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.barrierId&&o.wi(t.barrierId,0),void 0!=t.guildinfos&&o.woa("guildwar_guild_info",t.guildinfos,1),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerNum=e.ri();break;case 1:t.score=e.ri();break;case 2:t.scoreRank=e.ri();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.playerNum&&o.wi(t.playerNum,0),void 0!=t.score&&o.wi(t.score,1),void 0!=t.scoreRank&&o.wi(t.scoreRank,2),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.reborntime=e.ri();break;case 1:t.score=e.ri();break;case 2:t.scoreRank=e.ri();break;case 3:t.kill=e.ri();break;case 4:t.killRank=e.ri();break;case 5:t.rewardMark=e.ri();break;case 6:t.endtime=e.ri();break;case 7:t.worldlevel=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.reborntime&&o.wi(t.reborntime,0),void 0!=t.score&&o.wi(t.score,1),void 0!=t.scoreRank&&o.wi(t.scoreRank,2),void 0!=t.kill&&o.wi(t.kill,3),void 0!=t.killRank&&o.wi(t.killRank,4),void 0!=t.rewardMark&&o.wi(t.rewardMark,5),void 0!=t.endtime&&o.wi(t.endtime,6),void 0!=t.worldlevel&&o.wi(t.worldlevel,7),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.barrierId=e.ri();break;case 1:t.through=e.rb();break;case 2:t.reborntime=e.ri();break;case 3:t.attacktime=e.ri();break;case 4:t.rankData=e.ro("guildwar_rank_data");break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.barrierId&&o.wi(t.barrierId,0),void 0!=t.through&&o.wb(t.through,1),void 0!=t.reborntime&&o.wi(t.reborntime,2),void 0!=t.attacktime&&o.wi(t.attacktime,3),void 0!=t.rankData&&o.wo("guildwar_rank_data",t.rankData,4),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new dt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.barrierId=e.ri();break;case 1:t.rankInfos=e.roa("guildwar_player_data");break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.barrierId&&o.wi(t.barrierId,0),void 0!=t.rankInfos&&o.woa("guildwar_player_data",t.rankInfos,1),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new _t,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.guilddetail=e.ro("guildwar_report_guilddetail");break;case 1:t.rewards=e.roa("reward_data");break;case 2:t.auctionrewards=e.roa("reward_data");break;case 3:t.sharedata=e.ro("guildwar_report_sharedata");break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.guilddetail&&o.wo("guildwar_report_guilddetail",t.guilddetail,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),void 0!=t.auctionrewards&&o.woa("reward_data",t.auctionrewards,2),void 0!=t.sharedata&&o.wo("guildwar_report_sharedata",t.sharedata,3),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.countdown=e.ri();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.countdown&&o.wi(t.countdown,0),e.SprotoCore.CloseSerialize(o)}var j=function(){function e(){}return e}();e.guildwar_guard_info=j,__reflect(j.prototype,"Sproto.guildwar_guard_info"),e.ALL_DICT.guildwar_guard_info={en:i,de:t};var X=function(){function e(){}return e}();e.guildwar_guild_info=X,__reflect(X.prototype,"Sproto.guildwar_guild_info"),e.ALL_DICT.guildwar_guild_info={en:n,de:o};var K=function(){function e(){}return e}();e.guildwar_king_data=K,__reflect(K.prototype,"Sproto.guildwar_king_data"),e.ALL_DICT.guildwar_king_data={en:r,de:a};var J=function(){function e(){}return e}();e.guildwar_player_data=J,__reflect(J.prototype,"Sproto.guildwar_player_data"),e.ALL_DICT.guildwar_player_data={en:l,de:s};var Q=function(){function e(){}return e}();e.guildwar_rank_data=Q,__reflect(Q.prototype,"Sproto.guildwar_rank_data"),e.ALL_DICT.guildwar_rank_data={en:u,de:c};var Z=function(){function e(){}return e}();e.guildwar_report_guilddetail=Z,__reflect(Z.prototype,"Sproto.guildwar_report_guilddetail"),e.ALL_DICT.guildwar_report_guilddetail={en:h,de:p};var $=function(){function e(){}return e}();e.guildwar_report_sharedata=$,__reflect($.prototype,"Sproto.guildwar_report_sharedata"),e.ALL_DICT.guildwar_report_sharedata={en:_,de:d};var et=function(){function e(){}return e}();e.sc_guildwar_all_guild_rank_info_request=et,__reflect(et.prototype,"Sproto.sc_guildwar_all_guild_rank_info_request"),e.ALL_DICT.sc_guildwar_all_guild_rank_info_request={en:m,de:f};var tt=function(){function e(){}return e}();e.sc_guildwar_all_player_rank_info_request=tt,__reflect(tt.prototype,"Sproto.sc_guildwar_all_player_rank_info_request"),e.ALL_DICT.sc_guildwar_all_player_rank_info_request={en:v,de:g};var it=function(){function e(){}return e}();e.sc_guildwar_barrier_info_request=it,__reflect(it.prototype,"Sproto.sc_guildwar_barrier_info_request"),e.ALL_DICT.sc_guildwar_barrier_info_request={en:C,de:y};var ot=function(){function e(){}return e}();e.sc_guildwar_boss_info_request=ot,__reflect(ot.prototype,"Sproto.sc_guildwar_boss_info_request"),e.ALL_DICT.sc_guildwar_boss_info_request={en:S,de:b};var nt=function(){function e(){}return e}();e.sc_guildwar_enter_dragon_guild_request=nt,__reflect(nt.prototype,"Sproto.sc_guildwar_enter_dragon_guild_request"),e.ALL_DICT.sc_guildwar_enter_dragon_guild_request={en:T,de:G};var at=function(){function e(){}return e}();e.sc_guildwar_enter_war_guild_request=at,__reflect(at.prototype,"Sproto.sc_guildwar_enter_war_guild_request"),e.ALL_DICT.sc_guildwar_enter_war_guild_request={en:w,de:I};var rt=function(){function e(){}return e}();e.sc_guildwar_four_king_info_request=rt,__reflect(rt.prototype,"Sproto.sc_guildwar_four_king_info_request"),e.ALL_DICT.sc_guildwar_four_king_info_request={en:k,de:A};var st=function(){function e(){}return e}();e.sc_guildwar_guard_info_request=st,__reflect(st.prototype,"Sproto.sc_guildwar_guard_info_request"),e.ALL_DICT.sc_guildwar_guard_info_request={en:M,de:E};var lt=function(){function e(){}return e}();e.sc_guildwar_guild_info_request=lt,__reflect(lt.prototype,"Sproto.sc_guildwar_guild_info_request"),e.ALL_DICT.sc_guildwar_guild_info_request={en:P,de:D};var ct=function(){function e(){}return e}();e.sc_guildwar_guild_rank_request=ct,__reflect(ct.prototype,"Sproto.sc_guildwar_guild_rank_request"),e.ALL_DICT.sc_guildwar_guild_rank_request={en:R,de:L};var ut=function(){function e(){}return e}();e.sc_guildwar_myguild_global_info_request=ut,__reflect(ut.prototype,"Sproto.sc_guildwar_myguild_global_info_request"),e.ALL_DICT.sc_guildwar_myguild_global_info_request={en:B,de:x};var pt=function(){function e(){}return e}();e.sc_guildwar_player_global_info_request=pt,__reflect(pt.prototype,"Sproto.sc_guildwar_player_global_info_request"),e.ALL_DICT.sc_guildwar_player_global_info_request={en:N,de:U};var ht=function(){function e(){}return e}();e.sc_guildwar_player_info_request=ht,__reflect(ht.prototype,"Sproto.sc_guildwar_player_info_request"),e.ALL_DICT.sc_guildwar_player_info_request={en:F,de:O};var dt=function(){function e(){}return e}();e.sc_guildwar_player_rank_request=dt,__reflect(dt.prototype,"Sproto.sc_guildwar_player_rank_request"),e.ALL_DICT.sc_guildwar_player_rank_request={en:q,de:V};var _t=function(){function e(){}return e}();e.sc_guildwar_report_request=_t,__reflect(_t.prototype,"Sproto.sc_guildwar_report_request"),e.ALL_DICT.sc_guildwar_report_request={en:Y,de:H};var ft=function(){function e(){}return e}();e.sc_guildwar_ultimate_attack_request=ft,__reflect(ft.prototype,"Sproto.sc_guildwar_ultimate_attack_request"),e.ALL_DICT.sc_guildwar_ultimate_attack_request={en:z,de:W}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("holy_pet_msg");
break;case 1:t.luckLog=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.data&&o.woa("holy_pet_msg",t.data,0),void 0!=t.luckLog&&o.wia(t.luckLog,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.data=e.roa("holy_pet_msg");break;case 3:t.luckLog=e.ria();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.data&&o.woa("holy_pet_msg",t.data,2),void 0!=t.luckLog&&o.wia(t.luckLog,3),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.cs_holy_pet_get_info_request=d,__reflect(d.prototype,"Sproto.cs_holy_pet_get_info_request"),e.ALL_DICT.cs_holy_pet_get_info_request={en:i,de:t};var _=function(){function e(){}return e}();e.cs_holy_pet_get_info_response=_,__reflect(_.prototype,"Sproto.cs_holy_pet_get_info_response"),e.ALL_DICT.cs_holy_pet_get_info_response={en:n,de:o};var f=function(){function e(){}return e}();e.cs_holy_pet_get_reward_request=f,__reflect(f.prototype,"Sproto.cs_holy_pet_get_reward_request"),e.ALL_DICT.cs_holy_pet_get_reward_request={en:r,de:a};var m=function(){function e(){}return e}();e.cs_holy_pet_luck_draw_request=m,__reflect(m.prototype,"Sproto.cs_holy_pet_luck_draw_request"),e.ALL_DICT.cs_holy_pet_luck_draw_request={en:l,de:s};var g=function(){function e(){}return e}();e.cs_holy_pet_luck_draw_response=g,__reflect(g.prototype,"Sproto.cs_holy_pet_luck_draw_response"),e.ALL_DICT.cs_holy_pet_luck_draw_response={en:u,de:c};var v=function(){function e(){}return e}();e.holy_pet_msg=v,__reflect(v.prototype,"Sproto.holy_pet_msg"),e.ALL_DICT.holy_pet_msg={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.cash=e.ri();break;case 1:t.reward=e.ri();break;case 2:t.sTime=e.ri();break;case 3:t.eTime=e.ri();break;case 4:t.day=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.cash&&o.wi(t.cash,0),void 0!=t.reward&&o.wi(t.reward,1),void 0!=t.sTime&&o.wi(t.sTime,2),void 0!=t.eTime&&o.wi(t.eTime,3),void 0!=t.day&&o.wi(t.day,4),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_holy_pet_info_request=o,__reflect(o.prototype,"Sproto.sc_holy_pet_info_request"),e.ALL_DICT.sc_holy_pet_info_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("holy_xinjun_msg");break;case 1:t.luckLog=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.data&&o.woa("holy_xinjun_msg",t.data,0),void 0!=t.luckLog&&o.wia(t.luckLog,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.data=e.roa("holy_xinjun_msg");break;case 3:t.luckLog=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.data&&o.woa("holy_xinjun_msg",t.data,2),void 0!=t.luckLog&&o.wia(t.luckLog,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_holy_xinjun_get_info_request=p,__reflect(p.prototype,"Sproto.cs_holy_xinjun_get_info_request"),e.ALL_DICT.cs_holy_xinjun_get_info_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_holy_xinjun_get_info_response=h,__reflect(h.prototype,"Sproto.cs_holy_xinjun_get_info_response"),e.ALL_DICT.cs_holy_xinjun_get_info_response={en:n,de:o};var d=function(){function e(){}return e}();e.cs_holy_xinjun_luck_draw_request=d,__reflect(d.prototype,"Sproto.cs_holy_xinjun_luck_draw_request"),e.ALL_DICT.cs_holy_xinjun_luck_draw_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_holy_xinjun_luck_draw_response=_,__reflect(_.prototype,"Sproto.cs_holy_xinjun_luck_draw_response"),e.ALL_DICT.cs_holy_xinjun_luck_draw_response={en:l,de:s};var f=function(){function e(){}return e}();e.holy_xinjun_msg=f,__reflect(f.prototype,"Sproto.holy_xinjun_msg"),e.ALL_DICT.holy_xinjun_msg={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.challengeid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.challengeid&&o.wi(t.challengeid,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxid&&o.wi(t.boxid,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.success=e.rb();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.success&&o.wb(t.success,0),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.cs_kfboss_challenge_request=s,__reflect(s.prototype,"Sproto.cs_kfboss_challenge_request"),e.ALL_DICT.cs_kfboss_challenge_request={en:i,de:t};var l=function(){function e(){}return e}();e.cs_kfboss_collect_box_start_request=l,__reflect(l.prototype,"Sproto.cs_kfboss_collect_box_start_request"),e.ALL_DICT.cs_kfboss_collect_box_start_request={en:n,de:o};var c=function(){function e(){}return e}();e.cs_kfboss_get_rewards_response=c,__reflect(c.prototype,"Sproto.cs_kfboss_get_rewards_response"),e.ALL_DICT.cs_kfboss_get_rewards_response={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.boxid=e.ri();break;case 2:t.time=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.boxid&&o.wi(t.boxid,1),void 0!=t.time&&o.wi(t.time,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.serverid=e.ri();break;case 2:t.guildid=e.ri();break;case 3:t.guildname=e.rs();break;case 4:t.damage=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.serverid&&o.wi(t.serverid,1),void 0!=t.guildid&&o.wi(t.guildid,2),void 0!=t.guildname&&o.ws(t.guildname,3),void 0!=t.damage&&o.wi(t.damage,4),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.serverid=e.ri();break;case 2:t.damage=e.ri();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.serverid&&o.wi(t.serverid,1),void 0!=t.damage&&o.wi(t.damage,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rank=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rank&&o.wi(t.rank,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.victory=e.rs();break;case 1:t.first=e.rs();break;case 2:t.serverid=e.ri();break;case 3:t.sex=e.ri();break;case 4:t.job=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.victory&&o.ws(t.victory,0),void 0!=t.first&&o.ws(t.first,1),void 0!=t.serverid&&o.wi(t.serverid,2),void 0!=t.sex&&o.wi(t.sex,3),void 0!=t.job&&o.wi(t.job,4),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxinfos=e.roa("kfboss_boxinfo");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxinfos&&o.woa("kfboss_boxinfo",t.boxinfos,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxinfo=e.ro("kfboss_boxinfo");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxinfo&&o.wo("kfboss_boxinfo",t.boxinfo,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.infos=e.roa("kfboss_collect_info");break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.infos&&o.woa("kfboss_collect_info",t.infos,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.info=e.ro("kfboss_collect_info");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.info&&o.wo("kfboss_collect_info",t.info,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.status=e.ri();break;case 1:t.changetime=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.status&&o.wi(t.status,0),void 0!=t.changetime&&o.wi(t.changetime,1),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.deadtime=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.deadtime&&o.wi(t.deadtime,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.firstinfo=e.ro("kfboss_firstinfo");break;case 1:t.playerranks=e.roa("kfboss_rank");break;case 2:t.mydamage=e.ri();break;case 3:t.myrank=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.firstinfo&&o.wo("kfboss_firstinfo",t.firstinfo,0),void 0!=t.playerranks&&o.woa("kfboss_rank",t.playerranks,1),void 0!=t.mydamage&&o.wi(t.mydamage,2),void 0!=t.myrank&&o.wi(t.myrank,3),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerranks=e.roa("kfboss_rank");break;case 1:t.mydamage=e.ri();break;case 2:t.myrank=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.playerranks&&o.woa("kfboss_rank",t.playerranks,0),void 0!=t.mydamage&&o.wi(t.mydamage,1),void 0!=t.myrank&&o.wi(t.myrank,2),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.persondetail=e.ro("kfboss_report_persondetail");break;case 1:t.rewards=e.roa("reward_data");break;case 2:t.auctionrewards=e.roa("reward_data");break;case 3:t.sharedata=e.ro("kfboss_report_sharedata");break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.persondetail&&o.wo("kfboss_report_persondetail",t.persondetail,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),void 0!=t.auctionrewards&&o.woa("reward_data",t.auctionrewards,2),void 0!=t.sharedata&&o.wo("kfboss_report_sharedata",t.sharedata,3),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shieldvalue=e.ri();break;case 1:t.hp=e.ri();break;case 2:t.hpperc=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.shieldvalue&&o.wi(t.shieldvalue,0),void 0!=t.hp&&o.wi(t.hp,1),void 0!=t.hpperc&&o.wi(t.hpperc,2),e.SprotoCore.CloseSerialize(o)}var x=function(){function e(){}return e}();e.kfboss_boxinfo=x,__reflect(x.prototype,"Sproto.kfboss_boxinfo"),e.ALL_DICT.kfboss_boxinfo={en:i,de:t};var B=function(){function e(){}return e}();e.kfboss_collect_info=B,__reflect(B.prototype,"Sproto.kfboss_collect_info"),e.ALL_DICT.kfboss_collect_info={en:n,de:o};var U=function(){function e(){}return e}();e.kfboss_firstinfo=U,__reflect(U.prototype,"Sproto.kfboss_firstinfo"),e.ALL_DICT.kfboss_firstinfo={en:r,de:a};var N=function(){function e(){}return e}();e.kfboss_rank=N,__reflect(N.prototype,"Sproto.kfboss_rank"),e.ALL_DICT.kfboss_rank={en:l,de:s};var O=function(){function e(){}return e}();e.kfboss_report_persondetail=O,__reflect(O.prototype,"Sproto.kfboss_report_persondetail"),e.ALL_DICT.kfboss_report_persondetail={en:u,de:c};var F=function(){function e(){}return e}();e.kfboss_report_sharedata=F,__reflect(F.prototype,"Sproto.kfboss_report_sharedata"),e.ALL_DICT.kfboss_report_sharedata={en:h,de:p};var V=function(){function e(){}return e}();e.sc_kfboss_box_all_request=V,__reflect(V.prototype,"Sproto.sc_kfboss_box_all_request"),e.ALL_DICT.sc_kfboss_box_all_request={en:_,de:d};var q=function(){function e(){}return e}();e.sc_kfboss_box_one_request=q,__reflect(q.prototype,"Sproto.sc_kfboss_box_one_request"),e.ALL_DICT.sc_kfboss_box_one_request={en:m,de:f};var H=function(){function e(){}return e}();e.sc_kfboss_collect_all_request=H,__reflect(H.prototype,"Sproto.sc_kfboss_collect_all_request"),e.ALL_DICT.sc_kfboss_collect_all_request={en:v,de:g};var Y=function(){function e(){}return e}();e.sc_kfboss_collect_now_request=Y,__reflect(Y.prototype,"Sproto.sc_kfboss_collect_now_request"),e.ALL_DICT.sc_kfboss_collect_now_request={en:C,de:y};var W=function(){function e(){}return e}();e.sc_kfboss_info_request=W,__reflect(W.prototype,"Sproto.sc_kfboss_info_request"),e.ALL_DICT.sc_kfboss_info_request={en:S,de:b};var z=function(){function e(){}return e}();e.sc_kfboss_player_dead_request=z,__reflect(z.prototype,"Sproto.sc_kfboss_player_dead_request"),e.ALL_DICT.sc_kfboss_player_dead_request={en:T,de:G};var j=function(){function e(){}return e}();e.sc_kfboss_rank_last_request=j,__reflect(j.prototype,"Sproto.sc_kfboss_rank_last_request"),e.ALL_DICT.sc_kfboss_rank_last_request={en:w,de:I};var X=function(){function e(){}return e}();e.sc_kfboss_rank_now_request=X,__reflect(X.prototype,"Sproto.sc_kfboss_rank_now_request"),e.ALL_DICT.sc_kfboss_rank_now_request={en:k,de:A};var K=function(){function e(){}return e}();e.sc_kfboss_report_request=K,__reflect(K.prototype,"Sproto.sc_kfboss_report_request"),e.ALL_DICT.sc_kfboss_report_request={en:M,de:E};var J=function(){function e(){}return e}();e.sc_kfboss_rewards_request=J,__reflect(J.prototype,"Sproto.sc_kfboss_rewards_request"),e.ALL_DICT.sc_kfboss_rewards_request={en:P,de:D};var Q=function(){function e(){}return e}();e.sc_kfboss_update_info_request=Q,__reflect(Q.prototype,"Sproto.sc_kfboss_update_info_request"),e.ALL_DICT.sc_kfboss_update_info_request={en:R,de:L}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.camp&&o.wi(t.camp,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.camp&&o.wi(t.camp,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.camp&&o.wi(t.camp,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pointtype=e.ri();break;case 1:t.index=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pointtype&&o.wi(t.pointtype,0),void 0!=t.index&&o.wi(t.index,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.targetid&&o.wi(t.targetid,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var A=function(){function e(){}return e}();e.cs_king_city_attack_request=A,__reflect(A.prototype,"Sproto.cs_king_city_attack_request"),e.ALL_DICT.cs_king_city_attack_request={en:i,de:t};var k=function(){function e(){}return e}();e.cs_king_city_data_request=k,__reflect(k.prototype,"Sproto.cs_king_city_data_request"),e.ALL_DICT.cs_king_city_data_request={en:n,de:o};var E=function(){function e(){}return e}();e.cs_king_city_guard_request=E,__reflect(E.prototype,"Sproto.cs_king_city_guard_request"),e.ALL_DICT.cs_king_city_guard_request={en:r,de:a};var M=function(){function e(){}return e}();e.cs_king_get_point_reward_request=M,__reflect(M.prototype,"Sproto.cs_king_get_point_reward_request"),e.ALL_DICT.cs_king_get_point_reward_request={en:l,de:s};var D=function(){function e(){}return e}();e.cs_king_join_request=D,__reflect(D.prototype,"Sproto.cs_king_join_request"),e.ALL_DICT.cs_king_join_request={en:u,de:c};var P=function(){function e(){}return e}();e.cs_king_join_response=P,__reflect(P.prototype,"Sproto.cs_king_join_response"),e.ALL_DICT.cs_king_join_response={en:h,de:p};var L=function(){function e(){}return e}();e.cs_king_leave_request=L,__reflect(L.prototype,"Sproto.cs_king_leave_request"),e.ALL_DICT.cs_king_leave_request={en:_,de:d};var R=function(){function e(){}return e}();e.cs_king_my_guard_city_request=R,__reflect(R.prototype,"Sproto.cs_king_my_guard_city_request"),e.ALL_DICT.cs_king_my_guard_city_request={en:m,de:f};var x=function(){function e(){}return e}();e.cs_king_pay_revive_request=x,__reflect(x.prototype,"Sproto.cs_king_pay_revive_request"),e.ALL_DICT.cs_king_pay_revive_request={en:v,de:g};var B=function(){function e(){}return e}();e.cs_king_pk_request=B,__reflect(B.prototype,"Sproto.cs_king_pk_request"),e.ALL_DICT.cs_king_pk_request={en:C,de:y};var U=function(){function e(){}return e}();e.cs_king_point_data_request=U,__reflect(U.prototype,"Sproto.cs_king_point_data_request"),e.ALL_DICT.cs_king_point_data_request={en:S,de:b};var N=function(){function e(){}return e}();e.cs_king_team_recruit_request=N,__reflect(N.prototype,"Sproto.cs_king_team_recruit_request"),e.ALL_DICT.cs_king_team_recruit_request={en:T,de:G};var O=function(){function e(){}return e}();e.cs_king_transform_request=O,__reflect(O.prototype,"Sproto.cs_king_transform_request"),e.ALL_DICT.cs_king_transform_request={en:w,de:I}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.camp=e.ri();break;case 2:t.point=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.camp&&o.wi(t.camp,1),void 0!=t.point&&o.wi(t.point,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new Z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;case 1:t.currcamp=e.ri();break;case 2:t.currhp=e.ri();break;case 3:t.maxhp=e.ri();break;case 4:t.guards=e.roa("king_guard_info");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.camp&&o.wi(t.camp,0),void 0!=t.currcamp&&o.wi(t.currcamp,1),void 0!=t.currhp&&o.wi(t.currhp,2),void 0!=t.maxhp&&o.wi(t.maxhp,3),void 0!=t.guards&&o.woa("king_guard_info",t.guards,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new $,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.level=e.ri();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;case 5:t.power=e.ri();break;case 6:t.isdead=e.rb();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),void 0!=t.power&&o.wi(t.power,5),void 0!=t.isdead&&o.wb(t.isdead,6),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;case 1:t.changhp=e.ri();break;case 2:t.names=e.rsa();break;case 3:t.time=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.camp&&o.wi(t.camp,0),void 0!=t.changhp&&o.wi(t.changhp,1),void 0!=t.names&&o.wsa(t.names,2),void 0!=t.time&&o.wi(t.time,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.camp=e.ri();break;case 2:t.status=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.camp&&o.wi(t.camp,1),void 0!=t.status&&o.wi(t.status,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new it,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.camp&&o.wi(t.camp,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rank=e.ria();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rank&&o.wia(t.rank,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.iswin=e.rb();break;case 1:t.commonpoint=e.ri();break;case 2:t.camp=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.iswin&&o.wb(t.iswin,0),void 0!=t.commonpoint&&o.wi(t.commonpoint,1),void 0!=t.camp&&o.wi(t.camp,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new at,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;case 1:t.currcamp=e.ri();break;case 2:t.currhp=e.ri();break;case 3:t.maxhp=e.ri();break;case 4:t.guards=e.roa("king_guard_info");break;case 5:t.guardtime=e.ri();break;case 6:t.point=e.ri();break;case 7:t.pointtime=e.ri();break;case 8:t.record=e.roa("king_guard_record");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.camp&&o.wi(t.camp,0),void 0!=t.currcamp&&o.wi(t.currcamp,1),void 0!=t.currhp&&o.wi(t.currhp,2),void 0!=t.maxhp&&o.wi(t.maxhp,3),void 0!=t.guards&&o.woa("king_guard_info",t.guards,4),void 0!=t.guardtime&&o.wi(t.guardtime,5),void 0!=t.point&&o.wi(t.point,6),void 0!=t.pointtime&&o.wi(t.pointtime,7),void 0!=t.record&&o.woa("king_guard_record",t.record,8),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new st,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;case 1:t.occupycamp=e.ri();break;case 2:t.names=e.rsa();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.camp&&o.wi(t.camp,0),void 0!=t.occupycamp&&o.wi(t.occupycamp,1),void 0!=t.names&&o.wsa(t.names,2),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fighting=e.ria();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fighting&&o.wia(t.fighting,0),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camp=e.ri();break;case 1:t.status=e.ri();break;case 2:t.reborncout=e.ri();break;case 3:t.citypoint=e.ri();break;case 4:t.commonpoint=e.ri();break;case 5:t.players=e.roa("king_player_info");break;case 6:t.citys=e.roa("king_city_info");break;case 7:t.fighting=e.ria();break;case 8:t.transform=e.ria();break;case 9:t.camppoint=e.roa("king_camp_point");break;case 10:t.actcountdown=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.camp&&o.wi(t.camp,0),void 0!=t.status&&o.wi(t.status,1),void 0!=t.reborncout&&o.wi(t.reborncout,2),void 0!=t.citypoint&&o.wi(t.citypoint,3),void 0!=t.commonpoint&&o.wi(t.commonpoint,4),void 0!=t.players&&o.woa("king_player_info",t.players,5),void 0!=t.citys&&o.woa("king_city_info",t.citys,6),void 0!=t.fighting&&o.wia(t.fighting,7),void 0!=t.transform&&o.wia(t.transform,8),void 0!=t.camppoint&&o.woa("king_camp_point",t.camppoint,9),void 0!=t.actcountdown&&o.wi(t.actcountdown,10),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.citys=e.ro("king_city_info");break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.citys&&o.wo("king_city_info",t.citys,0),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.city=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.city&&o.wi(t.city,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.iswin=e.rb();break;case 1:t.commonpoint=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.iswin&&o.wb(t.iswin,0),void 0!=t.commonpoint&&o.wi(t.commonpoint,1),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new dt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.player=e.ro("king_player_info");break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.player&&o.wo("king_player_info",t.player,0),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new _t,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.dbid&&o.wi(t.dbid,0),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.citypoint=e.ri();break;case 1:t.commonpoint=e.ri();break;case 2:t.cityreward=e.ria();break;case 3:t.commonreward=e.ria();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.citypoint&&o.wi(t.citypoint,0),void 0!=t.commonpoint&&o.wi(t.commonpoint,1),void 0!=t.cityreward&&o.wia(t.cityreward,2),void 0!=t.commonreward&&o.wia(t.commonreward,3),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.camppoint=e.roa("king_camp_point");break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.camppoint&&o.woa("king_camp_point",t.camppoint,0),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.reborncout=e.ri();break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.reborncout&&o.wi(t.reborncout,0),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.persondetail=e.ro("king_report_persondetail");break;case 1:t.rewards=e.roa("reward_data");break;case 2:t.sharedata=e.ro("king_report_sharedata");break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.persondetail&&o.wo("king_report_persondetail",t.persondetail,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),void 0!=t.sharedata&&o.wo("king_report_sharedata",t.sharedata,2),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.status=e.ri();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.status&&o.wi(t.status,1),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new Ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.istransform=e.rb();break;default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.istransform&&o.wb(t.istransform,1),e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.citys=e.roa("king_city_info");break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.citys&&o.woa("king_city_info",t.citys,0),e.SprotoCore.CloseSerialize(o)}var Q=function(){function e(){}return e}();e.king_camp_point=Q,__reflect(Q.prototype,"Sproto.king_camp_point"),e.ALL_DICT.king_camp_point={en:i,de:t};var Z=function(){function e(){}return e}();e.king_city_info=Z,__reflect(Z.prototype,"Sproto.king_city_info"),e.ALL_DICT.king_city_info={en:n,de:o};var $=function(){function e(){}return e}();e.king_guard_info=$,__reflect($.prototype,"Sproto.king_guard_info"),e.ALL_DICT.king_guard_info={en:r,de:a};var et=function(){function e(){}return e}();e.king_guard_record=et,__reflect(et.prototype,"Sproto.king_guard_record"),e.ALL_DICT.king_guard_record={en:l,de:s};var tt=function(){function e(){}return e}();e.king_player_info=tt,__reflect(tt.prototype,"Sproto.king_player_info"),e.ALL_DICT.king_player_info={en:u,de:c};var it=function(){function e(){}return e}();e.king_report_persondetail=it,__reflect(it.prototype,"Sproto.king_report_persondetail"),e.ALL_DICT.king_report_persondetail={en:h,de:p};
var ot=function(){function e(){}return e}();e.king_report_sharedata=ot,__reflect(ot.prototype,"Sproto.king_report_sharedata"),e.ALL_DICT.king_report_sharedata={en:_,de:d};var nt=function(){function e(){}return e}();e.sc_king_attack_result_request=nt,__reflect(nt.prototype,"Sproto.sc_king_attack_result_request"),e.ALL_DICT.sc_king_attack_result_request={en:m,de:f};var at=function(){function e(){}return e}();e.sc_king_begin_act_request=at,__reflect(at.prototype,"Sproto.sc_king_begin_act_request"),e.ALL_DICT.sc_king_begin_act_request={en:v,de:g};var rt=function(){function e(){}return e}();e.sc_king_city_data_request=rt,__reflect(rt.prototype,"Sproto.sc_king_city_data_request"),e.ALL_DICT.sc_king_city_data_request={en:C,de:y};var st=function(){function e(){}return e}();e.sc_king_city_occupy_request=st,__reflect(st.prototype,"Sproto.sc_king_city_occupy_request"),e.ALL_DICT.sc_king_city_occupy_request={en:S,de:b};var lt=function(){function e(){}return e}();e.sc_king_fighting_change_request=lt,__reflect(lt.prototype,"Sproto.sc_king_fighting_change_request"),e.ALL_DICT.sc_king_fighting_change_request={en:T,de:G};var ct=function(){function e(){}return e}();e.sc_king_info_request=ct,__reflect(ct.prototype,"Sproto.sc_king_info_request"),e.ALL_DICT.sc_king_info_request={en:w,de:I};var ut=function(){function e(){}return e}();e.sc_king_info_update_request=ut,__reflect(ut.prototype,"Sproto.sc_king_info_update_request"),e.ALL_DICT.sc_king_info_update_request={en:k,de:A};var pt=function(){function e(){}return e}();e.sc_king_my_guard_city_request=pt,__reflect(pt.prototype,"Sproto.sc_king_my_guard_city_request"),e.ALL_DICT.sc_king_my_guard_city_request={en:M,de:E};var ht=function(){function e(){}return e}();e.sc_king_pk_result_request=ht,__reflect(ht.prototype,"Sproto.sc_king_pk_result_request"),e.ALL_DICT.sc_king_pk_result_request={en:P,de:D};var dt=function(){function e(){}return e}();e.sc_king_player_enter_request=dt,__reflect(dt.prototype,"Sproto.sc_king_player_enter_request"),e.ALL_DICT.sc_king_player_enter_request={en:R,de:L};var _t=function(){function e(){}return e}();e.sc_king_player_leave_request=_t,__reflect(_t.prototype,"Sproto.sc_king_player_leave_request"),e.ALL_DICT.sc_king_player_leave_request={en:B,de:x};var ft=function(){function e(){}return e}();e.sc_king_point_data_request=ft,__reflect(ft.prototype,"Sproto.sc_king_point_data_request"),e.ALL_DICT.sc_king_point_data_request={en:N,de:U};var mt=function(){function e(){}return e}();e.sc_king_point_info_request=mt,__reflect(mt.prototype,"Sproto.sc_king_point_info_request"),e.ALL_DICT.sc_king_point_info_request={en:F,de:O};var gt=function(){function e(){}return e}();e.sc_king_reborn_countdown_request=gt,__reflect(gt.prototype,"Sproto.sc_king_reborn_countdown_request"),e.ALL_DICT.sc_king_reborn_countdown_request={en:q,de:V};var vt=function(){function e(){}return e}();e.sc_king_report_request=vt,__reflect(vt.prototype,"Sproto.sc_king_report_request"),e.ALL_DICT.sc_king_report_request={en:Y,de:H};var yt=function(){function e(){}return e}();e.sc_king_status_change_request=yt,__reflect(yt.prototype,"Sproto.sc_king_status_change_request"),e.ALL_DICT.sc_king_status_change_request={en:z,de:W};var Ct=function(){function e(){}return e}();e.sc_king_transform_change_request=Ct,__reflect(Ct.prototype,"Sproto.sc_king_transform_change_request"),e.ALL_DICT.sc_king_transform_change_request={en:X,de:j};var bt=function(){function e(){}return e}();e.sc_king_update_city_request=bt,__reflect(bt.prototype,"Sproto.sc_king_update_city_request"),e.ALL_DICT.sc_king_update_city_request={en:J,de:K}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ladderType=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ladderType&&o.wi(t.ladderType,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ladderType=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ladderType&&o.wi(t.ladderType,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ladderType=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ladderType&&o.wi(t.ladderType,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ladderType=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ladderType&&o.wi(t.ladderType,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.ladderType=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.ladderType&&o.wi(t.ladderType,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ladderType=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ladderType&&o.wi(t.ladderType,0),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.cs_ladder_buy_count_request=f,__reflect(f.prototype,"Sproto.cs_ladder_buy_count_request"),e.ALL_DICT.cs_ladder_buy_count_request={en:i,de:t};var m=function(){function e(){}return e}();e.cs_ladder_get_rank_info_request=m,__reflect(m.prototype,"Sproto.cs_ladder_get_rank_info_request"),e.ALL_DICT.cs_ladder_get_rank_info_request={en:n,de:o};var g=function(){function e(){}return e}();e.cs_ladder_get_some_one_request=g,__reflect(g.prototype,"Sproto.cs_ladder_get_some_one_request"),e.ALL_DICT.cs_ladder_get_some_one_request={en:r,de:a};var v=function(){function e(){}return e}();e.cs_ladder_get_week_reward_request=v,__reflect(v.prototype,"Sproto.cs_ladder_get_week_reward_request"),e.ALL_DICT.cs_ladder_get_week_reward_request={en:l,de:s};var y=function(){function e(){}return e}();e.cs_ladder_info_request=y,__reflect(y.prototype,"Sproto.cs_ladder_info_request"),e.ALL_DICT.cs_ladder_info_request={en:u,de:c};var C=function(){function e(){}return e}();e.cs_ladder_start_play_request=C,__reflect(C.prototype,"Sproto.cs_ladder_start_play_request"),e.ALL_DICT.cs_ladder_start_play_request={en:h,de:p};var b=function(){function e(){}return e}();e.cs_ladder_worship_request=b,__reflect(b.prototype,"Sproto.cs_ladder_worship_request"),e.ALL_DICT.cs_ladder_worship_request={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ria();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.id=e.ri();break;case 4:t.name=e.rs();break;case 5:t.serverid=e.ri();break;case 6:t.guildid=e.ri();break;case 7:t.guildname=e.rs();break;case 8:t.level=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.shows&&o.wia(t.shows,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.id&&o.wi(t.id,3),void 0!=t.name&&o.ws(t.name,4),void 0!=t.serverid&&o.wi(t.serverid,5),void 0!=t.guildid&&o.wi(t.guildid,6),void 0!=t.guildname&&o.ws(t.guildname,7),void 0!=t.level&&o.wi(t.level,8),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.time=e.ri();break;case 1:t.serverid=e.ri();break;case 2:t.guildname=e.rs();break;case 3:t.leadername=e.rs();break;case 4:t.job=e.ri();break;case 5:t.sex=e.ri();break;case 6:t.vip=e.ri();break;case 7:t.power=e.ri();break;case 8:t.win=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.time&&o.wi(t.time,0),void 0!=t.serverid&&o.wi(t.serverid,1),void 0!=t.guildname&&o.ws(t.guildname,2),void 0!=t.leadername&&o.ws(t.leadername,3),void 0!=t.job&&o.wi(t.job,4),void 0!=t.sex&&o.wi(t.sex,5),void 0!=t.vip&&o.wi(t.vip,6),void 0!=t.power&&o.wi(t.power,7),void 0!=t.win&&o.wi(t.win,8),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.player=e.rs();break;case 2:t.grade=e.ri();break;case 3:t.star=e.ri();break;case 4:t.winNum=e.ri();break;case 5:t.job=e.ri();break;case 6:t.sex=e.ri();break;case 7:t.serverid=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.player&&o.ws(t.player,1),void 0!=t.grade&&o.wi(t.grade,2),void 0!=t.star&&o.wi(t.star,3),void 0!=t.winNum&&o.wi(t.winNum,4),void 0!=t.job&&o.wi(t.job,5),void 0!=t.sex&&o.wi(t.sex,6),void 0!=t.serverid&&o.wi(t.serverid,7),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.todayBuyTime=e.ri();break;case 1:t.ladderType=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.todayBuyTime&&o.wi(t.todayBuyTime,0),void 0!=t.ladderType&&o.wi(t.ladderType,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.isOpen=e.rb();break;case 1:t.grade=e.ri();break;case 2:t.star=e.ri();break;case 3:t.challgeNum=e.ri();break;case 4:t.challgeCd=e.ri();break;case 5:t.winNum=e.ri();break;case 6:t.lianWin=e.rb();break;case 7:t.playUpTime=e.rb();break;case 8:t.isCanReward=e.rb();break;case 9:t.upgrade=e.ri();break;case 10:t.upstar=e.ri();break;case 11:t.upWin=e.ri();break;case 12:t.rank=e.ri();break;case 13:t.ladderType=e.ri();break;case 14:t.canJoin=e.rb();break;case 15:t.csName=e.rs();break;case 16:t.csServerId=e.ri();break;case 17:t.csjob=e.ri();break;case 18:t.cssex=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,19);return void 0!=t.isOpen&&o.wb(t.isOpen,0),void 0!=t.grade&&o.wi(t.grade,1),void 0!=t.star&&o.wi(t.star,2),void 0!=t.challgeNum&&o.wi(t.challgeNum,3),void 0!=t.challgeCd&&o.wi(t.challgeCd,4),void 0!=t.winNum&&o.wi(t.winNum,5),void 0!=t.lianWin&&o.wb(t.lianWin,6),void 0!=t.playUpTime&&o.wb(t.playUpTime,7),void 0!=t.isCanReward&&o.wb(t.isCanReward,8),void 0!=t.upgrade&&o.wi(t.upgrade,9),void 0!=t.upstar&&o.wi(t.upstar,10),void 0!=t.upWin&&o.wi(t.upWin,11),void 0!=t.rank&&o.wi(t.rank,12),void 0!=t.ladderType&&o.wi(t.ladderType,13),void 0!=t.canJoin&&o.wb(t.canJoin,14),void 0!=t.csName&&o.ws(t.csName,15),void 0!=t.csServerId&&o.wi(t.csServerId,16),void 0!=t.csjob&&o.wi(t.csjob,17),void 0!=t.cssex&&o.wi(t.cssex,18),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.rb();break;case 1:t.id=e.ri();break;case 2:t.name=e.rs();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;case 5:t.grade=e.ri();break;case 6:t.star=e.ri();break;case 7:t.ladderType=e.ri();break;case 8:t.serverid=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.type&&o.wb(t.type,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.name&&o.ws(t.name,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),void 0!=t.grade&&o.wi(t.grade,5),void 0!=t.star&&o.wi(t.star,6),void 0!=t.ladderType&&o.wi(t.ladderType,7),void 0!=t.serverid&&o.wi(t.serverid,8),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.rankData=e.roa("rank_data_ladder");break;case 2:t.upWeekRankList=e.roa("rank_data_ladder");break;case 3:t.ladderType=e.ri();break;case 4:t.rank=e.ri();break;case 5:t.upWeekRank=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.rankData&&o.woa("rank_data_ladder",t.rankData,1),void 0!=t.upWeekRankList&&o.woa("rank_data_ladder",t.upWeekRankList,2),void 0!=t.ladderType&&o.wi(t.ladderType,3),void 0!=t.rank&&o.wi(t.rank,4),void 0!=t.upWeekRank&&o.wi(t.upWeekRank,5),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.isWin=e.rb();break;case 1:t.rewardData=e.roa("reward_data");break;case 2:t.grade=e.ri();break;case 3:t.star=e.ri();break;case 4:t.increasestar=e.ri();break;case 5:t.ladderType=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.isWin&&o.wb(t.isWin,0),void 0!=t.rewardData&&o.woa("reward_data",t.rewardData,1),void 0!=t.grade&&o.wi(t.grade,2),void 0!=t.star&&o.wi(t.star,3),void 0!=t.increasestar&&o.wi(t.increasestar,4),void 0!=t.ladderType&&o.wi(t.ladderType,5),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ro("ladder_shows");break;case 1:t.worship=e.rb();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.shows&&o.wo("ladder_shows",t.shows,0),void 0!=t.worship&&o.wb(t.worship,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.records=e.roa("ladder_winner_records");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.records&&o.woa("ladder_winner_records",t.records,0),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.ladder_shows=b,__reflect(b.prototype,"Sproto.ladder_shows"),e.ALL_DICT.ladder_shows={en:i,de:t};var S=function(){function e(){}return e}();e.ladder_winner_records=S,__reflect(S.prototype,"Sproto.ladder_winner_records"),e.ALL_DICT.ladder_winner_records={en:n,de:o};var G=function(){function e(){}return e}();e.rank_data_ladder=G,__reflect(G.prototype,"Sproto.rank_data_ladder"),e.ALL_DICT.rank_data_ladder={en:r,de:a};var T=function(){function e(){}return e}();e.sc_ladder_buy_count_request=T,__reflect(T.prototype,"Sproto.sc_ladder_buy_count_request"),e.ALL_DICT.sc_ladder_buy_count_request={en:l,de:s};var I=function(){function e(){}return e}();e.sc_ladder_info_request=I,__reflect(I.prototype,"Sproto.sc_ladder_info_request"),e.ALL_DICT.sc_ladder_info_request={en:u,de:c};var w=function(){function e(){}return e}();e.sc_ladder_player_back_request=w,__reflect(w.prototype,"Sproto.sc_ladder_player_back_request"),e.ALL_DICT.sc_ladder_player_back_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_ladder_rank_list_request=A,__reflect(A.prototype,"Sproto.sc_ladder_rank_list_request"),e.ALL_DICT.sc_ladder_rank_list_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_ladder_result_request=k,__reflect(k.prototype,"Sproto.sc_ladder_result_request"),e.ALL_DICT.sc_ladder_result_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_ladder_winner_info_request=E,__reflect(E.prototype,"Sproto.sc_ladder_winner_info_request"),e.ALL_DICT.sc_ladder_winner_info_request={en:v,de:g};var M=function(){function e(){}return e}();e.sc_ladder_winner_records_request=M,__reflect(M.prototype,"Sproto.sc_ladder_winner_records_request"),e.ALL_DICT.sc_ladder_winner_records_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.index=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.index&&o.wi(t.index,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.typ=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.typ&&o.wi(t.typ,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.rewards=e.roa("luck_tianshen_rewards");break;case 3:t.tenNum=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.rewards&&o.woa("luck_tianshen_rewards",t.rewards,1),void 0!=t.tenNum&&o.wi(t.tenNum,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_luck_draw_request=p,__reflect(p.prototype,"Sproto.cs_luck_draw_request"),e.ALL_DICT.cs_luck_draw_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_luck_info_request=h,__reflect(h.prototype,"Sproto.cs_luck_info_request"),e.ALL_DICT.cs_luck_info_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_luck_tianshen_request=d,__reflect(d.prototype,"Sproto.cs_luck_tianshen_request"),e.ALL_DICT.cs_luck_tianshen_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_luck_tianshen_response=_,__reflect(_.prototype,"Sproto.cs_luck_tianshen_response"),e.ALL_DICT.cs_luck_tianshen_response={en:l,de:s};var f=function(){function e(){}return e}();e.luck_tianshen_rewards=f,__reflect(f.prototype,"Sproto.luck_tianshen_rewards"),e.ALL_DICT.luck_tianshen_rewards={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.reward=e.ro("reward_data");break;case 2:t.time=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.reward&&o.wo("reward_data",t.reward,1),void 0!=t.time&&o.wi(t.time,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.counts=e.ria();break;case 1:t.records=e.roa("luck_record");break;case 2:t.tenNum=e.ri();break;case 3:t.lucky=e.ri();break;case 4:t.equipcounts=e.ria();break;case 5:t.equiplucky=e.ri();break;case 6:t.equiprecords=e.roa("luck_record");break;case 7:t.daylist=e.ria();break;case 8:t.equipdaylist=e.ria();break;case 9:t.round=e.ri();break;case 10:t.equipround=e.ri();break;case 11:t.totemscounts=e.ria();break;case 12:t.totemslucky=e.ri();break;case 13:t.totemsrecords=e.roa("luck_record");break;case 14:t.totemsdaylist=e.ria();break;case 15:t.totemsround=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,16);return void 0!=t.counts&&o.wia(t.counts,0),void 0!=t.records&&o.woa("luck_record",t.records,1),void 0!=t.tenNum&&o.wi(t.tenNum,2),void 0!=t.lucky&&o.wi(t.lucky,3),void 0!=t.equipcounts&&o.wia(t.equipcounts,4),void 0!=t.equiplucky&&o.wi(t.equiplucky,5),void 0!=t.equiprecords&&o.woa("luck_record",t.equiprecords,6),void 0!=t.daylist&&o.wia(t.daylist,7),void 0!=t.equipdaylist&&o.wia(t.equipdaylist,8),void 0!=t.round&&o.wi(t.round,9),void 0!=t.equipround&&o.wi(t.equipround,10),void 0!=t.totemscounts&&o.wia(t.totemscounts,11),void 0!=t.totemslucky&&o.wi(t.totemslucky,12),void 0!=t.totemsrecords&&o.woa("luck_record",t.totemsrecords,13),void 0!=t.totemsdaylist&&o.wia(t.totemsdaylist,14),void 0!=t.totemsround&&o.wi(t.totemsround,15),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.index=e.ri();break;case 2:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.index&&o.wi(t.index,1),void 0!=t.rewards&&o.woa("reward_data",t.rewards,2),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.luck_record=s,__reflect(s.prototype,"Sproto.luck_record"),e.ALL_DICT.luck_record={en:i,de:t};var l=function(){function e(){}return e}();e.sc_luck_info_request=l,__reflect(l.prototype,"Sproto.sc_luck_info_request"),e.ALL_DICT.sc_luck_info_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_luck_ret_request=c,__reflect(c.prototype,"Sproto.sc_luck_ret_request"),e.ALL_DICT.sc_luck_ret_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("luck_draw_tianshen");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.woa("luck_draw_tianshen",t.data,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.typ=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.typ&&o.wi(t.typ,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.data=e.roa("luck_draw_tianshen");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.data&&o.woa("luck_draw_tianshen",t.data,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.id=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.id&&o.wi(t.id,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_luck_draw_get_info_request=p,__reflect(p.prototype,"Sproto.cs_luck_draw_get_info_request"),e.ALL_DICT.cs_luck_draw_get_info_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_luck_draw_get_info_response=h,__reflect(h.prototype,"Sproto.cs_luck_draw_get_info_response"),e.ALL_DICT.cs_luck_draw_get_info_response={en:n,de:o};var d=function(){function e(){}return e}();e.cs_luck_draw_tianshen_request=d,__reflect(d.prototype,"Sproto.cs_luck_draw_tianshen_request"),e.ALL_DICT.cs_luck_draw_tianshen_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_luck_draw_tianshen_response=_,__reflect(_.prototype,"Sproto.cs_luck_draw_tianshen_response"),e.ALL_DICT.cs_luck_draw_tianshen_response={en:l,de:s};var f=function(){function e(){}return e}();e.luck_draw_tianshen=f,__reflect(f.prototype,"Sproto.luck_draw_tianshen"),e.ALL_DICT.luck_draw_tianshen={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.handle&&o.wi(t.handle,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.handle&&o.wia(t.handle,0),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_mail_get_content_request=a,__reflect(a.prototype,"Sproto.cs_mail_get_content_request"),e.ALL_DICT.cs_mail_get_content_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_mail_get_reward_request=r,__reflect(r.prototype,"Sproto.cs_mail_get_reward_request"),e.ALL_DICT.cs_mail_get_reward_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.title=e.rs();break;case 2:t.times=e.ri();break;case 3:t.type=e.ri();break;case 4:t.receive=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.title&&o.ws(t.title,1),void 0!=t.times&&o.wi(t.times,2),void 0!=t.type&&o.wi(t.type,3),void 0!=t.receive&&o.wi(t.receive,4),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;case 1:t.type=e.ri();break;case 2:t.receive=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.handle&&o.wi(t.handle,0),void 0!=t.type&&o.wi(t.type,1),void 0!=t.receive&&o.wi(t.receive,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mailData=e.ro("mail_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mailData&&o.wo("mail_data",t.mailData,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.handle=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.handle&&o.wi(t.handle,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mailData=e.ro("mail_data");break;case 1:t.text=e.rs();break;case 2:t.rewardData=e.roa("reward_data");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.mailData&&o.wo("mail_data",t.mailData,0),void 0!=t.text&&o.ws(t.text,1),void 0!=t.rewardData&&o.woa("reward_data",t.rewardData,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mailData=e.roa("mail_data");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mailData&&o.woa("mail_data",t.mailData,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.updateData=e.roa("mail_update_data");break;case 1:t.showWarnBagSpace=e.rb();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.updateData&&o.woa("mail_update_data",t.updateData,0),void 0!=t.showWarnBagSpace&&o.wb(t.showWarnBagSpace,1),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.mail_data=f,__reflect(f.prototype,"Sproto.mail_data"),e.ALL_DICT.mail_data={en:i,de:t};var m=function(){function e(){}return e}();e.mail_update_data=m,__reflect(m.prototype,"Sproto.mail_update_data"),e.ALL_DICT.mail_update_data={en:n,de:o};var g=function(){function e(){}return e}();e.sc_mail_add_info_request=g,__reflect(g.prototype,"Sproto.sc_mail_add_info_request"),e.ALL_DICT.sc_mail_add_info_request={en:r,de:a};var v=function(){function e(){}return e}();e.sc_mail_delete_request=v,__reflect(v.prototype,"Sproto.sc_mail_delete_request"),e.ALL_DICT.sc_mail_delete_request={en:l,de:s};var y=function(){function e(){}return e}();e.sc_mail_detailed_info_request=y,__reflect(y.prototype,"Sproto.sc_mail_detailed_info_request"),e.ALL_DICT.sc_mail_detailed_info_request={en:u,de:c};var C=function(){function e(){}return e}();e.sc_mail_init_info_request=C,__reflect(C.prototype,"Sproto.sc_mail_init_info_request"),e.ALL_DICT.sc_mail_init_info_request={en:h,de:p};var b=function(){function e(){}return e}();e.sc_mail_update_info_request=b,__reflect(b.prototype,"Sproto.sc_mail_update_info_request"),e.ALL_DICT.sc_mail_update_info_request={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mapid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mapid&&o.wi(t.mapid,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mapid=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.mapid&&o.wi(t.mapid,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mapid=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mapid&&o.wi(t.mapid,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.channels=e.roa("maincity_channel_data");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.channels&&o.woa("maincity_channel_data",t.channels,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.channelId=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.channelId&&o.wi(t.channelId,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mapid=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.mapid&&o.wi(t.mapid,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}var A=function(){function e(){}return e}();e.cs_map_enter_request=A,__reflect(A.prototype,"Sproto.cs_map_enter_request"),e.ALL_DICT.cs_map_enter_request={en:i,de:t};var k=function(){function e(){}return e}();e.cs_map_enter_response=k,__reflect(k.prototype,"Sproto.cs_map_enter_response"),e.ALL_DICT.cs_map_enter_response={en:n,de:o};var E=function(){function e(){}return e}();e.cs_map_fly_request=E,__reflect(E.prototype,"Sproto.cs_map_fly_request"),e.ALL_DICT.cs_map_fly_request={en:r,de:a};var M=function(){function e(){}return e}();e.cs_map_leave_request=M,__reflect(M.prototype,"Sproto.cs_map_leave_request"),e.ALL_DICT.cs_map_leave_request={en:l,de:s};var D=function(){function e(){}return e}();e.cs_map_leave_response=D,__reflect(D.prototype,"Sproto.cs_map_leave_response"),e.ALL_DICT.cs_map_leave_response={en:u,de:c};var P=function(){function e(){}return e}();e.cs_map_maincity_channel_info_request=P,__reflect(P.prototype,"Sproto.cs_map_maincity_channel_info_request"),e.ALL_DICT.cs_map_maincity_channel_info_request={en:h,de:p};var L=function(){function e(){}return e}();e.cs_map_maincity_channel_info_response=L,__reflect(L.prototype,"Sproto.cs_map_maincity_channel_info_response"),e.ALL_DICT.cs_map_maincity_channel_info_response={en:_,de:d};var R=function(){function e(){}return e}();e.cs_map_maincity_enter_request=R,__reflect(R.prototype,"Sproto.cs_map_maincity_enter_request"),e.ALL_DICT.cs_map_maincity_enter_request={en:m,de:f};var x=function(){function e(){}return e}();e.cs_map_maincity_enter_response=x,__reflect(x.prototype,"Sproto.cs_map_maincity_enter_response"),e.ALL_DICT.cs_map_maincity_enter_response={en:v,de:g};
var B=function(){function e(){}return e}();e.cs_map_maincity_worship_request=B,__reflect(B.prototype,"Sproto.cs_map_maincity_worship_request"),e.ALL_DICT.cs_map_maincity_worship_request={en:C,de:y};var U=function(){function e(){}return e}();e.cs_map_maincity_worship_response=U,__reflect(U.prototype,"Sproto.cs_map_maincity_worship_response"),e.ALL_DICT.cs_map_maincity_worship_response={en:S,de:b};var N=function(){function e(){}return e}();e.cs_map_move_request=N,__reflect(N.prototype,"Sproto.cs_map_move_request"),e.ALL_DICT.cs_map_move_request={en:T,de:G};var O=function(){function e(){}return e}();e.maincity_channel_data=O,__reflect(O.prototype,"Sproto.maincity_channel_data"),e.ALL_DICT.maincity_channel_data={en:w,de:I}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shows=e.ria();break;case 1:t.job=e.ri();break;case 2:t.sex=e.ri();break;case 3:t.id=e.ri();break;case 4:t.name=e.rs();break;case 5:t.serverid=e.ri();break;case 6:t.guildid=e.ri();break;case 7:t.guildname=e.rs();break;case 8:t.level=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.shows&&o.wia(t.shows,0),void 0!=t.job&&o.wi(t.job,1),void 0!=t.sex&&o.wi(t.sex,2),void 0!=t.id&&o.wi(t.id,3),void 0!=t.name&&o.ws(t.name,4),void 0!=t.serverid&&o.wi(t.serverid,5),void 0!=t.guildid&&o.wi(t.guildid,6),void 0!=t.guildname&&o.ws(t.guildname,7),void 0!=t.level&&o.wi(t.level,8),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;case 3:t.name=e.rs();break;case 4:t.level=e.ri();break;case 5:t.job=e.ri();break;case 6:t.sex=e.ri();break;case 7:t.power=e.ri();break;case 8:t.shows=e.ria();break;case 9:t.status=e.ri();break;case 10:t.guildid=e.ri();break;case 11:t.guildname=e.rs();break;case 12:t.serverid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,13);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),void 0!=t.name&&o.ws(t.name,3),void 0!=t.level&&o.wi(t.level,4),void 0!=t.job&&o.wi(t.job,5),void 0!=t.sex&&o.wi(t.sex,6),void 0!=t.power&&o.wi(t.power,7),void 0!=t.shows&&o.wia(t.shows,8),void 0!=t.status&&o.wi(t.status,9),void 0!=t.guildid&&o.wi(t.guildid,10),void 0!=t.guildname&&o.ws(t.guildname,11),void 0!=t.serverid&&o.wi(t.serverid,12),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mapid=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;case 3:t.myself=e.ro("map_player");break;case 4:t.entitylist=e.roa("map_player");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.mapid&&o.wi(t.mapid,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),void 0!=t.myself&&o.wo("map_player",t.myself,3),void 0!=t.entitylist&&o.woa("map_player",t.entitylist,4),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.championid=e.ri();break;case 1:t.charismaNum=e.ri();break;case 2:t.channelid=e.ri();break;case 3:t.worship=e.ri();break;case 4:t.shows=e.ro("champion_shows");break;case 5:t.people=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.championid&&o.wi(t.championid,0),void 0!=t.charismaNum&&o.wi(t.charismaNum,1),void 0!=t.channelid&&o.wi(t.channelid,2),void 0!=t.worship&&o.wi(t.worship,3),void 0!=t.shows&&o.wo("champion_shows",t.shows,4),void 0!=t.people&&o.wi(t.people,5),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.entity=e.ro("map_player");break;case 1:t.mapid=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.entity&&o.wo("map_player",t.entity,0),void 0!=t.mapid&&o.wi(t.mapid,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;case 3:t.mapid=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),void 0!=t.mapid&&o.wi(t.mapid,3),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.mapid=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.mapid&&o.wi(t.mapid,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.x=e.ri();break;case 2:t.y=e.ri();break;case 3:t.mapid=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.x&&o.wi(t.x,1),void 0!=t.y&&o.wi(t.y,2),void 0!=t.mapid&&o.wi(t.mapid,3),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.status=e.ri();break;case 2:t.mapid=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.status&&o.wi(t.status,1),void 0!=t.mapid&&o.wi(t.mapid,2),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.mapid=e.ri();break;case 2:t.player=e.ro("map_player");break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.mapid&&o.wi(t.mapid,1),void 0!=t.player&&o.wo("map_player",t.player,2),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.champion_shows=b,__reflect(b.prototype,"Sproto.champion_shows"),e.ALL_DICT.champion_shows={en:i,de:t};var S=function(){function e(){}return e}();e.map_player=S,__reflect(S.prototype,"Sproto.map_player"),e.ALL_DICT.map_player={en:n,de:o};var G=function(){function e(){}return e}();e.sc_map_enter_request=G,__reflect(G.prototype,"Sproto.sc_map_enter_request"),e.ALL_DICT.sc_map_enter_request={en:r,de:a};var T=function(){function e(){}return e}();e.sc_map_maincity_info_request=T,__reflect(T.prototype,"Sproto.sc_map_maincity_info_request"),e.ALL_DICT.sc_map_maincity_info_request={en:l,de:s};var I=function(){function e(){}return e}();e.sc_map_other_enter_request=I,__reflect(I.prototype,"Sproto.sc_map_other_enter_request"),e.ALL_DICT.sc_map_other_enter_request={en:u,de:c};var w=function(){function e(){}return e}();e.sc_map_other_fly_request=w,__reflect(w.prototype,"Sproto.sc_map_other_fly_request"),e.ALL_DICT.sc_map_other_fly_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_map_other_leave_request=A,__reflect(A.prototype,"Sproto.sc_map_other_leave_request"),e.ALL_DICT.sc_map_other_leave_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_map_other_move_request=k,__reflect(k.prototype,"Sproto.sc_map_other_move_request"),e.ALL_DICT.sc_map_other_move_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_map_player_status_request=E,__reflect(E.prototype,"Sproto.sc_map_player_status_request"),e.ALL_DICT.sc_map_player_status_request={en:v,de:g};var M=function(){function e(){}return e}();e.sc_map_player_update_request=M,__reflect(M.prototype,"Sproto.sc_map_player_update_request"),e.ALL_DICT.sc_map_player_update_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.agree=e.ri();break;case 1:t.fromid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.agree&&o.wi(t.agree,0),void 0!=t.fromid&&o.wi(t.fromid,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.quantity=e.ri();break;case 1:t.count=e.ri();break;case 2:t.autobuy=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.quantity&&o.wi(t.quantity,0),void 0!=t.count&&o.wi(t.count,1),void 0!=t.autobuy&&o.wi(t.autobuy,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.quantity=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.quantity&&o.wi(t.quantity,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.grade=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.grade&&o.wi(t.grade,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lovetype=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.lovetype&&o.wi(t.lovetype,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lovetype=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.lovetype&&o.wi(t.lovetype,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.targetid=e.ri();break;case 1:t.grade=e.ri();break;case 2:t.spouse=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.targetid&&o.wi(t.targetid,0),void 0!=t.grade&&o.wi(t.grade,1),void 0!=t.spouse&&o.wi(t.spouse,2),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.quantity=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.quantity&&o.wi(t.quantity,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}var E=function(){function e(){}return e}();e.cs_marry_answer_request=E,__reflect(E.prototype,"Sproto.cs_marry_answer_request"),e.ALL_DICT.cs_marry_answer_request={en:i,de:t};var M=function(){function e(){}return e}();e.cs_marry_flower_request=M,__reflect(M.prototype,"Sproto.cs_marry_flower_request"),e.ALL_DICT.cs_marry_flower_request={en:n,de:o};var D=function(){function e(){}return e}();e.cs_marry_flower_response=D,__reflect(D.prototype,"Sproto.cs_marry_flower_response"),e.ALL_DICT.cs_marry_flower_response={en:r,de:a};var P=function(){function e(){}return e}();e.cs_marry_greeting_request=P,__reflect(P.prototype,"Sproto.cs_marry_greeting_request"),e.ALL_DICT.cs_marry_greeting_request={en:l,de:s};var L=function(){function e(){}return e}();e.cs_marry_greeting_response=L,__reflect(L.prototype,"Sproto.cs_marry_greeting_response"),e.ALL_DICT.cs_marry_greeting_response={en:u,de:c};var R=function(){function e(){}return e}();e.cs_marry_house_grade_request=R,__reflect(R.prototype,"Sproto.cs_marry_house_grade_request"),e.ALL_DICT.cs_marry_house_grade_request={en:h,de:p};var x=function(){function e(){}return e}();e.cs_marry_house_grade_response=x,__reflect(x.prototype,"Sproto.cs_marry_house_grade_response"),e.ALL_DICT.cs_marry_house_grade_response={en:_,de:d};var B=function(){function e(){}return e}();e.cs_marry_love_revert_request=B,__reflect(B.prototype,"Sproto.cs_marry_love_revert_request"),e.ALL_DICT.cs_marry_love_revert_request={en:m,de:f};var U=function(){function e(){}return e}();e.cs_marry_love_revert_response=U,__reflect(U.prototype,"Sproto.cs_marry_love_revert_response"),e.ALL_DICT.cs_marry_love_revert_response={en:v,de:g};var N=function(){function e(){}return e}();e.cs_marry_love_use_request=N,__reflect(N.prototype,"Sproto.cs_marry_love_use_request"),e.ALL_DICT.cs_marry_love_use_request={en:C,de:y};var O=function(){function e(){}return e}();e.cs_marry_love_use_response=O,__reflect(O.prototype,"Sproto.cs_marry_love_use_response"),e.ALL_DICT.cs_marry_love_use_response={en:S,de:b};var F=function(){function e(){}return e}();e.cs_marry_propose_request=F,__reflect(F.prototype,"Sproto.cs_marry_propose_request"),e.ALL_DICT.cs_marry_propose_request={en:T,de:G};var V=function(){function e(){}return e}();e.cs_marry_propose_response=V,__reflect(V.prototype,"Sproto.cs_marry_propose_response"),e.ALL_DICT.cs_marry_propose_response={en:w,de:I};var q=function(){function e(){}return e}();e.cs_use_gift_request=q,__reflect(q.prototype,"Sproto.cs_use_gift_request"),e.ALL_DICT.cs_use_gift_request={en:k,de:A}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.ispropose=e.rb();break;case 2:t.ismarry=e.rb();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.ispropose&&o.wb(t.ispropose,1),void 0!=t.ismarry&&o.wb(t.ismarry,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lovetype=e.ri();break;case 1:t.daycount=e.ri();break;case 2:t.count=e.ri();break;case 3:t.time=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.lovetype&&o.wi(t.lovetype,0),void 0!=t.daycount&&o.wi(t.daycount,1),void 0!=t.count&&o.wi(t.count,2),void 0!=t.time&&o.wi(t.time,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.level=e.ri();break;case 3:t.job=e.ri();break;case 4:t.sex=e.ri();break;case 5:t.power=e.ri();break;case 6:t.shows=e.ria();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.job&&o.wi(t.job,3),void 0!=t.sex&&o.wi(t.sex,4),void 0!=t.power&&o.wi(t.power,5),void 0!=t.shows&&o.wia(t.shows,6),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.grade=e.ri();break;case 3:t.agree=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.grade&&o.wi(t.grade,2),void 0!=t.agree&&o.wi(t.agree,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fromid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.grade=e.ri();break;case 3:t.spouse=e.ri();break;case 4:t.power=e.ri();break;case 5:t.level=e.ri();break;case 6:t.job=e.ri();break;case 7:t.sex=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.fromid&&o.wi(t.fromid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.grade&&o.wi(t.grade,2),void 0!=t.spouse&&o.wi(t.spouse,3),void 0!=t.power&&o.wi(t.power,4),void 0!=t.level&&o.wi(t.level,5),void 0!=t.job&&o.wi(t.job,6),void 0!=t.sex&&o.wi(t.sex,7),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ids=e.ria();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ids&&o.wia(t.ids,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.quantity=e.ri();break;case 1:t.effect=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.quantity&&o.wi(t.quantity,0),void 0!=t.effect&&o.wi(t.effect,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.friends=e.roa("marry_friend");break;case 1:t.today=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.friends&&o.woa("marry_friend",t.friends,0),void 0!=t.today&&o.wi(t.today,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.upnum=e.ri();break;case 1:t.times=e.ria();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.upnum&&o.wi(t.upnum,0),void 0!=t.times&&o.wia(t.times,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.marry=e.rb();break;case 1:t.husband=e.ro("marry_object");break;case 2:t.wife=e.ro("marry_object");break;case 3:t.level=e.ri();break;case 4:t.intimate=e.ri();break;case 5:t.intimacy=e.ri();break;case 6:t.grade=e.ri();break;case 7:t.houselv=e.ri();break;case 8:t.houseup=e.ri();break;case 9:t.time=e.ri();break;case 10:t.today=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.marry&&o.wb(t.marry,0),void 0!=t.husband&&o.wo("marry_object",t.husband,1),void 0!=t.wife&&o.wo("marry_object",t.wife,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.intimate&&o.wi(t.intimate,4),void 0!=t.intimacy&&o.wi(t.intimacy,5),void 0!=t.grade&&o.wi(t.grade,6),void 0!=t.houselv&&o.wi(t.houselv,7),void 0!=t.houseup&&o.wi(t.houseup,8),void 0!=t.time&&o.wi(t.time,9),void 0!=t.today&&o.wi(t.today,10),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.husband=e.ro("marry_object");break;case 1:t.wife=e.ro("marry_object");break;case 2:t.dbid=e.ri();break;case 3:t.effect=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.husband&&o.wo("marry_object",t.husband,0),void 0!=t.wife&&o.wo("marry_object",t.wife,1),void 0!=t.dbid&&o.wi(t.dbid,2),void 0!=t.effect&&o.wi(t.effect,3),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.partner=e.ro("marry_object");break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.partner&&o.wo("marry_object",t.partner,0),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.loves=e.roa("marry_love");break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.loves&&o.woa("marry_love",t.loves,0),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.intimacy=e.ri();break;case 2:t.flower=e.rs();break;case 3:t.count=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.intimacy&&o.wi(t.intimacy,1),void 0!=t.flower&&o.ws(t.flower,2),void 0!=t.count&&o.wi(t.count,3),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fromid=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fromid&&o.wi(t.fromid,0),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.grade=e.ri();break;case 1:t.isopen=e.rb();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.grade&&o.wi(t.grade,0),void 0!=t.isopen&&o.wb(t.isopen,1),e.SprotoCore.CloseSerialize(o)}var x=function(){function e(){}return e}();e.marry_friend=x,__reflect(x.prototype,"Sproto.marry_friend"),e.ALL_DICT.marry_friend={en:i,de:t};var B=function(){function e(){}return e}();e.marry_love=B,__reflect(B.prototype,"Sproto.marry_love"),e.ALL_DICT.marry_love={en:n,de:o};var U=function(){function e(){}return e}();e.marry_object=U,__reflect(U.prototype,"Sproto.marry_object"),e.ALL_DICT.marry_object={en:r,de:a};var N=function(){function e(){}return e}();e.sc_marry_answer_request=N,__reflect(N.prototype,"Sproto.sc_marry_answer_request"),e.ALL_DICT.sc_marry_answer_request={en:l,de:s};var O=function(){function e(){}return e}();e.sc_marry_asked_request=O,__reflect(O.prototype,"Sproto.sc_marry_asked_request"),e.ALL_DICT.sc_marry_asked_request={en:u,de:c};var F=function(){function e(){}return e}();e.sc_marry_divorce_bro_request=F,__reflect(F.prototype,"Sproto.sc_marry_divorce_bro_request"),e.ALL_DICT.sc_marry_divorce_bro_request={en:h,de:p};var V=function(){function e(){}return e}();e.sc_marry_flower_bro_request=V,__reflect(V.prototype,"Sproto.sc_marry_flower_bro_request"),e.ALL_DICT.sc_marry_flower_bro_request={en:_,de:d};var q=function(){function e(){}return e}();e.sc_marry_friends_request=q,__reflect(q.prototype,"Sproto.sc_marry_friends_request"),e.ALL_DICT.sc_marry_friends_request={en:m,de:f};var H=function(){function e(){}return e}();e.sc_marry_house_partner_up_request=H,__reflect(H.prototype,"Sproto.sc_marry_house_partner_up_request"),e.ALL_DICT.sc_marry_house_partner_up_request={en:v,de:g};var Y=function(){function e(){}return e}();e.sc_marry_info_request=Y,__reflect(Y.prototype,"Sproto.sc_marry_info_request"),e.ALL_DICT.sc_marry_info_request={en:C,de:y};var W=function(){function e(){}return e}();e.sc_marry_invitation_request=W,__reflect(W.prototype,"Sproto.sc_marry_invitation_request"),e.ALL_DICT.sc_marry_invitation_request={en:S,de:b};var z=function(){function e(){}return e}();e.sc_marry_login_tip_request=z,__reflect(z.prototype,"Sproto.sc_marry_login_tip_request"),e.ALL_DICT.sc_marry_login_tip_request={en:T,de:G};var j=function(){function e(){}return e}();e.sc_marry_love_info_request=j,__reflect(j.prototype,"Sproto.sc_marry_love_info_request"),e.ALL_DICT.sc_marry_love_info_request={en:w,de:I};var X=function(){function e(){}return e}();e.sc_marry_new_request=X,__reflect(X.prototype,"Sproto.sc_marry_new_request"),e.ALL_DICT.sc_marry_new_request={en:k,de:A};var K=function(){function e(){}return e}();e.sc_marry_recv_flower_request=K,__reflect(K.prototype,"Sproto.sc_marry_recv_flower_request"),e.ALL_DICT.sc_marry_recv_flower_request={en:M,de:E};var J=function(){function e(){}return e}();e.sc_marry_remove_asked_request=J,__reflect(J.prototype,"Sproto.sc_marry_remove_asked_request"),e.ALL_DICT.sc_marry_remove_asked_request={en:P,de:D};var Q=function(){function e(){}return e}();e.sc_marry_token_status_request=Q,__reflect(Q.prototype,"Sproto.sc_marry_token_status_request"),e.ALL_DICT.sc_marry_token_status_request={en:R,de:L}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.day=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.day&&o.wi(t.day,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.index&&o.wi(t.index,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.day=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.day&&o.wi(t.day,0),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_money_recharge_get_request=c,__reflect(c.prototype,"Sproto.cs_money_recharge_get_request"),e.ALL_DICT.cs_money_recharge_get_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_money_tree_reward_request=u,__reflect(u.prototype,"Sproto.cs_money_tree_reward_request"),e.ALL_DICT.cs_money_tree_reward_request={en:n,de:o};var p=function(){function e(){}return e}();e.cs_qd_get_reward_request=p,__reflect(p.prototype,"Sproto.cs_qd_get_reward_request"),e.ALL_DICT.cs_qd_get_reward_request={en:r,de:a};var h=function(){function e(){}return e}();e.cs_qd_recharge_get_request=h,__reflect(h.prototype,"Sproto.cs_qd_recharge_get_request"),e.ALL_DICT.cs_qd_recharge_get_request={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.day=e.ri();break;case 1:t.awards=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.day&&o.wi(t.day,0),void 0!=t.awards&&o.wia(t.awards,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playNum=e.ri();break;case 1:t.boxOn=e.ri();break;case 2:t.addCoefficient=e.ri();break;case 3:t.exp=e.ri();break;case 4:t.boxInfo=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.playNum&&o.wi(t.playNum,0),void 0!=t.boxOn&&o.wi(t.boxOn,1),void 0!=t.addCoefficient&&o.wi(t.addCoefficient,2),void 0!=t.exp&&o.wi(t.exp,3),void 0!=t.boxInfo&&o.wi(t.boxInfo,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playNum=e.ri();break;case 1:t.boxOn=e.ri();break;case 2:t.addCoefficient=e.ri();break;case 3:t.exp=e.ri();break;case 4:t.baoji=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.playNum&&o.wi(t.playNum,0),void 0!=t.boxOn&&o.wi(t.boxOn,1),void 0!=t.addCoefficient&&o.wi(t.addCoefficient,2),void 0!=t.exp&&o.wi(t.exp,3),void 0!=t.baoji&&o.wi(t.baoji,4),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.boxInfo=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.boxInfo&&o.wi(t.boxInfo,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.qdday=e.ri();break;case 1:t.bqday=e.ri();break;case 2:t.drawBin=e.ri();break;case 3:t.isqd=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.qdday&&o.wi(t.qdday,0),void 0!=t.bqday&&o.wi(t.bqday,1),void 0!=t.drawBin&&o.wi(t.drawBin,2),void 0!=t.isqd&&o.wi(t.isqd,3),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.sc_money_recharge_gift_info_request=p,__reflect(p.prototype,"Sproto.sc_money_recharge_gift_info_request"),e.ALL_DICT.sc_money_recharge_gift_info_request={en:i,de:t};var h=function(){function e(){}return e}();e.sc_money_tree_info_request=h,__reflect(h.prototype,"Sproto.sc_money_tree_info_request"),e.ALL_DICT.sc_money_tree_info_request={en:n,de:o};var d=function(){function e(){}return e}();e.sc_money_tree_play_info_request=d,__reflect(d.prototype,"Sproto.sc_money_tree_play_info_request"),e.ALL_DICT.sc_money_tree_play_info_request={en:r,de:a};var _=function(){function e(){}return e}();e.sc_money_tree_reward_info_request=_,__reflect(_.prototype,"Sproto.sc_money_tree_reward_info_request"),e.ALL_DICT.sc_money_tree_reward_info_request={en:l,de:s};var f=function(){function e(){}return e}();e.sc_qdday_reward_info_request=f,__reflect(f.prototype,"Sproto.sc_qdday_reward_info_request"),e.ALL_DICT.sc_qdday_reward_info_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.posid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.posid&&o.wi(t.posid,0),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.cs_panacea_use_request=o,__reflect(o.prototype,"Sproto.cs_panacea_use_request"),e.ALL_DICT.cs_panacea_use_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lvlist=e.ria();break;case 1:t.attrs=e.roa("attribute_data");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.lvlist&&o.wia(t.lvlist,0),void 0!=t.attrs&&o.woa("attribute_data",t.attrs,1),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_panacea_update_request=o,__reflect(o.prototype,"Sproto.sc_panacea_update_request"),e.ALL_DICT.sc_panacea_update_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.flyexp=e.ri();break;case 2:t.flylevel=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.flyexp&&o.wi(t.flyexp,1),void 0!=t.flylevel&&o.wi(t.flylevel,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)
}function y(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.first=e.ri();break;case 1:t.second=e.ri();break;case 2:t.third=e.ri();break;case 3:t.four=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.first&&o.wi(t.first,0),void 0!=t.second&&o.wi(t.second,1),void 0!=t.third&&o.wi(t.third,2),void 0!=t.four&&o.wi(t.four,3),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.locklist=e.ria();break;case 2:t.type=e.ri();break;case 3:t.autoBuy=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.locklist&&o.wia(t.locklist,1),void 0!=t.type&&o.wi(t.type,2),void 0!=t.autoBuy&&o.wi(t.autoBuy,3),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.xilian=e.ri();break;case 2:t.xilianSkills=e.ria();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.xilian&&o.wi(t.xilian,1),void 0!=t.xilianSkills&&o.wia(t.xilianSkills,2),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.name=e.rs();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.name&&o.ws(t.name,1),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.buffs=e.ria();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.buffs&&o.wia(t.buffs,1),e.SprotoCore.CloseSerialize(o)}var x=function(){function e(){}return e}();e.cs_pet_active_request=x,__reflect(x.prototype,"Sproto.cs_pet_active_request"),e.ALL_DICT.cs_pet_active_request={en:i,de:t};var B=function(){function e(){}return e}();e.cs_pet_active_response=B,__reflect(B.prototype,"Sproto.cs_pet_active_response"),e.ALL_DICT.cs_pet_active_response={en:n,de:o};var U=function(){function e(){}return e}();e.cs_pet_addexp_request=U,__reflect(U.prototype,"Sproto.cs_pet_addexp_request"),e.ALL_DICT.cs_pet_addexp_request={en:r,de:a};var N=function(){function e(){}return e}();e.cs_pet_addexp_response=N,__reflect(N.prototype,"Sproto.cs_pet_addexp_response"),e.ALL_DICT.cs_pet_addexp_response={en:l,de:s};var O=function(){function e(){}return e}();e.cs_pet_addgift_request=O,__reflect(O.prototype,"Sproto.cs_pet_addgift_request"),e.ALL_DICT.cs_pet_addgift_request={en:u,de:c};var F=function(){function e(){}return e}();e.cs_pet_addgift_response=F,__reflect(F.prototype,"Sproto.cs_pet_addgift_response"),e.ALL_DICT.cs_pet_addgift_response={en:h,de:p};var V=function(){function e(){}return e}();e.cs_pet_fly_addexp_request=V,__reflect(V.prototype,"Sproto.cs_pet_fly_addexp_request"),e.ALL_DICT.cs_pet_fly_addexp_request={en:_,de:d};var q=function(){function e(){}return e}();e.cs_pet_fly_addexp_response=q,__reflect(q.prototype,"Sproto.cs_pet_fly_addexp_response"),e.ALL_DICT.cs_pet_fly_addexp_response={en:m,de:f};var H=function(){function e(){}return e}();e.cs_pet_fly_restore_request=H,__reflect(H.prototype,"Sproto.cs_pet_fly_restore_request"),e.ALL_DICT.cs_pet_fly_restore_request={en:v,de:g};var Y=function(){function e(){}return e}();e.cs_pet_outbound_request=Y,__reflect(Y.prototype,"Sproto.cs_pet_outbound_request"),e.ALL_DICT.cs_pet_outbound_request={en:C,de:y};var W=function(){function e(){}return e}();e.cs_pet_refreshskill_request=W,__reflect(W.prototype,"Sproto.cs_pet_refreshskill_request"),e.ALL_DICT.cs_pet_refreshskill_request={en:S,de:b};var z=function(){function e(){}return e}();e.cs_pet_refreshskill_response=z,__reflect(z.prototype,"Sproto.cs_pet_refreshskill_response"),e.ALL_DICT.cs_pet_refreshskill_response={en:T,de:G};var j=function(){function e(){}return e}();e.cs_pet_rename_request=j,__reflect(j.prototype,"Sproto.cs_pet_rename_request"),e.ALL_DICT.cs_pet_rename_request={en:w,de:I};var X=function(){function e(){}return e}();e.cs_pet_rename_response=X,__reflect(X.prototype,"Sproto.cs_pet_rename_response"),e.ALL_DICT.cs_pet_rename_response={en:k,de:A};var K=function(){function e(){}return e}();e.cs_pet_setshow_request=K,__reflect(K.prototype,"Sproto.cs_pet_setshow_request"),e.ALL_DICT.cs_pet_setshow_request={en:M,de:E};var J=function(){function e(){}return e}();e.cs_pet_setskillin_request=J,__reflect(J.prototype,"Sproto.cs_pet_setskillin_request"),e.ALL_DICT.cs_pet_setskillin_request={en:P,de:D};var Q=function(){function e(){}return e}();e.cs_pet_setskillin_response=Q,__reflect(Q.prototype,"Sproto.cs_pet_setskillin_response"),e.ALL_DICT.cs_pet_setskillin_response={en:R,de:L}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.exp=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.exp&&o.wi(t.exp,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.petid=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;case 3:t.name=e.rs();break;case 4:t.buffs=e.ria();break;case 5:t.giftexp=e.ri();break;case 6:t.giftlv=e.ri();break;case 7:t.xilian=e.ri();break;case 8:t.xilianSkills=e.ria();break;case 9:t.flydata=e.ro("pet_fly_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,10);return void 0!=t.petid&&o.wi(t.petid,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.name&&o.ws(t.name,3),void 0!=t.buffs&&o.wia(t.buffs,4),void 0!=t.giftexp&&o.wi(t.giftexp,5),void 0!=t.giftlv&&o.wi(t.giftlv,6),void 0!=t.xilian&&o.wi(t.xilian,7),void 0!=t.xilianSkills&&o.wia(t.xilianSkills,8),void 0!=t.flydata&&o.wo("pet_fly_data",t.flydata,9),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.monsterid=e.ri();break;case 1:t.catchtime=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.monsterid&&o.wi(t.monsterid,0),void 0!=t.catchtime&&o.wi(t.catchtime,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.rb();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.result&&o.wb(t.result,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.list=e.roa("pet_info");break;case 1:t.outbound=e.ria();break;case 2:t.showid=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.list&&o.woa("pet_info",t.list,0),void 0!=t.outbound&&o.wia(t.outbound,1),void 0!=t.showid&&o.wi(t.showid,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.petinfo=e.ro("pet_info");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.petinfo&&o.wo("pet_info",t.petinfo,0),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.pet_fly_data=d,__reflect(d.prototype,"Sproto.pet_fly_data"),e.ALL_DICT.pet_fly_data={en:i,de:t};var _=function(){function e(){}return e}();e.pet_info=_,__reflect(_.prototype,"Sproto.pet_info"),e.ALL_DICT.pet_info={en:n,de:o};var f=function(){function e(){}return e}();e.sc_pet_catch_request=f,__reflect(f.prototype,"Sproto.sc_pet_catch_request"),e.ALL_DICT.sc_pet_catch_request={en:r,de:a};var m=function(){function e(){}return e}();e.sc_pet_catch_result_request=m,__reflect(m.prototype,"Sproto.sc_pet_catch_result_request"),e.ALL_DICT.sc_pet_catch_result_request={en:l,de:s};var g=function(){function e(){}return e}();e.sc_pet_init_request=g,__reflect(g.prototype,"Sproto.sc_pet_init_request"),e.ALL_DICT.sc_pet_init_request={en:u,de:c};var v=function(){function e(){}return e}();e.sc_pet_update_request=v,__reflect(v.prototype,"Sproto.sc_pet_update_request"),e.ALL_DICT.sc_pet_update_request={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_position_getawards_request=a,__reflect(a.prototype,"Sproto.cs_position_getawards_request"),e.ALL_DICT.cs_position_getawards_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_position_getawards_response=r,__reflect(r.prototype,"Sproto.cs_position_getawards_response"),e.ALL_DICT.cs_position_getawards_response={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.typ=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.typ&&o.wi(t.typ,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.creatTime=e.ri();break;case 1:t.data=e.roa("position_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.creatTime&&o.wi(t.creatTime,0),void 0!=t.data&&o.woa("position_data",t.data,1),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.position_data=a,__reflect(a.prototype,"Sproto.position_data"),e.ALL_DICT.position_data={en:i,de:t};var r=function(){function e(){}return e}();e.sc_position_info_request=r,__reflect(r.prototype,"Sproto.sc_position_info_request"),e.ALL_DICT.sc_position_info_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.field=e.ri();break;case 1:t.no=e.ri();break;case 2:t.typ=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.field&&o.wi(t.field,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.typ&&o.wi(t.typ,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rank_data=e.roa("qualifyingMgr_rank_data");break;case 1:t.fightRecord=e.roa("qualifyingMgr_fight_data");break;case 2:t.rankNo=e.ri();break;case 3:t.point=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.rank_data&&o.woa("qualifyingMgr_rank_data",t.rank_data,0),void 0!=t.fightRecord&&o.woa("qualifyingMgr_fight_data",t.fightRecord,1),void 0!=t.rankNo&&o.wi(t.rankNo,2),void 0!=t.point&&o.wi(t.point,3),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.timeout=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.timeout&&o.wi(t.timeout,1),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.the=e.ri();break;case 1:t.field=e.ri();break;case 2:t.round=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.the&&o.wi(t.the,0),void 0!=t.field&&o.wi(t.field,1),void 0!=t.round&&o.wi(t.round,2),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.win=e.rb();break;case 1:t.name1=e.rs();break;case 2:t.server1=e.ri();break;case 3:t.name2=e.rs();break;case 4:t.server2=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.win&&o.wb(t.win,0),void 0!=t.name1&&o.ws(t.name1,1),void 0!=t.server1&&o.wi(t.server1,2),void 0!=t.name2&&o.ws(t.name2,3),void 0!=t.server2&&o.wi(t.server2,4),e.SprotoCore.CloseSerialize(o)}var I=function(){function e(){}return e}();e.cs_qualifyingMgr_gamble_request=I,__reflect(I.prototype,"Sproto.cs_qualifyingMgr_gamble_request"),e.ALL_DICT.cs_qualifyingMgr_gamble_request={en:i,de:t};var w=function(){function e(){}return e}();e.cs_qualifyingMgr_gamble_response=w,__reflect(w.prototype,"Sproto.cs_qualifyingMgr_gamble_response"),e.ALL_DICT.cs_qualifyingMgr_gamble_response={en:n,de:o};var A=function(){function e(){}return e}();e.cs_qualifyingMgr_info_request=A,__reflect(A.prototype,"Sproto.cs_qualifyingMgr_info_request"),e.ALL_DICT.cs_qualifyingMgr_info_request={en:r,de:a};var k=function(){function e(){}return e}();e.cs_qualifyingMgr_map_info_request=k,__reflect(k.prototype,"Sproto.cs_qualifyingMgr_map_info_request"),e.ALL_DICT.cs_qualifyingMgr_map_info_request={en:l,de:s};var E=function(){function e(){}return e}();e.cs_qualifyingMgr_rank_request=E,__reflect(E.prototype,"Sproto.cs_qualifyingMgr_rank_request"),e.ALL_DICT.cs_qualifyingMgr_rank_request={en:u,de:c};var M=function(){function e(){}return e}();e.cs_qualifyingMgr_rank_response=M,__reflect(M.prototype,"Sproto.cs_qualifyingMgr_rank_response"),e.ALL_DICT.cs_qualifyingMgr_rank_response={en:h,de:p};var D=function(){function e(){}return e}();e.cs_qualifyingMgr_sign_up_request=D,__reflect(D.prototype,"Sproto.cs_qualifyingMgr_sign_up_request"),e.ALL_DICT.cs_qualifyingMgr_sign_up_request={en:_,de:d};var P=function(){function e(){}return e}();e.cs_qualifyingMgr_sign_up_response=P,__reflect(P.prototype,"Sproto.cs_qualifyingMgr_sign_up_response"),e.ALL_DICT.cs_qualifyingMgr_sign_up_response={en:m,de:f};var L=function(){function e(){}return e}();e.cs_qualifyingMgr_timeout_request=L,__reflect(L.prototype,"Sproto.cs_qualifyingMgr_timeout_request"),e.ALL_DICT.cs_qualifyingMgr_timeout_request={en:v,de:g};var R=function(){function e(){}return e}();e.cs_qualifyingMgr_timeout_response=R,__reflect(R.prototype,"Sproto.cs_qualifyingMgr_timeout_response"),e.ALL_DICT.cs_qualifyingMgr_timeout_response={en:C,de:y};var x=function(){function e(){}return e}();e.cs_qualifyingMgr_video_request=x,__reflect(x.prototype,"Sproto.cs_qualifyingMgr_video_request"),e.ALL_DICT.cs_qualifyingMgr_video_request={en:S,de:b};var B=function(){function e(){}return e}();e.qualifyingMgr_fight_data=B,__reflect(B.prototype,"Sproto.qualifyingMgr_fight_data"),e.ALL_DICT.qualifyingMgr_fight_data={en:T,de:G}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.field=e.ri();break;case 1:t.no=e.ri();break;case 2:t.typ=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.field&&o.wi(t.field,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.typ&&o.wi(t.typ,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.win=e.rb();break;case 1:t.name=e.rs();break;case 2:t.serverid=e.ri();break;case 3:t.level=e.ri();break;case 4:t.power=e.ri();break;case 5:t.addpoint=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.win&&o.wb(t.win,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.serverid&&o.wi(t.serverid,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.power&&o.wi(t.power,4),void 0!=t.addpoint&&o.wi(t.addpoint,5),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.name=e.rs();break;case 2:t.server=e.ri();break;case 3:t.lv=e.ri();break;case 4:t.power=e.ri();break;case 5:t.shows=e.ro("entity_shows");break;case 6:t.job=e.ri();break;case 7:t.sex=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.server&&o.wi(t.server,2),void 0!=t.lv&&o.wi(t.lv,3),void 0!=t.power&&o.wi(t.power,4),void 0!=t.shows&&o.wo("entity_shows",t.shows,5),void 0!=t.job&&o.wi(t.job,6),void 0!=t.sex&&o.wi(t.sex,7),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.field=e.ri();break;case 1:t.noA=e.ri();break;case 2:t.noB=e.ri();break;case 3:t.winNo=e.ri();break;case 4:t.fightRecord=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.field&&o.wi(t.field,0),void 0!=t.noA&&o.wi(t.noA,1),void 0!=t.noB&&o.wi(t.noB,2),void 0!=t.winNo&&o.wi(t.winNo,3),void 0!=t.fightRecord&&o.wia(t.fightRecord,4),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.sign=e.rb();break;case 1:t.type=e.ri();break;case 2:t.rank=e.ri();break;case 3:t.ret=e.rb();break;case 4:t.player_data=e.roa("qualifying_player_data");break;case 5:t.knockouttime16=e.roa("qualifying_rank_data");break;case 6:t.knockouttime8=e.roa("qualifying_rank_data");break;case 7:t.knockouttime4=e.roa("qualifying_rank_data");break;case 8:t.knockouttime2=e.roa("qualifying_rank_data");break;case 9:t.champion=e.ri();break;case 10:t.gamble=e.roa("qualifyingMgr_gamble_data");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,11);return void 0!=t.sign&&o.wb(t.sign,0),void 0!=t.type&&o.wi(t.type,1),void 0!=t.rank&&o.wi(t.rank,2),void 0!=t.ret&&o.wb(t.ret,3),void 0!=t.player_data&&o.woa("qualifying_player_data",t.player_data,4),void 0!=t.knockouttime16&&o.woa("qualifying_rank_data",t.knockouttime16,5),void 0!=t.knockouttime8&&o.woa("qualifying_rank_data",t.knockouttime8,6),void 0!=t.knockouttime4&&o.woa("qualifying_rank_data",t.knockouttime4,7),void 0!=t.knockouttime2&&o.woa("qualifying_rank_data",t.knockouttime2,8),void 0!=t.champion&&o.wi(t.champion,9),void 0!=t.gamble&&o.woa("qualifyingMgr_gamble_data",t.gamble,10),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;case 1:t.rank_data=e.roa("qualifyingMgr_rank_data");break;case 2:t.timeout=e.ri();break;case 3:t.rankNo=e.ri();break;case 4:t.point=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.ret&&o.wi(t.ret,0),void 0!=t.rank_data&&o.woa("qualifyingMgr_rank_data",t.rank_data,1),void 0!=t.timeout&&o.wi(t.timeout,2),void 0!=t.rankNo&&o.wi(t.rankNo,3),void 0!=t.point&&o.wi(t.point,4),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.win=e.rb();break;case 1:t.roleData=e.roa("qualifyingMgr_role_data");break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.win&&o.wb(t.win,0),void 0!=t.roleData&&o.woa("qualifyingMgr_role_data",t.roleData,1),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.qualifyingMgr_gamble_data=f,__reflect(f.prototype,"Sproto.qualifyingMgr_gamble_data"),e.ALL_DICT.qualifyingMgr_gamble_data={en:i,de:t};var m=function(){function e(){}return e}();e.qualifyingMgr_role_data=m,__reflect(m.prototype,"Sproto.qualifyingMgr_role_data"),e.ALL_DICT.qualifyingMgr_role_data={en:n,de:o};var g=function(){function e(){}return e}();e.qualifying_player_data=g,__reflect(g.prototype,"Sproto.qualifying_player_data"),e.ALL_DICT.qualifying_player_data={en:r,de:a};var v=function(){function e(){}return e}();e.qualifying_rank_data=v,__reflect(v.prototype,"Sproto.qualifying_rank_data"),e.ALL_DICT.qualifying_rank_data={en:l,de:s};var y=function(){function e(){}return e}();e.sc_qualifyingMgr_info_res_request=y,__reflect(y.prototype,"Sproto.sc_qualifyingMgr_info_res_request"),e.ALL_DICT.sc_qualifyingMgr_info_res_request={en:u,de:c};var C=function(){function e(){}return e}();e.sc_qualifyingMgr_map_info_res_request=C,__reflect(C.prototype,"Sproto.sc_qualifyingMgr_map_info_res_request"),e.ALL_DICT.sc_qualifyingMgr_map_info_res_request={en:h,de:p};var b=function(){function e(){}return e}();e.sc_qualifyingMgr_war_info_request=b,__reflect(b.prototype,"Sproto.sc_qualifyingMgr_war_info_request"),e.ALL_DICT.sc_qualifyingMgr_war_info_request={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbID=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fbID&&o.wi(t.fbID,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.playerid=e.ri();break;case 1:t.chapterlevel=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.playerid&&o.wi(t.playerid,0),void 0!=t.chapterlevel&&o.wi(t.chapterlevel,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbID=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fbID&&o.wi(t.fbID,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbid=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.fbid&&o.wi(t.fbid,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbid=e.ri();break;case 1:t.manuallymode=e.ri();break;case 2:t.jbutton=e.ri();break;case 3:t.type=e.ri();break;case 4:t.totalTime=e.ri();break;case 5:t.closeTime=e.ri();break;case 6:t.scenes=e.ria();break;case 7:t.name=e.rs();break;case 8:t.desc=e.rs();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.fbid&&o.wi(t.fbid,0),void 0!=t.manuallymode&&o.wi(t.manuallymode,1),void 0!=t.jbutton&&o.wi(t.jbutton,2),void 0!=t.type&&o.wi(t.type,3),void 0!=t.totalTime&&o.wi(t.totalTime,4),void 0!=t.closeTime&&o.wi(t.closeTime,5),void 0!=t.scenes&&o.wia(t.scenes,6),void 0!=t.name&&o.ws(t.name,7),void 0!=t.desc&&o.ws(t.desc,8),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pass=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.pass&&o.wi(t.pass,0),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.auto=e.rb();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.auto&&o.wb(t.auto,0),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new K,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new J,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.killCount=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.killCount&&o.wi(t.killCount,0),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new Q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.index&&o.wi(t.index,0),e.SprotoCore.CloseSerialize(o)}var x=function(){function e(){}return e}();e.cs_raid_add_count_request=x,__reflect(x.prototype,"Sproto.cs_raid_add_count_request"),e.ALL_DICT.cs_raid_add_count_request={en:i,de:t};var B=function(){function e(){}return e}();e.cs_raid_assist_pkboss_request=B,__reflect(B.prototype,"Sproto.cs_raid_assist_pkboss_request"),e.ALL_DICT.cs_raid_assist_pkboss_request={en:n,de:o};var U=function(){function e(){}return e}();e.cs_raid_assist_pkboss_response=U,__reflect(U.prototype,"Sproto.cs_raid_assist_pkboss_response"),e.ALL_DICT.cs_raid_assist_pkboss_response={en:r,de:a};var N=function(){function e(){}return e}();e.cs_raid_call_boss_play_request=N,__reflect(N.prototype,"Sproto.cs_raid_call_boss_play_request"),e.ALL_DICT.cs_raid_call_boss_play_request={en:l,de:s};var O=function(){function e(){}return e}();e.cs_raid_challenget_request=O,__reflect(O.prototype,"Sproto.cs_raid_challenget_request"),e.ALL_DICT.cs_raid_challenget_request={en:u,de:c};var F=function(){function e(){}return e}();e.cs_raid_chapter_config_request=F,__reflect(F.prototype,"Sproto.cs_raid_chapter_config_request"),e.ALL_DICT.cs_raid_chapter_config_request={en:h,de:p};var V=function(){function e(){}return e}();e.cs_raid_chapter_config_response=V,__reflect(V.prototype,"Sproto.cs_raid_chapter_config_response"),e.ALL_DICT.cs_raid_chapter_config_response={en:_,de:d};var q=function(){function e(){}return e}();e.cs_raid_exit_raid_request=q,__reflect(q.prototype,"Sproto.cs_raid_exit_raid_request"),e.ALL_DICT.cs_raid_exit_raid_request={en:m,de:f};var H=function(){function e(){}return e}();e.cs_raid_get_award_request=H,__reflect(H.prototype,"Sproto.cs_raid_get_award_request"),e.ALL_DICT.cs_raid_get_award_request={en:v,de:g};var Y=function(){function e(){}return e}();e.cs_raid_get_boss_reward_request=Y,__reflect(Y.prototype,"Sproto.cs_raid_get_boss_reward_request"),e.ALL_DICT.cs_raid_get_boss_reward_request={en:C,de:y};var W=function(){function e(){}return e}();e.cs_raid_get_chapter_reward_request=W,__reflect(W.prototype,"Sproto.cs_raid_get_chapter_reward_request"),e.ALL_DICT.cs_raid_get_chapter_reward_request={en:S,de:b};var z=function(){function e(){}return e}();e.cs_raid_get_chapter_reward_response=z,__reflect(z.prototype,"Sproto.cs_raid_get_chapter_reward_response"),e.ALL_DICT.cs_raid_get_chapter_reward_response={en:T,de:G};var j=function(){function e(){}return e}();e.cs_raid_get_world_award_request=j,__reflect(j.prototype,"Sproto.cs_raid_get_world_award_request"),e.ALL_DICT.cs_raid_get_world_award_request={en:w,de:I};var X=function(){function e(){}return e}();e.cs_raid_open_auto_request=X,__reflect(X.prototype,"Sproto.cs_raid_open_auto_request"),e.ALL_DICT.cs_raid_open_auto_request={en:k,de:A};var K=function(){function e(){}return e}();e.cs_raid_pk_boss_request=K,__reflect(K.prototype,"Sproto.cs_raid_pk_boss_request"),e.ALL_DICT.cs_raid_pk_boss_request={en:M,de:E};var J=function(){function e(){}return e}();e.cs_raid_wave_complete_request=J,__reflect(J.prototype,"Sproto.cs_raid_wave_complete_request"),e.ALL_DICT.cs_raid_wave_complete_request={en:P,de:D};var Q=function(){function e(){}return e}();e.sc_raid_clear_cd_request=Q,__reflect(Q.prototype,"Sproto.sc_raid_clear_cd_request"),e.ALL_DICT.sc_raid_clear_cd_request={en:R,de:L}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;case 2:t.type=e.ri();break;case 3:t.level=e.ri();break;case 4:t.hp=e.ri();break;case 5:t.atk=e.ri();break;case 6:t.def=e.ri();break;case 7:t.speed=e.ri();break;case 8:t.crit=e.ri();break;case 9:t.tough=e.ri();break;case 10:t.hitrate=e.ri();break;case 11:t.evade=e.ri();break;case 12:t.ms=e.ri();break;case 13:t.avatar=e.ri();break;case 14:t.head=e.rs();break;case 15:t.talk=e.rs();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,16);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.type&&o.wi(t.type,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.hp&&o.wi(t.hp,4),void 0!=t.atk&&o.wi(t.atk,5),void 0!=t.def&&o.wi(t.def,6),void 0!=t.speed&&o.wi(t.speed,7),void 0!=t.crit&&o.wi(t.crit,8),void 0!=t.tough&&o.wi(t.tough,9),void 0!=t.hitrate&&o.wi(t.hitrate,10),void 0!=t.evade&&o.wi(t.evade,11),void 0!=t.ms&&o.wi(t.ms,12),void 0!=t.avatar&&o.wi(t.avatar,13),void 0!=t.head&&o.ws(t.head,14),void 0!=t.talk&&o.ws(t.talk,15),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbid=e.ri();break;case 1:t.manuallymode=e.ri();break;case 2:t.jbutton=e.ri();break;case 3:t.type=e.ri();break;case 4:t.totalTime=e.ri();break;case 5:t.closeTime=e.ri();break;case 6:t.scenes=e.ria();break;case 7:t.name=e.rs();break;case 8:t.desc=e.rs();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.fbid&&o.wi(t.fbid,0),void 0!=t.manuallymode&&o.wi(t.manuallymode,1),void 0!=t.jbutton&&o.wi(t.jbutton,2),void 0!=t.type&&o.wi(t.type,3),void 0!=t.totalTime&&o.wi(t.totalTime,4),void 0!=t.closeTime&&o.wi(t.closeTime,5),void 0!=t.scenes&&o.wia(t.scenes,6),void 0!=t.name&&o.ws(t.name,7),void 0!=t.desc&&o.ws(t.desc,8),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new at,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.gold=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);
return void 0!=t.type&&o.wi(t.type,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.gold&&o.wi(t.gold,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbId=e.ri();break;case 1:t.useCount=e.ri();break;case 2:t.vipBuyCount=e.ri();break;case 3:t.vipHoldCount=e.ri();break;case 4:t.totalCount=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.fbId&&o.wi(t.fbId,0),void 0!=t.useCount&&o.wi(t.useCount,1),void 0!=t.vipBuyCount&&o.wi(t.vipBuyCount,2),void 0!=t.vipHoldCount&&o.wi(t.vipHoldCount,3),void 0!=t.totalCount&&o.wi(t.totalCount,4),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new st,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.kind=e.ri();break;case 1:t.useCount=e.ri();break;case 2:t.vipBuyCount=e.ri();break;case 3:t.vipHoldCount=e.ri();break;case 4:t.starRecord=e.roa("raid_material_star");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.kind&&o.wi(t.kind,0),void 0!=t.useCount&&o.wi(t.useCount,1),void 0!=t.vipBuyCount&&o.wi(t.vipBuyCount,2),void 0!=t.vipHoldCount&&o.wi(t.vipHoldCount,3),void 0!=t.starRecord&&o.woa("raid_material_star",t.starRecord,4),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.fbId=e.ri();break;case 1:t.star=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.fbId&&o.wi(t.fbId,0),void 0!=t.star&&o.wi(t.star,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossCallNum=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossCallNum&&o.wi(t.bossCallNum,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;case 2:t.star=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),void 0!=t.star&&o.wi(t.star,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.appealtime=e.ri();break;case 1:t.helptime=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.appealtime&&o.wi(t.appealtime,0),void 0!=t.helptime&&o.wi(t.helptime,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.cid=e.ri();break;case 1:t.chapterid=e.ri();break;case 2:t.sid=e.ri();break;case 3:t.minunm=e.ri();break;case 4:t.maxnum=e.ri();break;case 5:t.waveMonsterId=e.roa("chapter_mondata");break;case 6:t.bossNeedWave=e.ri();break;case 7:t.bossId=e.ro("sc_raid_chapter_mon_simple_data");break;case 8:t.showAward=e.roa("reward_data");break;case 9:t.desc=e.rs();break;case 10:t.goldEff=e.ri();break;case 11:t.expEff=e.ri();break;case 12:t.killMonsterCount=e.ri();break;case 13:t.nextmap=e.rb();break;case 14:t.chapterreward=e.ria();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,15);return void 0!=t.cid&&o.wi(t.cid,0),void 0!=t.chapterid&&o.wi(t.chapterid,1),void 0!=t.sid&&o.wi(t.sid,2),void 0!=t.minunm&&o.wi(t.minunm,3),void 0!=t.maxnum&&o.wi(t.maxnum,4),void 0!=t.waveMonsterId&&o.woa("chapter_mondata",t.waveMonsterId,5),void 0!=t.bossNeedWave&&o.wi(t.bossNeedWave,6),void 0!=t.bossId&&o.wo("sc_raid_chapter_mon_simple_data",t.bossId,7),void 0!=t.showAward&&o.woa("reward_data",t.showAward,8),void 0!=t.desc&&o.ws(t.desc,9),void 0!=t.goldEff&&o.wi(t.goldEff,10),void 0!=t.expEff&&o.wi(t.expEff,11),void 0!=t.killMonsterCount&&o.wi(t.killMonsterCount,12),void 0!=t.nextmap&&o.wb(t.nextmap,13),void 0!=t.chapterreward&&o.wia(t.chapterreward,14),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new dt,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.hp=e.ri();break;case 2:t.atk=e.ri();break;case 3:t.def=e.ri();break;case 4:t.res=e.ri();break;case 5:t.crit=e.ri();break;case 6:t.tough=e.ri();break;case 7:t.ms=e.ri();break;case 8:t.as=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.hp&&o.wi(t.hp,1),void 0!=t.atk&&o.wi(t.atk,2),void 0!=t.def&&o.wi(t.def,3),void 0!=t.res&&o.wi(t.res,4),void 0!=t.crit&&o.wi(t.crit,5),void 0!=t.tough&&o.wi(t.tough,6),void 0!=t.ms&&o.wi(t.ms,7),void 0!=t.as&&o.wi(t.as,8),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new _t,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.configId=e.ri();break;case 1:t.name=e.rs();break;case 2:t.level=e.ri();break;case 3:t.avatar=e.ri();break;case 4:t.talk=e.rs();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.configId&&o.wi(t.configId,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.avatar&&o.wi(t.avatar,3),void 0!=t.talk&&o.ws(t.talk,4),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mondata=e.roa("chapter_mondata");break;case 1:t.fbcfg=e.ro("fbcfg");break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.mondata&&o.woa("chapter_mondata",t.mondata,0),void 0!=t.fbcfg&&o.wo("fbcfg",t.fbcfg,1),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.offlineTime=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.money=e.ri();break;case 3:t.equipNum1=e.ri();break;case 4:t.equipNum2=e.ri();break;case 5:t.offlineData=e.roa("offline_data");break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.offlineTime&&o.wi(t.offlineTime,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.money&&o.wi(t.money,2),void 0!=t.equipNum1&&o.wi(t.equipNum1,3),void 0!=t.equipNum2&&o.wi(t.equipNum2,4),void 0!=t.offlineData&&o.woa("offline_data",t.offlineData,5),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.result&&o.wi(t.result,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.wave=e.ri();break;case 1:t.kills=e.ri();break;case 2:t.count=e.ri();break;case 3:t.rewards=e.roa("wave_drop_data");break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.wave&&o.wi(t.wave,0),void 0!=t.kills&&o.wi(t.kills,1),void 0!=t.count&&o.wi(t.count,2),void 0!=t.rewards&&o.woa("wave_drop_data",t.rewards,3),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.isReceive=e.ria();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.isReceive&&o.wia(t.isReceive,0),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new Ct,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidModel=e.roa("raid_data");break;case 1:t.bossIndex=e.ri();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.raidModel&&o.woa("raid_data",t.raidModel,0),void 0!=t.bossIndex&&o.wi(t.bossIndex,1),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidModel=e.roa("raid_material_data");break;case 1:t.bossIndex=e.ri();break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.raidModel&&o.woa("raid_material_data",t.raidModel,0),void 0!=t.bossIndex&&o.wi(t.bossIndex,1),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new St,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;case 2:t.star=e.ri();break;case 3:t.dead=e.ri();break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),void 0!=t.star&&o.wi(t.star,2),void 0!=t.dead&&o.wi(t.dead,3),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new Gt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidData=e.ro("raid_material_data");break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.raidData&&o.wo("raid_material_data",t.raidData,0),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new Tt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.mybossTop=e.ri();break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.mybossTop&&o.wi(t.mybossTop,0),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new It,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.cdtime=e.ri();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.cdtime&&o.wi(t.cdtime,0),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new wt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new At,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),e.SprotoCore.CloseSerialize(o)}function Q(e){for(var t=new kt,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function Z(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function $(e){for(var t=new Et,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidData=e.ro("raid_data");break;default:e.nod()}return t}function et(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.raidData&&o.wo("raid_data",t.raidData,0),e.SprotoCore.CloseSerialize(o)}function tt(e){for(var t=new Mt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;case 1:t.drops=e.roa("reward_data");break;default:e.nod()}return t}function it(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.index&&o.wi(t.index,0),void 0!=t.drops&&o.woa("reward_data",t.drops,1),e.SprotoCore.CloseSerialize(o)}var ot=function(){function e(){}return e}();e.chapter_mondata=ot,__reflect(ot.prototype,"Sproto.chapter_mondata"),e.ALL_DICT.chapter_mondata={en:i,de:t};var nt=function(){function e(){}return e}();e.fbcfg=nt,__reflect(nt.prototype,"Sproto.fbcfg"),e.ALL_DICT.fbcfg={en:n,de:o};var at=function(){function e(){}return e}();e.offline_data=at,__reflect(at.prototype,"Sproto.offline_data"),e.ALL_DICT.offline_data={en:r,de:a};var rt=function(){function e(){}return e}();e.raid_data=rt,__reflect(rt.prototype,"Sproto.raid_data"),e.ALL_DICT.raid_data={en:l,de:s};var st=function(){function e(){}return e}();e.raid_material_data=st,__reflect(st.prototype,"Sproto.raid_material_data"),e.ALL_DICT.raid_material_data={en:u,de:c};var lt=function(){function e(){}return e}();e.raid_material_star=lt,__reflect(lt.prototype,"Sproto.raid_material_star"),e.ALL_DICT.raid_material_star={en:h,de:p};var ct=function(){function e(){}return e}();e.sc_raid_boss_box_num_request=ct,__reflect(ct.prototype,"Sproto.sc_raid_boss_box_num_request"),e.ALL_DICT.sc_raid_boss_box_num_request={en:_,de:d};var ut=function(){function e(){}return e}();e.sc_raid_chapter_boss_result_request=ut,__reflect(ut.prototype,"Sproto.sc_raid_chapter_boss_result_request"),e.ALL_DICT.sc_raid_chapter_boss_result_request={en:m,de:f};var pt=function(){function e(){}return e}();e.sc_raid_chapter_collaborate_request=pt,__reflect(pt.prototype,"Sproto.sc_raid_chapter_collaborate_request"),e.ALL_DICT.sc_raid_chapter_collaborate_request={en:v,de:g};var ht=function(){function e(){}return e}();e.sc_raid_chapter_init_info_request=ht,__reflect(ht.prototype,"Sproto.sc_raid_chapter_init_info_request"),e.ALL_DICT.sc_raid_chapter_init_info_request={en:C,de:y};var dt=function(){function e(){}return e}();e.sc_raid_chapter_mon_data=dt,__reflect(dt.prototype,"Sproto.sc_raid_chapter_mon_data"),e.ALL_DICT.sc_raid_chapter_mon_data={en:S,de:b};var _t=function(){function e(){}return e}();e.sc_raid_chapter_mon_simple_data=_t,__reflect(_t.prototype,"Sproto.sc_raid_chapter_mon_simple_data"),e.ALL_DICT.sc_raid_chapter_mon_simple_data={en:T,de:G};var ft=function(){function e(){}return e}();e.sc_raid_chapter_mondata_request=ft,__reflect(ft.prototype,"Sproto.sc_raid_chapter_mondata_request"),e.ALL_DICT.sc_raid_chapter_mondata_request={en:w,de:I};var mt=function(){function e(){}return e}();e.sc_raid_chapter_offline_reward_request=mt,__reflect(mt.prototype,"Sproto.sc_raid_chapter_offline_reward_request"),e.ALL_DICT.sc_raid_chapter_offline_reward_request={en:k,de:A};var gt=function(){function e(){}return e}();e.sc_raid_chapter_reward_request=gt,__reflect(gt.prototype,"Sproto.sc_raid_chapter_reward_request"),e.ALL_DICT.sc_raid_chapter_reward_request={en:M,de:E};var vt=function(){function e(){}return e}();e.sc_raid_chapter_wave_data_request=vt,__reflect(vt.prototype,"Sproto.sc_raid_chapter_wave_data_request"),e.ALL_DICT.sc_raid_chapter_wave_data_request={en:P,de:D};var yt=function(){function e(){}return e}();e.sc_raid_chapter_world_reward_request=yt,__reflect(yt.prototype,"Sproto.sc_raid_chapter_world_reward_request"),e.ALL_DICT.sc_raid_chapter_world_reward_request={en:R,de:L};var Ct=function(){function e(){}return e}();e.sc_raid_info_init_request=Ct,__reflect(Ct.prototype,"Sproto.sc_raid_info_init_request"),e.ALL_DICT.sc_raid_info_init_request={en:B,de:x};var bt=function(){function e(){}return e}();e.sc_raid_material_info_init_request=bt,__reflect(bt.prototype,"Sproto.sc_raid_material_info_init_request"),e.ALL_DICT.sc_raid_material_info_init_request={en:N,de:U};var St=function(){function e(){}return e}();e.sc_raid_material_result_request=St,__reflect(St.prototype,"Sproto.sc_raid_material_result_request"),e.ALL_DICT.sc_raid_material_result_request={en:F,de:O};var Gt=function(){function e(){}return e}();e.sc_raid_material_update_info_request=Gt,__reflect(Gt.prototype,"Sproto.sc_raid_material_update_info_request"),e.ALL_DICT.sc_raid_material_update_info_request={en:q,de:V};var Tt=function(){function e(){}return e}();e.sc_raid_myboss_top_request=Tt,__reflect(Tt.prototype,"Sproto.sc_raid_myboss_top_request"),e.ALL_DICT.sc_raid_myboss_top_request={en:Y,de:H};var It=function(){function e(){}return e}();e.sc_raid_reborn_cd_request=It,__reflect(It.prototype,"Sproto.sc_raid_reborn_cd_request"),e.ALL_DICT.sc_raid_reborn_cd_request={en:z,de:W};var wt=function(){function e(){}return e}();e.sc_raid_role_all_die_request=wt,__reflect(wt.prototype,"Sproto.sc_raid_role_all_die_request"),e.ALL_DICT.sc_raid_role_all_die_request={en:X,de:j};var At=function(){function e(){}return e}();e.sc_raid_sweep_reward_request=At,__reflect(At.prototype,"Sproto.sc_raid_sweep_reward_request"),e.ALL_DICT.sc_raid_sweep_reward_request={en:J,de:K};var kt=function(){function e(){}return e}();e.sc_raid_time_request=kt,__reflect(kt.prototype,"Sproto.sc_raid_time_request"),e.ALL_DICT.sc_raid_time_request={en:Z,de:Q};var Et=function(){function e(){}return e}();e.sc_raid_update_info_request=Et,__reflect(Et.prototype,"Sproto.sc_raid_update_info_request"),e.ALL_DICT.sc_raid_update_info_request={en:et,de:$};var Mt=function(){function e(){}return e}();e.wave_drop_data=Mt,__reflect(Mt.prototype,"Sproto.wave_drop_data"),e.ALL_DICT.wave_drop_data={en:it,de:tt}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.cs_rank_req_request=c,__reflect(c.prototype,"Sproto.cs_rank_req_request"),e.ALL_DICT.cs_rank_req_request={en:i,de:t};var u=function(){function e(){}return e}();e.cs_rank_worship_all_count_request=u,__reflect(u.prototype,"Sproto.cs_rank_worship_all_count_request"),e.ALL_DICT.cs_rank_worship_all_count_request={en:n,de:o};var p=function(){function e(){}return e}();e.cs_rank_worship_data_req_request=p,__reflect(p.prototype,"Sproto.cs_rank_worship_data_req_request"),e.ALL_DICT.cs_rank_worship_data_req_request={en:r,de:a};var h=function(){function e(){}return e}();e.cs_rank_worship_once_request=h,__reflect(h.prototype,"Sproto.cs_rank_worship_once_request"),e.ALL_DICT.cs_rank_worship_once_request={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.id=e.ri();break;case 2:t.name=e.rs();break;case 3:t.level=e.ri();break;case 4:t.serverid=e.ri();break;case 5:t.job=e.ri();break;case 6:t.sex=e.ri();break;case 7:t.vip=e.ri();break;case 8:t.skin=e.ri();break;case 9:t.power=e.ri();break;case 10:t.outpet=e.ri();break;case 11:t.outxianlv=e.ri();break;case 12:t.outride=e.ri();break;case 13:t.outwing=e.ri();break;case 14:t.outfairy=e.ri();break;case 15:t.outweapon=e.ri();break;case 16:t.outtiannv=e.ri();break;case 17:t.outtianshen=e.ri();break;case 18:t.outcircle=e.ri();break;case 19:t.outposition=e.ri();break;case 20:t.outpsychic=e.ri();break;case 21:t.outsoul=e.ri();break;case 22:t.outflower=e.ri();break;case 23:t.outnimbus=e.ri();break;case 24:t.chapterlevel=e.ri();break;case 25:t.lv=e.ri();break;case 26:t.outbaby=e.ri();break;case 27:t.outbabysex=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,28);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.name&&o.ws(t.name,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.serverid&&o.wi(t.serverid,4),void 0!=t.job&&o.wi(t.job,5),void 0!=t.sex&&o.wi(t.sex,6),void 0!=t.vip&&o.wi(t.vip,7),void 0!=t.skin&&o.wi(t.skin,8),void 0!=t.power&&o.wi(t.power,9),void 0!=t.outpet&&o.wi(t.outpet,10),void 0!=t.outxianlv&&o.wi(t.outxianlv,11),void 0!=t.outride&&o.wi(t.outride,12),void 0!=t.outwing&&o.wi(t.outwing,13),void 0!=t.outfairy&&o.wi(t.outfairy,14),void 0!=t.outweapon&&o.wi(t.outweapon,15),void 0!=t.outtiannv&&o.wi(t.outtiannv,16),void 0!=t.outtianshen&&o.wi(t.outtianshen,17),void 0!=t.outcircle&&o.wi(t.outcircle,18),void 0!=t.outposition&&o.wi(t.outposition,19),void 0!=t.outpsychic&&o.wi(t.outpsychic,20),void 0!=t.outsoul&&o.wi(t.outsoul,21),void 0!=t.outflower&&o.wi(t.outflower,22),void 0!=t.outnimbus&&o.wi(t.outnimbus,23),void 0!=t.chapterlevel&&o.wi(t.chapterlevel,24),void 0!=t.lv&&o.wi(t.lv,25),void 0!=t.outbaby&&o.wi(t.outbaby,26),void 0!=t.outbabysex&&o.wi(t.outbabysex,27),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.datas=e.roa("rank_data_list");break;case 2:t.selfRank=e.ri();break;case 3:t.value=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.datas&&o.woa("rank_data_list",t.datas,1),void 0!=t.selfRank&&o.wi(t.selfRank,2),void 0!=t.value&&o.wi(t.value,3),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.worshipCount=e.roa("worship_count");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.worshipCount&&o.woa("worship_count",t.worshipCount,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.count=e.ri();break;case 2:t.actorData=e.ro("actor_base_data");break;case 3:t.subRole=e.roa("rank_subrole");break;case 4:t.hero=e.ri();break;case 5:t.pet=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.count&&o.wi(t.count,1),void 0!=t.actorData&&o.wo("actor_base_data",t.actorData,2),void 0!=t.subRole&&o.woa("rank_subrole",t.subRole,3),void 0!=t.hero&&o.wi(t.hero,4),void 0!=t.pet&&o.wi(t.pet,5),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.count=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.count&&o.wi(t.count,1),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.rank_data_list=d,__reflect(d.prototype,"Sproto.rank_data_list"),e.ALL_DICT.rank_data_list={en:i,de:t};var _=function(){function e(){}return e}();e.sc_rank_data_request=_,__reflect(_.prototype,"Sproto.sc_rank_data_request"),e.ALL_DICT.sc_rank_data_request={en:n,de:o};var f=function(){function e(){}return e}();e.sc_rank_worship_all_count_ret_request=f,__reflect(f.prototype,"Sproto.sc_rank_worship_all_count_ret_request"),e.ALL_DICT.sc_rank_worship_all_count_ret_request={en:r,de:a};var m=function(){function e(){}return e}();e.sc_rank_worship_data_request=m,__reflect(m.prototype,"Sproto.sc_rank_worship_data_request"),e.ALL_DICT.sc_rank_worship_data_request={en:l,de:s};var g=function(){function e(){}return e}();e.sc_rank_worship_success_request=g,__reflect(g.prototype,"Sproto.sc_rank_worship_success_request"),e.ALL_DICT.sc_rank_worship_success_request={en:u,de:c};var v=function(){function e(){}return e}();e.worship_count=v,__reflect(v.prototype,"Sproto.worship_count"),e.ALL_DICT.worship_count={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardid=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rewardid&&o.wi(t.rewardid,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.order_number=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.order_number&&o.wi(t.order_number,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rechargeid=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rechargeid&&o.wi(t.rechargeid,0),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_recharge_first_reward_request=p,__reflect(p.prototype,"Sproto.cs_recharge_first_reward_request"),e.ALL_DICT.cs_recharge_first_reward_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_recharge_get_choice_reward_request=h,__reflect(h.prototype,"Sproto.cs_recharge_get_choice_reward_request"),e.ALL_DICT.cs_recharge_get_choice_reward_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_recharge_get_dailyrecharge_reward_request=d,__reflect(d.prototype,"Sproto.cs_recharge_get_dailyrecharge_reward_request"),e.ALL_DICT.cs_recharge_get_dailyrecharge_reward_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_recharge_get_order_number_response=_,__reflect(_.prototype,"Sproto.cs_recharge_get_order_number_response"),e.ALL_DICT.cs_recharge_get_order_number_response={en:l,de:s};var f=function(){function e(){}return e}();e.cs_recharge_normal_request=f,__reflect(f.prototype,"Sproto.cs_recharge_normal_request"),e.ALL_DICT.cs_recharge_normal_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dailyrechare=e.ri();break;case 1:t.rewardmark=e.ri();break;case 2:t.dailyid=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.dailyrechare&&o.wi(t.dailyrechare,0),void 0!=t.rewardmark&&o.wi(t.rewardmark,1),void 0!=t.dailyid&&o.wi(t.dailyid,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.reward=e.ria();break;case 1:t.choicerechare=e.ri();break;case 2:t.finish=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.reward&&o.wia(t.reward,0),void 0!=t.choicerechare&&o.wi(t.choicerechare,1),void 0!=t.finish&&o.wia(t.finish,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rechargeNum=e.ri();break;case 1:t.reward=e.ria();break;case 2:t.firsttime=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.rechargeNum&&o.wi(t.rechargeNum,0),void 0!=t.reward&&o.wia(t.reward,1),void 0!=t.firsttime&&o.wi(t.firsttime,2),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.sc_recharge_dailyrechare_request=s,__reflect(s.prototype,"Sproto.sc_recharge_dailyrechare_request"),e.ALL_DICT.sc_recharge_dailyrechare_request={en:i,de:t};var l=function(){function e(){}return e}();e.sc_recharge_double_request=l,__reflect(l.prototype,"Sproto.sc_recharge_double_request"),e.ALL_DICT.sc_recharge_double_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_recharge_first_info_request=c,__reflect(c.prototype,"Sproto.sc_recharge_first_info_request"),e.ALL_DICT.sc_recharge_first_info_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.payType=e.ri();break;case 1:t.gid=e.ri();break;case 2:t.index=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.payType&&o.wi(t.payType,0),void 0!=t.gid&&o.wi(t.gid,1),void 0!=t.index&&o.wi(t.index,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.payType=e.ri();break;case 1:t.gid=e.ri();break;case 2:t.nopop=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.payType&&o.wi(t.payType,0),void 0!=t.gid&&o.wi(t.gid,1),void 0!=t.nopop&&o.wb(t.nopop,2),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_rechargew_getawards_request=a,__reflect(a.prototype,"Sproto.cs_rechargew_getawards_request"),e.ALL_DICT.cs_rechargew_getawards_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_rechargew_setpop_request=r,__reflect(r.prototype,"Sproto.cs_rechargew_setpop_request"),e.ALL_DICT.cs_rechargew_setpop_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.id=e.ri();break;case 2:t.count=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.count&&o.wi(t.count,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.items=e.roa("award_item");break;case 1:t.buycount=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.items&&o.woa("award_item",t.items,0),void 0!=t.buycount&&o.wi(t.buycount,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.config=e.ro("rechargew_shit_info");break;case 1:t.info=e.ro("rechargew_my_info");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.config&&o.wo("rechargew_shit_info",t.config,0),void 0!=t.info&&o.wo("rechargew_my_info",t.info,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.nopop=e.rb();break;case 1:t.step=e.ri();break;case 2:t.getnum=e.ria();break;case 3:t.steps=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.nopop&&o.wb(t.nopop,0),void 0!=t.step&&o.wi(t.step,1),void 0!=t.getnum&&o.wia(t.getnum,2),void 0!=t.steps&&o.wia(t.steps,3),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.payType=e.ri();break;case 1:t.gid=e.ri();break;case 2:t.gtype=e.ri();break;case 3:t.startTime=e.ri();break;case 4:t.endTime=e.ri();break;case 5:t.headtext=e.rs();break;case 6:t.content=e.rs();break;case 7:t.awards=e.roa("award_one");break;case 8:t.condType=e.ri();break;case 9:t.targets=e.ria();break;case 10:t.prices=e.ria();break;case 11:t.dayRefresh=e.ri();break;case 12:t.showType=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,13);return void 0!=t.payType&&o.wi(t.payType,0),void 0!=t.gid&&o.wi(t.gid,1),void 0!=t.gtype&&o.wi(t.gtype,2),void 0!=t.startTime&&o.wi(t.startTime,3),void 0!=t.endTime&&o.wi(t.endTime,4),void 0!=t.headtext&&o.ws(t.headtext,5),void 0!=t.content&&o.ws(t.content,6),void 0!=t.awards&&o.woa("award_one",t.awards,7),void 0!=t.condType&&o.wi(t.condType,8),void 0!=t.targets&&o.wia(t.targets,9),void 0!=t.prices&&o.wia(t.prices,10),void 0!=t.dayRefresh&&o.wi(t.dayRefresh,11),void 0!=t.showType&&o.wi(t.showType,12),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.config=e.ro("rechargew_shit_info");break;case 1:t.info=e.ro("rechargew_my_info");break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.config&&o.wo("rechargew_shit_info",t.config,0),void 0!=t.info&&o.wo("rechargew_my_info",t.info,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.payType=e.ri();break;case 1:t.gid=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.payType&&o.wi(t.payType,0),void 0!=t.gid&&o.wi(t.gid,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.payType=e.ri();break;case 1:t.gid=e.ri();break;case 2:t.index=e.ri();break;case 3:t.price=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.payType&&o.wi(t.payType,0),void 0!=t.gid&&o.wi(t.gid,1),void 0!=t.index&&o.wi(t.index,2),void 0!=t.price&&o.wi(t.price,3),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.initinfo=e.roa("rechargew_initinfo");break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.initinfo&&o.woa("rechargew_initinfo",t.initinfo,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.payType=e.ri();break;case 1:t.gid=e.ri();break;case 2:t.step=e.ri();break;case 3:t.getnum=e.ria();break;case 4:t.steps=e.ria();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.payType&&o.wi(t.payType,0),void 0!=t.gid&&o.wi(t.gid,1),void 0!=t.step&&o.wi(t.step,2),void 0!=t.getnum&&o.wia(t.getnum,3),void 0!=t.steps&&o.wia(t.steps,4),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.award_item=b,__reflect(b.prototype,"Sproto.award_item"),e.ALL_DICT.award_item={en:i,de:t};
var S=function(){function e(){}return e}();e.award_one=S,__reflect(S.prototype,"Sproto.award_one"),e.ALL_DICT.award_one={en:n,de:o};var G=function(){function e(){}return e}();e.rechargew_initinfo=G,__reflect(G.prototype,"Sproto.rechargew_initinfo"),e.ALL_DICT.rechargew_initinfo={en:r,de:a};var T=function(){function e(){}return e}();e.rechargew_my_info=T,__reflect(T.prototype,"Sproto.rechargew_my_info"),e.ALL_DICT.rechargew_my_info={en:l,de:s};var I=function(){function e(){}return e}();e.rechargew_shit_info=I,__reflect(I.prototype,"Sproto.rechargew_shit_info"),e.ALL_DICT.rechargew_shit_info={en:u,de:c};var w=function(){function e(){}return e}();e.sc_rechargew_shit_request=w,__reflect(w.prototype,"Sproto.sc_rechargew_shit_request"),e.ALL_DICT.sc_rechargew_shit_request={en:h,de:p};var A=function(){function e(){}return e}();e.sc_rechargew_shitclose_request=A,__reflect(A.prototype,"Sproto.sc_rechargew_shitclose_request"),e.ALL_DICT.sc_rechargew_shitclose_request={en:_,de:d};var k=function(){function e(){}return e}();e.sc_rechargew_shitindex_request=k,__reflect(k.prototype,"Sproto.sc_rechargew_shitindex_request"),e.ALL_DICT.sc_rechargew_shitindex_request={en:m,de:f};var E=function(){function e(){}return e}();e.sc_rechargew_shitinit_request=E,__reflect(E.prototype,"Sproto.sc_rechargew_shitinit_request"),e.ALL_DICT.sc_rechargew_shitinit_request={en:v,de:g};var M=function(){function e(){}return e}();e.sc_rechargew_shitstep_request=M,__reflect(M.prototype,"Sproto.sc_rechargew_shitstep_request"),e.ALL_DICT.sc_rechargew_shitstep_request={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.type=e.ri();break;case 2:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,1),void 0!=t.id&&o.wi(t.id,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.xiuWei=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.xiuWei&&o.wi(t.xiuWei,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.number=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.number&&o.wi(t.number,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.xiuWei=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.skillList=e.ria();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.xiuWei&&o.wi(t.xiuWei,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.skillList&&o.wia(t.skillList,3),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.skillNo=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.skillNo&&o.wi(t.skillNo,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.skillList=e.ria();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.skillList&&o.wia(t.skillList,1),e.SprotoCore.CloseSerialize(o)}var g=function(){function e(){}return e}();e.cs_rolefly_add_xiuwei_request=g,__reflect(g.prototype,"Sproto.cs_rolefly_add_xiuwei_request"),e.ALL_DICT.cs_rolefly_add_xiuwei_request={en:i,de:t};var v=function(){function e(){}return e}();e.cs_rolefly_add_xiuwei_response=v,__reflect(v.prototype,"Sproto.cs_rolefly_add_xiuwei_response"),e.ALL_DICT.cs_rolefly_add_xiuwei_response={en:n,de:o};var y=function(){function e(){}return e}();e.cs_rolefly_get_addnum_request=y,__reflect(y.prototype,"Sproto.cs_rolefly_get_addnum_request"),e.ALL_DICT.cs_rolefly_get_addnum_request={en:r,de:a};var C=function(){function e(){}return e}();e.cs_rolefly_get_addnum_response=C,__reflect(C.prototype,"Sproto.cs_rolefly_get_addnum_response"),e.ALL_DICT.cs_rolefly_get_addnum_response={en:l,de:s};var b=function(){function e(){}return e}();e.cs_rolefly_up_request=b,__reflect(b.prototype,"Sproto.cs_rolefly_up_request"),e.ALL_DICT.cs_rolefly_up_request={en:u,de:c};var S=function(){function e(){}return e}();e.cs_rolefly_up_response=S,__reflect(S.prototype,"Sproto.cs_rolefly_up_response"),e.ALL_DICT.cs_rolefly_up_response={en:h,de:p};var G=function(){function e(){}return e}();e.cs_rolefly_up_skill_request=G,__reflect(G.prototype,"Sproto.cs_rolefly_up_skill_request"),e.ALL_DICT.cs_rolefly_up_skill_request={en:_,de:d};var T=function(){function e(){}return e}();e.cs_rolefly_up_skill_response=T,__reflect(T.prototype,"Sproto.cs_rolefly_up_skill_response"),e.ALL_DICT.cs_rolefly_up_skill_response={en:m,de:f}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.lv=e.ri();break;case 2:t.xiuWei=e.ri();break;case 3:t.skillList=e.ria();break;case 4:t.equipList=e.roa("equip_item_data");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.xiuWei&&o.wi(t.xiuWei,2),void 0!=t.skillList&&o.wia(t.skillList,3),void 0!=t.equipList&&o.woa("equip_item_data",t.equipList,4),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.lv=e.ri();break;case 2:t.xiuWei=e.ri();break;case 3:t.skillList=e.ria();break;case 4:t.equipList=e.roa("equip_item_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.xiuWei&&o.wi(t.xiuWei,2),void 0!=t.skillList&&o.wia(t.skillList,3),void 0!=t.equipList&&o.woa("equip_item_data",t.equipList,4),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_rolefly_init_request=a,__reflect(a.prototype,"Sproto.sc_rolefly_init_request"),e.ALL_DICT.sc_rolefly_init_request={en:i,de:t};var r=function(){function e(){}return e}();e.sc_rolefly_update_data_request=r,__reflect(r.prototype,"Sproto.sc_rolefly_update_data_request"),e.ALL_DICT.sc_rolefly_update_data_request={en:n,de:o}}(Sproto||(Sproto={}));var S2cProtocol=function(e){function t(){var t=e.call(this)||this,i=t.Protocol;return i.Set(120,"actor_die_notice_request",null),i.Set(109,"blood_update_request",null),i.Set(114,"entity_mp_update_request",null),i.Set(107,"exp_change_request",null),i.Set(118,"first_register_request",null),i.Set(106,"gold_change_request",null),i.Set(111,"move_entity_request",null),i.Set(121,"player_guild_change_request",null),i.Set(110,"remove_entity_request",null),i.Set(132,"sc_accu_login_request",null),i.Set(2608,null,null),i.Set(2603,"sc_activity_dabiao_info_request",null),i.Set(2604,"sc_activity_dabiao_reward_request",null),i.Set(22003,"sc_activity_hall_request",null),i.Set(22001,"sc_activity_info_res_request",null),i.Set(2601,"sc_activity_init_info_request",null),i.Set(2609,"sc_activity_luckwheel_ret_request",null),i.Set(22002,"sc_activity_msg_request",null),i.Set(2607,"sc_activity_race_history_request",null),i.Set(2602,"sc_activity_reward_result_request",null),i.Set(2606,"sc_activity_update_info_request",null),i.Set(101,"sc_actor_base_request",null),i.Set(5901,"sc_advanced_info_request",null),i.Set(5903,"sc_advanced_rank_request",null),i.Set(5902,"sc_advanced_update_request",null),i.Set(5801,"sc_answer_info_request",null),i.Set(5804,"sc_answer_rank_res_request",null),i.Set(5803,"sc_answer_reward_request",null),i.Set(5802,"sc_answer_update_request",null),i.Set(13001,"sc_arena_pk_result_request",null),i.Set(2802,"sc_auction_list_request",null),i.Set(2803,"sc_auction_record_request",null),i.Set(2801,"sc_auction_select_request",null),i.Set(2804,"sc_auction_update_request",null),i.Set(2806,null,null),i.Set(8201,"sc_baby_init_request",null),i.Set(8202,"sc_baby_star_init_request",null),i.Set(404,"sc_bag_deal_add_item_request",null),i.Set(403,"sc_bag_deal_delete_item_request",null),i.Set(410,"sc_bag_deal_recycle_result_request",null),i.Set(409,"sc_bag_deal_smelt_result_request",null),i.Set(402,"sc_bag_deal_valumn_add_request",null),i.Set(408,"sc_bag_get_treasure_equip_request",null),i.Set(401,"sc_bag_init_data_request",null),i.Set(405,"sc_bag_update_item_data_request",null),i.Set(406,"sc_bag_user_item_back_request",null),i.Set(7656,"sc_base_game_time_request",null),i.Set(7657,"sc_base_open_day_request",null),i.Set(7658,null,null),i.Set(7e3,"sc_battle_action_request",null),i.Set(7001,"sc_battle_entitys_request",null),i.Set(7003,"sc_battle_manual_request",null),i.Set(7002,"sc_battle_record_request",null),i.Set(7004,"sc_battle_set_auto_request",null),i.Set(8001,"sc_brother_info_request",null),i.Set(2201,"sc_cashCow_info_request",null),i.Set(3133,"sc_chat_filte_list_request",null),i.Set(3102,"sc_chat_init_msg_request",null),i.Set(3103,"sc_chat_is_send_success_request",null),i.Set(3101,"sc_chat_new_msg_request",null),i.Set(3132,"sc_chat_private_init_msg_request",null),i.Set(3131,"sc_chat_private_new_msg_request",null),i.Set(26001,"sc_climb_all_rank_request",null),i.Set(26003,"sc_climb_curr_rank_request",null),i.Set(26006,"sc_climb_fighting_change_request",null),i.Set(26002,"sc_climb_info_request",null),i.Set(26007,"sc_climb_king_request",null),i.Set(26004,"sc_climb_refresh_mon_request",null),i.Set(26008,"sc_climb_report_request",null),i.Set(26005,"sc_climb_score_info_request",null),i.Set(130,"sc_cross_team_reward_count_request",null),i.Set(5701,"sc_dailyTask_info_request",null),i.Set(5702,"sc_dailyTask_update_request",null),i.Set(14011,"sc_effect_skin_update_request",null),i.Set(14001,"sc_effect_title_update_request",null),i.Set(6302,"sc_enhance_add_info_request",null),i.Set(6301,"sc_enhance_info_request",null),i.Set(511,"sc_equip_forge_request",null),i.Set(501,"sc_equip_update_data_request",null),i.Set(505,"sc_equip_update_suitlv_request",null),i.Set(7659,"sc_error_code_request",null),i.Set(20001,"sc_escort_info_update_request",null),i.Set(20030,"sc_escort_record_data_request",null),i.Set(20031,"sc_escort_record_update_request",null),i.Set(20007,"sc_escort_reward_show_request",null),i.Set(11002,"sc_field_boss_base_list_request",null),i.Set(11003,"sc_field_boss_update_one_request",null),i.Set(5601,"sc_formation_info_request",null),i.Set(30011,"sc_friend_black_list_request",null),i.Set(30012,"sc_friend_blacklist_update_request",null),i.Set(30001,"sc_friend_follow_data_request",null),i.Set(30021,"sc_friend_follow_nominate_list_request",null),i.Set(30002,"sc_friend_follow_update_request",null),i.Set(30006,"sc_friend_funs_data_request",null),i.Set(30008,"sc_friend_funs_remove_request",null),i.Set(30007,"sc_friend_funs_update_request",null),i.Set(30016,"sc_friend_gift_receive_info_request",null),i.Set(28001,"sc_fuben_eightyOneHard_info_request",null),i.Set(28002,"sc_fuben_eightyOneHard_info_update_request",null),i.Set(5205,"sc_fuben_heavenFb_info_request",null),i.Set(5206,"sc_fuben_heavenFb_reward_request",null),i.Set(5201,"sc_fuben_material_info_request",null),i.Set(5202,"sc_fuben_treasuremap_info_request",null),i.Set(5203,"sc_fuben_treasuremap_star_reward_request",null),i.Set(5204,"sc_fuben_wildgeeseFb_info_request",null),i.Set(3807,"sc_guild_apply_request",null),i.Set(3831,"sc_guild_apply_list_request",null),i.Set(3828,"sc_guild_autoadd_ret_request",null),i.Set(3863,"sc_guild_boss_info_request",null),i.Set(3814,"sc_guild_change_notice_ret_request",null),i.Set(3809,"sc_guild_change_office_ret_request",null),i.Set(3804,"sc_guild_create_ret_request",null),i.Set(3842,"sc_guild_donate_info_request",null),i.Set(3841,"sc_guild_donate_ret_request",null),i.Set(3813,"sc_guild_fund_request",null),i.Set(3801,"sc_guild_info_request",null),i.Set(3806,null,null),i.Set(3811,"sc_guild_kick_ret_request",null),i.Set(3803,"sc_guild_list_request",null),i.Set(3862,"sc_guild_map_one_update_request",null),i.Set(3861,"sc_guild_map_reward_request",null),i.Set(3802,"sc_guild_members_request",null),i.Set(3808,"sc_guild_notice_apply_request",null),i.Set(3846,"sc_guild_peach_info_request",null),i.Set(3847,"sc_guild_peach_record_request",null),i.Set(3848,"sc_guild_peach_record_add_request",null),i.Set(3825,"sc_guild_playerinfo_request",null),i.Set(3851,"sc_guild_protector_info_request",null),i.Set(3852,"sc_guild_protector_task_info_request",null),i.Set(3821,"sc_guild_record_add_request",null),i.Set(3822,"sc_guild_record_data_request",null),i.Set(3829,"sc_guild_rename_request",null),i.Set(3830,"sc_guild_rename_ret_request",null),i.Set(3864,"sc_guild_robot_datas_request",null),i.Set(3856,"sc_guild_skill_info_request",null),i.Set(3857,"sc_guild_skill_learn_ret_request",null),i.Set(32003,"sc_guildboss_box_all_request",null),i.Set(32004,"sc_guildboss_box_one_request",null),i.Set(32010,"sc_guildboss_collect_all_request",null),i.Set(32009,"sc_guildboss_collect_now_request",null),i.Set(32001,"sc_guildboss_info_request",null),i.Set(32005,"sc_guildboss_player_dead_request",null),i.Set(32008,"sc_guildboss_rank_last_request",null),i.Set(32006,"sc_guildboss_rank_now_request",null),i.Set(32007,"sc_guildboss_rewards_request",null),i.Set(32002,"sc_guildboss_update_info_request",null),i.Set(25001,"sc_guildmine_mine_info_request",null),i.Set(25003,"sc_guildmine_mine_mystatus_request",null),i.Set(25002,"sc_guildmine_mine_one_info_request",null),i.Set(25021,"sc_guildmine_rob_info_request",null),i.Set(25016,"sc_guildmine_score_rank_day_request",null),i.Set(27030,"sc_guildwar_all_guild_rank_info_request",null),i.Set(27031,"sc_guildwar_all_player_rank_info_request",null),i.Set(27005,"sc_guildwar_barrier_info_request",null),i.Set(27006,"sc_guildwar_boss_info_request",null),i.Set(27035,"sc_guildwar_enter_dragon_guild_request",null),i.Set(27041,"sc_guildwar_enter_war_guild_request",null),i.Set(27008,"sc_guildwar_four_king_info_request",null),i.Set(27007,"sc_guildwar_guard_info_request",null),i.Set(27002,"sc_guildwar_guild_info_request",null),i.Set(27003,"sc_guildwar_guild_rank_request",null),i.Set(27010,"sc_guildwar_myguild_global_info_request",null),i.Set(27009,"sc_guildwar_player_global_info_request",null),i.Set(27001,"sc_guildwar_player_info_request",null),i.Set(27004,"sc_guildwar_player_rank_request",null),i.Set(27042,"sc_guildwar_report_request",null),i.Set(27036,"sc_guildwar_ultimate_attack_request",null),i.Set(6101,"sc_holy_pet_info_request",null),i.Set(2103,"sc_kfboss_box_all_request",null),i.Set(2104,"sc_kfboss_box_one_request",null),i.Set(2110,"sc_kfboss_collect_all_request",null),i.Set(2109,"sc_kfboss_collect_now_request",null),i.Set(2101,"sc_kfboss_info_request",null),i.Set(2105,"sc_kfboss_player_dead_request",null),i.Set(2108,"sc_kfboss_rank_last_request",null),i.Set(2106,"sc_kfboss_rank_now_request",null),i.Set(2111,"sc_kfboss_report_request",null),i.Set(2107,"sc_kfboss_rewards_request",null),i.Set(2102,"sc_kfboss_update_info_request",null),i.Set(24012,"sc_king_attack_result_request",null),i.Set(24003,"sc_king_begin_act_request",null),i.Set(24002,"sc_king_city_data_request",null),i.Set(24010,"sc_king_city_occupy_request",null),i.Set(24005,"sc_king_fighting_change_request",null),i.Set(24001,"sc_king_info_request",null),i.Set(24017,"sc_king_info_update_request",null),i.Set(24016,"sc_king_my_guard_city_request",null),i.Set(24013,"sc_king_pk_result_request",null),i.Set(24006,"sc_king_player_enter_request",null),i.Set(24007,"sc_king_player_leave_request",null),i.Set(24009,"sc_king_point_data_request",null),i.Set(24008,"sc_king_point_info_request",null),i.Set(24014,"sc_king_reborn_countdown_request",null),i.Set(27018,"sc_king_report_request",null),i.Set(24004,"sc_king_status_change_request",null),i.Set(24011,"sc_king_transform_change_request",null),i.Set(24015,"sc_king_update_city_request",null),i.Set(3506,"sc_ladder_buy_count_request",null),i.Set(3501,"sc_ladder_info_request",null),i.Set(3502,"sc_ladder_player_back_request",null),i.Set(3505,"sc_ladder_rank_list_request",null),i.Set(3503,"sc_ladder_result_request",null),i.Set(3507,"sc_ladder_winner_info_request",null),i.Set(3508,"sc_ladder_winner_records_request",null),i.Set(2701,"sc_luck_info_request",null),i.Set(2702,"sc_luck_ret_request",null),i.Set(905,"sc_mail_add_info_request",null),i.Set(903,"sc_mail_delete_request",null),i.Set(902,"sc_mail_detailed_info_request",null),i.Set(901,"sc_mail_init_info_request",null),i.Set(904,"sc_mail_update_info_request",null),i.Set(23001,"sc_map_enter_request",null),i.Set(23035,"sc_map_maincity_info_request",null),i.Set(23002,"sc_map_other_enter_request",null),i.Set(23005,"sc_map_other_fly_request",null),i.Set(23003,"sc_map_other_leave_request",null),i.Set(23004,"sc_map_other_move_request",null),i.Set(23006,"sc_map_player_status_request",null),i.Set(23007,"sc_map_player_update_request",null),i.Set(8105,"sc_marry_answer_request",null),i.Set(8103,"sc_marry_asked_request",null),i.Set(8111,"sc_marry_divorce_bro_request",null),i.Set(8108,"sc_marry_flower_bro_request",null),i.Set(8102,"sc_marry_friends_request",null),i.Set(8113,"sc_marry_house_partner_up_request",null),i.Set(8101,"sc_marry_info_request",null),i.Set(8106,"sc_marry_invitation_request",null),i.Set(8109,"sc_marry_login_tip_request",null),i.Set(8112,"sc_marry_love_info_request",null),i.Set(8114,"sc_marry_new_request",null),i.Set(8107,"sc_marry_recv_flower_request",null),i.Set(8104,"sc_marry_remove_asked_request",null),i.Set(8110,"sc_marry_token_status_request",null),i.Set(3704,"sc_money_recharge_gift_info_request",null),i.Set(3701,"sc_money_tree_info_request",null),i.Set(3702,"sc_money_tree_play_info_request",null),i.Set(3703,"sc_money_tree_reward_info_request",null),i.Set(139,"sc_other_equip_request",null),i.Set(138,"sc_other_item_request",null),i.Set(140,"sc_other_xianlv_request",null),i.Set(16001,"sc_panacea_update_request",null),i.Set(621,"sc_pet_catch_request",null),i.Set(622,"sc_pet_catch_result_request",null),i.Set(601,"sc_pet_init_request",null),i.Set(606,"sc_pet_update_request",null),i.Set(6501,"sc_position_info_request",null),i.Set(12011,"sc_public_boss_base_list_request",null),i.Set(12010,"sc_public_boss_challenge_fail_request",null),i.Set(12030,"sc_public_boss_record_attack_request",null),i.Set(12031,"sc_public_boss_record_kill_request",null),i.Set(12021,"sc_public_boss_update_attack_request",null),i.Set(12020,"sc_public_boss_update_challenge_request",null),i.Set(12012,"sc_public_boss_update_one_request",null),i.Set(3705,"sc_qdday_reward_info_request",null),i.Set(22101,"sc_qualifyingMgr_info_res_request",null),i.Set(22102,"sc_qualifyingMgr_map_info_res_request",null),i.Set(22103,"sc_qualifyingMgr_war_info_request",null),i.Set(214,"sc_raid_boss_box_num_request",null),i.Set(203,"sc_raid_chapter_boss_result_request",null),i.Set(209,"sc_raid_chapter_collaborate_request",null),i.Set(201,"sc_raid_chapter_init_info_request",null),i.Set(207,"sc_raid_chapter_mondata_request",null),i.Set(212,"sc_raid_chapter_offline_reward_request",null),i.Set(205,"sc_raid_chapter_reward_request",null),i.Set(202,"sc_raid_chapter_wave_data_request",null),i.Set(206,"sc_raid_chapter_world_reward_request",null),i.Set(210,"sc_raid_info_init_request",null),i.Set(218,"sc_raid_material_info_init_request",null),i.Set(220,"sc_raid_material_result_request",null),i.Set(219,"sc_raid_material_update_info_request",null),i.Set(216,"sc_raid_myboss_top_request",null),i.Set(215,"sc_raid_reborn_cd_request",null),i.Set(204,"sc_raid_role_all_die_request",null),i.Set(221,"sc_raid_sweep_reward_request",null),i.Set(213,"sc_raid_time_request",null),i.Set(211,"sc_raid_update_info_request",null),i.Set(1901,"sc_rank_data_request",null),i.Set(134,"sc_rank_worship_request",null),i.Set(1904,"sc_rank_worship_all_count_ret_request",null),i.Set(1902,"sc_rank_worship_data_request",null),i.Set(1903,"sc_rank_worship_success_request",null),i.Set(2805,"sc_ratio_change_request",null),i.Set(133,"sc_recharge_count_request",null),i.Set(1806,"sc_recharge_dailyrechare_request",null),i.Set(1801,"sc_recharge_double_request",null),i.Set(1802,"sc_recharge_first_info_request",null),i.Set(6401,"sc_rechargew_shit_request",null),i.Set(6404,"sc_rechargew_shitclose_request",null),i.Set(6403,"sc_rechargew_shitindex_request",null),i.Set(6405,"sc_rechargew_shitinit_request",null),i.Set(6402,"sc_rechargew_shitstep_request",null),i.Set(126,"sc_record_add_request",null),i.Set(125,"sc_record_datas_request",null),i.Set(135,"sc_rename_count_request",null),i.Set(122,"sc_rename_result_request",null),i.Set(3e3,"sc_rolefly_init_request",null),i.Set(3001,"sc_rolefly_update_data_request",null),i.Set(1701,"sc_shop_buy_request",null),i.Set(1716,"sc_shop_buy_unlockdata_request",null),i.Set(1710,"sc_shop_buy_update_request",null),i.Set(1711,"sc_shop_mystical_update_request",null),i.Set(137,"sc_show_other_pet_request",null),i.Set(116,"sc_show_other_player_request",null),i.Set(136,"sc_show_other_spellsRes_request",null),i.Set(127,"sc_show_rank_player_request",null),i.Set(305,"sc_skill_all_upgrade_result_request",null),i.Set(304,"sc_skill_upgrade_result_request",null),i.Set(5401,"sc_spellsRes_info_request",null),i.Set(18001,"sc_task_info_request",null),i.Set(18002,"sc_task_update_request",null),i.Set(29003,"sc_teachers_graduation_request",null),i.Set(29001,"sc_teachers_info_request",null),i.Set(29004,"sc_teachers_message_add_request",null),i.Set(29002,"sc_teachers_update_request",null),i.Set(17001,"sc_team_info_request",null),i.Set(17002,"sc_team_list_request",null),i.Set(17003,"sc_team_one_request",null),i.Set(5001,"sc_template_init_data_request",null),i.Set(5002,"sc_template_update_data_request",null),i.Set(5301,"sc_tiannv_equip_request",null),i.Set(5303,"sc_tiannv_wash_replace_res_request",null),i.Set(5302,"sc_tiannv_wash_res_request",null),i.Set(5501,"sc_tianshen_info_request",null),i.Set(5502,"sc_tianshen_spells_info_request",null),i.Set(6201,"sc_totems_info_request",null),i.Set(15001,"sc_vein_update_request",null),i.Set(21001,"sc_vip_update_data_request",null),i.Set(6002,"sc_vipboss_base_list_request",null),i.Set(6003,"sc_vipboss_update_one_request",null),i.Set(131,"sc_welcome_request",null),i.Set(31006,"sc_welfare_bonus_add_request",null),i.Set(31050,"sc_welfare_info_request",null),i.Set(31011,"sc_welfare_login_gift_info_request",null),i.Set(31001,"sc_welfare_signin_info_request",null),i.Set(5103,"sc_wing_equip_request",null),i.Set(5101,"sc_wing_upgrade_level_request",null),i.Set(5102,"sc_wing_upgrade_skill_request",null),i.Set(801,"sc_xianjun_init_request",null),i.Set(701,"sc_xianlv_init_request",null),i.Set(117,"show_server_tip_request",null),i.Set(112,"stop_move_entity_request",null),i.Set(108,"sub_role_att_change_request",null),i.Set(102,"sub_roles_request",null),i.Set(113,"sync_entity_pos_request",null),t}return __extends(t,e),t.sc_actor_base=101,t.sub_roles=102,t.gold_change=106,t.exp_change=107,t.sub_role_att_change=108,t.blood_update=109,t.remove_entity=110,t.move_entity=111,t.stop_move_entity=112,t.sync_entity_pos=113,t.entity_mp_update=114,t.sc_show_other_player=116,t.show_server_tip=117,t.first_register=118,t.actor_die_notice=120,t.player_guild_change=121,t.sc_rename_result=122,t.sc_record_datas=125,t.sc_record_add=126,t.sc_show_rank_player=127,t.sc_cross_team_reward_count=130,t.sc_welcome=131,t.sc_accu_login=132,t.sc_recharge_count=133,t.sc_rank_worship=134,t.sc_rename_count=135,t.sc_show_other_spellsRes=136,t.sc_show_other_pet=137,t.sc_other_item=138,t.sc_other_equip=139,t.sc_other_xianlv=140,t.sc_raid_chapter_init_info=201,t.sc_raid_chapter_wave_data=202,t.sc_raid_chapter_boss_result=203,t.sc_raid_role_all_die=204,t.sc_raid_chapter_reward=205,t.sc_raid_chapter_world_reward=206,t.sc_raid_chapter_mondata=207,t.sc_raid_chapter_collaborate=209,t.sc_raid_info_init=210,t.sc_raid_update_info=211,t.sc_raid_chapter_offline_reward=212,t.sc_raid_time=213,t.sc_raid_boss_box_num=214,t.sc_raid_reborn_cd=215,t.sc_raid_myboss_top=216,t.sc_raid_material_info_init=218,t.sc_raid_material_update_info=219,t.sc_raid_material_result=220,t.sc_raid_sweep_reward=221,t.sc_skill_upgrade_result=304,t.sc_skill_all_upgrade_result=305,t.sc_bag_init_data=401,t.sc_bag_deal_valumn_add=402,t.sc_bag_deal_delete_item=403,t.sc_bag_deal_add_item=404,t.sc_bag_update_item_data=405,t.sc_bag_user_item_back=406,t.sc_bag_get_treasure_equip=408,t.sc_bag_deal_smelt_result=409,t.sc_bag_deal_recycle_result=410,t.sc_equip_update_data=501,t.sc_equip_update_suitlv=505,t.sc_equip_forge=511,t.sc_pet_init=601,t.sc_pet_update=606,t.sc_pet_catch=621,t.sc_pet_catch_result=622,t.sc_xianlv_init=701,t.sc_xianjun_init=801,t.sc_mail_init_info=901,t.sc_mail_detailed_info=902,t.sc_mail_delete=903,t.sc_mail_update_info=904,t.sc_mail_add_info=905,t.sc_shop_buy=1701,t.sc_shop_buy_update=1710,t.sc_shop_mystical_update=1711,t.sc_shop_buy_unlockdata=1716,t.sc_recharge_double=1801,t.sc_recharge_first_info=1802,t.sc_recharge_dailyrechare=1806,t.sc_rank_data=1901,t.sc_rank_worship_data=1902,t.sc_rank_worship_success=1903,t.sc_rank_worship_all_count_ret=1904,t.sc_kfboss_info=2101,t.sc_kfboss_update_info=2102,t.sc_kfboss_box_all=2103,t.sc_kfboss_box_one=2104,t.sc_kfboss_player_dead=2105,t.sc_kfboss_rank_now=2106,t.sc_kfboss_rewards=2107,t.sc_kfboss_rank_last=2108,t.sc_kfboss_collect_now=2109,t.sc_kfboss_collect_all=2110,t.sc_kfboss_report=2111,t.sc_cashCow_info=2201,t.sc_activity_init_info=2601,t.sc_activity_reward_result=2602,t.sc_activity_dabiao_info=2603,t.sc_activity_dabiao_reward=2604,t.sc_activity_update_info=2606,t.sc_activity_race_history=2607,t.sc_activity_close_cross=2608,t.sc_activity_luckwheel_ret=2609,t.sc_luck_info=2701,t.sc_luck_ret=2702,t.sc_auction_select=2801,t.sc_auction_list=2802,t.sc_auction_record=2803,t.sc_auction_update=2804,t.sc_ratio_change=2805,t.sc_aution_notice=2806,t.sc_rolefly_init=3e3,t.sc_rolefly_update_data=3001,t.sc_chat_new_msg=3101,t.sc_chat_init_msg=3102,t.sc_chat_is_send_success=3103,t.sc_chat_private_new_msg=3131,t.sc_chat_private_init_msg=3132,t.sc_chat_filte_list=3133,t.sc_ladder_info=3501,t.sc_ladder_player_back=3502,t.sc_ladder_result=3503,t.sc_ladder_rank_list=3505,t.sc_ladder_buy_count=3506,t.sc_ladder_winner_info=3507,t.sc_ladder_winner_records=3508,t.sc_money_tree_info=3701,t.sc_money_tree_play_info=3702,t.sc_money_tree_reward_info=3703,t.sc_money_recharge_gift_info=3704,t.sc_qdday_reward_info=3705,t.sc_guild_info=3801,t.sc_guild_members=3802,t.sc_guild_list=3803,t.sc_guild_create_ret=3804,t.sc_guild_join_info=3806,t.sc_guild_apply=3807,t.sc_guild_notice_apply=3808,t.sc_guild_change_office_ret=3809,t.sc_guild_kick_ret=3811,t.sc_guild_fund=3813,t.sc_guild_change_notice_ret=3814,t.sc_guild_record_add=3821,t.sc_guild_record_data=3822,t.sc_guild_playerinfo=3825,t.sc_guild_autoadd_ret=3828,t.sc_guild_rename=3829,t.sc_guild_rename_ret=3830,t.sc_guild_apply_list=3831,t.sc_guild_donate_ret=3841,t.sc_guild_donate_info=3842,t.sc_guild_peach_info=3846,t.sc_guild_peach_record=3847,t.sc_guild_peach_record_add=3848,t.sc_guild_protector_info=3851,t.sc_guild_protector_task_info=3852,t.sc_guild_skill_info=3856,t.sc_guild_skill_learn_ret=3857,t.sc_guild_map_reward=3861,t.sc_guild_map_one_update=3862,t.sc_guild_boss_info=3863,t.sc_guild_robot_datas=3864,t.sc_template_init_data=5001,t.sc_template_update_data=5002,t.sc_wing_upgrade_level=5101,t.sc_wing_upgrade_skill=5102,t.sc_wing_equip=5103,t.sc_fuben_material_info=5201,t.sc_fuben_treasuremap_info=5202,t.sc_fuben_treasuremap_star_reward=5203,t.sc_fuben_wildgeeseFb_info=5204,t.sc_fuben_heavenFb_info=5205,t.sc_fuben_heavenFb_reward=5206,t.sc_tiannv_equip=5301,t.sc_tiannv_wash_res=5302,t.sc_tiannv_wash_replace_res=5303,t.sc_spellsRes_info=5401,t.sc_tianshen_info=5501,t.sc_tianshen_spells_info=5502,t.sc_formation_info=5601,t.sc_dailyTask_info=5701,t.sc_dailyTask_update=5702,t.sc_answer_info=5801,t.sc_answer_update=5802,t.sc_answer_reward=5803,t.sc_answer_rank_res=5804,t.sc_advanced_info=5901,t.sc_advanced_update=5902,t.sc_advanced_rank=5903,t.sc_vipboss_base_list=6002,t.sc_vipboss_update_one=6003,t.sc_holy_pet_info=6101,t.sc_totems_info=6201,t.sc_enhance_info=6301,t.sc_enhance_add_info=6302,t.sc_rechargew_shit=6401,t.sc_rechargew_shitstep=6402,t.sc_rechargew_shitindex=6403,t.sc_rechargew_shitclose=6404,t.sc_rechargew_shitinit=6405,t.sc_position_info=6501,t.sc_battle_action=7e3,t.sc_battle_entitys=7001,t.sc_battle_record=7002,t.sc_battle_manual=7003,t.sc_battle_set_auto=7004,t.sc_base_game_time=7656,t.sc_base_open_day=7657,t.sc_base_replace_account=7658,t.sc_error_code=7659,t.sc_brother_info=8001,t.sc_marry_info=8101,t.sc_marry_friends=8102,t.sc_marry_asked=8103,t.sc_marry_remove_asked=8104,t.sc_marry_answer=8105,t.sc_marry_invitation=8106,t.sc_marry_recv_flower=8107,t.sc_marry_flower_bro=8108,t.sc_marry_login_tip=8109,t.sc_marry_token_status=8110,t.sc_marry_divorce_bro=8111,t.sc_marry_love_info=8112,t.sc_marry_house_partner_up=8113,t.sc_marry_new=8114,t.sc_baby_init=8201,t.sc_baby_star_init=8202,t.sc_field_boss_base_list=11002,t.sc_field_boss_update_one=11003,t.sc_public_boss_challenge_fail=12010,t.sc_public_boss_base_list=12011,t.sc_public_boss_update_one=12012,t.sc_public_boss_update_challenge=12020,t.sc_public_boss_update_attack=12021,t.sc_public_boss_record_attack=12030,t.sc_public_boss_record_kill=12031,t.sc_arena_pk_result=13001,t.sc_effect_title_update=14001,t.sc_effect_skin_update=14011,t.sc_vein_update=15001,t.sc_panacea_update=16001,t.sc_team_info=17001,t.sc_team_list=17002,t.sc_team_one=17003,t.sc_task_info=18001,t.sc_task_update=18002,t.sc_escort_info_update=20001,t.sc_escort_reward_show=20007,t.sc_escort_record_data=20030,t.sc_escort_record_update=20031,t.sc_vip_update_data=21001,t.sc_activity_info_res=22001,t.sc_activity_msg=22002,t.sc_activity_hall=22003,t.sc_qualifyingMgr_info_res=22101,t.sc_qualifyingMgr_map_info_res=22102,t.sc_qualifyingMgr_war_info=22103,t.sc_map_enter=23001,t.sc_map_other_enter=23002,t.sc_map_other_leave=23003,t.sc_map_other_move=23004,t.sc_map_other_fly=23005,t.sc_map_player_status=23006,t.sc_map_player_update=23007,t.sc_map_maincity_info=23035,t.sc_king_info=24001,t.sc_king_city_data=24002,t.sc_king_begin_act=24003,t.sc_king_status_change=24004,t.sc_king_fighting_change=24005,t.sc_king_player_enter=24006,t.sc_king_player_leave=24007,t.sc_king_point_info=24008,t.sc_king_point_data=24009,t.sc_king_city_occupy=24010,t.sc_king_transform_change=24011,t.sc_king_attack_result=24012,t.sc_king_pk_result=24013,t.sc_king_reborn_countdown=24014,t.sc_king_update_city=24015,t.sc_king_my_guard_city=24016,t.sc_king_info_update=24017,t.sc_guildmine_mine_info=25001,t.sc_guildmine_mine_one_info=25002,t.sc_guildmine_mine_mystatus=25003,t.sc_guildmine_score_rank_day=25016,t.sc_guildmine_rob_info=25021,t.sc_climb_all_rank=26001,t.sc_climb_info=26002,t.sc_climb_curr_rank=26003,t.sc_climb_refresh_mon=26004,t.sc_climb_score_info=26005,t.sc_climb_fighting_change=26006,t.sc_climb_king=26007,t.sc_climb_report=26008,t.sc_guildwar_player_info=27001,t.sc_guildwar_guild_info=27002,t.sc_guildwar_guild_rank=27003,t.sc_guildwar_player_rank=27004,t.sc_guildwar_barrier_info=27005,t.sc_guildwar_boss_info=27006,t.sc_guildwar_guard_info=27007,t.sc_guildwar_four_king_info=27008,t.sc_guildwar_player_global_info=27009,t.sc_guildwar_myguild_global_info=27010,t.sc_king_report=27018,t.sc_guildwar_all_guild_rank_info=27030,t.sc_guildwar_all_player_rank_info=27031,t.sc_guildwar_enter_dragon_guild=27035,t.sc_guildwar_ultimate_attack=27036,t.sc_guildwar_enter_war_guild=27041,t.sc_guildwar_report=27042,t.sc_fuben_eightyOneHard_info=28001,t.sc_fuben_eightyOneHard_info_update=28002,t.sc_teachers_info=29001,t.sc_teachers_update=29002,t.sc_teachers_graduation=29003,t.sc_teachers_message_add=29004,t.sc_friend_follow_data=30001,t.sc_friend_follow_update=30002,t.sc_friend_funs_data=30006,t.sc_friend_funs_update=30007,t.sc_friend_funs_remove=30008,t.sc_friend_black_list=30011,t.sc_friend_blacklist_update=30012,t.sc_friend_gift_receive_info=30016,t.sc_friend_follow_nominate_list=30021,t.sc_welfare_signin_info=31001,t.sc_welfare_bonus_add=31006,t.sc_welfare_login_gift_info=31011,t.sc_welfare_info=31050,t.sc_guildboss_info=32001,t.sc_guildboss_update_info=32002,t.sc_guildboss_box_all=32003,t.sc_guildboss_box_one=32004,t.sc_guildboss_player_dead=32005,t.sc_guildboss_rank_now=32006,t.sc_guildboss_rewards=32007,t.sc_guildboss_rank_last=32008,t.sc_guildboss_collect_now=32009,t.sc_guildboss_collect_all=32010,t
}(Sproto.ProtocolBase);__reflect(S2cProtocol.prototype,"S2cProtocol");var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shopType=e.ri();break;case 1:t.index=e.ri();break;case 2:t.buynum=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.shopType&&o.wi(t.shopType,0),void 0!=t.index&&o.wi(t.index,1),void 0!=t.buynum&&o.wi(t.buynum,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;case 1:t.buynum=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.index&&o.wi(t.index,0),void 0!=t.buynum&&o.wi(t.buynum,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_shop_buy_request=p,__reflect(p.prototype,"Sproto.cs_shop_buy_request"),e.ALL_DICT.cs_shop_buy_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_shop_mystical_buy_request=h,__reflect(h.prototype,"Sproto.cs_shop_mystical_buy_request"),e.ALL_DICT.cs_shop_mystical_buy_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_shop_mystical_buy_response=d,__reflect(d.prototype,"Sproto.cs_shop_mystical_buy_response"),e.ALL_DICT.cs_shop_mystical_buy_response={en:r,de:a};var _=function(){function e(){}return e}();e.cs_shop_mystical_refresh_request=_,__reflect(_.prototype,"Sproto.cs_shop_mystical_refresh_request"),e.ALL_DICT.cs_shop_mystical_refresh_request={en:l,de:s};var f=function(){function e(){}return e}();e.cs_shop_mystical_refresh_response=f,__reflect(f.prototype,"Sproto.cs_shop_mystical_refresh_response"),e.ALL_DICT.cs_shop_mystical_refresh_response={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.buycount=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.buycount&&o.wi(t.buycount,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shopType=e.ri();break;case 1:t.index=e.ri();break;case 2:t.count=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.shopType&&o.wi(t.shopType,0),void 0!=t.index&&o.wi(t.index,1),void 0!=t.count&&o.wi(t.count,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.records=e.roa("shop_unlock_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.records&&o.woa("shop_unlock_data",t.records,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.shopdatas=e.roa("shop_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.shopdatas&&o.woa("shop_data",t.shopdatas,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.datas=e.roa("mystical_shop_data");break;case 1:t.refreshcount=e.ri();break;case 2:t.refreshtime=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.datas&&o.woa("mystical_shop_data",t.datas,0),void 0!=t.refreshcount&&o.wi(t.refreshcount,1),void 0!=t.refreshtime&&o.wi(t.refreshtime,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.value=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.value&&o.wi(t.value,1),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.mystical_shop_data=d,__reflect(d.prototype,"Sproto.mystical_shop_data"),e.ALL_DICT.mystical_shop_data={en:i,de:t};var _=function(){function e(){}return e}();e.sc_shop_buy_request=_,__reflect(_.prototype,"Sproto.sc_shop_buy_request"),e.ALL_DICT.sc_shop_buy_request={en:n,de:o};var f=function(){function e(){}return e}();e.sc_shop_buy_unlockdata_request=f,__reflect(f.prototype,"Sproto.sc_shop_buy_unlockdata_request"),e.ALL_DICT.sc_shop_buy_unlockdata_request={en:r,de:a};var m=function(){function e(){}return e}();e.sc_shop_buy_update_request=m,__reflect(m.prototype,"Sproto.sc_shop_buy_update_request"),e.ALL_DICT.sc_shop_buy_update_request={en:l,de:s};var g=function(){function e(){}return e}();e.sc_shop_mystical_update_request=g,__reflect(g.prototype,"Sproto.sc_shop_mystical_update_request"),e.ALL_DICT.sc_shop_mystical_update_request={en:u,de:c};var v=function(){function e(){}return e}();e.shop_unlock_data=v,__reflect(v.prototype,"Sproto.shop_unlock_data"),e.ALL_DICT.shop_unlock_data={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skills=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.skills&&o.wia(t.skills,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skillID=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.skillID&&o.wi(t.skillID,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.cs_skill_sort_release_request=s,__reflect(s.prototype,"Sproto.cs_skill_sort_release_request"),e.ALL_DICT.cs_skill_sort_release_request={en:i,de:t};var l=function(){function e(){}return e}();e.cs_skill_upgrade_request=l,__reflect(l.prototype,"Sproto.cs_skill_upgrade_request"),e.ALL_DICT.cs_skill_upgrade_request={en:n,de:o};var c=function(){function e(){}return e}();e.cs_skill_upgrade_all_request=c,__reflect(c.prototype,"Sproto.cs_skill_upgrade_all_request"),e.ALL_DICT.cs_skill_upgrade_all_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.level&&o.wia(t.level,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skillID=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.skillID&&o.wi(t.skillID,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_skill_all_upgrade_result_request=a,__reflect(a.prototype,"Sproto.sc_skill_all_upgrade_result_request"),e.ALL_DICT.sc_skill_all_upgrade_result_request={en:i,de:t};var r=function(){function e(){}return e}();e.sc_skill_upgrade_result_request=r,__reflect(r.prototype,"Sproto.sc_skill_upgrade_result_request"),e.ALL_DICT.sc_skill_upgrade_result_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lock=e.ri();break;case 1:t.spellsId=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.lock&&o.wi(t.lock,0),void 0!=t.spellsId&&o.wi(t.spellsId,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.spellsId=e.ri();break;case 2:t.lock=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.spellsId&&o.wi(t.spellsId,1),void 0!=t.lock&&o.wi(t.lock,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.makeType=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.makeType&&o.wi(t.makeType,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.spellsId=e.ri();break;case 2:t.spellsNo=e.ri();break;case 3:t.num=e.ri();break;case 4:t.perfectNum=e.ri();break;case 5:t.skillList=e.ria();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.spellsId&&o.wi(t.spellsId,1),void 0!=t.spellsNo&&o.wi(t.spellsNo,2),void 0!=t.num&&o.wi(t.num,3),void 0!=t.perfectNum&&o.wi(t.perfectNum,4),void 0!=t.skillList&&o.wia(t.skillList,5),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.spellsIdList=e.ria();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.spellsIdList&&o.wia(t.spellsIdList,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.spellsIdList=e.ria();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.spellsIdList&&o.wia(t.spellsIdList,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.pos=e.ri();break;case 2:t.lv=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.lv&&o.wi(t.lv,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.spellsId=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.spellsId&&o.wi(t.spellsId,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.pos=e.ri();break;case 2:t.useSpellsNo=e.ri();break;case 3:t.spellsId=e.ri();break;case 4:t.spellsNo=e.ri();break;case 5:t.useSkillList=e.ria();break;case 6:t.oldSkillList=e.ria();break;case 7:t.lock=e.ri();break;case 8:t.num=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,9);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.useSpellsNo&&o.wi(t.useSpellsNo,2),void 0!=t.spellsId&&o.wi(t.spellsId,3),void 0!=t.spellsNo&&o.wi(t.spellsNo,4),void 0!=t.useSkillList&&o.wia(t.useSkillList,5),void 0!=t.oldSkillList&&o.wia(t.oldSkillList,6),void 0!=t.lock&&o.wi(t.lock,7),void 0!=t.num&&o.wi(t.num,8),e.SprotoCore.CloseSerialize(o)}var b=function(){function e(){}return e}();e.cs_spellsRes_lock_request=b,__reflect(b.prototype,"Sproto.cs_spellsRes_lock_request"),e.ALL_DICT.cs_spellsRes_lock_request={en:i,de:t};var S=function(){function e(){}return e}();e.cs_spellsRes_lock_response=S,__reflect(S.prototype,"Sproto.cs_spellsRes_lock_response"),e.ALL_DICT.cs_spellsRes_lock_response={en:n,de:o};var G=function(){function e(){}return e}();e.cs_spellsRes_make_request=G,__reflect(G.prototype,"Sproto.cs_spellsRes_make_request"),e.ALL_DICT.cs_spellsRes_make_request={en:r,de:a};var T=function(){function e(){}return e}();e.cs_spellsRes_make_response=T,__reflect(T.prototype,"Sproto.cs_spellsRes_make_response"),e.ALL_DICT.cs_spellsRes_make_response={en:l,de:s};var I=function(){function e(){}return e}();e.cs_spellsRes_smelt_request=I,__reflect(I.prototype,"Sproto.cs_spellsRes_smelt_request"),e.ALL_DICT.cs_spellsRes_smelt_request={en:u,de:c};var w=function(){function e(){}return e}();e.cs_spellsRes_smelt_response=w,__reflect(w.prototype,"Sproto.cs_spellsRes_smelt_response"),e.ALL_DICT.cs_spellsRes_smelt_response={en:h,de:p};var A=function(){function e(){}return e}();e.cs_spellsRes_up_lv_request=A,__reflect(A.prototype,"Sproto.cs_spellsRes_up_lv_request"),e.ALL_DICT.cs_spellsRes_up_lv_request={en:_,de:d};var k=function(){function e(){}return e}();e.cs_spellsRes_up_lv_response=k,__reflect(k.prototype,"Sproto.cs_spellsRes_up_lv_response"),e.ALL_DICT.cs_spellsRes_up_lv_response={en:m,de:f};var E=function(){function e(){}return e}();e.cs_spellsRes_use_request=E,__reflect(E.prototype,"Sproto.cs_spellsRes_use_request"),e.ALL_DICT.cs_spellsRes_use_request={en:v,de:g};var M=function(){function e(){}return e}();e.cs_spellsRes_use_response=M,__reflect(M.prototype,"Sproto.cs_spellsRes_use_response"),e.ALL_DICT.cs_spellsRes_use_response={en:C,de:y}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.useSpells=e.roa("spellsAttr");break;case 1:t.spellsList=e.roa("spellsData");break;case 2:t.num=e.ri();break;case 3:t.perfectNum=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.useSpells&&o.woa("spellsAttr",t.useSpells,0),void 0!=t.spellsList&&o.woa("spellsData",t.spellsList,1),void 0!=t.num&&o.wi(t.num,2),void 0!=t.perfectNum&&o.wi(t.perfectNum,3),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.spellsNo=e.ri();break;case 1:t.lv=e.ri();break;case 2:t.skillList=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.spellsNo&&o.wi(t.spellsNo,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.skillList&&o.wia(t.skillList,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.spellsId=e.ri();break;case 1:t.spellsNo=e.ri();break;case 2:t.lock=e.ri();break;case 3:t.skillList=e.ria();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.spellsId&&o.wi(t.spellsId,0),void 0!=t.spellsNo&&o.wi(t.spellsNo,1),void 0!=t.lock&&o.wi(t.lock,2),void 0!=t.skillList&&o.wia(t.skillList,3),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.sc_spellsRes_info_request=s,__reflect(s.prototype,"Sproto.sc_spellsRes_info_request"),e.ALL_DICT.sc_spellsRes_info_request={en:i,de:t};var l=function(){function e(){}return e}();e.spellsAttr=l,__reflect(l.prototype,"Sproto.spellsAttr"),e.ALL_DICT.spellsAttr={en:n,de:o};var c=function(){function e(){}return e}();e.spellsData=c,__reflect(c.prototype,"Sproto.spellsData"),e.ALL_DICT.spellsData={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.type&&o.wi(t.type,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_task_info_request=a,__reflect(a.prototype,"Sproto.cs_task_info_request"),e.ALL_DICT.cs_task_info_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_task_reward_request=r,__reflect(r.prototype,"Sproto.cs_task_reward_request"),e.ALL_DICT.cs_task_reward_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.tasks=e.roa("task_data");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.tasks&&o.woa("task_data",t.tasks,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.data=e.ro("task_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.data&&o.wo("task_data",t.data,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.status=e.ri();break;case 2:t.progress=e.ro("task_progress_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.status&&o.wi(t.status,1),void 0!=t.progress&&o.wo("task_progress_data",t.progress,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.value=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.value&&o.wi(t.value,0),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.sc_task_info_request=c,__reflect(c.prototype,"Sproto.sc_task_info_request"),e.ALL_DICT.sc_task_info_request={en:i,de:t};var u=function(){function e(){}return e}();e.sc_task_update_request=u,__reflect(u.prototype,"Sproto.sc_task_update_request"),e.ALL_DICT.sc_task_update_request={en:n,de:o};var p=function(){function e(){}return e}();e.task_data=p,__reflect(p.prototype,"Sproto.task_data"),e.ALL_DICT.task_data={en:r,de:a};var h=function(){function e(){}return e}();e.task_progress_data=h,__reflect(h.prototype,"Sproto.task_progress_data"),e.ALL_DICT.task_progress_data={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.tDbid=e.ri();break;case 1:t.res=e.rb();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.tDbid&&o.wi(t.tDbid,0),void 0!=t.res&&o.wb(t.res,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.sDbid=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.sDbid&&o.wi(t.sDbid,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.act=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.act&&o.wi(t.act,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.rewards=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.rewards&&o.wi(t.rewards,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("teachers_student_data");break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.woa("teachers_student_data",t.data,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.typ=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.typ&&o.wi(t.typ,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.lv=e.ri();break;case 3:t.tag=e.rb();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.tag&&o.wb(t.tag,3),e.SprotoCore.CloseSerialize(o)}var A=function(){function e(){}return e}();e.cs_teachers_apply_confirm_request=A,__reflect(A.prototype,"Sproto.cs_teachers_apply_confirm_request"),e.ALL_DICT.cs_teachers_apply_confirm_request={en:i,de:t};var k=function(){function e(){}return e}();e.cs_teachers_apply_teacher_request=k,__reflect(k.prototype,"Sproto.cs_teachers_apply_teacher_request"),e.ALL_DICT.cs_teachers_apply_teacher_request={en:n,de:o};var E=function(){function e(){}return e}();e.cs_teachers_apply_teacher_response=E,__reflect(E.prototype,"Sproto.cs_teachers_apply_teacher_response"),e.ALL_DICT.cs_teachers_apply_teacher_response={en:r,de:a};var M=function(){function e(){}return e}();e.cs_teachers_force_get_reward_request=M,__reflect(M.prototype,"Sproto.cs_teachers_force_get_reward_request"),e.ALL_DICT.cs_teachers_force_get_reward_request={en:l,de:s};var D=function(){function e(){}return e}();e.cs_teachers_force_get_reward_response=D,__reflect(D.prototype,"Sproto.cs_teachers_force_get_reward_response"),e.ALL_DICT.cs_teachers_force_get_reward_response={en:u,de:c};var P=function(){function e(){}return e}();e.cs_teachers_get_exp_request=P,__reflect(P.prototype,"Sproto.cs_teachers_get_exp_request"),e.ALL_DICT.cs_teachers_get_exp_request={en:h,de:p};var L=function(){function e(){}return e}();e.cs_teachers_get_message_request=L,__reflect(L.prototype,"Sproto.cs_teachers_get_message_request"),e.ALL_DICT.cs_teachers_get_message_request={en:_,de:d};var R=function(){function e(){}return e}();e.cs_teachers_get_message_response=R,__reflect(R.prototype,"Sproto.cs_teachers_get_message_response"),e.ALL_DICT.cs_teachers_get_message_response={en:m,de:f};var x=function(){function e(){}return e}();e.cs_teachers_graduation_request=x,__reflect(x.prototype,"Sproto.cs_teachers_graduation_request"),e.ALL_DICT.cs_teachers_graduation_request={en:v,de:g};var B=function(){function e(){}return e}();e.cs_teachers_message_request=B,__reflect(B.prototype,"Sproto.cs_teachers_message_request"),e.ALL_DICT.cs_teachers_message_request={en:C,de:y};var U=function(){function e(){}return e}();e.cs_teachers_message_response=U,__reflect(U.prototype,"Sproto.cs_teachers_message_response"),e.ALL_DICT.cs_teachers_message_response={en:S,de:b};var N=function(){function e(){}return e}();e.cs_teachers_teach_exp_request=N,__reflect(N.prototype,"Sproto.cs_teachers_teach_exp_request"),e.ALL_DICT.cs_teachers_teach_exp_request={en:T,de:G};var O=function(){function e(){}return e}();e.teachers_student_data=O,__reflect(O.prototype,"Sproto.teachers_student_data"),e.ALL_DICT.teachers_student_data={en:w,de:I}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.teacherData=e.ro("teachers_data");break;case 1:t.studentData=e.roa("teachers_data");break;case 2:t.messageData=e.roa("teachers_info");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.teacherData&&o.wo("teachers_data",t.teacherData,0),void 0!=t.studentData&&o.woa("teachers_data",t.studentData,1),void 0!=t.messageData&&o.woa("teachers_info",t.messageData,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.lv=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.lv&&o.wi(t.lv,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.teacherData=e.ro("teachers_data");break;case 1:t.studentData=e.ro("teachers_data");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.teacherData&&o.wo("teachers_data",t.teacherData,0),void 0!=t.studentData&&o.wo("teachers_data",t.studentData,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.actNo=e.ri();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.actNo&&o.wi(t.actNo,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.teacher=e.ri();break;case 2:t.tName=e.rs();break;case 3:t.tLv=e.ri();break;case 4:t.tShows=e.ro("entity_shows");break;case 5:t.student=e.ri();break;case 6:t.sName=e.rs();break;case 7:t.sLv=e.ri();break;case 8:t.sShows=e.ro("entity_shows");break;case 9:t.exp=e.ri();break;case 10:t.data=e.roa("teachers_act_data");break;case 11:t.rewards=e.ri();break;case 12:t.tLogin=e.rb();break;case 13:t.sLogin=e.rb();break;case 14:t.day=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,15);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.teacher&&o.wi(t.teacher,1),void 0!=t.tName&&o.ws(t.tName,2),void 0!=t.tLv&&o.wi(t.tLv,3),void 0!=t.tShows&&o.wo("entity_shows",t.tShows,4),void 0!=t.student&&o.wi(t.student,5),void 0!=t.sName&&o.ws(t.sName,6),void 0!=t.sLv&&o.wi(t.sLv,7),void 0!=t.sShows&&o.wo("entity_shows",t.sShows,8),void 0!=t.exp&&o.wi(t.exp,9),void 0!=t.data&&o.woa("teachers_act_data",t.data,10),void 0!=t.rewards&&o.wi(t.rewards,11),void 0!=t.tLogin&&o.wb(t.tLogin,12),void 0!=t.sLogin&&o.wb(t.sLogin,13),void 0!=t.day&&o.wi(t.day,14),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.name=e.rs();break;case 2:t.lv=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.lv&&o.wi(t.lv,2),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.sc_teachers_graduation_request=f,__reflect(f.prototype,"Sproto.sc_teachers_graduation_request"),e.ALL_DICT.sc_teachers_graduation_request={en:i,de:t};var m=function(){function e(){}return e}();e.sc_teachers_info_request=m,__reflect(m.prototype,"Sproto.sc_teachers_info_request"),e.ALL_DICT.sc_teachers_info_request={en:n,de:o};var g=function(){function e(){}return e}();e.sc_teachers_message_add_request=g,__reflect(g.prototype,"Sproto.sc_teachers_message_add_request"),e.ALL_DICT.sc_teachers_message_add_request={en:r,de:a};var v=function(){function e(){}return e}();e.sc_teachers_update_request=v,__reflect(v.prototype,"Sproto.sc_teachers_update_request"),e.ALL_DICT.sc_teachers_update_request={en:l,de:s};var y=function(){function e(){}return e}();e.teachers_act_data=y,__reflect(y.prototype,"Sproto.teachers_act_data"),e.ALL_DICT.teachers_act_data={en:u,de:c};var C=function(){function e(){}return e}();e.teachers_data=C,__reflect(C.prototype,"Sproto.teachers_data"),e.ALL_DICT.teachers_data={en:h,de:p};var b=function(){function e(){}return e}();e.teachers_info=b,__reflect(b.prototype,"Sproto.teachers_info"),e.ALL_DICT.teachers_info={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;case 2:t.needpower=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.needpower&&o.wi(t.needpower,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;case 2:t.ext=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.ext&&o.wi(t.ext,2),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;case 2:t.leaderid=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.leaderid&&o.wi(t.leaderid,2),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;case 2:t.memberid=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),void 0!=t.memberid&&o.wi(t.memberid,2),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);
return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new z,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new j,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.raidtype=e.ri();break;case 1:t.level=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.raidtype&&o.wi(t.raidtype,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new X,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}var L=function(){function e(){}return e}();e.cs_team_call_robot_request=L,__reflect(L.prototype,"Sproto.cs_team_call_robot_request"),e.ALL_DICT.cs_team_call_robot_request={en:i,de:t};var R=function(){function e(){}return e}();e.cs_team_condition_request=R,__reflect(R.prototype,"Sproto.cs_team_condition_request"),e.ALL_DICT.cs_team_condition_request={en:n,de:o};var x=function(){function e(){}return e}();e.cs_team_create_request=x,__reflect(x.prototype,"Sproto.cs_team_create_request"),e.ALL_DICT.cs_team_create_request={en:r,de:a};var B=function(){function e(){}return e}();e.cs_team_create_response=B,__reflect(B.prototype,"Sproto.cs_team_create_response"),e.ALL_DICT.cs_team_create_response={en:l,de:s};var U=function(){function e(){}return e}();e.cs_team_fight_request=U,__reflect(U.prototype,"Sproto.cs_team_fight_request"),e.ALL_DICT.cs_team_fight_request={en:u,de:c};var N=function(){function e(){}return e}();e.cs_team_fight_response=N,__reflect(N.prototype,"Sproto.cs_team_fight_response"),e.ALL_DICT.cs_team_fight_response={en:h,de:p};var O=function(){function e(){}return e}();e.cs_team_info_request=O,__reflect(O.prototype,"Sproto.cs_team_info_request"),e.ALL_DICT.cs_team_info_request={en:_,de:d};var F=function(){function e(){}return e}();e.cs_team_join_request=F,__reflect(F.prototype,"Sproto.cs_team_join_request"),e.ALL_DICT.cs_team_join_request={en:m,de:f};var V=function(){function e(){}return e}();e.cs_team_join_response=V,__reflect(V.prototype,"Sproto.cs_team_join_response"),e.ALL_DICT.cs_team_join_response={en:v,de:g};var q=function(){function e(){}return e}();e.cs_team_kick_request=q,__reflect(q.prototype,"Sproto.cs_team_kick_request"),e.ALL_DICT.cs_team_kick_request={en:C,de:y};var H=function(){function e(){}return e}();e.cs_team_kick_response=H,__reflect(H.prototype,"Sproto.cs_team_kick_response"),e.ALL_DICT.cs_team_kick_response={en:S,de:b};var Y=function(){function e(){}return e}();e.cs_team_leave_request=Y,__reflect(Y.prototype,"Sproto.cs_team_leave_request"),e.ALL_DICT.cs_team_leave_request={en:T,de:G};var W=function(){function e(){}return e}();e.cs_team_leave_response=W,__reflect(W.prototype,"Sproto.cs_team_leave_response"),e.ALL_DICT.cs_team_leave_response={en:w,de:I};var z=function(){function e(){}return e}();e.cs_team_list_request=z,__reflect(z.prototype,"Sproto.cs_team_list_request"),e.ALL_DICT.cs_team_list_request={en:k,de:A};var j=function(){function e(){}return e}();e.cs_team_quick_request=j,__reflect(j.prototype,"Sproto.cs_team_quick_request"),e.ALL_DICT.cs_team_quick_request={en:M,de:E};var X=function(){function e(){}return e}();e.cs_team_quick_response=X,__reflect(X.prototype,"Sproto.cs_team_quick_response"),e.ALL_DICT.cs_team_quick_response={en:P,de:D}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dbid=e.ri();break;case 1:t.power=e.ri();break;case 2:t.name=e.rs();break;case 3:t.level=e.ri();break;case 4:t.job=e.ri();break;case 5:t.sex=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.dbid&&o.wi(t.dbid,0),void 0!=t.power&&o.wi(t.power,1),void 0!=t.name&&o.ws(t.name,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.job&&o.wi(t.job,4),void 0!=t.sex&&o.wi(t.sex,5),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.members=e.roa("member_data");break;case 1:t.leaderid=e.ri();break;case 2:t.raidtype=e.ri();break;case 3:t.level=e.ri();break;case 4:t.needpower=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.members&&o.woa("member_data",t.members,0),void 0!=t.leaderid&&o.wi(t.leaderid,1),void 0!=t.raidtype&&o.wi(t.raidtype,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.needpower&&o.wi(t.needpower,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.teamlist=e.roa("team_data");break;case 1:t.raidtype=e.ri();break;case 2:t.level=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.teamlist&&o.woa("team_data",t.teamlist,0),void 0!=t.raidtype&&o.wi(t.raidtype,1),void 0!=t.level&&o.wi(t.level,2),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.members=e.roa("member_data");break;case 1:t.leaderid=e.ri();break;case 2:t.raidtype=e.ri();break;case 3:t.level=e.ri();break;case 4:t.needpower=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.members&&o.woa("member_data",t.members,0),void 0!=t.leaderid&&o.wi(t.leaderid,1),void 0!=t.raidtype&&o.wi(t.raidtype,2),void 0!=t.level&&o.wi(t.level,3),void 0!=t.needpower&&o.wi(t.needpower,4),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.leaderid=e.ri();break;case 1:t.count=e.ri();break;case 2:t.members=e.roa("member_data");break;case 3:t.needpower=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.leaderid&&o.wi(t.leaderid,0),void 0!=t.count&&o.wi(t.count,1),void 0!=t.members&&o.woa("member_data",t.members,2),void 0!=t.needpower&&o.wi(t.needpower,3),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.member_data=p,__reflect(p.prototype,"Sproto.member_data"),e.ALL_DICT.member_data={en:i,de:t};var h=function(){function e(){}return e}();e.sc_team_info_request=h,__reflect(h.prototype,"Sproto.sc_team_info_request"),e.ALL_DICT.sc_team_info_request={en:n,de:o};var d=function(){function e(){}return e}();e.sc_team_list_request=d,__reflect(d.prototype,"Sproto.sc_team_list_request"),e.ALL_DICT.sc_team_list_request={en:r,de:a};var _=function(){function e(){}return e}();e.sc_team_one_request=_,__reflect(_.prototype,"Sproto.sc_team_one_request"),e.ALL_DICT.sc_team_one_request={en:l,de:s};var f=function(){function e(){}return e}();e.team_data=f,__reflect(f.prototype,"Sproto.team_data"),e.ALL_DICT.team_data={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.clothesNo=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.clothesNo&&o.wi(t.clothesNo,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.clothesNo=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.clothesNo&&o.wi(t.clothesNo,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.drugNum=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.drugNum&&o.wi(t.drugNum,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.itemNo=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.itemNo&&o.wi(t.itemNo,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.no=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.no&&o.wi(t.no,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new S,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.skillNo=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.skillNo&&o.wi(t.skillNo,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.drugId=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.drugId&&o.wi(t.drugId,0),e.SprotoCore.CloseSerialize(o)}var g=function(){function e(){}return e}();e.cs_template_buy_clothes_request=g,__reflect(g.prototype,"Sproto.cs_template_buy_clothes_request"),e.ALL_DICT.cs_template_buy_clothes_request={en:i,de:t};var v=function(){function e(){}return e}();e.cs_template_clothes_request=v,__reflect(v.prototype,"Sproto.cs_template_clothes_request"),e.ALL_DICT.cs_template_clothes_request={en:n,de:o};var y=function(){function e(){}return e}();e.cs_template_drug_request=y,__reflect(y.prototype,"Sproto.cs_template_drug_request"),e.ALL_DICT.cs_template_drug_request={en:r,de:a};var C=function(){function e(){}return e}();e.cs_template_equip_request=C,__reflect(C.prototype,"Sproto.cs_template_equip_request"),e.ALL_DICT.cs_template_equip_request={en:l,de:s};var b=function(){function e(){}return e}();e.cs_template_reward_request=b,__reflect(b.prototype,"Sproto.cs_template_reward_request"),e.ALL_DICT.cs_template_reward_request={en:u,de:c};var S=function(){function e(){}return e}();e.cs_template_up_level_request=S,__reflect(S.prototype,"Sproto.cs_template_up_level_request"),e.ALL_DICT.cs_template_up_level_request={en:h,de:p};var G=function(){function e(){}return e}();e.cs_template_up_skill_request=G,__reflect(G.prototype,"Sproto.cs_template_up_skill_request"),e.ALL_DICT.cs_template_up_skill_request={en:_,de:d};var T=function(){function e(){}return e}();e.cs_template_up_stage_request=T,__reflect(T.prototype,"Sproto.cs_template_up_stage_request"),e.ALL_DICT.cs_template_up_stage_request={en:m,de:f}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.lv=e.ri();break;case 2:t.upNum=e.ri();break;case 3:t.drugNum=e.ri();break;case 4:t.useClothes=e.ri();break;case 5:t.clothesList=e.ria();break;case 6:t.skillList=e.ria();break;case 7:t.equipList=e.roa("equip_item_data");break;case 8:t.reward=e.ri();break;case 9:t.startUp=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,10);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.upNum&&o.wi(t.upNum,2),void 0!=t.drugNum&&o.wi(t.drugNum,3),void 0!=t.useClothes&&o.wi(t.useClothes,4),void 0!=t.clothesList&&o.wia(t.clothesList,5),void 0!=t.skillList&&o.wia(t.skillList,6),void 0!=t.equipList&&o.woa("equip_item_data",t.equipList,7),void 0!=t.reward&&o.wi(t.reward,8),void 0!=t.startUp&&o.wi(t.startUp,9),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.templateType=e.ri();break;case 1:t.lv=e.ri();break;case 2:t.upNum=e.ri();break;case 3:t.drugNum=e.ri();break;case 4:t.useClothes=e.ri();break;case 5:t.clothesList=e.ria();break;case 6:t.skillList=e.ria();break;case 7:t.equipList=e.roa("equip_item_data");break;case 8:t.reward=e.ri();break;case 9:t.startUp=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,10);return void 0!=t.templateType&&o.wi(t.templateType,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.upNum&&o.wi(t.upNum,2),void 0!=t.drugNum&&o.wi(t.drugNum,3),void 0!=t.useClothes&&o.wi(t.useClothes,4),void 0!=t.clothesList&&o.wia(t.clothesList,5),void 0!=t.skillList&&o.wia(t.skillList,6),void 0!=t.equipList&&o.woa("equip_item_data",t.equipList,7),void 0!=t.reward&&o.wi(t.reward,8),void 0!=t.startUp&&o.wi(t.startUp,9),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_template_init_data_request=a,__reflect(a.prototype,"Sproto.sc_template_init_data_request"),e.ALL_DICT.sc_template_init_data_request={en:i,de:t};var r=function(){function e(){}return e}();e.sc_template_update_data_request=r,__reflect(r.prototype,"Sproto.sc_template_update_data_request"),e.ALL_DICT.sc_template_update_data_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.pos&&o.wi(t.pos,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.washType=e.ri();break;case 2:t.lock=e.ria();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.washType&&o.wi(t.washType,1),void 0!=t.lock&&o.wia(t.lock,2),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_tiannv_wash_replace_req_request=a,__reflect(a.prototype,"Sproto.cs_tiannv_wash_replace_req_request"),e.ALL_DICT.cs_tiannv_wash_replace_req_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_tiannv_wash_req_request=r,__reflect(r.prototype,"Sproto.cs_tiannv_wash_req_request"),e.ALL_DICT.cs_tiannv_wash_req_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("tiannv_equip_data");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.woa("tiannv_equip_data",t.data,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.attrData=e.roa("tiannv_attrs_data");break;case 2:t.washData=e.roa("tiannv_attrs_data");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.attrData&&o.woa("tiannv_attrs_data",t.attrData,1),void 0!=t.washData&&o.woa("tiannv_attrs_data",t.washData,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.washNum=e.ri();break;case 2:t.attrData=e.roa("tiannv_attrs_data");break;case 3:t.washData=e.roa("tiannv_attrs_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.washNum&&o.wi(t.washNum,1),void 0!=t.attrData&&o.woa("tiannv_attrs_data",t.attrData,2),void 0!=t.washData&&o.woa("tiannv_attrs_data",t.washData,3),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type=e.ri();break;case 1:t.attrs=e.ri();break;case 2:t.skillNo=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.type&&o.wi(t.type,0),void 0!=t.attrs&&o.wi(t.attrs,1),void 0!=t.skillNo&&o.wi(t.skillNo,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.washNum=e.ri();break;case 1:t.attrData=e.roa("tiannv_attrs_data");break;case 2:t.washData=e.roa("tiannv_attrs_data");break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.washNum&&o.wi(t.washNum,0),void 0!=t.attrData&&o.woa("tiannv_attrs_data",t.attrData,1),void 0!=t.washData&&o.woa("tiannv_attrs_data",t.washData,2),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.sc_tiannv_equip_request=p,__reflect(p.prototype,"Sproto.sc_tiannv_equip_request"),e.ALL_DICT.sc_tiannv_equip_request={en:i,de:t};var h=function(){function e(){}return e}();e.sc_tiannv_wash_replace_res_request=h,__reflect(h.prototype,"Sproto.sc_tiannv_wash_replace_res_request"),e.ALL_DICT.sc_tiannv_wash_replace_res_request={en:n,de:o};var d=function(){function e(){}return e}();e.sc_tiannv_wash_res_request=d,__reflect(d.prototype,"Sproto.sc_tiannv_wash_res_request"),e.ALL_DICT.sc_tiannv_wash_res_request={en:r,de:a};var _=function(){function e(){}return e}();e.tiannv_attrs_data=_,__reflect(_.prototype,"Sproto.tiannv_attrs_data"),e.ALL_DICT.tiannv_attrs_data={en:l,de:s};var f=function(){function e(){}return e}();e.tiannv_equip_data=f,__reflect(f.prototype,"Sproto.tiannv_equip_data"),e.ALL_DICT.tiannv_equip_data={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;case 4:t.promotion=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),void 0!=t.promotion&&o.wi(t.promotion,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.useNum=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.useNum&&o.wi(t.useNum,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new R,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.drugNum=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.drugNum&&o.wi(t.drugNum,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new x,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new B,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.warType=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.warType&&o.wi(t.warType,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new U,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.use=e.ri();break;case 2:t.disuse=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.use&&o.wi(t.use,1),void 0!=t.disuse&&o.wi(t.disuse,2),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new N,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new O,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.flyexp=e.ri();break;case 2:t.flylevel=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.flyexp&&o.wi(t.flyexp,1),void 0!=t.flylevel&&o.wi(t.flylevel,2),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new F,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new V,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.promotion=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.promotion&&o.wi(t.promotion,2),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new q,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.pos=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.pos&&o.wi(t.pos,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new H,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.pos=e.ri();break;case 2:t.upNum=e.ri();break;case 3:t.lv=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.pos&&o.wi(t.pos,1),void 0!=t.upNum&&o.wi(t.upNum,2),void 0!=t.lv&&o.wi(t.lv,3),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new Y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new W,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.no=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.no&&o.wi(t.no,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),e.SprotoCore.CloseSerialize(o)}var D=function(){function e(){}return e}();e.cs_tianshen_activation_request=D,__reflect(D.prototype,"Sproto.cs_tianshen_activation_request"),e.ALL_DICT.cs_tianshen_activation_request={en:i,de:t};var P=function(){function e(){}return e}();e.cs_tianshen_activation_response=P,__reflect(P.prototype,"Sproto.cs_tianshen_activation_response"),e.ALL_DICT.cs_tianshen_activation_response={en:n,de:o};var L=function(){function e(){}return e}();e.cs_tianshen_drug_request=L,__reflect(L.prototype,"Sproto.cs_tianshen_drug_request"),e.ALL_DICT.cs_tianshen_drug_request={en:r,de:a};var R=function(){function e(){}return e}();e.cs_tianshen_drug_response=R,__reflect(R.prototype,"Sproto.cs_tianshen_drug_response"),e.ALL_DICT.cs_tianshen_drug_response={en:l,de:s};var x=function(){function e(){}return e}();e.cs_tianshen_exchange_request=x,__reflect(x.prototype,"Sproto.cs_tianshen_exchange_request"),e.ALL_DICT.cs_tianshen_exchange_request={en:u,de:c};var B=function(){function e(){}return e}();e.cs_tianshen_fight_request=B,__reflect(B.prototype,"Sproto.cs_tianshen_fight_request"),e.ALL_DICT.cs_tianshen_fight_request={en:h,de:p};var U=function(){function e(){}return e}();e.cs_tianshen_fight_response=U,__reflect(U.prototype,"Sproto.cs_tianshen_fight_response"),e.ALL_DICT.cs_tianshen_fight_response={en:_,de:d};var N=function(){function e(){}return e}();e.cs_tianshen_fly_addexp_request=N,__reflect(N.prototype,"Sproto.cs_tianshen_fly_addexp_request"),e.ALL_DICT.cs_tianshen_fly_addexp_request={en:m,de:f};var O=function(){function e(){}return e}();e.cs_tianshen_fly_addexp_response=O,__reflect(O.prototype,"Sproto.cs_tianshen_fly_addexp_response"),e.ALL_DICT.cs_tianshen_fly_addexp_response={en:v,de:g};var F=function(){function e(){}return e}();e.cs_tianshen_promotion_request=F,__reflect(F.prototype,"Sproto.cs_tianshen_promotion_request"),e.ALL_DICT.cs_tianshen_promotion_request={en:C,de:y};var V=function(){function e(){}return e}();e.cs_tianshen_promotion_response=V,__reflect(V.prototype,"Sproto.cs_tianshen_promotion_response"),e.ALL_DICT.cs_tianshen_promotion_response={en:S,de:b};var q=function(){function e(){}return e}();e.cs_tianshen_spells_request=q,__reflect(q.prototype,"Sproto.cs_tianshen_spells_request"),e.ALL_DICT.cs_tianshen_spells_request={en:T,de:G};var H=function(){function e(){}return e}();e.cs_tianshen_spells_response=H,__reflect(H.prototype,"Sproto.cs_tianshen_spells_response"),e.ALL_DICT.cs_tianshen_spells_response={en:w,de:I};var Y=function(){function e(){}return e}();e.cs_tianshen_up_level_request=Y,__reflect(Y.prototype,"Sproto.cs_tianshen_up_level_request"),e.ALL_DICT.cs_tianshen_up_level_request={en:k,de:A};var W=function(){function e(){}return e}();e.cs_tianshen_up_level_response=W,__reflect(W.prototype,"Sproto.cs_tianshen_up_level_response"),e.ALL_DICT.cs_tianshen_up_level_response={en:M,de:E}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.use=e.ri();break;case 1:t.infoList=e.roa("tianshen_data");break;case 2:t.drugNum=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.use&&o.wi(t.use,0),void 0!=t.infoList&&o.woa("tianshen_data",t.infoList,1),void 0!=t.drugNum&&o.wi(t.drugNum,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("tianshen_spells");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.woa("tianshen_spells",t.data,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.lv=e.ri();break;case 2:t.upNum=e.ri();break;case 3:t.promotion=e.ri();break;case 4:t.flydata=e.ro("tianshen_fly_data");break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.upNum&&o.wi(t.upNum,2),void 0!=t.promotion&&o.wi(t.promotion,3),void 0!=t.flydata&&o.wo("tianshen_fly_data",t.flydata,4),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.level=e.ri();break;case 1:t.exp=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.level&&o.wi(t.level,0),void 0!=t.exp&&o.wi(t.exp,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.upNum=e.ri();break;case 1:t.lv=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.upNum&&o.wi(t.upNum,0),void 0!=t.lv&&o.wi(t.lv,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.sc_tianshen_info_request=p,__reflect(p.prototype,"Sproto.sc_tianshen_info_request"),e.ALL_DICT.sc_tianshen_info_request={en:i,de:t};var h=function(){function e(){}return e}();e.sc_tianshen_spells_info_request=h,__reflect(h.prototype,"Sproto.sc_tianshen_spells_info_request"),e.ALL_DICT.sc_tianshen_spells_info_request={en:n,de:o};var d=function(){function e(){}return e}();e.tianshen_data=d,__reflect(d.prototype,"Sproto.tianshen_data"),e.ALL_DICT.tianshen_data={en:r,de:a};var _=function(){function e(){}return e}();e.tianshen_fly_data=_,__reflect(_.prototype,"Sproto.tianshen_fly_data"),e.ALL_DICT.tianshen_fly_data={en:l,de:s};var f=function(){function e(){}return e}();e.tianshen_spells=f,__reflect(f.prototype,"Sproto.tianshen_spells"),e.ALL_DICT.tianshen_spells={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.num=e.ri();break;case 2:t.autobuy=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.num&&o.wi(t.num,1),void 0!=t.autobuy&&o.wi(t.autobuy,2),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.id=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;case 4:t.todayNum=e.ri();break;case 5:t.todayId=e.ri();break;case 6:t.breach=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),void 0!=t.todayNum&&o.wi(t.todayNum,4),void 0!=t.todayId&&o.wi(t.todayId,5),void 0!=t.breach&&o.wi(t.breach,6),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.id=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;case 4:t.todayNum=e.ri();break;case 5:t.todayId=e.ri();break;case 6:t.breach=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),void 0!=t.todayNum&&o.wi(t.todayNum,4),void 0!=t.todayId&&o.wi(t.todayId,5),void 0!=t.breach&&o.wi(t.breach,6),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.id=e.ri();break;case 2:t.lv=e.ri();break;case 3:t.upNum=e.ri();break;case 4:t.todayNum=e.ri();break;case 5:t.todayId=e.ri();break;case 6:t.breach=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.id&&o.wi(t.id,1),void 0!=t.lv&&o.wi(t.lv,2),void 0!=t.upNum&&o.wi(t.upNum,3),void 0!=t.todayNum&&o.wi(t.todayNum,4),void 0!=t.todayId&&o.wi(t.todayId,5),void 0!=t.breach&&o.wi(t.breach,6),e.SprotoCore.CloseSerialize(o)}var d=function(){function e(){}return e}();e.cs_totems_add_exp_request=d,__reflect(d.prototype,"Sproto.cs_totems_add_exp_request"),e.ALL_DICT.cs_totems_add_exp_request={en:i,de:t};var _=function(){function e(){}return e}();e.cs_totems_add_exp_response=_,__reflect(_.prototype,"Sproto.cs_totems_add_exp_response"),e.ALL_DICT.cs_totems_add_exp_response={en:n,de:o};var f=function(){function e(){}return e}();e.cs_totems_breach_request=f,__reflect(f.prototype,"Sproto.cs_totems_breach_request"),e.ALL_DICT.cs_totems_breach_request={en:r,de:a};var m=function(){function e(){}return e}();e.cs_totems_breach_response=m,__reflect(m.prototype,"Sproto.cs_totems_breach_response"),e.ALL_DICT.cs_totems_breach_response={en:l,de:s};var g=function(){function e(){}return e}();e.cs_totems_open_request=g,__reflect(g.prototype,"Sproto.cs_totems_open_request"),e.ALL_DICT.cs_totems_open_request={en:u,de:c};var v=function(){function e(){}return e}();e.cs_totems_open_response=v,__reflect(v.prototype,"Sproto.cs_totems_open_response"),e.ALL_DICT.cs_totems_open_response={en:h,de:p}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("totems_data");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.woa("totems_data",t.data,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.lv=e.ri();break;case 2:t.upNum=e.ri();
break;case 3:t.todayNum=e.ri();break;case 4:t.todayId=e.ri();break;case 5:t.breach=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.lv&&o.wi(t.lv,1),void 0!=t.upNum&&o.wi(t.upNum,2),void 0!=t.todayNum&&o.wi(t.todayNum,3),void 0!=t.todayId&&o.wi(t.todayId,4),void 0!=t.breach&&o.wi(t.breach,5),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_totems_info_request=a,__reflect(a.prototype,"Sproto.sc_totems_info_request"),e.ALL_DICT.sc_totems_info_request={en:i,de:t};var r=function(){function e(){}return e}();e.totems_data=r,__reflect(r.prototype,"Sproto.totems_data"),e.ALL_DICT.totems_data={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.cs_vein_Breakthrough_request=o,__reflect(o.prototype,"Sproto.cs_vein_Breakthrough_request"),e.ALL_DICT.cs_vein_Breakthrough_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.totalattr=e.roa("attribute_data");break;case 1:t.level=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.totalattr&&o.woa("attribute_data",t.totalattr,0),void 0!=t.level&&o.wi(t.level,1),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_vein_update_request=o,__reflect(o.prototype,"Sproto.sc_vein_update_request"),e.ALL_DICT.sc_vein_update_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.lv&&o.wi(t.lv,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.lv&&o.wi(t.lv,0),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.cs_vip_get_awards_request=a,__reflect(a.prototype,"Sproto.cs_vip_get_awards_request"),e.ALL_DICT.cs_vip_get_awards_request={en:i,de:t};var r=function(){function e(){}return e}();e.cs_vip_get_other_awards_request=r,__reflect(r.prototype,"Sproto.cs_vip_get_other_awards_request"),e.ALL_DICT.cs_vip_get_other_awards_request={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.state=e.ri();break;case 3:t.otherreward=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.lv&&o.wi(t.lv,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.state&&o.wi(t.state,2),void 0!=t.otherreward&&o.wi(t.otherreward,3),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.sc_vip_update_data_request=o,__reflect(o.prototype,"Sproto.sc_vip_update_data_request"),e.ALL_DICT.sc_vip_update_data_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new o,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}var o=function(){function e(){}return e}();e.cs_vipboss_challenge_request=o,__reflect(o.prototype,"Sproto.cs_vipboss_challenge_request"),e.ALL_DICT.cs_vipboss_challenge_request={en:i,de:t}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossInfos=e.roa("vipboss_info");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossInfos&&o.woa("vipboss_info",t.bossInfos,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.bossInfo=e.ro("vipboss_info");break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.bossInfo&&o.wo("vipboss_info",t.bossInfo,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.count=e.ri();break;case 2:t.daycount=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.count&&o.wi(t.count,1),void 0!=t.daycount&&o.wi(t.daycount,2),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.sc_vipboss_base_list_request=s,__reflect(s.prototype,"Sproto.sc_vipboss_base_list_request"),e.ALL_DICT.sc_vipboss_base_list_request={en:i,de:t};var l=function(){function e(){}return e}();e.sc_vipboss_update_one_request=l,__reflect(l.prototype,"Sproto.sc_vipboss_update_one_request"),e.ALL_DICT.sc_vipboss_update_one_request={en:n,de:o};var c=function(){function e(){}return e}();e.vipboss_info=c,__reflect(c.prototype,"Sproto.vipboss_info"),e.ALL_DICT.vipboss_info={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activityId=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.activityId&&o.wi(t.activityId,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new d,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activityID=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.activityID&&o.wi(t.activityID,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new _,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activityID=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.activityID&&o.wi(t.activityID,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.index=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.index&&o.wi(t.index,1),e.SprotoCore.CloseSerialize(o)}var p=function(){function e(){}return e}();e.cs_activity_action_request=p,__reflect(p.prototype,"Sproto.cs_activity_action_request"),e.ALL_DICT.cs_activity_action_request={en:i,de:t};var h=function(){function e(){}return e}();e.cs_activity_open_request=h,__reflect(h.prototype,"Sproto.cs_activity_open_request"),e.ALL_DICT.cs_activity_open_request={en:n,de:o};var d=function(){function e(){}return e}();e.cs_activity_send_dabiao_info_request=d,__reflect(d.prototype,"Sproto.cs_activity_send_dabiao_info_request"),e.ALL_DICT.cs_activity_send_dabiao_info_request={en:r,de:a};var _=function(){function e(){}return e}();e.cs_activity_send_level_info_request=_,__reflect(_.prototype,"Sproto.cs_activity_send_level_info_request"),e.ALL_DICT.cs_activity_send_level_info_request={en:l,de:s};var f=function(){function e(){}return e}();e.cs_activity_send_reward_request=f,__reflect(f.prototype,"Sproto.cs_activity_send_reward_request"),e.ALL_DICT.cs_activity_send_reward_request={en:u,de:c}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new Dt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.Id=e.ri();break;case 1:t.timeType=e.ri();break;case 2:t.startTime=e.rs();break;case 3:t.endTime=e.rs();break;case 4:t.closetime=e.ri();break;case 5:t.activityType=e.ri();break;case 6:t.openLV=e.ri();break;case 7:t.tabicon=e.rs();break;case 8:t.desc=e.rs();break;case 9:t.openType=e.ri();break;case 10:t.source1=e.rs();break;case 11:t.source2=e.rs();break;case 12:t.notice=e.rs();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,13);return void 0!=t.Id&&o.wi(t.Id,0),void 0!=t.timeType&&o.wi(t.timeType,1),void 0!=t.startTime&&o.ws(t.startTime,2),void 0!=t.endTime&&o.ws(t.endTime,3),void 0!=t.closetime&&o.wi(t.closetime,4),void 0!=t.activityType&&o.wi(t.activityType,5),void 0!=t.openLV&&o.wi(t.openLV,6),void 0!=t.tabicon&&o.ws(t.tabicon,7),void 0!=t.desc&&o.ws(t.desc,8),void 0!=t.openType&&o.wi(t.openType,9),void 0!=t.source1&&o.ws(t.source1,10),void 0!=t.source2&&o.ws(t.source2,11),void 0!=t.notice&&o.ws(t.notice,12),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new Pt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.startTime=e.ri();break;case 2:t.endTime=e.ri();break;case 3:t.type=e.ri();break;case 4:t.openState=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.startTime&&o.wi(t.startTime,1),void 0!=t.endTime&&o.wi(t.endTime,2),void 0!=t.type&&o.wi(t.type,3),void 0!=t.openState&&o.wi(t.openState,4),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new Lt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.name=e.rs();break;case 1:t.value=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.name&&o.ws(t.name,0),void 0!=t.value&&o.wi(t.value,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new Rt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.type01=e.ro("activity_type01");break;case 1:t.type02=e.ro("activity_type02");break;case 2:t.type03=e.ro("activity_type03");break;case 3:t.type04=e.ro("activity_type04");break;case 4:t.type05=e.ro("activity_type05");break;case 5:t.type06=e.ro("activity_type06");break;case 6:t.type07=e.ro("activity_type07");break;case 7:t.type08=e.ro("activity_type08");break;case 8:t.type09=e.ro("activity_type09");break;case 9:t.type10=e.ro("activity_type10");break;case 10:t.type11=e.ro("activity_type11");break;case 11:t.type12=e.ro("activity_type12");break;case 12:t.type13=e.ro("activity_type13");break;case 13:t.type14=e.ro("activity_type14");break;case 14:t.type15=e.ro("activity_type15");break;case 15:t.type16=e.ro("activity_type16");break;case 16:t.type17=e.ro("activity_type17");break;case 17:t.type18=e.ro("activity_type18");break;case 19:t.type19=e.ro("activity_type19");break;case 20:t.type20=e.ro("activity_type20");break;case 21:t.type21=e.ro("activity_type21");break;case 22:t.type22=e.ro("activity_type22");break;case 23:t.type23=e.ro("activity_type23");break;case 24:t.type24=e.ro("activity_type24");break;case 25:t.type25=e.ro("activity_type25");break;case 26:t.type26=e.ro("activity_type26");break;case 27:t.type27=e.ro("activity_type27");break;case 28:t.basecfg=e.ro("activity_base_config");break;case 29:t.btncfg=e.rs();break;case 30:t.config=e.rs();break;case 31:t.type28=e.ro("activity_type28");break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,32);return void 0!=t.type01&&o.wo("activity_type01",t.type01,0),void 0!=t.type02&&o.wo("activity_type02",t.type02,1),void 0!=t.type03&&o.wo("activity_type03",t.type03,2),void 0!=t.type04&&o.wo("activity_type04",t.type04,3),void 0!=t.type05&&o.wo("activity_type05",t.type05,4),void 0!=t.type06&&o.wo("activity_type06",t.type06,5),void 0!=t.type07&&o.wo("activity_type07",t.type07,6),void 0!=t.type08&&o.wo("activity_type08",t.type08,7),void 0!=t.type09&&o.wo("activity_type09",t.type09,8),void 0!=t.type10&&o.wo("activity_type10",t.type10,9),void 0!=t.type11&&o.wo("activity_type11",t.type11,10),void 0!=t.type12&&o.wo("activity_type12",t.type12,11),void 0!=t.type13&&o.wo("activity_type13",t.type13,12),void 0!=t.type14&&o.wo("activity_type14",t.type14,13),void 0!=t.type15&&o.wo("activity_type15",t.type15,14),void 0!=t.type16&&o.wo("activity_type16",t.type16,15),void 0!=t.type17&&o.wo("activity_type17",t.type17,16),void 0!=t.type18&&o.wo("activity_type18",t.type18,17),void 0!=t.type19&&o.wo("activity_type19",t.type19,19),void 0!=t.type20&&o.wo("activity_type20",t.type20,20),void 0!=t.type21&&o.wo("activity_type21",t.type21,21),void 0!=t.type22&&o.wo("activity_type22",t.type22,22),void 0!=t.type23&&o.wo("activity_type23",t.type23,23),void 0!=t.type24&&o.wo("activity_type24",t.type24,24),void 0!=t.type25&&o.wo("activity_type25",t.type25,25),void 0!=t.type26&&o.wo("activity_type26",t.type26,26),void 0!=t.type27&&o.wo("activity_type27",t.type27,27),void 0!=t.basecfg&&o.wo("activity_base_config",t.basecfg,28),void 0!=t.btncfg&&o.ws(t.btncfg,29),void 0!=t.config&&o.ws(t.config,30),void 0!=t.type28&&o.wo("activity_type28",t.type28,31),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;case 1:t.num=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.no&&o.wi(t.no,0),void 0!=t.num&&o.wi(t.num,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new Bt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new Ut,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.buyData=e.ria();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.buyData&&o.wia(t.buyData,1),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new Nt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;case 2:t.day=e.ri();break;case 4:t.rechargeCount=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),void 0!=t.day&&o.wi(t.day,2),void 0!=t.rechargeCount&&o.wi(t.rechargeCount,4),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new Ot,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new Ft,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ri();break;case 2:t.logTime=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wi(t.record,1),void 0!=t.logTime&&o.wi(t.logTime,2),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new Vt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.reachindex=e.ri();break;case 2:t.value=e.ri();break;case 3:t.drawrecord=e.ri();break;case 4:t.drawtime=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,5);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.reachindex&&o.wi(t.reachindex,1),void 0!=t.value&&o.wi(t.value,2),void 0!=t.drawrecord&&o.wi(t.drawrecord,3),void 0!=t.drawtime&&o.wi(t.drawtime,4),e.SprotoCore.CloseSerialize(o)}function G(e){for(var t=new qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;case 2:t.recharge=e.ri();break;default:e.nod()}return t}function T(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),void 0!=t.recharge&&o.wi(t.recharge,2),e.SprotoCore.CloseSerialize(o)}function I(e){for(var t=new Ht,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.status=e.ri();break;case 2:t.day=e.ri();break;default:e.nod()}return t}function w(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.status&&o.wi(t.status,1),void 0!=t.day&&o.wi(t.day,2),e.SprotoCore.CloseSerialize(o)}function A(e){for(var t=new Yt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.buyData=e.ria();break;case 2:t.day=e.ri();break;default:e.nod()}return t}function k(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.buyData&&o.wia(t.buyData,1),void 0!=t.day&&o.wi(t.day,2),e.SprotoCore.CloseSerialize(o)}function E(e){for(var t=new Wt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;default:e.nod()}return t}function M(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),e.SprotoCore.CloseSerialize(o)}function D(e){for(var t=new zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.reachBin=e.ri();break;case 2:t.drawBin=e.ri();break;default:e.nod()}return t}function P(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.reachBin&&o.wi(t.reachBin,1),void 0!=t.drawBin&&o.wi(t.drawBin,2),e.SprotoCore.CloseSerialize(o)}function L(e){for(var t=new jt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.recharge=e.ri();break;case 2:t.drawBin=e.ri();break;default:e.nod()}return t}function R(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.recharge&&o.wi(t.recharge,1),void 0!=t.drawBin&&o.wi(t.drawBin,2),e.SprotoCore.CloseSerialize(o)}function x(e){for(var t=new Xt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.recharge=e.ri();break;case 2:t.drawBin=e.ri();break;default:e.nod()}return t}function B(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.recharge&&o.wi(t.recharge,1),void 0!=t.drawBin&&o.wi(t.drawBin,2),e.SprotoCore.CloseSerialize(o)}function U(e){for(var t=new Kt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;default:e.nod()}return t}function N(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),e.SprotoCore.CloseSerialize(o)}function O(e){for(var t=new Jt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.datas=e.roa("activity_type15_item");break;default:e.nod()}return t}function F(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.datas&&o.woa("activity_type15_item",t.datas,1),e.SprotoCore.CloseSerialize(o)}function V(e){for(var t=new Qt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.times=e.ri();break;case 1:t.rewardTimes=e.ri();break;default:e.nod()}return t}function q(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.times&&o.wi(t.times,0),void 0!=t.rewardTimes&&o.wi(t.rewardTimes,1),e.SprotoCore.CloseSerialize(o)}function H(e){for(var t=new Zt,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ri();break;case 2:t.logrecord=e.ri();break;default:e.nod()}return t}function Y(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wi(t.record,1),void 0!=t.logrecord&&o.wi(t.logrecord,2),e.SprotoCore.CloseSerialize(o)}function W(e){for(var t=new $t,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;case 2:t.target=e.ria();break;default:e.nod()}return t}function z(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),void 0!=t.target&&o.wia(t.target,2),e.SprotoCore.CloseSerialize(o)}function j(e){for(var t=new ei,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;case 2:t.dayrecharge=e.ri();break;default:e.nod()}return t}function X(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),void 0!=t.dayrecharge&&o.wi(t.dayrecharge,2),e.SprotoCore.CloseSerialize(o)}function K(e){for(var t=new ti,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.runday=e.ri();break;case 2:t.reachday=e.ri();break;case 3:t.record=e.ria();break;default:e.nod()}return t}function J(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.runday&&o.wi(t.runday,1),void 0!=t.reachday&&o.wi(t.reachday,2),void 0!=t.record&&o.wia(t.record,3),e.SprotoCore.CloseSerialize(o)}function Q(e){for(var t=new ii,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;default:e.nod()}return t}function Z(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),e.SprotoCore.CloseSerialize(o)}function $(e){for(var t=new oi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ria();break;case 2:t.people=e.ri();break;case 3:t.rechargeNum=e.ri();break;default:e.nod()}return t}function et(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wia(t.record,1),void 0!=t.people&&o.wi(t.people,2),void 0!=t.rechargeNum&&o.wi(t.rechargeNum,3),e.SprotoCore.CloseSerialize(o)}function tt(e){for(var t=new ni,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.gid=e.ri();break;case 2:t.record=e.ria();break;default:e.nod()}return t}function it(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.gid&&o.wi(t.gid,1),void 0!=t.record&&o.wia(t.record,2),e.SprotoCore.CloseSerialize(o)}function ot(e){for(var t=new ai,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.record=e.ri();break;case 2:t.runday=e.ri();break;case 3:t.rechargeNumber=e.ri();break;default:e.nod()}return t}function nt(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.record&&o.wi(t.record,1),void 0!=t.runday&&o.wi(t.runday,2),void 0!=t.rechargeNumber&&o.wi(t.rechargeNumber,3),e.SprotoCore.CloseSerialize(o)}function at(e){for(var t=new ri,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.status=e.ri();break;case 2:t.reward=e.ria();break;default:e.nod()}return t}function rt(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.status&&o.wi(t.status,1),void 0!=t.reward&&o.wia(t.reward,2),e.SprotoCore.CloseSerialize(o)}function st(e){for(var t=new si,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.RechargeNum=e.ri();break;case 2:t.reward=e.ri();break;default:e.nod()}return t}function lt(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.RechargeNum&&o.wi(t.RechargeNum,1),void 0!=t.reward&&o.wi(t.reward,2),e.SprotoCore.CloseSerialize(o)}function ct(e){for(var t=new li,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.buynums=e.ria();break;default:e.nod()}return t}function ut(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.buynums&&o.wia(t.buynums,1),e.SprotoCore.CloseSerialize(o)}function pt(e){for(var t=new ci,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.data=e.roa("activity_rebate");break;default:e.nod()}return t}function ht(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.data&&o.woa("activity_rebate",t.data,1),e.SprotoCore.CloseSerialize(o)}function dt(e){for(var t=new ui,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.baseData=e.ro("activity_base_type");break;case 1:t.runday=e.ri();break;case 2:t.record=e.ria();break;case 3:t.recharge=e.ri();break;default:e.nod()}return t}function _t(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.baseData&&o.wo("activity_base_type",t.baseData,0),void 0!=t.runday&&o.wi(t.runday,1),void 0!=t.record&&o.wia(t.record,2),void 0!=t.recharge&&o.wi(t.recharge,3),e.SprotoCore.CloseSerialize(o)}function ft(e){for(var t=new pi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.name=e.rs();break;case 2:t.value=e.ri();break;case 3:t.vip=e.ri();break;case 4:t.monthCard=e.ri();break;case 5:t.monthcard_super=e.ri();break;case 6:t.headId=e.ri();break;default:e.nod()}return t}function mt(t,i){var o=e.SprotoCore.GetSerialize(i,7);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,1),void 0!=t.value&&o.wi(t.value,2),void 0!=t.vip&&o.wi(t.vip,3),void 0!=t.monthCard&&o.wi(t.monthCard,4),void 0!=t.monthcard_super&&o.wi(t.monthcard_super,5),void 0!=t.headId&&o.wi(t.headId,6),e.SprotoCore.CloseSerialize(o)}function gt(e){for(var t=new hi,i=-1;-1!=(i=e.rt());)switch(i){case 1:t.acId=e.ri();break;case 2:t.index=e.ri();break;case 3:t.draw=e.ri();break;case 4:t.value=e.ri();break;case 5:t.rankInfo=e.roa("activity_dabiao_data");break;default:e.nod()}return t}function vt(t,i){var o=e.SprotoCore.GetSerialize(i,6);return void 0!=t.acId&&o.wi(t.acId,1),void 0!=t.index&&o.wi(t.index,2),void 0!=t.draw&&o.wi(t.draw,3),void 0!=t.value&&o.wi(t.value,4),void 0!=t.rankInfo&&o.woa("activity_dabiao_data",t.rankInfo,5),e.SprotoCore.CloseSerialize(o)}function yt(e){for(var t=new di,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.draw=e.ri();break;default:e.nod()}return t}function Ct(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.draw&&o.wi(t.draw,0),e.SprotoCore.CloseSerialize(o)}function bt(e){for(var t=new _i,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.datas=e.roa("activity_data_collection");break;default:e.nod()}return t}function St(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.datas&&o.woa("activity_data_collection",t.datas,0),e.SprotoCore.CloseSerialize(o)}function Gt(e){for(var t=new fi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.activityid=e.ri();break;case 1:t.rewards=e.roa("reward_data");break;default:e.nod()}return t}function Tt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.activityid&&o.wi(t.activityid,0),void 0!=t.rewards&&o.woa("reward_data",t.rewards,1),e.SprotoCore.CloseSerialize(o)}function It(e){for(var t=new mi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.data=e.roa("race_history");break;default:e.nod()}return t}function wt(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.data&&o.woa("race_history",t.data,0),e.SprotoCore.CloseSerialize(o)}function At(e){for(var t=new gi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.data=e.ro("activity_data_collection");break;default:e.nod()}return t}function kt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.data&&o.wo("activity_data_collection",t.data,1),e.SprotoCore.CloseSerialize(o)}function Et(e){for(var t=new vi,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.index=e.ri();break;case 1:t.data=e.ro("activity_data_collection");break;default:e.nod()}return t}function Mt(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.index&&o.wi(t.index,0),void 0!=t.data&&o.wo("activity_data_collection",t.data,1),e.SprotoCore.CloseSerialize(o)}var Dt=function(){function e(){}return e}();e.activity_base_config=Dt,__reflect(Dt.prototype,"Sproto.activity_base_config"),e.ALL_DICT.activity_base_config={en:i,de:t};var Pt=function(){function e(){}return e}();e.activity_base_type=Pt,__reflect(Pt.prototype,"Sproto.activity_base_type"),e.ALL_DICT.activity_base_type={en:n,de:o};var Lt=function(){function e(){}return e}();e.activity_dabiao_data=Lt,__reflect(Lt.prototype,"Sproto.activity_dabiao_data"),e.ALL_DICT.activity_dabiao_data={en:r,de:a};var Rt=function(){function e(){}return e}();e.activity_data_collection=Rt,__reflect(Rt.prototype,"Sproto.activity_data_collection"),e.ALL_DICT.activity_data_collection={en:l,de:s};var xt=function(){function e(){}return e}();e.activity_rebate=xt,__reflect(xt.prototype,"Sproto.activity_rebate"),e.ALL_DICT.activity_rebate={en:u,de:c};var Bt=function(){function e(){}return e}();e.activity_type01=Bt,__reflect(Bt.prototype,"Sproto.activity_type01"),e.ALL_DICT.activity_type01={en:h,de:p};var Ut=function(){function e(){}return e}();e.activity_type02=Ut,__reflect(Ut.prototype,"Sproto.activity_type02"),e.ALL_DICT.activity_type02={en:_,de:d};var Nt=function(){function e(){}return e}();e.activity_type03=Nt,__reflect(Nt.prototype,"Sproto.activity_type03"),e.ALL_DICT.activity_type03={en:m,de:f};var Ot=function(){function e(){}return e}();e.activity_type04=Ot,__reflect(Ot.prototype,"Sproto.activity_type04"),e.ALL_DICT.activity_type04={en:v,de:g};var Ft=function(){function e(){}return e}();e.activity_type05=Ft,__reflect(Ft.prototype,"Sproto.activity_type05"),e.ALL_DICT.activity_type05={en:C,de:y};var Vt=function(){function e(){}return e}();e.activity_type06=Vt,__reflect(Vt.prototype,"Sproto.activity_type06"),e.ALL_DICT.activity_type06={en:S,de:b};var qt=function(){function e(){}return e}();e.activity_type07=qt,__reflect(qt.prototype,"Sproto.activity_type07"),e.ALL_DICT.activity_type07={en:T,de:G};var Ht=function(){function e(){}return e}();e.activity_type08=Ht,__reflect(Ht.prototype,"Sproto.activity_type08"),e.ALL_DICT.activity_type08={en:w,de:I};var Yt=function(){function e(){}return e}();e.activity_type09=Yt,__reflect(Yt.prototype,"Sproto.activity_type09"),e.ALL_DICT.activity_type09={en:k,de:A};var Wt=function(){function e(){}return e}();e.activity_type10=Wt,__reflect(Wt.prototype,"Sproto.activity_type10"),e.ALL_DICT.activity_type10={en:M,de:E};var zt=function(){function e(){}return e}();e.activity_type11=zt,__reflect(zt.prototype,"Sproto.activity_type11"),e.ALL_DICT.activity_type11={en:P,de:D};var jt=function(){function e(){}return e}();e.activity_type12=jt,__reflect(jt.prototype,"Sproto.activity_type12"),e.ALL_DICT.activity_type12={en:R,de:L};var Xt=function(){function e(){}return e}();e.activity_type13=Xt,__reflect(Xt.prototype,"Sproto.activity_type13"),e.ALL_DICT.activity_type13={en:B,de:x};var Kt=function(){function e(){}return e}();e.activity_type14=Kt,__reflect(Kt.prototype,"Sproto.activity_type14"),e.ALL_DICT.activity_type14={en:N,de:U};var Jt=function(){function e(){}return e}();e.activity_type15=Jt,__reflect(Jt.prototype,"Sproto.activity_type15"),e.ALL_DICT.activity_type15={en:F,de:O};var Qt=function(){function e(){}return e}();e.activity_type15_item=Qt,__reflect(Qt.prototype,"Sproto.activity_type15_item"),e.ALL_DICT.activity_type15_item={en:q,de:V};var Zt=function(){function e(){}return e}();e.activity_type16=Zt,__reflect(Zt.prototype,"Sproto.activity_type16"),e.ALL_DICT.activity_type16={en:Y,de:H};var $t=function(){function e(){}return e}();e.activity_type17=$t,__reflect($t.prototype,"Sproto.activity_type17"),e.ALL_DICT.activity_type17={en:z,de:W};var ei=function(){function e(){}return e}();e.activity_type18=ei,__reflect(ei.prototype,"Sproto.activity_type18"),e.ALL_DICT.activity_type18={en:X,de:j};var ti=function(){function e(){}return e}();e.activity_type19=ti,__reflect(ti.prototype,"Sproto.activity_type19"),e.ALL_DICT.activity_type19={en:J,de:K};var ii=function(){function e(){}return e}();e.activity_type20=ii,__reflect(ii.prototype,"Sproto.activity_type20"),e.ALL_DICT.activity_type20={en:Z,de:Q};var oi=function(){function e(){}return e}();e.activity_type21=oi,__reflect(oi.prototype,"Sproto.activity_type21"),e.ALL_DICT.activity_type21={en:et,de:$};
var ni=function(){function e(){}return e}();e.activity_type22=ni,__reflect(ni.prototype,"Sproto.activity_type22"),e.ALL_DICT.activity_type22={en:it,de:tt};var ai=function(){function e(){}return e}();e.activity_type23=ai,__reflect(ai.prototype,"Sproto.activity_type23"),e.ALL_DICT.activity_type23={en:nt,de:ot};var ri=function(){function e(){}return e}();e.activity_type24=ri,__reflect(ri.prototype,"Sproto.activity_type24"),e.ALL_DICT.activity_type24={en:rt,de:at};var si=function(){function e(){}return e}();e.activity_type25=si,__reflect(si.prototype,"Sproto.activity_type25"),e.ALL_DICT.activity_type25={en:lt,de:st};var li=function(){function e(){}return e}();e.activity_type26=li,__reflect(li.prototype,"Sproto.activity_type26"),e.ALL_DICT.activity_type26={en:ut,de:ct};var ci=function(){function e(){}return e}();e.activity_type27=ci,__reflect(ci.prototype,"Sproto.activity_type27"),e.ALL_DICT.activity_type27={en:ht,de:pt};var ui=function(){function e(){}return e}();e.activity_type28=ui,__reflect(ui.prototype,"Sproto.activity_type28"),e.ALL_DICT.activity_type28={en:_t,de:dt};var pi=function(){function e(){}return e}();e.race_history=pi,__reflect(pi.prototype,"Sproto.race_history"),e.ALL_DICT.race_history={en:mt,de:ft};var hi=function(){function e(){}return e}();e.sc_activity_dabiao_info_request=hi,__reflect(hi.prototype,"Sproto.sc_activity_dabiao_info_request"),e.ALL_DICT.sc_activity_dabiao_info_request={en:vt,de:gt};var di=function(){function e(){}return e}();e.sc_activity_dabiao_reward_request=di,__reflect(di.prototype,"Sproto.sc_activity_dabiao_reward_request"),e.ALL_DICT.sc_activity_dabiao_reward_request={en:Ct,de:yt};var _i=function(){function e(){}return e}();e.sc_activity_init_info_request=_i,__reflect(_i.prototype,"Sproto.sc_activity_init_info_request"),e.ALL_DICT.sc_activity_init_info_request={en:St,de:bt};var fi=function(){function e(){}return e}();e.sc_activity_luckwheel_ret_request=fi,__reflect(fi.prototype,"Sproto.sc_activity_luckwheel_ret_request"),e.ALL_DICT.sc_activity_luckwheel_ret_request={en:Tt,de:Gt};var mi=function(){function e(){}return e}();e.sc_activity_race_history_request=mi,__reflect(mi.prototype,"Sproto.sc_activity_race_history_request"),e.ALL_DICT.sc_activity_race_history_request={en:wt,de:It};var gi=function(){function e(){}return e}();e.sc_activity_reward_result_request=gi,__reflect(gi.prototype,"Sproto.sc_activity_reward_result_request"),e.ALL_DICT.sc_activity_reward_result_request={en:kt,de:At};var vi=function(){function e(){}return e}();e.sc_activity_update_info_request=vi,__reflect(vi.prototype,"Sproto.sc_activity_update_info_request"),e.ALL_DICT.sc_activity_update_info_request={en:Mt,de:Et}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new G,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new T,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.bybNum=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.bybNum&&o.wi(t.bybNum,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new I,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.indexDay=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.indexDay&&o.wi(t.indexDay,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new w,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new A,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.lvReward=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.lvReward&&o.wi(t.lvReward,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new k,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.redeemcode=e.rs();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.redeemcode&&o.ws(t.redeemcode,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new E,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wi(t.ret,0),e.SprotoCore.CloseSerialize(o)}function f(e){for(var t=new M,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.no=e.ri();break;default:e.nod()}return t}function m(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.no&&o.wi(t.no,0),e.SprotoCore.CloseSerialize(o)}function g(e){for(var t=new D,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.welfareReward=e.ri();break;default:e.nod()}return t}function v(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.welfareReward&&o.wi(t.welfareReward,1),e.SprotoCore.CloseSerialize(o)}function y(e){for(var t=new P,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardType=e.ri();break;default:e.nod()}return t}function C(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.rewardType&&o.wi(t.rewardType,0),e.SprotoCore.CloseSerialize(o)}function b(e){for(var t=new L,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.rewardType=e.ri();break;default:e.nod()}return t}function S(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.rewardType&&o.wi(t.rewardType,1),e.SprotoCore.CloseSerialize(o)}var G=function(){function e(){}return e}();e.cs_welfare_bonus_open_request=G,__reflect(G.prototype,"Sproto.cs_welfare_bonus_open_request"),e.ALL_DICT.cs_welfare_bonus_open_request={en:i,de:t};var T=function(){function e(){}return e}();e.cs_welfare_bonus_open_response=T,__reflect(T.prototype,"Sproto.cs_welfare_bonus_open_response"),e.ALL_DICT.cs_welfare_bonus_open_response={en:n,de:o};var I=function(){function e(){}return e}();e.cs_welfare_get_loginreward_request=I,__reflect(I.prototype,"Sproto.cs_welfare_get_loginreward_request"),e.ALL_DICT.cs_welfare_get_loginreward_request={en:r,de:a};var w=function(){function e(){}return e}();e.cs_welfare_lv_reward_request=w,__reflect(w.prototype,"Sproto.cs_welfare_lv_reward_request"),e.ALL_DICT.cs_welfare_lv_reward_request={en:l,de:s};var A=function(){function e(){}return e}();e.cs_welfare_lv_reward_response=A,__reflect(A.prototype,"Sproto.cs_welfare_lv_reward_response"),e.ALL_DICT.cs_welfare_lv_reward_response={en:u,de:c};var k=function(){function e(){}return e}();e.cs_welfare_redeemcode_request=k,__reflect(k.prototype,"Sproto.cs_welfare_redeemcode_request"),e.ALL_DICT.cs_welfare_redeemcode_request={en:h,de:p};var E=function(){function e(){}return e}();e.cs_welfare_redeemcode_response=E,__reflect(E.prototype,"Sproto.cs_welfare_redeemcode_response"),e.ALL_DICT.cs_welfare_redeemcode_response={en:_,de:d};var M=function(){function e(){}return e}();e.cs_welfare_reward_request=M,__reflect(M.prototype,"Sproto.cs_welfare_reward_request"),e.ALL_DICT.cs_welfare_reward_request={en:m,de:f};var D=function(){function e(){}return e}();e.cs_welfare_reward_response=D,__reflect(D.prototype,"Sproto.cs_welfare_reward_response"),e.ALL_DICT.cs_welfare_reward_response={en:v,de:g};var P=function(){function e(){}return e}();e.cs_welfare_signin_req_request=P,__reflect(P.prototype,"Sproto.cs_welfare_signin_req_request"),e.ALL_DICT.cs_welfare_signin_req_request={en:C,de:y};var L=function(){function e(){}return e}();e.cs_welfare_signin_req_response=L,__reflect(L.prototype,"Sproto.cs_welfare_signin_req_response"),e.ALL_DICT.cs_welfare_signin_req_response={en:S,de:b}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 2:t.name=e.rs();break;case 3:t.endtime=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.name&&o.ws(t.name,2),void 0!=t.endtime&&o.wi(t.endtime,3),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new u,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.month=e.ri();break;case 1:t.week=e.ri();break;case 2:t.lvReward=e.ri();break;case 3:t.welfareReward=e.ri();break;case 4:t.rankData=e.roa("entity_shows");break;case 5:t.avgLv=e.ri();break;case 6:t.forever=e.ri();break;case 7:t.firstMonth=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,8);return void 0!=t.month&&o.wi(t.month,0),void 0!=t.week&&o.wi(t.week,1),void 0!=t.lvReward&&o.wi(t.lvReward,2),void 0!=t.welfareReward&&o.wi(t.welfareReward,3),void 0!=t.rankData&&o.woa("entity_shows",t.rankData,4),void 0!=t.avgLv&&o.wi(t.avgLv,5),void 0!=t.forever&&o.wi(t.forever,6),void 0!=t.firstMonth&&o.wi(t.firstMonth,7),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new p,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.totalLoginday=e.ri();break;case 1:t.receivemark=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.totalLoginday&&o.wi(t.totalLoginday,0),void 0!=t.receivemark&&o.wi(t.receivemark,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new h,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.rewardMark=e.ri();break;case 1:t.dailyId=e.ri();break;case 2:t.totalDay=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.rewardMark&&o.wi(t.rewardMark,0),void 0!=t.dailyId&&o.wi(t.dailyId,1),void 0!=t.totalDay&&o.wi(t.totalDay,2),e.SprotoCore.CloseSerialize(o)}var c=function(){function e(){}return e}();e.sc_welfare_bonus_add_request=c,__reflect(c.prototype,"Sproto.sc_welfare_bonus_add_request"),e.ALL_DICT.sc_welfare_bonus_add_request={en:i,de:t};var u=function(){function e(){}return e}();e.sc_welfare_info_request=u,__reflect(u.prototype,"Sproto.sc_welfare_info_request"),e.ALL_DICT.sc_welfare_info_request={en:n,de:o};var p=function(){function e(){}return e}();e.sc_welfare_login_gift_info_request=p,__reflect(p.prototype,"Sproto.sc_welfare_login_gift_info_request"),e.ALL_DICT.sc_welfare_login_gift_info_request={en:r,de:a};var h=function(){function e(){}return e}();e.sc_welfare_signin_info_request=h,__reflect(h.prototype,"Sproto.sc_welfare_signin_info_request"),e.ALL_DICT.sc_welfare_signin_info_request={en:l,de:s}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.dressId=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.dressId&&o.wi(t.dressId,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.dressId=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.dressId&&o.wi(t.dressId,1),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.drugNum=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.drugNum&&o.wi(t.drugNum,0),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.result=e.ri();break;case 1:t.drugTotal=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.result&&o.wi(t.result,0),void 0!=t.drugTotal&&o.wi(t.drugTotal,1),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.itemHandle=e.ri();break;case 1:t.pos=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.itemHandle&&o.wi(t.itemHandle,0),void 0!=t.pos&&o.wi(t.pos,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,0);return e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skillId=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.skillId&&o.wi(t.skillId,0),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.cs_wing_dress_request=f,__reflect(f.prototype,"Sproto.cs_wing_dress_request"),e.ALL_DICT.cs_wing_dress_request={en:i,de:t};var m=function(){function e(){}return e}();e.cs_wing_dress_response=m,__reflect(m.prototype,"Sproto.cs_wing_dress_response"),e.ALL_DICT.cs_wing_dress_response={en:n,de:o};var g=function(){function e(){}return e}();e.cs_wing_drug_request=g,__reflect(g.prototype,"Sproto.cs_wing_drug_request"),e.ALL_DICT.cs_wing_drug_request={en:r,de:a};var v=function(){function e(){}return e}();e.cs_wing_drug_response=v,__reflect(v.prototype,"Sproto.cs_wing_drug_response"),e.ALL_DICT.cs_wing_drug_response={en:l,de:s};var y=function(){function e(){}return e}();e.cs_wing_equip_request=y,__reflect(y.prototype,"Sproto.cs_wing_equip_request"),e.ALL_DICT.cs_wing_equip_request={en:u,de:c};var C=function(){function e(){}return e}();e.cs_wing_upgrade_level_request=C,__reflect(C.prototype,"Sproto.cs_wing_upgrade_level_request"),e.ALL_DICT.cs_wing_upgrade_level_request={en:h,de:p};var b=function(){function e(){}return e}();e.cs_wing_upgrade_skill_request=b,__reflect(b.prototype,"Sproto.cs_wing_upgrade_skill_request"),e.ALL_DICT.cs_wing_upgrade_skill_request={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new s,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.equipDatas=e.ro("item_data");break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.equipDatas&&o.wo("item_data",t.equipDatas,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new l,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.lv=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.upexp=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.lv&&o.wi(t.lv,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.upexp&&o.wi(t.upexp,2),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new c,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.skillId=e.ri();break;case 1:t.lv=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.skillId&&o.wi(t.skillId,0),void 0!=t.lv&&o.wi(t.lv,1),e.SprotoCore.CloseSerialize(o)}var s=function(){function e(){}return e}();e.sc_wing_equip_request=s,__reflect(s.prototype,"Sproto.sc_wing_equip_request"),e.ALL_DICT.sc_wing_equip_request={en:i,de:t};var l=function(){function e(){}return e}();e.sc_wing_upgrade_level_request=l,__reflect(l.prototype,"Sproto.sc_wing_upgrade_level_request"),e.ALL_DICT.sc_wing_upgrade_level_request={en:n,de:o};var c=function(){function e(){}return e}();e.sc_wing_upgrade_skill_request=c,__reflect(c.prototype,"Sproto.sc_wing_upgrade_skill_request"),e.ALL_DICT.sc_wing_upgrade_skill_request={en:r,de:a}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.first=e.ri();break;case 1:t.second=e.ri();break;case 2:t.third=e.ri();break;case 3:t.four=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.first&&o.wi(t.first,0),void 0!=t.second&&o.wi(t.second,1),void 0!=t.third&&o.wi(t.third,2),void 0!=t.four&&o.wi(t.four,3),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.star=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.star&&o.wi(t.star,1),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.cs_xianjun_active_request=f,__reflect(f.prototype,"Sproto.cs_xianjun_active_request"),e.ALL_DICT.cs_xianjun_active_request={en:i,de:t};var m=function(){function e(){}return e}();e.cs_xianjun_active_response=m,__reflect(m.prototype,"Sproto.cs_xianjun_active_response"),e.ALL_DICT.cs_xianjun_active_response={en:n,de:o};var g=function(){function e(){}return e}();e.cs_xianjun_addexp_request=g,__reflect(g.prototype,"Sproto.cs_xianjun_addexp_request"),e.ALL_DICT.cs_xianjun_addexp_request={en:r,de:a};var v=function(){function e(){}return e}();e.cs_xianjun_addexp_response=v,__reflect(v.prototype,"Sproto.cs_xianjun_addexp_response"),e.ALL_DICT.cs_xianjun_addexp_response={en:l,de:s};var y=function(){function e(){}return e}();e.cs_xianjun_outbound_request=y,__reflect(y.prototype,"Sproto.cs_xianjun_outbound_request"),e.ALL_DICT.cs_xianjun_outbound_request={en:u,de:c};var C=function(){function e(){}return e}();e.cs_xianjun_upstar_request=C,__reflect(C.prototype,"Sproto.cs_xianjun_upstar_request"),e.ALL_DICT.cs_xianjun_upstar_request={en:h,de:p};var b=function(){function e(){}return e}();e.cs_xianjun_upstar_response=b,__reflect(b.prototype,"Sproto.cs_xianjun_upstar_response"),e.ALL_DICT.cs_xianjun_upstar_response={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.list=e.roa("xianjun_info");break;case 1:t.outbound=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.list&&o.woa("xianjun_info",t.list,0),void 0!=t.outbound&&o.wia(t.outbound,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;case 3:t.star=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.star&&o.wi(t.star,3),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_xianjun_init_request=a,__reflect(a.prototype,"Sproto.sc_xianjun_init_request"),e.ALL_DICT.sc_xianjun_init_request={en:i,de:t};var r=function(){function e(){}return e}();e.xianjun_info=r,__reflect(r.prototype,"Sproto.xianjun_info"),e.ALL_DICT.xianjun_info={en:n,de:o}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new f,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new m,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.ret&&o.wb(t.ret,0),e.SprotoCore.CloseSerialize(o)}function a(e){for(var t=new g,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.autoBuy=e.ri();break;default:e.nod()}return t}function r(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.autoBuy&&o.wi(t.autoBuy,1),e.SprotoCore.CloseSerialize(o)}function s(e){for(var t=new v,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;default:e.nod()}return t}function l(t,i){var o=e.SprotoCore.GetSerialize(i,3);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),e.SprotoCore.CloseSerialize(o)}function c(e){for(var t=new y,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.first=e.ri();break;case 1:t.second=e.ri();break;default:e.nod()}return t}function u(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.first&&o.wi(t.first,0),void 0!=t.second&&o.wi(t.second,1),e.SprotoCore.CloseSerialize(o)}function p(e){for(var t=new C,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;default:e.nod()}return t}function h(t,i){var o=e.SprotoCore.GetSerialize(i,1);return void 0!=t.id&&o.wi(t.id,0),e.SprotoCore.CloseSerialize(o)}function d(e){for(var t=new b,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.ret=e.rb();break;case 1:t.star=e.ri();break;default:e.nod()}return t}function _(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.ret&&o.wb(t.ret,0),void 0!=t.star&&o.wi(t.star,1),e.SprotoCore.CloseSerialize(o)}var f=function(){function e(){}return e}();e.cs_xianlv_active_request=f,__reflect(f.prototype,"Sproto.cs_xianlv_active_request"),e.ALL_DICT.cs_xianlv_active_request={en:i,de:t};var m=function(){function e(){}return e}();e.cs_xianlv_active_response=m,__reflect(m.prototype,"Sproto.cs_xianlv_active_response"),e.ALL_DICT.cs_xianlv_active_response={en:n,de:o};var g=function(){function e(){}return e}();e.cs_xianlv_addexp_request=g,__reflect(g.prototype,"Sproto.cs_xianlv_addexp_request"),e.ALL_DICT.cs_xianlv_addexp_request={en:r,de:a};var v=function(){function e(){}return e}();e.cs_xianlv_addexp_response=v,__reflect(v.prototype,"Sproto.cs_xianlv_addexp_response"),e.ALL_DICT.cs_xianlv_addexp_response={en:l,de:s};var y=function(){function e(){}return e}();e.cs_xianlv_outbound_request=y,__reflect(y.prototype,"Sproto.cs_xianlv_outbound_request"),e.ALL_DICT.cs_xianlv_outbound_request={en:u,de:c};var C=function(){function e(){}return e}();e.cs_xianlv_upstar_request=C,__reflect(C.prototype,"Sproto.cs_xianlv_upstar_request"),e.ALL_DICT.cs_xianlv_upstar_request={en:h,de:p};var b=function(){function e(){}return e}();e.cs_xianlv_upstar_response=b,__reflect(b.prototype,"Sproto.cs_xianlv_upstar_response"),e.ALL_DICT.cs_xianlv_upstar_response={en:_,de:d}}(Sproto||(Sproto={}));var Sproto;!function(e){function t(e){for(var t=new a,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.list=e.roa("xianlv_info");break;case 1:t.outbound=e.ria();break;default:e.nod()}return t}function i(t,i){var o=e.SprotoCore.GetSerialize(i,2);return void 0!=t.list&&o.woa("xianlv_info",t.list,0),void 0!=t.outbound&&o.wia(t.outbound,1),e.SprotoCore.CloseSerialize(o)}function o(e){for(var t=new r,i=-1;-1!=(i=e.rt());)switch(i){case 0:t.id=e.ri();break;case 1:t.exp=e.ri();break;case 2:t.level=e.ri();break;case 3:t.star=e.ri();break;default:e.nod()}return t}function n(t,i){var o=e.SprotoCore.GetSerialize(i,4);return void 0!=t.id&&o.wi(t.id,0),void 0!=t.exp&&o.wi(t.exp,1),void 0!=t.level&&o.wi(t.level,2),void 0!=t.star&&o.wi(t.star,3),e.SprotoCore.CloseSerialize(o)}var a=function(){function e(){}return e}();e.sc_xianlv_init_request=a,__reflect(a.prototype,"Sproto.sc_xianlv_init_request"),e.ALL_DICT.sc_xianlv_init_request={en:i,de:t};var r=function(){function e(){}return e}();e.xianlv_info=r,__reflect(r.prototype,"Sproto.xianlv_info"),e.ALL_DICT.xianlv_info={en:n,de:o}}(Sproto||(Sproto={}));var GameLogic=function(e){function t(){var t=e.call(this)||this;return t.actorModel=new ActorModel,t.isInit=!0,t.regNetMsg(S2cProtocol.gold_change,t.doGoldChange),t.regNetMsg(S2cProtocol.exp_change,t.doExp),t.regNetMsg(S2cProtocol.sub_role_att_change,t.doSubRoleAtt),t.regNetMsg(S2cProtocol.show_server_tip,t.doTips),t.regNetMsg(S2cProtocol.first_register,t.doFirstRegister),t.regNetMsg(S2cProtocol.sc_welcome,t.doWelcome),t.RegNetMsgs(S2cProtocol.player_guild_change,t.doGuildChange),t.regNetMsg(S2cProtocol.sc_actor_base,t.doActorInfo),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.SendClientPoint=function(e){var t=new Sproto.cs_send_client_point_request;t.point=e,this.Rpc(C2sProtocol.cs_send_client_point,t)},t.prototype.sendNewRole=function(e,t){var i=new Sproto.cs_create_new_sub_role_request;i.job=e,i.sex=t,GameSocket.ins().Rpc(C2sProtocol.cs_create_new_sub_role,i)},t.SendGM=function(e){var t=new Sproto.cs_sene_gm_command_request;t.cmd=e,GameSocket.ins().Rpc(C2sProtocol.cs_sene_gm_command,t)},t.prototype.doActorInfo=function(e){t.ins().actorModel.parser(e),this.isInit&&(this.isInit=!1,GameGlobal.MessageCenter.dispatch(MessageDef.postInitActorInfo))},t.prototype.doGoldChange=function(e){var i=t.ins().actorModel,o=e.type;if(1==o){var n=i.gold,a=e.value;i.gold=a,a!=n&&GameGlobal.MessageCenter.dispatch(MessageDef.GOLD_CHANGE)}else if(4==o){var r=e.value;if(i.soul>0){var s=r-i.soul;if(s>0){var l="";l="|C:0xffb02d&T:灵魄  +"+s+"|",UserTips.ins().showTips(l)}}i.soul=r}else if(o==MoneyConst.yuanbao){var c=i.yb,u=e.value;i.yb=u,c!=u&&GameGlobal.MessageCenter.dispatch(MessageDef.YB_CHANGE)}else if(o==MoneyConst.byb){var p=i.byb,h=e.value;i.byb=h,p!=h&&GameGlobal.MessageCenter.dispatch(MessageDef.BYB_CHANGE)}else if(o==MoneyConst.GuildContrib){var d=i.contrib,_=e.value;if(i.contrib=_,_>d){var f=ResDataPath.GetItemFullPath("item1009");UserTips.ins().showContTips("帮会贡献 +"+(_-d),f)}_!=d&&GameGlobal.MessageCenter.dispatch(MessageDef.GUILD_CONTRIB_UPDATE)}else if(o==MoneyConst.GuildFund){var m=e.value;m>0&&m>0&&UserTips.ins().showTips("帮会资金 +"+m)}else if(o==MoneyConst.Medal){var m=e.value,g=m-GameGlobal.Arena.getMedal();g>0&&UserTips.ins().showTips("功勋 +"+g),m>0&&GameGlobal.Arena.setMedal(m)}else if(o==MoneyConst.FriendCion){var m=e.value-i.friendCoin;m>0&&UserTips.ins().showTips("友情币*"+m),i.friendCoin=e.value}else console.warn("GameLogic:doGoldChange type => "+o)},t.prototype.doExp=function(e){var i=t.ins().actorModel,o=i.level,n=e.level;i.level=n;var a=i.exp,r=e.exp;if(i.exp=r,a!=r&&GameGlobal.MessageCenter.dispatch(MessageDef.EXP_CHANGE),o<i.level&&this.levelEffect(),e.upexp>0){var s=ResDataPath.GetItemFullPath("ui_zjm_exp1");UserTips.ins().showContTips("|C:0x23CA23&T:经验 +"+e.upexp+"|",s)}},t.prototype.doSubRoleAtt=function(e){SubRoles.ins().doSubRoleAtt(e)},t.prototype.doTips=function(e){},t.prototype.doFirstRegister=function(e){},t.prototype.doWelcome=function(){ViewManager.ins().open(WelComeLandingPanel)},t.SendWelcome=function(){GameSocket.ins().Rpc(C2sProtocol.cs_welcome_confirm)},t.prototype.doGuildChange=function(e){t.ins().actorModel.setGuild(e.guildID,e.guildName)},t.prototype.doGuildFbBossBlood=function(e){},t.prototype.sendRename=function(e){var t=new Sproto.cs_change_player_name_request;t.name=e,GameSocket.ins().Rpc(C2sProtocol.cs_change_player_name,t)},t.prototype.levelEffect=function(){},t}(BaseSystem);__reflect(GameLogic.prototype,"GameLogic");var RoleMgr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errorCode=["","sql错误","用户没登陆","游戏服务没准备好","角色上一次保存数据是否出现异常","客户端选择角色的常规错误","角色名称重复","角色不存在","错误的性别","随机生成的名字已经分配完","客户端上传的角色阵营参数错误","客户端上传的角色职业参数错误","名称无效，名称中包含非法字符或长度不合法","如果玩家是帮主，不能删除该角色，需要玩家退帮","已经登陆到其他服务器","已经超过最大可建角色数量"],t.m_FirstVerify=!0,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doCheckAccount=function(e){var i=e.result;if(GameSocket.ins().CheckAccount(0==i),0==i){if(console.log("验证成功"),!GameGlobal.GetGameUtil["true"])return;var o=new Sproto.QueryList_request;GameSocket.ins().Rpc(C2sProtocol.QueryList,o,this.doRoleList,this)}else console.log("验证失败"),alert(t.LONGIN_ERROR_CODE[i]),3==i?window.connectError():1==i&&LocationProperty.Reload()},t.GetRoleState=function(e){return e.actorlist?e.actorlist.length>1?2:0==e.actorlist.length?1:0:e.actorid?1:0},t.GetFirstRole=function(e){return e.actorlist&&e.actorlist.length>0?e.actorlist[0].dbid:e.actorid},t.prototype.doRoleList=function(e){if(GameGlobal.GetGameUtil["true"])if(e.actorlist&&e.actorlist.length>0&&e.actorlist.sort(function(e,t){return e.serverindex-t.serverindex}),0!=t.GetRoleState(e))this.sendEnterGame(t.GetFirstRole(e));else{var i=Main.Instance.mCreateRoleData;if(null!=i){var o=i.crn,n=i.crji%2,a=Math.floor(i.crji/2)+1;console.log("创建角色中!!!"),this.sendCreateRole(o,n,a)}else Main.Instance.ShowGame(),SceneManager.ins().runScene(CreateRoleScene)}},t.EnterGame=function(){return 0==t.actorid?void console.log("RoleMgr roleid == 0"):void t.ins().sendEnterGame(t.actorid)},t.prototype.sendEnterGame=function(e){console.log("> SendEnterGame");var t=new Sproto.EnterGame_request;t.actorid=e,GameSocket.ins().Rpc(C2sProtocol.EnterGame,t,this.doEnterGame,this)},t.prototype.doEnterGame=function(e){switch(e.result){case 0:console.log("进入游戏"),GameGlobal.RaidMgr.Clear(),SceneManager.ins().runScene(MainScene);break;default:4==e.result?alert("帐号被封停，请联系客服QQ："+(e.QQ||"")):alert("进入游戏错误码:"+e.result)}},t.prototype.sendCreateRole=function(e,t,i){this.m_TempName=e;var o=new Sproto.CreateActor_request;o.actorname=e,o.sex=t,o.job=i,o.icon=0,o.pf="",GameSocket.ins().Rpc(C2sProtocol.CreateActor,o,this.doCreateRole,this)},t.prototype.doCreateRole=function(e){0==e.result?(t.actorid=e.actorid,console.log("创建完成，进入游戏!!!"),this.sendEnterGame(e.actorid)):(egret.is(SceneManager.ins().getCurrScene(),"CreateRoleScene")||(Main.Instance.ShowGame(),SceneManager.ins().runScene(CreateRoleScene)),this.showErrorTips(e.result))},t.prototype.StartLoadGame=function(){},t.prototype.showErrorTips=function(e){0!=e&&(console.warn("showErrorTips"+e),alert(t.Create_Actor_Error[e]))},t.actorid=0,t.Create_Actor_Error=["","角色不存在","重复创建角色","创建角色失败","性别职业错误","角色名称重复","角色名含特殊字符","角色名过长","角色名含有屏蔽字","角色名称重复"],t.LONGIN_ERROR_CODE=["","账号信息已过期，请重新登录","没有这个账号","账号已登录，请刷新页面，最长需等待3分钟后重新登录","服务器忙","服务器维护中","Session服务器出错，可能数据库没连接好","服务器正在维护中！！！","账号已纳入防沉迷系统，是否需要进行身份证信息填写？"],t}(BaseSystem);__reflect(RoleMgr.prototype,"RoleMgr");